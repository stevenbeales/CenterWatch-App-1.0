!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e="length"in t&&t.length,i=st.type(t);return"function"!==i&&!st.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t))}function n(t,e,i){if(st.isFunction(e))return st.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return st.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(dt.test(e))return st.filter(e,t,i);e=st.filter(e,t)}return st.grep(t,function(t){return st.inArray(t,e)>=0!==i})}function s(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function o(t){var e=yt[t]={};return st.each(t.match(_t)||[],function(t,i){e[i]=!0}),e}function a(){ft.addEventListener?(ft.removeEventListener("DOMContentLoaded",r,!1),t.removeEventListener("load",r,!1)):(ft.detachEvent("onreadystatechange",r),t.detachEvent("onload",r))}function r(){(ft.addEventListener||"load"===event.type||"complete"===ft.readyState)&&(a(),st.ready())}function l(t,e,i){if(void 0===i&&1===t.nodeType){var n="data-"+e.replace(Dt,"-$1").toLowerCase();if(i=t.getAttribute(n),"string"==typeof i){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:Ct.test(i)?st.parseJSON(i):i)}catch(s){}st.data(t,e,i)}else i=void 0}return i}function h(t){var e;for(e in t)if(("data"!==e||!st.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function u(t,e,i,n){if(st.acceptData(t)){var s,o,a=st.expando,r=t.nodeType,l=r?st.cache:t,h=r?t[a]:t[a]&&a;if(h&&l[h]&&(n||l[h].data)||void 0!==i||"string"!=typeof e)return h||(h=r?t[a]=X.pop()||st.guid++:a),l[h]||(l[h]=r?{}:{toJSON:st.noop}),("object"==typeof e||"function"==typeof e)&&(n?l[h]=st.extend(l[h],e):l[h].data=st.extend(l[h].data,e)),o=l[h],n||(o.data||(o.data={}),o=o.data),void 0!==i&&(o[st.camelCase(e)]=i),"string"==typeof e?(s=o[e],null==s&&(s=o[st.camelCase(e)])):s=o,s}}function c(t,e,i){if(st.acceptData(t)){var n,s,o=t.nodeType,a=o?st.cache:t,r=o?t[st.expando]:st.expando;if(a[r]){if(e&&(n=i?a[r]:a[r].data)){st.isArray(e)?e=e.concat(st.map(e,st.camelCase)):e in n?e=[e]:(e=st.camelCase(e),e=e in n?[e]:e.split(" ")),s=e.length;for(;s--;)delete n[e[s]];if(i?!h(n):!st.isEmptyObject(n))return}(i||(delete a[r].data,h(a[r])))&&(o?st.cleanData([t],!0):it.deleteExpando||a!=a.window?delete a[r]:a[r]=null)}}}function d(){return!0}function p(){return!1}function f(){try{return ft.activeElement}catch(t){}}function m(t){var e=Ot.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function g(t,e){var i,n,s=0,o=typeof t.getElementsByTagName!==kt?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==kt?t.querySelectorAll(e||"*"):void 0;if(!o)for(o=[],i=t.childNodes||t;null!=(n=i[s]);s++)!e||st.nodeName(n,e)?o.push(n):st.merge(o,g(n,e));return void 0===e||e&&st.nodeName(t,e)?st.merge([t],o):o}function v(t){Mt.test(t.type)&&(t.defaultChecked=t.checked)}function b(t,e){return st.nodeName(t,"table")&&st.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function _(t){return t.type=(null!==st.find.attr(t,"type"))+"/"+t.type,t}function y(t){var e=Kt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function w(t,e){for(var i,n=0;null!=(i=t[n]);n++)st._data(i,"globalEval",!e||st._data(e[n],"globalEval"))}function x(t,e){if(1===e.nodeType&&st.hasData(t)){var i,n,s,o=st._data(t),a=st._data(e,o),r=o.events;if(r){delete a.handle,a.events={};for(i in r)for(n=0,s=r[i].length;s>n;n++)st.event.add(e,i,r[i][n])}a.data&&(a.data=st.extend({},a.data))}}function k(t,e){var i,n,s;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!it.noCloneEvent&&e[st.expando]){s=st._data(e);for(n in s.events)st.removeEvent(e,n,s.handle);e.removeAttribute(st.expando)}"script"===i&&e.text!==t.text?(_(e).text=t.text,y(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),it.html5Clone&&t.innerHTML&&!st.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&Mt.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}}function C(e,i){var n,s=st(i.createElement(e)).appendTo(i.body),o=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(s[0]))?n.display:st.css(s[0],"display");return s.detach(),o}function D(t){var e=ft,i=Zt[t];return i||(i=C(t,e),"none"!==i&&i||(Qt=(Qt||st("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Qt[0].contentWindow||Qt[0].contentDocument).document,e.write(),e.close(),i=C(t,e),Qt.detach()),Zt[t]=i),i}function T(t,e){return{get:function(){var i=t();if(null!=i)return i?void delete this.get:(this.get=e).apply(this,arguments)}}}function I(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,s=de.length;s--;)if(e=de[s]+i,e in t)return e;return n}function S(t,e){for(var i,n,s,o=[],a=0,r=t.length;r>a;a++)n=t[a],n.style&&(o[a]=st._data(n,"olddisplay"),i=n.style.display,e?(o[a]||"none"!==i||(n.style.display=""),""===n.style.display&&St(n)&&(o[a]=st._data(n,"olddisplay",D(n.nodeName)))):(s=St(n),(i&&"none"!==i||!s)&&st._data(n,"olddisplay",s?i:st.css(n,"display"))));for(a=0;r>a;a++)n=t[a],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?o[a]||"":"none"));return t}function N(t,e,i){var n=le.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function M(t,e,i,n,s){for(var o=i===(n?"border":"content")?4:"width"===e?1:0,a=0;4>o;o+=2)"margin"===i&&(a+=st.css(t,i+It[o],!0,s)),n?("content"===i&&(a-=st.css(t,"padding"+It[o],!0,s)),"margin"!==i&&(a-=st.css(t,"border"+It[o]+"Width",!0,s))):(a+=st.css(t,"padding"+It[o],!0,s),"padding"!==i&&(a+=st.css(t,"border"+It[o]+"Width",!0,s)));return a}function E(t,e,i){var n=!0,s="width"===e?t.offsetWidth:t.offsetHeight,o=te(t),a=it.boxSizing&&"border-box"===st.css(t,"boxSizing",!1,o);if(0>=s||null==s){if(s=ee(t,e,o),(0>s||null==s)&&(s=t.style[e]),ne.test(s))return s;n=a&&(it.boxSizingReliable()||s===t.style[e]),s=parseFloat(s)||0}return s+M(t,e,i||(a?"border":"content"),n,o)+"px"}function P(t,e,i,n,s){return new P.prototype.init(t,e,i,n,s)}function A(){return setTimeout(function(){pe=void 0}),pe=st.now()}function H(t,e){var i,n={height:t},s=0;for(e=e?1:0;4>s;s+=2-e)i=It[s],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function z(t,e,i){for(var n,s=(_e[e]||[]).concat(_e["*"]),o=0,a=s.length;a>o;o++)if(n=s[o].call(i,e,t))return n}function O(t,e,i){var n,s,o,a,r,l,h,u,c=this,d={},p=t.style,f=t.nodeType&&St(t),m=st._data(t,"fxshow");i.queue||(r=st._queueHooks(t,"fx"),null==r.unqueued&&(r.unqueued=0,l=r.empty.fire,r.empty.fire=function(){r.unqueued||l()}),r.unqueued++,c.always(function(){c.always(function(){r.unqueued--,st.queue(t,"fx").length||r.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],h=st.css(t,"display"),u="none"===h?st._data(t,"olddisplay")||D(t.nodeName):h,"inline"===u&&"none"===st.css(t,"float")&&(it.inlineBlockNeedsLayout&&"inline"!==D(t.nodeName)?p.zoom=1:p.display="inline-block")),i.overflow&&(p.overflow="hidden",it.shrinkWrapBlocks()||c.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in e)if(s=e[n],me.exec(s)){if(delete e[n],o=o||"toggle"===s,s===(f?"hide":"show")){if("show"!==s||!m||void 0===m[n])continue;f=!0}d[n]=m&&m[n]||st.style(t,n)}else h=void 0;if(st.isEmptyObject(d))"inline"===("none"===h?D(t.nodeName):h)&&(p.display=h);else{m?"hidden"in m&&(f=m.hidden):m=st._data(t,"fxshow",{}),o&&(m.hidden=!f),f?st(t).show():c.done(function(){st(t).hide()}),c.done(function(){var e;st._removeData(t,"fxshow");for(e in d)st.style(t,e,d[e])});for(n in d)a=z(f?m[n]:0,n,c),n in m||(m[n]=a.start,f&&(a.end=a.start,a.start="width"===n||"height"===n?1:0))}}function W(t,e){var i,n,s,o,a;for(i in t)if(n=st.camelCase(i),s=e[n],o=t[i],st.isArray(o)&&(s=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),a=st.cssHooks[n],a&&"expand"in a){o=a.expand(o),delete t[n];for(i in o)i in t||(t[i]=o[i],e[i]=s)}else e[n]=s}function F(t,e,i){var n,s,o=0,a=be.length,r=st.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var e=pe||A(),i=Math.max(0,h.startTime+h.duration-e),n=i/h.duration||0,o=1-n,a=0,l=h.tweens.length;l>a;a++)h.tweens[a].run(o);return r.notifyWith(t,[h,o,i]),1>o&&l?i:(r.resolveWith(t,[h]),!1)},h=r.promise({elem:t,props:st.extend({},e),opts:st.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:pe||A(),duration:i.duration,tweens:[],createTween:function(e,i){var n=st.Tween(t,h.opts,e,i,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(n),n},stop:function(e){var i=0,n=e?h.tweens.length:0;if(s)return this;for(s=!0;n>i;i++)h.tweens[i].run(1);return e?r.resolveWith(t,[h,e]):r.rejectWith(t,[h,e]),this}}),u=h.props;for(W(u,h.opts.specialEasing);a>o;o++)if(n=be[o].call(h,t,u,h.opts))return n;return st.map(u,z,h),st.isFunction(h.opts.start)&&h.opts.start.call(t,h),st.fx.timer(st.extend(l,{elem:t,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function L(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,s=0,o=e.toLowerCase().match(_t)||[];if(st.isFunction(i))for(;n=o[s++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function j(t,e,i,n){function s(r){var l;return o[r]=!0,st.each(t[r]||[],function(t,r){var h=r(e,i,n);return"string"!=typeof h||a||o[h]?a?!(l=h):void 0:(e.dataTypes.unshift(h),s(h),!1)}),l}var o={},a=t===Be;return s(e.dataTypes[0])||!o["*"]&&s("*")}function R(t,e){var i,n,s=st.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((s[n]?t:i||(i={}))[n]=e[n]);return i&&st.extend(!0,t,i),t}function q(t,e,i){for(var n,s,o,a,r=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===s&&(s=t.mimeType||e.getResponseHeader("Content-Type"));if(s)for(a in r)if(r[a]&&r[a].test(s)){l.unshift(a);break}if(l[0]in i)o=l[0];else{for(a in i){if(!l[0]||t.converters[a+" "+l[0]]){o=a;break}n||(n=a)}o=o||n}return o?(o!==l[0]&&l.unshift(o),i[o]):void 0}function B(t,e,i,n){var s,o,a,r,l,h={},u=t.dataTypes.slice();if(u[1])for(a in t.converters)h[a.toLowerCase()]=t.converters[a];for(o=u.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=h[l+" "+o]||h["* "+o],!a)for(s in h)if(r=s.split(" "),r[1]===o&&(a=h[l+" "+r[0]]||h["* "+r[0]])){a===!0?a=h[s]:h[s]!==!0&&(o=r[0],u.unshift(r[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(c){return{state:"parsererror",error:a?c:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function Y(t,e,i,n){var s;if(st.isArray(e))st.each(e,function(e,s){i||Ke.test(t)?n(t,s):Y(t+"["+("object"==typeof s?e:"")+"]",s,i,n)});else if(i||"object"!==st.type(e))n(t,e);else for(s in e)Y(t+"["+s+"]",e[s],i,n)}function $(){try{return new t.XMLHttpRequest}catch(e){}}function U(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function K(t){return st.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}var X=[],V=X.slice,G=X.concat,J=X.push,Q=X.indexOf,Z={},tt=Z.toString,et=Z.hasOwnProperty,it={},nt="1.11.3",st=function(t,e){return new st.fn.init(t,e)},ot=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,at=/^-ms-/,rt=/-([\da-z])/gi,lt=function(t,e){return e.toUpperCase()};st.fn=st.prototype={jquery:nt,constructor:st,selector:"",length:0,toArray:function(){return V.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:V.call(this)},pushStack:function(t){var e=st.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return st.each(this,t,e)},map:function(t){return this.pushStack(st.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(V.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:J,sort:X.sort,splice:X.splice},st.extend=st.fn.extend=function(){var t,e,i,n,s,o,a=arguments[0]||{},r=1,l=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[r]||{},r++),"object"==typeof a||st.isFunction(a)||(a={}),r===l&&(a=this,r--);l>r;r++)if(null!=(s=arguments[r]))for(n in s)t=a[n],i=s[n],a!==i&&(h&&i&&(st.isPlainObject(i)||(e=st.isArray(i)))?(e?(e=!1,o=t&&st.isArray(t)?t:[]):o=t&&st.isPlainObject(t)?t:{},a[n]=st.extend(h,o,i)):void 0!==i&&(a[n]=i));return a},st.extend({expando:"jQuery"+(nt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===st.type(t)},isArray:Array.isArray||function(t){return"array"===st.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!st.isArray(t)&&t-parseFloat(t)+1>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==st.type(t)||t.nodeType||st.isWindow(t))return!1;try{if(t.constructor&&!et.call(t,"constructor")&&!et.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(it.ownLast)for(e in t)return et.call(t,e);for(e in t);return void 0===e||et.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Z[tt.call(t)]||"object":typeof t},globalEval:function(e){e&&st.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(at,"ms-").replace(rt,lt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var s,o=0,a=t.length,r=i(t);if(n){if(r)for(;a>o&&(s=e.apply(t[o],n),s!==!1);o++);else for(o in t)if(s=e.apply(t[o],n),s===!1)break}else if(r)for(;a>o&&(s=e.call(t[o],o,t[o]),s!==!1);o++);else for(o in t)if(s=e.call(t[o],o,t[o]),s===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(ot,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?st.merge(n,"string"==typeof t?[t]:t):J.call(n,t)),n},inArray:function(t,e,i){var n;if(e){if(Q)return Q.call(e,t,i);for(n=e.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,e){for(var i=+e.length,n=0,s=t.length;i>n;)t[s++]=e[n++];if(i!==i)for(;void 0!==e[n];)t[s++]=e[n++];return t.length=s,t},grep:function(t,e,i){for(var n,s=[],o=0,a=t.length,r=!i;a>o;o++)n=!e(t[o],o),n!==r&&s.push(t[o]);return s},map:function(t,e,n){var s,o=0,a=t.length,r=i(t),l=[];if(r)for(;a>o;o++)s=e(t[o],o,n),null!=s&&l.push(s);else for(o in t)s=e(t[o],o,n),null!=s&&l.push(s);return G.apply([],l)},guid:1,proxy:function(t,e){var i,n,s;return"string"==typeof e&&(s=t[e],e=t,t=s),st.isFunction(t)?(i=V.call(arguments,2),n=function(){return t.apply(e||this,i.concat(V.call(arguments)))},n.guid=t.guid=t.guid||st.guid++,n):void 0},now:function(){return+new Date},support:it}),st.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()});var ht=function(t){function e(t,e,i,n){var s,o,a,r,l,h,c,p,f,m;if((e?e.ownerDocument||e:j)!==P&&E(e),e=e||P,i=i||[],r=e.nodeType,"string"!=typeof t||!t||1!==r&&9!==r&&11!==r)return i;if(!n&&H){if(11!==r&&(s=bt.exec(t)))if(a=s[1]){if(9===r){if(o=e.getElementById(a),!o||!o.parentNode)return i;if(o.id===a)return i.push(o),i}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(a))&&F(e,o)&&o.id===a)return i.push(o),i}else{if(s[2])return Q.apply(i,e.getElementsByTagName(t)),i;if((a=s[3])&&w.getElementsByClassName)return Q.apply(i,e.getElementsByClassName(a)),i}if(w.qsa&&(!z||!z.test(t))){if(p=c=L,f=e,m=1!==r&&t,1===r&&"object"!==e.nodeName.toLowerCase()){for(h=D(t),(c=e.getAttribute("id"))?p=c.replace(yt,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=h.length;l--;)h[l]=p+d(h[l]);f=_t.test(t)&&u(e.parentNode)||e,m=h.join(",")}if(m)try{return Q.apply(i,f.querySelectorAll(m)),i}catch(g){}finally{c||e.removeAttribute("id")}}}return I(t.replace(lt,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>x.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[L]=!0,t}function s(t){var e=P.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),n=t.length;n--;)x.attrHandle[i[n]]=e}function a(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||K)-(~t.sourceIndex||K);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function r(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function l(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function h(t){return n(function(e){return e=+e,n(function(i,n){for(var s,o=t([],i.length,e),a=o.length;a--;)i[s=o[a]]&&(i[s]=!(n[s]=i[s]))})})}function u(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function c(){}function d(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function p(t,e,i){var n=e.dir,s=i&&"parentNode"===n,o=q++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,o)}:function(e,i,a){var r,l,h=[R,o];if(a){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,a))return!0}else for(;e=e[n];)if(1===e.nodeType||s){if(l=e[L]||(e[L]={}),(r=l[n])&&r[0]===R&&r[1]===o)return h[2]=r[2];if(l[n]=h,h[2]=t(e,i,a))return!0}}}function f(t){return t.length>1?function(e,i,n){for(var s=t.length;s--;)if(!t[s](e,i,n))return!1;return!0}:t[0]}function m(t,i,n){for(var s=0,o=i.length;o>s;s++)e(t,i[s],n);return n}function g(t,e,i,n,s){for(var o,a=[],r=0,l=t.length,h=null!=e;l>r;r++)(o=t[r])&&(!i||i(o,n,s))&&(a.push(o),h&&e.push(r));return a}function v(t,e,i,s,o,a){return s&&!s[L]&&(s=v(s)),o&&!o[L]&&(o=v(o,a)),n(function(n,a,r,l){var h,u,c,d=[],p=[],f=a.length,v=n||m(e||"*",r.nodeType?[r]:r,[]),b=!t||!n&&e?v:g(v,d,t,r,l),_=i?o||(n?t:f||s)?[]:a:b;if(i&&i(b,_,r,l),s)for(h=g(_,p),s(h,[],r,l),u=h.length;u--;)(c=h[u])&&(_[p[u]]=!(b[p[u]]=c));if(n){if(o||t){if(o){for(h=[],u=_.length;u--;)(c=_[u])&&h.push(b[u]=c);o(null,_=[],h,l)}for(u=_.length;u--;)(c=_[u])&&(h=o?tt(n,c):d[u])>-1&&(n[h]=!(a[h]=c))}}else _=g(_===a?_.splice(f,_.length):_),o?o(null,a,_,l):Q.apply(a,_)})}function b(t){for(var e,i,n,s=t.length,o=x.relative[t[0].type],a=o||x.relative[" "],r=o?1:0,l=p(function(t){return t===e},a,!0),h=p(function(t){return tt(e,t)>-1},a,!0),u=[function(t,i,n){var s=!o&&(n||i!==S)||((e=i).nodeType?l(t,i,n):h(t,i,n));return e=null,s}];s>r;r++)if(i=x.relative[t[r].type])u=[p(f(u),i)];else{if(i=x.filter[t[r].type].apply(null,t[r].matches),i[L]){for(n=++r;s>n&&!x.relative[t[n].type];n++);return v(r>1&&f(u),r>1&&d(t.slice(0,r-1).concat({value:" "===t[r-2].type?"*":""})).replace(lt,"$1"),i,n>r&&b(t.slice(r,n)),s>n&&b(t=t.slice(n)),s>n&&d(t))}u.push(i)}return f(u)}function _(t,i){var s=i.length>0,o=t.length>0,a=function(n,a,r,l,h){var u,c,d,p=0,f="0",m=n&&[],v=[],b=S,_=n||o&&x.find.TAG("*",h),y=R+=null==b?1:Math.random()||.1,w=_.length;for(h&&(S=a!==P&&a);f!==w&&null!=(u=_[f]);f++){if(o&&u){for(c=0;d=t[c++];)if(d(u,a,r)){l.push(u);break}h&&(R=y)}s&&((u=!d&&u)&&p--,n&&m.push(u))}if(p+=f,s&&f!==p){for(c=0;d=i[c++];)d(m,v,a,r);if(n){if(p>0)for(;f--;)m[f]||v[f]||(v[f]=G.call(l));v=g(v)}Q.apply(l,v),h&&!n&&v.length>0&&p+i.length>1&&e.uniqueSort(l)}return h&&(R=y,S=b),m};return s?n(a):a}var y,w,x,k,C,D,T,I,S,N,M,E,P,A,H,z,O,W,F,L="sizzle"+1*new Date,j=t.document,R=0,q=0,B=i(),Y=i(),$=i(),U=function(t,e){return t===e&&(M=!0),0},K=1<<31,X={}.hasOwnProperty,V=[],G=V.pop,J=V.push,Q=V.push,Z=V.slice,tt=function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",nt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",st=nt.replace("w","w#"),ot="\\["+it+"*("+nt+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+st+"))|)"+it+"*\\]",at=":("+nt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",rt=new RegExp(it+"+","g"),lt=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),ht=new RegExp("^"+it+"*,"+it+"*"),ut=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ct=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),dt=new RegExp(at),pt=new RegExp("^"+st+"$"),ft={ID:new RegExp("^#("+nt+")"),CLASS:new RegExp("^\\.("+nt+")"),TAG:new RegExp("^("+nt.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,bt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_t=/[+~]/,yt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),xt=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},kt=function(){E()};try{Q.apply(V=Z.call(j.childNodes),j.childNodes),V[j.childNodes.length].nodeType}catch(Ct){Q={apply:V.length?function(t,e){J.apply(t,Z.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}w=e.support={},C=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},E=e.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:j;return n!==P&&9===n.nodeType&&n.documentElement?(P=n,A=n.documentElement,i=n.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",kt,!1):i.attachEvent&&i.attachEvent("onunload",kt)),H=!C(n),w.attributes=s(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=s(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=vt.test(n.getElementsByClassName),w.getById=s(function(t){return A.appendChild(t).id=L,!n.getElementsByName||!n.getElementsByName(L).length}),w.getById?(x.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&H){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},x.filter.ID=function(t){var e=t.replace(wt,xt);return function(t){return t.getAttribute("id")===e}}):(delete x.find.ID,x.filter.ID=function(t){var e=t.replace(wt,xt);return function(t){var i="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}}),x.find.TAG=w.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):w.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],s=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[s++];)1===i.nodeType&&n.push(i);return n}return o},x.find.CLASS=w.getElementsByClassName&&function(t,e){return H?e.getElementsByClassName(t):void 0},O=[],z=[],(w.qsa=vt.test(n.querySelectorAll))&&(s(function(t){A.appendChild(t).innerHTML="<a id='"+L+"'></a><select id='"+L+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&z.push("[*^$]="+it+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||z.push("\\["+it+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+L+"-]").length||z.push("~="),t.querySelectorAll(":checked").length||z.push(":checked"),t.querySelectorAll("a#"+L+"+*").length||z.push(".#.+[+~]")}),s(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&z.push("name"+it+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||z.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),z.push(",.*:")})),(w.matchesSelector=vt.test(W=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&s(function(t){w.disconnectedMatch=W.call(t,"div"),W.call(t,"[s!='']:x"),O.push("!=",at)}),z=z.length&&new RegExp(z.join("|")),O=O.length&&new RegExp(O.join("|")),e=vt.test(A.compareDocumentPosition),F=e||vt.test(A.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},U=e?function(t,e){if(t===e)return M=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!w.sortDetached&&e.compareDocumentPosition(t)===i?t===n||t.ownerDocument===j&&F(j,t)?-1:e===n||e.ownerDocument===j&&F(j,e)?1:N?tt(N,t)-tt(N,e):0:4&i?-1:1)}:function(t,e){if(t===e)return M=!0,0;var i,s=0,o=t.parentNode,r=e.parentNode,l=[t],h=[e];if(!o||!r)return t===n?-1:e===n?1:o?-1:r?1:N?tt(N,t)-tt(N,e):0;if(o===r)return a(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)h.unshift(i);for(;l[s]===h[s];)s++;return s?a(l[s],h[s]):l[s]===j?-1:h[s]===j?1:0},n):P},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==P&&E(t),i=i.replace(ct,"='$1']"),!(!w.matchesSelector||!H||O&&O.test(i)||z&&z.test(i)))try{var n=W.call(t,i);if(n||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(s){}return e(i,P,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==P&&E(t),F(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==P&&E(t);var i=x.attrHandle[e.toLowerCase()],n=i&&X.call(x.attrHandle,e.toLowerCase())?i(t,e,!H):void 0;return void 0!==n?n:w.attributes||!H?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,s=0;if(M=!w.detectDuplicates,N=!w.sortStable&&t.slice(0),t.sort(U),M){for(;e=t[s++];)e===t[s]&&(n=i.push(s));for(;n--;)t.splice(i[n],1)}return N=null,t},k=e.getText=function(t){var e,i="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=k(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n++];)i+=k(e);return i},x=e.selectors={cacheLength:50,createPseudo:n,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(wt,xt),t[3]=(t[3]||t[4]||t[5]||"").replace(wt,xt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&dt.test(i)&&(e=D(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(wt,xt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=B[t+" "];return e||(e=new RegExp("(^|"+it+")"+t+"("+it+"|$)"))&&B(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(s){var o=e.attr(s,t);return null==o?"!="===i:!i||(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o.replace(rt," ")+" ").indexOf(n)>-1:"|="===i&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,i,n,s){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),r="of-type"===e;return 1===n&&0===s?function(t){return!!t.parentNode}:function(e,i,l){var h,u,c,d,p,f,m=o!==a?"nextSibling":"previousSibling",g=e.parentNode,v=r&&e.nodeName.toLowerCase(),b=!l&&!r;if(g){if(o){for(;m;){for(c=e;c=c[m];)if(r?c.nodeName.toLowerCase()===v:1===c.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[a?g.firstChild:g.lastChild],a&&b){for(u=g[L]||(g[L]={}),h=u[t]||[],p=h[0]===R&&h[1],d=h[0]===R&&h[2],c=p&&g.childNodes[p];c=++p&&c&&c[m]||(d=p=0)||f.pop();)if(1===c.nodeType&&++d&&c===e){u[t]=[R,p,d];break}}else if(b&&(h=(e[L]||(e[L]={}))[t])&&h[0]===R)d=h[1];else for(;(c=++p&&c&&c[m]||(d=p=0)||f.pop())&&((r?c.nodeName.toLowerCase()!==v:1!==c.nodeType)||!++d||(b&&((c[L]||(c[L]={}))[t]=[R,d]),c!==e)););return d-=s,d===n||d%n===0&&d/n>=0}}},PSEUDO:function(t,i){var s,o=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[L]?o(i):o.length>1?(s=[t,t,"",i],x.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,s=o(t,i),a=s.length;a--;)n=tt(t,s[a]),t[n]=!(e[n]=s[a])}):function(t){return o(t,0,s)}):o}},pseudos:{not:n(function(t){var e=[],i=[],s=T(t.replace(lt,"$1"));return s[L]?n(function(t,e,i,n){for(var o,a=s(t,null,n,[]),r=t.length;r--;)(o=a[r])&&(t[r]=!(e[r]=o))}):function(t,n,o){return e[0]=t,s(e,null,o,i),e[0]=null,!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return t=t.replace(wt,xt),function(e){return(e.textContent||e.innerText||k(e)).indexOf(t)>-1}}),lang:n(function(t){return pt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(wt,xt).toLowerCase(),function(e){var i;do if(i=H?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===A},focus:function(t){return t===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return mt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:h(function(){return[0]}),last:h(function(t,e){return[e-1]}),eq:h(function(t,e,i){return[0>i?i+e:i]}),even:h(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:h(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:h(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:h(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},x.pseudos.nth=x.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[y]=r(y);for(y in{submit:!0,reset:!0})x.pseudos[y]=l(y);return c.prototype=x.filters=x.pseudos,x.setFilters=new c,D=e.tokenize=function(t,i){var n,s,o,a,r,l,h,u=Y[t+" "];if(u)return i?0:u.slice(0);for(r=t,l=[],h=x.preFilter;r;){(!n||(s=ht.exec(r)))&&(s&&(r=r.slice(s[0].length)||r),l.push(o=[])),n=!1,(s=ut.exec(r))&&(n=s.shift(),o.push({value:n,type:s[0].replace(lt," ")}),r=r.slice(n.length));for(a in x.filter)!(s=ft[a].exec(r))||h[a]&&!(s=h[a](s))||(n=s.shift(),
o.push({value:n,type:a,matches:s}),r=r.slice(n.length));if(!n)break}return i?r.length:r?e.error(t):Y(t,l).slice(0)},T=e.compile=function(t,e){var i,n=[],s=[],o=$[t+" "];if(!o){for(e||(e=D(t)),i=e.length;i--;)o=b(e[i]),o[L]?n.push(o):s.push(o);o=$(t,_(s,n)),o.selector=t}return o},I=e.select=function(t,e,i,n){var s,o,a,r,l,h="function"==typeof t&&t,c=!n&&D(t=h.selector||t);if(i=i||[],1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&w.getById&&9===e.nodeType&&H&&x.relative[o[1].type]){if(e=(x.find.ID(a.matches[0].replace(wt,xt),e)||[])[0],!e)return i;h&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(s=ft.needsContext.test(t)?0:o.length;s--&&(a=o[s],!x.relative[r=a.type]);)if((l=x.find[r])&&(n=l(a.matches[0].replace(wt,xt),_t.test(o[0].type)&&u(e.parentNode)||e))){if(o.splice(s,1),t=n.length&&d(o),!t)return Q.apply(i,n),i;break}}return(h||T(t,c))(n,e,!H,i,_t.test(t)&&u(e.parentNode)||e),i},w.sortStable=L.split("").sort(U).join("")===L,w.detectDuplicates=!!M,E(),w.sortDetached=s(function(t){return 1&t.compareDocumentPosition(P.createElement("div"))}),s(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&s(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),s(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,i){var n;return i?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);st.find=ht,st.expr=ht.selectors,st.expr[":"]=st.expr.pseudos,st.unique=ht.uniqueSort,st.text=ht.getText,st.isXMLDoc=ht.isXML,st.contains=ht.contains;var ut=st.expr.match.needsContext,ct=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,dt=/^.[^:#\[\.,]*$/;st.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?st.find.matchesSelector(n,t)?[n]:[]:st.find.matches(t,st.grep(e,function(t){return 1===t.nodeType}))},st.fn.extend({find:function(t){var e,i=[],n=this,s=n.length;if("string"!=typeof t)return this.pushStack(st(t).filter(function(){for(e=0;s>e;e++)if(st.contains(n[e],this))return!0}));for(e=0;s>e;e++)st.find(t,n[e],i);return i=this.pushStack(s>1?st.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&ut.test(t)?st(t):t||[],!1).length}});var pt,ft=t.document,mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,gt=st.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:mt.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||pt).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof st?e[0]:e,st.merge(this,st.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:ft,!0)),ct.test(i[1])&&st.isPlainObject(e))for(i in e)st.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if(n=ft.getElementById(i[2]),n&&n.parentNode){if(n.id!==i[2])return pt.find(t);this.length=1,this[0]=n}return this.context=ft,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):st.isFunction(t)?"undefined"!=typeof pt.ready?pt.ready(t):t(st):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),st.makeArray(t,this))};gt.prototype=st.fn,pt=st(ft);var vt=/^(?:parents|prev(?:Until|All))/,bt={children:!0,contents:!0,next:!0,prev:!0};st.extend({dir:function(t,e,i){for(var n=[],s=t[e];s&&9!==s.nodeType&&(void 0===i||1!==s.nodeType||!st(s).is(i));)1===s.nodeType&&n.push(s),s=s[e];return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),st.fn.extend({has:function(t){var e,i=st(t,this),n=i.length;return this.filter(function(){for(e=0;n>e;e++)if(st.contains(this,i[e]))return!0})},closest:function(t,e){for(var i,n=0,s=this.length,o=[],a=ut.test(t)||"string"!=typeof t?st(t,e||this.context):0;s>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:1===i.nodeType&&st.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?st.unique(o):o)},index:function(t){return t?"string"==typeof t?st.inArray(this[0],st(t)):st.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(st.unique(st.merge(this.get(),st(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),st.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return st.dir(t,"parentNode")},parentsUntil:function(t,e,i){return st.dir(t,"parentNode",i)},next:function(t){return s(t,"nextSibling")},prev:function(t){return s(t,"previousSibling")},nextAll:function(t){return st.dir(t,"nextSibling")},prevAll:function(t){return st.dir(t,"previousSibling")},nextUntil:function(t,e,i){return st.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return st.dir(t,"previousSibling",i)},siblings:function(t){return st.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return st.sibling(t.firstChild)},contents:function(t){return st.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:st.merge([],t.childNodes)}},function(t,e){st.fn[t]=function(i,n){var s=st.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=st.filter(n,s)),this.length>1&&(bt[t]||(s=st.unique(s)),vt.test(t)&&(s=s.reverse())),this.pushStack(s)}});var _t=/\S+/g,yt={};st.Callbacks=function(t){t="string"==typeof t?yt[t]||o(t):st.extend({},t);var e,i,n,s,a,r,l=[],h=!t.once&&[],u=function(o){for(i=t.memory&&o,n=!0,a=r||0,r=0,s=l.length,e=!0;l&&s>a;a++)if(l[a].apply(o[0],o[1])===!1&&t.stopOnFalse){i=!1;break}e=!1,l&&(h?h.length&&u(h.shift()):i?l=[]:c.disable())},c={add:function(){if(l){var n=l.length;!function o(e){st.each(e,function(e,i){var n=st.type(i);"function"===n?t.unique&&c.has(i)||l.push(i):i&&i.length&&"string"!==n&&o(i)})}(arguments),e?s=l.length:i&&(r=n,u(i))}return this},remove:function(){return l&&st.each(arguments,function(t,i){for(var n;(n=st.inArray(i,l,n))>-1;)l.splice(n,1),e&&(s>=n&&s--,a>=n&&a--)}),this},has:function(t){return t?st.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],s=0,this},disable:function(){return l=h=i=void 0,this},disabled:function(){return!l},lock:function(){return h=void 0,i||c.disable(),this},locked:function(){return!h},fireWith:function(t,i){return!l||n&&!h||(i=i||[],i=[t,i.slice?i.slice():i],e?h.push(i):u(i)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},st.extend({Deferred:function(t){var e=[["resolve","done",st.Callbacks("once memory"),"resolved"],["reject","fail",st.Callbacks("once memory"),"rejected"],["notify","progress",st.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return st.Deferred(function(i){st.each(e,function(e,o){var a=st.isFunction(t[e])&&t[e];s[o[1]](function(){var t=a&&a.apply(this,arguments);t&&st.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o[0]+"With"](this===n?i.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?st.extend(t,n):n}},s={};return n.pipe=n.then,st.each(e,function(t,o){var a=o[2],r=o[3];n[o[1]]=a.add,r&&a.add(function(){i=r},e[1^t][2].disable,e[2][2].lock),s[o[0]]=function(){return s[o[0]+"With"](this===s?n:this,arguments),this},s[o[0]+"With"]=a.fireWith}),n.promise(s),t&&t.call(s,s),s},when:function(t){var e,i,n,s=0,o=V.call(arguments),a=o.length,r=1!==a||t&&st.isFunction(t.promise)?a:0,l=1===r?t:st.Deferred(),h=function(t,i,n){return function(s){i[t]=this,n[t]=arguments.length>1?V.call(arguments):s,n===e?l.notifyWith(i,n):--r||l.resolveWith(i,n)}};if(a>1)for(e=new Array(a),i=new Array(a),n=new Array(a);a>s;s++)o[s]&&st.isFunction(o[s].promise)?o[s].promise().done(h(s,n,o)).fail(l.reject).progress(h(s,i,e)):--r;return r||l.resolveWith(n,o),l.promise()}});var wt;st.fn.ready=function(t){return st.ready.promise().done(t),this},st.extend({isReady:!1,readyWait:1,holdReady:function(t){t?st.readyWait++:st.ready(!0)},ready:function(t){if(t===!0?!--st.readyWait:!st.isReady){if(!ft.body)return setTimeout(st.ready);st.isReady=!0,t!==!0&&--st.readyWait>0||(wt.resolveWith(ft,[st]),st.fn.triggerHandler&&(st(ft).triggerHandler("ready"),st(ft).off("ready")))}}}),st.ready.promise=function(e){if(!wt)if(wt=st.Deferred(),"complete"===ft.readyState)setTimeout(st.ready);else if(ft.addEventListener)ft.addEventListener("DOMContentLoaded",r,!1),t.addEventListener("load",r,!1);else{ft.attachEvent("onreadystatechange",r),t.attachEvent("onload",r);var i=!1;try{i=null==t.frameElement&&ft.documentElement}catch(n){}i&&i.doScroll&&!function s(){if(!st.isReady){try{i.doScroll("left")}catch(t){return setTimeout(s,50)}a(),st.ready()}}()}return wt.promise(e)};var xt,kt="undefined";for(xt in st(it))break;it.ownLast="0"!==xt,it.inlineBlockNeedsLayout=!1,st(function(){var t,e,i,n;i=ft.getElementsByTagName("body")[0],i&&i.style&&(e=ft.createElement("div"),n=ft.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==kt&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",it.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(i.style.zoom=1)),i.removeChild(n))}),function(){var t=ft.createElement("div");if(null==it.deleteExpando){it.deleteExpando=!0;try{delete t.test}catch(e){it.deleteExpando=!1}}t=null}(),st.acceptData=function(t){var e=st.noData[(t.nodeName+" ").toLowerCase()],i=+t.nodeType||1;return(1===i||9===i)&&(!e||e!==!0&&t.getAttribute("classid")===e)};var Ct=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Dt=/([A-Z])/g;st.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?st.cache[t[st.expando]]:t[st.expando],!!t&&!h(t)},data:function(t,e,i){return u(t,e,i)},removeData:function(t,e){return c(t,e)},_data:function(t,e,i){return u(t,e,i,!0)},_removeData:function(t,e){return c(t,e,!0)}}),st.fn.extend({data:function(t,e){var i,n,s,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(s=st.data(o),1===o.nodeType&&!st._data(o,"parsedAttrs"))){for(i=a.length;i--;)a[i]&&(n=a[i].name,0===n.indexOf("data-")&&(n=st.camelCase(n.slice(5)),l(o,n,s[n])));st._data(o,"parsedAttrs",!0)}return s}return"object"==typeof t?this.each(function(){st.data(this,t)}):arguments.length>1?this.each(function(){st.data(this,t,e)}):o?l(o,t,st.data(o,t)):void 0},removeData:function(t){return this.each(function(){st.removeData(this,t)})}}),st.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=st._data(t,e),i&&(!n||st.isArray(i)?n=st._data(t,e,st.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=st.queue(t,e),n=i.length,s=i.shift(),o=st._queueHooks(t,e),a=function(){st.dequeue(t,e)};"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===e&&i.unshift("inprogress"),delete o.stop,s.call(t,a,o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return st._data(t,i)||st._data(t,i,{empty:st.Callbacks("once memory").add(function(){st._removeData(t,e+"queue"),st._removeData(t,i)})})}}),st.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?st.queue(this[0],t):void 0===e?this:this.each(function(){var i=st.queue(this,t,e);st._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&st.dequeue(this,t)})},dequeue:function(t){return this.each(function(){st.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,s=st.Deferred(),o=this,a=this.length,r=function(){--n||s.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)i=st._data(o[a],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(r));return r(),s.promise(e)}});var Tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,It=["Top","Right","Bottom","Left"],St=function(t,e){return t=e||t,"none"===st.css(t,"display")||!st.contains(t.ownerDocument,t)},Nt=st.access=function(t,e,i,n,s,o,a){var r=0,l=t.length,h=null==i;if("object"===st.type(i)){s=!0;for(r in i)st.access(t,e,r,i[r],!0,o,a)}else if(void 0!==n&&(s=!0,st.isFunction(n)||(a=!0),h&&(a?(e.call(t,n),e=null):(h=e,e=function(t,e,i){return h.call(st(t),i)})),e))for(;l>r;r++)e(t[r],i,a?n:n.call(t[r],r,e(t[r],i)));return s?t:h?e.call(t):l?e(t[0],i):o},Mt=/^(?:checkbox|radio)$/i;!function(){var t=ft.createElement("input"),e=ft.createElement("div"),i=ft.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",it.leadingWhitespace=3===e.firstChild.nodeType,it.tbody=!e.getElementsByTagName("tbody").length,it.htmlSerialize=!!e.getElementsByTagName("link").length,it.html5Clone="<:nav></:nav>"!==ft.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,i.appendChild(t),it.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",it.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,i.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",it.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,it.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){it.noCloneEvent=!1}),e.cloneNode(!0).click()),null==it.deleteExpando){it.deleteExpando=!0;try{delete e.test}catch(n){it.deleteExpando=!1}}}(),function(){var e,i,n=ft.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})i="on"+e,(it[e+"Bubbles"]=i in t)||(n.setAttribute(i,"t"),it[e+"Bubbles"]=n.attributes[i].expando===!1);n=null}();var Et=/^(?:input|select|textarea)$/i,Pt=/^key/,At=/^(?:mouse|pointer|contextmenu)|click/,Ht=/^(?:focusinfocus|focusoutblur)$/,zt=/^([^.]*)(?:\.(.+)|)$/;st.event={global:{},add:function(t,e,i,n,s){var o,a,r,l,h,u,c,d,p,f,m,g=st._data(t);if(g){for(i.handler&&(l=i,i=l.handler,s=l.selector),i.guid||(i.guid=st.guid++),(a=g.events)||(a=g.events={}),(u=g.handle)||(u=g.handle=function(t){return typeof st===kt||t&&st.event.triggered===t.type?void 0:st.event.dispatch.apply(u.elem,arguments)},u.elem=t),e=(e||"").match(_t)||[""],r=e.length;r--;)o=zt.exec(e[r])||[],p=m=o[1],f=(o[2]||"").split(".").sort(),p&&(h=st.event.special[p]||{},p=(s?h.delegateType:h.bindType)||p,h=st.event.special[p]||{},c=st.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&st.expr.match.needsContext.test(s),namespace:f.join(".")},l),(d=a[p])||(d=a[p]=[],d.delegateCount=0,h.setup&&h.setup.call(t,n,f,u)!==!1||(t.addEventListener?t.addEventListener(p,u,!1):t.attachEvent&&t.attachEvent("on"+p,u))),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),s?d.splice(d.delegateCount++,0,c):d.push(c),st.event.global[p]=!0);t=null}},remove:function(t,e,i,n,s){var o,a,r,l,h,u,c,d,p,f,m,g=st.hasData(t)&&st._data(t);if(g&&(u=g.events)){for(e=(e||"").match(_t)||[""],h=e.length;h--;)if(r=zt.exec(e[h])||[],p=m=r[1],f=(r[2]||"").split(".").sort(),p){for(c=st.event.special[p]||{},p=(n?c.delegateType:c.bindType)||p,d=u[p]||[],r=r[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=d.length;o--;)a=d[o],!s&&m!==a.origType||i&&i.guid!==a.guid||r&&!r.test(a.namespace)||n&&n!==a.selector&&("**"!==n||!a.selector)||(d.splice(o,1),a.selector&&d.delegateCount--,c.remove&&c.remove.call(t,a));l&&!d.length&&(c.teardown&&c.teardown.call(t,f,g.handle)!==!1||st.removeEvent(t,p,g.handle),delete u[p])}else for(p in u)st.event.remove(t,p+e[h],i,n,!0);st.isEmptyObject(u)&&(delete g.handle,st._removeData(t,"events"))}},trigger:function(e,i,n,s){var o,a,r,l,h,u,c,d=[n||ft],p=et.call(e,"type")?e.type:e,f=et.call(e,"namespace")?e.namespace.split("."):[];if(r=u=n=n||ft,3!==n.nodeType&&8!==n.nodeType&&!Ht.test(p+st.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),a=p.indexOf(":")<0&&"on"+p,e=e[st.expando]?e:new st.Event(p,"object"==typeof e&&e),e.isTrigger=s?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:st.makeArray(i,[e]),h=st.event.special[p]||{},s||!h.trigger||h.trigger.apply(n,i)!==!1)){if(!s&&!h.noBubble&&!st.isWindow(n)){for(l=h.delegateType||p,Ht.test(l+p)||(r=r.parentNode);r;r=r.parentNode)d.push(r),u=r;u===(n.ownerDocument||ft)&&d.push(u.defaultView||u.parentWindow||t)}for(c=0;(r=d[c++])&&!e.isPropagationStopped();)e.type=c>1?l:h.bindType||p,o=(st._data(r,"events")||{})[e.type]&&st._data(r,"handle"),o&&o.apply(r,i),o=a&&r[a],o&&o.apply&&st.acceptData(r)&&(e.result=o.apply(r,i),e.result===!1&&e.preventDefault());if(e.type=p,!s&&!e.isDefaultPrevented()&&(!h._default||h._default.apply(d.pop(),i)===!1)&&st.acceptData(n)&&a&&n[p]&&!st.isWindow(n)){u=n[a],u&&(n[a]=null),st.event.triggered=p;try{n[p]()}catch(m){}st.event.triggered=void 0,u&&(n[a]=u)}return e.result}},dispatch:function(t){t=st.event.fix(t);var e,i,n,s,o,a=[],r=V.call(arguments),l=(st._data(this,"events")||{})[t.type]||[],h=st.event.special[t.type]||{};if(r[0]=t,t.delegateTarget=this,!h.preDispatch||h.preDispatch.call(this,t)!==!1){for(a=st.event.handlers.call(this,t,l),e=0;(s=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=s.elem,o=0;(n=s.handlers[o++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(n.namespace))&&(t.handleObj=n,t.data=n.data,i=((st.event.special[n.origType]||{}).handle||n.handler).apply(s.elem,r),void 0!==i&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,s,o,a=[],r=e.delegateCount,l=t.target;if(r&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(s=[],o=0;r>o;o++)n=e[o],i=n.selector+" ",void 0===s[i]&&(s[i]=n.needsContext?st(i,this).index(l)>=0:st.find(i,this,null,[l]).length),s[i]&&s.push(n);s.length&&a.push({elem:l,handlers:s})}return r<e.length&&a.push({elem:this,handlers:e.slice(r)}),a},fix:function(t){if(t[st.expando])return t;var e,i,n,s=t.type,o=t,a=this.fixHooks[s];for(a||(this.fixHooks[s]=a=At.test(s)?this.mouseHooks:Pt.test(s)?this.keyHooks:{}),n=a.props?this.props.concat(a.props):this.props,t=new st.Event(o),e=n.length;e--;)i=n[e],t[i]=o[i];return t.target||(t.target=o.srcElement||ft),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,a.filter?a.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,s,o=e.button,a=e.fromElement;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||ft,s=n.documentElement,i=n.body,t.pageX=e.clientX+(s&&s.scrollLeft||i&&i.scrollLeft||0)-(s&&s.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(s&&s.scrollTop||i&&i.scrollTop||0)-(s&&s.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?e.toElement:a),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return st.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return st.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var s=st.extend(new st.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?st.event.trigger(s,null,e):st.event.dispatch.call(e,s),s.isDefaultPrevented()&&i.preventDefault()}},st.removeEvent=ft.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){var n="on"+e;t.detachEvent&&(typeof t[n]===kt&&(t[n]=null),t.detachEvent(n,i))},st.Event=function(t,e){return this instanceof st.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?d:p):this.type=t,e&&st.extend(this,e),this.timeStamp=t&&t.timeStamp||st.now(),void(this[st.expando]=!0)):new st.Event(t,e)},st.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=d,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},st.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){st.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,s=t.relatedTarget,o=t.handleObj;return(!s||s!==n&&!st.contains(n,s))&&(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),it.submitBubbles||(st.event.special.submit={setup:function(){return!st.nodeName(this,"form")&&void st.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,i=st.nodeName(e,"input")||st.nodeName(e,"button")?e.form:void 0;i&&!st._data(i,"submitBubbles")&&(st.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),st._data(i,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&st.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return!st.nodeName(this,"form")&&void st.event.remove(this,"._submit")}}),it.changeBubbles||(st.event.special.change={setup:function(){return Et.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(st.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),st.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),st.event.simulate("change",this,t,!0)})),!1):void st.event.add(this,"beforeactivate._change",function(t){var e=t.target;Et.test(e.nodeName)&&!st._data(e,"changeBubbles")&&(st.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||st.event.simulate("change",this.parentNode,t,!0)}),st._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return st.event.remove(this,"._change"),!Et.test(this.nodeName)}}),it.focusinBubbles||st.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){st.event.simulate(e,t.target,st.event.fix(t),!0)};st.event.special[e]={setup:function(){var n=this.ownerDocument||this,s=st._data(n,e);s||n.addEventListener(t,i,!0),st._data(n,e,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=st._data(n,e)-1;s?st._data(n,e,s):(n.removeEventListener(t,i,!0),st._removeData(n,e))}}}),st.fn.extend({on:function(t,e,i,n,s){var o,a;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(o in t)this.on(o,e,i,t[o],s);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),n===!1)n=p;else if(!n)return this;return 1===s&&(a=n,n=function(t){return st().off(t),a.apply(this,arguments)},n.guid=a.guid||(a.guid=st.guid++)),this.each(function(){st.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,s;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,st(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return(e===!1||"function"==typeof e)&&(i=e,e=void 0),i===!1&&(i=p),this.each(function(){st.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){st.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?st.event.trigger(t,e,i,!0):void 0}});var Ot="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Wt=/ jQuery\d+="(?:null|\d+)"/g,Ft=new RegExp("<(?:"+Ot+")[\\s/>]","i"),Lt=/^\s+/,jt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Rt=/<([\w:]+)/,qt=/<tbody/i,Bt=/<|&#?\w+;/,Yt=/<(?:script|style|link)/i,$t=/checked\s*(?:[^=]|=\s*.checked.)/i,Ut=/^$|\/(?:java|ecma)script/i,Kt=/^true\/(.*)/,Xt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Vt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:it.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Gt=m(ft),Jt=Gt.appendChild(ft.createElement("div"));Vt.optgroup=Vt.option,Vt.tbody=Vt.tfoot=Vt.colgroup=Vt.caption=Vt.thead,Vt.th=Vt.td,st.extend({clone:function(t,e,i){var n,s,o,a,r,l=st.contains(t.ownerDocument,t);if(it.html5Clone||st.isXMLDoc(t)||!Ft.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(Jt.innerHTML=t.outerHTML,Jt.removeChild(o=Jt.firstChild)),!(it.noCloneEvent&&it.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||st.isXMLDoc(t)))for(n=g(o),r=g(t),a=0;null!=(s=r[a]);++a)n[a]&&k(s,n[a]);if(e)if(i)for(r=r||g(t),n=n||g(o),a=0;null!=(s=r[a]);a++)x(s,n[a]);else x(t,o);return n=g(o,"script"),n.length>0&&w(n,!l&&g(t,"script")),n=r=s=null,o},buildFragment:function(t,e,i,n){for(var s,o,a,r,l,h,u,c=t.length,d=m(e),p=[],f=0;c>f;f++)if(o=t[f],o||0===o)if("object"===st.type(o))st.merge(p,o.nodeType?[o]:o);else if(Bt.test(o)){for(r=r||d.appendChild(e.createElement("div")),l=(Rt.exec(o)||["",""])[1].toLowerCase(),u=Vt[l]||Vt._default,r.innerHTML=u[1]+o.replace(jt,"<$1></$2>")+u[2],s=u[0];s--;)r=r.lastChild;if(!it.leadingWhitespace&&Lt.test(o)&&p.push(e.createTextNode(Lt.exec(o)[0])),!it.tbody)for(o="table"!==l||qt.test(o)?"<table>"!==u[1]||qt.test(o)?0:r:r.firstChild,s=o&&o.childNodes.length;s--;)st.nodeName(h=o.childNodes[s],"tbody")&&!h.childNodes.length&&o.removeChild(h);for(st.merge(p,r.childNodes),r.textContent="";r.firstChild;)r.removeChild(r.firstChild);r=d.lastChild}else p.push(e.createTextNode(o));for(r&&d.removeChild(r),it.appendChecked||st.grep(g(p,"input"),v),f=0;o=p[f++];)if((!n||-1===st.inArray(o,n))&&(a=st.contains(o.ownerDocument,o),r=g(d.appendChild(o),"script"),a&&w(r),i))for(s=0;o=r[s++];)Ut.test(o.type||"")&&i.push(o);return r=null,d},cleanData:function(t,e){for(var i,n,s,o,a=0,r=st.expando,l=st.cache,h=it.deleteExpando,u=st.event.special;null!=(i=t[a]);a++)if((e||st.acceptData(i))&&(s=i[r],o=s&&l[s])){if(o.events)for(n in o.events)u[n]?st.event.remove(i,n):st.removeEvent(i,n,o.handle);l[s]&&(delete l[s],h?delete i[r]:typeof i.removeAttribute!==kt?i.removeAttribute(r):i[r]=null,X.push(s))}}}),st.fn.extend({text:function(t){return Nt(this,function(t){return void 0===t?st.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ft).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=b(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=b(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?st.filter(t,this):this,s=0;null!=(i=n[s]);s++)e||1!==i.nodeType||st.cleanData(g(i)),i.parentNode&&(e&&st.contains(i.ownerDocument,i)&&w(g(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&st.cleanData(g(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&st.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return st.clone(this,t,e)})},html:function(t){return Nt(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Wt,""):void 0;if(!("string"!=typeof t||Yt.test(t)||!it.htmlSerialize&&Ft.test(t)||!it.leadingWhitespace&&Lt.test(t)||Vt[(Rt.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(jt,"<$1></$2>");try{for(;n>i;i++)e=this[i]||{},1===e.nodeType&&(st.cleanData(g(e,!1)),e.innerHTML=t);e=0}catch(s){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,st.cleanData(g(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=G.apply([],t);var i,n,s,o,a,r,l=0,h=this.length,u=this,c=h-1,d=t[0],p=st.isFunction(d);if(p||h>1&&"string"==typeof d&&!it.checkClone&&$t.test(d))return this.each(function(i){var n=u.eq(i);p&&(t[0]=d.call(this,i,n.html())),n.domManip(t,e)});if(h&&(r=st.buildFragment(t,this[0].ownerDocument,!1,this),i=r.firstChild,1===r.childNodes.length&&(r=i),i)){for(o=st.map(g(r,"script"),_),s=o.length;h>l;l++)n=r,l!==c&&(n=st.clone(n,!0,!0),s&&st.merge(o,g(n,"script"))),e.call(this[l],n,l);if(s)for(a=o[o.length-1].ownerDocument,st.map(o,y),l=0;s>l;l++)n=o[l],Ut.test(n.type||"")&&!st._data(n,"globalEval")&&st.contains(a,n)&&(n.src?st._evalUrl&&st._evalUrl(n.src):st.globalEval((n.text||n.textContent||n.innerHTML||"").replace(Xt,"")));r=i=null}return this}}),st.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){st.fn[t]=function(t){for(var i,n=0,s=[],o=st(t),a=o.length-1;a>=n;n++)i=n===a?this:this.clone(!0),st(o[n])[e](i),J.apply(s,i.get());return this.pushStack(s)}});var Qt,Zt={};!function(){var t;it.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,i,n;return i=ft.getElementsByTagName("body")[0],i&&i.style?(e=ft.createElement("div"),n=ft.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==kt&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(ft.createElement("div")).style.width="5px",t=3!==e.offsetWidth),i.removeChild(n),t):void 0}}();var te,ee,ie=/^margin/,ne=new RegExp("^("+Tt+")(?!px)[a-z%]+$","i"),se=/^(top|right|bottom|left)$/;t.getComputedStyle?(te=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)},ee=function(t,e,i){var n,s,o,a,r=t.style;return i=i||te(t),a=i?i.getPropertyValue(e)||i[e]:void 0,i&&(""!==a||st.contains(t.ownerDocument,t)||(a=st.style(t,e)),ne.test(a)&&ie.test(e)&&(n=r.width,s=r.minWidth,
o=r.maxWidth,r.minWidth=r.maxWidth=r.width=a,a=i.width,r.width=n,r.minWidth=s,r.maxWidth=o)),void 0===a?a:a+""}):ft.documentElement.currentStyle&&(te=function(t){return t.currentStyle},ee=function(t,e,i){var n,s,o,a,r=t.style;return i=i||te(t),a=i?i[e]:void 0,null==a&&r&&r[e]&&(a=r[e]),ne.test(a)&&!se.test(e)&&(n=r.left,s=t.runtimeStyle,o=s&&s.left,o&&(s.left=t.currentStyle.left),r.left="fontSize"===e?"1em":a,a=r.pixelLeft+"px",r.left=n,o&&(s.left=o)),void 0===a?a:a+""||"auto"}),!function(){function e(){var e,i,n,s;i=ft.getElementsByTagName("body")[0],i&&i.style&&(e=ft.createElement("div"),n=ft.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=a=!1,l=!0,t.getComputedStyle&&(o="1%"!==(t.getComputedStyle(e,null)||{}).top,a="4px"===(t.getComputedStyle(e,null)||{width:"4px"}).width,s=e.appendChild(ft.createElement("div")),s.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",s.style.marginRight=s.style.width="0",e.style.width="1px",l=!parseFloat((t.getComputedStyle(s,null)||{}).marginRight),e.removeChild(s)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=e.getElementsByTagName("td"),s[0].style.cssText="margin:0;border:0;padding:0;display:none",r=0===s[0].offsetHeight,r&&(s[0].style.display="",s[1].style.display="none",r=0===s[0].offsetHeight),i.removeChild(n))}var i,n,s,o,a,r,l;i=ft.createElement("div"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",s=i.getElementsByTagName("a")[0],(n=s&&s.style)&&(n.cssText="float:left;opacity:.5",it.opacity="0.5"===n.opacity,it.cssFloat=!!n.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",it.clearCloneStyle="content-box"===i.style.backgroundClip,it.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,st.extend(it,{reliableHiddenOffsets:function(){return null==r&&e(),r},boxSizingReliable:function(){return null==a&&e(),a},pixelPosition:function(){return null==o&&e(),o},reliableMarginRight:function(){return null==l&&e(),l}}))}(),st.swap=function(t,e,i,n){var s,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];s=i.apply(t,n||[]);for(o in e)t.style[o]=a[o];return s};var oe=/alpha\([^)]*\)/i,ae=/opacity\s*=\s*([^)]*)/,re=/^(none|table(?!-c[ea]).+)/,le=new RegExp("^("+Tt+")(.*)$","i"),he=new RegExp("^([+-])=("+Tt+")","i"),ue={position:"absolute",visibility:"hidden",display:"block"},ce={letterSpacing:"0",fontWeight:"400"},de=["Webkit","O","Moz","ms"];st.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=ee(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":it.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,o,a,r=st.camelCase(e),l=t.style;if(e=st.cssProps[r]||(st.cssProps[r]=I(l,r)),a=st.cssHooks[e]||st.cssHooks[r],void 0===i)return a&&"get"in a&&void 0!==(s=a.get(t,!1,n))?s:l[e];if(o=typeof i,"string"===o&&(s=he.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(st.css(t,e)),o="number"),null!=i&&i===i&&("number"!==o||st.cssNumber[r]||(i+="px"),it.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),!(a&&"set"in a&&void 0===(i=a.set(t,i,n)))))try{l[e]=i}catch(h){}}},css:function(t,e,i,n){var s,o,a,r=st.camelCase(e);return e=st.cssProps[r]||(st.cssProps[r]=I(t.style,r)),a=st.cssHooks[e]||st.cssHooks[r],a&&"get"in a&&(o=a.get(t,!0,i)),void 0===o&&(o=ee(t,e,n)),"normal"===o&&e in ce&&(o=ce[e]),""===i||i?(s=parseFloat(o),i===!0||st.isNumeric(s)?s||0:o):o}}),st.each(["height","width"],function(t,e){st.cssHooks[e]={get:function(t,i,n){return i?re.test(st.css(t,"display"))&&0===t.offsetWidth?st.swap(t,ue,function(){return E(t,e,n)}):E(t,e,n):void 0},set:function(t,i,n){var s=n&&te(t);return N(t,i,n?M(t,e,n,it.boxSizing&&"border-box"===st.css(t,"boxSizing",!1,s),s):0)}}}),it.opacity||(st.cssHooks.opacity={get:function(t,e){return ae.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,s=st.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=n&&n.filter||i.filter||"";i.zoom=1,(e>=1||""===e)&&""===st.trim(o.replace(oe,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=oe.test(o)?o.replace(oe,s):o+" "+s)}}),st.cssHooks.marginRight=T(it.reliableMarginRight,function(t,e){return e?st.swap(t,{display:"inline-block"},ee,[t,"marginRight"]):void 0}),st.each({margin:"",padding:"",border:"Width"},function(t,e){st.cssHooks[t+e]={expand:function(i){for(var n=0,s={},o="string"==typeof i?i.split(" "):[i];4>n;n++)s[t+It[n]+e]=o[n]||o[n-2]||o[0];return s}},ie.test(t)||(st.cssHooks[t+e].set=N)}),st.fn.extend({css:function(t,e){return Nt(this,function(t,e,i){var n,s,o={},a=0;if(st.isArray(e)){for(n=te(t),s=e.length;s>a;a++)o[e[a]]=st.css(t,e[a],!1,n);return o}return void 0!==i?st.style(t,e,i):st.css(t,e)},t,e,arguments.length>1)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){St(this)?st(this).show():st(this).hide()})}}),st.Tween=P,P.prototype={constructor:P,init:function(t,e,i,n,s,o){this.elem=t,this.prop=i,this.easing=s||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(st.cssNumber[i]?"":"px")},cur:function(){var t=P.propHooks[this.prop];return t&&t.get?t.get(this):P.propHooks._default.get(this)},run:function(t){var e,i=P.propHooks[this.prop];return this.options.duration?this.pos=e=st.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):P.propHooks._default.set(this),this}},P.prototype.init.prototype=P.prototype,P.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=st.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){st.fx.step[t.prop]?st.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[st.cssProps[t.prop]]||st.cssHooks[t.prop])?st.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},P.propHooks.scrollTop=P.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},st.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},st.fx=P.prototype.init,st.fx.step={};var pe,fe,me=/^(?:toggle|show|hide)$/,ge=new RegExp("^(?:([+-])=|)("+Tt+")([a-z%]*)$","i"),ve=/queueHooks$/,be=[O],_e={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),s=ge.exec(e),o=s&&s[3]||(st.cssNumber[t]?"":"px"),a=(st.cssNumber[t]||"px"!==o&&+n)&&ge.exec(st.css(i.elem,t)),r=1,l=20;if(a&&a[3]!==o){o=o||a[3],s=s||[],a=+n||1;do r=r||".5",a/=r,st.style(i.elem,t,a+o);while(r!==(r=i.cur()/n)&&1!==r&&--l)}return s&&(a=i.start=+a||+n||0,i.unit=o,i.end=s[1]?a+(s[1]+1)*s[2]:+s[2]),i}]};st.Animation=st.extend(F,{tweener:function(t,e){st.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,s=t.length;s>n;n++)i=t[n],_e[i]=_e[i]||[],_e[i].unshift(e)},prefilter:function(t,e){e?be.unshift(t):be.push(t)}}),st.speed=function(t,e,i){var n=t&&"object"==typeof t?st.extend({},t):{complete:i||!i&&e||st.isFunction(t)&&t,duration:t,easing:i&&e||e&&!st.isFunction(e)&&e};return n.duration=st.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in st.fx.speeds?st.fx.speeds[n.duration]:st.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){st.isFunction(n.old)&&n.old.call(this),n.queue&&st.dequeue(this,n.queue)},n},st.fn.extend({fadeTo:function(t,e,i,n){return this.filter(St).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var s=st.isEmptyObject(t),o=st.speed(e,i,n),a=function(){var e=F(this,st.extend({},t),o);(s||st._data(this,"finish"))&&e.stop(!0)};return a.finish=a,s||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,s=null!=t&&t+"queueHooks",o=st.timers,a=st._data(this);if(s)a[s]&&a[s].stop&&n(a[s]);else for(s in a)a[s]&&a[s].stop&&ve.test(s)&&n(a[s]);for(s=o.length;s--;)o[s].elem!==this||null!=t&&o[s].queue!==t||(o[s].anim.stop(i),e=!1,o.splice(s,1));(e||!i)&&st.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=st._data(this),n=i[t+"queue"],s=i[t+"queueHooks"],o=st.timers,a=n?n.length:0;for(i.finish=!0,st.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;a>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),st.each(["toggle","show","hide"],function(t,e){var i=st.fn[e];st.fn[e]=function(t,n,s){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(H(e,!0),t,n,s)}}),st.each({slideDown:H("show"),slideUp:H("hide"),slideToggle:H("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){st.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),st.timers=[],st.fx.tick=function(){var t,e=st.timers,i=0;for(pe=st.now();i<e.length;i++)t=e[i],t()||e[i]!==t||e.splice(i--,1);e.length||st.fx.stop(),pe=void 0},st.fx.timer=function(t){st.timers.push(t),t()?st.fx.start():st.timers.pop()},st.fx.interval=13,st.fx.start=function(){fe||(fe=setInterval(st.fx.tick,st.fx.interval))},st.fx.stop=function(){clearInterval(fe),fe=null},st.fx.speeds={slow:600,fast:200,_default:400},st.fn.delay=function(t,e){return t=st.fx?st.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t,e,i,n,s;e=ft.createElement("div"),e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=e.getElementsByTagName("a")[0],i=ft.createElement("select"),s=i.appendChild(ft.createElement("option")),t=e.getElementsByTagName("input")[0],n.style.cssText="top:1px",it.getSetAttribute="t"!==e.className,it.style=/top/.test(n.getAttribute("style")),it.hrefNormalized="/a"===n.getAttribute("href"),it.checkOn=!!t.value,it.optSelected=s.selected,it.enctype=!!ft.createElement("form").enctype,i.disabled=!0,it.optDisabled=!s.disabled,t=ft.createElement("input"),t.setAttribute("value",""),it.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),it.radioValue="t"===t.value}();var ye=/\r/g;st.fn.extend({val:function(t){var e,i,n,s=this[0];return arguments.length?(n=st.isFunction(t),this.each(function(i){var s;1===this.nodeType&&(s=n?t.call(this,i,st(this).val()):t,null==s?s="":"number"==typeof s?s+="":st.isArray(s)&&(s=st.map(s,function(t){return null==t?"":t+""})),e=st.valHooks[this.type]||st.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))})):s?(e=st.valHooks[s.type]||st.valHooks[s.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(s,"value"))?i:(i=s.value,"string"==typeof i?i.replace(ye,""):null==i?"":i)):void 0}}),st.extend({valHooks:{option:{get:function(t){var e=st.find.attr(t,"value");return null!=e?e:st.trim(st.text(t))}},select:{get:function(t){for(var e,i,n=t.options,s=t.selectedIndex,o="select-one"===t.type||0>s,a=o?null:[],r=o?s+1:n.length,l=0>s?r:o?s:0;r>l;l++)if(i=n[l],!(!i.selected&&l!==s||(it.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&st.nodeName(i.parentNode,"optgroup"))){if(e=st(i).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var i,n,s=t.options,o=st.makeArray(e),a=s.length;a--;)if(n=s[a],st.inArray(st.valHooks.option.get(n),o)>=0)try{n.selected=i=!0}catch(r){n.scrollHeight}else n.selected=!1;return i||(t.selectedIndex=-1),s}}}}),st.each(["radio","checkbox"],function(){st.valHooks[this]={set:function(t,e){return st.isArray(e)?t.checked=st.inArray(st(t).val(),e)>=0:void 0}},it.checkOn||(st.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var we,xe,ke=st.expr.attrHandle,Ce=/^(?:checked|selected)$/i,De=it.getSetAttribute,Te=it.input;st.fn.extend({attr:function(t,e){return Nt(this,st.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){st.removeAttr(this,t)})}}),st.extend({attr:function(t,e,i){var n,s,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===kt?st.prop(t,e,i):(1===o&&st.isXMLDoc(t)||(e=e.toLowerCase(),n=st.attrHooks[e]||(st.expr.match.bool.test(e)?xe:we)),void 0===i?n&&"get"in n&&null!==(s=n.get(t,e))?s:(s=st.find.attr(t,e),null==s?void 0:s):null!==i?n&&"set"in n&&void 0!==(s=n.set(t,i,e))?s:(t.setAttribute(e,i+""),i):void st.removeAttr(t,e))},removeAttr:function(t,e){var i,n,s=0,o=e&&e.match(_t);if(o&&1===t.nodeType)for(;i=o[s++];)n=st.propFix[i]||i,st.expr.match.bool.test(i)?Te&&De||!Ce.test(i)?t[n]=!1:t[st.camelCase("default-"+i)]=t[n]=!1:st.attr(t,i,""),t.removeAttribute(De?i:n)},attrHooks:{type:{set:function(t,e){if(!it.radioValue&&"radio"===e&&st.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),xe={set:function(t,e,i){return e===!1?st.removeAttr(t,i):Te&&De||!Ce.test(i)?t.setAttribute(!De&&st.propFix[i]||i,i):t[st.camelCase("default-"+i)]=t[i]=!0,i}},st.each(st.expr.match.bool.source.match(/\w+/g),function(t,e){var i=ke[e]||st.find.attr;ke[e]=Te&&De||!Ce.test(e)?function(t,e,n){var s,o;return n||(o=ke[e],ke[e]=s,s=null!=i(t,e,n)?e.toLowerCase():null,ke[e]=o),s}:function(t,e,i){return i?void 0:t[st.camelCase("default-"+e)]?e.toLowerCase():null}}),Te&&De||(st.attrHooks.value={set:function(t,e,i){return st.nodeName(t,"input")?void(t.defaultValue=e):we&&we.set(t,e,i)}}),De||(we={set:function(t,e,i){var n=t.getAttributeNode(i);return n||t.setAttributeNode(n=t.ownerDocument.createAttribute(i)),n.value=e+="","value"===i||e===t.getAttribute(i)?e:void 0}},ke.id=ke.name=ke.coords=function(t,e,i){var n;return i?void 0:(n=t.getAttributeNode(e))&&""!==n.value?n.value:null},st.valHooks.button={get:function(t,e){var i=t.getAttributeNode(e);return i&&i.specified?i.value:void 0},set:we.set},st.attrHooks.contenteditable={set:function(t,e,i){we.set(t,""!==e&&e,i)}},st.each(["width","height"],function(t,e){st.attrHooks[e]={set:function(t,i){return""===i?(t.setAttribute(e,"auto"),i):void 0}}})),it.style||(st.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Ie=/^(?:input|select|textarea|button|object)$/i,Se=/^(?:a|area)$/i;st.fn.extend({prop:function(t,e){return Nt(this,st.prop,t,e,arguments.length>1)},removeProp:function(t){return t=st.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),st.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,i){var n,s,o,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return o=1!==a||!st.isXMLDoc(t),o&&(e=st.propFix[e]||e,s=st.propHooks[e]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:t[e]=i:s&&"get"in s&&null!==(n=s.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=st.find.attr(t,"tabindex");return e?parseInt(e,10):Ie.test(t.nodeName)||Se.test(t.nodeName)&&t.href?0:-1}}}}),it.hrefNormalized||st.each(["href","src"],function(t,e){st.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),it.optSelected||(st.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),st.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){st.propFix[this.toLowerCase()]=this}),it.enctype||(st.propFix.enctype="encoding");var Ne=/[\t\r\n\f]/g;st.fn.extend({addClass:function(t){var e,i,n,s,o,a,r=0,l=this.length,h="string"==typeof t&&t;if(st.isFunction(t))return this.each(function(e){st(this).addClass(t.call(this,e,this.className))});if(h)for(e=(t||"").match(_t)||[];l>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ne," "):" ")){for(o=0;s=e[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");a=st.trim(n),i.className!==a&&(i.className=a)}return this},removeClass:function(t){var e,i,n,s,o,a,r=0,l=this.length,h=0===arguments.length||"string"==typeof t&&t;if(st.isFunction(t))return this.each(function(e){st(this).removeClass(t.call(this,e,this.className))});if(h)for(e=(t||"").match(_t)||[];l>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ne," "):"")){for(o=0;s=e[o++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");a=t?st.trim(n):"",i.className!==a&&(i.className=a)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):this.each(st.isFunction(t)?function(i){st(this).toggleClass(t.call(this,i,this.className,e),e)}:function(){if("string"===i)for(var e,n=0,s=st(this),o=t.match(_t)||[];e=o[n++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else(i===kt||"boolean"===i)&&(this.className&&st._data(this,"__className__",this.className),this.className=this.className||t===!1?"":st._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Ne," ").indexOf(e)>=0)return!0;return!1}}),st.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){st.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),st.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var Me=st.now(),Ee=/\?/,Pe=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;st.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var i,n=null,s=st.trim(e+"");return s&&!st.trim(s.replace(Pe,function(t,e,s,o){return i&&e&&(n=0),0===n?t:(i=s||e,n+=!o-!s,"")}))?Function("return "+s)():st.error("Invalid JSON: "+e)},st.parseXML=function(e){var i,n;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(n=new DOMParser,i=n.parseFromString(e,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(e))}catch(s){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||st.error("Invalid XML: "+e),i};var Ae,He,ze=/#.*$/,Oe=/([?&])_=[^&]*/,We=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Fe=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Le=/^(?:GET|HEAD)$/,je=/^\/\//,Re=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,qe={},Be={},Ye="*/".concat("*");try{He=location.href}catch($e){He=ft.createElement("a"),He.href="",He=He.href}Ae=Re.exec(He.toLowerCase())||[],st.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:He,type:"GET",isLocal:Fe.test(Ae[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ye,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":st.parseJSON,"text xml":st.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?R(R(t,st.ajaxSettings),e):R(st.ajaxSettings,t)},ajaxPrefilter:L(qe),ajaxTransport:L(Be),ajax:function(t,e){function i(t,e,i,n){var s,u,v,b,y,x=e;2!==_&&(_=2,r&&clearTimeout(r),h=void 0,a=n||"",w.readyState=t>0?4:0,s=t>=200&&300>t||304===t,i&&(b=q(c,w,i)),b=B(c,b,w,s),s?(c.ifModified&&(y=w.getResponseHeader("Last-Modified"),y&&(st.lastModified[o]=y),y=w.getResponseHeader("etag"),y&&(st.etag[o]=y)),204===t||"HEAD"===c.type?x="nocontent":304===t?x="notmodified":(x=b.state,u=b.data,v=b.error,s=!v)):(v=x,(t||!x)&&(x="error",0>t&&(t=0))),w.status=t,w.statusText=(e||x)+"",s?f.resolveWith(d,[u,x,w]):f.rejectWith(d,[w,x,v]),w.statusCode(g),g=void 0,l&&p.trigger(s?"ajaxSuccess":"ajaxError",[w,c,s?u:v]),m.fireWith(d,[w,x]),l&&(p.trigger("ajaxComplete",[w,c]),--st.active||st.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,s,o,a,r,l,h,u,c=st.ajaxSetup({},e),d=c.context||c,p=c.context&&(d.nodeType||d.jquery)?st(d):st.event,f=st.Deferred(),m=st.Callbacks("once memory"),g=c.statusCode||{},v={},b={},_=0,y="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!u)for(u={};e=We.exec(a);)u[e[1].toLowerCase()]=e[2];e=u[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?a:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return _||(t=b[i]=b[i]||t,v[t]=e),this},overrideMimeType:function(t){return _||(c.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>_)for(e in t)g[e]=[g[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||y;return h&&h.abort(e),i(0,e),this}};if(f.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,c.url=((t||c.url||He)+"").replace(ze,"").replace(je,Ae[1]+"//"),c.type=e.method||e.type||c.method||c.type,c.dataTypes=st.trim(c.dataType||"*").toLowerCase().match(_t)||[""],null==c.crossDomain&&(n=Re.exec(c.url.toLowerCase()),c.crossDomain=!(!n||n[1]===Ae[1]&&n[2]===Ae[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Ae[3]||("http:"===Ae[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=st.param(c.data,c.traditional)),j(qe,c,e,w),2===_)return w;l=st.event&&c.global,l&&0===st.active++&&st.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Le.test(c.type),o=c.url,c.hasContent||(c.data&&(o=c.url+=(Ee.test(o)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=Oe.test(o)?o.replace(Oe,"$1_="+Me++):o+(Ee.test(o)?"&":"?")+"_="+Me++)),c.ifModified&&(st.lastModified[o]&&w.setRequestHeader("If-Modified-Since",st.lastModified[o]),st.etag[o]&&w.setRequestHeader("If-None-Match",st.etag[o])),(c.data&&c.hasContent&&c.contentType!==!1||e.contentType)&&w.setRequestHeader("Content-Type",c.contentType),w.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+Ye+"; q=0.01":""):c.accepts["*"]);for(s in c.headers)w.setRequestHeader(s,c.headers[s]);if(c.beforeSend&&(c.beforeSend.call(d,w,c)===!1||2===_))return w.abort();y="abort";for(s in{success:1,error:1,complete:1})w[s](c[s]);if(h=j(Be,c,e,w)){w.readyState=1,l&&p.trigger("ajaxSend",[w,c]),c.async&&c.timeout>0&&(r=setTimeout(function(){w.abort("timeout")},c.timeout));try{_=1,h.send(v,i)}catch(x){if(!(2>_))throw x;i(-1,x)}}else i(-1,"No Transport");return w},getJSON:function(t,e,i){return st.get(t,e,i,"json")},getScript:function(t,e){return st.get(t,void 0,e,"script")}}),st.each(["get","post"],function(t,e){st[e]=function(t,i,n,s){return st.isFunction(i)&&(s=s||n,n=i,i=void 0),st.ajax({url:t,type:e,dataType:s,data:i,success:n})}}),st._evalUrl=function(t){return st.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},st.fn.extend({wrapAll:function(t){if(st.isFunction(t))return this.each(function(e){st(this).wrapAll(t.call(this,e))});if(this[0]){var e=st(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(st.isFunction(t)?function(e){st(this).wrapInner(t.call(this,e))}:function(){var e=st(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=st.isFunction(t);return this.each(function(i){st(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){st.nodeName(this,"body")||st(this).replaceWith(this.childNodes)}).end()}}),st.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!it.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||st.css(t,"display"))},st.expr.filters.visible=function(t){return!st.expr.filters.hidden(t)};var Ue=/%20/g,Ke=/\[\]$/,Xe=/\r?\n/g,Ve=/^(?:submit|button|image|reset|file)$/i,Ge=/^(?:input|select|textarea|keygen)/i;st.param=function(t,e){var i,n=[],s=function(t,e){e=st.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=st.ajaxSettings&&st.ajaxSettings.traditional),st.isArray(t)||t.jquery&&!st.isPlainObject(t))st.each(t,function(){s(this.name,this.value)});else for(i in t)Y(i,t[i],e,s);return n.join("&").replace(Ue,"+")},st.fn.extend({serialize:function(){return st.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=st.prop(this,"elements");return t?st.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!st(this).is(":disabled")&&Ge.test(this.nodeName)&&!Ve.test(t)&&(this.checked||!Mt.test(t))}).map(function(t,e){var i=st(this).val();return null==i?null:st.isArray(i)?st.map(i,function(t){return{name:e.name,value:t.replace(Xe,"\r\n")}}):{name:e.name,value:i.replace(Xe,"\r\n")}}).get()}}),st.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&$()||U()}:$;var Je=0,Qe={},Ze=st.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in Qe)Qe[t](void 0,!0)}),it.cors=!!Ze&&"withCredentials"in Ze,Ze=it.ajax=!!Ze,Ze&&st.ajaxTransport(function(t){if(!t.crossDomain||it.cors){var e;return{send:function(i,n){var s,o=t.xhr(),a=++Je;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)void 0!==i[s]&&o.setRequestHeader(s,i[s]+"");o.send(t.hasContent&&t.data||null),e=function(i,s){var r,l,h;if(e&&(s||4===o.readyState))if(delete Qe[a],e=void 0,o.onreadystatechange=st.noop,s)4!==o.readyState&&o.abort();else{h={},r=o.status,"string"==typeof o.responseText&&(h.text=o.responseText);try{l=o.statusText}catch(u){l=""}r||!t.isLocal||t.crossDomain?1223===r&&(r=204):r=h.text?200:404}h&&n(r,l,h,o.getAllResponseHeaders())},t.async?4===o.readyState?setTimeout(e):o.onreadystatechange=Qe[a]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),st.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return st.globalEval(t),t}}}),st.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),st.ajaxTransport("script",function(t){if(t.crossDomain){var e,i=ft.head||st("head")[0]||ft.documentElement;return{send:function(n,s){e=ft.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,i){(i||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,i||s(200,"success"))},i.insertBefore(e,i.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var ti=[],ei=/(=)\?(?=&|$)|\?\?/;st.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ti.pop()||st.expando+"_"+Me++;return this[t]=!0,t}}),st.ajaxPrefilter("json jsonp",function(e,i,n){var s,o,a,r=e.jsonp!==!1&&(ei.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ei.test(e.data)&&"data");return r||"jsonp"===e.dataTypes[0]?(s=e.jsonpCallback=st.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,r?e[r]=e[r].replace(ei,"$1"+s):e.jsonp!==!1&&(e.url+=(Ee.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return a||st.error(s+" was not called"),a[0]},e.dataTypes[0]="json",o=t[s],t[s]=function(){a=arguments},n.always(function(){t[s]=o,e[s]&&(e.jsonpCallback=i.jsonpCallback,ti.push(s)),a&&st.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),st.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||ft;var n=ct.exec(t),s=!i&&[];return n?[e.createElement(n[1])]:(n=st.buildFragment([t],e,s),s&&s.length&&st(s).remove(),st.merge([],n.childNodes))};var ii=st.fn.load;st.fn.load=function(t,e,i){if("string"!=typeof t&&ii)return ii.apply(this,arguments);var n,s,o,a=this,r=t.indexOf(" ");return r>=0&&(n=st.trim(t.slice(r,t.length)),t=t.slice(0,r)),st.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),a.length>0&&st.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){s=arguments,a.html(n?st("<div>").append(st.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){a.each(i,s||[t.responseText,e,t])}),this},st.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){st.fn[e]=function(t){return this.on(e,t)}}),st.expr.filters.animated=function(t){return st.grep(st.timers,function(e){return t===e.elem}).length};var ni=t.document.documentElement;st.offset={setOffset:function(t,e,i){var n,s,o,a,r,l,h,u=st.css(t,"position"),c=st(t),d={};"static"===u&&(t.style.position="relative"),r=c.offset(),o=st.css(t,"top"),l=st.css(t,"left"),h=("absolute"===u||"fixed"===u)&&st.inArray("auto",[o,l])>-1,h?(n=c.position(),a=n.top,s=n.left):(a=parseFloat(o)||0,s=parseFloat(l)||0),st.isFunction(e)&&(e=e.call(t,i,r)),null!=e.top&&(d.top=e.top-r.top+a),null!=e.left&&(d.left=e.left-r.left+s),"using"in e?e.using.call(t,d):c.css(d)}},st.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){st.offset.setOffset(this,t,e)});var e,i,n={top:0,left:0},s=this[0],o=s&&s.ownerDocument;return o?(e=o.documentElement,st.contains(e,s)?(typeof s.getBoundingClientRect!==kt&&(n=s.getBoundingClientRect()),i=K(o),{top:n.top+(i.pageYOffset||e.scrollTop)-(e.clientTop||0),left:n.left+(i.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):n):void 0},position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===st.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),st.nodeName(t[0],"html")||(i=t.offset()),i.top+=st.css(t[0],"borderTopWidth",!0),i.left+=st.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-st.css(n,"marginTop",!0),left:e.left-i.left-st.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||ni;t&&!st.nodeName(t,"html")&&"static"===st.css(t,"position");)t=t.offsetParent;return t||ni})}}),st.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i=/Y/.test(e);st.fn[t]=function(n){return Nt(this,function(t,n,s){var o=K(t);return void 0===s?o?e in o?o[e]:o.document.documentElement[n]:t[n]:void(o?o.scrollTo(i?st(o).scrollLeft():s,i?s:st(o).scrollTop()):t[n]=s)},t,n,arguments.length,null)}}),st.each(["top","left"],function(t,e){st.cssHooks[e]=T(it.pixelPosition,function(t,i){return i?(i=ee(t,e),ne.test(i)?st(t).position()[e]+"px":i):void 0})}),st.each({Height:"height",Width:"width"},function(t,e){st.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){st.fn[n]=function(n,s){var o=arguments.length&&(i||"boolean"!=typeof n),a=i||(n===!0||s===!0?"margin":"border");return Nt(this,function(e,i,n){
var s;return st.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===n?st.css(e,i,a):st.style(e,i,n,a)},e,o?n:void 0,o,null)}})}),st.fn.size=function(){return this.length},st.fn.andSelf=st.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return st});var si=t.jQuery,oi=t.$;return st.noConflict=function(e){return t.$===st&&(t.$=oi),e&&t.jQuery===st&&(t.jQuery=si),st},typeof e===kt&&(t.jQuery=t.$=st),st}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(e,n){var s,o,a,r=e.nodeName.toLowerCase();return"area"===r?(s=e.parentNode,o=s.name,!(!e.href||!o||"map"!==s.nodeName.toLowerCase())&&(a=t("img[usemap='#"+o+"']")[0],!!a&&i(a))):(/^(input|select|textarea|button|object)$/.test(r)?!e.disabled:"a"===r?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}function n(t){for(var e,i;t.length&&t[0]!==document;){if(e=t.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}function s(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=o(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function o(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",a)}function a(){t.datepicker._isDisabledDatepicker(v.inline?v.dpDiv.parent()[0]:v.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function r(e,i){t.extend(e,i);for(var n in i)null==i[n]&&(e[n]=i[n]);return e}function l(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var i=this.css("position"),n="absolute"===i,s=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return(!n||"static"!==e.css("position"))&&s.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&o.length?o:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(i){return e(i,!isNaN(t.attr(i,"tabindex")))},tabbable:function(i){var n=t.attr(i,"tabindex"),s=isNaN(n);return(s||n>=0)&&e(i,!s)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,i){function n(e,i,n,o){return t.each(s,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var s="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?a["inner"+i].call(this):this.each(function(){t(this).css(o,n(this,e)+"px")})},t.fn["outer"+i]=function(e,s){return"number"!=typeof e?a["outer"+i].call(this,e):this.each(function(){t(this).css(o,n(this,e,!0,s)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(i,n){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),n&&n.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var i,n,s=t(this[0]);s.length&&s[0]!==document;){if(i=s.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(n=parseInt(s.css("zIndex"),10),!isNaN(n)&&0!==n))return n;s=s.parent()}return 0}}),t.ui.plugin={add:function(e,i,n){var s,o=t.ui[e].prototype;for(s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(t,e,i,n){var s,o=t.plugins[e];if(o&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(s=0;o.length>s;s++)t.options[o[s][0]]&&o[s][1].apply(t.element,i)}};var h=0,u=Array.prototype.slice;t.cleanData=function(e){return function(i){var n,s,o;for(o=0;null!=(s=i[o]);o++)try{n=t._data(s,"events"),n&&n.remove&&t(s).triggerHandler("remove")}catch(a){}e(i)}}(t.cleanData),t.widget=function(e,i,n){var s,o,a,r,l={},h=e.split(".")[0];return e=e.split(".")[1],s=h+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][s.toLowerCase()]=function(e){return!!t.data(e,s)},t[h]=t[h]||{},o=t[h][e],a=t[h][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new a(t,e)},t.extend(a,o,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),r=new i,r.options=t.widget.extend({},r.options),t.each(n,function(e,n){return t.isFunction(n)?void(l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},s=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=s,e=n.apply(this,arguments),this._super=i,this._superApply=o,e}}()):void(l[e]=n)}),a.prototype=t.widget.extend(r,{widgetEventPrefix:o?r.widgetEventPrefix||e:e},l,{constructor:a,namespace:h,widgetName:e,widgetFullName:s}),o?(t.each(o._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,a,i._proto)}),delete o._childConstructors):i._childConstructors.push(a),t.widget.bridge(e,a),a},t.widget.extend=function(e){for(var i,n,s=u.call(arguments,1),o=0,a=s.length;a>o;o++)for(i in s[o])n=s[o][i],s[o].hasOwnProperty(i)&&void 0!==n&&(e[i]=t.isPlainObject(n)?t.isPlainObject(e[i])?t.widget.extend({},e[i],n):t.widget.extend({},n):n);return e},t.widget.bridge=function(e,i){var n=i.prototype.widgetFullName||e;t.fn[e]=function(s){var o="string"==typeof s,a=u.call(arguments,1),r=this;return o?this.each(function(){var i,o=t.data(this,n);return"instance"===s?(r=o,!1):o?t.isFunction(o[s])&&"_"!==s.charAt(0)?(i=o[s].apply(o,a),i!==o&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+s+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+s+"'")}):(a.length&&(s=t.widget.extend.apply(null,[s].concat(a))),this.each(function(){var e=t.data(this,n);e?(e.option(s||{}),e._init&&e._init()):t.data(this,n,new i(s,this))})),r}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=h++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,s,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},n=e.split("."),e=n.shift(),n.length){for(s=a[e]=t.widget.extend({},this.options[e]),o=0;n.length-1>o;o++)s[n[o]]=s[n[o]]||{},s=s[n[o]];if(e=n.pop(),1===arguments.length)return void 0===s[e]?null:s[e];s[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,i,n){var s,o=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=s=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),t.each(n,function(n,a){function r(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+o.eventNamespace,u=l[2];u?s.delegate(u,h,r):i.bind(h,r)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(i).undelegate(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var s,o,a=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,o){"string"==typeof s&&(s={effect:s});var a,r=s?s===!0||"number"==typeof s?i:s.effect||i:e;s=s||{},"number"==typeof s&&(s={duration:s}),a=!t.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),a&&t.effects&&t.effects.effect[r]?n[e](s):r!==e&&n[r]?n[r](s.duration,s.easing,o):n.queue(function(i){t(this)[e](),o&&o.call(n[0]),i()})}}),t.widget;var c=!1;t(document).mouseup(function(){c=!1}),t.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!c){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,n=1===e.which,s=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(n&&!s&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),c=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),c=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function e(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var s,o,a=Math.max,r=Math.abs,l=Math.round,h=/left|center|right/,u=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==s)return s;var e,i,n=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=n.children()[0];return t("body").append(n),e=o.offsetWidth,n.css("overflow","scroll"),i=o.offsetWidth,e===i&&(i=n[0].clientWidth),n.remove(),s=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),s="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:s?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]),s=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n||s?i.width():i.outerWidth(),height:n||s?i.height():i.outerHeight()}}},t.fn.position=function(s){if(!s||!s.of)return f.apply(this,arguments);s=t.extend({},s);var p,m,g,v,b,_,y=t(s.of),w=t.position.getWithinInfo(s.within),x=t.position.getScrollInfo(w),k=(s.collision||"flip").split(" "),C={};return _=n(y),y[0].preventDefault&&(s.at="left top"),m=_.width,g=_.height,v=_.offset,b=t.extend({},v),t.each(["my","at"],function(){var t,e,i=(s[this]||"").split(" ");1===i.length&&(i=h.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=h.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",t=c.exec(i[0]),e=c.exec(i[1]),C[this]=[t?t[0]:0,e?e[0]:0],s[this]=[d.exec(i[0])[0],d.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===s.at[0]?b.left+=m:"center"===s.at[0]&&(b.left+=m/2),"bottom"===s.at[1]?b.top+=g:"center"===s.at[1]&&(b.top+=g/2),p=e(C.at,m,g),b.left+=p[0],b.top+=p[1],this.each(function(){var n,h,u=t(this),c=u.outerWidth(),d=u.outerHeight(),f=i(this,"marginLeft"),_=i(this,"marginTop"),D=c+f+i(this,"marginRight")+x.width,T=d+_+i(this,"marginBottom")+x.height,I=t.extend({},b),S=e(C.my,u.outerWidth(),u.outerHeight());"right"===s.my[0]?I.left-=c:"center"===s.my[0]&&(I.left-=c/2),"bottom"===s.my[1]?I.top-=d:"center"===s.my[1]&&(I.top-=d/2),I.left+=S[0],I.top+=S[1],o||(I.left=l(I.left),I.top=l(I.top)),n={marginLeft:f,marginTop:_},t.each(["left","top"],function(e,i){t.ui.position[k[e]]&&t.ui.position[k[e]][i](I,{targetWidth:m,targetHeight:g,elemWidth:c,elemHeight:d,collisionPosition:n,collisionWidth:D,collisionHeight:T,offset:[p[0]+S[0],p[1]+S[1]],my:s.my,at:s.at,within:w,elem:u})}),s.using&&(h=function(t){var e=v.left-I.left,i=e+m-c,n=v.top-I.top,o=n+g-d,l={target:{element:y,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:I.left,top:I.top,width:c,height:d},horizontal:0>i?"left":e>0?"right":"center",vertical:0>o?"top":n>0?"bottom":"middle"};c>m&&m>r(e+i)&&(l.horizontal="center"),d>g&&g>r(n+o)&&(l.vertical="middle"),l.important=a(r(e),r(i))>a(r(n),r(o))?"horizontal":"vertical",s.using.call(this,t,l)}),u.offset(t.extend(I,{using:h}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,r=t.left-e.collisionPosition.marginLeft,l=s-r,h=r+e.collisionWidth-o-s;e.collisionWidth>o?l>0&&0>=h?(i=t.left+l+e.collisionWidth-o-s,t.left+=l-i):t.left=h>0&&0>=l?s:l>h?s+o-e.collisionWidth:s:l>0?t.left+=l:h>0?t.left-=h:t.left=a(t.left-r,t.left)},top:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollTop:n.offset.top,o=e.within.height,r=t.top-e.collisionPosition.marginTop,l=s-r,h=r+e.collisionHeight-o-s;e.collisionHeight>o?l>0&&0>=h?(i=t.top+l+e.collisionHeight-o-s,t.top+=l-i):t.top=h>0&&0>=l?s:l>h?s+o-e.collisionHeight:s:l>0?t.top+=l:h>0?t.top-=h:t.top=a(t.top-r,t.top)}},flip:{left:function(t,e){var i,n,s=e.within,o=s.offset.left+s.scrollLeft,a=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,h=t.left-e.collisionPosition.marginLeft,u=h-l,c=h+e.collisionWidth-a-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>u?(i=t.left+d+p+f+e.collisionWidth-a-o,(0>i||r(u)>i)&&(t.left+=d+p+f)):c>0&&(n=t.left-e.collisionPosition.marginLeft+d+p+f-l,(n>0||c>r(n))&&(t.left+=d+p+f))},top:function(t,e){var i,n,s=e.within,o=s.offset.top+s.scrollTop,a=s.height,l=s.isWindow?s.scrollTop:s.offset.top,h=t.top-e.collisionPosition.marginTop,u=h-l,c=h+e.collisionHeight-a-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];0>u?(n=t.top+p+f+m+e.collisionHeight-a-o,(0>n||r(u)>n)&&(t.top+=p+f+m)):c>0&&(i=t.top-e.collisionPosition.marginTop+p+f+m-l,(i>0||c>r(i))&&(t.top+=p+f+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,n,s,a,r=document.getElementsByTagName("body")[0],l=document.createElement("div");e=document.createElement(r?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in n)e.style[a]=n[a];e.appendChild(l),i=r||document.documentElement,i.insertBefore(e,i.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",s=t(l).offset().left,o=s>10&&11>s,e.innerHTML="",i.removeChild(e)}()}(),t.ui.position,t.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),e.collapsible||e.active!==!1&&null!=e.active||(e.active=0),this._processPanels(),0>e.active&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t()}},_createIcons:function(){var e=this.options.icons;e&&(t("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?void this._activate(e):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||this.options.active!==!1||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),void("disabled"===t&&(this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e))))},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,n=this.headers.length,s=this.headers.index(e.target),o=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(s+1)%n];break;case i.LEFT:case i.UP:o=this.headers[(s-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[n-1]}o&&(t(e.target).attr("tabIndex",-1),t(o).attr("tabIndex",0),o.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().focus()},refresh:function(){var e=this.options;this._processPanels(),e.active===!1&&e.collapsible===!0||!this.headers.length?(e.active=!1,this.active=t()):e.active===!1?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var e,i=this.options,n=i.heightStyle,s=this.element.parent();this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var e=t(this),i=e.uniqueId().attr("id"),n=e.next(),s=n.uniqueId().attr("id");e.attr("aria-controls",s),n.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===n?(e=s.height(),this.element.siblings(":visible").each(function(){var i=t(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(e-=i.outerHeight(!0))}),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===n&&(e=0,this.headers.next().each(function(){e=Math.max(e,t(this).css("height","").height())}).height(e))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i=this.options,n=this.active,s=t(e.currentTarget),o=s[0]===n[0],a=o&&i.collapsible,r=a?t():s.next(),l=n.next(),h={oldHeader:n,oldPanel:l,newHeader:a?t():s,newPanel:r};e.preventDefault(),o&&!i.collapsible||this._trigger("beforeActivate",e,h)===!1||(i.active=!a&&this.headers.index(s),this.active=o?t():s,this._toggle(h),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),o||(s.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),s.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,n=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,e):(n.hide(),i.show(),this._toggleComplete(e)),n.attr({"aria-hidden":"true"}),n.prev().attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&n.length?n.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===parseInt(t(this).attr("tabIndex"),10)}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,e,i){var n,s,o,a=this,r=0,l=t.css("box-sizing"),h=t.length&&(!e.length||t.index()<e.index()),u=this.options.animate||{},c=h&&u.down||u,d=function(){a._toggleComplete(i)};return"number"==typeof c&&(o=c),"string"==typeof c&&(s=c),s=s||c.easing||u.easing,o=o||c.duration||u.duration,e.length?t.length?(n=t.show().outerHeight(),e.animate(this.hideProps,{duration:o,easing:s,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:o,easing:s,complete:d,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?"content-box"===l&&(r+=i.now):"content"!==a.options.heightStyle&&(i.now=Math.round(n-e.outerHeight()-r),r=0)}})):e.animate(this.hideProps,o,s,d):t.animate(this.showProps,o,s,d)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),t.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),
this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var i=t(e.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&t(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var i=t(e.currentTarget);i.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){var i,n,s,o,a=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:a=!1,n=this.previousFilter||"",s=String.fromCharCode(e.keyCode),o=!1,clearTimeout(this.filterTimer),s===n?o=!0:s=n+s,i=this._filterMenuItems(s),i=o&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(s=String.fromCharCode(e.keyCode),i=this._filterMenuItems(s)),i.length?(this.focus(e,i),this.previousFilter=s,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}a&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(t):this.select(t))},refresh:function(){var e,i,n=this,s=this.options.icons.submenu,o=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),o.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),i=e.parent(),n=t("<span>").addClass("ui-menu-icon ui-icon "+s).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",i.attr("id"))}),e=o.add(this.element),i=e.find(this.options.items),i.not(".ui-menu-item").each(function(){var e=t(this);n._isDivider(e)&&e.addClass("ui-widget-content ui-menu-divider")}),i.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this._super(t,e)},focus:function(t,e){var i,n;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,n,s,o,a,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,s=e.offset().top-this.activeMenu.offset().top-i-n,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),r=e.outerHeight(),0>s?this.activeMenu.scrollTop(o+s):s+r>a&&this.activeMenu.scrollTop(o+s-a+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(e),this.activeMenu=n},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.find(this.options.items)[e]()),this.focus(i,n)},nextPage:function(e){var i,n,s;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),0>i.offset().top-n-s}),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(e)},previousPage:function(e){var i,n,s;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-n+s>0}),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items).first()))):void this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)},_filterMenuItems:function(e){var i=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return n.test(t.trim(t(this).text()))})}}),t.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,i,n,s=this.element[0].nodeName.toLowerCase(),o="textarea"===s,a="input"===s;this.isMultiLine=!!o||!a&&this.element.prop("isContentEditable"),this.valueMethod=this.element[o||a?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return e=!0,n=!0,void(i=!0);e=!1,n=!1,i=!1;var o=t.ui.keyCode;switch(s.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",s);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",s);break;case o.UP:e=!0,this._keyEvent("previous",s);break;case o.DOWN:e=!0,this._keyEvent("next",s);break;case o.ENTER:this.menu.active&&(e=!0,s.preventDefault(),this.menu.select(s));break;case o.TAB:this.menu.active&&this.menu.select(s);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(s),s.preventDefault());break;default:i=!0,this._searchTimeout(s)}},keypress:function(n){if(e)return e=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault());if(!i){var s=t.ui.keyCode;switch(n.keyCode){case s.PAGE_UP:this._move("previousPage",n);break;case s.PAGE_DOWN:this._move("nextPage",n);break;case s.UP:this._keyEvent("previous",n);break;case s.DOWN:this._keyEvent("next",n)}}},input:function(t){return n?(n=!1,void t.preventDefault()):void this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),void this._change(t))}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(n){n.target===e.element[0]||n.target===i||t.contains(i,n.target)||e.close()})})},menufocus:function(e,i){var n,s;return this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)})):(s=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:s})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(s.value),n=i.item.attr("aria-label")||s.value,void(n&&t.trim(n).length&&(this.liveRegion.children().hide(),t("<div>").text(n).appendTo(this.liveRegion))))},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=t("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,n=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,n){n(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,s){n.xhr&&n.xhr.abort(),n.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){s(t)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),i=this.menu.element.is(":visible"),n=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;(!e||e&&!i&&!n)&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var n=this;t.each(i,function(t,i){n._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").text(i.label).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var n=RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return n.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(i).appendTo(this.liveRegion))}}),t.ui.autocomplete;var d,p="ui-button ui-widget ui-state-default ui-corner-all",f="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",m=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},g=function(e){var i=e.name,n=e.form,s=t([]);return i&&(i=i.replace(/'/g,"\\'"),s=n?t(n).find("[name='"+i+"'][type=radio]"):t("[name='"+i+"'][type=radio]",e.ownerDocument).filter(function(){return!this.form})),s};t.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,m),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,i=this.options,n="checkbox"===this.type||"radio"===this.type,s=n?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===d&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||t(this).removeClass(s)}).bind("click"+this.eventNamespace,function(t){i.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),n&&this.element.bind("change"+this.eventNamespace,function(){e.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return!i.disabled&&void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1;t(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var n=e.element[0];g(n).not(n).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return!i.disabled&&(t(this).addClass("ui-state-active"),d=this,void e.document.one("mouseup",function(){d=null}))}).bind("mouseup"+this.eventNamespace,function(){return!i.disabled&&void t(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){return!i.disabled&&void((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(p+" ui-state-active "+f).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?(this.widget().toggleClass("ui-state-disabled",!!e),this.element.prop("disabled",!!e),void(e&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")))):void this._resetButton()},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?g(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var e=this.buttonElement.removeClass(f),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),n=this.options.icons,s=n.primary&&n.secondary,o=[];n.primary||n.secondary?(this.options.text&&o.push("ui-button-text-icon"+(s?"s":n.primary?"-primary":"-secondary")),n.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(o.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):o.push("ui-button-text-only"),e.addClass(o.join(" "))}}),t.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),n=i.filter(":ui-button");i.not(":ui-button").button(),n.button("refresh"),this.buttons=i.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),t.ui.button,t.extend(t.ui,{datepicker:{version:"1.11.4"}});var v;t.extend(s.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return r(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var n,s,o;n=e.nodeName.toLowerCase(),s="div"===n||"span"===n,e.id||(this.uuid+=1,e.id="dp"+this.uuid),o=this._newInst(t(e),s),o.settings=t.extend({},i||{}),"input"===n?this._connectDatepicker(e,o):s&&this._inlineDatepicker(e,o)},_newInst:function(e,i){var n=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?o(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var n=t(e);i.append=t([]),i.trigger=t([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,"datepicker",i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var n,s,o,a=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),a&&(i.append=t("<span class='"+this._appendClass+"'>"+a+"</span>"),e[r?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),n=this._get(i,"showOn"),("focus"===n||"both"===n)&&e.focus(this._showDatepicker),("button"===n||"both"===n)&&(s=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:s,title:s}):s)),e[r?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,n,s,o=new Date(2009,11,20),a=this._get(t,"dateFormat");a.match(/[DM]/)&&(e=function(t){for(i=0,n=0,s=0;t.length>s;s++)t[s].length>i&&(i=t[s].length,n=s);return n},o.setMonth(e(this._get(t,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,i){var n=t(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),t.data(e,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,n,s,o){var a,l,h,u,c,d=this._dialogInst;return d||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),d=this._dialogInst=this._newInst(this._dialogInput,!1),d.settings={},t.data(this._dialogInput[0],"datepicker",d)),r(d.settings,s||{}),i=i&&i.constructor===Date?this._formatDate(d,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(l=document.documentElement.clientWidth,h=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+u,h/2-150+c]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),d.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",d),this},_destroyDatepicker:function(e){var i,n=t(e),s=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===i?(s.append.remove(),s.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty(),v===s&&(v=null))},_enableDatepicker:function(e){var i,n,s=t(e),o=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(n=s.children("."+this._inlineClass),n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,n,s=t(e),o=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(n=s.children("."+this._inlineClass),n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,n){var s,o,a,l,h=this._getInst(e);return 2===arguments.length&&"string"==typeof i?"defaults"===i?t.extend({},t.datepicker._defaults):h?"all"===i?t.extend({},h.settings):this._get(h,i):null:(s=i||{},"string"==typeof i&&(s={},s[i]=n),void(h&&(this._curInst===h&&this._hideDatepicker(),o=this._getDateDatepicker(e,!0),a=this._getMinMaxDate(h,"min"),l=this._getMinMaxDate(h,"max"),r(h.settings,s),null!==a&&void 0!==s.dateFormat&&void 0===s.minDate&&(h.settings.minDate=this._formatDate(h,a)),null!==l&&void 0!==s.dateFormat&&void 0===s.maxDate&&(h.settings.maxDate=this._formatDate(h,l)),"disabled"in s&&(s.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),h),this._autoSize(h),this._setDate(h,o),this._updateAlternate(h),this._updateDatepicker(h))))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,n,s,o=t.datepicker._getInst(e.target),a=!0,r=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),a=!1;break;case 13:return s=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",o.dpDiv),s[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,s[0]),i=t.datepicker._get(o,"onSelect"),i?(n=t.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[n,o])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),a=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),a=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?1:-1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),a=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?-1:1,"D"),
a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),a=e.ctrlKey||e.metaKey;break;default:a=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):a=!1;a&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,n,s=t.datepicker._getInst(e.target);return t.datepicker._get(s,"constrainInput")?(i=t.datepicker._possibleChars(t.datepicker._get(s,"dateFormat")),n=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">n||!i||i.indexOf(n)>-1):void 0},_doKeyUp:function(e){var i,n=t.datepicker._getInst(e.target);if(n.input.val()!==n.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,t.datepicker._getFormatConfig(n)),i&&(t.datepicker._setDateFromField(n),t.datepicker._updateAlternate(n),t.datepicker._updateDatepicker(n))}catch(s){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var i,s,o,a,l,h,u;i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),s=t.datepicker._get(i,"beforeShow"),o=s?s.apply(e,[e,i]):{},o!==!1&&(r(i.settings,o),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),a=!1,t(e).parents().each(function(){return a|="fixed"===t(this).css("position"),!a}),l={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),l=t.datepicker._checkOffset(i,l,a),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":a?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"}),i.inline||(h=t.datepicker._get(i,"showAnim"),u=t.datepicker._get(i,"duration"),i.dpDiv.css("z-index",n(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[h]?i.dpDiv.show(h,t.datepicker._get(i,"showOptions"),u):i.dpDiv[h||"show"](h?u:null),t.datepicker._shouldFocusInput(i)&&i.input.focus(),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,v=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i,n=this._getNumberOfMonths(e),s=n[1],o=17,r=e.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&a.apply(r.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&e.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",o*s+"em"),e.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,n){var s=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:t(document).scrollLeft()),h=document.documentElement.clientHeight+(n?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?s-a:0,i.left-=n&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=n&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+s>l&&l>s?Math.abs(i.left+s-l):0),i.top-=Math.min(i.top,i.top+o>h&&h>o?Math.abs(o+r):0),i},_findPos:function(e){for(var i,n=this._getInst(e),s=this._get(n,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[s?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,n,s,o,a=this._curInst;!a||e&&a!==t.data(e,"datepicker")||this._datepickerShowing&&(i=this._get(a,"showAnim"),n=this._get(a,"duration"),s=function(){t.datepicker._tidyDialog(a)},t.effects&&(t.effects.effect[i]||t.effects[i])?a.dpDiv.hide(i,t.datepicker._get(a,"showOptions"),n,s):a.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,s),i||s(),this._datepickerShowing=!1,o=this._get(a,"onClose"),o&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),n=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==n)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,n){var s=t(e),o=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(o,i+("M"===n?this._get(o,"showCurrentAtPos"):0),n),this._updateDatepicker(o))},_gotoToday:function(e){var i,n=t(e),s=this._getInst(n[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(i=new Date,s.selectedDay=i.getDate(),s.drawMonth=s.selectedMonth=i.getMonth(),s.drawYear=s.selectedYear=i.getFullYear()),this._notifyChange(s),this._adjustDate(n)},_selectMonthYear:function(e,i,n){var s=t(e),o=this._getInst(s[0]);o["selected"+("M"===n?"Month":"Year")]=o["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(s)},_selectDay:function(e,i,n,s){var o,a=t(e);t(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(o=this._getInst(a[0]),o.selectedDay=o.currentDay=t("a",s).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=n,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var n,s=t(e),o=this._getInst(s[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),n=this._get(o,"onSelect"),n?n.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,n,s,o=this._get(e,"altField");o&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),s=this.formatDate(i,n,this._getFormatConfig(e)),t(o).each(function(){t(this).val(s)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,n){if(null==e||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var s,o,a,r,l=0,h=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof h?h:(new Date).getFullYear()%100+parseInt(h,10),c=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,d=(n?n.dayNames:null)||this._defaults.dayNames,p=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,b=-1,_=!1,y=function(t){var i=e.length>s+1&&e.charAt(s+1)===t;return i&&s++,i},w=function(t){var e=y(t),n="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,s="y"===t?n:1,o=RegExp("^\\d{"+s+","+n+"}"),a=i.substring(l).match(o);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},x=function(e,n,s){var o=-1,a=t.map(y(e)?s:n,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(a,function(t,e){var n=e[1];return i.substr(l,n.length).toLowerCase()===n.toLowerCase()?(o=e[0],l+=n.length,!1):void 0}),-1!==o)return o+1;throw"Unknown name at position "+l},k=function(){if(i.charAt(l)!==e.charAt(s))throw"Unexpected literal at position "+l;l++};for(s=0;e.length>s;s++)if(_)"'"!==e.charAt(s)||y("'")?k():_=!1;else switch(e.charAt(s)){case"d":v=w("d");break;case"D":x("D",c,d);break;case"o":b=w("o");break;case"m":g=w("m");break;case"M":g=x("M",p,f);break;case"y":m=w("y");break;case"@":r=new Date(w("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((w("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":y("'")?k():_=!0;break;default:k()}if(i.length>l&&(a=i.substr(l),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),b>-1)for(g=1,v=b;o=this._getDaysInMonth(m,g-1),!(o>=v);)g++,v-=o;if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var n,s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=function(e){var i=t.length>n+1&&t.charAt(n+1)===e;return i&&n++,i},h=function(t,e,i){var n=""+e;if(l(t))for(;i>n.length;)n="0"+n;return n},u=function(t,e,i,n){return l(t)?n[e]:i[e]},c="",d=!1;if(e)for(n=0;t.length>n;n++)if(d)"'"!==t.charAt(n)||l("'")?c+=t.charAt(n):d=!1;else switch(t.charAt(n)){case"d":c+=h("d",e.getDate(),2);break;case"D":c+=u("D",e.getDay(),s,o);break;case"o":c+=h("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":c+=h("m",e.getMonth()+1,2);break;case"M":c+=u("M",e.getMonth(),a,r);break;case"y":c+=l("y")?e.getFullYear():(10>e.getYear()%100?"0":"")+e.getYear()%100;break;case"@":c+=e.getTime();break;case"!":c+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?c+="'":d=!0;break;default:c+=t.charAt(n)}return c},_possibleChars:function(t){var e,i="",n=!1,s=function(i){var n=t.length>e+1&&t.charAt(e+1)===i;return n&&e++,n};for(e=0;t.length>e;e++)if(n)"'"!==t.charAt(e)||s("'")?i+=t.charAt(e):n=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":s("'")?i+="'":n=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),n=t.lastVal=t.input?t.input.val():null,s=this._getDefaultDate(t),o=s,a=this._getFormatConfig(t);try{o=this.parseDate(i,n,a)||s}catch(r){n=e?"":n}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=n?o.getDate():0,t.currentMonth=n?o.getMonth():0,t.currentYear=n?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,n){var s=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},o=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(n){}for(var s=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,o=s.getFullYear(),a=s.getMonth(),r=s.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,h=l.exec(i);h;){switch(h[2]||"d"){case"d":case"D":r+=parseInt(h[1],10);break;case"w":case"W":r+=7*parseInt(h[1],10);break;case"m":case"M":a+=parseInt(h[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a));break;case"y":case"Y":o+=parseInt(h[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a))}h=l.exec(i)}return new Date(o,a,r)},a=null==i||""===i?n:"string"==typeof i?o(i):"number"==typeof i?isNaN(i)?n:s(i):new Date(i.getTime());return a=a&&"Invalid Date"==""+a?n:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var n=!e,s=t.selectedMonth,o=t.selectedYear,a=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=a.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=a.getMonth(),t.drawYear=t.selectedYear=t.currentYear=a.getFullYear(),s===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(n?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(n,-i,"M")},next:function(){t.datepicker._adjustDate(n,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(n)},selectDay:function(){return t.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(n,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,n,s,o,a,r,l,h,u,c,d,p,f,m,g,v,b,_,y,w,x,k,C,D,T,I,S,N,M,E,P,A,H,z,O,W,F,L,j=new Date,R=this._daylightSavingAdjust(new Date(j.getFullYear(),j.getMonth(),j.getDate())),q=this._get(t,"isRTL"),B=this._get(t,"showButtonPanel"),Y=this._get(t,"hideIfNoPrevNext"),$=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),K=this._get(t,"showCurrentAtPos"),X=this._get(t,"stepMonths"),V=1!==U[0]||1!==U[1],G=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(t,"min"),Q=this._getMinMaxDate(t,"max"),Z=t.drawMonth-K,tt=t.drawYear;if(0>Z&&(Z+=12,tt--),Q)for(e=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-U[0]*U[1]+1,Q.getDate())),e=J&&J>e?J:e;this._daylightSavingAdjust(new Date(tt,Z,1))>e;)Z--,0>Z&&(Z=11,tt--);for(t.drawMonth=Z,t.drawYear=tt,i=this._get(t,"prevText"),i=$?this.formatDate(i,this._daylightSavingAdjust(new Date(tt,Z-X,1)),this._getFormatConfig(t)):i,n=this._canAdjustMonth(t,-1,tt,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"e":"w")+"'>"+i+"</span></a>":Y?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"e":"w")+"'>"+i+"</span></a>",s=this._get(t,"nextText"),s=$?this.formatDate(s,this._daylightSavingAdjust(new Date(tt,Z+X,1)),this._getFormatConfig(t)):s,o=this._canAdjustMonth(t,1,tt,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"w":"e")+"'>"+s+"</span></a>":Y?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"w":"e")+"'>"+s+"</span></a>",a=this._get(t,"currentText"),r=this._get(t,"gotoCurrent")&&t.currentDay?G:R,a=$?this.formatDate(a,r,this._getFormatConfig(t)):a,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",h=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(q?l:"")+(this._isInRange(t,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(q?"":l)+"</div>":"",u=parseInt(this._get(t,"firstDay"),10),u=isNaN(u)?0:u,c=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),b=this._get(t,"selectOtherMonths"),_=this._getDefaultDate(t),y="",x=0;U[0]>x;x++){for(k="",this.maxRows=4,C=0;U[1]>C;C++){if(D=this._daylightSavingAdjust(new Date(tt,Z,t.selectedDay)),T=" ui-corner-all",I="",V){if(I+="<div class='ui-datepicker-group",U[1]>1)switch(C){case 0:I+=" ui-datepicker-group-first",T=" ui-corner-"+(q?"right":"left");break;case U[1]-1:I+=" ui-datepicker-group-last",T=" ui-corner-"+(q?"left":"right");break;default:I+=" ui-datepicker-group-middle",T=""}I+="'>"}for(I+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===x?q?o:n:"")+(/all|right/.test(T)&&0===x?q?n:o:"")+this._generateMonthYearHeader(t,Z,tt,J,Q,x>0||C>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",S=c?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)N=(w+u)%7,S+="<th scope='col'"+((w+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+d[N]+"'>"+p[N]+"</span></th>";for(I+=S+"</tr></thead><tbody>",M=this._getDaysInMonth(tt,Z),tt===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,M)),E=(this._getFirstDayOfMonth(tt,Z)-u+7)%7,P=Math.ceil((E+M)/7),A=V&&this.maxRows>P?this.maxRows:P,this.maxRows=A,H=this._daylightSavingAdjust(new Date(tt,Z,1-E)),z=0;A>z;z++){for(I+="<tr>",O=c?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(H)+"</td>":"",w=0;7>w;w++)W=g?g.apply(t.input?t.input[0]:null,[H]):[!0,""],F=H.getMonth()!==Z,L=F&&!b||!W[0]||J&&J>H||Q&&H>Q,O+="<td class='"+((w+u+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(H.getTime()===D.getTime()&&Z===t.selectedMonth&&t._keyEvent||_.getTime()===H.getTime()&&_.getTime()===D.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!v?"":" "+W[1]+(H.getTime()===G.getTime()?" "+this._currentClass:"")+(H.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(F&&!v||!W[2]?"":" title='"+W[2].replace(/'/g,"&#39;")+"'")+(L?"":" data-handler='selectDay' data-event='click' data-month='"+H.getMonth()+"' data-year='"+H.getFullYear()+"'")+">"+(F&&!v?"&#xa0;":L?"<span class='ui-state-default'>"+H.getDate()+"</span>":"<a class='ui-state-default"+(H.getTime()===R.getTime()?" ui-state-highlight":"")+(H.getTime()===G.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+H.getDate()+"</a>")+"</td>",H.setDate(H.getDate()+1),H=this._daylightSavingAdjust(H);I+=O+"</tr>"}Z++,Z>11&&(Z=0,tt++),I+="</tbody></table>"+(V?"</div>"+(U[0]>0&&C===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=I}y+=k}return y+=h,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,n,s,o,a,r){var l,h,u,c,d,p,f,m,g=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),b=this._get(t,"showMonthAfterYear"),_="<div class='ui-datepicker-title'>",y="";if(o||!g)y+="<span class='ui-datepicker-month'>"+a[e]+"</span>";else{for(l=n&&n.getFullYear()===i,h=s&&s.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!l||u>=n.getMonth())&&(!h||s.getMonth()>=u)&&(y+="<option value='"+u+"'"+(u===e?" selected='selected'":"")+">"+r[u]+"</option>");y+="</select>"}if(b||(_+=y+(!o&&g&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!v)_+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(c=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(c[0]),m=Math.max(f,p(c[1]||"")),f=n?Math.max(f,n.getFullYear()):f,m=s?Math.min(m,s.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",_+=t.yearshtml,t.yearshtml=null}return _+=this._get(t,"yearSuffix"),b&&(_+=(!o&&g&&v?"":"&#xa0;")+y),_+="</div>"},_adjustInstDate:function(t,e,i){var n=t.drawYear+("Y"===i?e:0),s=t.drawMonth+("M"===i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(n,s))+("D"===i?e:0),a=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(n,s,o)));t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),s=i&&i>e?i:e;return n&&s>n?n:s},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,n){var s=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,n+(0>e?e:s[0]*s[1]),1));return 0>e&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i,n,s=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),a=null,r=null,l=this._get(t,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),a=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(a+=n),i[1].match(/[+\-].*/)&&(r+=n)),(!s||e.getTime()>=s.getTime())&&(!o||e.getTime()<=o.getTime())&&(!a||e.getFullYear()>=a)&&(!r||r>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,n){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var s=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(n,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),s,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new s,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.11.4",t.datepicker,t.widget("ui.draggable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(e){var i=this.options;return this._blurActiveElement(e),!(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=this.document[0];if(this.handleElement.is(e.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&t(i.activeElement).blur()}catch(n){}},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._normalizeRightBottom(),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",e,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.focus(),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper),s=n?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&s[0]===this.element[0]&&this._setPositionRelative(),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,s=this.options,o=this.document[0];return this.relativeContainer=null,s.containment?"window"===s.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===s.containment?void(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):s.containment.constructor===Array?void(this.containment=s.containment):("parent"===s.containment&&(s.containment=this.helper[0].parentNode),
i=t(s.containment),n=i[0],void(n&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,s,o,a=this.options,r=this._isRootNode(this.scrollParent[0]),l=t.pageX,h=t.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),a.grid&&(s=a.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,h=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-a.grid[1]:s+a.grid[1]:s,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,n){var s=t.extend({},i,{item:n.element});n.sortables=[],t(n.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,s))})},stop:function(e,i,n){var s=t.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,t.each(n.sortables,function(){var t=this;t.isOver?(t.isOver=0,n.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,s))})},drag:function(e,i,n){t.each(n.sortables,function(){var s=!1,o=this;o.positionAbs=n.positionAbs,o.helperProportions=n.helperProportions,o.offset.click=n.offset.click,o._intersectsWith(o.containerCache)&&(s=!0,t.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(s=!1),s})),s?(o.isOver||(o.isOver=1,n._parent=i.helper.parent(),o.currentItem=i.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return i.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=n.offset.click.top,o.offset.click.left=n.offset.click.left,o.offset.parent.left-=n.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=n.offset.parent.top-o.offset.parent.top,n._trigger("toSortable",e),n.dropped=o.element,t.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,o.fromOutside=n),o.currentItem&&(o._mouseDrag(e),i.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(e),i.position=n._generatePosition(e,!0),n._trigger("fromSortable",e),n.dropped=!1,t.each(n.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,n){var s=t("body"),o=n.options;s.css("cursor")&&(o._cursor=s.css("cursor")),s.css("cursor",o.cursor)},stop:function(e,i,n){var s=n.options;s._cursor&&t("body").css("cursor",s._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,n){var s=t(i.helper),o=n.options;s.css("opacity")&&(o._opacity=s.css("opacity")),s.css("opacity",o.opacity)},stop:function(e,i,n){var s=n.options;s._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,n){var s=n.options,o=!1,a=n.scrollParentNotHidden[0],r=n.document[0];a!==r&&"HTML"!==a.tagName?(s.axis&&"x"===s.axis||(n.overflowOffset.top+a.offsetHeight-e.pageY<s.scrollSensitivity?a.scrollTop=o=a.scrollTop+s.scrollSpeed:e.pageY-n.overflowOffset.top<s.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(n.overflowOffset.left+a.offsetWidth-e.pageX<s.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+s.scrollSpeed:e.pageX-n.overflowOffset.left<s.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(e.pageY-t(r).scrollTop()<s.scrollSensitivity?o=t(r).scrollTop(t(r).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(r).scrollTop())<s.scrollSensitivity&&(o=t(r).scrollTop(t(r).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(e.pageX-t(r).scrollLeft()<s.scrollSensitivity?o=t(r).scrollLeft(t(r).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(r).scrollLeft())<s.scrollSensitivity&&(o=t(r).scrollLeft(t(r).scrollLeft()+s.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,n){var s=n.options;n.snapElements=[],t(s.snap.constructor!==String?s.snap.items||":data(ui-draggable)":s.snap).each(function(){var e=t(this),i=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,n){var s,o,a,r,l,h,u,c,d,p,f=n.options,m=f.snapTolerance,g=i.offset.left,v=g+n.helperProportions.width,b=i.offset.top,_=b+n.helperProportions.height;for(d=n.snapElements.length-1;d>=0;d--)l=n.snapElements[d].left-n.margins.left,h=l+n.snapElements[d].width,u=n.snapElements[d].top-n.margins.top,c=u+n.snapElements[d].height,l-m>v||g>h+m||u-m>_||b>c+m||!t.contains(n.snapElements[d].item.ownerDocument,n.snapElements[d].item)?(n.snapElements[d].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(s=m>=Math.abs(u-_),o=m>=Math.abs(c-b),a=m>=Math.abs(l-v),r=m>=Math.abs(h-g),s&&(i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),o&&(i.position.top=n._convertPositionTo("relative",{top:c,left:0}).top),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h}).left)),p=s||o||a||r,"outer"!==f.snapMode&&(s=m>=Math.abs(u-b),o=m>=Math.abs(c-_),a=m>=Math.abs(l-g),r=m>=Math.abs(h-v),s&&(i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),o&&(i.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left)),!n.snapElements[d].snapping&&(s||o||a||r||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=s||o||a||r||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,n){var s,o=n.options,a=t.makeArray(t(o.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});a.length&&(s=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each(function(e){t(this).css("zIndex",s+e)}),this.css("zIndex",s+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,n){var s=t(i.helper),o=n.options;s.css("zIndex")&&(o._zIndex=s.css("zIndex")),s.css("zIndex",o.zIndex)},stop:function(e,i,n){var s=n.options;s._zIndex&&t(i.helper).css("zIndex",s._zIndex)}}),t.ui.draggable,t.widget("ui.resizable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseInt(t,10)||0},_isNumber:function(t){return!isNaN(parseInt(t,10))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return e[n]>0||(e[n]=1,s=e[n]>0,e[n]=0,s)},_create:function(){var e,i,n,s,o,a=this,r=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;e.length>i;i++)n=t.trim(e[i]),o="ui-resizable-"+n,s=t("<div class='ui-resizable-handle "+o+"'></div>"),s.css({zIndex:r.zIndex}),"se"===n&&s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(s);this._renderAxis=function(e){var i,n,s,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(s,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=s&&s[1]?s[1]:"se")}),r.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(t(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){r.disabled||a.resizing||(t(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,n,s=!1;for(i in this.handles)n=t(this.handles[i])[0],(n===e.target||t.contains(n,e.target))&&(s=!0);return!this.options.disabled&&s},_mouseStart:function(e){var i,n,s,o=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),o.containment&&(i+=t(o.containment).scrollLeft()||0,n+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===s?this.axis+"-resize":s),a.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,n,s=this.originalMousePosition,o=this.axis,a=e.pageX-s.left||0,r=e.pageY-s.top||0,l=this._change[o];return this._updatePrevProperties(),!!l&&(i=l.apply(this,[e,a,r]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var i,n,s,o,a,r,l,h=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),s=n&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,o=n?0:u.sizeDiff.width,a={width:u.helper.width()-o,height:u.helper.height()-s},r=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,l=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,h.animate||this.element.css(t.extend(a,{top:l,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!h.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,n,s,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,n=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),n>o.minHeight&&(o.minHeight=n),o.maxWidth>i&&(o.maxWidth=i),o.maxHeight>s&&(o.maxHeight=s)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,n=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,s=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,a=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,r=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,h=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),s&&(t.height=e.maxHeight),o&&h&&(t.left=r-e.minWidth),n&&h&&(t.left=r-e.maxWidth),a&&u&&(t.top=l-e.minHeight),s&&u&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],n=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],s=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];4>e;e++)i[e]=parseInt(n[e],10)||0,i[e]+=parseInt(s[e],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;this._proportionallyResizeElements.length>e;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,n=this.originalPosition;return{left:n.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize,s=this.originalPosition;return{top:s.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),n=i.options,s=i._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),a=o&&i._hasScroll(s[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-a},h=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,u&&h?{top:u,left:h}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};s&&s.length&&t(s[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,n,s,o,a,r,l=t(this).resizable("instance"),h=l.options,u=l.element,c=h.containment,d=c instanceof t?c.get(0):/parent/.test(c)?u.parent().get(0):c;d&&(l.containerElement=t(d),/document/.test(c)||c===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(d),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,n){i[t]=l._num(e.css("padding"+n))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},n=l.containerOffset,s=l.containerSize.height,o=l.containerSize.width,a=l._hasScroll(d,"left")?d.scrollWidth:o,r=l._hasScroll(d)?d.scrollHeight:s,l.parentData={element:d,left:n.left,top:n.top,width:a,height:r}))},resize:function(e){var i,n,s,o,a=t(this).resizable("instance"),r=a.options,l=a.containerOffset,h=a.position,u=a._aspectRatio||e.shiftKey,c={top:0,left:0},d=a.containerElement,p=!0;d[0]!==document&&/static/.test(d.css("position"))&&(c=l),h.left<(a._helper?l.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-c.left),u&&(a.size.height=a.size.width/a.aspectRatio,p=!1),a.position.left=r.helper?l.left:0),h.top<(a._helper?l.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top),u&&(a.size.width=a.size.height*a.aspectRatio,p=!1),a.position.top=a._helper?l.top:0),s=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),s&&o?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),i=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-c.left:a.offset.left-l.left)),n=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-c.top:a.offset.top-l.top)),i+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-i,u&&(a.size.height=a.size.width/a.aspectRatio,p=!1)),n+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-n,u&&(a.size.width=a.size.height*a.aspectRatio,p=!1)),p||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,n=e.containerOffset,s=e.containerPosition,o=e.containerElement,a=t(e.helper),r=a.offset(),l=a.outerWidth()-e.sizeDiff.width,h=a.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:r.left-s.left-n.left,width:l,height:h}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:r.left-s.left-n.left,width:l,height:h})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),i=e.options;t(i.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})},resize:function(e,i){var n=t(this).resizable("instance"),s=n.options,o=n.originalSize,a=n.originalPosition,r={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-a.top||0,left:n.position.left-a.left||0};t(s.alsoResize).each(function(){var e=t(this),n=t(this).data("ui-resizable-alsoresize"),s={},o=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(n[e]||0)+(r[e]||0);i&&i>=0&&(s[e]=i||null)}),e.css(s)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.options,n=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),n=i.options,s=i.size,o=i.originalSize,a=i.originalPosition,r=i.axis,l="number"==typeof n.grid?[n.grid,n.grid]:n.grid,h=l[0]||1,u=l[1]||1,c=Math.round((s.width-o.width)/h)*h,d=Math.round((s.height-o.height)/u)*u,p=o.width+c,f=o.height+d,m=n.maxWidth&&p>n.maxWidth,g=n.maxHeight&&f>n.maxHeight,v=n.minWidth&&n.minWidth>p,b=n.minHeight&&n.minHeight>f;n.grid=l,v&&(p+=h),b&&(f+=u),m&&(p-=h),g&&(f-=u),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=a.top-d):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=a.left-c):((0>=f-u||0>=p-h)&&(e=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=a.top-d):(f=u-e.height,i.size.height=f,i.position.top=a.top+o.height-f),p-h>0?(i.size.width=p,i.position.left=a.left-c):(p=h-e.width,i.size.width=p,i.position.left=a.left+o.width-p))}}),t.ui.resizable,t.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i,n=this;if(this._isOpen&&this._trigger("beforeClose",e)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&t(i).blur()}catch(s){}this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",e)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,i){var n=!1,s=this.uiDialog.siblings(".ui-front:visible").map(function(){return+t(this).css("z-index")}).get(),o=Math.max.apply(null,s);return o>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",o+1),n=!0),n&&!i&&this._trigger("focus",e),n},open:function(){var e=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._makeFocusTarget(),
void this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function i(){var e=this.document[0].activeElement,i=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);i||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB&&!e.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),s=i.filter(":last");e.target!==s[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==n[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay(function(){s.focus()}),e.preventDefault()):(this._delay(function(){n.focus()}),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(t.each(i,function(i,n){var s,o;n=t.isFunction(n)?{click:n,text:i}:n,n=t.extend({type:"button"},n),s=n.click,n.click=function(){s.apply(e.element[0],arguments)},o={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,t("<button></button>",n).button(o).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,s){t(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,e(s))},drag:function(t,n){i._trigger("drag",t,e(n))},stop:function(s,o){var a=o.offset.left-i.document.scrollLeft(),r=o.offset.top-i.document.scrollTop();n.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(r>=0?"+":"")+r,of:i.window},t(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",s,e(o))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,n=this.options,s=n.resizable,o=this.uiDialog.css("position"),a="string"==typeof s?s:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:a,start:function(n,s){t(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,e(s))},resize:function(t,n){i._trigger("resize",t,e(n))},stop:function(s,o){var a=i.uiDialog.offset(),r=a.left-i.document.scrollLeft(),l=a.top-i.document.scrollTop();n.height=i.uiDialog.height(),n.width=i.uiDialog.width(),n.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" top"+(l>=0?"+":"")+l,of:i.window},t(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",s,e(o))}}).css("position",o)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=t(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),i=t.inArray(this,e);-1!==i&&e.splice(i,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var i=this,n=!1,s={};t.each(e,function(t,e){i._setOption(t,e),t in i.sizeRelatedOptions&&(n=!0),t in i.resizableRelatedOptions&&(s[t]=e)}),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,e){var i,n,s=this.uiDialog;"dialogClass"===t&&s.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&(i=s.is(":data(ui-draggable)"),i&&!e&&s.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(n=s.is(":data(ui-resizable)"),n&&!e&&s.resizable("destroy"),n&&"string"==typeof e&&s.resizable("option","handles",e),n||e===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),t=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),e=Math.max(0,n.minHeight-t),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-t):"none","auto"===n.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!t(e.target).closest(".ui-dialog").length||!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),t.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,n=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(n)?n:function(t){return t.is(n)},this.proportions=function(){return arguments.length?void(e=arguments[0]):e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;t.length>e;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){if("accept"===e)this.accept=t.isFunction(i)?i:function(t){return t.is(i)};else if("scope"===e){var n=t.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(i)}this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var n=i||t.ui.ddmanager.current,s=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=t(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===n.options.scope&&i.accept.call(i.element[0],n.currentItem||n.element)&&t.ui.intersect(n,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e)?(s=!0,!1):void 0}),!s&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(n)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(){function t(t,e,i){return t>=e&&e+i>t}return function(e,i,n,s){if(!i.offset)return!1;var o=(e.positionAbs||e.position.absolute).left+e.margins.left,a=(e.positionAbs||e.position.absolute).top+e.margins.top,r=o+e.helperProportions.width,l=a+e.helperProportions.height,h=i.offset.left,u=i.offset.top,c=h+i.proportions().width,d=u+i.proportions().height;switch(n){case"fit":return o>=h&&c>=r&&a>=u&&d>=l;case"intersect":return o+e.helperProportions.width/2>h&&c>r-e.helperProportions.width/2&&a+e.helperProportions.height/2>u&&d>l-e.helperProportions.height/2;case"pointer":return t(s.pageY,u,i.proportions().height)&&t(s.pageX,h,i.proportions().width);case"touch":return(a>=u&&d>=a||l>=u&&d>=l||u>a&&l>d)&&(o>=h&&c>=o||r>=h&&c>=r||h>o&&r>c);default:return!1}}}(),t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var n,s,o=t.ui.ddmanager.droppables[e.options.scope]||[],a=i?i.type:null,r=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(n=0;o.length>n;n++)if(!(o[n].options.disabled||e&&!o[n].accept.call(o[n].element[0],e.currentItem||e.element))){for(s=0;r.length>s;s++)if(r[s]===o[n].element[0]){o[n].proportions().height=0;continue t}o[n].visible="none"!==o[n].element.css("display"),o[n].visible&&("mousedown"===a&&o[n]._activate.call(o[n],i),o[n].offset=o[n].element.offset(),o[n].proportions({width:o[n].element[0].offsetWidth,height:o[n].element[0].offsetHeight}))}},drop:function(e,i){var n=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance,i)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,s,o,a=t.ui.intersect(e,this,this.options.tolerance,i),r=!a&&this.isover?"isout":a&&!this.isover?"isover":null;r&&(this.options.greedy&&(s=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===s}),o.length&&(n=t(o[0]).droppable("instance"),n.greedyChild="isover"===r)),n&&"isover"===r&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),n&&"isout"===r&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}},t.ui.droppable;var b="ui-effects-",_=t;t.effects={effect:{}},function(t,e){function i(t,e,i){var n=c[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:0>t?0:t>n.max?n.max:t)}function n(i){var n=h(),s=n._rgba=[];return i=i.toLowerCase(),f(l,function(t,o){var a,r=o.re.exec(i),l=r&&o.parse(r),h=o.space||"rgba";return l?(a=n[h](l),n[u[h].cache]=a[u[h].cache],s=n._rgba=a._rgba,!1):e}),s.length?("0,0,0,0"===s.join()&&t.extend(s,o.transparent),n):o[i]}function s(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],h=t.Color=function(e,i,n,s){return new t.Color.fn.parse(e,i,n,s)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},c={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=h.support={},p=t("<p>")[0],f=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(u,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),h.fn=t.extend(h.prototype,{parse:function(s,a,r,l){if(s===e)return this._rgba=[null,null,null,null],this;(s.jquery||s.nodeType)&&(s=t(s).css(a),a=e);var c=this,d=t.type(s),p=this._rgba=[];return a!==e&&(s=[s,a,r,l],d="array"),"string"===d?this.parse(n(s)||o._default):"array"===d?(f(u.rgba.props,function(t,e){p[e.idx]=i(s[e.idx],e)}),this):"object"===d?(s instanceof h?f(u,function(t,e){s[e.cache]&&(c[e.cache]=s[e.cache].slice())}):f(u,function(e,n){var o=n.cache;f(n.props,function(t,e){if(!c[o]&&n.to){if("alpha"===t||null==s[t])return;c[o]=n.to(c._rgba)}c[o][e.idx]=i(s[t],e,!0)}),c[o]&&0>t.inArray(null,c[o].slice(0,3))&&(c[o][3]=1,n.from&&(c._rgba=n.from(c[o])))}),this):e},is:function(t){var i=h(t),n=!0,s=this;return f(u,function(t,o){var a,r=i[o.cache];return r&&(a=s[o.cache]||o.to&&o.to(s._rgba)||[],f(o.props,function(t,i){return null!=r[i.idx]?n=r[i.idx]===a[i.idx]:e})),n}),n},_space:function(){var t=[],e=this;return f(u,function(i,n){e[n.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var n=h(t),s=n._space(),o=u[s],a=0===this.alpha()?h("transparent"):this,r=a[o.cache]||o.to(a._rgba),l=r.slice();return n=n[o.cache],f(o.props,function(t,s){var o=s.idx,a=r[o],h=n[o],u=c[s.type]||{};null!==h&&(null===a?l[o]=h:(u.mod&&(h-a>u.mod/2?a+=u.mod:a-h>u.mod/2&&(a-=u.mod)),l[o]=i((h-a)*e+a,s)))}),this[s](l)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),s=h(e)._rgba;return h(t.map(i,function(t,e){return(1-n)*s[e]+n*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),n=i.pop();return e&&i.push(~~(255*n)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),h.fn.parse.prototype=h.fn,u.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,s=t[1]/255,o=t[2]/255,a=t[3],r=Math.max(n,s,o),l=Math.min(n,s,o),h=r-l,u=r+l,c=.5*u;return e=l===r?0:n===r?60*(s-o)/h+360:s===r?60*(o-n)/h+120:60*(n-s)/h+240,i=0===h?0:.5>=c?h/u:h/(2-u),[Math.round(e)%360,i,c,null==a?1:a]},u.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],o=t[3],a=.5>=n?n*(1+i):n+i-n*i,r=2*n-a;return[Math.round(255*s(r,a,e+1/3)),Math.round(255*s(r,a,e)),Math.round(255*s(r,a,e-1/3)),o]},f(u,function(n,s){var o=s.props,a=s.cache,l=s.to,u=s.from;h.fn[n]=function(n){if(l&&!this[a]&&(this[a]=l(this._rgba)),n===e)return this[a].slice();var s,r=t.type(n),c="array"===r||"object"===r?n:arguments,d=this[a].slice();return f(o,function(t,e){var n=c["object"===r?t:e.idx];null==n&&(n=d[e.idx]),d[e.idx]=i(n,e)}),u?(s=h(u(d)),s[a]=d,s):h(d)},f(o,function(e,i){h.fn[e]||(h.fn[e]=function(s){var o,a=t.type(s),l="alpha"===e?this._hsla?"hsla":"rgba":n,h=this[l](),u=h[i.idx];return"undefined"===a?u:("function"===a&&(s=s.call(this,u),a=t.type(s)),null==s&&i.empty?this:("string"===a&&(o=r.exec(s),o&&(s=u+parseFloat(o[2])*("+"===o[1]?1:-1))),h[i.idx]=s,this[l](h)))})})}),h.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,s){var o,a,r="";if("transparent"!==s&&("string"!==t.type(s)||(o=n(s)))){if(s=h(o||s),!d.rgba&&1!==s._rgba[3]){for(a="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&a&&a.style;)try{r=t.css(a,"backgroundColor"),a=a.parentNode}catch(l){}s=s.blend(r&&"transparent"!==r?r:"_default")}s=s.toRgbaString()}try{e.style[i]=s}catch(l){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=h(e.elem,i),e.end=h(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},h.hook(a),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,n){e["border"+n+"Color"]=t}),e}},o=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(_),function(){function e(e){var i,n,s=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(s&&s.length&&s[0]&&s[s[0]])for(n=s.length;n--;)i=s[n],"string"==typeof s[i]&&(o[t.camelCase(i)]=s[i]);else for(i in s)"string"==typeof s[i]&&(o[i]=s[i]);return o}function i(e,i){var n,o,a={};for(n in i)o=i[n],e[n]!==o&&(s[n]||(t.fx.step[n]||!isNaN(parseFloat(o)))&&(a[n]=o));return a}var n=["add","remove","toggle"],s={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(_.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(s,o,a,r){var l=t.speed(o,a,r);return this.queue(function(){var o,a=t(this),r=a.attr("class")||"",h=l.children?a.find("*").addBack():a;h=h.map(function(){var i=t(this);return{el:i,start:e(this)}}),o=function(){t.each(n,function(t,e){s[e]&&a[e+"Class"](s[e])})},o(),h=h.map(function(){return this.end=e(this.el[0]),this.diff=i(this.start,this.end),this}),a.attr("class",r),h=h.map(function(){var e=this,i=t.Deferred(),n=t.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,n),i.promise()}),t.when.apply(t,h.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(a[0])})})},t.fn.extend({addClass:function(e){return function(i,n,s,o){return n?t.effects.animateClass.call(this,{add:i},n,s,o):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,n,s,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},n,s,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(i,n,s,o,a){return"boolean"==typeof n||void 0===n?s?t.effects.animateClass.call(this,n?{add:i}:{remove:i},s,o,a):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:i},n,s,o)}}(t.fn.toggleClass),switchClass:function(e,i,n,s,o){return t.effects.animateClass.call(this,{add:i,remove:e},n,s,o)}})}(),function(){function e(e,i,n,s){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(s=i,n=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(s=n,n=i,i={}),t.isFunction(n)&&(s=n,n=null),i&&t.extend(e,i),n=n||i.duration,e.duration=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,e.complete=s||i.complete,e}function i(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||("string"==typeof e&&!t.effects.effect[e]||(!!t.isFunction(e)||"object"==typeof e&&!e.effect))}t.extend(t.effects,{version:"1.11.4",save:function(t,e){for(var i=0;e.length>i;i++)null!==e[i]&&t.data(b+e[i],t[0].style[e[i]])},restore:function(t,e){var i,n;for(n=0;e.length>n;n++)null!==e[n]&&(i=t.data(b+e[n]),void 0===i&&(i=""),t.css(e[n],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return e.wrap(n),(e[0]===o||t.contains(e[0],o))&&t(o).focus(),n=e.parent(),"static"===e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(s),n.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,n,s){return s=s||{},t.each(i,function(t,i){var o=e.cssUnit(i);o[0]>0&&(s[i]=o[0]*n+o[1])}),s}}),t.fn.extend({effect:function(){function i(e){function i(){t.isFunction(o)&&o.call(s[0]),t.isFunction(e)&&e()}var s=t(this),o=n.complete,r=n.mode;(s.is(":hidden")?"hide"===r:"show"===r)?(s[r](),i()):a.call(s[0],n,i)}var n=e.apply(this,arguments),s=n.mode,o=n.queue,a=t.effects.effect[n.effect];return t.fx.off||!a?s?this[s](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):o===!1?this.each(i):this.queue(o||"fx",i)},show:function(t){return function(n){if(i(n))return t.apply(this,arguments);var s=e.apply(this,arguments);return s.mode="show",this.effect.call(this,s)}}(t.fn.show),hide:function(t){return function(n){if(i(n))return t.apply(this,arguments);var s=e.apply(this,arguments);return s.mode="hide",this.effect.call(this,s)}}(t.fn.hide),toggle:function(t){return function(n){if(i(n)||"boolean"==typeof n)return t.apply(this,arguments);var s=e.apply(this,arguments);return s.mode="toggle",this.effect.call(this,s)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(n=[parseFloat(i),e])}),n}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}(),t.effects,t.effects.effect.blind=function(e,i){var n,s,o,a=t(this),r=/up|down|vertical/,l=/up|left|vertical|horizontal/,h=["position","top","bottom","left","right","height","width"],u=t.effects.setMode(a,e.mode||"hide"),c=e.direction||"up",d=r.test(c),p=d?"height":"width",f=d?"top":"left",m=l.test(c),g={},v="show"===u;a.parent().is(".ui-effects-wrapper")?t.effects.save(a.parent(),h):t.effects.save(a,h),a.show(),n=t.effects.createWrapper(a).css({overflow:"hidden"}),s=n[p](),o=parseFloat(n.css(f))||0,g[p]=v?s:0,m||(a.css(d?"bottom":"right",0).css(d?"top":"left","auto").css({position:"absolute"}),g[f]=v?o:s+o),v&&(n.css(p,0),m||n.css(f,o+s)),n.animate(g,{duration:e.duration,easing:e.easing,queue:!1,complete:function(){"hide"===u&&a.hide(),t.effects.restore(a,h),t.effects.removeWrapper(a),i()}})},t.effects.effect.bounce=function(e,i){var n,s,o,a=t(this),r=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(a,e.mode||"effect"),h="hide"===l,u="show"===l,c=e.direction||"up",d=e.distance,p=e.times||5,f=2*p+(u||h?1:0),m=e.duration/f,g=e.easing,v="up"===c||"down"===c?"top":"left",b="up"===c||"left"===c,_=a.queue(),y=_.length;for((u||h)&&r.push("opacity"),t.effects.save(a,r),a.show(),t.effects.createWrapper(a),d||(d=a["top"===v?"outerHeight":"outerWidth"]()/3),u&&(o={opacity:1},o[v]=0,a.css("opacity",0).css(v,b?2*-d:2*d).animate(o,m,g)),h&&(d/=Math.pow(2,p-1)),o={},o[v]=0,n=0;p>n;n++)s={},s[v]=(b?"-=":"+=")+d,a.animate(s,m,g).animate(o,m,g),d=h?2*d:d/2;h&&(s={opacity:0},s[v]=(b?"-=":"+=")+d,a.animate(s,m,g)),a.queue(function(){h&&a.hide(),t.effects.restore(a,r),t.effects.removeWrapper(a),i()}),y>1&&_.splice.apply(_,[1,0].concat(_.splice(y,f+1))),a.dequeue()},t.effects.effect.clip=function(e,i){var n,s,o,a=t(this),r=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(a,e.mode||"hide"),h="show"===l,u=e.direction||"vertical",c="vertical"===u,d=c?"height":"width",p=c?"top":"left",f={};t.effects.save(a,r),a.show(),n=t.effects.createWrapper(a).css({overflow:"hidden"}),s="IMG"===a[0].tagName?n:a,o=s[d](),h&&(s.css(d,0),s.css(p,o/2)),f[d]=h?o:0,f[p]=h?0:o/2,s.animate(f,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){h||a.hide(),t.effects.restore(a,r),t.effects.removeWrapper(a),i()}})},t.effects.effect.drop=function(e,i){var n,s=t(this),o=["position","top","bottom","left","right","opacity","height","width"],a=t.effects.setMode(s,e.mode||"hide"),r="show"===a,l=e.direction||"left",h="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l?"pos":"neg",c={opacity:r?1:0};t.effects.save(s,o),s.show(),t.effects.createWrapper(s),n=e.distance||s["top"===h?"outerHeight":"outerWidth"](!0)/2,r&&s.css("opacity",0).css(h,"pos"===u?-n:n),c[h]=(r?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+n,s.animate(c,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&s.hide(),t.effects.restore(s,o),t.effects.removeWrapper(s),i()}})},t.effects.effect.explode=function(e,i){function n(){_.push(this),_.length===c*d&&s()}function s(){p.css({visibility:"visible"}),t(_).remove(),m||p.hide(),i()}var o,a,r,l,h,u,c=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=c,p=t(this),f=t.effects.setMode(p,e.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/d),b=Math.ceil(p.outerHeight()/c),_=[];for(o=0;c>o;o++)for(l=g.top+o*b,u=o-(c-1)/2,a=0;d>a;a++)r=g.left+a*v,h=a-(d-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*v,top:-o*b}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:b,left:r+(m?h*v:0),top:l+(m?u*b:0),opacity:m?0:1}).animate({left:r+(m?0:h*v),top:l+(m?0:u*b),opacity:m?1:0},e.duration||500,e.easing,n)},t.effects.effect.fade=function(e,i){var n=t(this),s=t.effects.setMode(n,e.mode||"toggle");n.animate({opacity:s},{queue:!1,duration:e.duration,easing:e.easing,complete:i})},t.effects.effect.fold=function(e,i){var n,s,o=t(this),a=["position","top","bottom","left","right","height","width"],r=t.effects.setMode(o,e.mode||"hide"),l="show"===r,h="hide"===r,u=e.size||15,c=/([0-9]+)%/.exec(u),d=!!e.horizFirst,p=l!==d,f=p?["width","height"]:["height","width"],m=e.duration/2,g={},v={};t.effects.save(o,a),o.show(),n=t.effects.createWrapper(o).css({overflow:"hidden"}),s=p?[n.width(),n.height()]:[n.height(),n.width()],c&&(u=parseInt(c[1],10)/100*s[h?0:1]),l&&n.css(d?{height:0,width:u}:{height:u,width:0}),g[f[0]]=l?s[0]:u,v[f[1]]=l?s[1]:0,n.animate(g,m,e.easing).animate(v,m,e.easing,function(){h&&o.hide(),t.effects.restore(o,a),t.effects.removeWrapper(o),i()})},t.effects.effect.highlight=function(e,i){var n=t(this),s=["backgroundImage","backgroundColor","opacity"],o=t.effects.setMode(n,e.mode||"show"),a={backgroundColor:n.css("backgroundColor")};"hide"===o&&(a.opacity=0),t.effects.save(n,s),n.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(a,{
queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&n.hide(),t.effects.restore(n,s),i()}})},t.effects.effect.size=function(e,i){var n,s,o,a=t(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],h=["width","height","overflow"],u=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=t.effects.setMode(a,e.mode||"effect"),f=e.restore||"effect"!==p,m=e.scale||"both",g=e.origin||["middle","center"],v=a.css("position"),b=f?r:l,_={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&a.show(),n={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},"toggle"===e.mode&&"show"===p?(a.from=e.to||_,a.to=e.from||n):(a.from=e.from||("show"===p?_:n),a.to=e.to||("hide"===p?_:n)),o={from:{y:a.from.height/n.height,x:a.from.width/n.width},to:{y:a.to.height/n.height,x:a.to.width/n.width}},("box"===m||"both"===m)&&(o.from.y!==o.to.y&&(b=b.concat(c),a.from=t.effects.setTransition(a,c,o.from.y,a.from),a.to=t.effects.setTransition(a,c,o.to.y,a.to)),o.from.x!==o.to.x&&(b=b.concat(d),a.from=t.effects.setTransition(a,d,o.from.x,a.from),a.to=t.effects.setTransition(a,d,o.to.x,a.to))),("content"===m||"both"===m)&&o.from.y!==o.to.y&&(b=b.concat(u).concat(h),a.from=t.effects.setTransition(a,u,o.from.y,a.from),a.to=t.effects.setTransition(a,u,o.to.y,a.to)),t.effects.save(a,b),a.show(),t.effects.createWrapper(a),a.css("overflow","hidden").css(a.from),g&&(s=t.effects.getBaseline(g,n),a.from.top=(n.outerHeight-a.outerHeight())*s.y,a.from.left=(n.outerWidth-a.outerWidth())*s.x,a.to.top=(n.outerHeight-a.to.outerHeight)*s.y,a.to.left=(n.outerWidth-a.to.outerWidth)*s.x),a.css(a.from),("content"===m||"both"===m)&&(c=c.concat(["marginTop","marginBottom"]).concat(u),d=d.concat(["marginLeft","marginRight"]),h=r.concat(c).concat(d),a.find("*[width]").each(function(){var i=t(this),n={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&t.effects.save(i,h),i.from={height:n.height*o.from.y,width:n.width*o.from.x,outerHeight:n.outerHeight*o.from.y,outerWidth:n.outerWidth*o.from.x},i.to={height:n.height*o.to.y,width:n.width*o.to.x,outerHeight:n.height*o.to.y,outerWidth:n.width*o.to.x},o.from.y!==o.to.y&&(i.from=t.effects.setTransition(i,c,o.from.y,i.from),i.to=t.effects.setTransition(i,c,o.to.y,i.to)),o.from.x!==o.to.x&&(i.from=t.effects.setTransition(i,d,o.from.x,i.from),i.to=t.effects.setTransition(i,d,o.to.x,i.to)),i.css(i.from),i.animate(i.to,e.duration,e.easing,function(){f&&t.effects.restore(i,h)})})),a.animate(a.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity),"hide"===p&&a.hide(),t.effects.restore(a,b),f||("static"===v?a.css({position:"relative",top:a.to.top,left:a.to.left}):t.each(["top","left"],function(t,e){a.css(e,function(e,i){var n=parseInt(i,10),s=t?a.to.left:a.to.top;return"auto"===i?s+"px":n+s+"px"})})),t.effects.removeWrapper(a),i()}})},t.effects.effect.scale=function(e,i){var n=t(this),s=t.extend(!0,{},e),o=t.effects.setMode(n,e.mode||"effect"),a=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===o?0:100),r=e.direction||"both",l=e.origin,h={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},u={y:"horizontal"!==r?a/100:1,x:"vertical"!==r?a/100:1};s.effect="size",s.queue=!1,s.complete=i,"effect"!==o&&(s.origin=l||["middle","center"],s.restore=!0),s.from=e.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:h),s.to={height:h.height*u.y,width:h.width*u.x,outerHeight:h.outerHeight*u.y,outerWidth:h.outerWidth*u.x},s.fade&&("show"===o&&(s.from.opacity=0,s.to.opacity=1),"hide"===o&&(s.from.opacity=1,s.to.opacity=0)),n.effect(s)},t.effects.effect.puff=function(e,i){var n=t(this),s=t.effects.setMode(n,e.mode||"hide"),o="hide"===s,a=parseInt(e.percent,10)||150,r=a/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:s,complete:i,percent:o?a:100,from:o?l:{height:l.height*r,width:l.width*r,outerHeight:l.outerHeight*r,outerWidth:l.outerWidth*r}}),n.effect(e)},t.effects.effect.pulsate=function(e,i){var n,s=t(this),o=t.effects.setMode(s,e.mode||"show"),a="show"===o,r="hide"===o,l=a||"hide"===o,h=2*(e.times||5)+(l?1:0),u=e.duration/h,c=0,d=s.queue(),p=d.length;for((a||!s.is(":visible"))&&(s.css("opacity",0).show(),c=1),n=1;h>n;n++)s.animate({opacity:c},u,e.easing),c=1-c;s.animate({opacity:c},u,e.easing),s.queue(function(){r&&s.hide(),i()}),p>1&&d.splice.apply(d,[1,0].concat(d.splice(p,h+1))),s.dequeue()},t.effects.effect.shake=function(e,i){var n,s=t(this),o=["position","top","bottom","left","right","height","width"],a=t.effects.setMode(s,e.mode||"effect"),r=e.direction||"left",l=e.distance||20,h=e.times||3,u=2*h+1,c=Math.round(e.duration/u),d="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},m={},g={},v=s.queue(),b=v.length;for(t.effects.save(s,o),s.show(),t.effects.createWrapper(s),f[d]=(p?"-=":"+=")+l,m[d]=(p?"+=":"-=")+2*l,g[d]=(p?"-=":"+=")+2*l,s.animate(f,c,e.easing),n=1;h>n;n++)s.animate(m,c,e.easing).animate(g,c,e.easing);s.animate(m,c,e.easing).animate(f,c/2,e.easing).queue(function(){"hide"===a&&s.hide(),t.effects.restore(s,o),t.effects.removeWrapper(s),i()}),b>1&&v.splice.apply(v,[1,0].concat(v.splice(b,u+1))),s.dequeue()},t.effects.effect.slide=function(e,i){var n,s=t(this),o=["position","top","bottom","left","right","width","height"],a=t.effects.setMode(s,e.mode||"show"),r="show"===a,l=e.direction||"left",h="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,c={};t.effects.save(s,o),s.show(),n=e.distance||s["top"===h?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(s).css({overflow:"hidden"}),r&&s.css(h,u?isNaN(n)?"-"+n:-n:n),c[h]=(r?u?"+=":"-=":u?"-=":"+=")+n,s.animate(c,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&s.hide(),t.effects.restore(s,o),t.effects.removeWrapper(s),i()}})},t.effects.effect.transfer=function(e,i){var n=t(this),s=t(e.to),o="fixed"===s.css("position"),a=t("body"),r=o?a.scrollTop():0,l=o?a.scrollLeft():0,h=s.offset(),u={top:h.top-r,left:h.left-l,height:s.innerHeight(),width:s.innerWidth()},c=n.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:c.top-r,left:c.left-l,height:n.innerHeight(),width:n.innerWidth(),position:o?"fixed":"absolute"}).animate(u,e.duration,e.easing,function(){d.remove(),i()})},t.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(t){return void 0===t?this.options.value:(this.options.value=this._constrainedValue(t),void this._refreshValue())},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=t===!1,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this._super(t,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}}),t.widget("ui.selectable",t.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e=t(i.options.filter,i.element[0]),e.addClass("ui-selectee"),e.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var i=this,n=this.options;this.opos=[e.pageX,e.pageY],this.options.disabled||(this.selectees=t(n.filter,this.element[0]),this._trigger("start",e),t(n.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=t.data(this,"selectable-item");n.startselected=!0,e.metaKey||e.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element}))}),t(e.target).parents().addBack().each(function(){var n,s=t.data(this,"selectable-item");return s?(n=!e.metaKey&&!e.ctrlKey||!s.$element.hasClass("ui-selected"),s.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),s.unselecting=!n,s.selecting=n,s.selected=n,n?i._trigger("selecting",e,{selecting:s.element}):i._trigger("unselecting",e,{unselecting:s.element}),!1):void 0}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,n=this,s=this.options,o=this.opos[0],a=this.opos[1],r=e.pageX,l=e.pageY;return o>r&&(i=r,r=o,o=i),a>l&&(i=l,l=a,a=i),this.helper.css({left:o,top:a,width:r-o,height:l-a}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),h=!1;i&&i.element!==n.element[0]&&("touch"===s.tolerance?h=!(i.left>r||o>i.right||i.top>l||a>i.bottom):"fit"===s.tolerance&&(h=i.left>o&&r>i.right&&i.top>a&&l>i.bottom),h?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",e,{unselected:n.element})}),t(".ui-selecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",e,{selected:n.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),t.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var e=this;this.label=t("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(t){this.button.focus(),t.preventDefault()}}),this.element.hide(),this.button=t("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),t("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=t("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){e.menuItems||e._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var e=this;this.menu=t("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=t("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(t,i){t.preventDefault(),e._setSelection(),e._select(i.item.data("ui-selectmenu-item"),t)},focus:function(t,i){var n=i.item.data("ui-selectmenu-item");null!=e.focusIndex&&n.index!==e.focusIndex&&(e._trigger("focus",t,{item:n}),e.isOpen||e._select(n,t)),e.focusIndex=n.index,e.button.attr("aria-activedescendant",e.menuItems.eq(n.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var t,e=this.element.find("option");e.length&&(this._parseOptions(e),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),t=this._getSelectedItem(),this.menuInstance.focus(null,t),this._setAria(t.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(t){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",t))},_position:function(){this.menuWrap.position(t.extend({of:this.button},this.options.position))},close:function(t){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",t))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(e,i){var n=this,s="";t.each(i,function(i,o){o.optgroup!==s&&(t("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(o.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:o.optgroup}).appendTo(e),s=o.optgroup),n._renderItemData(e,o)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-selectmenu-item",e)},_renderItem:function(e,i){var n=t("<li>");return i.disabled&&n.addClass("ui-state-disabled"),this._setText(n,i.label),n.appendTo(e)},_setText:function(t,e){e?t.text(e):t.html("&#160;")},_move:function(t,e){var i,n,s=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex):(i=this.menuItems.eq(this.element[0].selectedIndex),s+=":not(.ui-state-disabled)"),n="first"===t||"last"===t?i["first"===t?"prevAll":"nextAll"](s).eq(-1):i[t+"All"](s).eq(0),n.length&&this.menuInstance.focus(e,n)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(t){this[this.isOpen?"close":"open"](t)},_setSelection:function(){var t;this.range&&(window.getSelection?(t=window.getSelection(),t.removeAllRanges(),t.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(e){this.isOpen&&(t(e.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(e))}},_buttonEvents:{mousedown:function(){var t;window.getSelection?(t=window.getSelection(),t.rangeCount&&(this.range=t.getRangeAt(0))):this.range=document.selection.createRange()},click:function(t){this._setSelection(),this._toggle(t)},keydown:function(e){var i=!0;switch(e.keyCode){case t.ui.keyCode.TAB:case t.ui.keyCode.ESCAPE:this.close(e),i=!1;break;case t.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(e);break;case t.ui.keyCode.UP:e.altKey?this._toggle(e):this._move("prev",e);break;case t.ui.keyCode.DOWN:e.altKey?this._toggle(e):this._move("next",e);break;case t.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(e):this._toggle(e);break;case t.ui.keyCode.LEFT:this._move("prev",e);break;case t.ui.keyCode.RIGHT:this._move("next",e);break;case t.ui.keyCode.HOME:case t.ui.keyCode.PAGE_UP:this._move("first",e);break;case t.ui.keyCode.END:case t.ui.keyCode.PAGE_DOWN:this._move("last",e);break;default:this.menu.trigger(e),i=!1}i&&e.preventDefault()}},_selectFocusedItem:function(t){var e=this.menuItems.eq(this.focusIndex);e.hasClass("ui-state-disabled")||this._select(e.data("ui-selectmenu-item"),t)},_select:function(t,e){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=t.index,this._setText(this.buttonText,t.label),this._setAria(t),this._trigger("select",e,{item:t}),t.index!==i&&this._trigger("change",e,{item:t}),this.close(e)},_setAria:function(t){var e=this.menuItems.eq(t.index).attr("id");this.button.attr({"aria-labelledby":e,"aria-activedescendant":e}),this.menu.attr("aria-activedescendant",e)},_setOption:function(t,e){"icons"===t&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(e.button),this._super(t,e),"appendTo"===t&&this.menuWrap.appendTo(this._appendTo()),"disabled"===t&&(this.menuInstance.option("disabled",e),this.button.toggleClass("ui-state-disabled",e).attr("aria-disabled",e),this.element.prop("disabled",e),e?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===t&&this._resizeButton()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var t=this.options.width;t||(t=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(t)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(e){var i=[];e.each(function(e,n){var s=t(n),o=s.parent("optgroup");i.push({element:s,index:e,value:s.val(),label:s.text(),optgroup:o.attr("label")||"",disabled:o.prop("disabled")||s.prop("disabled")})}),this.items=i},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),t.widget("ui.slider",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,n=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",a=[];for(i=n.values&&n.values.length||1,s.length>i&&(s.slice(i).remove(),s=s.slice(0,i)),e=s.length;i>e;e++)a.push(o);this.handles=s.add(t(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,n,s,o,a,r,l,h,u=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(n-u.values(e));(s>i||s===i&&(e===u._lastChangedValue||u.values(e)===c.min))&&(s=i,o=t(this),a=e)}),r=this._start(e,a),r!==!1&&(this._mouseSliding=!0,this._handleIndex=a,o.addClass("ui-state-active").focus(),l=o.offset(),h=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=h?{left:0,top:0}:{left:e.pageX-l.left-o.width()/2,top:e.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,s,o;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/e,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),o=this._valueMin()+n*s,this._trimAlignValue(o)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var n,s,o;this.options.values&&this.options.values.length?(n=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>n||1===e&&n>i)&&(i=n),i!==this.values(e)&&(s=this.values(),s[e]=i,o=this._trigger("slide",t,{handle:this.handles[e],value:i,values:s}),n=this.values(e?0:1),o!==!1&&this.values(e,i))):i!==this.value()&&(o=this._trigger("slide",t,{handle:this.handles[e],value:i}),o!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var n,s,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(n=this.options.values,s=arguments[0],o=0;n.length>o;o+=1)n[o]=this._trimAlignValue(s[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var n,s=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(s=this.options.values.length),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!i),this._super(e,i),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;s>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;i.length>n;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step,n=Math.floor(+(t-e).toFixed(this._precision())/i)*i;t=n+e,this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var e,i,n,s,o,a=this.options.range,r=this.options,l=this,h=!this._animateOff&&r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=100*((l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())),u["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[h?"animate":"css"](u,r.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},r.animate),1===n&&l.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===n&&l.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},r.animate),1===n&&l.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(n=this.value(),s=this._valueMin(),o=this._valueMax(),i=o!==s?100*((n-s)/(o-s)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](u,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range[h?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range[h?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(e){var i,n,s,o,a=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(e.target).addClass("ui-state-active"),i=this._start(e,a),i===!1))return}switch(o=this.options.step,n=s=this.options.values&&this.options.values.length?this.values(a):this.value(),e.keyCode){case t.ui.keyCode.HOME:s=this._valueMin();break;case t.ui.keyCode.END:s=this._valueMax();break;case t.ui.keyCode.PAGE_UP:s=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;s=this._trimAlignValue(n+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;s=this._trimAlignValue(n-o)}this._slide(e,a,s)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}}),t.widget("ui.sortable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&e+i>t},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"));
},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),t.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var n=null,s=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(n=t(this),!1):void 0}),t.data(e.target,o.widgetName+"-item")===o&&(n=t(e.target)),!!n&&(!(this.options.handle&&!i&&(t(this.options.handle,n).find("*").addBack().each(function(){this===e.target&&(s=!0)}),!s))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,i,n){var s,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=t("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,n,s,o,a=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-this.document.scrollTop()<a.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<a.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed)),e.pageX-this.document.scrollLeft()<a.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],s=n.item[0],o=this._intersectsWithPointer(n),o&&n.instance===this.currentContainer&&s!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==s&&!t.contains(this.placeholder[0],s)&&("semi-dynamic"!==this.options.type||!t.contains(this.element[0],s))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(e,n),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,s=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},i.each(function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,l=r+t.height,h=this.offset.click.top,u=this.offset.click.left,c="x"===this.options.axis||n+h>r&&l>n+h,d="y"===this.options.axis||e+u>o&&a>e+u,p=c&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>o&&a>i-this.helperProportions.width/2&&n+this.helperProportions.height/2>r&&l>s-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),n=e&&i,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!n&&(this.floating?o&&"right"===o||"down"===s?2:1:s&&("down"===s?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&i||"left"===s&&!i:n&&("down"===n&&e||"up"===n&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){r.push(this)}var n,s,o,a,r=[],l=[],h=this._connectWith();if(h&&e)for(n=h.length-1;n>=0;n--)for(o=t(h[n],this.document[0]),s=o.length-1;s>=0;s--)a=t.data(o[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&l.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(l.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=l.length-1;n>=0;n--)l[n][0].each(i);return t(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,n,s,o,a,r,l,h,u=this.items,c=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(s=t(d[i],this.document[0]),n=s.length-1;n>=0;n--)o=t.data(s[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(c.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=c.length-1;i>=0;i--)for(a=c[i][1],r=c[i][0],n=0,h=r.length;h>n;n++)l=t(r[n]),l.data(this.widgetName+"-item",a),u.push({item:l,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,s,o;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item,e||(n.width=s.outerWidth(),n.height=s.outerHeight()),o=s.offset(),n.left=o.left,n.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,n=e.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=e.currentItem[0].nodeName.toLowerCase(),s=t("<"+n+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===n?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(s)):"tr"===n?e._createTrPlaceholder(e.currentItem,s):"img"===n&&s.attr("src",e.currentItem.attr("src")),i||s.css("visibility","hidden"),s},update:function(t,s){(!i||n.forcePlaceholderSize)&&(s.height()||s.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(n.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),n.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var n=this;e.children().each(function(){t("<td>&#160;</td>",n.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var i,n,s,o,a,r,l,h,u,c,d=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(d&&t.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(s=1e4,o=null,u=d.floating||this._isFloating(this.currentItem),a=u?"left":"top",r=u?"width":"height",c=u?"clientX":"clientY",n=this.items.length-1;n>=0;n--)t.contains(this.containers[p].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(l=this.items[n].item.offset()[a],h=!1,e[c]-l>this.items[n][r]/2&&(h=!0),s>Math.abs(e[c]-l)&&(s=Math.abs(e[c]-l),o=this.items[n],this.direction=h?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode),("document"===s.containment||"window"===s.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===s.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===s.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||(e=t(s.containment)[0],i=t(s.containment).offset(),n="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*n}},_generatePosition:function(e){var i,n,s=this.options,o=e.pageX,a=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),s.grid&&(i=this.originalPageY+Math.round((a-this.originalPageY)/s.grid[1])*s.grid[1],a=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-s.grid[1]:i+s.grid[1]:i,n=this.originalPageX+Math.round((o-this.originalPageX)/s.grid[0])*s.grid[0],o=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-s.grid[0]:n+s.grid[0]:n)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:r.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){function i(t,e,i){return function(n){i._trigger(t,n,e._uiHash(e))}}this.reverting=!1;var n,s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||s.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(s.push(function(t){this._trigger("remove",t,this._uiHash())}),s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)e||s.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(s.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(n=0;s.length>n;n++)s[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}}),t.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e={},i=this.element;return t.each(["min","max","step"],function(t,n){var s=i.attr(n);void 0!==s&&s.length&&(e[n]=s)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",t)))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function i(){var t=this.element[0]===this.document[0].activeElement;t||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(e)!==!1&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){return t(e.currentTarget).hasClass("ui-state-active")?this._start(e)!==!1&&void this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var t=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=t.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*t.height())&&t.height()>0&&t.height(t.height()),this.options.disabled&&this.disable()},_keydown:function(e){var i=this.options,n=t.ui.keyCode;switch(e.keyCode){case n.UP:return this._repeat(null,1,e),!0;case n.DOWN:return this._repeat(null,-1,e),!0;case n.PAGE_UP:return this._repeat(null,i.page,e),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(t){return!(!this.spinning&&this._trigger("start",t)===!1)&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&this._trigger("spin",e,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,n=this.options;return e=null!==n.min?n.min:0,i=t-e,i=Math.round(i/n.step)*n.step,t=e+i,t=parseFloat(t.toFixed(this._precision())),null!==n.max&&t>n.max?n.max:null!==n.min&&n.min>t?n.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var i=this._parse(this.element.val());return this.options[t]=e,void this.element.val(this._format(i))}("max"===t||"min"===t||"step"===t)&&"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)),this._super(t,e),"disabled"===t&&(this.widget().toggleClass("ui-state-disabled",!!e),this.element.prop("disabled",!!e),this.buttons.button(e?"disable":"enable"))},_setOptions:l(function(t){this._super(t)}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var t=this.value();return null!==t&&t===this._adjustValue(t)},_value:function(t,e){var i;""!==t&&(i=this._parse(t),null!==i&&(e||(i=this._adjustValue(i)),t=this._format(i))),this.element.val(t),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:l(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:l(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:l(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:l(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?void l(this._value).call(this,t):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),t.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var t=/#.*$/;return function(e){var i,n;e=e.cloneNode(!1),i=e.href.replace(t,""),n=location.href.replace(t,"");try{i=decodeURIComponent(i)}catch(s){}try{n=decodeURIComponent(n)}catch(s){}return e.hash.length>1&&i===n}}(),_create:function(){var e=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var e=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===e&&(n&&this.tabs.each(function(i,s){return t(s).attr("aria-controls")===n?(e=i,!1):void 0}),null===e&&(e=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===e||-1===e)&&(e=!!this.tabs.length&&0)),e!==!1&&(e=this.tabs.index(this.tabs.eq(e)),-1===e&&(e=!i&&0)),!i&&e===!1&&this.anchors.length&&(e=0),e},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var i=t(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),s=!0;
if(!this._handlePageNav(e)){switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:s=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n);case t.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}e.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,s),e.ctrlKey||e.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(e){return e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,i){function n(){return e>s&&(e=0),0>e&&(e=s),e}for(var s=this.tabs.length-1;-1!==t.inArray(n(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,e){return"active"===t?void this._activate(e):"disabled"===t?void this._setupDisabled(e):(this._super(t,e),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",e),e||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(e),void("heightStyle"===t&&this._setupHeightStyle(e)))},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this,i=this.tabs,n=this.anchors,s=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(i,n){var s,o,a,r=t(n).uniqueId().attr("id"),l=t(n).closest("li"),h=l.attr("aria-controls");e._isLocal(n)?(s=n.hash,a=s.substring(1),o=e.element.find(e._sanitizeSelector(s))):(a=l.attr("aria-controls")||t({}).uniqueId()[0].id,s="#"+a,o=e.element.find(s),o.length||(o=e._createPanel(a),o.insertAfter(e.panels[i-1]||e.tablist)),o.attr("aria-live","polite")),o.length&&(e.panels=e.panels.add(o)),h&&l.data("ui-tabs-aria-controls",h),l.attr({"aria-controls":a,"aria-labelledby":r}),o.attr("aria-labelledby",r)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),i&&(this._off(i.not(this.tabs)),this._off(n.not(this.anchors)),this._off(s.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i,n=0;i=this.tabs[n];n++)e===!0||-1!==t.inArray(n,e)?t(i).addClass("ui-state-disabled").attr("aria-disabled","true"):t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var i={};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,n=this.element.parent();"fill"===e?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),n=e.css("position");"absolute"!==n&&"fixed"!==n&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,n=this.active,s=t(e.currentTarget),o=s.closest("li"),a=o[0]===n[0],r=a&&i.collapsible,l=r?t():this._getPanelForTab(o),h=n.length?this._getPanelForTab(n):t(),u={oldTab:n,oldPanel:h,newTab:r?t():o,newPanel:l};e.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||a&&!i.collapsible||this._trigger("beforeActivate",e,u)===!1||(i.active=!r&&this.tabs.index(o),this.active=a?t():o,this.xhr&&this.xhr.abort(),h.length||l.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(o),e),this._toggle(e,u))},_toggle:function(e,i){function n(){o.running=!1,o._trigger("activate",e,i)}function s(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),a.length&&o.options.show?o._show(a,o.options.show,n):(a.show(),n())}var o=this,a=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),s()),r.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),a.length&&r.length?i.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),a.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(e){var i,n=this._findActive(e);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(e){var i=this.options.disabled;i!==!1&&(void 0===e?i=!1:(e=this._getIndex(e),i=t.isArray(i)?t.map(i,function(t){return t!==e?t:null}):t.map(this.tabs,function(t,i){return i!==e?i:null})),this._setupDisabled(i))},disable:function(e){var i=this.options.disabled;if(i!==!0){if(void 0===e)i=!0;else{if(e=this._getIndex(e),-1!==t.inArray(e,i))return;i=t.isArray(i)?t.merge([e],i).sort():[e]}this._setupDisabled(i)}},load:function(e,i){e=this._getIndex(e);var n=this,s=this.tabs.eq(e),o=s.find(".ui-tabs-anchor"),a=this._getPanelForTab(s),r={tab:s,panel:a},l=function(t,e){"abort"===e&&n.panels.stop(!1,!0),s.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),t===n.xhr&&delete n.xhr};this._isLocal(o[0])||(this.xhr=t.ajax(this._ajaxSettings(o,i,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(s.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.done(function(t,e,s){setTimeout(function(){a.html(t),n._trigger("load",i,r),l(s,e)},1)}).fail(function(t,e){setTimeout(function(){l(t,e)},1)})))},_ajaxSettings:function(e,i,n){var s=this;return{url:e.attr("href"),beforeSend:function(e,o){return s._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:o},n))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),t.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(e,i){var n=(e.attr("aria-describedby")||"").split(/\s+/);n.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(n.join(" ")))},_removeDescribedBy:function(e){var i=e.data("ui-tooltip-id"),n=(e.attr("aria-describedby")||"").split(/\s+/),s=t.inArray(i,n);-1!==s&&n.splice(s,1),e.removeData("ui-tooltip-id"),n=t.trim(n.join(" ")),n?e.attr("aria-describedby",n):e.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=t("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(e,i){var n=this;return"disabled"===e?(this[i?"_disable":"_enable"](),void(this.options[e]=i)):(this._super(e,i),void("content"===e&&t.each(this.tooltips,function(t,e){n._updateContent(e.element)})))},_disable:function(){var e=this;t.each(this.tooltips,function(i,n){var s=t.Event("blur");s.target=s.currentTarget=n.element[0],e.close(s,!0)}),this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var i=this,n=t(e?e.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&n.parents().each(function(){var e,n=t(this);n.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,i.close(e,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._registerCloseHandlers(e,n),this._updateContent(n,e))},_updateContent:function(t,e){var i,n=this.options.content,s=this,o=e?e.type:null;return"string"==typeof n?this._open(e,t,n):(i=n.call(t[0],function(i){s._delay(function(){t.data("ui-tooltip-open")&&(e&&(e.type=o),this._open(e,t,i))})}),void(i&&this._open(e,t,i)))},_open:function(e,i,n){function s(t){h.of=t,a.is(":hidden")||a.position(h)}var o,a,r,l,h=t.extend({},this.options.position);if(n){if(o=this._find(i))return void o.tooltip.find(".ui-tooltip-content").html(n);i.is("[title]")&&(e&&"mouseover"===e.type?i.attr("title",""):i.removeAttr("title")),o=this._tooltip(i),a=o.tooltip,this._addDescribedBy(i,a.attr("id")),a.find(".ui-tooltip-content").html(n),this.liveRegion.children().hide(),n.clone?(l=n.clone(),l.removeAttr("id").find("[id]").removeAttr("id")):l=n,t("<div>").html(l).appendTo(this.liveRegion),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:s}),s(e)):a.position(t.extend({of:i},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){a.is(":visible")&&(s(h.of),clearInterval(r))},t.fx.interval)),this._trigger("open",e,{tooltip:a})}},_registerCloseHandlers:function(e,i){var n={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var n=t.Event(e);n.currentTarget=i[0],this.close(n,!0)}}};i[0]!==this.element[0]&&(n.remove=function(){this._removeTooltip(this._find(i).tooltip)}),e&&"mouseover"!==e.type||(n.mouseleave="close"),e&&"focusin"!==e.type||(n.focusout="close"),this._on(!0,i,n)},close:function(e){var i,n=this,s=t(e?e.currentTarget:this.element),o=this._find(s);return o?(i=o.tooltip,void(o.closing||(clearInterval(this.delayedShow),s.data("ui-tooltip-title")&&!s.attr("title")&&s.attr("title",s.data("ui-tooltip-title")),this._removeDescribedBy(s),o.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){n._removeTooltip(t(this))}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete n.parents[e]}),o.closing=!0,this._trigger("close",e,{tooltip:i}),o.hiding||(o.closing=!1)))):void s.removeData("ui-tooltip-open")},_tooltip:function(e){var i=t("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),n=i.uniqueId().attr("id");return t("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[n]={element:e,tooltip:i}},_find:function(t){var e=t.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var e=this;t.each(this.tooltips,function(i,n){var s=t.Event("blur"),o=n.element;s.target=s.currentTarget=o[0],e.close(s,!0),t("#"+i).remove(),o.data("ui-tooltip-title")&&(o.attr("title")||o.attr("title",o.data("ui-tooltip-title")),o.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})});
function $(){if(1==arguments.length){var e=arguments[0];return"string"==typeof e&&(e=document.getElementById(e)?document.getElementById(e):document.getElementsByName(e).length>0&&document.getElementsByName(e)),e}for(var t=new Array,e=new Object,i=0;i<arguments.length;i++)"string"==typeof e&&(e=document.getElementById(arguments[i])?document.getElementById(arguments[i]):document.getElementsByName(arguments[i]).length>0&&document.getElementsByName(arguments[i])),t[i]=e;return t}function $n(){if(1==arguments.length){var e=arguments[0];return"string"==typeof e&&(e=document.getElementsByName(e).length>0?document.getElementsByName(e):document.getElementById(e)?[document.getElementById(e)]:[]),e}for(var t=new Array,i=0;i<arguments.length;i++){var e=arguments[i];e=document.getElementsByName(e).length>0?document.getElementsByName(e):document.getElementById(e)?[document.getElementById(e)]:[],t[i]=e}return t}function $isChild(e,t){for(e=$(e),t=$(t);"body"!=e.tagName.toLowerCase();){if(e==t)return!0;e=e.parentNode}return!1}function $cetp(e,t){if(e.tagName)return!!$isChild(e,t)&&e;for(var i=new Array,s=0;s<e.length;s++)$isChild(e[s],t)&&i.push(e[s]);return i.length>0&&i}function $ae(e,t,i){e.attachEvent?(e["e"+t+i]=i,e[t+i]=function(){e["e"+t+i](window.event)},e.attachEvent("on"+t,e[t+i])):e.addEventListener(t,i,!1)}function $re(e,t,i){e.detachEvent?(e.detachEvent("on"+t,e[t+i]),e[t+i]=null):e.removeEventListener(t,i,!1)}function $ga(e,t){"string"==typeof e&&(e=$n(e));var i="undefined"!=typeof arguments[2]&&arguments[2];if(""==i&&(i=!1),i&&(e=i.constructor==Function?i(e):$cetp(e,i)),0==e)return!1;if(e.tagName){if("object"==typeof t){for(var s=new Array,a=0;a<t.length;a++)s[a]=e.getAttribute(t[a]);return s}return e.getAttribute(t)}for(var s=new Array,a=0;a<e.length;a++)if("object"!=typeof e[a]&&(e[a]=$(e[a])),"object"==typeof t)for(var n=0;n<t.length;a++)s[s.length]=e[a].getAttribute(t[n]);else s[s.length]=e[a].getAttribute(t);return s}function $sa(e,t,i){"string"==typeof e&&(e=$n(e));var s="undefined"!=typeof arguments[3]&&arguments[3];if(""==s&&(s=!1),s&&(e=s.constructor==Function?s(e):$cetp(e,s)),0==e)return!1;if(e.tagName)if("object"==typeof t)for(var a=0;a<t.length;a++)e.setAttribute(t[a],i[a]);else e.setAttribute(t,i);else for(var a=0;a<e.length;a++)if("object"!=typeof e[a]&&(e[a]=$(e[a])),"object"==typeof t)for(var n=0;n<t.length;a++)e[a].setAttribute(t[n],i[n]);else e[a].setAttribute(t,i)}function $gv(e){var t="undefined"!=typeof arguments[1]&&arguments[1];if(e.constructor==Array){for(var i=new Array,s=0;s<e.length;s++)i[s]=$gvs(e[s],t);return i}return $gvs(e,t)}function $gvs(e){var t="undefined"!=typeof arguments[1]&&arguments[1];""==t&&(t=!1);var i="undefined"==typeof arguments[2]||arguments[2];"string"==typeof e&&(e=$n(e)),e.tagName&&(e=[e]),t&&(e=t.constructor==Function?t(e):$cetp(e,t));for(var s="",a="",n=new Array,o=!1,r=0;r<e.length;r++)if(s=e[r].tagName.toLowerCase(),a="input"==s?e[r].type.toLowerCase():"","checkbox"==a||"radio"==a)1==e[r].checked&&n.push(e[r].value),("checkbox"==a&&1==e.length||"radio"==a)&&(o=!0);else if("input"==s||"textarea"==s)n.push(e[r].value),o=!0;else if("select"==s)if(1==e[r].multiple)for(var l=0;l<e[r].options.length;l++)1==e[r].options[l].selected&&n.push(e[r].options[l].value);else n.push(e[r].value),o=!0;else"img"==s?n.push(e[r].src):(i?n.push(e[r].innerHTML):e[r].textContent?n.push(e[r].textContent):e[r].innerText?n.push(e[r].innerText):n.push(e[r].innerHTML),o=!0);return o?0==n.length?"":n[0]:n}function $sv(e,t){var i="undefined"!=typeof arguments[2]&&arguments[2];if(e.constructor==Array)if("object"==typeof t)for(var s=0;s<e.length;s++)$svs(e[s],t[s],i);else for(var s=0;s<e.length;s++)$svs(e[s],t,i);else $svs(e,t,i)}function $svs(e,t){null==t&&(t="");var i="undefined"!=typeof arguments[2]&&arguments[2];""==i&&(i=!1);var s="undefined"==typeof arguments[3]||arguments[3];"string"==typeof e&&(e=$n(e)),e.tagName&&(e=[e]),i&&(e=i.constructor==Function?i(e):$cetp(e,i));for(var a="",n="",o=new Object,r=0;r<e.length;r++)if(o=e[r],a=o.tagName.toLowerCase(),n="input"==a?o.type.toLowerCase():"","checkbox"==n||"radio"==n)t.constructor==Array?$u.a.find(t,o.value)!=-1?o.checked=!0:o.checked=!1:"boolean"==typeof t?o.checked=t:o.value==t?o.checked=!0:o.checked=!1;else if("select"==a)if(t.constructor==Array)for(var l=0;l<o.options.length;l++)$u.a.find(t,o.options[l].value)!=-1?o.options[l].selected=!0:o.options[l].selected=!1;else o.value=t;else"input"==a||"textarea"==a?t.constructor==Array?o.value=t.join("\n"):o.value=t:"img"==a?t.constructor==Array?("undefined"!=typeof t[0]&&(o.src=t[0]),"undefined"!=typeof t[1]&&(o.title=t[1])):o.src=t:"a"==a?t.constructor==Array?("undefined"!=typeof t[0]&&(s?o.innerHTML=t[0]:o.innerHTML=t[0].replace(/\n/g,"\n<br/>")),"undefined"!=typeof t[1]&&(o.href=""+t[1]),"undefined"!=typeof t[2]&&(o.title=t[2])):s?o.innerHTML=t:o.innerHTML=t.replace(/\n/g,"\n<br/>"):(t=t.constructor==Array?t.join("\n"):""+t,s?o.innerHTML=t:o.innerHTML=t.replace(/\n/g,"\n<br/>"))}function $gvById(e){if("object"==typeof e){for(var t=new Array,i=0;i<e.length;i++)t[i]=$gv($(e[i]));return t}return $gv($(e))}function $svById(e,t){if("object"==typeof e)for(var i=0;i<e.length;i++)$sv($(e[i]),t[i]);else $sv($(e),t)}function $gs(e){"string"==typeof e&&(e=$n(e));var t="undefined"!=typeof arguments[1]&&arguments[1];if(""==t&&(t=!1),t&&(e=t.constructor==Function?t(e):$cetp(e,t)),0==e)return!1;if(e.tagName)return e.style.cssText;for(var i=new Array,s=new Object,a=0;a<e.length;a++)s=$(e[a]),i[i.length]=s.style.cssText;return i}function $ss(e,t){"string"==typeof e&&(e=$n(e));var i="undefined"!=typeof arguments[2]&&arguments[2];if(""==i&&(i=!1),i&&(e=i.constructor==Function?i(e):$cetp(e,i)),0==e)return!1;if(e.tagName)if("string"==typeof t)e.style.cssText=t;else for(var s in t)e.style[s]=t[s];else for(var a=new Object,n=0;n<e.length;n++)if(a=$(e[n]),"string"==typeof t)a.style.cssText=t;else for(var s in t)a.style[s]=t[s]}function $scn(e,t){"string"==typeof e&&(e=$n(e));var i="undefined"!=typeof arguments[2]&&arguments[2];if(""==i&&(i=!1),i&&(e=i.constructor==Function?i(e):$cetp(e,i)),0==e)return!1;if(e.tagName)e.setAttribute("class",t);else for(var s=new Object,a=0;a<e.length;a++)s=$(e[a]),s.setAttribute("class",t)}function $acn(e,t){"string"==typeof e&&(e=$n(e));var i="undefined"!=typeof arguments[2]&&arguments[2];if(""==i&&(i=!1),i&&(e=i.constructor==Function?i(e):$cetp(e,i)),0==e)return!1;if(e.tagName)String(" "+e.getAttribute("class")+" ").search(" "+t+" ")==-1&&e.setAttribute("class",$u.s.lTrim(e.getAttribute("class")+" "+t));else for(var s=new Object,a=0;a<e.length;a++)s=$(e[a]),String(" "+s.getAttribute("class")+" ").search(" "+t+" ")==-1&&s.setAttribute("class",$u.s.aTrim(s.getAttribute("class")+" "+t))}function $rcn(e,t){"string"==typeof e&&(e=$n(e));var i="undefined"!=typeof arguments[2]&&arguments[2];if(""==i&&(i=!1),i&&(e=i.constructor==Function?i(e):$cetp(e,i)),0==e)return!1;if(e.tagName)e.setAttribute("class",$u.s.aTrim($u.s.tran(" "+e.getAttribute("class")+" "," "+t+" "," ")));else for(var s=new Object,a=0;a<e.length;a++)s=$(e[a]),s.setAttribute("class",$u.s.aTrim($u.s.tran(" "+s.getAttribute("class")+" "," "+t+" "," ")))}function $cdn(e){var t;if("string"==typeof e)t=document.createTextNode(e);else{if(t=document.createElement(e.tagName),delete e.tagName,e.children){if(e.children.constructor==Array)for(var i=0;i<e.children.length;i++)t.appendChild($cdn(e.children[i]));else t.appendChild($cdn(e.children));delete e.children}for(var s in e)"style"!=s?t[s]=e[s]:$ss(t,e[s])}return t}function $swto(e){var t=$(e),i=$gpt(t),s=$gpl(t);window.scrollTo(s,i)}function $sor(e,t,i){i=i.toLowerCase();var s=t.offsetWidth,a=t.offsetHeight;if("hw"!=i&&"h"!=i)var n=arguments[3]?arguments[3]:0,o=arguments[4]?arguments[4]:0;else var n=arguments[4]?arguments[4]:0,o=arguments[3]?arguments[3]:0;n<1&&n>0&&(n=Math.round(s*Math.abs(n-1))),o<1&&o>0&&(o=Math.round(a*Math.abs(o-1))),"w"==i?e.style.width=s-n+"px":"h"==i?e.style.height=a-o+"px":"wh"!=i&&"hw"!=i||(e.style.width=s-n+"px",e.style.height=a-o+"px")}function $gpt(e){var t="undefined"!=typeof arguments[1]&&arguments[1],i=0;if(t){if(pEle=e.parentNode,"html"!=pEle.tagName.toLowerCase()&&"body"!=pEle.tagName.toLowerCase())for(;"body"!=pEle.tagName.toLowerCase();)"absolute"!=pEle.style.position&&"relative"!=pEle.style.position||(i+=pEle.offsetTop),pEle=pEle.parentNode}else{var s=e.getBoundingClientRect(),a=Math.max(document.body.scrollTop,document.documentElement.scrollTop);i=s.top+a}return i}function $gpl(e){var t="undefined"!=typeof arguments[1]&&arguments[1],i=0;if(t){if(pEle=e.parentNode,"html"!=pEle.tagName.toLowerCase()&&"body"!=pEle.tagName.toLowerCase())for(;"body"!=pEle.tagName.toLowerCase();)"absolute"!=pEle.style.position&&"relative"!=pEle.style.position||(i+=pEle.offsetLeft),pEle=pEle.parentNode}else{var s=e.getBoundingClientRect(),a=Math.max(document.body.scrollLeft,document.documentElement.scrollLeft);i=s.left+a}return i}function $po(e,t,i){for(var s=arguments[3]?arguments[3]:0,a=arguments[4]?arguments[4]:0,n=$gpt(t),o=$gpl(t),r=t.offsetWidth,l=t.offsetHeight,d=$gpt(e.parentNode,!0),h=$gpl(e.parentNode,!0),c=e.offsetWidth,u=e.offsetHeight,f=e.parentNode;"body"!=f.tagName.toLowerCase();){if("absolute"==f.style.position||"relative"==f.style.position){h=+$gpl(f),d=+$gpt(f);break}f=f.parentNode}if(isNaN(i))if("string"==typeof i){if(i=i.toLowerCase(),"number"==typeof window.innerWidth)var p=window.innerWidth,m=window.innerHeight;else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight))var p=document.documentElement.clientWidth,m=document.documentElement.clientHeight;else if(document.body&&(document.body.clientWidth||document.body.clientHeight))var p=document.body.clientWidth,m=document.body.clientHeight;"number"==typeof window.pageYOffset?(p+=window.pageXOffset,m+=window.pageYOffset):document.documentElement&&"undefined"!=typeof document.documentElement.scrollLeft?(p+=document.documentElement.scrollLeft,m+=document.documentElement.scrollTop):document.body&&"undefined"!=typeof document.body.scrollLeft&&(p+=document.body.scrollLeft,m+=document.body.scrollTop),"dropdown"==i?(i=14,n+l+u>m&&n-u>0&&(i=2),o+a+c>p&&(o=p-c-a)):"dropdown-right"==i?(i=15,n+l+u>m&&n-u>0&&(i=3),o+(r-c)-a<0&&(o=c-r+a)):"flyout"==i?(i=8,o+r+c>p&&o-c>0&&(i=5),n+a+u>m&&(n=m-u-a)):"flyout-bottom"==i?(i=12,o+r+c>p&&o-c>0&&(i=9),n-(u-l)-a<0&&(n=u-l+a)):"popup"==i?(i=6,n+u>m&&n-u>0&&(i=10),o+a+c>p&&(o=p-c-a)):"popup-bottom"==i&&(i=10,n-(u-l)-a<0&&(n=u-l+a),o+a+c>p&&(o=p-c-a))}else i=14;switch(i){case 1:e.style.left=o-c-s-h+"px",e.style.top=n-u-a-d+"px";break;case 2:e.style.left=o+a-h+"px",e.style.top=n-u-s-d+"px";break;case 3:e.style.left=o+(r-c)-a-h+"px",e.style.top=n-u-s-d+"px";break;case 4:e.style.left=o+r+s-h+"px",e.style.top=n-u-a-d+"px";break;case 5:e.style.left=o-c-s-h+"px",e.style.top=n+a-d+"px";break;case 6:e.style.left=o+a-h+"px",e.style.top=n+s-d+"px";break;case 7:e.style.left=o+r-c-a-h+"px",e.style.top=n+s-d+"px";break;case 8:e.style.left=o+r+s-h+"px",e.style.top=n+a-d+"px";break;case 9:e.style.left=o-c-s-h+"px",e.style.top=n-(u-l)-a-d+"px";break;case 10:e.style.left=o+a-h+"px",e.style.top=n-(u-l)-s-d+"px";break;case 11:e.style.left=o+r-c-a-h+"px",e.style.top=n-(u-l)-s-d+"px";break;case 12:e.style.left=o+r+s-h+"px",e.style.top=n-(u-l)-a-d+"px";break;case 13:e.style.left=o-c-s-h+"px",e.style.top=n+l+a-d+"px";break;case 14:e.style.left=o+a-h+"px",e.style.top=n+l+s-d+"px";break;case 15:e.style.left=o+(r-c)-a-h+"px",e.style.top=n+l+s-d+"px";break;case 16:e.style.left=o+r+s-h+"px",e.style.top=n+l+a-d+"px";break;case 17:e.style.left=o+Math.round(r/2)-Math.round(c/2)+a-h+"px",e.style.top=n-u-s-d+"px";break;case 18:e.style.left=o-c-s-h+"px",e.style.top=n+Math.round(l/2)-Math.round(u/2)+a-d+"px";break;case 19:e.style.left=o+Math.round(r/2)-Math.round(c/2)+a-h+"px",e.style.top=n+Math.round(l/2)-Math.round(u/2)+s-d+"px";break;case 20:e.style.left=o+r+s-h+"px",e.style.top=n+Math.round(l/2)-Math.round(u/2)+a-d+"px";break;case 21:e.style.left=o+Math.round(r/2)-Math.round(c/2)+a-h+"px",e.style.top=n+l+s-d+"px"}}function $if(e,t,i){return e?t:i}function a5_AJAX_GridAction(e,t,i,s){a5_AJAX_Form(e,t,i,s)}function a5_AJAX_GridSubmit(e,t,i,s){var a="undefined"!=typeof arguments[4]?arguments[4]:"",n=e,o=t+"_"+i+".FORM",r=t+".STATEINFO";a5_AJAX_Form(n,o,s,a,!0,r,"__form")}function a5_AJAX_Form(e,t,i){var s="undefined"!=typeof arguments[3]?arguments[3]:"",a="undefined"!=typeof arguments[4]&&arguments[4];if("undefined"==typeof arguments[5])var n=t+".STATEINFO";else var n=arguments[5];var o="undefined"!=typeof arguments[6]?arguments[6]:"",r="undefined"==typeof arguments[7]||arguments[7],l="",d=$(n).value?$(n).value:"";d.split("&"),new Array;if($(t)&&"A5DataRegion"!=$ga(t,"A5DataRegion")&&a5_AJAX_FormPrepare(t),"submit:dirty"==e)l=a5_AJAX_Form_RegionHarvest(t,!1,!0,o,r),l=$u.s.rTrim(l," &")+"&__FormID="+t+"&__FormAction=submit";else if("submit:all"==e||"submit"==e)l=a5_AJAX_Form_RegionHarvest(t,!0,!0,o,r),l=$u.s.rTrim(l," &")+"&__FormID="+t+"&__FormAction=submit";else if("submit:new"==e||a){l=a5_AJAX_Form_RegionHarvest(t,!0,!1,o,r);var h=$if("submit:new"==e,"submit",e);l=$u.s.rTrim(l," &")+"&__FormID="+t+"&__FormAction="+h}else l="__FormAction="+e+"&__FormID="+t;var c=document.URL;c=c.split("?").slice(1).join("?"),c=c.replace(/\%22/g,'"'),c=c.replace(/\%3C/g,"<"),c=c.replace(/\%3E/g,">"),c=c.replace(/\%20/g," "),c=c.split("&");for(var u="",f=0;f<c.length;f++)u=c[f].split("="),c[f]=u[0]+"="+urlencode(u.slice(1).join("="));c=c.join("&"),""!=c&&(c+="&"),""!=d&&(d+="&"),""!=s&&(s+="&"),l=c+d+s+l,""!=l?l+="&__Ajax=true":l="__Ajax=true",l=$u.s.tran(l,"\n","%0D%0A"),l=A5.ajax.addParamRequiredData(l),new $a.simple(i,{data:l,handleGeneric:!0,method:"post"})}function a5_AJAX_Form_SetFocus(){for(var e=this.parentNode;"A5DataRegion"!=e.getAttribute("A5DataRegion");){if("body"==e.tagName.toLowerCase())return;e=e.parentNode}e.setAttribute("A5FocusControl",this.name)}function a5_AJAX_Form_SetDirty(){if(this.disabled)return!1;for(var isDirty=!1,ele=this.parentNode;"A5DataRegion"!=ele.getAttribute("A5DataRegion");){if("body"==ele.tagName.toLowerCase())return;ele=ele.parentNode}if("input"!=this.tagName.toLowerCase()||"radio"!=this.type.toLowerCase()&&"checkbox"!=this.type.toLowerCase()){var val=$gvs(this);val==this.getAttribute("A5WatermarkText")&&(val=""),val!=this.getAttribute("A5OriginalValue")?(this.setAttribute("A5IsDirty","true"),isDirty=!0):this.setAttribute("A5IsDirty","false")}else{var eles=$cetp($n(this.name),ele),values=$gvs(eles,this.parentNode);if(values.constructor!=Array&&(values=[values]),values.join("||A5ARRAYSEP||")!=eles[0].getAttribute("A5OriginalValue")){for(var i=0;i<eles.length;i++)eles[i].setAttribute("A5IsDirty","true");isDirty=!0}else for(var i=0;i<eles.length;i++)eles[i].setAttribute("A5IsDirty","false")}if(isDirty&&"true"!=ele.getAttribute("A5IsDirty")){ele.setAttribute("A5IsDirty","true");var funcCall=ele.getAttribute("A5OnDirty");""!=funcCall&&eval(funcCall)}}function a5_AJAX_Form_SetDirtyControl(e){a5_AJAX_Form_SetDirty.call($(e))}function a5_AJAX_Form_ErrorsSet(e,t,i,s){var a="",n="",o="",r="";"string"==typeof i&&(a=i),"string"==typeof s&&(n=s);for(var l=new Object,d=new Object,h=new Array,c=0;c<e.length;c++){for(o="object"==typeof i&&i[c]?i[c]:a,r="object"==typeof s&&s[c]?s[c]:n,l=$(e[c]+".ERRORMSG"),d=$(e[c]),l&&(l.innerHTML=t[c]),""!=r&&l&&$acn(l,r),""!=o&&$acn(d,o),$sa(d,"A5IsDirty","true"),d=d.parentNode;"A5DataRegion"!=d.getAttribute("A5DataRegion");){if("body"==d.tagName.toLowerCase())return;d=d.parentNode}d.setAttribute("A5IsDirty","true"),h[c]={id:e[c],errorEleClassName:r,eleClassName:o}}return h}function a5_AJAX_Form_ErrorsClear(e){for(var t=new Object,i=0;i<e.length;i++)t=$(e[i].id+".ERRORMSG"),t&&(t.innerHTML=""),""!=e[i].errorEleClassName&&$rcn(t,e[i].errorEleClassName),""!=e[i].eleClassName&&$rcn($(e[i].id),e[i].eleClassName);return new Array}function a5_AJAX_FormPrepare(e){var t=new Array;if("object"==typeof e&&e.length)for(var i=0;i<e.length;i++)t[t.length]=$(e[i]);else t=[$(e)];for(var s="",i=0;i<t.length;i++){for(var a=t[i].getElementsByTagName("input"),n=0;n<a.length;n++)s=$gvs(a[n].name,t[i]),s==a[n].getAttribute("A5WatermarkText")&&(s=""),"object"==typeof s&&(s=s.join("||A5ARRAYSEP||")),a[n].setAttribute("A5OriginalValue",s),"radio"!=a[n].type&&"checkbox"!=a[n].type||$e.add(a[n],"click",a5_AJAX_Form_SetDirty,null,!1,t.id+"Events");$e.add(a,"change",a5_AJAX_Form_SetDirty,null,!1,t.id+"Events"),$e.add(a,"keyup",a5_AJAX_Form_SetDirty,null,!1,t.id+"Events"),$e.add(a,"focus",a5_AJAX_Form_SetFocus,null,!1,t.id+"Events"),a=t[i].getElementsByTagName("select");for(var n=0;n<a.length;n++)s=$gvs(a[n].name,t[i]),"object"==typeof s&&(s=s.join("||A5ARRAYSEP||")),a[n].setAttribute("A5OriginalValue",s);$e.add(a,"change",a5_AJAX_Form_SetDirty,null,!1,t.id+"Events"),$e.add(a,"keyup",a5_AJAX_Form_SetDirty,null,!1,t.id+"Events"),$e.add(a,"focus",a5_AJAX_Form_SetFocus,null,!1,t.id+"Events"),a=t[i].getElementsByTagName("textarea");for(var n=0;n<a.length;n++)s=$gvs(a[n].name,t[i]),s==a[n].getAttribute("A5WatermarkText")&&(s=""),"object"==typeof s&&(s=s.join("||A5ARRAYSEP||")),a[n].setAttribute("A5OriginalValue",s);$e.add(a,"change",a5_AJAX_Form_SetDirty,null,!1,t.id+"Events"),$e.add(a,"keyup",a5_AJAX_Form_SetDirty,null,!1,t.id+"Events"),$e.add(a,"focus",a5_AJAX_Form_SetFocus,null,!1,t.id+"Events"),t[i].setAttribute("A5IsDirty","false"),t[i].setAttribute("A5DataRegion","A5DataRegion")}}function a5_AJAX_Callback(e,t){t=""!=t?t+"&__Ajax=true&"+A5.ajax.buildURLParam("__AjaxURL",e.split("?")[0]):"__Ajax=true&"+A5.ajax.buildURLParam("__AjaxURL",e.split("?")[0]);var i="undefined"!=typeof arguments[2]?arguments[2]:{},s={handleGeneric:!0,method:"post"};$u.o.assign(s,i),s.data=A5.ajax.addParamRequiredData(t);var a=new $a.simple(e,s);return a}function a5_AJAX_Form_populateSelect(e,t,i,s){if(curObj=document.getElementById(e),i){if(curObj.options.length>0){for(var a=curObj.options.length-1;a>=0;a--)curObj.options[a]=null;curObj.options[0]=null}curIndx=0}else curIndx=curObj.options.length;var n=new Array;if(n=s.split("\n"),n.length>0){var o=new Array;for(a=0;a<n.length;a++)o=n[a].split("|"),o.length>1?curObj.options[curIndx]=new Option(o[0],o[1]):curObj.options[curIndx]=new Option(o[0],o[0]),curIndx++}if(otpValFound=!1,curObj.options.length>0){for(a=0;a<curObj.options.length;a++)if(curObj.options[a].value==t){otpValFound=!0,curObj.options.selectedIndex=a;break}0==otpValFound&&(curObj.options.add(new Option(t,t),0),curObj.options.selectedIndex=0)}}function a5_AJAX_Form_RegionHarvest(e){var t="undefined"!=typeof arguments[1]&&arguments[1],i="undefined"==typeof arguments[2]||arguments[2],s="undefined"!=typeof arguments[3]?arguments[3]:"";""!=s&&(s+=".");var a="undefined"==typeof arguments[4]||arguments[4],n=new Array;if("object"==typeof e&&e.length)for(var o=0;o<e.length;o++)n[n.length]=$(e[o]);else n=[$(e)];for(var r=new Object,l="",d=new Array,h=(new Array,new Array),c=new Array,u=new Array,f=!1,o=0;o<n.length;o++)if(a&&$e.removeGroup(n[o].id+"Events"),"true"==n[o].getAttribute("A5IsDirty")||t){c[c.length]=n[o].id,r=n[o].getElementsByTagName("input");for(var p=0;p<r.length;p++)"true"!=r[p].getAttribute("A5HarvestIgnore")&&"string"==typeof r[p].getAttribute("A5OriginalValue")&&("radio"==r[p].type.toLowerCase()?$u.a.find(h,r[p].name)==-1&&(h[h.length]=r[p].name,i&&(d[d.length]=a5_AJAX_Form_SubmitValueParam(s+"old."+r[p].name,r[p].getAttribute("A5OriginalValue").split("||A5ARRAYSEP||"))),f="true"==r[p].getAttribute("A5IsDirty"),(f||t)&&(f&&(u[u.length]=r[p].name),d[d.length]=a5_AJAX_Form_SubmitValueParam(s+r[p].name,$gvs($n(r[p].name),n[o])))):"checkbox"==r[p].type.toLowerCase()?$u.a.find(h,r[p].name)==-1&&(h[h.length]=r[p].name,i&&(d[d.length]=a5_AJAX_Form_SubmitValueParam(s+"old."+r[p].name,r[p].getAttribute("A5OriginalValue").split("||A5ARRAYSEP||"))),f="true"==r[p].getAttribute("A5IsDirty"),(f||t)&&(f&&(u[u.length]=r[p].name),d[d.length]=a5_AJAX_Form_SubmitValueParam(s+r[p].name,$gvs($n(r[p].name),n[o])))):"submit"!=r[p].type.toLowerCase()&&"reset"!=r[p].type&&"button"!=r[p].type&&"image"!=r[p].type&&"file"!=r[p].type&&(i&&(d[d.length]=a5_AJAX_Form_SubmitValueParam(s+"old."+r[p].name,r[p].getAttribute("A5OriginalValue").split("||A5ARRAYSEP||"))),f="true"==r[p].getAttribute("A5IsDirty"),(f||t)&&(f&&(u[u.length]=r[p].name),l=$gvs(r[p],n[o]),l==r[p].getAttribute("A5WatermarkText")&&(l=""),d[d.length]=a5_AJAX_Form_SubmitValueParam(s+r[p].name,l))));r=n[o].getElementsByTagName("select");for(var p=0;p<r.length;p++)"true"!=r[p].getAttribute("A5HarvestIgnore")&&"string"==typeof r[p].getAttribute("A5OriginalValue")&&(i&&(d[d.length]=a5_AJAX_Form_SubmitValueParam(s+"old."+r[p].name,r[p].getAttribute("A5OriginalValue").split("||A5ARRAYSEP||"))),f="true"==r[p].getAttribute("A5IsDirty"),(f||t)&&(f&&(u[u.length]=r[p].name),d[d.length]=a5_AJAX_Form_SubmitValueParam(s+r[p].name,$gvs(r[p],n[o]))));r=n[o].getElementsByTagName("textarea");for(var p=0;p<r.length;p++)"true"!=r[p].getAttribute("A5HarvestIgnore")&&"string"==typeof r[p].getAttribute("A5OriginalValue")&&(i&&(d[d.length]=a5_AJAX_Form_SubmitValueParam(s+"old."+r[p].name,r[p].getAttribute("A5OriginalValue").split("||A5ARRAYSEP||"))),f="true"==r[p].getAttribute("A5IsDirty"),(f||t)&&(f&&(u[u.length]=r[p].name),l=$gvs(r[p],n[o]),l==r[p].getAttribute("A5WatermarkText")&&(l=""),d[d.length]=a5_AJAX_Form_SubmitValueParam(s+r[p].name,l)))}return"a5DirtyRegions="+c.join("\n")+"&a5RegionsDirtyValues="+u.join("\n")+"&"+d.join("&")}function a5_AJAX_Form_SubmitValueParam(e,t){if("undefined"!=typeof t){if(null==t&&(t=""),t.constructor==Array){var i=new Array;if(0==t.length)return urlencode(e)+"=";for(var s=0;s<t.length;s++)i[i.length]=urlencode(e)+"="+urlencode(t[s]);return i.join("&")}return urlencode(e)+"="+urlencode(""+t)}}function urlencode(e){return e=e.replace(/%/g,"%25"),e=e.replace(/\+/g,"%2B"),e=e.replace(/\=/g,"%3D"),e=e.replace(/\\/g,"%5C"),e=e.replace(/&/g,"%26"),e=e.replace(/\n/g,"%0D%0A"),e=e.replace(/"/g,"%22"),e=e.replace(/\r/g,"")}function a5_AJAX_FormReset(regionID){var keepOldValues="undefined"!=typeof arguments[1]&&arguments[1],rObj=new Array;if("object"==typeof regionID&&regionID.length)for(var i=0;i<regionID.length;i++)rObj[rObj.length]=$(regionID[i]);else rObj=[$(regionID)];for(var values="",i=0;i<rObj.length;i++){for(var eles=rObj[i].getElementsByTagName("input"),j=0;j<eles.length;j++)keepOldValues?(values=eles[j].getAttribute("A5OriginalValue").split("||A5ARRAYSEP||"),1==values.length&&(values=values[0]),$svs($n(eles[j].name),values)):eles[j].setAttribute("A5OriginalValue",Array().concat($gvs(eles[j].name,rObj[i])).join("||A5ARRAYSEP||")),eles[j].setAttribute("A5IsDirty","false");eles=rObj[i].getElementsByTagName("select");for(var j=0;j<eles.length;j++)keepOldValues?(values=eles[j].getAttribute("A5OriginalValue").split("||A5ARRAYSEP||"),1==values.length&&(values=values[0]),$svs($n(eles[j].name),values)):eles[j].setAttribute("A5OriginalValue",Array().concat($gvs(eles[j].name,rObj[i])).join("||A5ARRAYSEP||")),eles[j].setAttribute("A5IsDirty","false");eles=rObj[i].getElementsByTagName("textarea");for(var j=0;j<eles.length;j++)keepOldValues?(values=eles[j].getAttribute("A5OriginalValue").split("||A5ARRAYSEP||"),1==values.length&&(values=values[0]),$svs($n(eles[j].name),values)):eles[j].setAttribute("A5OriginalValue",Array().concat($gvs(eles[j].name,rObj[i])).join("||A5ARRAYSEP||")),eles[j].setAttribute("A5IsDirty","false");if(ele=rObj[i],"true"==ele.getAttribute("A5IsDirty")){var funcCall=ele.getAttribute("A5OnClean");""!=funcCall&&eval(funcCall),ele.setAttribute("A5IsDirty","false")}}}function load_date_picker(e,t,i){i.contID=e+"_CalendarCont",t==$ga(e,"A5WatermarkText")&&(t=""),style=i.style,path=i.path,use_select=i.use_select,format=i.format,low_year=i.low_year,high_year=i.high_year,switch_year=i.switch_year,i.months||(i.months=["January","February","March","April","May","June","July","August","September","October","November","December"]),i.days||(i.days=["Sun","Mon","Tue","Wed","Thur","Fri","Sat"]),i.start_day||(i.start_day=1),i.todayText||(i.todayText="Today"),i.closeText||(i.closeText="Close"),object_name=$if(i.object_name,i.object_name,e+"_DateSet"),void 0!=i.cellpadding?cur_cellpadding=i.cellpadding:cur_cellpadding=2,void 0!=i.cellspacing?cur_cellspacing=i.cellspacing:cur_cellspacing=0,month_type=1,format.search("mm")!=-1?month_type=1:format.search("m")!=-1?month_type=8:format.search("month")!=-1?month_type=5:format.search("MONTH")!=-1?month_type=6:format.search("Month")!=-1?month_type=7:format.search("mon")!=-1?month_type=2:format.search("MON")!=-1?month_type=3:format.search("Mon")!=-1&&(month_type=4),day_type=1,format.search("dd")!=-1?day_type=1:format.search("d")!=-1?day_type=2:format.search("x")!=-1&&(day_type=3);var s=new Date;if(""==t)old_day=s.getDate(),old_month=s.getMonth(),old_year=s.getFullYear(),second_date=0;else{".."==t.slice(t.length-2)?second_date=1:second_date=0;for(var a=t.split(/[^0-9A-z]/),n=new Array,o=0;o<a.length;o++)""!=a[o]&&n.push(a[o]);1==day_type?day_loc=format.search("dd"):2==day_type?day_loc=format.search("d"):3==day_type&&(day_loc=format.search("x")),1==month_type?month_loc=format.search("mm"):8==month_type?month_loc=format.search("m"):5==month_type?month_loc=format.search("mon"):6==month_type?month_loc=format.search("MON"):7==month_type?month_loc=format.search("Mon"):2==month_type?month_loc=format.search("mon"):3==month_type?month_loc=format.search("MON"):4==month_type&&(month_loc=format.search("Mon")),year_loc=format.search("yy"),3==day_type?day_loc>month_loc?day_loc>year_loc?day_val=parseInt(n[2]):day_val=parseInt(n[1]):day_loc>year_loc?day_val=parseInt(n[1]):day_val=parseInt(n[0]):day_loc>month_loc?day_loc>year_loc?day_val=Number(n[2]):day_val=Number(n[1]):day_loc>year_loc?day_val=Number(n[1]):day_val=Number(n[0]),1==month_type||8==month_type?month_loc>day_loc?month_loc>year_loc?month_val=Number(n[2]):month_val=Number(n[1]):month_loc>year_loc?month_val=Number(n[1]):month_val=Number(n[0]):2==month_type||3==month_type||4==month_type?month_loc>day_loc?month_loc>year_loc?month_val=get_num_month(i,n[2]):month_val=get_num_month(i,n[1]):month_loc>year_loc?month_val=get_num_month(i,n[1]):month_val=get_num_month(i,n[0]):month_loc>day_loc?month_loc>year_loc?month_val=get_num_month(i,n[2]):month_val=get_num_month(i,n[1]):month_loc>year_loc?month_val=get_num_month(i,n[1]):month_val=get_num_month(i,n[0]),year_loc>month_loc?year_loc>day_loc?year_val=Number(n[2]):year_val=Number(n[1]):month_loc>day_loc?year_val=Number(n[1]):year_val=Number(n[0]),day_val>0&&day_val<32?old_day=day_val:old_day=s.getDate(),month_val>0&&month_val<13?old_month=month_val-1:old_month=s.getMonth(),isNaN(year_val)&&(year_val=s.getFullYear()),format.search("yyyy")>=0?(year_val<10&&(year_val="0"+year_val),old_year=year_val):year_val>999?(year_val<10&&(year_val="0"+year_val),old_year=year_val):(test_val=Number(year_val),year_val<10&&(year_val="0"+year_val),test_val>=switch_year?(new_val="19"+year_val,old_year=Number(new_val)):(new_val="20"+year_val,old_year=Number(new_val)))}if(1==use_select){month_html='&nbsp;<select id="'+i.contID+'.sel_month" class="'+style+'Select" onchange="fill_calendar(document.getElementById(\''+i.contID+".sel_month').value,document.getElementById('"+i.contID+".sel_year').value,"+object_name+","+month_type+","+day_type+')" value="'+old_month+'">\n';for(var o=0;o<12;o++)old_month==o?month_html=month_html+'<option value="'+o+'" selected>'+i.months[o]+"</option>\n":month_html=month_html+'<option value="'+o+'">'+i.months[o]+"</option>\n";for(month_html+="</select>",year_html='<select id="'+i.contID+'.sel_year" class="'+style+'Select" onchange="fill_calendar(document.getElementById(\''+i.contID+".sel_month').value,document.getElementById('"+i.contID+".sel_year').value,"+object_name+","+month_type+","+day_type+')" value="'+old_year+'">\n',o=low_year;o<=high_year;o++)o==old_year?year_html=year_html+'<option value="'+o+'" selected>'+o+"</option>\n":year_html=year_html+'<option value="'+o+'">'+o+"</option>\n";year_html+="</select>",month_year_html=month_html+" "+year_html+"&nbsp;"}else month_html=i.months[old_month],year_html=""+old_year,month_year_html='<div id="'+i.contID+'_date_display" style="width:125px">'+month_html+" "+year_html+"</div>";calendar_html='<table cellspacing="'+cur_cellspacing+'" cellpadding="'+cur_cellpadding+'" class="table" style="width: 100%">\n<tr>\n';var r=i.start_day;for(o=0;o<=6;o++)calendar_html=calendar_html+'<th class="calendar" align="center" style="width:14.3%">'+i.days[r-1]+"</th>\n",r++,r>7&&(r-=7);for(calendar_html+="</tr>\n",o=1;o<=6;o++){for(calendar_html+="<tr>\n",j=1;j<=7;j++)1==j||7==j?calendar_html=calendar_html+'<td id="'+i.contID+"_1_w_"+o+"_d_"+j+'" class="weekend" align="center">&nbsp;</td>\n':calendar_html=calendar_html+'<td id="'+i.contID+"_1_w_"+o+"_d_"+j+'" class="workday" align="center">&nbsp;</td>\n';calendar_html+="</tr>\n"}calendar_html+="</table>\n";var s=new Date;if(new_html='<table id="cal_layout_table" cellpadding="0" cellspacing="0" border="0">\n<tr>\n<td align="center">\n<table cellpadding="0" cellspacing="0" border="0">\n<tr>\n<td align="center" nowrap><a href="#" onclick="prev_year('+object_name+","+month_type+","+day_type+'); return false"><img src="'+path+style+'/PrevYear.png" alt="Previous Year" border="0"></a><a href="#" onclick="prev_month('+object_name+","+month_type+","+day_type+'); return false"><img src="'+path+style+'/PrevMonth.png" alt="Previous Month" border="0"></a></td>\n<td align="center" nowrap>'+month_year_html+'</td>\n<td align="center" nowrap><a href="#" onclick="next_month('+object_name+","+month_type+","+day_type+'); return false"><img src="'+path+style+'/NextMonth.png" alt="Next Month" border="0"></a><a href="#" onclick="next_year('+object_name+","+month_type+","+day_type+'); return false"><img src="'+path+style+'/NextYear.png" alt="Next Year" border="0"></a></td>\n</tr>\n<tr>\n<td style="height:5px" colspan="3"></td>\n</tr>\n<tr>\n<td colspan="3">'+calendar_html+'</td>\n</tr>\n<tr>\n<td style="height:5px" colspan="3"></td>\n</tr>\n<tr>\n<td align="center" colspan="3"><button class="CalendarButtons" onclick="set_date(1,'+s.getDate()+","+object_name+","+month_type+","+day_type+')">'+i.todayText+'</button> <button class="CalendarButtons" onclick="hide_calendar('+object_name+')">'+i.closeText+"</button></td>\n</tr>\n</table>\n</td>\n</tr>\n</table>",i.object_name||(i.object_name=object_name),i.target_input=e,i.second_date=second_date,i.old_year=old_year,i.old_month=old_month,i.old_day=old_day,i.cur_year=old_year,i.cur_month=old_month,i.cur_day=old_day,document.getElementById(i.contID)||(obj=document.createElement("div"),obj.id=i.contID,obj.className=style+"AltDataTD "+style+"DataTD "+style+"FormTABLE "+style+"PageBODY",obj.style.borderStyle="solid",obj.style.borderColor="ThreeDShadow",obj.style.borderWidth="1px",obj.style.position="absolute",obj.style.top="0px",obj.style.left="0px",obj.style.padding="3px",obj.style.zIndex="1000",document.body.insertBefore(obj,document.body.firstChild),$e.add(i.contID,"mousedown",$e.stopPropagation)),document.all&&!window.XMLHttpRequest){eles=document.body.getElementsByTagName("select");for(var o=0;o<eles.length;o++)eles[o].id!=i.contID+".sel_year"&&eles[o].id!=i.contID+".sel_month"&&(eles[o].style.visibility="hidden")}i._iframes=new Array,eles=document.body.getElementsByTagName("iframe");for(var o=0;o<eles.length;o++)"hidden"!=eles[o].style.visibility&&""!=eles[o].id&&"pdf"==eles[o].src.toString().split(".").pop().substr(0,3).toLowerCase()&&(i._iframes.push(eles[o].id),eles[o].style.visibility="hidden");document.getElementById(i.contID).style.display="block",document.getElementById(i.contID).innerHTML=new_html,fill_calendar(old_month,old_year,i,month_type,day_type),$po(document.getElementById(i.contID),document.getElementById(e),"dropdown",-1),$e.add(document.documentElement,"mousedown",hide_calendar_evnt,i)}function fill_calendar(e,t,s,a,n){e=Number(e),
t=Number(t),e==s.old_month&&t==s.old_year?cur_day=s.old_day:cur_day=0,delete date_obj,date_obj=new Date,e==date_obj.getMonth()&&t==date_obj.getFullYear()?(cur_today=date_obj.getDate(),cur_day==cur_today&&(cur_day=0)):cur_today=0,date_obj.setDate(1),date_obj.setFullYear(t),date_obj.setMonth(e),start_day=date_obj.getDay(),end_month_check_1=new Date(t,e+1,1),timeDifference=end_month_check_1-864e5,end_month_check_2=new Date(timeDifference);var o=end_month_check_2.getDate(),r=1,l=s.start_day;for(start_day=start_day-l+1,start_day<1&&(start_day+=7),i=1;i<=6;i++)for(j=1;j<=7;j++)tar=document.getElementById(s.contID+"_1_w_"+i+"_d_"+j),1==i&&j<=start_day?(tar.innerHTML="&nbsp;",1==j||7==j?"weekend"!=tar.className&&(tar.className="weekend"):"workday"!=tar.className&&(tar.className="workday")):r<=o?(cur_day==r?(tar.innerHTML='<a href="#" onclick="set_date(0,'+r+","+s.object_name+","+a+","+n+'); return false" class="selectedDay">'+r+"</a>",tar.className="selectedDay"):cur_today==r?(tar.innerHTML='<a href="#" onclick="set_date(0,'+r+","+s.object_name+","+a+","+n+'); return false" class="today">'+r+"</a>",tar.className="today"):(tar.innerHTML='<a href="#" onclick="set_date(0,'+r+","+s.object_name+","+a+","+n+'); return false" class="weekday weekDay">'+r+"</a>",1==l||7==l?"weekend"!=tar.className&&(tar.className="weekend"):"workday"!=tar.className&&(tar.className="workday")),r++):(tar.innerHTML="&nbsp;",1==l||7==l?"weekend"!=tar.className&&(tar.className="weekend"):"workday"!=tar.className&&(tar.className="workday")),l++,l>7&&(l-=7);0==s.use_select&&(month_html=s.months[e],year_html=""+t,month_year_html=month_html+" "+year_html,document.getElementById(s.contID+"_date_display").innerHTML=month_year_html,s.cur_month=e,s.cur_year=t)}function prev_month(e,t,i){1==e.use_select?(cur_month=Number(document.getElementById(e.contID+".sel_month").value),cur_year=Number(document.getElementById(e.contID+".sel_year").value),0==cur_month?(document.getElementById(e.contID+".sel_month").value=11,document.getElementById(e.contID+".sel_year").value=cur_year-1):document.getElementById(e.contID+".sel_month").value=cur_month-1,fill_calendar(document.getElementById(e.contID+".sel_month").value,document.getElementById(e.contID+".sel_year").value,e,t,i)):(cur_month=e.cur_month,cur_year=e.cur_year,0==cur_month?(e.cur_month=11,e.cur_year=cur_year-1):e.cur_month=cur_month-1,fill_calendar(e.cur_month,e.cur_year,e,t,i))}function prev_year(e,t,i){1==e.use_select?(cur_year=Number(document.getElementById(e.contID+".sel_year").value),document.getElementById(e.contID+".sel_year").value=cur_year-1,fill_calendar(document.getElementById(e.contID+".sel_month").value,document.getElementById(e.contID+".sel_year").value,e,t,i)):(cur_year=e.cur_year,e.cur_year=cur_year-1,fill_calendar(e.cur_month,e.cur_year,e,t,i))}function next_month(e,t,i){1==e.use_select?(cur_month=Number(document.getElementById(e.contID+".sel_month").value),cur_year=Number(document.getElementById(e.contID+".sel_year").value),11==cur_month?(document.getElementById(e.contID+".sel_month").value=0,document.getElementById(e.contID+".sel_year").value=cur_year+1):document.getElementById(e.contID+".sel_month").value=cur_month+1,fill_calendar(document.getElementById(e.contID+".sel_month").value,document.getElementById(e.contID+".sel_year").value,e,t,i)):(cur_month=Number(e.cur_month),cur_year=Number(e.cur_year),11==cur_month?(e.cur_month=0,e.cur_year=cur_year+1):e.cur_month=cur_month+1,fill_calendar(e.cur_month,e.cur_year,e,t,i))}function next_year(e,t,i){1==e.use_select?(cur_year=Number(document.getElementById(e.contID+".sel_year").value),document.getElementById(e.contID+".sel_year").value=cur_year+1,fill_calendar(document.getElementById(e.contID+".sel_month").value,document.getElementById(e.contID+".sel_year").value,e,t,i)):(cur_year=e.cur_year,e.cur_year=cur_year+1,fill_calendar(e.cur_month,e.cur_year,e,t,i))}function set_date(e,t,i,s,a){if(1==e){var n=new Date;cur_month=n.getMonth(),cur_year=n.getFullYear()}else 1==i.use_select?(cur_month=Number(document.getElementById(i.contID+".sel_month").value),cur_year=Number(document.getElementById(i.contID+".sel_year").value)):(cur_month=i.cur_month,cur_year=i.cur_year);format=i.format,t=Number(t),1==a?(cur_day_str="",t<10?cur_day_str="0"+t:cur_day_str=""+t,format=format.replace("dd",cur_day_str)):2==a?format=format.replace("d",t):3==a&&(cur_day_str="",1==t||21==t||31==t?cur_day_str=t+"st":2==t||22==t?cur_day_str=t+"nd":3==t||23==t?cur_day_str=t+"rd":cur_day_str=t+"th",format=format.replace("x",cur_day_str)),cur_month=Number(cur_month)+1,1==s?(cur_month_str="",cur_month<10?cur_month_str="0"+cur_month:cur_month_str=""+cur_month,format=format.replace("mm",cur_month_str)):8==s?format=format.replace("m",cur_month):5==s?format=format.replace("month",get_chr_month(i,cur_month,s)):6==s?format=format.replace("MONTH",get_chr_month(i,cur_month,s)):7==s?format=format.replace("Month",get_chr_month(i,cur_month,s)):2==s?format=format.replace("mon",get_chr_month(i,cur_month,s)):3==s?format=format.replace("MON",get_chr_month(i,cur_month,s)):4==s&&(format=format.replace("Mon",get_chr_month(i,cur_month,s))),format=format.replace("mm",cur_month),format.search("yyyy")>=0?format=format.replace("yyyy",cur_year):(temp_year=String(cur_year),temp_year=temp_year.slice(2),format=format.replace("yy",temp_year)),hide_calendar(i),0==i.second_date?document.getElementById(i.target_input).value=format:document.getElementById(i.target_input).value=document.getElementById(i.target_input).value+format,$e&&$e.execute&&$e.execute(i.target_input,"change")}function hide_calendar_evnt(e,t){hide_calendar(t)}function hide_calendar(e){if(document.getElementById(e.contID).style.display="none",document.all&&!window.XMLHttpRequest){eles=document.body.getElementsByTagName("select");for(var t=0;t<eles.length;t++)eles[t].style.visibility=""}for(var t=0;t<e._iframes.length;t++)document.getElementById(e._iframes[t]).style.visibility="";$e.remove(document.documentElement,"mousedown",hide_calendar_evnt)}function get_num_month(e,t){t=t.toLowerCase(),t=t.substr(0,3),cur_month_num=1;for(var i=0;i<e.months.length;i++)if(e.months[i].substr(0,3).toLowerCase()==t){cur_month_num=i+1;break}return cur_month_num}function get_chr_month(e,t,i){return cur_chr_month=e.months[t-1],2!=i&&3!=i&&4!=i||(cur_chr_month=cur_chr_month.substr(0,3)),2==i||5==i?cur_chr_month=cur_chr_month.toLowerCase():3!=i&&6!=i||(cur_chr_month=cur_chr_month.toUpperCase()),cur_chr_month}function $f(e){var e=$n(e);"undefined"==typeof e.length&&(e=[e]);var t="undefined"!=typeof arguments[1]&&arguments[1];if(e[0]){var i=e[0].tagName.toLowerCase();if("input"!=i&&"select"!=i&&"textarea"!=i&&"button"!=i){var s=e[0].getElementsByTagName("input");if(0==s.length)return!1;e=s,i="input"}var a=e[0].type.toLowerCase();if("input"==i&&"radio"==a)for(var n=0;n<e.length;n++)if(1==e[n].checked){for(var o=e[n],r=!1;"body"!=o.tagName.toLowerCase();){if("none"==o.style.display||"hidden"==o.style.visibility){r=!0;break}o=o.parentNode}return r||e[n].focus(),!1}var o=e[0],r=!1;for("input"==i&&"hidden"==a&&(r=!0);"body"!=o.tagName.toLowerCase();){if("none"==o.style.display||"hidden"==o.style.visibility){r=!0;break}o=o.parentNode}r||(e[0].focus(),t&&e[0].select&&e[0].select())}}function closeParentA5Window(e){var t=A5.windows.getFromElement(e);t&&t.hide()}function closeLastOpenedA5Window(){var e=A5.windows.getTop();e&&e.hide()}function randId(){var e=new Date;return str=e.getDate()+""+e.getHours()+e.getMinutes()+e.getSeconds(),str}function getTabbedUI(){for(var e=window;window.top!=e;)if(e=e.parent,e.tbiObj)return e.tbiObj;return"undefined"!=typeof tbiObj&&tbiObj}function A5DataArrayToObject(e,t){for(var i=[],s={},a=0;a<t.length;a++)if(s={},t[a].constructor==Object)i.push(t[a]);else{for(var n=0;n<e.length;n++)s[e[n]]=t[a][n];i.push(s)}return i}function A5FindPropInArray(e,t,i){t.constructor!=Array&&(t=[t]),i.constructor!=Array&&(i=[i]);for(var s=!1,a=0;a<e.length;a++){s=!1;for(var n=0;n<t.length;n++)s="undefined"!=typeof e[a][t[n]]&&String(e[a][t[n]]).toLowerCase()==String(i[n]).toLowerCase();if(s)return a}return-1}function A5FilterPropertyArray(e,t,i){function s(e,t,i){var s=t.split(":"),a=s[0],n="var v1 = arguments[0]."+a+"; var v2 = arguments[1]."+a+"; if(v1 == null) v1 = ''; if(v2 == null) v2 = ''; var result = 0;",o="result = v1-v2;",r="";return"string"==typeof i[0][a]||null==i[0][a]?(n+="v1 = v1.replace(/(<([^>]+)>)/ig,'');v2 = v2.replace(/(<([^>]+)>)/ig,'');",s.length>1?"number"==s[1]?n+=" v1 = $u.s.toNum(v1); v2 = $u.s.toNum(v2);":"date"==s[1]?(s.shift(),s.shift(),n=n+" var tDate = new Date(); var tFrm = tDate._parseFormat('"+s.join(":")+"'); tDate.fromFormat(v1,tFrm); v1 = new Date(tDate); tDate.fromFormat(v2,tFrm); v2 = new Date(tDate);"):"boolean"==s[1]?(n+=" v1 = $u.s.toBool(v1); v2 = $u.s.toBool(v2);",o="if(v1<v2) result = -1; if(v1>v2) result = 1;"):"first"==s[1]?(n=n+" v1 = v1.substr(0,"+s[2]+"); v2 = v2.substr(0,"+s[2]+");",o="if(v1<v2) result = -1; if(v1>v2) result = 1;"):"length"==s[1]&&(n+=" v1 = v1.length; v2 = v2.length;"):o="if(v1.toLowerCase()<v2.toLowerCase()) result = -1; if(v1.toLowerCase()>v2.toLowerCase()) result = 1;"):"boolean"==typeof i[0][a]&&(o="if(v1<v2) result = -1; if(v1>v2) result = 1;"),e[t]<0&&(r="result = result*-1;"),n+o+r}function a(e,t){if(0==t.length)return t;if(e.constructor==Function)t.sort(e);else{var i=[];if(e.constructor==Object){var a="";for(var n in e)0==i.length?(i.push(s(e,n,t)),a=n):(i.push("if(result == 0){"),i.push(s(e,n,t)),i.push("}"));i.push("return result;")}else{var o="var v1 = arguments[0]; var v2 = arguments[1]; var result = 0;",r="result = v1-v2;",l="return result;";"string"==typeof t[0]?r="if(v1.toLowerCase()<v2.toLowerCase()) result = -1; if(v1.toLowerCase()>v2.toLowerCase()) result = 1;":"boolean"==typeof t[0]&&(r="if(v1<v2) result = -1; if(v1>v2) result = 1;"),e<0&&(l="return result*-1;"),i=[o,r,l]}t.sort(Function(i.join("")))}return t}var n=arguments[3];if("undefined"==typeof n&&(n={}),"string"==typeof t){var o=t;if(""!=t){t="try{if("+t+") return true;\nelse return false;} catch(err) {return false;}";try{var r=Function("data",t)}catch(l){return alert("Invalid filter: "+o),!1}}}else var r=t;var d=[],h="";if("undefined"!=typeof r)for(var c=0;c<e.length;c++)h=e[c],r(h)&&d.push(e[c]);else d=e;if("undefined"!=typeof n.columns){for(var u=[],c=0;c<d.length;c++){delete obj2,obj2={};for(var f=0;f<n.columns.length;f++)obj2[n.columns[f]]=d[c][n.columns[f]];u.push(obj2)}d=u}var p="";if("string"==typeof i){if(""!=i){i=i.replace("data.","","g");for(var p=i.split(","),m=[],c=0;c<p.length;c++)p[c].toLowerCase().indexOf("desc")>0?(p[c]=p[c].replace(/ desc/i,""),m.push('"'+p[c]+'" : -1')):m.push('"'+p[c]+'" : 1');m="{"+m.join(",")+"}",p=JSON.parse(m)}}else var p=i;if(d=a(p,d),"undefined"!=typeof n.distinct&&d.length>0&&n.distinct){var u=[],_="",g=n.distinctColumn;if("undefined"==typeof g){var v="";for(var y in d[0]){v=y;break}g=v}for(var c=0;c<d.length;c++)_=A5FindPropInArray(u,g,d[c][g]),_<0&&u.push(d[c]);d=u}return d}function A5ValidateNumber(e){e=""+e;for(var t=/[^0-9]/;e.charAt(e.length-1).match(t)&&(e=e.substring(0,e.length-1),0!=e.length););for(;e.charAt(0).match(t)&&(e=e.substring(1,e.length),0!=e.length););var i="undefined"!=typeof arguments[1]?arguments[1]:$u.comma,s="undefined"!=typeof arguments[2]?arguments[2]:$u.decimal,a="undefined"!=typeof arguments[3]?arguments[3]:0,n="."==s?".":s,o="."==i?".":i;""==s&&(a=0);var r=RegExp(".*[^0-9].*"),l={iv:"Value is not a valid number.",tg:"Groupings must only occur on the thousands (i.e. 12,456,789).",dp:"There must be "+a+" decimal places.",md:'You must use a "'+s+'" for the decimal places.'};if(0==a)if(""==i){if(RegExp(".*[^0-9-].*").test(e))return l.iv}else{if(RegExp(".*[^0-9-"+o+"].*").test(e))return l.iv;var d=e.split(i);if(d.length>1){for(var h=d.length-1;h>0;h--){if(3!=d[h].length)return l.tg;if(r.test(d[h]))return l.iv}if($u.s.lTrim(d[0],"-").length>3)return l.tg;if(r.test($u.s.lTrim(d[0],"-")))return l.iv}}else{var c=e.split(s);if(""==i){if(a==-1&&c.length>2)return l.md;if(a!=-1&&2!=c.length)return l.md;if(a!=-1&&c[1].length!=a)return l.dp;if(RegExp(".*[^0-9-"+n+"].*").test(e))return l.iv}else{if(a==-1&&c.length>2)return l.md;if(a!=-1&&2!=c.length)return l.md;if(a!=-1&&c[1].length!=a)return l.dp;if(2==c.length&&r.test(c[1]))return l.iv;if(RegExp(".*[^0-9-"+o+"].*").test(c[0]))return l.iv;var d=c[0].split(i);if(d.length>1){for(var h=d.length-1;h>0;h--){if(3!=d[h].length)return l.tg;if(r.test(d[h]))return l.iv}if($u.s.lTrim(d[0],"-").length>3)return l.tg;if(r.test($u.s.lTrim(d[0],"-")))return l.iv}}}return""}function A5ArrayMove(e,t,i){if(i>=e.length)for(var s=i-e.length;s--+1;)e.push(void 0);e.splice(i,0,e.splice(t,1)[0])}function A5RemoveHTMLWrapper(e){var t=RegExp('^<span a5wrapper="true"[^>]*>'),i=t.exec(e);return i?e.substring(i[0].length,e.length-7):e}function a5_layout_cont_bands(e,t){"none"==document.getElementById(e).style.display?(document.all?document.getElementById(e).style.display="block":document.getElementById(e).style.display="table-row-group",document.getElementById(e+"_IMG").src="css//"+t+"//AscOn.png"):(document.getElementById(e).style.display="none",document.getElementById(e+"_IMG").src="css//"+t+"//DescOn.png")}function a5_layout_cont_singlebands(e,t,i){return e!=t&&(document.all?document.getElementById(e).style.display="block":document.getElementById(e).style.display="table-row-group",document.getElementById(e+"_IMG").src="css//"+i+"//RowMarkerOn.png",""!=t&&(document.getElementById(t).style.display="none",document.getElementById(t+"_IMG").src="css//"+i+"//RowMarkerOff.png")),e}function a5_layout_cont_singlebands_onload(e,t){document.getElementById(e).style.display="none",document.getElementById(e+"_IMG").src="css//"+t+"//RowMarkerOff.png"}function a5_layout_cont_tabs(e,t,i){return e!=t&&(document.all?document.getElementById(e).style.display="block":document.getElementById(e).style.display="table",document.getElementById(e+"_IMG").src="css//"+i+"//RowMarkerOn.png",""!=t&&(document.getElementById(t).style.display="none",document.getElementById(t+"_IMG").src="css//"+i+"//RowMarkerOff.png")),e}function a5_layout_cont_genie(e,t){if(e!=t){document.all?document.getElementById(e).style.display="block":document.getElementById(e).style.display="table",""!=t&&(document.getElementById(t).style.display="none");for(var i=document.getElementById(e),s=0,a=0;null!=i;)s+=i.offsetLeft,a+=i.offsetTop,i=i.offsetParent;window.scrollTo(s,a)}}var Class={create:function(){for(var e=null,t=new Array,i=0;i<arguments.length;i++)t[i]=arguments[i];if(t[0]&&t[0].constructor==Function&&(e=t.shift()),klass=function(){this.initialize.apply(this,arguments)},klass.superclass=e,e){var s=function(){};s.prototype=e.prototype,klass.prototype=new s}for(var i=0;i<t.length;i++)$u.o.assign(klass.prototype,t[i]);return klass.prototype.initialize||(klass.prototype.initialize=function(){}),klass.prototype.constructor=klass,klass},superclassMethod:function(e,t,i,s){e.constructor.superclass.prototype[t]&&e.constructor.superclass.prototype[t].constructor==Function&&(s?e.constructor.superclass.prototype[t].apply(s,i):e.constructor.superclass.prototype[t].apply(e,i))}},$u={comma:",",decimal:".",currency:"$",days:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],daysShort:["sun","mon","tue","wed","thur","fri","sat"],months:["january","february","march","april","may","june","july","august","september","october","november","december"],monthsShort:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],compare:function(e,t){if(e==t)return!0;var i=$u.o.toJSON(e),s=$u.o.toJSON(t);return i==s},s:{toNum:function(e){if("number"==typeof e)return e;e=e.toString(),e.search("\\(")!=-1&&(e="-"+e);var t=RegExp("[^-0-9"+$u.decimal+"]");if(e=e.split(t).join(""),e.indexOf("-")!=-1){var i=0==e.indexOf("-"),t=RegExp("[^0-9"+$u.decimal+"]");e=$if(i,"-","")+e.split(t).join("")}return e=e.replace($u.decimal,"."),Number(e)},toBool:function(e){return e=e.toString(),""!=e&&(e=$u.s.aTrim(e).toLowerCase(),"true"==e||"t"==e||"yes"==e||"1"==e||".t."==e)},lTrim:function(e,t){for(e=e.toString(),t&&""!=t||(t=" ");t.indexOf(e.charAt(0))!=-1;)if(e=e.substring(1,e.length),0==e.length)return"";return e},substr:function(e,t,i){return e=e.toString(),t<0&&(t=e.length+t),"undefined"==typeof i?e.substr(t):e.substr(t,i)},rTrim:function(e,t){for(e=e.toString(),t&&""!=t||(t=" ");t.indexOf(e.charAt(e.length-1))!=-1;)if(e=e.substring(0,e.length-1),0==e.length)return"";return e},aTrim:function(e,t){return e=e.toString(),t&&""!=t||(t=" "),e=this.lTrim(e,t),e=this.rTrim(e,t)},tran:function(e,t,i){if(e=e.toString(),"object"==typeof t)for(var s=0;s<t.length;s++){var a=e.split(t[s]);e=a.join(i[s])}else{var a=e.split(t);e=a.join(i)}return e},word:function(e,t,i){e=e.toString(),""==i&&(i=" ");var s=e.split(i);return Math.abs(t)>s.length?"":t>-1?s[t-1]:s[s.length+t]},ellipse:function(e,t){e=e.toString();var i=arguments[3]?arguments[3]:"...",s=arguments[2]?arguments[2].substring(0,1).toLowerCase():"l";if("r"==s)e=e.substring(0,t-i.length)+i;else if("c"==s){var a=Math.round((t-i.length)/2),n=e.length-(t-i.length-a);e=e.substring(0,a)+i+e.substring(n,e.length)}else e=i+e.substring(e.length-(t-i.length),e.length);return e},pad:function(e,t,i){e=e.toString();var s=arguments[3]?arguments[3].toLowerCase():"l";if(t==-1)return e;if(e.length>t)return e.substr(0,t);if(i=$u.s.replicate(i,t),"l"==s)return i.substring(0,t-e.length)+e;if("r"==s)return e+i.substring(0,t-e.length);if("c"==s){t-=e.length;var a=Math.round(t/2),n=t-a;return i.substring(0,a)+e+i.substring(0,n)}},replicate:function(e,t){e=e.toString();for(var i=new Array,s=0;s<t;s++)i.push(e);return i.join("")},changeCase:function(e,t){switch(e=e.toString(),t=t.toLowerCase()){case"u":return e.toUpperCase();case"l":return e.toLowerCase();case"fu":return e.substr(0,1).toUpperCase()+e.substr(1);case"furl":return e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase();case"wfu":for(var i=e.split(" "),s=0;s<i.length;s++)i[s]=$u.s.changeCase(i[s],"fu");return i.join(" ");case"wfurl":e=e.toLowerCase();for(var i=e.split(" "),s=0;s<i.length;s++)i[s]=$u.s.changeCase(i[s],"fu");return i.join(" ")}}},n:{toStr:function(e){if("string"==typeof e)return e;var t=arguments[1]?arguments[1]:-1,i=arguments[2]?arguments[2].toUpperCase():"";if(i.indexOf("B")!=-1&&0==e)return"";var s=i.indexOf(",")!=-1,a=i.indexOf("-")!=-1,n=i.indexOf("(")!=-1,o=e<0?"-":"",r=arguments[3]?arguments[3]:"",l=arguments[4]?arguments[4]:"";e=t!=-1?$u.n.round(Math.abs(e),t):Math.abs(e);var d=String(e),h=$u.s.word(d,1,"."),c=$u.s.word(d,2,".");if(t!=-1&&(c||(c="0"),c.length!=t&&(c=$u.s.pad(c,t,"0","r"))),s&&h.length>3){var u=new Array,f=Math.round(h.length/3+.49);h=$u.s.pad(h,3*f,"0","l"),u.push($u.s.lTrim(h.substr(0,3),"0"));for(var p=1;p<f;p++)u.push(h.substr(3*p,3));h=u.join($u.comma)}return a&&""!=o?r=o+r:n&&""!=o?(r="("+r,l+=")"):h=o+h,""!=c?r+h+$u.decimal+c+l:r+h+l},toPlaceStr:function(e){e=Math.round(e);var t=String(e),i=parseInt(t.slice(-2));if(i>3&&i<21)return t+"th";var i=parseInt(t.slice(-1));return 1==i?t+"st":2==i?t+"nd":3==i?t+"rd":t+"th"},round:function(e,t){if(!isNaN(e)&&!isNaN(t)){var i="undefined"!=typeof arguments[2]?arguments[2].substr(0,1).toLowerCase():"",s=Math.pow(10,t);if("u"==i)return Math.round(e*s+.49999)/s;if("d"==i)return Math.round(e*s-.49999)/s;var a=0;return"a"==i?a=.49999:"t"==i&&(a=-.49999),e>0?Math.round(e*s+a)/s:Math.round(Math.abs(e*s)+a)/s*-1}}},a:{find:function(){var e=arguments[0],t=arguments[1],i="undefined"!=typeof arguments[2]&&arguments[2],s="undefined"==typeof arguments[3]||arguments[3],a=Array();if(1==s)for(var n=0;n<e.length&&(e[n]!=t||(a.push(n),1==i));n++);else for(var n=0;n<e.length&&(String(e[n]).indexOf(String(t))==-1||(a.push(n),1==i));n++);return 0==a.length&&a.push(-1),1==i?a:a[0]},compare:function(e,t){var i=arguments[2]?arguments[2]:"<";"object"!=typeof e&&(e=new Array(e)),"object"!=typeof t&&(t=new Array(t));var s=new Array,a=new Array;if(">"==i)for(var n=0;n<e.length;n++)s=$u.a.find(t,e[n]),s==-1&&(a[a.length]=e[n]);else if("="==i)for(var n=0;n<t.length;n++)s=$u.a.find(e,t[n]),s!=-1&&(Arr[a.length]=t[n]);else for(var n=0;n<t.length;n++)s=$u.a.find(e,t[n]),s==-1&&(a[a.length]=t[n]);return a},dedup:function(e){for(var t=new Array,i=0;i<e.length;i++)$u.a.find(t,e[i])==-1&&(t[t.length]=e[i]);return t},copy:function(e){return new Array(e)}},o:{assign:function(e,t){var i="undefined"!=typeof arguments[2]&&arguments[2];if(i)for(var s in t)"object"==typeof t[s]&&"object"==typeof e[s]&&null!=t[s]&&t[s].constructor!=Date&&t[s].constructor!=RegExp?(e[s]||(t[s].constructor==Array?e[s]=[]:e[s]={}),$u.o.assign(e[s],t[s],i)):"undefined"==typeof e[s]&&(e[s]=t[s]);else for(var s in t)"object"==typeof t[s]&&null!=t[s]&&t[s].constructor!=Date&&t[s].constructor!=RegExp?(e[s]&&"object"==typeof e[s]||(t[s].constructor==Array?e[s]=[]:e[s]={}),$u.o.assign(e[s],t[s],i)):e[s]=t[s]},toJSON:function(e){if(null==e)return"null";var t=typeof e;if("undefined"==t)return"''";if("object"==t){var i=new Array;if(e.length){for(var s=0;s<e.length;s++)i.push($u.o.toJSON(e[s]));return"["+i.join(", ")+"]"}for(var a in e)i.push("'"+a.replace(/'/g,"\\'")+"': "+$u.o.toJSON(e[a]));return"{"+i.join(", ")+"}"}return"number"==t?String(e):"boolean"==t?e?"true":"false":"date"==t?"Date('"+e+"')":"'"+$u.s.tran($u.s.tran($u.s.tran(e,"\\","\\\\"),"'","\\'"),"\n","\\n")+"'"},toParams:function(e){var t=arguments[1]||"",i="undefined"==typeof arguments[2]||arguments[2];i&&(t=t.replace(/%/g,"%25").replace(/\+/g,"%2B").replace(/\=/g,"%3D").replace(/\\/g,"%5C").replace(/&/g,"%26").replace(/\n/g,"%0D%0A").replace(/\r/g,""));var s=typeof e;if("object"==s){if(null==e)return t+"=";var a=new Array;if(e.length){for(var n=$u.s.tran(t,"[]","[..]"),o=0;o<e.length;o++)0==o?"object"==typeof e[o]?a.push($u.o.toParams(e[o],t+"[]",i)):a.push(t+"[]="+$u.o.toParams(e[o],"",i)):"object"==typeof e[o]?a.push($u.o.toParams(e[o],n+"[]",i)):a.push(n+"[]="+$u.o.toParams(e[o],"",i));return a.join("&")}""!=t&&(t+=".");var n=$u.s.tran(t,"[]","[..]"),r=0,l="";for(var d in e)l=d,i&&(l=l.replace(/%/g,"%25").replace(/\+/g,"%2B").replace(/\=/g,"%3D").replace(/\\/g,"%5C").replace(/&/g,"%26").replace(/\n/g,"%0D%0A").replace(/\r/g,"")),0==r?"object"==typeof e[d]?a.push($u.o.toParams(e[d],t+d,i)):a.push(t+l+"="+$u.o.toParams(e[d],"",i)):"object"==typeof e[d]?a.push($u.o.toParams(e[d],n+d,i)):a.push(n+l+"="+$u.o.toParams(e[d],"",i)),r++;return a.join("&")}return"number"==s?String(e):"boolean"==s?e?".t.":".f.":i?""+e.replace(/%/g,"%25").replace(/\+/g,"%2B").replace(/\=/g,"%3D").replace(/\\/g,"%5C").replace(/&/g,"%26").replace(/\n/g,"%0D%0A").replace(/\r/g,""):""+e}},d:{toStr:function(e,t){t.indexOf("[mm]")!=-1?t=t.replace("[mm]",$u.s.pad(""+(e.getMonth()+1),2,"0")):t.indexOf("[m]")!=-1?t=t.replace("[m]",""+(e.getMonth()+1)):t.indexOf("[month]")!=-1?t=t.replace("[month]",$u.months[e.getMonth()]):t.indexOf("[Month]")!=-1?t=t.replace("[Month]",$u.s.changeCase($u.months[e.getMonth()],"fu")):t.indexOf("[MONTH]")!=-1?t=t.replace("[MONTH]",$u.months[e.getMonth()].toUpperCase()):t.indexOf("[mon]")!=-1?t=t.replace("[mon]",$u.monthsShort[e.getMonth()]):t.indexOf("[Mon]")!=-1?t=t.replace("[Mon]",$u.s.changeCase($u.monthsShort[e.getMonth()],"fu")):t.indexOf("[MON]")!=-1&&(t=t.replace("[MON]",$u.monthsShort[e.getMonth()].toUpperCase())),t.indexOf("[dd]")!=-1?t=t.replace("[dd]",$u.s.pad(""+e.getDate(),2,"0")):t.indexOf("[d]")!=-1?t=t.replace("[d]",""+e.getDate()):t.indexOf("[ddx]")!=-1?t=t.replace("[ddx]",$u.s.pad($u.n.toPlaceStr(e.getDate()),2,"0")):t.indexOf("[dx]")!=-1?t=t.replace("[dx]",$u.n.toPlaceStr(e.getDate())):t.indexOf("[DDX]")!=-1?t=t.replace("[DDX]",$u.s.pad($u.n.toPlaceStr(e.getDate()),2,"0").toUpperCase()):t.indexOf("[DX]")!=-1&&(t=t.replace("[DX]",$u.n.toPlaceStr(e.getDate()).toUpperCase())),t.indexOf("[yy]")!=-1?t=t.replace("[yy]",(""+e.getFullYear()).substr(2)):t.indexOf("[yyyy]")!=-1&&(t=t.replace("[yyyy]",""+e.getFullYear())),t.indexOf("[wday]")!=-1?t=t.replace("[wday]",$u.days[e.getDay()]):t.indexOf("[Wday]")!=-1?t=t.replace("[Wday]",$u.s.changeCase($u.days[e.getDay()],"fu")):t.indexOf("[WDAY]")!=-1?t=t.replace("[WDAY]",$u.days[e.getDay()].toUpperCase()):t.indexOf("[wd]")!=-1?t=t.replace("[wd]",$u.daysShort[e.getDay()]):t.indexOf("[Wd]")!=-1?t=t.replace("[Wd]",$u.s.changeCase($u.daysShort[e.getDay()],"fu")):t.indexOf("[WD]")!=-1&&(t=t.replace("[WD]",$u.daysShort[e.getDay()].toUpperCase()));var i=e.getHours(),s=i>11?"pm":"am";return 0==i&&(i=24),t.indexOf("[t:h]")!=-1?(i>12&&(i-=12),t=t.replace("[t:h]",""+i)):t.indexOf("[t:hh]")!=-1?(i>12&&(i-=12),t=t.replace("[t:hh]",$u.s.pad(""+i,2,"0"))):t.indexOf("[t:mh]")!=-1?t=t.replace("[t:mh]",""+i):t.indexOf("[t:mhh]")!=-1&&(t=t.replace("[t:mhh]",$u.s.pad(""+i,2,"0"))),t.indexOf("[t:m]")!=-1?t=t.replace("[t:m]",""+(e.getMinutes()+1)):t.indexOf("[t:mm]")!=-1&&(t=t.replace("[t:mm]",$u.s.pad(""+(e.getMinutes()+1),2,"0"))),t.indexOf("[t:s]")!=-1?t=t.replace("[t:s]",""+(e.getSeconds()+1)):t.indexOf("[t:ss]")!=-1&&(t=t.replace("[t:ss]",$u.s.pad(""+(e.getSeconds()+1),2,"0"))),t.indexOf("[t:am]")!=-1&&(t=t.replace("[t:am]",s)),t.indexOf("[t:a]")!=-1?t=t.replace("[t:a]",s.substr(0,1)):t.indexOf("[t:AM]")!=-1?t=t.replace("[t:AM]",s.toUpperCase()):t.indexOf("[t:A]")!=-1&&(t=t.replace("[t:A]",s.substr(0,1).toUpperCase())),t}},b:{toStr:function(e,t,i){return e?t:i}}};if(!$e){var $e={loaded:!1,_e:[],_de:[],_dee:[],_ue:[],_ae:{},_aeg:{i:0,a:[],dhTO:0,sT:0,sX:0,sY:0,iX:[],iY:[],maxX:0,maxY:0,minX:0,minY:0,lClick:0},add:function(e,t,i){var s=arguments[3]?arguments[3]:null,a="boolean"==typeof arguments[4]&&arguments[4],n=arguments[5]?arguments[5]:"";if(e&&e.length&&!e.tagName&&"string"!=typeof e&&!e.alert&&"undefined"!=typeof e[0]){for(var o=!0,r=0;r<e.length;r++)o=$e.add(e[r],t,i,s,a,n)&&o;return o}if($e.loaded){var l=$(e);if(!l)return!1;var d=a?s:l,h=function(e){return i.call(d,$e.getEvent(e),s)};if("load"==t)return h(),delete h,delete l,delete d,!0;if("unload"==t)return $e._ue.push([l,t,i,h,s,a,n]),!0;if("abstract"==t.substr(0,8)&&!$e.abstractEvents.disabled){""==l.id&&(l.id=A5.u.getUniqueId()),$e._ae[l.id]?$e._ae[l.id].ele!=l&&(delete $e._ae[l.id].ele,$e._ae[l.id]={ele:l,dt:!1,ut:!1,mt:!1,d:[],u:[],m:[],g:[]}):$e._ae[l.id]={ele:l,dt:!1,ut:!1,mt:!1,d:[],u:[],m:[],g:[]};var c=t.substr(8),u=!!!navigator.userAgent.match(/(iPad|iPhone|iPod)/i),f=navigator.userAgent.match(/android/i)||!!("createTouch"in document);if("down"==c){if("true"!=$ga(l,"A5AbstEvntD")){window.navigator.msPointerEnabled?$e.add(l,"MSPointerDown",$e._aetDown):(f&&$e.add(l,"touchstart",$e._aetDown),u&&$e.add(l,"mousedown",$e._aemDown)),$sa(l,"A5AbstEvntD","true");for(var r=$e._ae[l.id].d.length-1;r>=0;r--)$e._ae[l.id].d[r]&&(delete $e._ae[l.id].d[r][0],delete $e._ae[l.id].d[r][1],delete $e._ae[l.id].d[r]);$e._ae[l.id].d=[]}$e._ae[l.id].d.push([i,h,s,a,n])}else if("up"==c){if("true"!=$ga(l,"A5AbstEvntU")){window.navigator.msPointerEnabled?$e.add(l,"MSPointerUp",$e._aetUp):(f&&($e.add(l,"touchend",$e._aetUp),$e.add(l,"touchcancel",$e._aetUp)),u&&$e.add(l,"mouseup",$e._aemUp)),$sa(l,"A5AbstEvntU","true");for(var r=$e._ae[l.id].u.length-1;r>=0;r--)$e._ae[l.id].u[r]&&(delete $e._ae[l.id].u[r][0],delete $e._ae[l.id].u[r][1],delete $e._ae[l.id].u[r]);$e._ae[l.id].u=[]}$e._ae[l.id].u.push([i,h,s,a,n])}else if("move"==c){if("true"!=$ga(l,"A5AbstEvntM")){window.navigator.msPointerEnabled?$e.add(l,"MSPointerMove",$e._aetMove):(f&&$e.add(l,"touchmove",$e._aetMove),u&&$e.add(l,"mousemove",$e._aemMove)),$sa(l,"A5AbstEvntM","true");for(var r=$e._ae[l.id].m.length-1;r>=0;r--)$e._ae[l.id].m[r]&&(delete $e._ae[l.id].m[r][0],delete $e._ae[l.id].m[r][1],delete $e._ae[l.id].m[r]);$e._ae[l.id].m=[]}$e._ae[l.id].m.push([i,h,s,a,n])}else{if("true"!=$ga(l,"A5AbstEvntG")){$e.add(l,"abstractdown",$e._aegStart),$sa(l,"A5AbstEvntG","true");for(var r=$e._ae[l.id].g.length-1;r>=0;r--)$e._ae[l.id].g[r]&&(delete $e._ae[l.id].g[r][0],delete $e._ae[l.id].g[r][1],delete $e._ae[l.id].g[r]);$e._ae[l.id].g=[],"true"!=$ga(document.documentElement,"A5AbstEvntG")&&($e.add(document.documentElement,"abstractmove",$e._aegMove),$e.add(document.documentElement,"abstractup",$e._aegEnd),$sa(document.documentElement,"A5AbstEvntG","true"))}$e._ae[l.id].g.push([t,i,h,s,a,n]),$e._aeg.i++}return!0}$e.abstractEvents.disabled&&"abstract"==t.substr(0,8)&&("abstractdown"==t?t="mousedown":"abstractup"==t?t="mouseup":"abstractmove"==t?t="mousemove":"abstractclick"==t?t="click":"abstractdblclick"==t&&(t="dblclick")),$e._e.push([l,t,i,h,s,a,n]),l.addEventListener?l.addEventListener(t,h,!1):l.attachEvent&&l.attachEvent("on"+t,h)}else $e._de.push([e,t,i,s,a,n]);return!0},remove:function(e,t,i){if("abstract"==t.substr(0,8)&&$e._ae[e.id]){var s=t.substr(8);if("down"==s){for(var a=$e._ae[e.id].d,n=a.length-1;n>=0;n--)a[n]&&a[n][0]==i&&(delete a[n][0],delete a[n][1],delete a[n],a.splice(n,1));"true"==$ga(e,"A5AbstEvntD")&&0==a.length&&(window.navigator.msPointerEnabled?$e.remove(e,"MSPointerDown",$e._aetDown):($e.remove(e,"touchstart",$e._aetDown),$e.remove(e,"mousedown",$e._aemDown)),$sa(e,"A5AbstEvntD",""))}else if("up"==s){for(var a=$e._ae[e.id].u,n=a.length-1;n>=0;n--)a[n]&&a[n][0]==i&&(delete a[n][0],delete a[n][1],delete a[n],a.splice(n,1));"true"==$ga(e,"A5AbstEvntU")&&0==a.length&&(window.navigator.msPointerEnabled?$e.remove(e,"MSPointerUp",$e._aetUp):($e.remove(e,"touchend",$e._aetUp),$e.remove(e,"touchcancel",$e._aetUp),$e.remove(e,"mouseup",$e._aemUp)),$sa(e,"A5AbstEvntU",""))}else if("move"==s){for(var a=$e._ae[e.id].m,n=a.length-1;n>=0;n--)a[n]&&a[n][0]==i&&(delete a[n][0],delete a[n][1],delete a[n],a.splice(n,1));"true"==$ga(e,"A5AbstEvntM")&&0==a.length&&(window.navigator.msPointerEnabled?$e.remove(e,"MSPointerMove",$e._aetMove):($e.remove(e,"touchmove",$e._aetMove),$e.remove(e,"mousemove",$e._aemMove)),$sa(e,"A5AbstEvntM",""))}else{for(var a=$e._ae[e.id].g,n=a.length-1;n>=0;n--)a[n]&&a[n][0]==i&&(delete a[n][1],delete a[n][2],delete a[n],a.splice(n,1),$e._aeg.i--);"true"==$ga(e,"A5AbstEvntG")&&0==a.length&&($e.remove(e,"abstractdown",$e._aegStart),$sa(e,"A5AbstEvntG",""))}return!0}if("string"==typeof e)e=$(e);else if(e&&"undefined"!=typeof e.length&&!e.tagName&&"string"!=typeof e&&!e.alert&&"undefined"!=typeof e[0]){for(var o=!0,n=0;n<e.length;n++)o=$e.remove(e[n],t,i)&&o;return o}var r=null,l=arguments[3]?arguments[3]:$e._wf(e,t,i);if(l==-1){for(var n=0;n<$e._ue.length;n++)if($e._ue[n]&&$e._ue[n][0]==e&&$e._ue[n][1]==t&&$e._ue[n][2]==i)return delete $e._ue[n][2],delete $e._ue[n],!0;return!1}return r=$e._e[l],e.removeEventListener?e.removeEventListener(t,r[3],!1):e.detachEvent&&e.detachEvent("on"+t,r[3]),delete $e._e[l][3],delete $e._e[l][2],delete $e._e[l],!0},removeGroup:function(e){for(var t=0;t<$e._e.length;t++){var i=$e._e[t];i&&i[6]==e&&(i[0]?$e.remove(i[0],i[1],i[2],t):(delete i[0],delete i[3],delete i[2],delete $e._e[t]))}var s=0,a=!1;for(var n in $e._ae){s=$e._ae[n].d;for(var t=s.length-1;t>=0;t--)s[t][5]==e&&(delete s[t][0],delete s[t][1],delete s[t],s.splice(t,1),a=!0);if(0==s.length&&a){var o=$(n);$e.remove(o,"touchstart",$e._aetDown),$e.remove(o,"mousedown",$e._aemDown),$sa(o,"A5AbstEvntd","")}a=!1,s=$e._ae[n].u;for(var t=s.length-1;t>=0;t--)s[t][5]==e&&(delete s[t][0],delete s[t][1],delete s[t],s.splice(t,1),a=!0);if(0==s.length&&a){var o=$(n);$e.remove(o,"touchend",$e._aetUp),$e.remove(o,"touchcancel",$e._aetUp),$e.remove(o,"mouseup",$e._aemUp),$sa(o,"A5AbstEvntU","")}a=!1,s=$e._ae[n].m;for(var t=s.length-1;t>=0;t--)s[t][5]==e&&(delete s[t][0],delete s[t][1],delete s[t],s.splice(t,1),a=!0);if(0==s.length&&a){var o=$(n);$e.remove(o,"touchmove",$e._aetMove),$e.remove(o,"mousemove",$e._aemMove),$sa(o,"A5AbstEvntM","")}a=!1,s=$e._ae[n].g;for(var t=s.length-1;t>=0;t--)s[t][5]==e&&(delete s[t][0],delete s[t][1],delete s[t],s.splice(t,1),a=!0);if(0==s.length&&a){var o=$(n);$e.remove(o,"abstractdown",$e._aegStart),$sa(o,"A5AbstEvntG","")}}for(var t=0;t<$e._ue.length;t++)$e._ue[t]&&$e._ue[t][6]==e&&(delete $e._ue[t][0],delete $e._ue[t][3],delete $e._ue[t][2],delete $e._ue[t])},execute:function(e,t){
if(!$e.loaded)return $e._dee.push([e,t]),!1;var e=$(e);if(!e)return!1;var i={};if("abstract"!=t.substr(0,8)){e["on"+t]&&e["on"+t]();for(var s=0;s<$e._e.length;s++)$e._e[s]&&$e._e[s][0]==e&&$e._e[s][1]==t&&$e._e[s][3](i)}else if($e._ae[e.id]){var a=t.substr(8);if("down"==a)for(var n=$e._ae[e.id].d,s=0;s<n.length;s++)n[s][1](i);else if("up"==a)for(var n=$e._ae[e.id].u,s=0;s<n.length;s++)n[s][1](i);else if("move"==a)for(var n=$e._ae[e.id].m,s=0;s<n.length;s++)n[s][1](i);else for(var n=$e._ae[e.id].g,s=0;s<n.length;s++)n[s][0]==t&&n[s][2](i)}},executeGroup:function(e){for(var t=0;t<$e._e.length;t++){var i=$e._e[t];i&&i[6]==e&&i[3]()}},getEvent:function(e){var t=e||window.event;return t},getCharCode:function(e){return e=$e.getEvent(e),e.charCode||e.keyCode},getTouches:function(e){if(e.originalEvent){if(e.originalEvent.touches&&e.originalEvent.touches.length)return e.originalEvent.touches;if(e.originalEvent.changedTouches&&e.originalEvent.changedTouches.length)return e.originalEvent.changedTouches}else if(e.touches||e.changedTouches){if(e.touches.length)return e.touches;if(e.changedTouches.length)return e.changedTouches}return null},getCoors:function(e){var t={},i=$e.getTouches(e);return i&&i.length?(t.clientX=i[0].clientX,t.clientY=i[0].clientY,t):(t.clientX=e.clientX,t.clientY=e.clientY,t)},stopEvent:function(e){e=$e.getEvent(e),$e.stopPropagation(e),$e.preventDefault(e)},stopPropagation:function(e){e=$e.getEvent(e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},preventDefault:function(e){e=$e.getEvent(e),e.preventDefault?e.preventDefault():e.returnValue=!1},_wf:function(e,t,i){for(var s=0;s<$e._e.length;s++)if($e._e[s]&&$e._e[s][0]==e&&$e._e[s][1]==t&&$e._e[s][2]==i)return s;return-1},_pageLoad:function(){if(!$e.loaded){$e.loaded=!0;for(var e=0;e<$e._de.length;e++)$e.add.call($e,$e._de[e][0],$e._de[e][1],$e._de[e][2],$e._de[e][3],$e._de[e][4],$e._de[e][5]);for(var e=0;e<$e._dee.length;e++)$e.execute.apply($e,$e._dee[e]);$e.onLoaded.constructor==Function&&$e.onLoaded()}},_pageUnload:function(e){for(var t=0;t<$e._ue.length;t++)$e._ue[t]&&($e._ue[t][3](e),delete $e._ue[t][0],delete $e._ue[t][3],delete $e._ue[t][2],delete $e._ue[t]);for(var t=0;t<$e._e.length;t++)$e._e[t]&&$e._e[t][0]&&$e.remove($e._e[t][0],$e._e[t][1],$e._e[t][2],t)},_aetDown:function(e){$e._ae[this.id].dt=(new Date).getTime(),$e._aeDown(this,e)},_aemDown:function(e){return $e._ae[this.id]&&$e._ae[this.id].dt&&(new Date).getTime()-$e._ae[this.id].dt<1e3?void($e._ae[this.id].dt=!1):void $e._aeDown(this,e)},_aeDown:function(e,t){if(1==e.disabled)return!1;for(var i=$e._ae[e.id].d,s=0;s<i.length;s++)i[s][1](t)},_aetUp:function(e){$e._ae[this.id].ut=(new Date).getTime(),$e._aeUp(this,e)},_aemUp:function(e){return $e._ae[this.id]&&$e._ae[this.id].ut&&(new Date).getTime()-$e._ae[this.id].ut<1e3?void($e._ae[this.id].ut=!1):void $e._aeUp(this,e)},_aeUp:function(e,t){for(var i=$e._ae[e.id].u,s=0;s<i.length;s++)i[s][1](t)},_aetMove:function(e){$e._ae[this.id].mt=(new Date).getTime(),$e._aeMove(this,e)},_aemMove:function(e){return $e._ae[this.id]&&$e._ae[this.id].mt&&(new Date).getTime()-$e._ae[this.id].mt<1e3?void($e._ae[this.id].mt=!1):void $e._aeMove(this,e)},_aeMove:function(e,t){for(var i=$e._ae[e.id].m,s=0;s<i.length;s++)i[s][1](t)},_aegStart:function(e){if(e.type&&($e._aeg.a.push(this.id),1==$e._aeg.a.length)){var t=$e.getCoors(e);$e._aeg.sT=(new Date).getTime(),$e._aeg.x=t.clientX,$e._aeg.y=t.clientY,$e._aeg.sX=t.clientX,$e._aeg.sY=t.clientY,$e._aeg.maxX=t.clientX,$e._aeg.maxY=t.clientY,$e._aeg.minX=t.clientX,$e._aeg.minY=t.clientY,$e._aeg.dh=!1,$e._aeg.dhTO=setTimeout($e._aegHold,$e.abstractEvents.downHold.duration)}},_aegMove:function(e){if($e._aeg.a){var t=$e.getCoors(e);$e._aeg.x=t.clientX,$e._aeg.y=t.clientY,$e._aeg.maxX=Math.max($e._aeg.maxX,t.clientX),$e._aeg.maxY=Math.max($e._aeg.maxY,t.clientY),$e._aeg.minX=Math.min($e._aeg.minX,t.clientX),$e._aeg.minY=Math.min($e._aeg.minY,t.clientY)}},_aegEnd:function(e){var t=$e.getCoors(e);clearTimeout($e._aeg.dhTO);var i=(new Date).getTime(),s=!1,a=!1,n=!1,o=Math.max($e._aeg.sX-$e._aeg.minX,$e._aeg.maxX-$e._aeg.sX),r=Math.max($e._aeg.sY-$e._aeg.minY,$e._aeg.maxY-$e._aeg.sY),l=Math.sqrt(o*o+r*r);if(l<=$e.abstractEvents.tap.wiggle&&(s=!0,i-$e._aeg.lTap<=$e.abstractEvents.dblTap.duration&&(o=Math.abs(t.clientX-$e._aeg.lTapCoor.clientX),r=Math.abs(t.clientY-$e._aeg.lTapCoor.clientY),l=Math.sqrt(o*o+r*r),l<=$e.abstractEvents.dblTap.wiggle&&(a=!0)),$e._aeg.lTap=i,$e._aeg.lTapCoor=t),l/(i-$e._aeg.sT)>=$e.abstractEvents.swipe.velocity){n=!0;var d="left",h="up";$e._aeg.sX-$e._aeg.minX<$e._aeg.maxX-$e._aeg.sX&&(d="right"),$e._aeg.sY-$e._aeg.minY<$e._aeg.maxY-$e._aeg.sY&&(h="down"),o>=r?e.swipeDirection=d:e.swipeDirection=h}e.abstractData={x:$e._aeg.x,y:$e._aeg.y,startX:$e._aeg.sX,startY:$e._aeg.sY,endX:t.clientX,endY:t.clientY,maxX:$e._aeg.maxX,maxY:$e._aeg.maxY,minX:$e._aeg.minX,minY:$e._aeg.minY,downHold:$e._aeg.dh};var c=$u.a.dedup($e._aeg.a.join("\n").split("\n"));$e._aeg.a=[],$e._aeg.sT=0,$e._aeg.sX=0,$e._aeg.sY=0,$e._aeg.maxX=5e3,$e._aeg.maxY=5e3,$e._aeg.minX=-5e3,$e._aeg.minY=-5e3;for(var u=!0,f=$if(A5.u.drag._sDif<$e.abstractEvents.click.scrollMax,!0,!1),p=f,m=i-$e._aeg.lClick<=$e.abstractEvents.dblClick.duration,_=0;_<c.length;_++)if($e._ae[c[_]])for(var g=$e._ae[c[_]].g,v=0;v<g.length;v++){var y=g[v][0].substr(8),b=$e._ae[c[_]].ele.disabled;if("click"!=y&&"dblclick"!=y||1==b||!f)"tap"==y?s&&(u=g[v][2](e),"boolean"==typeof u&&0==u&&(s=!1)):"dbltap"==y?a&&(u=g[v][2](e),"boolean"==typeof u&&0==u&&(a=!1)):"swipe"==y&&n&&(u=g[v][2](e),"boolean"==typeof u&&0==u&&(n=!1));else{var w=$e._ae[c[_]].ele.getBoundingClientRect();t.clientY>=w.top&&t.clientY<=w.top+w.height&&t.clientX>=w.left&&t.clientX<=w.left+w.width&&($e._aeg.lClick=i,"click"==y&&(u=g[v][2](e),"boolean"==typeof u&&0==u&&(f=!1)),"dblclick"==y&&m&&p&&$e._aeg.lClickB.top==w.top&&$e._aeg.lClickB.left==w.left&&$e._aeg.lClickB.width==w.width&&$e._aeg.lClickB.height==w.height&&(u=g[v][2](e),"boolean"==typeof u&&0==u&&(p=!1)),$e._aeg.lClickB=w)}}},_aegHold:function(){var e=Math.max($e._aeg.sX-$e._aeg.minX,$e._aeg.maxX-$e._aeg.sX),t=Math.max($e._aeg.sY-$e._aeg.minY,$e._aeg.maxY-$e._aeg.sY),i=Math.sqrt(e*e+t*t);if(i<=$e.abstractEvents.downHold.wiggle){var s={type:"abstractdownhold",clientX:$e._aeg.x,clientY:$e._aeg.y,abstractData:{x:$e._aeg.x,y:$e._aeg.y,startX:$e._aeg.sX,startY:$e._aeg.sY,maxX:$e._aeg.maxX,maxY:$e._aeg.maxY,minX:$e._aeg.minX,minY:$e._aeg.minY}};$e._aeg.dh=!0;for(var a=0;a<$e._aeg.a.length;a++)if($e._ae[$e._aeg.a[a]]&&$e._ae[$e._aeg.a[a]].g)for(var n=$e._ae[$e._aeg.a[a]].g,o=0;o<n.length;o++)"downhold"==n[o][0].substr(8)&&n[o][2](s)}},onLoaded:0,abstractEvents:{disabled:!1,tap:{wiggle:10},dblTap:{duration:600,wiggle:10},click:{scrollMax:20},dblClick:{duration:600},downHold:{duration:600,wiggle:10},swipe:{velocity:.75}}};$ae(window,"load",$e._pageLoad),$ae(window,"unload",$e._pageUnload)}var $a=new Object;$a.simple=Class.create(),$a.simple.prototype={initialize:function(e,t){this.transport=this.getTransport(),this.method=t.method||"post",this.async=t.async||!0,this.handleGeneric=t.handleGeneric||!1,this.handleType=t.handleType||"eval",this.handleContext=t.handleContext||!1,this.onprogress=t.onprogress||!1,this.onload=t.onload||!1,this.onerror=t.onerror||!1,this.onabort=t.onabort||!1,this.timeout=t.timeout||!1,1==this.handleGeneric?"eval"==this.handleType&&(this.handle=$a._rh._eval):this.handle=t.handle||null,this.errorHandle=t.errorHandle||$a._rh._error,this.errorHandleContext=t.errorHandleContext||null,this.data=t.data||"","undefined"!=typeof A5&&"undefined"!=typeof A5.ajax&&"undefined"!=typeof A5.ajax.addParamRequiredData&&(this.data=A5.ajax.addParamRequiredData(this.data));for(var i=this.data.split("&"),s=0,a="",n={},o=0;o<i.length;o++)s=i[o].split("="),a=s.shift(),s=s.join("="),"[]"==a.substr(a.length-2)?(a=a.substr(0,a.length-2),"undefined"==typeof n[a]&&(n[a]=[]),n[a].push(s)):n[a]=s;this.data=$u.o.toParams(n,"",!1),this.fill=$(t.fill)||null,this.url=e,this._secondChance=!0,$a.lastCallback=(new Date).getTime(),this.initCallback=$a.lastCallback,this.request()},request:function(){this.transport.open(this.method,this.url,this.async),this.timeout&&(this.transport.timeout=this.timeout);var e=this.onChange,t=this;if(this.transport.onreadystatechange=function(){return e.call(t)},"post"==this.method&&(this.transport.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),this.transport.overrideMimeType))try{this.transport.overrideMimeType("text/html; charset=UTF-8")}catch(i){console.log("Error -> "+i)}this.onprogress&&(this.transport.onprogress=this.onprogress,this.transport.upload.onprogress=this.onprogress),this.onload&&(this.transport.onload=this.onload,this.transport.upload.onload=this.onload),this.onerror&&(this.transport.onerror=this.onerror,this.transport.upload.onerror=this.onerror),this.onabort&&(this.transport.onabort=this.onabort,this.transport.upload.onabort=this.onabort),this.transport.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.transport.send(this.data)},onChange:function(){if(4==this.transport.readyState&&200==this.transport.status){var e=this.handle,t=this.handleContext||e,i=this;e&&setTimeout(function(){return e.call(t,i.transport)},10),$a._def[""+this.initCallback]&&setTimeout(Function("$a._def['"+this.initCallback+"'](); delete $a._def['"+this.initCallback+"'];"),20);var s=this.fill;s&&setTimeout(function(){return $svs(s,i.transport.responseText)},10)}else if(4==this.transport.readyState&&408==this.transport.status&&this._secondChance)$a.lastCallback=(new Date).getTime(),this.request(),this._secondChance=!1;else if(4==this.transport.readyState&&200!=this.transport.status){var e=this.errorHandle,t=this.errorHandleContext||e,i=this;e&&setTimeout(function(){return e.call(t,i.transport)},10);var s=this.fill;s&&setTimeout(function(){return $svs(s,i.transport.responseText)},10)}},getTransport:function(){trans=!1;try{trans=new XMLHttpRequest}catch(e){window.ActiveXObject&&(trans=new ActiveXObject("Microsoft.XMLHTTP"))}return trans}},$a._def={},$a.lastCallback=(new Date).getTime(),$a._rh={_eval:function(obj){obj.responseText&&eval(obj.responseText)},_error:function(e){var t=e.responseText;t.search("</body>")!=-1&&(t=$u.s.word($u.s.word(t,2,"<body>"),1,"</body>"));var t=$u.s.aTrim(t.replace(/(<([^>]+)>)/gi,""),"\n\r  ");""!=t&&alert("XHTTPRequest Error:\n\n"+t)}};var AUI=new Object;AUI.u={getVPSize:function(){return"number"==typeof window.innerWidth?{width:window.innerWidth,height:window.innerHeight}:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}:document.body&&(document.body.clientWidth||document.body.clientHeight)?{width:document.body.clientWidth,height:document.body.clientHeight}:void 0},getVPScroll:function(){return"number"==typeof window.pageYOffset?{x:window.pageXOffset,y:window.pageYOffset}:document.documentElement&&"undefined"!=typeof document.documentElement.scrollLeft?{x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop}:document.body&&"undefined"!=typeof document.body.scrollLeft?{x:document.body.scrollLeft,y:document.body.scrollTop}:void 0},getPosition:function(e){e=$(e);var t={x:$gpl(e),y:$gpt(e)};return"object"==typeof arguments[1]&&(arguments[1].x=t.x,arguments[1].y=t.y),t},getSize:function(e){e=$(e);var t={width:e.offsetWidth,height:e.offsetHeight};return"object"==typeof arguments[1]&&(arguments[1].width=t.width,arguments[1].height=t.height),t},getMetrics:function(e){e=$(e),e=$(e);var t={x:$gpl(e),y:$gpt(e),width:e.offsetWidth,height:e.offsetHeight};return t.x2=t.x+t.width,t.y2=t.y+t.height,"object"==typeof arguments[1]&&(arguments[1].x=t.x,arguments[1].y=t.y,arguments[1].width=t.width,arguments[1].height=t.height,arguments[1].x2=t.x2,arguments[1].y2=t.y2),t}},AUI.KeyWatcher=Class.create(),AUI.KeyWatcher.prototype={initialize:function(e){this.keys=e,this.shift=!1,this.ctrl=!1,this.alt=!1,this.context=0,this.targetWindow=0,this._on=!1,"object"==typeof arguments[1]&&(this.context=arguments[1]),"undefined"!=typeof arguments[2]&&(this.targetWindow=arguments[2]),this._kwEventId="A5KeyWatch"+this._kwIndx[0],this._kwIndx[0]++},on:function(){this._on||(0==this.targetWindow?($e.add(document.documentElement,"keydown",this._keyDown,this,!1,this._kwEventId),$e.add(document.documentElement,"keyup",this._keyUp,this,!1,this._kwEventId)):($e.add(this.targetWindow.document.documentElement,"keydown",this._keyDown,this,!1,this._kwEventId),$e.add(this.targetWindow.document.documentElement,"keyup",this._keyUp,this,!1,this._kwEventId)),this._on=!0)},off:function(){this._on&&($e.removeGroup(this._kwEventId),this._on=!1)},_keyDown:function(e,t){e=$e.getEvent(e);var i=e.charCode||e.keyCode;if(16==i||17==i||18==i)16==i?t.shift=!0:17==i?t.ctrl=!0:18==i&&(t.alt=!0);else{"undefined"!=typeof e.shiftKey&&(t.shift=e.shiftKey,t.ctrl=e.ctrlKey,t.alt=e.altKey),32==i?i="SPACE":13==i?i="ENTER":9==i?i="TAB":8==i?i="BACKSPACE":37==i?i="LEFT":38==i?i="UP":39==i?i="RIGHT":40==i?i="DOWN":27==i?i="ESCAPE":33==i?i="PAGEUP":34==i?i="PAGEDOWN":35==i?i="END":36==i?i="HOME":45==i?i="INSERT":46==i?i="DELETE":112==i?i="F1":113==i?i="F2":114==i?i="F3":115==i?i="F4":116==i?i="F5":117==i?i="F6":118==i?i="F7":119==i?i="F8":120==i?i="F9":121==i?i="F10":122==i?i="F11":123==i?i="F12":String.fromCharCode&&(i=String.fromCharCode(i).toUpperCase());var s="",a=!1;t.ctrl&&(s="CTRL+"),t.alt&&(s+="ALT+"),t.shift&&(s+="SHIFT+"),i=s+i;for(var n=0;n<t.keys.length;n++)if(t.keys[n].key.toUpperCase()==i){if(a="object"==typeof t.context?t.keys[n].handle.call(t.context):t.keys[n].handle(),1==a)return $e.stopEvent(e),!1;break}}},_keyUp:function(e,t){e=$e.getEvent(e);var i=e.charCode||e.keyCode;16==i?t.shift=!1:17==i?t.ctrl=!1:18==i&&(t.alt=!1)},_kwIndx:[0]},AUI.WaitDialog={setGlobal:function(e){$("AUIPageWaitDialog")&&document.body.removeChild($("AUIPageWaitDialog"));var t="undefined"!=typeof e.content?e.content:"Loading...",i="undefined"!=typeof e.className?e.className:"",s="undefined"!=typeof e.lockControl&&e.lockControl,a="undefined"!=typeof e.lockClassName?e.lockClassName:"";s&&AUI.LockUI.page(a,5e3,"wait");var n=document.createElement("div");n.id="AUIPageWaitDialog",n.onclick=$e.stopEvent,n.onmousedown=$e.stopEvent,n.onmouseup=$e.stopEvent,n.className=i,n.style.position="absolute",n.innerHTML=t,n.style.zIndex=5e3,document.body.appendChild(n);var o=AUI.u.getVPSize(),r=AUI.u.getVPScroll();n.style.top=Math.round(o.height/2-n.offsetHeight/2+r.y)+"px",n.style.left=Math.round(o.width/2-n.offsetWidth/2+r.x)+"px"},clearGlobal:function(){var e=$("AUIPageWaitDialog");e&&document.body.removeChild(e),AUI.LockUI.pageFree("wait")},addLocal:function(e,t){var i=$(e);if(void 0!=i){$(e+"_AUIWaitDialog")&&document.body.removeChild($(e+"_AUIWaitDialog"));var s="undefined"!=typeof t.content?t.content:"Loading...",a="undefined"!=typeof t.location?t.location:"element",n="undefined"!=typeof t.className?t.className:"",o="undefined"!=typeof t.lockControl&&t.lockControl,r="undefined"!=typeof t.lockClassName?t.lockClassName:"";o&&AUI.LockUI.element(i,r);var l=document.createElement("div");if(l.id=e+"_AUIWaitDialog",l.onclick=$e.stopEvent,l.onmousedown=$e.stopEvent,l.onmouseup=$e.stopEvent,l.className=n,l.style.position="absolute",l.innerHTML=s,l.style.zIndex=5e3,document.body.appendChild(l),"page"==a){var d=AUI.u.getVPSize(),h=AUI.u.getVPScroll();l.style.top=Math.round(d.height/2-l.offsetHeight/2+h.y)+"px",l.style.left=Math.round(d.width/2-l.offsetWidth/2+h.x)+"px"}else $po(l,i,19,0,0)}},clearLocal:function(e){$(e+"_AUIWaitDialog")&&document.body.removeChild($(e+"_AUIWaitDialog")),AUI.LockUI.elementFree(e)}},AUI.LockUI={element:function(e,t){e=$(e);var i=e.id+"_AUILockUI";$(i)&&document.body.removeChild($(i));var s=document.createElement("div");s.id=i,s.onclick=$e.stopEvent,s.onmousedown=$e.stopEvent,s.onmouseup=$e.stopEvent,s.className=t,s.style.position="absolute",document.body.appendChild(s),$po(s,e,6,0,0),s.style.width=e.offsetWidth+"px",s.style.height=e.offsetHeight+"px",AUI.LockUI._eles.push(e.id),delete s},_elementSize:function(e){return ele=$(e),node=$(e+"_AUILockUI"),!!node&&($po(node,ele,6,0,0),node.style.width=ele.offsetWidth+"px",void(node.style.height=ele.offsetHeight+"px"))},elementFree:function(e){e=$(e);var t=e.id+"_AUILockUI";$(t)&&document.body.removeChild($(t));var i=$u.a.find(AUI.LockUI._eles,e.id);i>-1&&(AUI.LockUI._eles=AUI.LockUI._eles.slice(0,i).concat(AUI.LockUI._eles.slice(i,AUI.LockUI._eles.length)))},page:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:-1,i="undefined"!=typeof arguments[2]&&arguments[2];if(i&&"number"==typeof this._c[i]&&this.pageFree(i),this._plLevel.push(t),this._plCN.push(e),i&&(this._c[i]=this._plLevel.length-1),$("AUILockUIPage")){var s=$("AUILockUIPage");return t==-1?s.style.zIndex="":s.style.zIndex=""+t,this._plLevel.length-1}var s=document.createElement("div");return s.id="AUILockUIPage",s.onclick=$e.stopEvent,s.onmousedown=$e.stopEvent,$e.add(s,"mouseup",function(e){$e.stopEvent(e),AUI.Drag._s.active&&AUI.Drag._endDrag(e),AUI.Resize._s.active&&AUI.Resize._endResize(e)}),s.className=e,s.style.position="absolute",s.style.position="fixed",s.style.top="0px",s.style.left="0px",s.style.right="0px",s.style.bottom="0px",A5.flags.supportsTouch&&$e.add(s,"touchmove",function(e){var t=$e.getTouches(e),i=!0;t&&t.length&&t.length>1&&(i=!1),i&&$e.preventDefault(e)}),t==-1?s.style.zIndex="":s.style.zIndex=""+t,document.body.insertBefore(s,document.body.firstChild),this._plLevel.length-1},_pageSize:function(){var e=$("AUILockUIPage");return!!e&&(e.style.width="0px",e.style.height="0px",void(document.all&&"Opera"!=navigator.appName?setTimeout(AUI.LockUI._pageSizeComplete,0):AUI.LockUI._pageSizeComplete()))},_pageSizeComplete:function(){var e=$("AUILockUIPage");if(!e)return!1;var t=document.documentElement.clientWidth,i=document.documentElement.clientHeight;t=$if(t<document.documentElement.scrollWidth,document.documentElement.scrollWidth,t),i=$if(i<document.documentElement.scrollHeight,document.documentElement.scrollHeight,i),e.style.width=t-2+"px",e.style.height=i-3+"px"},pageFree:function(){var e=$("AUILockUIPage");if(e){var t="undefined"!=typeof arguments[0]&&arguments[0];if(t){if("number"!=typeof this._c[t])return!1;this._plLevel.splice(this._c[t],1),this._plCN.splice(this._c[t],1);for(var i in this._c)this._c[i]>this._c[t]&&this._c[i]--;delete this._c[t]}else this._plLevel.pop(),this._plCN.pop();0==this._plLevel.length?document.body.removeChild($("AUILockUIPage")):(e.style.zIndex=""+this._plLevel[this._plLevel.length-1],e.className=this._plCN[this._plCN.length-1])}},_eles:[],_pageLocked:!1,_plLevel:[],_plCN:[],_c:{}},$e.add(window,"resize",function(){AUI.LockUI._pageLocked&&AUI.LockUI._pageSize();for(var e=0;e<AUI.LockUI._eles;e++)AUI.LockUI._elementSize(AUI.LockUI._eles[e])}),AUI.Drag={create:function(e,t){e=$(e);var i={dragElementId:"",coord:"page",snap:1,snapToCenter:!1,constrainX:!1,constrainY:!1};$u.o.assign(i,t),""==i.dragElementId&&(i.dragElementId=e.id),this._cacheSettings(e,i),$e.add(e,"mousedown",AUI.Drag._startDrag),e.unselectable="on",$e.add(e,"selectstart",function(e){return $e.stopEvent($e.getEvent(e)),!1}),$e.add(e,"dragstart",function(e){return $e.stopEvent($e.getEvent(e)),!1})},disable:function(e){$sa(e,"AUIDragDisable","true")},enable:function(e){$sa(e,"AUIDragDisable","false")},destroy:function(e){delete e.AUIDragHCoord,delete e.AUIDragHSnap,delete e.AUIDragHSnapToCenter,delete e.AUIDragHConstrainX,delete e.AUIDragHConstrainY,delete e.AUIDragHOnDragStart,delete e.AUIDragHWhileDrag,delete e.AUIDragHOnDragEnd,$e.remove(e,"mousedown",AUI.Drag._startDrag),$e.remove(e,"selectstart",function(e){var t=e||window.event;return $e.stopEvent(t),!1}),$e.remove(e,"dragstart",function(e){var t=e||window.event;return $e.stopEvent(t),!1})},_s:{},_cacheSettings:function(e,t){$sa(e,"AUIDragHCoord",t.coord),$sa(e,"AUIDragHSnap",t.snap),$sa(e,"AUIDragHSnapToCenter",t.snapToCenter),$sa(e,"AUIDragHConstrainX",t.constrainX),$sa(e,"AUIDragHConstrainY",t.constrainY),$sa(e,"AUIDragHDragElementId",t.dragElementId),e.AUIDragHOnDragStart="undefined"!=typeof t.onDragStart?t.onDragStart:"",e.AUIDragHWhileDrag="undefined"!=typeof t.whileDrag?t.whileDrag:"",e.AUIDragHOnDragEnd="undefined"!=typeof t.onDragEnd?t.onDragEnd:""},_retrieveSettings:function(e){AUI.Drag._s.coord=$ga(e,"AUIDragHCoord").toLowerCase(),AUI.Drag._s.snap=$ga(e,"AUIDragHSnap"),AUI.Drag._s.snapToCenter=$u.s.toBool(""+$ga(e,"AUIDragHSnapToCenter")),AUI.Drag._s.constrainX=$u.s.toBool(""+$ga(e,"AUIDragHConstrainX")),AUI.Drag._s.constrainY=$u.s.toBool(""+$ga(e,"AUIDragHConstrainY")),AUI.Drag._s.dragElementId=$ga(e,"AUIDragHDragElementId"),AUI.Drag._s.onDragStart=e.AUIDragHOnDragStart,AUI.Drag._s.whileDrag=e.AUIDragHWhileDrag,AUI.Drag._s.onDragEnd=e.AUIDragHOnDragEnd,AUI.Drag._s.constraintTop=0,AUI.Drag._s.constraintLeft=0,AUI.Drag._s.constraintBottom=Math.max(document.body.offsetHeight,document.documentElement.clientHeight),AUI.Drag._s.constraintRight=document.body.offsetWidth,AUI.Drag._s.offsetX=0,AUI.Drag._s.offsetY=0,AUI.Drag._s.x=0,AUI.Drag._s.y=0,AUI.Drag._s._snapOffsetX=0,AUI.Drag._s._snapOffsetY=0},_startDrag:function(e){$e.stopEvent(e),AUI.Drag._retrieveSettings(this),AUI.Drag._s.active=!0;var t=$(AUI.Drag._s.dragElementId);return"true"!=$ga(this,"AUIDragDisable")&&"true"!=$ga(t,"AUIDragDisable")&&($e.add(document,"mouseup",AUI.Drag._endDrag),"parent"==AUI.Drag._s.coord||"custom"==AUI.Drag._s.coord?$e.add(document,"mousemove",AUI.Drag._whileDragBound):$e.add(document,"mousemove",AUI.Drag._whileDrag),AUI.Drag._s.onDragStart.constructor==Function&&AUI.Drag._s.onDragStart(e,AUI.Drag._s),"parent"==AUI.Drag._s.coord&&(AUI.Drag._s.constraintBottom=t.parentNode.offsetHeight-t.offsetHeight,AUI.Drag._s.constraintRight=t.parentNode.offsetWidth-t.offsetWidth),AUI.Drag._s.snapToCenter&&(AUI.Drag._s._snapOffsetX=Math.round(t.offsetWidth/2),AUI.Drag._s._snapOffsetY=Math.round(t.offsetHeight/2),AUI.Drag._s.constraintTop=AUI.Drag._s.constraintTop-AUI.Drag._s._snapOffsetY,AUI.Drag._s.constraintLeft=AUI.Drag._s.constraintLeft-AUI.Drag._s._snapOffsetX,AUI.Drag._s.constraintBottom=AUI.Drag._s.constraintBottom+AUI.Drag._s._snapOffsetY,AUI.Drag._s.constraintRight=AUI.Drag._s.constraintRight+AUI.Drag._s._snapOffsetX),AUI.Drag._s.offsetX=e.clientX-t.offsetLeft,AUI.Drag._s.offsetY=e.clientY-t.offsetTop,!1)},_whileDrag:function(e){var t=e||window.event,i=$(AUI.Drag._s.dragElementId),s=t.clientY-AUI.Drag._s.offsetY,a=t.clientX-AUI.Drag._s.offsetX;s=Math.round(Math.round((s-AUI.Drag._s._snapOffsetY)/AUI.Drag._s.snap)*AUI.Drag._s.snap)+AUI.Drag._s._snapOffsetY,a=Math.round(Math.round((a-AUI.Drag._s._snapOffsetX)/AUI.Drag._s.snap)*AUI.Drag._s.snap)+AUI.Drag._s._snapOffsetX,AUI.Drag._s.constrainY||s==AUI.Drag._s.y||(i.style.top=s+"px"),AUI.Drag._s.constrainX||a==AUI.Drag._s.x||(i.style.left=a+"px"),AUI.Drag._s.x=a,AUI.Drag._s.y=s,AUI.Drag._s.whileDrag.constructor==Function&&(!AUI.Drag._s.constrainX&&a!=AUI.Drag._s.x||!AUI.Drag._s.constrainY&&s!=AUI.Drag._s.y)&&(AUI.Drag._s.x=a,AUI.Drag._s.y=s,AUI.Drag._s.whileDrag(t,AUI.Drag._s)),AUI.Drag._s.x=a,AUI.Drag._s.y=s},_whileDragBound:function(e){var t=e||window.event,i=$(AUI.Drag._s.dragElementId),s=Math.max(Math.min(t.clientY-AUI.Drag._s.offsetY,AUI.Drag._s.constraintBottom),AUI.Drag._s.constraintTop),a=Math.max(Math.min(t.clientX-AUI.Drag._s.offsetX,AUI.Drag._s.constraintRight),AUI.Drag._s.constraintLeft);s=Math.round(Math.round((s-AUI.Drag._s._snapOffsetY)/AUI.Drag._s.snap)*AUI.Drag._s.snap)+AUI.Drag._s._snapOffsetY,a=Math.round(Math.round((a-AUI.Drag._s._snapOffsetX)/AUI.Drag._s.snap)*AUI.Drag._s.snap)+AUI.Drag._s._snapOffsetX,AUI.Drag._s.constrainY||s==AUI.Drag._s.y||(i.style.top=s+"px"),AUI.Drag._s.constrainX||a==AUI.Drag._s.x||(i.style.left=a+"px"),AUI.Drag._s.whileDrag.constructor==Function&&(!AUI.Drag._s.constrainX&&a!=AUI.Drag._s.x||!AUI.Drag._s.constrainY&&s!=AUI.Drag._s.y)&&(AUI.Drag._s.x=a,AUI.Drag._s.y=s,AUI.Drag._s.whileDrag(t,AUI.Drag._s)),AUI.Drag._s.x=a,AUI.Drag._s.y=s},_endDrag:function(e){var t=e||window.event;$e.remove(document,"mouseup",AUI.Drag._endDrag),"parent"==AUI.Drag._s.coord||"custom"==AUI.Drag._s.coord?$e.remove(document,"mousemove",AUI.Drag._whileDragBound):$e.remove(document,"mousemove",AUI.Drag._whileDrag),AUI.Drag._s.onDragEnd.constructor==Function&&AUI.Drag._s.onDragEnd(t,AUI.Drag._s),AUI.Drag._s.active=!1}},AUI.Resize={create:function(e,t){e=$(e);var i={resizeElementId:"",snap:1,type:"br",lockRatio:!1,minWidth:1,minHeight:1,maxWidth:-1,maxHeight:-1};$u.o.assign(i,t),""==i.resizeElementId&&(i.resizeElementId=e.id),this._cacheSettings(e,i),$e.add(e,"mousedown",AUI.Resize._startResize),e.unselectable="on",$e.add(e,"selectstart",function(e){return $e.stopEvent($e.getEvent(e)),!1}),$e.add(e,"dragstart",function(e){return $e.stopEvent($e.getEvent(e)),!1})},disable:function(e){$sa(e,"AUIResizeDisable","true")},enable:function(e){$sa(e,"AUIResizeDisable","false")},destroy:function(e){delete e.AUIResizeHType,delete e.AUIResizeHSnap,delete e.AUIResizeHLockRatio,delete e.AUIResizeHMinWidth,delete e.AUIResizeHMinHeight,delete e.AUIResizeHMaxWidth,delete e.AUIResizeHMaxHeight,delete e.AUIResizeHOnResizeStart,delete e.AUIResizeHWhileResize,delete e.AUIResizeHOnResizeEnd,$e.remove(e,"mousedown",AUI.Resize._startResize),$e.remove(e,"selectstart",function(e){var t=e||window.event;return $e.stopEvent(t),!1}),$e.remove(e,"dragstart",function(e){var t=e||window.event;return $e.stopEvent(t),!1})},_s:{},_cacheSettings:function(e,t){$sa(e,"AUIResizeHType",t.type),$sa(e,"AUIResizeHSnap",t.snap),$sa(e,"AUIResizeHLockRatio",t.lockRatio),$sa(e,"AUIResizeHMinWidth",t.minWidth),$sa(e,"AUIResizeHMinHeight",t.minHeight),$sa(e,"AUIResizeHMaxWidth",t.maxWidth),$sa(e,"AUIResizeHMaxHeight",t.maxHeight),$sa(e,"AUIResizeHResizeElementId",t.resizeElementId),e.AUIResizeHOnResizeStart="undefined"!=typeof t.onResizeStart?t.onResizeStart:"",e.AUIResizeHWhileResize="undefined"!=typeof t.whileResize?t.whileResize:"",e.AUIResizeHOnResizeEnd="undefined"!=typeof t.onResizeEnd?t.onResizeEnd:""},_retrieveSettings:function(e){AUI.Resize._s.type=$ga(e,"AUIResizeHType").toLowerCase(),AUI.Resize._s.snap=$ga(e,"AUIResizeHSnap"),AUI.Resize._s.lockRatio=$u.s.toBool(""+$ga(e,"AUIResizeHLockRatio")),AUI.Resize._s.minWidth=Number($ga(e,"AUIResizeHMinWidth")),AUI.Resize._s.minHeight=Number($ga(e,"AUIResizeHMinHeight")),AUI.Resize._s.maxWidth=Number($ga(e,"AUIResizeHMaxWidth")),AUI.Resize._s.maxHeight=Number($ga(e,"AUIResizeHMaxHeight")),AUI.Resize._s.resizeElementId=$ga(e,"AUIResizeHResizeElementId"),AUI.Resize._s.onResizeStart=e.AUIResizeHOnResizeStart,AUI.Resize._s.whileResize=e.AUIResizeHWhileResize,AUI.Resize._s.onResizeEnd=e.AUIResizeHOnResizeEnd,AUI.Resize._s.initialMouseX=0,AUI.Resize._s.initialMouseY=0,AUI.Resize._s.x=0,AUI.Resize._s.y=0,AUI.Resize._s.width=0,AUI.Resize._s.height=0,AUI.Resize._s.initialX=0,AUI.Resize._s.initialY=0,AUI.Resize._s.initialWidth=0,AUI.Resize._s.initialHeight=0},_startResize:function(e){$e.stopEvent(e),AUI.Resize._retrieveSettings(this),AUI.Resize._s.active=!0;var t=$(AUI.Resize._s.resizeElementId);return"true"!=$ga(this,"AUIResizeDisable")&&"true"!=$ga(t,"AUIResizeDisable")&&($e.add(document,"mouseup",AUI.Resize._endResize),$e.add(document,"mousemove",AUI.Resize._whileResize),AUI.Resize._s.onResizeStart.constructor==Function&&AUI.Resize._s.onResizeStart(e,AUI.Resize._s),AUI.Resize._s.initialMouseX=e.clientX,AUI.Resize._s.initialMouseY=e.clientY,AUI.Resize._s.x=t.offsetLeft,AUI.Resize._s.y=t.offsetTop,AUI.Resize._s.initialX=AUI.Resize._s.x,AUI.Resize._s.initialY=AUI.Resize._s.y,AUI.Resize._s.width=t.offsetWidth,AUI.Resize._s.height=t.offsetHeight,AUI.Resize._s.initialWidth=AUI.Resize._s.width,AUI.Resize._s.initialHeight=AUI.Resize._s.height,!1)},_whileResize:function(e){var t=e||window.event,i=$(AUI.Resize._s.resizeElementId),s=!1,a=t.clientX-AUI.Resize._s.initialMouseX,n=t.clientY-AUI.Resize._s.initialMouseY;AUI.Resize._s.lockRatio&&(a=Math.max(a,n),n=a),AUI.Resize._s.type.indexOf("l")!=-1&&(a*=-1),AUI.Resize._s.type.indexOf("t")!=-1&&(n*=-1),AUI.Resize._s.type.indexOf("c")==-1&&AUI.Resize._s.type.indexOf("h")==-1||(a=2*a),AUI.Resize._s.type.indexOf("c")==-1&&AUI.Resize._s.type.indexOf("v")==-1||(n=2*n);var o=Math.round((AUI.Resize._s.initialWidth+a)/AUI.Resize._s.snap)*AUI.Resize._s.snap,r=Math.round((AUI.Resize._s.initialHeight+n)/AUI.Resize._s.snap)*AUI.Resize._s.snap;o=Math.max(o,AUI.Resize._s.minWidth),r=Math.max(r,AUI.Resize._s.minHeight),AUI.Resize._s.maxWidth>AUI.Resize._s.minWidth&&(o=Math.min(o,AUI.Resize._s.maxWidth)),AUI.Resize._s.maxHeight>AUI.Resize._s.minHeight&&(r=Math.min(r,AUI.Resize._s.maxHeight)),o!=AUI.Resize._s.width&&(s=!0,AUI.Resize._s.type.indexOf("l")!=-1?(s=!0,i.style.width=o+"px",i.style.left=AUI.Resize._s.initialX-(o-AUI.Resize._s.initialWidth)+"px"):AUI.Resize._s.type.indexOf("r")!=-1?(s=!0,i.style.width=o+"px"):AUI.Resize._s.type.indexOf("c")==-1&&AUI.Resize._s.type.indexOf("h")==-1||(s=!0,i.style.width=o+"px",i.style.left=AUI.Resize._s.initialX-Math.round((o-AUI.Resize._s.initialWidth)/2)+"px")),r!=AUI.Resize._s.height&&(AUI.Resize._s.type.indexOf("t")!=-1?(s=!0,i.style.height=r+"px",i.style.top=AUI.Resize._s.initialX-(r-AUI.Resize._s.initialHeight)+"px"):AUI.Resize._s.type.indexOf("b")!=-1?(s=!0,i.style.height=r+"px"):AUI.Resize._s.type.indexOf("c")==-1&&AUI.Resize._s.type.indexOf("v")==-1||(s=!0,i.style.height=r+"px",i.style.top=AUI.Resize._s.initialX-Math.round((r-AUI.Resize._s.initialHeight)/2)+"px")),s&&(AUI.Resize._s.x=i.offsetLeft,AUI.Resize._s.x=i.offsetHeight,AUI.Resize._s.width=o,AUI.Resize._s.height=r,AUI.Resize._s.whileResize.constructor==Function&&AUI.Resize._s.whileResize(t,AUI.Resize._s))},_endResize:function(e){var t=e||window.event;$e.stopEvent(t),$e.remove(document,"mouseup",AUI.Resize._endResize),$e.remove(document,"mousemove",AUI.Resize._whileResize),AUI.Resize._s.onResizeEnd.constructor==Function&&AUI.Resize._s.onResizeEnd(t,AUI.Resize._s),AUI.Resize._s.active=!1}},a5_AJAX_autoSuggest=Class.create(),a5_AJAX_autoSuggest.prototype={initialize:function(e,t){this.targetId=e,$u.o.assign(this,{url:"",data:"",dynamicHandle:0,minimum:1,width:"",height:"",contextControls:0,columns:0,className:"",item:{className:"",selectedClassName:"",keyClassName:""},title:{className:"",location:"none"},onSelect:0}),"undefined"!=typeof a5_AJAX_autoSuggestDefaults&&$u.o.assign(this,a5_AJAX_autoSuggestDefaults),$u.o.assign(this,t),$e.add(e,"focus",this._focus,this,!0),$e.add(e,"blur",this._hideMatchList,this,!0),$e.add(e,"keyup",this._getList,this,!0),this._kw=new AUI.KeyWatcher([{key:"enter",handle:this._selectCurValue},{key:"up",handle:this._prevValue},{key:"down",handle:this._nextValue}],this),this._listValue=0,this._listTotal=0,this._list=[],this._parseColumns();var i=document.createElement("div");i.id=this.targetId+".LIST",i.className=this.className,i.style.position="absolute",i.style.display="none",i.style.height=this.height,i.style.width=this.width,i.style.overflow="auto",i.style.zIndex="10000",$(e).parentNode.insertBefore(i,$(e))},_parseColumns:function(e){if(this.columns.constructor==Array){for(var t=!1,i="",s=0;s<this.columns.length;s++)"object"==typeof this.columns[s]?($u.o.assign(this.columns[s],this._defaultColumn,!0),!t&&this.columns[s].key?t=!0:t&&this.columns[s].key&&(this.columns[s].key=!1)):(i=this.columns[s],this.columns[s]=new Object,$u.o.assign(this.columns[s],this._defaultColumn),this.columns[s].title=""+i);t||(this.columns[0].key=!0)}else{var i=this.columns;this.columns=new Array,$u.o.assign(this.columns[0],this._defaultColumn),this.columns[0].title=""+i,this.columns[0].key=!0}},_focus:function(e){e=$e.getEvent(e);var t=$(this.targetId+".LIST");$po(t,$(this.targetId),14,2,0),this._kw.on()},_hideMatchList:function(e){$(this.targetId+".LIST");classInst=this,setTimeout(function(){classInst._hideMatchListComplete()},400)},_hideMatchListComplete:function(){var e=$(this.targetId+".LIST");
e.style.display="none",this._kw.off()},_selectValue:function(e,t){var i=Number(this.getAttribute("A5SuggestIndex")),s="undefined"!=typeof t._list[i]?t._list[i]:"",a=s;if(a.constructor==Array){for(var n=0,o=0;o<t.columns.length;o++)if(t.columns[o].key){n=o;break}a=a[n]}""!=a&&($(t.targetId).value=a),t.onSelect.constructor==Function&&t.onSelect(s)},_selectCurValue:function(e){var t="undefined"!=typeof this._list[this._listValue]?this._list[this._listValue]:"",i=t;if(i.constructor==Array){for(var s=0,a=0;a<this.columns.length;a++)if(this.columns[a].key){s=a;break}i=i[s]}""!=i&&($(this.targetId).value=i),this.onSelect.constructor==Function&&this.onSelect(t);var n=$(this.targetId+".LIST");n.style.display="none"},_nextValue:function(e){this._listValue<this._listTotal-1&&($(this.targetId+".LIST."+this._listValue).className=this.item.className,this._listValue=this._listValue+1,$(this.targetId+".LIST."+this._listValue).className=this.item.selectedClassName,this._scrollToEntry())},_prevValue:function(e){this._listValue>0&&($(this.targetId+".LIST."+this._listValue).className=this.item.className,this._listValue=this._listValue-1,$(this.targetId+".LIST."+this._listValue).className=this.item.selectedClassName,this._scrollToEntry())},_scrollToEntry:function(){var e=$(this.targetId+".LIST."+this._listValue),t=$(this.targetId+".LIST");t.scrollTop>e.offsetTop?t.scrollTop=e.offsetTop-2:t.scrollTop+t.offsetHeight<e.offsetTop+e.offsetHeight&&(t.scrollTop=e.offsetTop+e.offsetHeight-t.offsetHeight)},_getList:function(e){e=$e.getEvent(e);var t=e.charCode||e.keyCode;return 13!=t&&37!=t&&38!=t&&39!=t&&40!=t&&void(this.delay>0?(clearTimeout(this._delayTO),classInst=this,this._delayTO=setTimeout(function(){classInst._getListComplete(),delete classInst},this.delay)):this._getListComplete())},_getListComplete:function(){var e=$(this.targetId+".LIST"),t=$(this.targetId);if(t.value.length<this.minimum)return e.style.display="none","";if(this.dynamicHandle.constructor==Function){var i=this.dynamicHandle(t.value);return"undefined"!=typeof i&&i.constructor==Array&&this.populateList(i),""}var s=this.data;if(""!=s&&(s+="&"),this.contextControls.constructor==Array)for(var a=new Object,n="",o=0;o<this.contextControls.length;o++)a=$(this.contextControls[o]),n=a.tagName?a.name:a[0].name,""!=n&&(s=s+a5_AJAX_Form_SubmitValueParam(n,$gvs(a))+"&");s+=a5_AJAX_Form_SubmitValueParam(t.name,t.value),a5_AJAX_Callback(this.url,s)},populateList:function(e){var t=$(this.targetId+".LIST");if(this._list=e,this._listTotal=e.length,e.length>0){var i=Array();if(i[i.length]='<table id="'+this.targetId+'.LISTTABLE" cellspacing="0">',"top"==this.title.location||"both"==this.title.location){i[i.length]='<tr class="'+this.title.className+'">';for(var s=0;s<this.columns.length;s++)i[i.length]="<td>"+this.columns[s].title+"</td>";i[i.length]="</tr>"}if(e[0].constructor==Array)for(var s=0;s<e.length;s++){i[i.length]='<tr id="'+this.targetId+".LIST."+s+'" A5SuggestIndex="'+s+'" class="'+$if(0==s,this.item.selectedClassName,this.item.className)+'">';for(var a=0;a<this.columns.length;a++)this.columns[a].key?i[i.length]='<td class="'+this.item.keyClassName+'">'+e[s][a]+"</td>":i[i.length]="<td>"+e[s][a]+"</td>";i[i.length]="</tr>"}else for(var s=0;s<e.length;s++)i[i.length]='<tr id="'+this.targetId+".LIST."+s+'" A5SuggestIndex="'+s+'" class="'+$if(0==s,this.item.selectedClassName,this.item.className)+'">',i[i.length]='<td class="'+this.item.keyClassName+'">'+e[s]+"</td>",i[i.length]="</tr>";if("bottom"==this.title.location||"both"==this.title.location){i[i.length]='<tr class="'+this.title.className+'">';for(var s=0;s<this.columns.length;s++)i[i.length]="<td>"+this.columns[s].title+"</td>";i[i.length]="</tr>"}i[i.length]="</table>",t.innerHTML=i.join("");for(var s=0;s<e.length;s++)$e.add($(this.targetId+".LIST."+s),"click",this._selectValue,this);t.style.display="block",t.style.height=this.height;var n=$(this.targetId+".LISTTABLE");t.style.display="block",t.style.height=this.height,t.offsetHeight>n.offsetHeight&&(t.style.height=""),""!=this.width?t.clientWidth>n.offsetWidth&&(n.style.width=t.clientWidth+"px"):(t.style.width=n.offsetWidth+22+"px",t.clientWidth>n.offsetWidth&&(n.style.width=t.clientWidth+"px")),this._scrollToEntry()}else t.style.display="none";this._listValue=0},_defaultColumn:{title:"",type:"text",key:!1}},a5_AJAX_editCombo=Class.create(),a5_AJAX_editCombo.prototype={initialize:function(e,t,i){this.targetId=e,this.buttonId=t,$u.o.assign(this,{data:[],width:"",height:"",columns:0,className:"",item:{className:"",selectedClassName:"",keyClassName:""},title:{className:"",location:"none"},onSelect:0}),"undefined"!=typeof a5_AJAX_editComboDefaults&&$u.o.assign(this,a5_AJAX_editComboDefaults),$u.o.assign(this,i),$e.add(e,"focus",this._focus,this,!0),$e.add(e,"blur",this._hideMatchList,this,!0),$e.add(e,"keyup",this._autoComplete,this,!0),$e.add(t,"click",this._getFullList,this,!0),this._kw=new AUI.KeyWatcher([{key:"enter",handle:this._selectCurValue},{key:"up",handle:this._prevValue},{key:"down",handle:this._nextValue}],this),this._listValue=0,this._listTotal=0,this._list=[],this._keyIndex=-1,this._timeout=0,this._hasFocus=!1,this._parseColumns();var s=document.createElement("div");s.id=this.targetId+".LIST",s.className=this.className,s.style.position="absolute",s.style.display="none",s.style.width=this.width,s.style.height=this.height,s.style.overflow="auto",s.style.zIndex="10000",$e.add(s,"mousedown",this._stopBlur,this,!0),$e.add(s,"focus",this._stopBlur,this,!0),$(e).parentNode.insertBefore(s,$(e))},fixButtonPosition:function(){var e="undefined"!=typeof arguments[0]?arguments[0]:-3,t="undefined"!=typeof arguments[1]?arguments[1]:0,i="undefined"!=typeof arguments[2]?arguments[2]:-2,s="undefined"!=typeof arguments[3]?arguments[3]:0,a=$(this.targetId),n=$(this.buttonId);n.style.height=a.offsetHeight+t+"px",n.style.width=a.offsetHeight+e+"px",n.style.left=$gpl(a)+a.offsetWidth-$gpl(n)+i+"px",n.style.top=$gpt(a)-$gpt(n)+s+"px"},_stopBlur:function(e){return e=$e.getEvent(e),$e.stopEvent(e),this._timeout=clearTimeout(this._timeout),this._hasFocus=!0,$(this.targetId).focus(),!1},_parseColumns:function(e){if(this.columns.constructor==Array){for(var t=!1,i="",s=0;s<this.columns.length;s++)"object"==typeof this.columns[s]?($u.o.assign(this.columns[s],this._defaultColumn,!0),!t&&this.columns[s].key?(t=!0,this._keyIndex=s):t&&this.columns[s].key&&(this.columns[s].key=!1)):(i=this.columns[s],this.columns[s]=new Object,$u.o.assign(this.columns[s],this._defaultColumn),this.columns[s].title=""+i);t||(this.columns[0].key=!0,this._keyIndex=0)}else{var i=this.columns;this.columns=new Array,this.columns[0]=new Object,$u.o.assign(this.columns[0],this._defaultColumn),this.columns[0].title=""+i,this.columns[0].key=!0}},_focus:function(e){if(0==this._hasFocus){e=$e.getEvent(e);var t=$(this.targetId+".LIST");$po(t,$(this.targetId),14,2,0),this._kw.on(),this._hasFocus=!0}},_hideMatchList:function(e){$(this.targetId+".LIST");classInst=this,this._hasFocus=!1,this._timeout=setTimeout(function(){classInst._hideMatchListComplete()},400)},_hideMatchListComplete:function(){var e=$(this.targetId+".LIST");e.style.display="none",this._kw.off()},_selectValue:function(e,t){var i=Number(this.getAttribute("A5EditComboIndex")),s="undefined"!=typeof t._list[i]?t._list[i]:"",a=s;if(a.constructor==Array){for(var n=0,o=0;o<t.columns.length;o++)if(t.columns[o].key){n=o;break}a=a[n]}""!=a&&($(t.targetId).value=a),t.onSelect.constructor==Function&&t.onSelect(s);var r=$(t.targetId+".LIST");r.style.display="none",t._stopBlur(e)},_selectCurValue:function(e){var t="undefined"!=typeof this._list[this._listValue]?this._list[this._listValue]:"",i=t;if(i.constructor==Array){for(var s=0,a=0;a<this.columns.length;a++)if(this.columns[a].key){s=a;break}i=i[s]}""!=i&&($(this.targetId).value=i),this.onSelect.constructor==Function&&this.onSelect(t);var n=$(this.targetId+".LIST");n.style.display="none"},_nextValue:function(e){this._listValue<this._listTotal-1&&($(this.targetId+".LIST."+this._listValue).className=this.item.className,this._listValue=this._listValue+1,$(this.targetId+".LIST."+this._listValue).className=this.item.selectedClassName,this._scrollToEntry())},_prevValue:function(e){this._listValue>0&&($(this.targetId+".LIST."+this._listValue).className=this.item.className,this._listValue=this._listValue-1,$(this.targetId+".LIST."+this._listValue).className=this.item.selectedClassName,this._scrollToEntry())},_scrollToEntry:function(){var e=$(this.targetId+".LIST."+this._listValue),t=$(this.targetId+".LIST");t.scrollTop>e.offsetTop?t.scrollTop=e.offsetTop-2:t.scrollTop+t.offsetHeight<e.offsetTop+e.offsetHeight&&(t.scrollTop=e.offsetTop+e.offsetHeight-t.offsetHeight)},_autoComplete:function(e){e=$e.getEvent(e);var t=e.charCode||e.keyCode;if(13==t||37==t||38==t||39==t||40==t)return!1;var i=$(this.targetId+".LIST"),s=$(this.targetId);if(s.value.length<this.minimum)return i.style.display="none","";var a=new Array,n=s.value;if(n=n.toLowerCase(),curValLen=n.length,this.data[0].constructor!=Array&&curValLen>0)for(var o=0;o<this.data.length;o++)n==this.data[o].substr(0,curValLen).toLowerCase()&&(a[a.length]=this.data[o]);else if(curValLen>0)for(var o=0;o<this.data.length;o++)n==this.data[o][this._keyIndex].substr(0,curValLen).toLowerCase()&&(a[a.length]=this.data[o]);this._getList(a)},_getFullList:function(){var e=this.data;clearTimeout(this._timeout),this._timeout=0,this._kw.off(),$(this.targetId).focus(),this._getList(e)},_getList:function(e){var t=$(this.targetId+".LIST");this._list=e,this._listTotal=e.length,this._listValue=0;var i=$(this.targetId).value;if(this._list.length>0){var s=Array();if(s[s.length]='<table id="'+this.targetId+'.LISTTABLE" id="'+this.targetId+'.LIST.TABLE" cellspacing="0">',"top"==this.title.location||"both"==this.title.location){s[s.length]='<tr class="'+this.title.className+'">';for(var a=0;a<this.columns.length;a++)s[s.length]="<td>"+this.columns[a].title+"</td>";s[s.length]="</tr>"}if(e[0].constructor==Array)for(var a=0;a<e.length;a++){s[s.length]='<tr id="'+this.targetId+".LIST."+a+'" A5EditComboIndex="'+a+'" class="'+this.item.className+'">';for(var n=0;n<this.columns.length;n++)this.columns[n].key?(i==e[a][n]&&(this._listValue=a),s[s.length]='<td class="'+this.item.keyClassName+'">'+e[a][n]+"</td>"):s[s.length]="<td>"+e[a][n]+"</td>";s[s.length]="</tr>"}else for(var a=0;a<e.length;a++)i==e[a]&&(this._listValue=a),s[s.length]='<tr id="'+this.targetId+".LIST."+a+'" A5EditComboIndex="'+a+'" class="'+this.item.className+'">',s[s.length]='<td class="'+this.item.keyClassName+'">'+e[a]+"</td>",s[s.length]="</tr>";if("bottom"==this.title.location||"both"==this.title.location){s[s.length]='<tr class="'+this.title.className+'">';for(var a=0;a<this.columns.length;a++)s[s.length]="<td>"+this.columns[a].title+"</td>";s[s.length]="</tr>"}s[s.length]="</table>",t.innerHTML=s.join(""),$(this.targetId+".LIST."+this._listValue).className=this.item.selectedClassName;for(var a=0;a<e.length;a++)$e.add($(this.targetId+".LIST."+a),"click",this._selectValue,this);t.style.height=this.height;var o=$(this.targetId+".LISTTABLE");t.style.display="block",t.style.height=this.height,t.offsetHeight>o.offsetHeight&&(t.style.height=""),""!=this.width?t.clientWidth>o.offsetWidth&&(o.style.width=t.clientWidth+"px"):(t.style.width=o.offsetWidth+22+"px",t.clientWidth>o.offsetWidth&&(o.style.width=t.clientWidth+"px")),this._scrollToEntry()}else t.style.display="none"},_defaultColumn:{title:"",type:"text",key:!1}},a5_AJAX_tree=Class.create(),a5_AJAX_tree.prototype={initialize:function(e,t,i){this.contId=e;var s={inputId:"",focusClassName:"",multiple:!1,separator:".",loadingMessage:"Loading...",dynamicDataURL:"",dynamicDataHandle:"",node:{className:"",selectedClassName:"",labelClassName:"",icon:"",expandedIcon:"",collapsedIcon:"",leaf:{firstImage:"",image:"",lastImage:""},branch:{firstExpandedImage:"",firstCollapsedImage:"",firstExpandedHoverImage:"",firstCollapsedHoverImage:"",expandedImage:"",collapsedImage:"",expandedHoverImage:"",collapsedHoverImage:"",lastExpandedImage:"",lastCollapsedImage:"",lastExpandedHoverImage:"",lastCollapsedHoverImage:""}},branch:{className:"",lineImage:"",nullImage:""},onFocus:0,onBlur:0,onRightClick:0,onNodeSelect:0,onNodeClick:0,onNodeExpand:0,onNodeCollapse:0,selection:[],value:[],_hasFocus:!1};$u.o.assign(s,i),"undefined"!=typeof a5_AJAX_treeDefaults&&$u.o.assign(s,a5_AJAX_treeDefaults),""==s.node.collapsedIcon&&(s.node.collapsedIcon=s.node.icon),""==s.node.expandedIcon&&(s.node.expandedIcon=s.node.collapsedIcon),""==s.node.selectedCollapsedIcon&&(s.node.selectedCollapsedIcon=s.node.selectedIcon),""==s.node.selectedExpandedIcon&&(s.node.selectedExpandedIcon=s.node.selectedCollapsedIcon),""==s.branch.lineImage&&(s.branch.lineImage=s.branch.nullImage),""==s.node.leaf.image&&(s.node.leaf.image=s.branch.nullImage),""==s.node.branch.expandedImage&&(s.node.branch.expandedImage=s.branch.nullImage),""==s.node.branch.collapsedImage&&(s.node.branch.collapsedImage=s.branch.nullImage),""==s.node.leaf.firstImage&&(s.node.leaf.firstImage=s.node.leaf.image),""==s.node.leaf.lastImage&&(s.node.leaf.lastImage=s.node.leaf.image),""==s.node.branch.firstExpandedImage&&(s.node.branch.firstExpandedImage=s.node.branch.expandedImage),""==s.node.branch.lastExpandedImage&&(s.node.branch.lastExpandedImage=s.node.branch.expandedImage),""==s.node.branch.firstCollapsedImage&&(s.node.branch.firstCollapsedImage=s.node.branch.collapsedImage),""==s.node.branch.lastCollapsedImage&&(s.node.branch.lastCollapsedImage=s.node.branch.collapsedImage),""==s.node.branch.firstExpandedHoverImage&&(s.node.branch.firstExpandedHoverImage=s.node.branch.expandedHoverImage),""==s.node.branch.lastExpandedHoverImage&&(s.node.branch.lastExpandedHoverImage=s.node.branch.expandedHoverImage),""==s.node.branch.firstCollapsedHoverImage&&(s.node.branch.firstCollapsedHoverImage=s.node.branch.collapsedHoverImage),""==s.node.branch.lastCollapsedHoverImage&&(s.node.branch.lastCollapsedHoverImage=s.node.branch.collapsedHoverImage),$u.o.assign(this,s),this.populate(t),this._keyWatch=new AUI.KeyWatcher([{key:"up",handle:this._keyPrevNode},{key:"down",handle:this._keyNextNode},{key:"left",handle:this._keyBranchNode},{key:"right",handle:this._keyChildNode},{key:"enter",handle:this._keyEnter},{key:"tab",handle:this._blur},{key:"shift+tab",handle:this._blur}],this);var a=$(e),n=document.createElement("input");n.id=e+".FOCUSCATCHER",n.readonly=!0,n.style.position="absolute",n.style.top="-20px",n.style.left="-20px",n.style.height="1px",n.style.width="1px",n.style.fontSize="0px",$e.add(n,"focus",this._focus,this,!0),$e.add(a,"click",this._focus,this,!0),$e.add(a,"contextmenu",this._rClick,this,!0),a.parentNode.insertBefore(n,a)},populate:function(e){this.data=this._expandTreeData(e);var t=this._generateHTMLNodes([],[],this.data,!0,"");t.id=this.contId+".TREE";var i=$(this.contId);i.innerHTML="",i.insertBefore(t,i.lastChild)},populateNode:function(e,t){t=this._expandTreeData(t);var i=new Array;i[i.length]=$if(e[0]==this.data.length-1,this.branch.nullImage,this.branch.lineImage);for(var s=this.data[e[0]],a=1;a<e.length;a++)i[a]=$if(e[a]==s.children.length-1,this.branch.nullImage,this.branch.lineImage),s=s.children[e[a]];s.children=t,s.location=e,s.expanded=!0;var n=this._generateHTMLNodes(e,i,t,!0,s.branchClassName);$(this.contId+"."+e.join(".")).appendChild(n);var o=$(this.contId+"."+s.location.join(".")+".LABEL").previousSibling;$e.remove(o,"mouseup",this._clickToggleBranch),$e.add(o,"mouseup",this._clickToggleBranch,this),""==this.node.branch.collapsedHoverImage&&""==s.collapsedHoverImage||($e.remove(o,"mouseover",this._nodeImageMouseOver),$e.remove(o,"mouseout",this._nodeImageMouseOut),$e.add(o,"mouseover",this._nodeImageMouseOver,this),$e.add(o,"mouseout",this._nodeImageMouseOut,this)),0==s.location[s.location.length-1]&&1==s.location.length?o.src=this._gDef(s.expandedImage,this.node.branch.firstExpandedImage):s.isLast?o.src=this._gDef(s.expandedImage,this.node.branch.lastExpandedImage):o.src=this._gDef(s.expandedImage,this.node.branch.expandedImage)},getDataNode:function(e){if(0==e.length)return 0;var t=this.data[e[0]];if("number"==typeof e[0])var t=this.data[e[0]],i=[e[0]];else for(var s=0;s<this.data.length;s++)if(this.data[s].value.toLowerCase()==String(e[0]).toLowerCase()){var t=this.data[s],i=[s];break}for(var s=1;s<e.length;s++)if("number"==typeof e[s])t=t.children[e[s]],i[i.length]=e[s];else for(var a=0;a<t.children.length;a++)if(t.children[a].value.toLowerCase()==String(e[s]).toLowerCase()){t=t.children[a],i[i.length]=a;break}return t.location=i,t},scrollToNode:function(e){var t=this.contId+"."+e.location.join(".")+".LABEL";if($(t)){var i=$(t),s=$(this.contId);s.scrollTop>i.offsetTop-2*i.parentNode.offsetHeight?s.scrollTop=i.offsetTop-2*i.parentNode.offsetHeight:s.scrollTop+s.offsetHeight<i.offsetTop&&(s.scrollTop=i.offsetTop+i.parentNode.offsetHeight-s.offsetHeight),s.scrollLeft=i.offsetLeft-40}},setValue:function(){this._deselectAll();var e="",t=new Object,i=0,s=0,a=arguments.length-1;this.multiple&&(a=0);for(var n=a;n<arguments.length;n++)t=0,arguments[n].constructor==Array?t=this.getDataNode(arguments[n]):(s=String(arguments[n]).split(this.separator),s.length>1?t=this.getDataNode(s):(i=new Array,this._getDataNodeFromValue(arguments[n],this.data,i),i.reverse(),t=this.getDataNode(i))),"object"==typeof t&&(e=this._gDef(t.selectedClassName,this.node.selectedClassName),""!=e&&$acn($(this.contId+"."+t.location.join(".")).firstChild,e),this.selection[this.selection.length]=t)},_expandTreeData:function(e){for(var t=new Object,i=0;i<e.length;i++)"object"!=typeof e[i]?(t={html:""+$u.s.tran(e[i],["<",">"],["&lt;","&gt;"]),value:""+e[i]},$u.o.assign(t,this._defaultNode,!0),e[i]=t):("undefined"!=typeof e[i].value&&(e[i].defaultValue=!1),$u.o.assign(e[i],this._defaultNode,!0),""==e[i].value&&""!=e[i].html?e[i].value=e[i].html:""==e[i].html&&""!=e[i].value&&(e[i].html=$u.s.tran(e[i].value,["<",">"],["&lt;","&gt;"])),e[i].children.constructor==Array&&(e[i].children=this._expandTreeData(e[i].children))),i==e.length-1?e[i].isLast=!0:e[i].isLast=!1;return e},_getPrevVisDataNode:function(e){for(var t=new Array,i=0;i<e.location.length;i++)t[i]=e.location[i];if(0==t[t.length-1])return t.pop(),this.getDataNode(t);t[t.length-1]--;for(var s=this.getDataNode(t);s.expanded;)t.push(s.children.length-1),s=this.getDataNode(t);return s},_getNextVisDataNode:function(e){for(var t=new Array,i=0;i<e.location.length;i++)t[i]=e.location[i];if(e.isLast&&!e.expanded){if(t.pop(),0==t.length)return!1;for(var s=this.getDataNode(t);s.isLast;){if(t.pop(),0==t.length)return!1;s=this.getDataNode(t)}return t[t.length-1]++,this.getDataNode(t)}return e.expanded?(t[t.length]=0,this.getDataNode(t)):(t[t.length-1]++,this.getDataNode(t))},_getDataNodeFromValue:function(e,t,i){for(var s=0;s<t.length;s++){if(t[s].value==e){i[0]=s;break}if(t[s].children.constructor==Array&&this._getDataNodeFromValue(e,t[s].children,i),i.length>0){i.push(s);break}}},_getDataNodeValue:function(e){if(e.defaultValue){for(var t=new Object,i=new Array,s="",a=0;a<e.location.length;a++)i[a]=e.location[a];for(var a=i.length-1;a>=0;a--)t=this.getDataNode(i),s=$if(0!=a,this.separator,"")+t.value+s,i.pop();return s}return e.value},_generateHTMLNodes:function(e,t,i,s,a){var n=document.createElement("ul"),o=new Object,r=new Object,l=new Object,d=new Object,h=(new Array,new Array),c=e.join("."),u="",f=!1,p="";n.className=this._gDef(a,this.branch.className),n.style.margin="0px",n.style.padding="0px",n.style.listStyle="none",s||(n.style.display="none"),n.unselectable="on";for(var m=0;m<i.length;m++){u=$if(""!=c,this.contId+"."+c+"."+m,this.contId+"."+m),o=document.createElement("li"),o.style.margin="0px",o.style.padding="0px",o.id=u,o.setAttribute("A5AJAXTreeNodeLocation",$if(""!=c,c+"."+m,m)),o.unselectable="on",r=document.createElement("div"),r.className=this._gDef(i[m].className,this.node.className),r.style.whiteSpace="nowrap",r.unselectable="on",m==i.length-1&&(f=!0);for(var _=0;_<t.length;_++)d=document.createElement("img"),d.src=t[_],d.style.verticalAlign="middle",d.align="absmiddle",r.appendChild(d);l=document.createElement("a"),l.id=u+".LABEL",l.tabIndex=1,l.href="#",$e.add(l,"mouseup",this._clickNode,this),l.className=this._gDef(i[m].labelClassName,this.node.labelClassName),l.unselectable="on","object"==typeof i[m].children||"string"==typeof i[m].children?(i[m].children.constructor!=Array&&(i[m].expanded=!1),d=document.createElement("img"),i[m].expanded?(p=this._gDef(i[m].expandedIcon,this.node.expandedIcon),0==m&&0==e.length?d.src=this._gDef(i[m].expandedImage,this.node.branch.firstExpandedImage):f?d.src=this._gDef(i[m].expandedImage,this.node.branch.lastExpandedImage):d.src=this._gDef(i[m].expandedImage,this.node.branch.expandedImage)):(p=this._gDef(i[m].collapsedIcon,this.node.collapsedIcon),0==m&&0==e.length?d.src=this._gDef(i[m].collapsedImage,this.node.branch.firstCollapsedImage):f?d.src=this._gDef(i[m].collapsedImage,this.node.branch.lastCollapsedImage):d.src=this._gDef(i[m].collapsedImage,this.node.branch.collapsedImage)),""==this.node.branch.collapsedHoverImage&&""==i[m].collapsedHoverImage||($e.add(d,"mouseover",this._nodeImageMouseOver,this),$e.add(d,"mouseout",this._nodeImageMouseOut,this)),d.style.verticalAlign="middle",d.align="absmiddle",$e.add(d,"mouseup",this._clickToggleBranch,this),r.appendChild(d),""!=p?l.innerHTML='<img id="'+u+'.LABELICON" src="'+p+'" style="border: none" align="absmiddle" /> '+i[m].html:l.innerHTML=i[m].html,r.appendChild(l),i[m].children.constructor==Array?(0==e.length?(tempNodeLocs=new Array,h=new Array):(tempNodeLocs=e.concat([]),h=t.concat([])),tempNodeLocs[tempNodeLocs.length]=m,h[h.length]=$if(f,this.branch.nullImage,this.branch.lineImage),o.appendChild(r),o.appendChild(this._generateHTMLNodes(tempNodeLocs,h,i[m].children,i[m].expanded,i[m].branchClassName))):o.appendChild(r)):(d=document.createElement("img"),0==m&&0==e.length?d.src=this._gDef(i[m].image,this.node.leaf.firstImage):f?d.src=this._gDef(i[m].image,this.node.leaf.lastImage):d.src=this._gDef(i[m].image,this.node.leaf.image),d.style.verticalAlign="middle",d.align="absmiddle",r.appendChild(d),p=this._gDef(i[m].icon,this.node.icon),""!=p?l.innerHTML='<img id="'+u+'.LABELICON" src="'+p+'" style="border: none" align="absmiddle" /> '+i[m].html:l.innerHTML=i[m].html,r.appendChild(l),o.appendChild(r)),n.appendChild(o)}return n},_clickToggleBranch:function(e,t){for(var i=this.parentNode.parentNode,s=String(i.getAttribute("A5AJAXTreeNodeLocation")).split("."),a=0;a<s.length;a++)s[a]=Number(s[a]);var n=t.getDataNode(s,!1);t._toggleBranch(n,!0)},_toggleBranch:function(e){if(e.children.constructor!=Array){if(e.dynamicDataHandle.constructor==Function||this.dynamicDataHandle.constructor==Function){if(e.dynamicDataHandle.constructor==Function)var t=e.dynamicDataHandle(e);else var t=this.dynamicDataHandle(e);t.constructor==Array&&(this.populateNode(e.location,t),e.onExpand.constructor==Function?e.onExpand(e):this.onNodeExpand.constructor==Function&&this.onNodeExpand(e))}else{var i=urlencode(this._getDataNodeValue(e)),s="";"object"==typeof e.children?(e.children.url&&(s=e.children.url),""==s&&(s=this.dynamicDataURL),""!=s&&new $a.simple(s,{data:A5.ajax.addParamRequiredData($if(e.children.data,e.children.data+"&","")+"A5AJAXTreeNodeLoaction=["+e.location.join(",")+"]&A5AJAXTreeNodeValue="+i+"&__Ajax=true"),handle:this._responseHandle,handleContext:this})):(s=""+e.children,"?"==s.substr(0,1)&&(s=this.dynamicDataURL),""!=s&&new $a.simple(s,{data:A5.ajax.addParamRequiredData("A5AJAXTreeNodeLoaction=["+e.location.join(",")+"]&A5AJAXTreeNodeValue="+i+"&__Ajax=true"),handle:this._responseHandle,handleContext:this})),$(this.contId+"."+e.location.join(".")+".LABEL").innerHTML=this.loadingMessage}var a=$(this.contId+"."+e.location.join(".")+".LABEL").previousSibling;arguments[1]?0==e.location[e.location.length-1]&&1==e.location.length?a.src=this._gDef(e.expandedHoverImage,this.node.branch.firstExpandedHoverImage,e.expandedImage,this.node.branch.firstExpandedImage):e.isLast?a.src=this._gDef(e.expandedHoverImage,this.node.branch.lastExpandedHoverImage,e.expandedImage,this.node.branch.lastExpandedImage):a.src=this._gDef(e.expandedHoverImage,this.node.branch.expandedHoverImage,e.expandedImage,this.node.branch.expandedImage):0==e.location[e.location.length-1]&&1==e.location.length?a.src=this._gDef(e.expandedImage,this.node.branch.firstExpandedImage):e.isLast?a.src=this._gDef(e.expandedImage,this.node.branch.lastExpandedImage):a.src=this._gDef(e.expandedImage,this.node.branch.expandedImage),e.expanded=!0}else{for(var a=$(this.contId+"."+e.location.join(".")+".LABEL").previousSibling,n=$(this.contId+"."+e.location.join(".")).lastChild;!n.tagName;)n=n.previousSibling;if("none"==n.style.display){arguments[1]?0==e.location[e.location.length-1]&&1==e.location.length?a.src=this._gDef(e.expandedHoverImage,this.node.branch.firstExpandedHoverImage,e.expandedImage,this.node.branch.firstExpandedImage):e.isLast?a.src=this._gDef(e.expandedHoverImage,this.node.branch.lastExpandedHoverImage,e.expandedImage,this.node.branch.lastExpandedImage):a.src=this._gDef(e.expandedHoverImage,this.node.branch.expandedHoverImage,e.expandedImage,this.node.branch.expandedImage):0==e.location[e.location.length-1]&&1==e.location.length?a.src=this._gDef(e.expandedImage,this.node.branch.firstExpandedImage):e.isLast?a.src=this._gDef(e.expandedImage,this.node.branch.lastExpandedImage):a.src=this._gDef(e.expandedImage,this.node.branch.expandedImage);var o=this._gDef(e.expandedIcon,this.node.expandedIcon);""!=o&&$(this.contId+"."+e.location.join(".")+".LABELICON")&&($(this.contId+"."+e.location.join(".")+".LABELICON").src=o),n.style.display="block",e.expanded=!0,e.onExpand.constructor==Function?e.onExpand(e):this.onNodeExpand.constructor==Function&&this.onNodeExpand(e)}else{arguments[1]?0==e.location[e.location.length-1]&&1==e.location.length?a.src=this._gDef(e.collapsedHoverImage,this.node.branch.firstCollapsedHoverImage,e.collapsedImage,this.node.branch.firstCollapsedImage):e.isLast?a.src=this._gDef(e.collapsedHoverImage,this.node.branch.lastCollapsedHoverImage,e.collapsedImage,this.node.branch.lastCollapsedImage):a.src=this._gDef(e.collapsedHoverImage,this.node.branch.collapsedHoverImage,e.collapsedImage,this.node.branch.collapsedImage):0==e.location[e.location.length-1]&&1==e.location.length?a.src=this._gDef(e.collapsedImage,this.node.branch.firstCollapsedImage):e.isLast?a.src=this._gDef(e.collapsedImage,this.node.branch.lastCollapsedImage):a.src=this._gDef(e.collapsedImage,this.node.branch.collapsedImage);var o=this._gDef(e.collapsedIcon,this.node.collapsedIcon);""!=o&&$(this.contId+"."+e.location.join(".")+".LABELICON")&&($(this.contId+"."+e.location.join(".")+".LABELICON").src=o),n.style.display="none",e.expanded=!1,e.onCollapse.constructor==Function?e.onCollapse(e):this.onNodeCollapse.constructor==Function&&this.onNodeCollapse(e)}}},_selectNode:function(e){var t=[],i="";if(this.multiple&&(this._keyWatch.ctrl||this._keyWatch.shift)){for(var s=!0,a=0;a<this.selection.length;a++)if(this.selection[a].location.join(".")==e.location.join(".")){i=this._gDef(this.selection[a].selectedClassName,this.node.selectedClassName),""!=i&&$rcn($(this.contId+"."+this.selection[a].location.join(".")).firstChild,i),this.selection.splice(a,1),s=!1;break}s&&(i=this._gDef(e.selectedClassName,this.node.selectedClassName),""!=i&&$acn($(this.contId+"."+e.location.join(".")).firstChild,i),this.selection[this.selection.length]=e)}else this._deselectAll(),i=this._gDef(e.selectedClassName,this.node.selectedClassName),""!=i&&$acn($(this.contId+"."+e.location.join(".")).firstChild,i),this.selection[0]=e;for(var a=0;a<this.selection.length;a++)t[a]=this._getDataNodeValue(this.selection[a]);var n=t;this.value=t,""!=this.inputId&&($(this.inputId).value=t.join("\n")),n.join("\n")!=t.join("\n")&&(e.onSelect.constructor==Function?e.onSelect(e):this.onNodeSelect.constructor==Function&&this.onNodeSelect(e))},_deselectAll:function(){for(var e=new Object,t=0;t<this.selection.length;t++)e=this.selection[t],"object"==typeof e&&(selClassName=this._gDef(e.selectedClassName,this.node.selectedClassName),""!=selClassName&&$rcn($(this.contId+"."+e.location.join(".")).firstChild,selClassName));this.selection=new Array},_nodeImageMouseOver:function(e,t){for(var i=this.parentNode.parentNode,s=String(i.getAttribute("A5AJAXTreeNodeLocation")).split("."),a=0;a<s.length;a++)s[a]=Number(s[a]);var n=t.getDataNode(s,!1);n.expanded?0==n.location[n.location.length-1]&&1==n.location.length?this.src=t._gDef(n.expandedHoverImage,t.node.branch.firstExpandedHoverImage):n.isLast?this.src=t._gDef(n.expandedHoverImage,t.node.branch.lastExpandedHoverImage):this.src=t._gDef(n.expandedHoverImage,t.node.branch.expandedHoverImage):0==n.location[n.location.length-1]&&1==n.location.length?this.src=t._gDef(n.collapsedHoverImage,t.node.branch.firstCollapsedHoverImage):n.isLast?this.src=t._gDef(n.collapsedHoverImage,t.node.branch.lastCollapsedHoverImage):this.src=t._gDef(n.collapsedHoverImage,t.node.branch.collapsedHoverImage)},_nodeImageMouseOut:function(e,t){for(var i=this.parentNode.parentNode,s=String(i.getAttribute("A5AJAXTreeNodeLocation")).split("."),a=0;a<s.length;a++)s[a]=Number(s[a]);var n=t.getDataNode(s,!1);n.expanded?0==n.location[n.location.length-1]&&1==n.location.length?this.src=t._gDef(n.expandedImage,t.node.branch.firstExpandedImage):n.isLast?this.src=t._gDef(n.expandedImage,t.node.branch.lastExpandedImage):this.src=t._gDef(n.expandedImage,t.node.branch.expandedImage):0==n.location[n.location.length-1]&&1==n.location.length?this.src=t._gDef(n.collapsedImage,t.node.branch.firstCollapsedImage):n.isLast?this.src=t._gDef(n.collapsedImage,t.node.branch.lastCollapsedImage):this.src=t._gDef(n.collapsedImage,t.node.branch.collapsedImage)},_clickNode:function(e,t){$(t.contId+".FOCUSCATCHER").focus();for(var i=this.parentNode.parentNode,s=String(i.getAttribute("A5AJAXTreeNodeLocation")).split("."),a=0;a<s.length;a++)s[a]=Number(s[a]);var n=t.getDataNode(s,!1);t._selectNode(n),n.onClick.constructor==Function?n.onClick(n):t.onNodeClick.constructor==Function&&t.onNodeClick(n)},_keyPrevNode:function(){var e=this.selection[this.selection.length-1];if("object"==typeof e){if("0"!=e.location.join("")){var t=this._getPrevVisDataNode(e);this._selectNode(t),this.scrollToNode(t)}}else this._selectNode(this.getDataNode([0]))},_keyNextNode:function(){var e=this.selection[this.selection.length-1];if("object"==typeof e){var t=this._getNextVisDataNode(e);"undefined"!=typeof t.location&&(this._selectNode(t),this.scrollToNode(t))}else this._selectNode(this.getDataNode([0]))},_keyBranchNode:function(){var e=this.selection[this.selection.length-1];if("object"==typeof e)if(1==e.expanded)this._toggleBranch(e);else{for(var t=new Array,i=0;i<e.location.length-1;i++)t[i]=e.location[i];t.length>0&&this._selectNode(this.getDataNode(t))}else this._selectNode(this.getDataNode([0]))},_keyChildNode:function(){var e=this.selection[this.selection.length-1];if("object"==typeof e)if(0!=e.expanded||"object"!=typeof e.children&&"string"!=typeof e.children){if("object"==typeof e.children||"string"==typeof e.children){var t=this._getNextVisDataNode(e);"undefined"!=typeof t.location&&(this._selectNode(t),this.scrollToNode(t))}}else this._toggleBranch(e);else this._selectNode(this.getDataNode([0]))},_keyEnter:function(){var e=this.selection[this.selection.length-1];"object"==typeof e&&("object"==typeof e.children||"string"==typeof e.children?this._toggleBranch(e):e.onClick.constructor==Function?e.onClick(e):this.onNodeClick.constructor==Function&&this.onNodeClick(e))},_rClick:function(e,t){if(t.onRightClick.constructor==Function)return t.onRightClick(),e=$e.getEvent(e),$e.stopEvent(e),!1},_focus:function(e){return 0==this._hasFocus&&($(this.contId+".FOCUSCATCHER").style.top=$gpt($(this.contId))+"px",this._keyWatch.on(),this._hasFocus=!0,$e.add(document.documentElement,"click",this._blur,this,!0),
""!=this.focusClassName&&$acn($(this.contId),this.focusClassName),this.onFocus.constructor==Function&&this.onBlur()),e=$e.getEvent(e),$e.stopEvent(e),!1},_blur:function(){this._hasFocus=!1,this._keyWatch.off(),""!=this.focusClassName&&$rcn($(this.contId),this.focusClassName),$e.remove(document.documentElement,"click",this._blur),this.onBlur.constructor==Function&&this.onBlur()},_responseHandle:function(obj){var resJSON=eval("("+obj.responseText+")");this.populateNode(resJSON.location,resJSON.data);var dataNode=this.getDataNode(resJSON.location),baseId=this.contId+"."+resJSON.location.join("."),buttonNode=$(baseId+".LABEL"),curIcon=this._gDef(dataNode.expandedIcon,this.node.expandedIcon);""!=curIcon?buttonNode.innerHTML='<img id="'+baseId+'.LABELICON" src="'+curIcon+'" style="border: none" align="absmiddle" /> '+dataNode.html:buttonNode.innerHTML=dataNode.html,dataNode.onExpand.constructor==Function?dataNode.onExpand(dataNode):this.onNodeExpand.constructor==Function&&this.onNodeExpand(dataNode)},_gDef:function(e,t){for(var i=0;i<arguments.length;i++)if(""!=arguments[i])return arguments[i];return""},_defaultNode:{html:"",value:"",children:0,className:"",selectedClassName:"",labelClassName:"",branchClassName:"",icon:"",expandedIcon:"",collapsedIcon:"",image:"",expandedImage:"",collapsedImage:"",expandedHoverImage:"",collapsedHoverImage:"",onSelect:0,onClick:0,onExpand:0,onCollapse:0,dynamicDataHandle:0,expanded:!1,defaultValue:!0}},a5_AJAX_window=Class.create(),a5_AJAX_window.prototype={initialize:function(e){this._dlgId="A5dlg"+this._dlgIndx[0],$u.o.assign(this,{className:"",style:"",lockUIClassName:"",title:{html:"",className:"",style:"",imageClose:"",show:!0},body:{html:"",contentId:"",className:"",style:"",width:"",height:""},footer:{className:"",style:"",buttons:[],show:!0},onClose:0,modal:!0,autoPosition:!0,autoShow:!1}),"undefined"!=typeof a5_AJAX_windowDefaults&&$u.o.assign(this,a5_AJAX_windowDefaults),$u.o.assign(this,e);var t=document.createElement("div");t.id=this._dlgId,t.className=this.className,t.style.display="none",t.style.position="absolute",this._zIndex=500+this._dlgIndx[0],t.style.zIndex=""+this._zIndex;var i=document.createElement("div");i.id=this._dlgId+".TITLE",t.appendChild(i),i=document.createElement("div"),i.id=this._dlgId+".BODY",t.appendChild(i),i=document.createElement("div"),i.id=this._dlgId+".FOOTER",t.appendChild(i),document.body.appendChild(t),this._lockIndex=-1,""!=this.body.contentId&&$(this.body.contentId)&&$(this._dlgId+".BODY").appendChild($(this.body.contentId)),this.autoShow&&this.show(),AUI.Drag.create($(this._dlgId+".TITLE"),{dragElementId:this._dlgId,onDragStart:function(){for(var e=$(this.dragElementId),t=1;t<e.childNodes.length;t++)"undefined"!=typeof e.childNodes[t].tagName&&(e.childNodes[t].style.visibility="hidden");e.style.opacity=".5",e.style.filter="alpha(opacity=50)"},onDragEnd:function(){for(var e=$(this.dragElementId),t=0;t<e.childNodes.length;t++)"undefined"!=typeof e.childNodes[t].tagName&&(e.childNodes[t].style.visibility="");e.style.opacity="",e.style.filter=""}}),this._dlgIndx[0]=this._dlgIndx[0]+1},position:function(e,t){var i=$(this._dlgId);if("center"==e.toLowerCase()){var s=AUI.u.getVPSize(),a=AUI.u.getVPScroll();i.style.top=Math.max(Math.round(s.height/2-i.offsetHeight/2+a.y),0)+"px",i.style.left=Math.max(Math.round(s.width/2-i.offsetWidth/2+a.x),0)+"px"}else if("dropdown"==e.toLowerCase()){var n=$(t);n&&$po(i,n,"dropdown")}else"undefined"!=typeof e&&"undefined"!=typeof t&&("Number"==typeof e?i.style.top=e+"px":i.style.top=e,"Number"==typeof t?i.style.left=t+"px":i.style.left=t)},resize:function(e,t){this.body.width=e,this.body.height=t,$(this._dlgId).style.width=this.body.width;var i=$(this._dlgId+".BODY");i.style.height=this.body.height,""!=this.body.width?i.style.overflowX="auto":i.style.overflowX="",""!=this.body.height?i.style.overflowy="auto":i.style.overflowy=""},refresh:function(){if($(this._dlgId+".TITLE.CLOSE")){var e=$(this._dlgId+".TITLE.CLOSE");e.style.display="none";var t=this;setTimeout(function(){t._refreshComplete(),delete t},10)}},_refreshComplete:function(){var e=$(this._dlgId+".TITLE.CLOSE");e.style.display=""},show:function(){this._generateHTML();var e=$(this._dlgId);e.style.zIndex=this._zIndex,e.style.display="block","undefined"!=typeof arguments[0]?this.position.apply(this,arguments):this.autoPosition&&this.position("center"),this.modal&&(this._lockIndex=AUI.LockUI.page(this.lockUIClassName,this._zIndex))},hide:function(){this.modal&&AUI.LockUI.pageFree(),$(this._dlgId).style.display="none",this._lockIndex=-1},_generateHTML:function(){var e=new Object,t=$(this._dlgId+".TITLE"),i=$(this._dlgId+".BODY"),s=$(this._dlgId+".FOOTER");if($ss(t,this.title.style),$ss(i,this.body.style),$ss(s,this.footer.style),this.title.show?(t.innerHTML=this.title.html,""!=this.title.imageClose&&(e=document.createElement("img"),e.src=this.title.imageClose,e.id=this._dlgId+".TITLE.CLOSE",e.style.position="absolute",e.style.right="2px",e.style.cursor="default",e.value="cancel",$e.add(e,"click",this._closeWindow,this),t.insertBefore(e,t.firstChild)),t.className=this.title.className,t.style.display="block"):t.style.display="none",""==this.body.contentId&&(i.innerHTML=this.body.html),i.className=this.body.className,i.style.height=this.body.height,""!=this.body.width?i.style.overflowX="auto":i.style.overflowX="",""!=this.body.height?i.style.overflowy="auto":i.style.overflowy="",this.footer.show){s.innerHTML="";for(var a=0;a<this.footer.buttons.length;a++)$u.o.assign(this.footer.buttons[a],this._buttonDefaults,!0),e=document.createElement("button"),e.className=this.footer.buttons[a].className,e.style.width=this.footer.buttons[a].width,e.innerHTML=this.footer.buttons[a].html,$sa(e,"A5Value",this.footer.buttons[a].value),$e.add(e,"click",this._closeWindow,this),s.appendChild(e),e=document.createTextNode(" "),s.appendChild(e);s.className=this.footer.className,s.style.display="block"}else s.style.display="none";var n=$(this._dlgId);n.style.width=this.body.width,n.className=this.className},_closeWindow:function(e,t){var i=!0;0!=t.onClose&&(i=t.onClose($ga(this,"A5Value"))),i&&t.hide()},_buttonDefaults:{html:"",value:"",width:"",className:""},_dlgIndx:[0]};var a5_msg_box={show:function(e,t,i,s){0==this._dlg?this._dlg=new a5_AJAX_window({title:{html:"",imageClose:"images/$$window.button.close.png.a5image"},body:{html:"",width:""},footer:{buttons:[]},modal:!0,autoShow:!1,onClose:function(e){var t=this.handle(e);return"boolean"!=typeof t&&(t=!0),t}}):(this._dlg._zIndex=500+this._dlg._dlgIndx[0]+1,this._dlg._lockIndex!=-1&&(AUI.LockUI._plLevel=AUI.LockUI._plLevel.splice(this._dlg._lockIndex,1))),"undefined"!=typeof a5_AJAX_windowDefaults&&$u.o.assign(this._dlg,a5_AJAX_windowDefaults),this._dlg.title.html=e,this._dlg.body.html=t,this._dlg.handle=s,this._dlg.body.width=this.width,this._dlg.body.height=this.height,""!=this.className&&(this._dlg.className=this.className),""!=this.lockUIClassName&&(this._dlg.lockUIClassName=this.lockUIClassName),""!=this.titleClassName&&(this._dlg.title.className=this.titleClassName),""!=this.bodyClassName&&(this._dlg.body.className=this.bodyClassName),""!=this.footerClassName&&(this._dlg.footer.className=this.footerClassName),""!=this.closeButtonImage&&(this._dlg.title.imageClose=this.closeButtonImage),""==this.buttonClassName&&(this.buttonClassName=this._dlg._buttonDefaults.className),""==this.buttonWidth&&(this.buttonWidth=this._dlg._buttonDefaults.width),i=i.toLowerCase(),this._dlg.footer.show=!0,"o"==i?this._dlg.footer.buttons=[{html:"OK",value:"ok",className:this.buttonClassName,width:this.buttonWidth}]:"oc"==i?this._dlg.footer.buttons=[{html:"OK",value:"ok",className:this.buttonClassName,width:this.buttonWidth},{html:"Cancel",value:"cancel",className:this.buttonClassName,width:this.buttonWidth}]:"yn"==i?this._dlg.footer.buttons=[{html:"Yes",value:"yes",className:this.buttonClassName,width:this.buttonWidth},{html:"No",value:"no",className:this.buttonClassName,width:this.buttonWidth}]:"ync"==i?this._dlg.footer.buttons=[{html:"Yes",value:"yes",className:this.buttonClassName,width:this.buttonWidth},{html:"No",value:"no",className:this.buttonClassName,width:this.buttonWidth},{html:"Cancel",value:"cancel",className:this.buttonClassName,width:this.buttonWidth}]:(this._dlg.footer.buttons=[],this._dlg.footer.show=!1),this._dlg.show()},hide:function(){this._dlg.hide()},className:"",titleClassName:"",bodyClassName:"",footerClassName:"",buttonClassName:"",buttonWidth:"",closeButtonImage:"",lockUIClassName:"",width:"",height:"",_dlg:0};if(a5_AJAX_accordion=Class.create(),a5_AJAX_accordion.prototype={initialize:function(e,t){this.contId=e;var i="object"==typeof arguments[2]?arguments[2]:{};$u.o.assign(this,{titleClassName:"",titleSelectedClassName:"",titleDisabledClassName:"",paneClassName:"",paneWidth:"",paneHeight:"",onChange:0,onBeforeChange:0,onLeave:0,onBeforeLeave:0,onRightClick:0,onDynamicLoad:0,singleBand:!0,animation:{show:{type:"",duration:500},hide:{type:"",duration:500}}},!0),"undefined"!=typeof a5_AJAX_accordionDefaults&&$u.o.assign(this,a5_AJAX_accordionDefaults),"undefined"!=typeof i.theme&&A5.themes.assign(this,i.theme,"accordion"),"undefined"!=typeof i.titleClassName&&"+"==i.titleClassName.charAt(0)&&(i.titleClassName=this.titleClassName+" "+i.titleClassName.substr(1)),"undefined"!=typeof i.titleSelectedClassName&&"+"==i.titleSelectedClassName.charAt(0)&&(i.titleSelectedClassName=this.titleSelectedClassName+" "+i.titleSelectedClassName.substr(1)),"undefined"!=typeof i.titleDisabledClassName&&"+"==i.titleDisabledClassName.charAt(0)&&(i.titleDisabledClassName=this.titleDisabledClassName+" "+i.titleDisabledClassName.substr(1)),"undefined"!=typeof i.paneClassName&&"+"==i.paneClassName.charAt(0)&&(i.paneClassName=this.paneClassName+" "+i.paneClassName.substr(1)),$u.o.assign(this,i),$(e).style.width=this.paneWidth;var s=new Object;this.bands=new Array,this.value=new Array;for(var a=0;a<t.length;a++)this.bands[a]=new Object,$u.o.assign(this.bands[a],this._parseBand(t[a])),"+"==this.bands[a].titleClassName.charAt(0)&&(this.bands[a].titleClassName=this.titleClassName+" "+this.bands[a].titleClassName.substr(1)),"+"==this.bands[a].titleSelectedClassName.charAt(0)&&(this.bands[a].titleSelectedClassName=this.titleSelectedClassName+" "+this.bands[a].titleSelectedClassName.substr(1)),"+"==this.bands[a].titleDisabledClassName.charAt(0)&&(this.bands[a].titleDisabledClassName=this.titleDisabledClassName+" "+this.bands[a].titleDisabledClassName.substr(1)),"+"==this.bands[a].paneClassName.charAt(0)&&(this.bands[a].paneClassName=this.paneClassName+" "+this.bands[a].paneClassName.substr(1)),s=$(e+"."+a+".TITLE"),"undefined"!=typeof s&&($e.add(s,A5.d.evnts.click,this._selectBand,this),$e.add(s,"click",function(e){return $e.preventDefault(e),!1}),$e.add(s,"contextmenu",this._rClick,this),!this.bands[a].expanded&&this.bands[a].show?s.className=this._gDef(this.bands[a].titleClassName,this.titleClassName):s.className=this._gDef(this.bands[a].titleSelectedClassName,this.titleSelectedClassName),this.bands[a].show||(s.style.display="none"),this.bands[a].disabled&&(s.className=this._gDef(this.bands[a].titleDisabledClassName,this.titleDisabledClassName)),s.setAttribute("A5AccordionCtrlIndex",""+a)),s=$(e+"."+a+".PANE"),"undefined"!=typeof s&&(s.className=this._gDef(this.bands[a].paneClassName,this.paneClassName),s.style.height=this._gDef(this.bands[a].paneHeight,this.paneHeight),this.bands[a].expanded&&this.bands[a].show&&!this.bands[a].disabled?s.style.display="block":s.style.display="none"),this.bands[a].expanded&&this.bands[a].show&&!this.bands[a].disabled&&(this.value.push(this.bands[a].value),this.bands[a].onDynamicLoad.constructor==Function?this.bands[a].onDynamicLoad.call(this,this.bands[a]):this.onDynamicLoad.constructor==Function&&this.onDynamicLoad.call(this,this.bands[a]),this.bands[a]._loaded=!0);this._curBandIndx=-1},select:function(e){var t="undefined"!=typeof arguments[1]&&arguments[1];e.constructor!=Array&&(e=[e]);for(var i=0;i<e.length;i++){var s=this._getBandIndex(e[i]);if(this.bands[s].show&&!this.bands[s].disabled){var a=!0;if("undefined"!=typeof this.bands[this._curBandIndx]&&(this.bands[this._curBandIndx].onBeforeLeave.constructor==Function?a=this.bands[this._curBandIndx].onBeforeLeave.call(this,this.bands[this._curBandIndx]):this.onBeforeLeave.constructor==Function&&(a=this.onBeforeLeave.call(this,this.bands[this._curBandIndx]))),a&&(this.bands[s].onBeforeChange.constructor==Function?a=this.bands[s].onBeforeChange.call(this,this.bands[s]):this.onBeforeChange.constructor==Function&&(a=this.onBeforeChange.call(this,this.bands[s]))),a){if("undefined"!=typeof this.bands[this._curBandIndx]&&this.singleBand){this.bands[this._curBandIndx].disabled?$(this.contId+"."+this._curBandIndx+".TITLE").className=this._gDef(this.bands[this._curBandIndx].titleDisabledClassName,this.titleDisabledClassName):$(this.contId+"."+this._curBandIndx+".TITLE").className=this._gDef(this.bands[this._curBandIndx].titleClassName,this.titleClassName);var n=$(this.contId+"."+this._curBandIndx+".PANE");"slide"==this.animation.hide.type&&"undefined"!=typeof jQuery?jQuery(n).slideUp(this.animation.hide.duration):A5.u.element.hide(n,this.animation.hide);for(var o=0;o<this.value.length;o++)this.value[o]==this.bands[this._curBandIndx].value&&this.value.splice(o,1);this.bands[this._curBandIndx].expanded=!1,this.bands[this._curBandIndx].onLeave.constructor==Function?this.bands[this._curBandIndx].onLeave.call(this,this.bands[this._curBandIndx]):this.onLeave.constructor==Function&&this.onLeave.call(this,this.bands[this._curBandIndx])}if(this.singleBand&&this._curBandIndx==s)this._curBandIndx=-1;else{this._curBandIndx=s;var n=$(this.contId+"."+this._curBandIndx+".PANE");if("none"==n.style.display)$(this.contId+"."+this._curBandIndx+".TITLE").className=this._gDef(this.bands[this._curBandIndx].titleSelectedClassName,this.titleSelectedClassName),"slide"==this.animation.show.type&&"undefined"!=typeof jQuery?jQuery(n).slideDown(this.animation.show.duration):A5.u.element.show(n,this.animation.show),this.value.push(this.bands[this._curBandIndx].value),this.bands[s]._loaded||(this.bands[s].onDynamicLoad.constructor==Function?this.bands[s].onDynamicLoad.call(this,this.bands[s]):this.onDynamicLoad.constructor==Function&&this.onDynamicLoad.call(this,this.bands[s]),this.bands[s]._loaded=!0),this.bands[this._curBandIndx].expanded=!0;else if(t){this.bands[this._curBandIndx].disabled?ele.className=this._gDef(this.bands[this._curBandIndx].titleDisabledClassName,this.titleDisabledClassName):$(this.contId+"."+this._curBandIndx+".TITLE").className=this._gDef(this.bands[this._curBandIndx].titleClassName,this.titleClassName),"slide"==this.animation.hide.type&&"undefined"!=typeof jQuery?jQuery(n).slideUp(this.animation.hide.duration):A5.u.element.hide(n,this.animation.hide);for(var o=0;o<this.value.length;o++)this.value[o]==this.bands[this._curBandIndx].value&&this.value.splice(o,1);this.bands[this._curBandIndx].expanded=!1,this.bands[this._curBandIndx].onLeave.constructor==Function?this.bands[this._curBandIndx].onLeave.call(this,this.bands[this._curBandIndx]):this.onLeave.constructor==Function&&this.onLeave.call(this,this.bands[this._curBandIndx])}}this.bands[s].onChange.constructor==Function?this.bands[s].onChange.call(this,this.bands[s]):this.onChange.constructor==Function&&this.onChange.call(this,this.bands[s])}}}},reset:function(){if(0==arguments.length)for(var e=0;e<this.bands.length;e++)this.bands[e]._loaded=!1,"none"!=$(this.contId+"."+e+".PANE").style.display&&(this.bands[e].onDynamicLoad.constructor==Function?this.bands[e].onDynamicLoad.call(this,this.bands[e]):this.onDynamicLoad.constructor==Function&&this.onDynamicLoad.call(this,this.bands[e]));else for(var t=-1,e=0;e<arguments.length;e++)t=this._getBandIndex(arguments[e]),this.bands[t]._loaded=!1,"none"!=$(this.contId+"."+t+".PANE").style.display&&(this.bands[t].onDynamicLoad.constructor==Function?this.bands[t].onDynamicLoad.call(this,this.bands[t]):this.onDynamicLoad.constructor==Function&&this.onDynamicLoad.call(this,this.bands[t]))},populateBand:function(e,t){var i=this._getBandIndex(e);$(this.contId+"."+i+".PANE").innerHTML=t},hideBand:function(e){var t=this._getBandIndex(e);this.bands[t].show=!1;var i=$(this.contId+"."+t+".TITLE");"undefined"!=typeof i&&(i.style.display="none");var i=$(this.contId+"."+t+".PANE");"undefined"!=typeof i&&(i.style.display="none")},showBand:function(e){var t=this._getBandIndex(e);this.bands[t].show=!0;var i=$(this.contId+"."+t+".TITLE");"undefined"!=typeof i&&(i.style.display="",this.bands[t].disabled?i.className=this._gDef(this.bands[t].titleDisabledClassName,this.titleDisabledClassName):$(this.contId+"."+t+".TITLE").className=this._gDef(this.bands[t].titleClassName,this.titleClassName))},disableBand:function(e){var t=this._getBandIndex(e);this.bands[t].disabled=!0;var i=$(this.contId+"."+t+".TITLE");"undefined"!=typeof i&&(i.className=this._gDef(this.bands[t].titleDisabledClassName,this.titleDisabledClassName));var i=$(this.contId+"."+t+".PANE");"undefined"!=typeof i&&(i.style.display="none")},enableBand:function(e){var t=this._getBandIndex(e);this.bands[t].disabled=!1;var i=$(this.contId+"."+t+".TITLE");"undefined"!=typeof i&&(i.className=this._gDef(this.bands[t].titleClassName,this.titleClassName))},addBand:function(e,t){"object"!=typeof e&&(e={html:e});var i=this.bands.length;this.bands[i]=new Object,$u.o.assign(this.bands[i],this._parseBand(e));var s=document.createElement("a");s.id=this.contId+"."+i+".TITLE",s.href="#",!this.bands[i].expanded&&this.bands[i].show?s.className=this._gDef(this.bands[i].titleClassName,this.titleClassName):s.className=this._gDef(this.bands[i].titleSelectedClassName,this.titleSelectedClassName),this.bands[i].show||(s.style.display="none"),this.bands[i].disabled&&(s.className=this._gDef(this.bands[i].titleDisabledClassName,this.titleDisabledClassName)),s.innerHTML=this.bands[i].html,$(this.contId).appendChild(s),"undefined"!=typeof s&&($e.add(s,A5.d.evnts.click,this._selectBand,this),$e.add(s,"click",function(e){return $e.preventDefault(e),!1}),$e.add(s,"contextmenu",this._rClick,this),this.bands[i].show||(s.style.display="none"),s.setAttribute("A5AccordionCtrlIndex",""+i)),s=document.createElement("div"),s.id=this.contId+"."+i+".PANE",s.innerHTML=t,s.className=this._gDef(this.bands[i].paneClassName,this.paneClassName),s.style.height=this._gDef(this.bands[i].paneHeight,this.paneHeight),$(this.contId).appendChild(s),this.bands[i].expanded&&this.bands[i].show&&!this.bands[i].disabled?(s.style.display="block",this.value.push(this.bands[i].value),this.bands[i].onDynamicLoad.constructor==Function?this.bands[i].onDynamicLoad.call(this,this.bands[i]):this.onDynamicLoad.constructor==Function&&this.onDynamicLoad.call(this,this.bands[i]),this.bands[i]._loaded=!0):s.style.display="none"},removeBand:function(e){var t=this._getBandIndex(e);$(this.contId).removeChild($(this.contId+"."+t+".TITLE")),$(this.contId).removeChild($(this.contId+"."+t+".PANE"));for(var i=new Object,s=t+1;s<this.bands.length;s++)i=$(this.contId+"."+s+".TITLE"),i.id=this.contId+"."+(s-1)+".TITLE",i.setAttribute("A5AccordionCtrlIndex",""+(s-1)),i=$(this.contId+"."+s+".PANE"),i.id=this.contId+"."+(s-1)+".PANE";this.bands.splice(t,1)},_getBandIndex:function(e){if("number"==typeof e)return e;for(var t=0;t<this.bands.length;t++)if(e==this.bands[t].value)return t;return 0},_selectBand:function(e,t){var i=Number(this.getAttribute("A5AccordionCtrlIndex"));return t.select(i,!0),e=$e.getEvent(e),$e.stopEvent(e),!1},_rClick:function(e,t){var i=Number(this.getAttribute("A5AccordionCtrlIndex"));return e=$e.getEvent(e),$e.stopEvent(e),t.bands[i].onRightClick.constructor==Function?t.bands[i].onRightClick.call(t,t.bands[i]):t.onRightClick.constructor==Function&&t.onRightClick.call(t,t.bands[i]),!1},_parseBand:function(e){return $u.o.assign(e,this._defaultBand,!0),""==e.html&&(e.html=e.value),""==e.value&&(e.value=e.html),e},_gDef:function(){for(var e=0;e<arguments.length;e++)if(""!=arguments[e])return arguments[e];return""},_defaultBand:{html:"",value:"",titleClassName:"",titleSelectedClassName:"",titleDisabledClassName:"",paneClassName:"",paneHeight:"",show:!0,disabled:!1,expanded:!1,onChange:0,onBeforeChange:0,onLeave:0,onBeforeLeave:0,onRightClick:0,onDynamicLoad:0,_loaded:!1}},a5_AJAX_tab=Class.create(),a5_AJAX_tab.prototype={initialize:function(e,t){this.contId=e;var i="object"==typeof arguments[2]?arguments[2]:{};$u.o.assign(this,{tabClassName:"",tabSelectedClassName:"",tabDisabledClassName:"",paneClassName:"",paneWidth:"",paneHeight:"",onChange:0,onBeforeChange:0,onLeave:0,onBeforeLeave:0,onRightClick:0,onDynamicLoad:0,initialTab:0,animation:{show:{type:"",duration:500},hide:{type:"",duration:500}}},!0),"undefined"!=typeof a5_AJAX_tabDefaults&&$u.o.assign(this,a5_AJAX_tabDefaults),"undefined"!=typeof i.theme&&A5.themes.assign(this,i.theme,"tab"),"undefined"!=typeof i.tabClassName&&"+"==i.tabClassName.charAt(0)&&(i.tabClassName=this.tabClassName+" "+i.tabClassName.substr(1)),"undefined"!=typeof i.tabSelectedClassName&&"+"==i.tabSelectedClassName.charAt(0)&&(i.tabSelectedClassName=this.tabSelectedClassName+" "+i.tabSelectedClassName.substr(1)),"undefined"!=typeof i.tabDisabledClassName&&"+"==i.tabDisabledClassName.charAt(0)&&(i.tabDisabledClassName=this.tabDisabledClassName+" "+i.tabDisabledClassName.substr(1)),"undefined"!=typeof i.paneClassName&&"+"==i.paneClassName.charAt(0)&&(i.paneClassName=this.paneClassName+" "+i.paneClassName.substr(1)),$u.o.assign(this,i);var s=new Object;this.panes=new Array;for(var a=0;a<t.length;a++)this.panes[a]=new Object,$u.o.assign(this.panes[a],this._parsePane(t[a])),"+"==this.panes[a].tabClassName.charAt(0)&&(this.panes[a].tabClassName=this.tabClassName+" "+this.panes[a].tabClassName.substr(1)),"+"==this.panes[a].tabSelectedClassName.charAt(0)&&(this.panes[a].tabSelectedClassName=this.tabSelectedClassName+" "+this.panes[a].tabSelectedClassName.substr(1)),"+"==this.panes[a].tabDisabledClassName.charAt(0)&&(this.panes[a].tabDisabledClassName=this.tabDisabledClassName+" "+this.panes[a].tabDisabledClassName.substr(1)),"+"==this.panes[a].paneClassName.charAt(0)&&(this.panes[a].paneClassName=this.paneClassName+" "+this.panes[a].paneClassName.substr(1)),s=$(e+"."+a+".TAB"),"undefined"!=typeof s&&($e.add(s,A5.d.evnts.click,this._selectTab,this),$e.add(s,"click",function(e){return $e.preventDefault(e),!1}),$e.add(s,"contextmenu",this._rClick,this),a!=this.initialTab?s.className=this._gDef(this.panes[a].tabClassName,this.tabClassName):s.className=this._gDef(this.panes[a].tabSelectedClassName,this.tabSelectedClassName),this.panes[a].show||(s.style.display="none"),this.panes[a].disabled&&(s.className=this._gDef(this.panes[a].tabDisabledClassName,this.tabDisabledClassName)),s.setAttribute("A5TabCtrlIndex",""+a)),s=$(e+"."+a+".PANE"),"undefined"!=typeof s&&(s.className=this._gDef(this.panes[a].paneClassName,this.paneClassName),s.style.width=this._gDef(this.panes[a].paneWidth,this.paneWidth),s.style.height=this._gDef(this.panes[a].paneHeight,this.paneHeight),a!=this.initialTab?s.style.display="none":s.style.display="block");this.panes.length>this.initialTab&&(this._curTabIndx=this.initialTab,this.value=this.panes[this._curTabIndx].value,this.panes[this._curTabIndx].onDynamicLoad.constructor==Function?this.panes[this._curTabIndx].onDynamicLoad.call(this,this.panes[this._curTabIndx]):this.onDynamicLoad.constructor==Function&&this.onDynamicLoad.call(this,this.panes[this._curTabIndx]),this.panes[this._curTabIndx]._loaded=!0)},select:function(e){var t=this._getTabIndex(e);if(t!=this._curTabIndx&&this.panes[t].show&&!this.panes[t].disabled){var i=!0;if("undefined"!=typeof this.panes[this._curTabIndx]&&(this.panes[this._curTabIndx].onBeforeLeave.constructor==Function?i=this.panes[this._curTabIndx].onBeforeLeave.call(this,this.panes[this._curTabIndx]):this.onBeforeLeave.constructor==Function&&(i=this.onBeforeLeave.call(this,this.panes[this._curTabIndx]))),i&&(this.panes[t].onBeforeChange.constructor==Function?i=this.panes[t].onBeforeChange.call(this,this.panes[t]):this.onBeforeChange.constructor==Function&&(i=this.onBeforeChange.call(this,this.panes[t]))),i)if("undefined"!=typeof this.panes[this._curTabIndx]){this.panes[this._curTabIndx].disabled?$(this.contId+"."+this._curTabIndx+".TAB").className=this._gDef(this.panes[this._curTabIndx].tabDisabledClassName,this.tabDisabledClassName):$(this.contId+"."+this._curTabIndx+".TAB").className=this._gDef(this.panes[this._curTabIndx].tabClassName,this.tabClassName);var s=$(this.contId+"."+this._curTabIndx+".PANE"),a=this;this.panes[this._curTabIndx].onLeave.constructor==Function?this.panes[this._curTabIndx].onLeave.call(this,this.panes[this._curTabIndx]):this.onLeave.constructor==Function&&this.onLeave.call(this,this.panes[this._curTabIndx]),this._curTabIndx=t;var n={};$u.o.assign(n,this.animation.hide),n.onComplete=function(){a._selectComplete(),delete a},A5.u.element.hide(s,n)}else this._curTabIndx=t,this._selectComplete()}},_selectComplete:function(){this.value=this.panes[this._curTabIndx].value,$(this.contId+"."+this._curTabIndx+".TAB").className=this._gDef(this.panes[this._curTabIndx].tabSelectedClassName,this.tabSelectedClassName);var e=$(this.contId+"."+this._curTabIndx+".PANE");A5.u.element.show(e,this.animation.show),this.panes[this._curTabIndx].onChange.constructor==Function?this.panes[this._curTabIndx].onChange.call(this,this.panes[this._curTabIndx]):this.onChange.constructor==Function&&this.onChange.call(this,this.panes[this._curTabIndx]),this.panes[this._curTabIndx]._loaded||(this.panes[this._curTabIndx].onDynamicLoad.constructor==Function?this.panes[this._curTabIndx].onDynamicLoad.call(this,this.panes[this._curTabIndx]):this.onDynamicLoad.constructor==Function&&this.onDynamicLoad.call(this,this.panes[this._curTabIndx]),this.panes[this._curTabIndx]._loaded=!0)},reset:function(){if(0==arguments.length)for(var e=0;e<this.panes.length;e++)this.panes[e]._loaded=!1,e==this._curTabIndx&&(this.panes[e].onDynamicLoad.constructor==Function?this.panes[e].onDynamicLoad.call(this,this.panes[e]):this.onDynamicLoad.constructor==Function&&this.onDynamicLoad.call(this,this.panes[e]));else for(var t=-1,e=0;e<arguments.length;e++)t=this._getTabIndex(arguments[e]),this.panes[t]._loaded=!1,t==this._curTabIndx&&(this.panes[t].onDynamicLoad.constructor==Function?this.panes[t].onDynamicLoad.call(this,this.panes[t]):this.onDynamicLoad.constructor==Function&&this.onDynamicLoad.call(this,this.panes[t]))},populatePane:function(e,t){var i=this._getTabIndex(e);$(this.contId+"."+i+".PANE").innerHTML=t},hideTab:function(e){var t=this._getTabIndex(e);this.panes[t].show=!1;var i=$(this.contId+"."+t+".TAB");"undefined"!=typeof i&&(i.style.display="none"),t==this._curTabIndx&&this.select(this._getNextAvalibleTab(t))},showTab:function(e){var t=this._getTabIndex(e);this.panes[t].show=!0;var i=$(this.contId+"."+t+".TAB");"undefined"!=typeof i&&(i.style.display="")},disableTab:function(e){var t=this._getTabIndex(e);this.panes[t].disabled=!0;var i=$(this.contId+"."+t+".TAB");"undefined"!=typeof i&&(i.className=this._gDef(this.panes[t].tabDisabledClassName,this.tabDisabledClassName)),t==this._curTabIndx&&this.select(this._getNextAvalibleTab(t))},enableTab:function(e){var t=this._getTabIndex(e);this.panes[t].disabled=!1;var i=$(this.contId+"."+t+".TAB");"undefined"!=typeof i&&(i.className=this._gDef(this.panes[t].tabClassName,this.tabClassName))},addTab:function(e,t){var i=this.panes.length;this.panes[i]=new Object,$u.o.assign(this.panes[i],this._parsePane(e));var s=document.createElement("a");s.id=this.contId+"."+i+".TAB",s.href="#",this.panes[i].disabled?s.className=this._gDef(this.panes[i].tabDisabledClassName,this.tabDisabledClassName):s.className=this._gDef(this.panes[i].tabClassName,this.tabClassName),this.panes[i].show||(s.style.display="none"),s.innerHTML=this.panes[i].html,this.panes.length>1?$(this.contId+".TABBAND").insertBefore(s,$(this.contId+"."+(i-1)+".TAB").nextSibling):$(this.contId+".TABBAND").insertBefore(s,$(this.contId+".TABBAND").lastChild),"undefined"!=typeof s&&($e.add(s,A5.d.evnts.click,this._selectTab,this),$e.add(s,"click",function(e){return $e.preventDefault(e),!1}),$e.add(s,"contextmenu",this._rClick,this),this.panes[i].show||(s.style.display="none"),s.setAttribute("A5TabCtrlIndex",""+i)),s=document.createElement("div"),s.id=this.contId+"."+i+".PANE",s.innerHTML=t,s.className=this._gDef(this.panes[i].paneClassName,this.paneClassName),s.style.width=this._gDef(this.panes[i].paneWidth,this.paneWidth),s.style.height=this._gDef(this.panes[i].paneHeight,this.paneHeight),s.style.display="none",$(this.contId+".PANES").appendChild(s)},removeTab:function(e){var t=this._getTabIndex(e);$(this.contId+".TABBAND").removeChild($(this.contId+"."+t+".TAB")),$(this.contId+".PANES").removeChild($(this.contId+"."+t+".PANE"));for(var i=new Object,s=t+1;s<this.panes.length;s++)i=$(this.contId+"."+s+".TAB"),i.id=this.contId+"."+(s-1)+".TAB",i.setAttribute("A5TabCtrlIndex",""+(s-1)),i=$(this.contId+"."+s+".PANE"),i.id=this.contId+"."+(s-1)+".PANE";this.panes.splice(t,1),t==this._curTabIndx?this.select(this._getNextAvalibleTab(t)):t<this._curTabIndx&&(this._curTabIndx=this._curTabIndx-1)},_getTabIndex:function(e){if("number"==typeof e)return e;for(var t=0;t<this.panes.length;t++)if(e==this.panes[t].value)return t;return 0},_selectTab:function(e,t){var i=Number(this.getAttribute("A5TabCtrlIndex"));return t.select(i),e=$e.getEvent(e),$e.stopEvent(e),!1},_rClick:function(e,t){var i=Number(this.getAttribute("A5TabCtrlIndex"));return e=$e.getEvent(e),$e.stopEvent(e),t.panes[i].onRightClick.constructor==Function?t.panes[i].onRightClick.call(t,t.panes[i]):t.onRightClick.constructor==Function&&t.onRightClick.call(t,t.panes[i]),!1},_getNextAvalibleTab:function(e){for(var t=e-1;t>-1;t--)if(!this.panes[t].disabled&&this.panes[t].show)return t;for(var t=e+1;t<this.panes.length;t++)if(!this.panes[t].disabled&&this.panes[t].show)return t;return 0},_parsePane:function(e){return"object"!=typeof e&&(e={html:e}),$u.o.assign(e,this._defaultPane,!0),""==e.html&&(e.html=e.value),""==e.value&&(e.value=e.html),e},_gDef:function(){for(var e=0;e<arguments.length;e++)if(""!=arguments[e])return arguments[e];return""},_defaultPane:{html:"",value:"",tabClassName:"",tabSelectedClassName:"",tabDisabledClassName:"",paneClassName:"",paneWidth:"",paneHeight:"",show:!0,disabled:!1,onChange:0,onBeforeChange:0,onLeave:0,onBeforeLeave:0,onRightClick:0,onDynamicLoad:0,_loaded:!1}},a5_AJAX_genie=Class.create(),a5_AJAX_genie.prototype={initialize:function(e,t,i){this.contId=e,$u.o.assign(this,i),$u.o.assign(this,{buttonMode:"hide",onCancel:0,onPrevious:0,onNext:0,onBeforeNext:0,onNavigateTo:0,onDone:0},!0),this.panes=new Array;for(var s=0;s<t.length;s++)this.panes[s]=new Object,$u.o.assign(this.panes[s],this._parsePane(t[s],$if(s==t.length-1,!0,!1))),s>0?$(this.contId+"."+this.panes[s].name).style.display="none":$(this.contId+"."+this.panes[s].name).style.display="";var a=$(this.contId+".CANCEL");"undefined"!=typeof a&&$e.add(a,"click",this._cancel,this,!0),a=$(this.contId+".PREV"),"undefined"!=typeof a&&$e.add(a,"click",this._prev,this,!0),"disable"==this.buttonMode||"swap"==this.buttonMode?a.disabled=!0:a.style.display="none",a=$(this.contId+".NEXT"),"undefined"!=typeof a&&$e.add(a,"click",this._next,this,!0),a=$(this.contId+".DONE"),"undefined"!=typeof a&&$e.add(a,"click",this._done,this,!0),"disable"==this.buttonMode?a.disabled=!0:a.style.display="none",this._prevPane=[0],this._curPane=0},disableNext:function(){var e=$(this.contId+".NEXT");"undefined"!=typeof e&&(e.disabled=!0);var e=$(this.contId+".DONE");"undefined"!=typeof e&&(e.disabled=!0)},enableNext:function(){var e=$(this.contId+".NEXT");"undefined"!=typeof e&&(e.disabled=!1);var e=$(this.contId+".DONE");"undefined"!=typeof e&&(e.disabled=!1)},next:function(){if(this._prevPane.push(this._curPane),$(this.contId+"."+this.panes[this._curPane].name).style.display="none",
""!=this.panes[this._curPane].nextPane){for(var e=0;e<this.panes.length;e++)if(this.panes[e].name==this.panes[this._curPane].nextPane){this._curPane=e;break}}else this._curPane=this._curPane+1;if($(this.contId+"."+this.panes[this._curPane].name).style.display="",this.panes[this._curPane].isLast){var t=$(this.contId+".DONE");t.disabled=!1,t.style.display="",t=$(this.contId+".NEXT"),"disable"==this.buttonMode?t.disabled=!0:t.style.display="none"}var t=$(this.contId+".PREV");t.disabled=!1,t.style.display="",this.panes[this._curPane].onNext.constructor==Function?this.panes[this._curPane].onNext.call(this,this.panes[this._curPane]):this.onNext.constructor==Function&&this.onNext.call(this,this.panes[this._curPane]),this.panes[this._curPane].onNavigateTo.constructor==Function?this.panes[this._curPane].onNavigateTo.call(this,this.panes[this._curPane]):this.onNavigateTo.constructor==Function&&this.onNavigateTo.call(this,this.panes[this._curPane])},_next:function(){var e=!0;return this.panes[this._curPane].onBeforeNext.constructor==Function?e=this.panes[this._curPane].onBeforeNext.call(this,this.panes[this._curPane]):this.onBeforeNext.constructor==Function&&(e=this.onBeforeNext.call(this,this.panes[this._curPane])),!("undefined"!=typeof e&&!e)&&void this.next()},_prev:function(){if(2==this._prevPane.length){var e=$(this.contId+".PREV");"disable"==this.buttonMode||"swap"==this.buttonMode?e.disabled=!0:e.style.display="none"}if($(this.contId+"."+this.panes[this._curPane].name).style.display="none",this.panes[this._curPane].isLast){var e=$(this.contId+".NEXT");e.disabled=!1,e.style.display="",e=$(this.contId+".DONE"),"disable"==this.buttonMode?e.disabled=!0:e.style.display="none"}this._curPane=this._prevPane[this._prevPane.length-1],this._prevPane.pop(),$(this.contId+"."+this.panes[this._curPane].name).style.display="",this.panes[this._curPane].onPrevious.constructor==Function?this.panes[this._curPane].onPrevious.call(this,this.panes[this._curPane]):this.onPrevious.constructor==Function&&this.onPrevious.call(this,this.panes[this._curPane]),this.panes[this._curPane].onNavigateTo.constructor==Function?this.panes[this._curPane].onNavigateTo.call(this,this.panes[this._curPane]):this.onNavigateTo.constructor==Function&&this.onNavigateTo.call(this,this.panes[this._curPane])},_cancel:function(){this.panes[this._curPane].onCancel.constructor==Function?this.panes[this._curPane].onCancel.call(this,this.panes[this._curPane]):this.onCancel.constructor==Function&&this.onCancel.call(this,this.panes[this._curPane])},_done:function(){this.panes[this._curPane].onDone.constructor==Function?this.panes[this._curPane].onDone.call(this,this.panes[this._curPane]):this.onDone.constructor==Function&&this.onDone.call(this,this.panes[this._curPane])},_parsePane:function(e,t){return"object"!=typeof e&&(e={name:""+e}),t&&(e.isLast=!0),$u.o.assign(e,this._defaultPane,!0),e},_gDef:function(){for(var e=0;e<arguments.length;e++)if(""!=arguments[e])return arguments[e];return""},_defaultPane:{name:"",nextPane:"",isLast:!1,onCancel:0,onPrevious:0,onNext:0,onBeforeNext:0,onNavigateTo:0,onDone:0}},a5_AJAX_repeatingForm=Class.create(),a5_AJAX_repeatingForm.prototype={initialize:function(e,t,i,s){this.contId=e,this.html=t,this.fields=i,this.data=s,this.order=new Array,this._curRowIndx=-1,this._curFieldId="",this.html.constructor==Array&&(this.html=this.html.join("\n"));var a="object"==typeof arguments[4]?arguments[4]:{};$u.o.assign(this,{rowClassName:"",rowAltClassName:"",rowFocusClassName:"",onAdd:0,onRemove:0,onClear:0,onMove:0,dropDownLocation:8,dropDownXOffset:0,dropDownYOffset:0,menuLocation:"dropdown",menuXOffset:1,menuYOffset:1},!0),"undefined"!=typeof a5_AJAX_repeatingFormDefaults&&$u.o.assign(this,a5_AJAX_repeatingFormDefaults),$u.o.assign(this,a);for(var n=0;n<this.fields.length;n++)this.fields[n]=this._parseField(this.fields[n]);for(var o=new Object,n=0;n<this.data.length;n++)$(this.contId+"."+n)||(o=this._renderRow(n),$(this.contId).appendChild(o)),this._initializeFields(n),this.order.push(n);if(this._reband(),$(this.contId+".DROPDOWN")&&$e.add(this.contId+".DROPDOWN","mousedown",this._showMenu,this,!0),$(this.contId+".INSERTBEFORE")&&$e.add(this.contId+".INSERTBEFORE","mousedown",this._insertBeforeRow,this,!0),$(this.contId+".INSERTAFTER")&&$e.add(this.contId+".INSERTAFTER","mousedown",this._insertAfterRow,this,!0),$(this.contId+".REMOVE")&&$e.add(this.contId+".REMOVE","mousedown",this._removeRow,this,!0),$(this.contId+".CLEAR")&&$e.add(this.contId+".CLEAR","mousedown",this._clearRow,this,!0),$(this.contId+".MOVEUP")&&$e.add(this.contId+".MOVEUP","mousedown",this._moveRowUp,this,!0),$(this.contId+".MOVEDOWN")&&$e.add(this.contId+".MOVEDOWN","mousedown",this._moveRowDown,this,!0),$(this.contId+".MOVEFIRST")&&$e.add(this.contId+".MOVEFIRST","mousedown",this._moveRowFirst,this,!0),$(this.contId+".MOVELAST")&&$e.add(this.contId+".MOVELAST","mousedown",this._moveRowLast,this,!0),0==this.order.length){indx=this.data.length;for(var r={},n=0;n<this.fields.length;n++)r[this.fields[n].name]=this.fields[n].defaultValue;this.data.push(r);var o=new Object;o=this._renderRow(indx),$(this.contId).appendChild(o),this._initializeFields(indx),this.order=[indx]}},addRow:function(e){for(var t=this.data.length,i=0;i<this.fields.length;i++)"undefined"==typeof e[this.fields[i].name]&&(e[this.fields[i].name]=this.fields[i].defaultValue);this.data.push(e),rEle=this._renderRow(t),$(this.contId).appendChild(rEle),this._initializeFields(t),this.order.push(t),this._reband(),this.onAdd.constructor==Function&&(fResult=this.onAdd.call(this,t,this.order.length-1))},removeRow:function(e){$(this.contId+"."+e).style.display="none";for(var t=0;t<this.order.length;t++)if(this.order[t]==e){this.order.splice(t,1);break}if(this._reband(),this.onRemove.constructor==Function&&(fResult=this.onRemove.call(this,e,t)),0==this.order.length){e=this.data.length;for(var i={},t=0;t<this.fields.length;t++)i[this.fields[t].name]=this.fields[t].defaultValue;this.data.push(i);var s=new Object;s=this._renderRow(e),$(this.contId).appendChild(s),this._initializeFields(e),this.order=[e]}},clearRow:function(e){for(var t=new Object,i=0;i<this.fields.length;i++)this.data[e][this.fields[i].name]=this.fields[i].defaultValue,t=$n(this.contId+"."+e+"."+this.fields[i].name),$svs(t,this.data[e][this.fields[i].name]);this._reband(),this.onClear.constructor==Function&&(fResult=this.onClear.call(this,e))},clear:function(){var e="undefined"==typeof arguments[0]||arguments[0],t=$(this.contId);$e.removeGroup(this.contId+".EVENTS");for(var i=0;i<this.data.length;i++)t.removeChild($(this.contId+"."+i));if(this.data=new Array,this.order=new Array,e){for(var s=0,a={},i=0;i<this.fields.length;i++)a[this.fields[i].name]=this.fields[i].defaultValue;this.data.push(a);var n=new Object;n=this._renderRow(s),$(this.contId).appendChild(n),this._initializeFields(s),this.order=[s]}},moveRow:function(e,t){for(var i=-1,s=0;s<this.order.length;s++)this.order[s]==e&&(i=s);t>i?$(this.contId).insertBefore($(this.contId+"."+e),$(this.contId+"."+this.order[t]).nextSibling):$(this.contId).insertBefore($(this.contId+"."+e),$(this.contId+"."+this.order[t])),this.order.splice(i,1),this.order.splice(t,0,e),this._reband(),this.onMove.constructor==Function&&(fResult=this.onMove.call(this,e,i,t))},getData:function(){var e="undefined"!=typeof arguments[0]?arguments[0]:"",t=new Object;t.oldData=new Array,t.data=new Array;for(var i=0;i<this.order.length;i++){t.data[i]=new Object,t.oldData[i]=new Object;for(var s=0;s<this.fields.length;s++)t.data[i][this.fields[s].name]=$gvs(this.contId+"."+this.order[i]+"."+this.fields[s].name),"number"==this.fields[s].type&&(t.data[i][this.fields[s].name]=$u.s.toNum(t.data[i][this.fields[s].name])),$u.o.assign(t.oldData[i],this.data[this.order[i]]);""!=e&&(t.data[i][e]=this.order[i],t.oldData[i][e]=this.order[i])}return t},getDataForCallback:function(){var e="undefined"!=typeof arguments[0]?arguments[0]:"";""!=e&&(e+=".");for(var t="undefined"!=typeof arguments[1]?arguments[1]:"",i=this.getData(t),s=new Array,a="",n=0;n<this.fields.length;n++)if("object"==typeof i.data[0][this.fields[n].name])for(var o=0;o<i.data.length;o++)a=i.data[o][this.fields[n].name],a=a.constructor==Array?a.join("\n"):"",s[s.length]=e+this.fields[n].name+"["+(o+1)+"]="+urlencode(a),a=i.oldData[o][this.fields[n].name],a=a.constructor==Array?a.join("\n"):"",s[s.length]=e+"old."+this.fields[n].name+"["+(o+1)+"]="+urlencode(a);else for(var o=0;o<i.data.length;o++)s[s.length]=e+this.fields[n].name+"["+(o+1)+"]="+urlencode(i.data[o][this.fields[n].name]),s[s.length]=e+"old."+this.fields[n].name+"["+(o+1)+"]="+urlencode(i.oldData[o][this.fields[n].name]);for(var n=0;n<i.data.length;n++)s[s.length]=e+t+"["+(n+1)+"]="+i.data[n][t],s[s.length]=e+"old."+t+"["+(n+1)+"]="+i.oldData[n][t];return s.join("&")},_renderRow:function(e){var t=document.createElement("div");return t.id=this.contId+"."+e,t.className=this.rowClassName,t.innerHTML=this.html.replace(/\{INDEX\}/g,""+e),t},_initializeFields:function(e){for(var t=new Object,i=0;i<this.fields.length;i++)t=$n(this.contId+"."+e+"."+this.fields[i].name),$svs(t,this.data[e][this.fields[i].name]),$sa(t,"A5RepeatingFormIndex",""+e),$sa(t,"A5HarvestIgnore","true"),$e.add(t,"focus",this._showDropdown,this,!1,this.contId+".EVENTS"),$e.add(t,"blur",this._hideDropdown,this,!1,this.contId+".EVENTS")},_insertBeforeRow:function(){for(var e=this.data.length,t={},i=0;i<this.fields.length;i++)t[this.fields[i].name]=this.fields[i].defaultValue;this.data.push(t);var s=new Object;s=this._renderRow(e),$(this.contId).insertBefore(s,$(this.contId+"."+this._curRowIndx)),this._initializeFields(e);for(var i=0;i<this.order.length;i++)if(this.order[i]==this._curRowIndx){this.order.splice(i,0,e);break}this.onAdd.constructor==Function&&(fResult=this.onAdd.call(this,e,i)),this._hideMenu(),this._reband()},_insertAfterRow:function(){for(var e=this.data.length,t={},i=0;i<this.fields.length;i++)t[this.fields[i].name]=this.fields[i].defaultValue;this.data.push(t);var s=new Object;s=this._renderRow(e),$(this.contId).insertBefore(s,$(this.contId+"."+this._curRowIndx).nextSibling),this._initializeFields(e);for(var i=0;i<this.order.length;i++)if(this.order[i]==this._curRowIndx){this.order.splice(i+1,0,e);break}this.onAdd.constructor==Function&&(fResult=this.onAdd.call(this,e,i+1)),this._hideMenu(),this._reband()},_removeRow:function(){this.removeRow(this._curRowIndx),this._hideMenu()},_clearRow:function(){this.clearRow(this._curRowIndx),this._hideMenu(!0)},_moveRowUp:function(){for(var e=-1,t=1;t<this.order.length;t++)if(this._curRowIndx==this.order[t]){e=t-1;break}e!=-1&&this.moveRow(this._curRowIndx,e),this._hideMenu(!0)},_moveRowDown:function(){for(var e=-1,t=0;t<this.order.length-1;t++)if(this._curRowIndx==this.order[t]){e=t+1;break}e!=-1&&this.moveRow(this._curRowIndx,e),this._hideMenu(!0)},_moveRowFirst:function(){this.moveRow(this._curRowIndx,0),this._hideMenu(!0)},_moveRowLast:function(){this.moveRow(this._curRowIndx,this.order.length-1),this._hideMenu(!0)},_showDropdown:function(e,t){$(t.contId+"."+t._curRowIndx)&&$rcn($(t.contId+"."+t._curRowIndx),t.rowFocusClassName);var i=Number($ga(this,"A5RepeatingFormIndex"));i!=t._curRowIndx&&($(t.contId+".MENU").style.display="none"),t._curRowIndx=i,t._curFieldId=this.id,clearTimeout(t._tBarTimeout),$acn($(t.contId+"."+t._curRowIndx),t.rowFocusClassName);var s=$(t.contId+".DROPDOWN");s.style.display="",$po(s,$(t.contId+"."+t._curRowIndx),t.dropDownLocation,t.dropDownXOffset,t.dropDownYOffset-$(t.contId).scrollTop)},_hideDropdown:function(e,t){t._tBarTimeout=setTimeout(function(){t._hideDropdownComplete()},200)},_hideDropdownComplete:function(){$rcn($(this.contId+"."+this._curRowIndx),this.rowFocusClassName),$(this.contId+".DROPDOWN").style.display="none",$(this.contId+".MENU").style.display="none"},_showMenu:function(e){var t=$(this.contId+".MENU");t.style.display="",$po(t,$(this.contId+".DROPDOWN"),this.menuLocation,this.menuXOffset,this.menuYOffset),setTimeout(Function("$('"+this._curFieldId+"').focus()"),10)},_hideMenu:function(){var e="undefined"!=typeof arguments[0]&&arguments[0],t=$(this.contId+".MENU");t.style.display="none",e&&setTimeout(Function("$('"+this._curFieldId+"').focus()"),10)},_parseField:function(e){return"object"!=typeof e&&(e={name:e}),$u.o.assign(e,{name:"",type:"string",defaultValue:""},!0),e},_reband:function(){if(""!=this.rowAltClassName)for(var e=0;e<this.order.length;e++)e-2*Math.floor(e/2)==0?$(this.contId+"."+this.order[e]).className=this.rowClassName:$(this.contId+"."+this.order[e]).className=this.rowAltClassName}},"undefined"==typeof A5)var A5=new Object;if(A5.flags={},A5.flags.supportsTouch=navigator.userAgent.match(/android/i)||!!("createTouch"in document),A5.flags.supportsMouse=!!!navigator.userAgent.match(/(iPad|iPhone|iPod)/i),navigator.userAgent.match(/ipad/i)||navigator.userAgent.match(/playbook/i)||navigator.userAgent.match(/xoom/i)||navigator.userAgent.match(/kindle/i)||navigator.userAgent.match(/hp-tablet/i)||navigator.userAgent.match(/gt-p1000/i)||navigator.userAgent.match(/nexus 7/i)||navigator.userAgent.match(/tablet/i)?A5.flags.isTablet=!0:A5.flags.isTablet=!1,navigator.userAgent.match(/safari/i)?A5.flags.isSafari=!navigator.userAgent.match(/chrome/i):A5.flags.isSafari=!1,A5.flags.isMobile=!(!navigator.userAgent.match(/mobile/i)&&!navigator.userAgent.match(/android/i)),A5.flags.isWebKit=!!navigator.userAgent.match(/webkit/i),A5.flags.isOpera=!!navigator.userAgent.match(/opera/i),A5.flags.isFireFox=!!navigator.userAgent.match(/firefox/i),A5.flags.isIE=!!navigator.userAgent.match(/msie/i),A5.flags.isWindows=!!navigator.userAgent.match(/windows/i),A5.flags.isIPhone=!!navigator.userAgent.match(/iphone/i),A5.flags.isIPad=!!navigator.userAgent.match(/ipad/i),A5.flags.isXoom=!!navigator.userAgent.match(/xoom/i),A5.flags.isKindle=!!navigator.userAgent.match(/kindle/i),A5.flags.isPlaybook=!!navigator.userAgent.match(/playbook/i),A5.flags.isGalaxy=!!navigator.userAgent.match(/gt-p1000/i),A5.flags.isTouchPad=!!navigator.userAgent.match(/hp-tablet/i),A5.flags.isAndroid=!!navigator.userAgent.match(/Android/i),A5.flags.userAgent=navigator.userAgent,A5.flags.isNotWebKit=!A5.flags.isWebKit,A5.flags.useBasicScroller=!A5.flags.isWebKit,A5.flags.isPortraitMode=0==window.orientation,A5.flags.iOSVersion=-1,A5.flags.isIPhone||A5.flags.isIPad){var ua=navigator.userAgent;ua=ua.substr(ua.indexOf("OS ")+3),A5.flags.iOSVersion=ua.split(" ")[0].split("_").join(".")}A5.d={evnts:{down:"mousedown",up:"mouseup",move:"mousemove",click:"click",dblClick:"dblclick"}},A5.flags.supportsTouch&&(A5.d={evnts:{down:"abstractdown",up:"abstractup",move:"abstractmove",click:"abstractclick",dblClick:"abstractdblclick"}}),A5.form=new Object,A5.form.submit=a5_AJAX_Form,A5.form.prepare=a5_AJAX_FormPrepare,A5.form.harvest=a5_AJAX_Form_RegionHarvest,A5.form.reset=a5_AJAX_FormReset,A5.form.setErrors=a5_AJAX_Form_ErrorsSet,A5.form.clearErrors=a5_AJAX_Form_ErrorsClear,A5.form.populateSelect=function(e,t,i,s){if("string"==typeof s)return a5_AJAX_Form_populateSelect(e,t,i,s),!1;var a=$(e),n=0;if(s){if(a.options.length>0){for(var o=a.options.length-1;o>=0;o--)a.options[o]=null;a.options[0]=null}}else n=a.options.length;for(var o=0;o<i.length;o++)i[o].constructor==Array?i[o].length>1?a.options[n]=new Option(i[o][0],i[o][1]):a.options[n]=new Option(i[o][0],i[o][0]):a.options[n]=new Option(i[o],i[o]),n++;var r=!1;if(a.options.length>0){for(var o=0;o<a.options.length;o++)if(a.options[o].value==t){r=!0,a.options.selectedIndex=o;break}0==r&&(a.options.add(new Option(t,t),0),a.options.selectedIndex=0)}},A5.form.setCtrlDirty=a5_AJAX_Form_SetDirtyControl,A5.form._setDirty=a5_AJAX_Form_SetDirty,A5.form._setFocus=a5_AJAX_Form_SetFocus,A5.grid=new Object,A5.grid.action=a5_AJAX_GridAction,A5.grid.submit=a5_AJAX_GridSubmit,A5.ajax=new Object,A5.ajax.buildURLParam=a5_AJAX_Form_SubmitValueParam,A5.ajax.callback=a5_AJAX_Callback,A5.ajax.urlEncode=urlencode,A5.ajax.addURLRequiredData||(A5.ajax.addURLRequiredData=function(e){return e}),A5.ajax.addParamRequiredData||(A5.ajax.addParamRequiredData=function(e){return e}),A5.Accordion=a5_AJAX_accordion,A5.Tab=a5_AJAX_tab,A5.Genie=a5_AJAX_genie,A5.RepeatingForm=a5_AJAX_repeatingForm,A5.Watch={_w:{},add:function(e,t,i){var s=new Array;if(t.constructor==Array)for(var a=0;a<t.length;a++)s.push($(t[a]));else s.push($(t));for(var n="",o=new Array,a=0;a<s.length;a++)o.push(s[a].id),""==$ga(s[a],"A5WatchNames")||null==$ga(s[a],"A5WatchNames")?($e.add(s[a],"change",this._onChange),"input"!=s[a].tagName.toLowerCase()||"radio"!=s[a].type.toLowerCase()&&"checkbox"!=s[a].type.toLowerCase()||$e.add(s[a],"click",this._onChange),$sa(s[a],"A5WatchNames",e)):(n=$ga(s[a],"A5WatchNames"),n=n.split(";"),$u.a.find(n,e)==-1&&(n.push(e),$sa(s[a],"A5WatchNames",n.join(";"))));if("undefined"==typeof i.data?i.data={}:"object"!=typeof i.data&&(i.data={value:i.data}),$u.o.assign(i.data,{external:!1,initial:!1}),"undefined"==typeof i.fireInitial&&(i.fireInitial=!0),this._w[e]={ids:o,data:i.data,onChange:i.onChange},i.fireInitial){var r=new Object;$u.o.assign(r,i.data),r.external=!0,r.initial=!0,i.onChange.call(s[0],r)}},remove:function(e){if("undefined"!=typeof this._w[e]){for(var t=this._w[e].ids,i=0,s=-1,a=0;a<t.length;a++)i=$(t[a]),wNames=$ga(i,"A5WatchNames"),""!=wNames&&null!=wNames&&(wNames=wNames.split(";"),1==wNames.length?($e.remove(i,"change",this._onChange),"input"!=i.tagName.toLowerCase()||"radio"!=i.type.toLowerCase()&&"checkbox"!=i.type.toLowerCase()||$e.remove(i,"click",this._onChange),$sa(i,"A5WatchNames","")):(s=$u.a.find(wNames,e),wNames.splice(s,1),$sa(i,"A5WatchNames",wNames.join(";"))));delete this._w[e]}},fire:function(e){if("undefined"!=typeof this._w[e]){var t=this._w[e].ids,i=$(t[0]),s=new Object;$u.o.assign(s,this._w[e].data),s.external=!0,this._w[e].onChange.call(i,s)}},_onChange:function(){var e=$ga(this,"A5WatchNames");e=e.split(";"),setTimeout(Function("var wNames = "+$u.o.toJSON(e)+"; for(var i=0; i<wNames.length; i++) if(A5.Watch._w[wNames[i]]) A5.Watch._w[wNames[i]].onChange.call(this,A5.Watch._w[wNames[i]].data);"),1)}},A5.RichTextEdit=Class.create(),A5.RichTextEdit.prototype={initialize:function(e,t){if(!$(e))return!1;this.ctrlId=e,$u.o.assign(t,{defaultLinkedCSS:"",defaultCSS:"",onStateChange:0,onChange:0},!0),$u.o.assign(this,t),this.defaultCSS.constructor==Array?this.defaultCSS.join("\n"):this.defaultCSS.constructor!=String&&(this.defaultCSS=""),this.defaultCSS="table, td {border: 1px dashed #aaa;}"+this.defaultCSS;var i=$(e),s=document.createElement("iframe");s.id=e+".HTMLEDITOR",""!=i.style.width?s.style.width=i.style.width:s.style.width=i.offsetWidth+"px",""!=i.style.height?s.style.height=i.style.height:s.style.height=i.offsetHeight+"px",s.style.overflow="auto",s.frameBorder="0",s.border="0",s.className=i.className,i.parentNode.insertBefore(s,i),i.style.display="none",this._iEle=s,this._tEle=i,document.all&&"Opera"!=navigator.appName?(this._iEle.contentWindow.document.designMode="on",this._eDoc=this._iEle.contentWindow.document,$e.add(this._iEle.contentWindow,"focus",this._focus,this,!0),$e.add(this._iEle.contentWindow,"blur",this._blur,this,!0),this.focus()):(this._iEle.contentDocument.designMode="on",this._iEle.style.lineHeight="0",this._eDoc=this._iEle.contentDocument,$e.add(this._eDoc,"focus",this._focus,this,!0),$e.add(this._eDoc,"blur",this._blur,this,!0)),this._eDoc.open();var a=i.value;""==a&&(a=""),this._eDoc.write("<head>"+$if(""!=this.defaultLinkedCSS,'<link rel="stylesheet" type="text/css" href="'+this.defaultLinkedCSS+'" />',"")+$if(""!=this.defaultCSS,'<style type="text/css">'+this.defaultCSS+"</style>","")+"</head><body>"+a+"</body>"),this._eDoc.close(),$e.add(this._eDoc,"keyup",this._getState,this,!0),$e.add(this._eDoc,"keydown",this._keyDown,this,!0),$e.add(this._eDoc,"mouseup",this._getState,this,!0),this.state={bold:!1,underline:!1,italic:!1,strikeThrough:!1,justifyLeft:!0,justifyCenter:!1,justifyRight:!1,justifyFull:!1,fontName:"",fontSize:"",unorderedList:!1,orderedList:!1,canUndo:!1,canRedo:!1},this.onStateChange.constructor==Function&&this.onStateChange(),this._blurTO=0;var n=this;setTimeout(function(){n._getClassNames(),delete n},10),this._kw=new AUI.KeyWatcher([{key:"ctrl+b",handle:this.bold},{key:"ctrl+i",handle:this.italic},{key:"ctrl+u",handle:this.underline}],this,this._iEle.contentWindow)},command:function(e){this._iEle.contentWindow.focus();var t=arguments[1],i=e.toLowerCase();if("backcolor"==i){var s=this._getSelElement();if(!s.tagName)return!1;var a=s.tagName.toLowerCase(),n=["p","pre","div","td","th","li","h1","h2","h3","h4","h5","h6","blockquote","dd","dt","legend","fieldset","caption","body"];if($u.a.find(n,a)==-1)for(;$u.a.find(n,a)==-1;)s=s.parentNode,s.tagName&&(a=s.tagName.toLowerCase());if($u.a.find(n,a)==-1)return!1;"body"!=s.tagName.toLowerCase()&&(s.style.backgroundColor=t)}else if("hilitecolor"==i)navigator.userAgent.toLowerCase().match("firefox")||(e="backcolor"),this._eDoc.queryCommandEnabled(e)&&this._eDoc.execCommand(e,!1,t);else if("insertdate"==i){var o=new Date;o=$u.d.toStr(o,"[mm]/[dd]/[yyyy]"),this._insertHTML("",""+o)}else if("inserttime"==i){var r=new Date;r=$u.d.toStr(r,"[t:h]:[t:m][t:am]"),this._insertHTML("",""+r)}else if("inserttable"==i){t=t.split(","),t[0]=$u.s.toNum(t[0]),t[1]=$u.s.toNum(t[1]);for(var l=new Array,d=0;d<t[1];d++){l.push(" <tr>");for(var h=0;h<t[0];h++)l.push("  <td>&nbsp;</td>");l.push(" </tr>")}this._insertHTML("table",l.join("\n"))}else if("inserttablecolumn"==i){var s=this._getSelElement();if(!s.tagName)return!1;if("td"!=s.tagName.toLowerCase())for(;"td"!=s.tagName.toLowerCase();)s=s.parentNode;if("td"!=s.tagName.toLowerCase())return!1;var c=s.cellIndex;for(null!=t&&"after"==t.toLowerCase()&&(c+=1);"table"!=s.tagName.toLowerCase();)s=s.parentNode;for(var d=0;d<s.rows.length;d++)s.rows[d].insertCell(c),s.rows[d].cells[c].innerHTML="&nbsp;"}else if("inserttablerow"==i){var s=this._getSelElement();if(!s.tagName)return!1;if("td"!=s.tagName.toLowerCase())for(;"td"!=s.tagName.toLowerCase();)s=s.parentNode;if("td"!=s.tagName.toLowerCase())return!1;var u=s.parentNode.rowIndex;for(null!=t&&"after"==t.toLowerCase()&&(u+=1);"table"!=s.tagName.toLowerCase();)s=s.parentNode;for(var f=0,d=0;d<s.rows.length;d++)f=Math.max(f,s.rows[d].cells.length);s.insertRow(u);for(var d=0;d<f;d++)s.rows[u].insertCell(d),s.rows[u].cells[d].innerHTML="&nbsp;"}else if("deletetablecolumn"==i){var s=this._getSelElement();if(!s.tagName)return!1;if("td"!=s.tagName.toLowerCase())for(;"td"!=s.tagName.toLowerCase();)s=s.parentNode;if("td"!=s.tagName.toLowerCase())return!1;for(var c=s.cellIndex;"table"!=s.tagName.toLowerCase();)s=s.parentNode;for(var d=0;d<s.rows.length;d++)s.rows[d].deleteCell(c)}else if("deletetablerow"==i){var s=this._getSelElement();if(!s.tagName)return!1;if("td"!=s.tagName.toLowerCase())for(;"td"!=s.tagName.toLowerCase();)s=s.parentNode;if("td"!=s.tagName.toLowerCase())return!1;for(var u=s.parentNode.rowIndex;"table"!=s.tagName.toLowerCase();)s=s.parentNode;s.deleteRow(u)}else if("setclassname"==i){var s=this._getSelElement();"body"!=s.tagName.toLowerCase()&&(s.className=t)}else if("cut"==i||"copy"==i||"paste"==i)navigator.userAgent.toLowerCase().match("firefox")?alert("Firefox does not support "+i+". Use keyboard shortcut to "+i+"."):this._eDoc.execCommand(e,!1,t);else if(document.all&&"Opera"!=navigator.appName){var p=this._eDoc.selection.createRange();p.expand("character");var m=this._eDoc.selection.createRange();m.expand("textedit");for(var _=m.parentElement();"body"!=_.tagName.toLowerCase();)_=_.parentNode;_.innerHTML==this._eDoc.body.innerHTML&&this._eDoc.queryCommandEnabled(e)&&this._eDoc.execCommand(e,!1,t)}else this._eDoc.queryCommandEnabled(e)&&this._eDoc.execCommand(e,!1,t);this._getState(),this.focus()},bold:function(){return this.command("bold"),!0},italic:function(){return this.command("italic"),!0},underline:function(){return this.command("underline"),!0},toggleDesignMode:function(){var e=!0;if("undefined"!=typeof arguments[0]){if("code"!=arguments[0].toLowerCase()&&"textarea"!=arguments[0].toLowerCase()||(e=!1),"none"!=this._iEle.style.display&&e||"none"==this._iEle.style.display&&!e)return!1}else"none"!=this._iEle.style.display&&(e=!1);e?(this._tEle.value!=this.getHTML()&&this.setHTML(this._tEle.value),this._iEle.style.display="",this._tEle.style.display="none"):(this._tEle.value=this.getHTML(),this._iEle.style.display="none",this._tEle.style.display="")},getHTML:function(){var e=String(this._eDoc.body.innerHTML);return e=e.replace(RegExp("\r","g"),""),e=e.replace(RegExp("<p","gi"),"<div"),e=e.replace(RegExp("</p>","gi"),"</div>")},setHTML:function(e){this._eDoc.body.innerHTML=e,this._tEle.value=e,document.all&&"Opera"!=navigator.appName&&"none"!=this._iEle.style.display&&(this._iEle.style.display="none",this._iEle.style.display="")},focus:function(){document.all&&"Opera"!=navigator.appName&&(this._iEle.style.visibility="hidden",this._iEle.style.overflow="hidden",this._iEle.style.visibility="",this._iEle.style.overflow=""),this._iEle.contentWindow.focus()},_keyDown:function(e){var t=e.charCode||e.keyCode;if(9==t){for(var i=!1,s=this._getSelElement();"body"!=s.tagName.toLowerCase();){if("li"==s.tagName.toLowerCase()){i=!0;break}s=s.parentNode}$e.preventDefault(e),i?e.shiftKey?this.command("outdent"):this.command("indent"):e.shiftKey||this._insertHTML("","&nbsp;&nbsp;&nbsp;&nbsp;")}},_getState:function(e){if(document.all&&"Opera"!=navigator.appName,window.getSelection){var t=this._iEle.contentWindow.getSelection(),i=t.getRangeAt(0),s=i.commonAncestorContainer;if("undefined"!=typeof s.tagName&&"html"==s.tagName.toLowerCase())return!1}var a=$u.o.toJSON(this.state);this.state.bold=this._eDoc.queryCommandState("bold"),this.state.underline=this._eDoc.queryCommandState("underline"),this.state.italic=this._eDoc.queryCommandState("italic"),this.state.strikeThrough=this._eDoc.queryCommandState("strikethrough"),this.state.justifyLeft=this._eDoc.queryCommandState("justifyLeft"),this.state.justifyCenter=this._eDoc.queryCommandState("justifyCenter"),this.state.justifyRight=this._eDoc.queryCommandState("justifyRight"),this.state.justifyFull=this._eDoc.queryCommandState("justifyFull"),this.state.justifyLeft||this.state.justifyCenter||this.state.justifyRight||this.state.justifyFull||(this.state.justifyLeft=!0),this.state.fontName=String(this._eDoc.queryCommandValue("fontName")),this.state.fontSize=String(this._eDoc.queryCommandValue("fontSize")),this.state.unorderedList=this._eDoc.queryCommandState("InsertUnorderedList"),this.state.orderedList=this._eDoc.queryCommandState("InsertOrderedList");var n=$u.o.toJSON(this.state);if(a!=n&&this.onStateChange.constructor==Function&&this.onStateChange(),this._tEle.value=this.getHTML(),e){if("keyup"==e.type.toLowerCase()){var o=e.charCode||e.keyCode;o>=16&&o<=18||o>=37&&o<=40||27==o||o>=33&&o<=36||45==o||o>=112&&o<=123||this.onChange.constructor==Function&&this.onChange()}}else this.onChange.constructor==Function&&this.onChange()},_insertHTML:function(e,t){this._iEle.contentWindow.focus();var i,s="undefined"!=typeof arguments[2]?arguments[2]:{};if(this._eDoc.selection&&this._eDoc.selection.createRange&&"Opera"!=navigator.appName){i=this._eDoc.selection.createRange();var a=this._eDoc.selection.createRange();if(a.expand("textedit"),a.parentElement().innerHTML==this._eDoc.body.innerHTML){var n=new Array;for(var o in s)if(n.push(" "),"style"==o){var r=new Array;for(var l in s[o])r.push(l+": "+s[o][l]+";");r=r.join(" "),n.push('style="'+r+'"')}else n.push(o+'="'+$u.s.tran(s[o],'"','\\"')+'"');n=n.join(""),""!=e?i.pasteHTML("<"+e+n+">"+t+"</"+e+">"):i.pasteHTML(t)}}else if(window.getSelection){var d=this._iEle.contentWindow.getSelection();if(i=d.getRangeAt(0),i.deleteContents(),""!=e){var h=this._eDoc.createElement(e);h.innerHTML=t;for(var o in s)"style"==o?$ss(h,s[o]):h[o]=s[o];""==this._eDoc.body.innerHTML?this._eDoc.body.appendChild(h):i.insertNode(h)}else this._eDoc.queryCommandEnabled("inserthtml")&&this._eDoc.execCommand("inserthtml",!1,t)}},_getSelElement:function(){var e;if(this._eDoc.selection&&this._eDoc.selection.createRange&&"Opera"!=navigator.appName)return e=this._eDoc.selection.createRange(),e.expand("character"),e.parentElement();if(window.getSelection){var t=this._iEle.contentWindow.getSelection();return t.anchorNode.tagName?t.anchorNode:t.anchorNode.parentNode}return!1},_getClassNames:function(){for(var e=new Array,t=new Array,i=0,s=0;s<this._eDoc.styleSheets.length;s++)if(i=!1,this._eDoc.styleSheets[s].cssRules?i=this._eDoc.styleSheets[s].cssRules:this._eDoc.styleSheets[s].rules&&(i=this._eDoc.styleSheets[s].rules),i)for(var a=0;a<i.length;a++)e=e.concat(String(i[a].selectorText).split(","));for(var n=0,s=0;s<e.length;s++)if(e[s].indexOf(".")!=-1){n=e[s].split("."),n.shift();for(var a=0;a<n.length;a++)n[a]=$u.s.tran(n[a],[" ","\n",":"],[" "," "," "]),n[a]=$u.s.word(n[a],1," ");t=t.concat(n)}t=$u.a.dedup(t)},_focus:function(){clearTimeout(this._blurTO),this._kw.on()},_blur:function(){var e=this;this._blurTO=setTimeout(function(){e._completeBlur()},100)},_completeBlur:function(){this._kw.off()}},A5.RichTextEditor=Class.create(),A5.RichTextEditor.prototype={initialize:function(e,t){return!!$(e)&&(this.ctrlId=e,$u.o.assign(t,{isPopup:!1,onSave:0,onEdit:0,onChange:0,defaultLinkedCSS:"",defaultCSS:"",buttonClassName:"",buttonCheckedClassName:"",insertImage:{relativePath:"",styleName:"",titleText:"Insert Image",bodyText:"File:",editWatermarkText:"",editImage:""},insertFile:{relativePath:"",styleName:"",titleText:"Insert File",bodyText:"File:",editWatermarkText:"",editImage:""},popupWindow:{},insertWindow:{}},!0),$u.o.assign(t.popupWindow,{baseCtrlId:this.ctrlId,title:{show:!1},header:{show:!1},body:{content:{type:"element",elementId:this.ctrlId+".window"}},footer:{show:!1},type:"modal",resize:"both",autoShow:!1,autoPosition:!1,onResize:function(){var e=$(this.baseCtrlId+".HTMLEDITOR"),t=$(this.baseCtrlId);return"none"==t.style.display?(e.style.height=e.offsetHeight+(AUI.Resize._s.height-AUI.Resize._s.initialHeight)+"px",e.style.width="100%",t.style.height=e.style.height,t.style.width="100%"):(t.style.height=t.offsetHeight+(AUI.Resize._s.height-AUI.Resize._s.initialHeight)+"px",t.style.width="100%",e.style.height=t.style.height,e.style.width="100%"),e=$(this.getWindowId("body")),e.style.height="",""!=$(this.getWindowId("body-container")).style.width&&($(this.baseCtrlId+".window.body").style.width="",$(this.baseCtrlId+".window").style.width=""),!0}}),$u.o.assign(t.insertWindow,{baseCtrlId:this.ctrlId,title:{html:"Insert",tools:{items:[A5._windowDefaults.title.tools.defaults.close]}},header:{show:!1},body:{content:{type:"url",url:"about:blank"}},footer:{show:!1},type:"modal",resize:"both",autoShow:!1,autoPosition:!0}),$u.o.assign(this,t),this.isPopup&&(this._window=new A5.Window(this.popupWindow)),this._iWindow=new A5.Window(this.insertWindow),$e.add(this._iWindow.getWindowId(),"a5insert",function(e,t){t._iWindow.hide();var i=$ga(this,"a5inserttype");if("image"==i){var s=$ga(this,"a5imagetoinsert");t._rteObj.command("insertimage",s)}else if("file"==i){var a=$ga(this,"a5filetoinsert"),n=a.split("/").pop();t._rteObj._insertHTML("a",n,{href:a,target:"_blank"})}},this),this._rteObj=new A5.RichTextEdit(this.ctrlId,{onStateChange:function(){if(this.state.bold?$scn(this.ctrlId+".bold",this.buttonCheckedClassName):$scn(this.ctrlId+".bold",this.buttonClassName),this.state.italic?$scn(this.ctrlId+".italic",this.buttonCheckedClassName):$scn(this.ctrlId+".italic",this.buttonClassName),this.state.underline?$scn(this.ctrlId+".underline",this.buttonCheckedClassName):$scn(this.ctrlId+".underline",this.buttonClassName),this.state.justifyLeft?$scn(this.ctrlId+".justifyLeft",this.buttonCheckedClassName):$scn(this.ctrlId+".justifyLeft",this.buttonClassName),this.state.justifyCenter?$scn(this.ctrlId+".justifyCenter",this.buttonCheckedClassName):$scn(this.ctrlId+".justifyCenter",this.buttonClassName),this.state.justifyRight?$scn(this.ctrlId+".justifyRight",this.buttonCheckedClassName):$scn(this.ctrlId+".justifyRight",this.buttonClassName),
this.state.justifyFull?$scn(this.ctrlId+".justifyFull",this.buttonCheckedClassName):$scn(this.ctrlId+".justifyFull",this.buttonClassName),this.state.unorderedList?$scn(this.ctrlId+".unorderedList",this.buttonCheckedClassName):$scn(this.ctrlId+".unorderedList",this.buttonClassName),this.state.orderedList?$scn(this.ctrlId+".orderedList",this.buttonCheckedClassName):$scn(this.ctrlId+".orderedList",this.buttonClassName),""==this.state.fontName?$svs(this.ctrlId+".fontName.value","Font name"):"string"==typeof this.state.fontName?$svs(this.ctrlId+".fontName.value",this.state.fontName):$svs(this.ctrlId+".fontName.value","Font name"),""==this.state.fontSize)$svs(this.ctrlId+".fontSize.value","Font size");else{var e=$u.s.toNum(""+this.state.fontSize),t=["Font size","1 (8pt)","2 (10pt)","3 (12pt)","4 (14pt)","5 (18pt)","6 (24pt)","7 (36pt)"];e>t.length&&(e=0),$svs(this.ctrlId+".fontSize.value",t[e])}i=$(this.ctrlId+".format.menu"),i&&"none"!=i.style.display&&(i.style.display="none",$e.remove(document.body,"mouseup",this._formatMenuHide));var i=$(this.ctrlId+".fontName.menu");i&&"none"!=i.style.display&&(i.style.display="none",$e.remove(document.body,"mouseup",this._fontNameMenuHide)),i=$(this.ctrlId+".fontSize.menu"),i&&"none"!=i.style.display&&(i.style.display="none",$e.remove(document.body,"mouseup",this._fontNameMenuHide)),i=$(this.ctrlId+".colorMenu"),i&&"none"!=i.style.display&&(i.style.display="none",$(this.ctrlId+".colorMenu.noColor").style.display="none",$e.remove(document.body,"mouseup",this._fontNameMenuHide)),i=$(this.ctrlId+".tableMenu"),i&&"none"!=i.style.display&&(i.style.display="none",$e.remove(document.body,"mouseup",this._fontNameMenuHide))},onChange:this.onChange,defaultLinkedCSS:this.defaultLinkedCSS,defaultCSS:this.defaultCSS,buttonClassName:this.buttonClassName,buttonCheckedClassName:this.buttonCheckedClassName}),$e.add(this.ctrlId+".format","click",this._formatMenuShow,this,!0),$e.add(this.ctrlId+".fontName","click",this._fontNameMenuShow,this,!0),$e.add(this.ctrlId+".fontSize","click",this._fontSizeMenuShow,this,!0),$e.add(this.ctrlId+".foreColor","click",this._foreColorMenuShow,this,!0),$e.add(this.ctrlId+".hiliteColor","click",this._hiliteColorMenuShow,this,!0),$e.add(this.ctrlId+".backColor","click",this._backColorMenuShow,this,!0),$e.add(this.ctrlId+".table","click",this._tableMenuShow,this,!0),void(this.isPopup&&this._window.hide()))},command:function(e){var t=arguments[1];this._rteObj.command(e,t)},edit:function(e){var t=$(e);this._rteObj.setHTML($gvs(t));var i=e;"none"==t.style.display&&$(i+".DISPLAY")&&(i+=".DISPLAY"),this._window.show("popup",i),this._tCtrlId=e,this.onEdit.constructor==Function&&this.onEdit(),this._rteObj.focus()},save:function(){$svs(this._tCtrlId,this._rteObj.getHTML()),this.onSave.constructor==Function&&this.onSave(),this.hide()},resize:function(e,t){var i=$(this.ctrlId+".HTMLEDITOR");"number"==typeof e&&(e+="px"),"number"==typeof t&&(t+="px"),i.style.width=e,i.style.height=t,i=$(this.ctrlId),i.style.width=e,i.style.height=t},hide:function(){this._window.hide()},toggleDesignMode:function(){this._rteObj.toggleDesignMode(arguments[0])},insert:function(e){"image"==e?(this._iWindow.setTitle(this.insertImage.titleText),this._iWindow.body.content.url="__a5FileUploadMasterPage.a5w?fileUploadUrl=__a5HTMLEditorFileInsertPage.a5w&fileUploadAutoUpload=true&fileUploadText="+this.insertImage.bodyText+"&fileSelectImg="+this.insertImage.editImage+"&fileBoxWaterMark="+this.insertImage.editWatermarkText+"&stylesheetName="+this.insertImage.styleName+"&insertType=image&relativePath="+this.insertImage.relativePath+"&windowID="+this._iWindow.getWindowId()):(this._iWindow.setTitle(this.insertFile.titleText),this._iWindow.body.content.url="__a5FileUploadMasterPage.a5w?fileUploadUrl=__a5HTMLEditorFileInsertPage.a5w&fileUploadAutoUpload=true&fileUploadText="+this.insertFile.bodyText+"&fileSelectImg="+this.insertFile.editImage+"&fileBoxWaterMark="+this.insertFile.editWatermarkText+"&stylesheetName="+this.insertFile.styleName+"&insertType=file&relativePath="+this.insertFile.relativePath+"&windowID="+this._iWindow.getWindowId()),this._iWindow.refresh(),this._iWindow.show()},_fontNameMenuShow:function(e){$e.stopEvent(e);var t=$(this.ctrlId+".fontName"),i=$(this.ctrlId+".fontName.menu");return i.style.display="",$po(i,t,"dropdown"),$e.add(document.body,"mouseup",this._fontNameMenuHide,this,!0),!1},_fontNameMenuHide:function(){var e=$(this.ctrlId+".fontName.menu");"none"!=e.style.display&&(e.style.display="none",$e.remove(document.body,"mouseup",this._fontNameMenuHide))},_fontSizeMenuShow:function(e){$e.stopEvent(e);var t=$(this.ctrlId+".fontSize"),i=$(this.ctrlId+".fontSize.menu");return i.style.display="",$po(i,t,"dropdown"),$e.add(document.body,"mouseup",this._fontSizeMenuHide,this,!0),!1},_fontSizeMenuHide:function(){var e=$(this.ctrlId+".fontSize.menu");"none"!=e.style.display&&(e.style.display="none",$e.remove(document.body,"mouseup",this._fontSizeMenuHide))},_foreColorMenuShow:function(e){$e.stopEvent(e),this._colorTarget="foreColor";var t=$(this.ctrlId+".foreColor"),i=$(this.ctrlId+".colorMenu");return i.style.display="",$po(i,t,"dropdown"),$e.add(document.body,"mouseup",this._foreColorMenuHide,this,!0),!1},_foreColorMenuHide:function(){var e=$(this.ctrlId+".colorMenu");"none"!=e.style.display&&(e.style.display="none",$e.remove(document.body,"mouseup",this._foreColorMenuHide))},_hiliteColorMenuShow:function(e){$e.stopEvent(e),this._colorTarget="hilitecolor";var t=$(this.ctrlId+".hiliteColor"),i=$(this.ctrlId+".colorMenu");return i.style.display="",$po(i,t,"dropdown"),$e.add(document.body,"mouseup",this._hiliteColorMenuHide,this,!0),!1},_hiliteColorMenuHide:function(){var e=$(this.ctrlId+".colorMenu");"none"!=e.style.display&&(e.style.display="none",$e.remove(document.body,"mouseup",this._hiliteColorMenuHide))},_backColorMenuShow:function(e){$e.stopEvent(e),this._colorTarget="backColor";var t=$(this.ctrlId+".backColor"),i=$(this.ctrlId+".colorMenu");return $(this.ctrlId+".colorMenu.noColor").style.display="",i.style.display="",$po(i,t,"dropdown"),$e.add(document.body,"mouseup",this._backColorMenuHide,this,!0),!1},_backColorMenuHide:function(){var e=$(this.ctrlId+".colorMenu");"none"!=e.style.display&&(e.style.display="none",$(this.ctrlId+".colorMenu.noColor").style.display="none",$e.remove(document.body,"mouseup",this._backColorMenuHide))},_tableMenuShow:function(e){$e.stopEvent(e);var t=$(this.ctrlId+".table"),i=$(this.ctrlId+".tableMenu");return i.style.display="",$po(i,t,"dropdown"),$e.add(document.body,"mouseup",this._tableMenuHide,this,!0),!1},_tableMenuHide:function(){var e=$(this.ctrlId+".tableMenu");"none"!=e.style.display&&(e.style.display="none",$e.remove(document.body,"mouseup",this._tableMenuHide))},_tableMenuSizeHighlight:function(e,t){for(var i=1;i<=10;i++)for(var s=1;s<=8;s++)i<=e&&s<=t?$(this.ctrlId+".tbl."+i+"x"+s).firstChild.style.background="#ccc":$(this.ctrlId+".tbl."+i+"x"+s).firstChild.style.background="white"},_formatMenuShow:function(e){$e.stopEvent(e);var t=$(this.ctrlId+".format"),i=$(this.ctrlId+".format.menu");return i.style.display="",$po(i,t,"dropdown"),$e.add(document.body,"mouseup",this._formatMenuHide,this,!0),!1},_formatMenuHide:function(){var e=$(this.ctrlId+".format.menu");"none"!=e.style.display&&(e.style.display="none",$e.remove(document.body,"mouseup",this._formatMenuHide))}},A5.windows={_w:{},defaultContainer:"",get:function(e){if("number"==typeof e)return A5.windows._w[""+e]},getFromElement:function(e){var t=$(e);if(t){for(;(""==t.getAttribute("A5WindowType")||null==t.getAttribute("A5WindowType"))&&"body"!=t.tagName.toLowerCase();)t=t.parentNode;if(""!=String(t.getAttribute("A5WindowType")))return e=t.id.substr(5),A5.windows._w[e]}},getTop:function(){var e=0,t=-1;for(var i in A5.windows._w)A5.windows._w[i].hidden||A5.windows._w[i]._zIndex>e&&(e=A5.windows._w[i]._zIndex,t=A5.windows._w[i]._windowCurIndx);if(t!=-1)return A5.windows._w[""+t]},_hidePopupsAbove:function(e){for(var t in A5.windows._w)A5.windows._w[t].hidden||("popup"==A5.windows._w[t].type||"modal-popup"==A5.windows._w[t].type)&&A5.windows._w[t]._zIndex>=e&&A5.windows._w[t].hide()},_hidePopups:function(){var e=[arguments[0]];"number"==typeof arguments[0]&&(e=A5.windows._w[""+arguments[0]]._winChain);for(var t in A5.windows._w)A5.windows._w[t].hidden||"popup"!=A5.windows._w[t].type&&"modal-popup"!=A5.windows._w[t].type||$u.a.find(e,A5.windows._w[t]._windowCurIndx)!=-1||A5.windows._w[t].hide()}},$e.add(window,"unload",function(){for(var e in A5.windows._w)delete A5.windows._w[e]}),A5.Window=Class.create(),A5.Window.prototype={initialize:function(e){this._windowId="A5dlg"+this._windowIndx[0],this._windowCurIndx=this._windowIndx[0],this._zIndex=500+this._windowCurIndx,this._isMaximized=!1,$u.o.assign(this,{container:A5.windows.defaultContainer,type:"",theme:"",override:"base",autoPosition:!0,autoShow:!1,resize:"none",className:"",outerWrapClassName:"",innerWrapClassName:"",activeClassName:"",adjustmentClassName:"",style:0,width:"",height:"",lockUIClassName:"",title:{html:"",location:"",direction:"",className:"",style:0,show:!0,tools:{inset:"2px",verticalInset:"",className:"",style:0,items:[]}},header:{className:"",style:0,show:!1,html:""},tbar:{className:"",style:0,show:!1,html:""},body:{className:"",style:0,scroll:!1,content:{type:"",elementId:"",html:"",url:"",immediate:!1}},buttons:{className:"",style:0,show:!1,items:[]},bbar:{className:"",style:0,show:!1,html:""},footer:{className:"",style:0,show:!1,html:""},resizer:{className:"",style:0,thumbImage:""},pointer:{show:!1,location:"auto",size:10,upClassName:"",leftClassName:"",downClassName:"",rightClassName:""},animation:{disabled:!1,show:{type:"",duration:500},hide:{type:"",duration:500}},_defaultTools:{},disableMove:!1,disableResize:!1,onInitialize:0,onBeforeShow:0,onShow:0,onBeforeHide:0,onHide:0,onFocus:0,onMove:0,onResize:0}),"undefined"!=typeof A5._windowDefaults&&$u.o.assign(this,A5._windowDefaults),"undefined"!=typeof e.theme&&A5.themes.assign(this,e.theme,"window"),$u.o.assign(this,e),A5.overrides.assign(this,"window",this.override),""==this.type?this.type="modeless":this.type=this.type.toLowerCase(),"modal"!=this.type&&"popup"!=this.type&&"modal-popup"!=this.type&&(this.type="modeless"),this._maxDlgZIndx[0]=this._zIndex,this.resize=this.resize.toLowerCase();var t=RegExp("[^A-z]");"widthheight"==this.resize.split(t).join("")||"heightwidth"==this.resize.split(t).join("")?this.resize="both":"height"!=this.resize&&"width"!=this.resize&&"both"!=this.resize&&(this.resize="none"),this.title.location=this.title.location.toLowerCase(),"bottom"!=this.title.location&&"top"==this.title.location,this.body.content.type=this.body.content.type.toLowerCase(),"element"!=this.body.content.type&&"url"!=this.body.content.type&&"blank"!=this.body.content.type&&(this.body.content.type="static"),"boolean"==typeof this.autoPosition?this.autoPosition?this.autoPosition="center":this.autoPosition="none":"center"!=this.autoPosition&&"none"!=this.autoPosition&&"in-view"!=this.autoPosition&&(this.autoPosition="center"),""!=this.animation.show.type&&"none"!=this.animation.show.type.toLowerCase()||""!=this.animation.hide.type&&"none"!=this.animation.hide.type.toLowerCase()||(this.animation.disabled=!0),this.hidden=!0;var i=document.createElement("div");i.id=this._windowId,$sa(i,"A5WindowIndex",this._windowCurIndx),$sa(i,"A5WindowType",this.type),$sa(i,"A5WindowBodyType",$if("url"==this.body.content.type,"iframe","div")),$sa(i,"A5WindowActiveClassName",this.activeClassName),$sa(i,"A5WindowAdjustClassName",this.adjustmentClassName),i.className=this.className,"object"!=typeof this.style&&"string"!=typeof this.style||$ss(i,this.style),this.animation.disabled?document.all&&"Opera"!=navigator.appName?i.style.display="none":i.style.visibility="hidden":i.style.display="none",i.style.position="absolute",i.style.top="-5000px",i.style.left="0px",i.style.padding="0px",i.style.zIndex=""+this._zIndex;var s=$gs(i);s.search("box-sizing:")==-1&&$ss(i,s+" box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"),HTMLDlgEle=document.createElement("div"),HTMLDlgEle.id=this._windowId+".POINTER",$ss(HTMLDlgEle,"display: none; position: absolute;"),i.appendChild(HTMLDlgEle),HTMLDlgEle=document.createElement("div"),HTMLDlgEle.id=this._windowId+".INNER",HTMLDlgEle.className=this.outerWrapClassName,$ss(HTMLDlgEle," box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"),document.all&&(HTMLDlgEle.style.width="100%"),i.appendChild(HTMLDlgEle);var a=document.createElement("div");a.id=this._windowId+".TITLE",a.className=this.title.className,"object"!=typeof this.title.style&&"string"!=typeof this.title.style||$ss(a,this.title.style),this.title.show||(a.style.display="none"),$sa(a,"A5WindowDisplayElement",$if(this.title.show,"true","false")),"both"==this.resize&&$e.add(a,A5.d.evnts.dblClick,this.toggleMaximize,this,!0,this._windowId+".EVENTS"),"bottom"!=this.title.location&&HTMLDlgEle.appendChild(a);var n=document.createElement("span");n.id=this._windowId+".TITLE.TEXT",a.appendChild(n),n=document.createElement("div"),n.id=this._windowId+".TITLE.TOOLS",n.className=this.title.tools.className,"object"!=typeof this.title.tools.style&&"string"!=typeof this.title.tools.style||$ss(n,this.title.tools.style),n.style.position="absolute","rtl"==this.title.direction.toLowerCase()?(a.style.textAlign="right",n.style.left=this.title.tools.inset):n.style.right=this.title.tools.inset,"bottom"==this.title.location?n.style.bottom=this.title.tools.verticalInset:n.style.top=this.title.tools.verticalInset;$e.add(n,"mousedown",function(e){return $e.stopEvent(e),!1},!1,this._windowId+".EVENTS"),$e.add(n,"touchstart",function(e){return $e.stopEvent(e),!1},!1,this._windowId+".EVENTS"),a.insertBefore(n,a.firstChild),HTMLDlgTmplEle=document.createElement("div"),HTMLDlgTmplEle.id=this._windowId+".HEADER",HTMLDlgTmplEle.className=this.header.className,"object"!=typeof this.header.style&&"string"!=typeof this.header.style||$ss(HTMLDlgTmplEle,this.header.style),this.header.show||(HTMLDlgTmplEle.style.display="none"),$sa(HTMLDlgTmplEle,"A5WindowDisplayElement",$if(this.header.show,"true","false")),HTMLDlgTmplEle.innerHTML=this.header.html,HTMLDlgEle.appendChild(HTMLDlgTmplEle);var o=document.createElement("div");o.id=this._windowId+".BODYCONTAINER",o.className=this.innerWrapClassName,HTMLDlgEle.appendChild(o),HTMLDlgTmplEle=document.createElement("div"),HTMLDlgTmplEle.id=this._windowId+".TBAR",HTMLDlgTmplEle.className=this.tbar.className,"object"!=typeof this.tbar.style&&"string"!=typeof this.tbar.style||$ss(HTMLDlgTmplEle,this.tbar.style),this.tbar.show||(HTMLDlgTmplEle.style.display="none"),$sa(HTMLDlgTmplEle,"A5WindowDisplayElement",$if(this.tbar.show,"true","false")),HTMLDlgTmplEle.innerHTML=this.tbar.html,o.appendChild(HTMLDlgTmplEle),"url"==this.body.content.type?(HTMLDlgTmplEle=document.createElement("iframe"),HTMLDlgTmplEle.frameBorder="0",HTMLDlgTmplEle.border="0"):HTMLDlgTmplEle=document.createElement("div"),HTMLDlgTmplEle.id=this._windowId+".BODY",HTMLDlgTmplEle.className=this.body.className,"object"!=typeof this.body.style&&"string"!=typeof this.body.style||$ss(HTMLDlgTmplEle,this.body.style),HTMLDlgTmplEle.style.position="relative",this.body.scroll&&"url"!=this.body.content.type&&("object"==typeof this.body.scroll?("undefined"==typeof this.body.scroll.theme&&(this.body.scroll.theme=this.theme),A5.u.drag.add(HTMLDlgTmplEle,"scroll",this.body.scroll)):A5.u.drag.add(HTMLDlgTmplEle,"scroll",{axis:"both",theme:this.theme})),"url"==this.body.content.type&&(HTMLDlgTmplEle.style.padding="0px",HTMLDlgTmplEle.style.width="100%",document.all||(HTMLDlgTmplEle.style.marginBottom="-2px"));var s=$gs(HTMLDlgTmplEle);if(s.search("box-sizing:")==-1&&$ss(HTMLDlgTmplEle,s+" box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"),o.appendChild(HTMLDlgTmplEle),HTMLDlgTmplEle=document.createElement("div"),HTMLDlgTmplEle.id=this._windowId+".BUTTONS",HTMLDlgTmplEle.className=this.buttons.className,"object"!=typeof this.buttons.style&&"string"!=typeof this.buttons.style||$ss(HTMLDlgTmplEle,this.buttons.style),this.buttons.items.length>0&&!this.buttons.show&&(this.buttons.show=!0),this.buttons.show||(HTMLDlgTmplEle.style.display="none"),$sa(HTMLDlgTmplEle,"A5WindowDisplayElement",$if(this.buttons.show,"true","false")),o.appendChild(HTMLDlgTmplEle),HTMLDlgTmplEle=document.createElement("div"),HTMLDlgTmplEle.id=this._windowId+".BBAR",HTMLDlgTmplEle.className=this.bbar.className,"object"!=typeof this.bbar.style&&"string"!=typeof this.bbar.style||$ss(HTMLDlgTmplEle,this.bbar.style),this.bbar.show||(HTMLDlgTmplEle.style.display="none"),$sa(HTMLDlgTmplEle,"A5WindowDisplayElement",$if(this.bbar.show,"true","false")),HTMLDlgTmplEle.innerHTML=this.bbar.html,o.appendChild(HTMLDlgTmplEle),HTMLDlgTmplEle=document.createElement("div"),HTMLDlgTmplEle.id=this._windowId+".FOOTER",HTMLDlgTmplEle.className=this.footer.className,"object"!=typeof this.footer.style&&"string"!=typeof this.footer.style||$ss(HTMLDlgTmplEle,this.footer.style),this.footer.show||(HTMLDlgTmplEle.style.display="none"),$sa(HTMLDlgTmplEle,"A5WindowDisplayElement",$if(this.footer.show,"true","false")),HTMLDlgTmplEle.innerHTML=this.footer.html,HTMLDlgEle.appendChild(HTMLDlgTmplEle),"bottom"==this.title.location&&HTMLDlgEle.appendChild(a),"none"!=this.resize){if(HTMLDlgTmplEle=document.createElement("div"),HTMLDlgTmplEle.id=this._windowId+".RESIZER",HTMLDlgTmplEle.className=this.resizer.className,"object"!=typeof this.resizer.style&&"string"!=typeof this.resizer.style||$ss(HTMLDlgTmplEle,this.resizer.style),""!=this.resizer.thumbImage&&("width"==this.resize||"both"==this.resize)){var r=A5.u.icon.element(this.resizer.thumbImage);r.id=this._windowId+".RESIZERTHUMB",r.style.position="absolute",r.style.right="0px",r.style.bottom="0px";var l="br";r.style.cursor="se-resize","width"==this.resize&&(l="r",r.style.cursor="e-resize"),HTMLDlgTmplEle.appendChild(r),AUI.Resize.create(r,{resizeElementId:this._windowId,type:l,minHeight:55,onResizeStart:function(e,t){var i=$(this.resizeElementId+".BODYCONTAINER");t.bodyWidth=i.offsetWidth;var i=$(this.resizeElementId+".BODY");"r"!=t.type?t.bodyHeight=i.offsetHeight:t.bodyHeight=i.style.height,i=$(this.resizeElementId);var s=Math.min(4,Math.max(i.offsetHeight-i.clientHeight,0)),a=Math.min(4,Math.max(i.offsetWidth-i.clientWidth,0));i.style.width=i.offsetWidth-a+"px",i.style.height=i.offsetHeight-s+"px",i.style.padding="0px",$e.execute(i,"mousedown"),document.all&&"Opera"!=navigator.appName?i.lastChild.style.display="none":i.lastChild.style.visibility="hidden",$(this.resizeElementId+".TITLE.TOOLS").style.display="none",$(this.resizeElementId+".RESIZERTHUMB").style.display="none";var n=$ga(i,"A5WindowAdjustClassName");""!=n&&$acn(i,n)},onResizeEnd:function(e,t){var i=$(this.resizeElementId+".BODYCONTAINER");i.style.width=t.bodyWidth+(t.width-t.initialWidth)+"px";var s=$(this.resizeElementId+".BODY");if(document.all&&"Opera"!=navigator.appName?$(this.resizeElementId).lastChild.style.display="":$(this.resizeElementId).lastChild.style.visibility="","iframe"==s.tagName.toLowerCase()){var a=s.offsetWidth-s.clientWidth+(i.offsetWidth-i.clientWidth);s.style.width=i.offsetWidth-a+"px"}"r"!=t.type?s.style.height=t.bodyHeight+(t.height-t.initialHeight)+"px":s.style.height=t.bodyHeight,$(this.resizeElementId+".HEADER").style.width=s.style.width,$(this.resizeElementId+".FOOTER").style.width=s.style.width,$e.execute(s,"a5resize"),s=$(this.resizeElementId),s.style.width="",s.style.height="",s.style.padding="";var n=$ga(s,"A5WindowAdjustClassName");""!=n&&$rcn(s,n),$(this.resizeElementId+".TITLE.TOOLS").style.display="",$(this.resizeElementId+".RESIZERTHUMB").style.display="",$e.execute(s,"resizeComplete")}})}HTMLDlgEle.appendChild(HTMLDlgTmplEle),"height"!=this.resize&&"both"!=this.resize||(HTMLDlgTmplEle.style.cursor="s-resize",AUI.Resize.create(HTMLDlgTmplEle,{resizeElementId:this._windowId,type:"b",minHeight:50,onResizeStart:function(e,t){var i=$(this.resizeElementId),s=Math.min(4,Math.max(i.offsetHeight-i.clientHeight,0)),a=Math.min(4,Math.max(i.offsetWidth-i.clientWidth,0));i.style.width=i.offsetWidth-a+"px",i.style.height=i.offsetHeight-s+"px",i.style.padding="0px",$e.execute(i,"mousedown"),t.bodyHeight=$(this.resizeElementId+".BODY").offsetHeight,document.all&&"Opera"!=navigator.appName?i.lastChild.style.display="none":i.lastChild.style.visibility="hidden",$(this.resizeElementId+".TITLE.TOOLS").style.display="none";var n=$ga(i,"A5WindowAdjustClassName");""!=n&&$acn(i,n)},onResizeEnd:function(e,t){var i=$(this.resizeElementId);document.all&&"Opera"!=navigator.appName?i.lastChild.style.display="":i.lastChild.style.visibility="",$(this.resizeElementId+".TITLE.TOOLS").style.display="",i.style.width="",i.style.height="",i.style.padding="";var s=$ga(i,"A5WindowAdjustClassName");""!=s&&$rcn(i,s);var a=$(this.resizeElementId+".BODY");a.style.height=t.bodyHeight+(t.height-t.initialHeight)+"px",$e.execute(a,"a5resize"),$e.execute(i,"resizeComplete")}}))}if(this._ignoreMouse=!1,$e.add(i,"mousedown",function(e){$e.stopPropagation(e),this._ignoreMouse||(A5.windows._hidePopups(this._windowCurIndx),"modal"!=this.type&&"modal-popup"!=this.type&&this._moveToFront())},this,!0,this._windowId+".EVENTS"),$e.add(i,"touchstart",function(e){$e.stopPropagation(e),A5.windows._hidePopups(this._windowCurIndx),"modal"!=this.type&&"modal-popup"!=this.type&&this._moveToFront(),this._ignoreMouse=!0,setTimeout(Function("A5.windows._w['"+this._windowCurIndx+"']._ignoreMouse = false;"),500)},this,!0,this._windowId+".EVENTS"),this.onResize.constructor==Function&&$e.add(i,"resizeComplete",function(){this.onResize()},this,!0,this._windowId+".EVENTS"),this.onMove.constructor==Function&&$e.add(i,"dragComplete",function(){this.onMove()},this,!0,this._windowId+".EVENTS"),""!=this.container?$(this.container).appendChild(i):$("AUILockUIPage")?document.body.insertBefore(i,$("AUILockUIPage").nextSibling):document.body.insertBefore(i,document.body.firstChild),this._lockIndex=-1,"element"==this.body.content.type&&$(this.body.content.elementId)){var d=$(this.body.content.elementId);$(this._windowId+".BODY.SCROLLWRAPPER")?$(this._windowId+".BODY.SCROLLWRAPPER").appendChild(d):$(this._windowId+".BODY").appendChild(d),d.style.display="",delete d}this._tools=new Array;for(var h=0;h<this.title.tools.items.length;h++)this.addTool(this.title.tools.items[h]);this._buttons=new Array;for(var h=0;h<this.buttons.items.length;h++)this.addButton(this.buttons.items[h]);AUI.Drag.create($(this._windowId+".TITLE"),{coord:"custom",dragElementId:this._windowId,onDragStart:function(){var e=$(this.dragElementId);$e.execute(e,"mousedown");for(var t=0;t<e.lastChild.childNodes.length;t++)"undefined"!=typeof e.lastChild.childNodes[t].tagName&&e.lastChild.childNodes[t].id!=this.dragElementId+".TITLE"&&(e.lastChild.childNodes[t].style.visibility="hidden");var i=$ga(e,"A5WindowAdjustClassName");""!=i&&$acn(e,i)},onDragEnd:function(){for(var e=$(this.dragElementId),t=0;t<e.lastChild.childNodes.length;t++)"undefined"!=typeof e.lastChild.childNodes[t].tagName&&(e.lastChild.childNodes[t].style.visibility="");var i=$ga(e,"A5WindowAdjustClassName");""!=i&&$rcn(e,i),$e.execute(e,"dragComplete")}}),this.setMoveDisabled(this.disableMove),this.setResizeDisabled(this.disableResize),A5.windows._w[""+this._windowIndx[0]]=this,this._a={},this._winChain=[this._windowCurIndx],"popup"==this.type&&(this._popupHide=function(){this.hide()}),this._windowIndx[0]=this._windowIndx[0]+1,this._initShow=!1,this._initCSSAnim=!1,this._dock="",this._oldTop="0px",this._resize(),this.setTitle(this.title.html),this.body.content.immediate&&this.refresh(),this.autoShow&&this.show()},destroy:function(){$e.removeGroup(this._windowId+".EVENTS"),AUI.Resize.destroy($(this._windowId+".RESIZERTHUMB")),AUI.Resize.destroy($(this._windowId+".RESIZER")),AUI.Drag.destroy($(this._windowId+".TITLE"));var e=$(this._windowId);if(e){var t=e.parentNode;t.removeChild(e)}},show:function(){if(window.event&&("touchend"!=window.event.type&&"touchstart"!=window.event.type||$e.preventDefault(window.event)),this.hidden){if(this.onBeforeShow.constructor==Function){var e=this.onBeforeShow.call(this);if("boolean"!=typeof e&&(e=!0),!e)return!1}var t=$(this._windowId);t.style.top=this._oldTop,""!=this.activeClassName&&$acn(t,this.activeClassName),this._moveToFront();var i=/^[0-9]+%$/;if(this.animation.disabled)document.all&&"Opera"!=navigator.appName?t.style.display="":t.style.visibility="",(i.test(this.width)||i.test(this.height))&&this._stretch(),"undefined"!=typeof arguments[0]?this.setPosition.apply(this,arguments):"none"!=this.autoPosition&&this._initShow?this.setPosition(this.autoPosition):this._initShow||this.setPosition("center"),this._initShow||this.onInitialize.constructor!=Function||this.onInitialize.call(this);else{t.style.display="",t.style.visibility="hidden",(i.test(this.width)||i.test(this.height))&&this._stretch(),"undefined"!=typeof arguments[0]?this.setPosition.apply(this,arguments):"none"!=this.autoPosition&&this._initShow?this.setPosition(this.autoPosition):this._initShow||this.setPosition("center"),this._initShow||this.onInitialize.constructor!=Function||this.onInitialize.call(this);var s=this.animation.show.type;if("css"==s.substr(0,3)&&A5.u.css.supportsTransition){var a="",n=this.animation.show.duration;if("number"!=typeof n&&(n=500),"css-slide"==s.substr(0,9)){"css-slide"==s&&(s="b"==this._dock?"css-slide-bottom":"l"==this._dock?"css-slide-left":"r"==this._dock?"css-slide-right":"css-slide-top");var o=AUI.u.getVPScroll(),r=AUI.u.getVPSize();o.x=t.offsetLeft-o.x,o.y=t.offsetTop-o.y,"css-slide-bottom"==s?t.style[A5.u.css.properties.transformDOM]=A5.u.css.transform2D("0px",r.height-o.y+t.offsetHeight+"px"):"css-slide-left"==s?t.style[A5.u.css.properties.transformDOM]=A5.u.css.transform2D("-"+(o.x+t.offsetWidth)+"px","0px"):"css-slide-right"==s?t.style[A5.u.css.properties.transformDOM]=A5.u.css.transform2D(r.width-o.x+t.offsetWidth+"px","0px"):t.style[A5.u.css.properties.transformDOM]=A5.u.css.transform2D("0px","-"+(o.y+t.offsetHeight)+"px"),a=["var wEle = $('"+this._windowId+"');","wEle.style.display = '';","wEle.style['"+A5.u.css.properties.transitionDOM+"'] = '"+A5.u.css.properties.transform+" "+n+"ms ease-in-out';","wEle.style['"+A5.u.css.properties.transformDOM+"'] = A5.u.css.transform2D(0,0);"].join("\n")}setTimeout(Function(a),1),this._initCSSAnim||($e.add(t,A5.u.css.properties.transitionEndEvent,function(e){this.style[A5.u.css.properties.transitionDOM]="","true"==$ga(this,"A5WINDOWHIDE")&&(this.style.display="none",this.style[A5.u.css.properties.transformDOM]="",$sa(this,"A5WINDOWHIDE",""))},{},!1,this._windowId+".EVENTS"),this._initCSSAnim=!0)}$sa(t,"A5WINDOWHIDE",""),t.style.visibility="",t.style.display="none","css"!=s.substr(0,3)?A5.u.element.show(t,this.animation.show):t.style.display=""}if("url"==this.body.content.type){var l=$(this._windowId+".BODYCONTAINER"),d=$(this._windowId+".BODY");document.all&&""==l.style.width&&(this.width="4in",l.style.width=this.width);var h=d.offsetWidth-d.clientWidth+(l.offsetWidth-l.clientWidth);d.style.width=l.offsetWidth-h+"px"}if(this._initShow||this.body.content.immediate||this.refresh(),this.onFocus.constructor==Function&&this.onFocus.call(this),"undefined"!=typeof this._targetId){var c=A5.windows.getFromElement(this._targetId);this._winChain=[],c&&(this._winChain=this._winChain.concat(c._winChain)),this._winChain.push(this._windowCurIndx)}if("modal"!=this.type&&"modal-popup"!=this.type||(this._lockIndex=AUI.LockUI.page(this.lockUIClassName,this._zIndex,this._windowId),setTimeout(function(){$e.add("AUILockUIPage","mousedown",A5.windows._hidePopups)},1e3)),"popup"==this.type||"modal-popup"==this.type){var u=this;this._luiTO=setTimeout(function(){$e.add(document.documentElement,"mousedown",u._popupHide,u,!0,u._windowId+".EVENTS"),$e.add(document.documentElement,"touchstart",u._popupHide,u,!0,u._windowId+".EVENTS"),delete u},1e3)}A5.windows._hidePopups(this._windowCurIndx),$e.execute(this.getWindowId("body"),"a5resize"),this.hidden=!1,this.onShow.constructor==Function&&this.onShow.call(this)}else this.focus();this._initShow=!0},hide:function(){if(window.event&&("touchend"!=window.event.type&&"touchstart"!=window.event.type||$e.preventDefault(window.event)),!this.hidden){if(clearTimeout(this._luiTO),this.onBeforeHide.constructor==Function){var e=this.onBeforeHide.call(this);if("boolean"!=typeof e&&(e=!0),!e)return!1}"modal"!=this.type&&"modal-popup"!=this.type||AUI.LockUI.pageFree(this._windowId),"popup"!=this.type&&"modal-popup"!=this.type||($e.remove(document.documentElement,"mousedown",this._popupHide),$e.remove(document.documentElement,"touchstart",this._popupHide));var t=$(this._windowId);if(this._oldTop=t.style.top,this.animation.disabled)t.style.top="-5000px",document.all&&"Opera"!=navigator.appName?t.style.display="none":t.style.visibility="hidden";else{var i=this.animation.hide.type;if("css"==i.substr(0,3)&&A5.u.css.supportsTransition){var s="",a=this.animation.hide.duration;if("number"!=typeof a&&(a=500),"css-slide"==i.substr(0,9)){"css-slide"==i&&(i="b"==this._dock?"css-slide-bottom":"l"==this._dock?"css-slide-left":"r"==this._dock?"css-slide-right":"css-slide-top");var n=AUI.u.getVPScroll(),o=AUI.u.getVPSize();n.x=t.offsetLeft-n.x,n.y=t.offsetTop-n.y,t.style[A5.u.css.properties.transformDOM]=A5.u.css.transform2D(0,0),s=["var wEle = $('"+this._windowId+"');","wEle.style.display = '';","wEle.style['"+A5.u.css.properties.transitionDOM+"'] = '"+A5.u.css.properties.transform+" "+a+"ms ease-in-out';"];var r="";r="css-slide-bottom"==i?A5.u.css.transform2D("0px",o.height-n.y+t.offsetHeight+"px"):"css-slide-left"==i?A5.u.css.transform2D("-"+(n.x+t.offsetWidth)+"px","0px"):"css-slide-right"==i?A5.u.css.transform2D(o.width-n.x+t.offsetWidth+"px","0px"):A5.u.css.transform2D("0px","-"+(n.y+t.offsetHeight)+"px"),s.push("wEle.style['"+A5.u.css.properties.transformDOM+"'] = '"+r+"';"),s=s.join("\n")}$sa(t,"A5WINDOWHIDE","true"),setTimeout(Function(s),1),this._initCSSAnim||($e.add(t,A5.u.css.properties.transitionEndEvent,function(e){this.style.top="-5000px",this.style[A5.u.css.properties.transitionDOM]="","true"==$ga(this,"A5WINDOWHIDE")&&(this.style.display="none",this.style[A5.u.css.properties.transformDOM]="",$sa(this,"A5WINDOWHIDE",""))},{},!1,this._windowId+".EVENTS"),this._initCSSAnim=!0)}else t.style.top="-5000px","css"!=i.substr(0,3)?A5.u.element.hide(t,this.animation.hide):t.style.display="none"}""!=this.activeClassName&&$rcn(t,this.activeClassName),this._lockIndex=-1,this.hidden=!0,A5.windows._hidePopupsAbove(this._zIndex),this.onHide.constructor==Function&&this.onHide.call(this),this._focusTopWindow()}},focus:function(){this._moveToFront(),this.onFocus.constructor==Function&&this.onFocus.call(this)},refresh:function(){"static"==this.body.content.type?$(this.getWindowId("body")).innerHTML=this.body.content.html:"url"==this.body.content.type&&($(this._windowId+".BODY").src=A5.ajax.addURLRequiredData(this.body.content.url))},maximize:function(){if(!this._isMaximized){var e=$(this._windowId),t=$(this._windowId+".BODY");this._restoreScroll=this._getVPScroll(),this._restoreTop=e.style.top,this._restoreLeft=e.style.left,this._restoreWidth=t.style.width,this._restoreHeight=t.style.height,this.setPosition("0px","0px"),this.setSize("100%","100%"),AUI.Drag.disable(this._windowId),AUI.Resize.disable(this._windowId),this.focus(),this._isMaximized=!0}},restore:function(){this._isMaximized&&(document.body.style.overflow="",this.setPosition(this._restoreTop,this._restoreLeft),this.setSize(this._restoreWidth,this._restoreHeight),this.setMoveDisabled(this.disableMove),this.setResizeDisabled(this.disableResize),window.scrollTo(this._restoreScroll.x,this._restoreScroll.y),this.focus(),this._isMaximized=!1)},toggleMaximize:function(){this._isMaximized?this.restore():this.maximize();
},addButton:function(e){var t=$(this._windowId+".BUTTONS");$u.o.assign(e,this._buttonDefaults,!0),""==e.name&&(e.name=e.html.split(RegExp("[^A-z ]")).join("")),this._buttons.push(new A5.Button(e));var i=this._buttons[this._buttons.length-1].create({id:this._windowId+".BUTTON."+e.name,A5WindowButtonType:"button",A5WindowButtonIndex:""+(this._buttons.length-1),A5WindowButtonName:e.name});$e.add(i,A5.d.evnts.click,this._windowAction,this,!1,this._windowId+".EVENTS"),i.style.width=e.width,t.appendChild(i),0==e.show&&this._buttons[this._buttons.length-1].setDisplay(!1),e.disabled&&this._buttons[this._buttons.length-1].setDisabled(!0),t.appendChild(document.createTextNode(" "))},removeButton:function(e){for(var t=$(this._windowId+".BUTTONS"),i=this._buttons.length-1;i>=0;i--)if($sa(this._windowId+".BUTTON."+this._buttons[i].name,"A5WindowButtonIndex",i-1),this._buttons[i].name==e){this._buttons.splice(i,1),$e.remove(this._windowId+".BUTTON."+e,A5.d.evnts.click,this._windowAction),t.removeChild($(this._windowId+".BUTTON."+e));break}},setButtonDisabled:function(e,t){for(var i=this._buttons.length-1;i>=0;i--)if(this._buttons[i].name==e){this._buttons[i].setDisabled(t);break}},setButtonDisplay:function(e,t){for(var i=this._buttons.length-1;i>=0;i--)if(this._buttons[i].name==e){this._buttons[i].setDisplay(t);break}},getButton:function(e){for(var t=this._buttons.length-1;t>=0;t--)if(this._buttons[t].name==e)return this._buttons[t];return!1},clearButtons:function(){for(var e=$(this._windowId+".BUTTONS"),t=this._buttons.length-1;t>=0;t--)$e.remove(this._windowId+".BUTTON."+this._buttons[t].name,A5.d.evnts.click,this._windowAction);e.innerHTML="&nbsp;",this._buttons=new Array},addTool:function(e){var t=$(this._windowId+".TITLE.TOOLS");if("string"==typeof e){if("object"!=typeof this._defaultTools[e])return!1;e=this._defaultTools[e]}$u.o.assign(e,this._toolDefaults,!0);var i=A5.u.icon.element(e.image);i.id=this._windowId+".TITLE.TOOLS."+e.name,i.style.cursor="default",A5.flags.isMobile||""==e.imageHover?e.imageHover=e.image:($e.add(i,"mouseover",Function("A5.u.icon.update(this,'"+e.imageHover+"');"),{},!1,this._windowId+".EVENTS"),$e.add(i,"mouseout",Function("A5.u.icon.update(this,'"+e.image+"');"),{},!1,this._windowId+".EVENTS")),""!=e.imagePressed&&($e.add(i,A5.d.evnts.down,Function("A5.u.icon.update(this,'"+e.imagePressed+"');"),{},!1,this._windowId+".EVENTS"),$e.add(i,A5.d.evnts.up,Function("A5.u.icon.update(this,'"+e.imageHover+"');"),{},!1,this._windowId+".EVENTS")),e.disabled?(i.disabled=!0,$acn(i,e.disabledClassName)):(i.disabled=!1,$rcn(i,e.disabledClassName)),e.show?i.style.display="":i.style.display="none",$sa(i,"A5WindowButtonType","tool"),$sa(i,"A5WindowButtonName",e.name),$sa(i,"A5WindowButtonIndex",""+this._tools.length),$e.add(i,A5.d.evnts.click,this._windowAction,this,!1,this._windowId+".EVENTS"),t.appendChild(i),this._tools.push(e)},removeTool:function(e){for(var t=$(this._windowId+".TITLE.TOOLS"),i=this._tools.length-1;i>=0;i--)if($sa(this._windowId+"."+this._tools[i].name,"A5WindowButtonIndex",i-1),this._tools[i].name==e){this._tools.splice(i,1),$e.remove(this._windowId+".TITLE.TOOLS."+e,A5.d.evnts.click,this._windowAction),t.removeChild($(this._windowId+".TITLE.TOOLS."+e));break}},setToolDisabled:function(e,t){for(var i=this._tools.length-1;i>=0;i--)if(this._tools[i].name==e){this._tools[i].disabled=t;var s=$(this._windowId+".TITLE.TOOLS."+e);t?(s.disabled=!0,""!=this._tools[i].disabledClassName&&$acn(s,this._tools[i].disabledClassName)):(s.disabled=!1,""!=this._tools[i].disabledClassName&&$rcn(s,this._tools[i].disabledClassName));break}},setToolDisplay:function(e,t){for(var i=this._tools.length-1;i>=0;i--)if(this._tools[i].name==e){var s=$(this._windowId+".TITLE.TOOLS."+e);t?s.style.display="":s.style.display="none";break}},clearTools:function(){for(var e=$(this._windowId+".TITLE.TOOLS"),t=this._tools.length-1;t>=0;t--)$e.remove(this._windowId+".TITLE.TOOL."+this._tools[t].name,A5.d.evnts.click,this._windowAction);e.innerHTML="&nbsp;",this._tools=new Array},setPosition:function(e,t){""!=this._dock&&(this.setMoveDisabled(this.disableMove),""!=this.container?($e.remove(this.container,"a5resize",this._keepDocked),$e.remove(this.container,"scroll",this._keepDocked)):($e.remove(window,"resize",this._keepDocked),$e.remove(window,"scroll",this._keepDocked)),this._dock="");var i=!1,s=$(this._windowId);if("center"==e.toLowerCase()){var a=this._getVPSize(),n=this._getVPScroll();s.style.top=Math.max(Math.round(a.height/2-s.offsetHeight/2+n.y),0)+"px",s.style.left=Math.max(Math.round(a.width/2-s.offsetWidth/2+n.x),0)+"px"}else if("in-view"==e.toLowerCase()){var n=this._getVPScroll(),a=this._getVPSize();(n.y+a.height<s.offsetTop+s.offsetHeight||n.y>s.offsetTop)&&(s.style.top=Math.max(Math.round(a.height/2-s.offsetHeight/2+n.y),0)+"px"),(n.x+a.width<s.offsetLeft+s.offsetWidth||n.x>s.offsetLeft)&&(s.style.left=Math.max(Math.round(a.width/2-s.offsetWidth/2+n.x),0)+"px")}else if("dropdown"==e.toLowerCase()||"dropdown-right"==e.toLowerCase()||"flyout"==e.toLowerCase()||"flyout-bottom"==e.toLowerCase()||"popup"==e.toLowerCase()||"popup-bottom"==e.toLowerCase()){var o=$(t);o&&($po(s,o,e.toLowerCase(),$if(this.pointer.show,this.pointer.size,0)),this.pointer.show&&this._setPointer(e,s,o),i=!0)}else if("dock"==e.toLowerCase()){this._dock=t.toLowerCase().substr(0,1),AUI.Drag.disable(this._windowId),""!=this.container?($e.add(this.container,"a5resize",this._keepDocked,this,!0,this._windowId+".EVENTS"),$e.add(this.container,"scroll",this._keepDocked,this,!0,this._windowId+".EVENTS")):($e.add(window,"resize",this._keepDocked,this,!0,this._windowId+".EVENTS"),$e.add(window,"scroll",this._keepDocked,this,!0,this._windowId+".EVENTS"));var a=this._getVPSize(),n=this._getVPScroll();"t"==this._dock?(s.style.top=n.y+"px",s.style.left=Math.max(Math.round(a.width/2-s.offsetWidth/2+n.x),0)+"px"):"b"==this._dock?(s.style.top=a.height+n.y-s.offsetHeight+"px",s.style.left=Math.max(Math.round(a.width/2-s.offsetWidth/2+n.x),0)+"px"):"l"==this._dock?(s.style.top=Math.max(Math.round(a.height/2-s.offsetHeight/2+n.y),0)+"px",s.style.left=n.x+"px"):"r"==this._dock&&(s.style.top=Math.max(Math.round(a.height/2-s.offsetHeight/2+n.y),0)+"px",s.style.left=a.width+n.x-s.offsetWidth+"px")}else"undefined"!=typeof e&&"undefined"!=typeof t&&("Number"==typeof e?s.style.top=e+"px":s.style.top=e,"Number"==typeof t?s.style.left=t+"px":s.style.left=t);!i&&this.pointer.show&&this._setPointer(e,s,!1),this.onMove.constructor==Function&&this.onMove(),this._oldTop=s.style.top},setSize:function(e,t){this.width=e,this.height=t,this._resize(),this.onResize.constructor==Function&&this.onResize()},setTitle:function(e){this.title.html=e,""==this.title.html&&(this.title.html="&nbsp;"),$(this._windowId+".TITLE.TEXT").innerHTML=e},setDisplay:function(e,t){e=e.toLowerCase();var i=this.getWindowId(e);if(i!=this._windowId){var s=$(i);t?s.style.display="":s.style.display="none",$sa(s,"A5WindowDisplayElement",$if(t,"true","false"))}},setMoveDisabled:function(e){e?AUI.Drag.disable(this._windowId):AUI.Drag.enable(this._windowId),this.disableMove=e},setResizeDisabled:function(e){e?AUI.Resize.disable(this._windowId):AUI.Resize.enable(this._windowId),this.disableResize=e},addAction:function(e,t){this._a[e]=t},getWindowId:function(e){e="undefined"!=typeof arguments[0]?arguments[0].toString():"",e=e.toLowerCase();var t=this._windowId;return"title"==e?t+=".TITLE":"header"==e?t+=".HEADER":"body-container"==e?t+=".BODYCONTAINER":"tbar"==e?t+=".TBAR":"body"==e?t+=$(t+".BODY.SCROLLWRAPPER")?".BODY.SCROLLWRAPPER":".BODY":"bbar"==e?t+=".BBAR":"buttons"==e?t+=".BUTTONS":"footer"==e&&(t+=".FOOTER"),t},_resize:function(){var e=$(this._windowId+".BODYCONTAINER"),t=$(this._windowId+".BODY"),i=/^[0-9]+%$/;if(i.test(this.width)||i.test(this.height)?(""!=this.container?$e.add(this.container,"a5resize",this._stretch,this,!0,this._windowId+".EVENTS"):$e.add(window,"resize",this._stretch,this,!0,this._windowId+".EVENTS"),this._stretch(),this._hasStretch=!0):this._hasStretch&&(""!=this.container?$e.remove(this.container,"a5resize",this._stretch):$e.remove(window,"resize",this._stretch),this._hasStretch=!1),i.test(this.width)||("max"==this.width.split(":")[0]?e.style.maxWidth=this.width.split(":")[1]:e.style.width=this.width),i.test(this.height)||("max"==this.height.split(":")[0]?t.style.maxHeight=this.height.split(":")[1]:t.style.height=this.height),"url"==this.body.content.type&&!this.hidden){document.all&&""==this.width&&(this.width="4in",e.style.width=this.width);var s=t.offsetWidth-t.clientWidth+(e.offsetWidth-e.clientWidth);t.style.width=e.offsetWidth-s+"px"}$e.execute(t,"a5resize")},_keepDocked:function(){var e=$(this._windowId),t=this._getVPSize(),i=this._getVPScroll();"t"==this._dock?(e.style.top=i.y+"px",e.style.left=Math.max(Math.round(t.width/2-e.offsetWidth/2+i.x),0)+"px"):"b"==this._dock?(e.style.top=t.height+i.y-e.offsetHeight+"px",e.style.left=Math.max(Math.round(t.width/2-e.offsetWidth/2+i.x),0)+"px"):"l"==this._dock?(e.style.top=Math.max(Math.round(t.height/2-e.offsetHeight/2+i.y),0)+"px",e.style.left=i.x+"px"):"r"==this._dock&&(e.style.top=Math.max(Math.round(t.height/2-e.offsetHeight/2+i.y),0)+"px",e.style.left=t.width+i.x-e.offsetWidth+"px")},_stretch:function(){var e=/^[0-9]+%$/,t=this._getVPSize(),i=$(this._windowId),s=$(this._windowId+".BODY"),a=s.parentNode;if(e.test(this.width)){var n=t.width-(i.offsetWidth-s.offsetWidth);if(n=n/100*$u.s.toNum(this.width),a.style.width=n+"px","url"==this.body.content.type&&!this.hidden){document.all&&""==this.width&&(this.width="4in",a.style.width=this.width);var o=s.offsetWidth-s.clientWidth+(a.offsetWidth-a.clientWidth);s.style.width=a.offsetWidth-o+"px"}}if(e.test(this.height)){var r=t.height-(i.offsetHeight-s.offsetHeight);r=r/100*$u.s.toNum(this.height),s.style.height=r+"px"}$e.execute(s,"a5resize")},_setPointer:function(e,t,i){var s=$(this._windowId+".POINTER");s.style.top="",s.style.left="";var a="up",n=0,o=0;if("up"==this.pointer.location||"down"==this.pointer.location||"left"==this.pointer.location||"right"==this.pointer.location?a=this.pointer.location:"dropdown"==e.toLowerCase()||"dropdown-right"==e.toLowerCase()?a=$gpt(t)>$gpt(i)?"up":"down":"flyout"!=e.toLowerCase()&&"flyout-bottom"!=e.toLowerCase()||(a=$gpl(t)>$gpl(i)?"left":"right"),"up"==a||"down"==a){if("up"==a?(s.className=this.pointer.upClassName,s.style.display=""):(s.className=this.pointer.downClassName,s.style.display=""),s.style.left="50%",i){var o=$gpl(t),n=$gpl(i),r=o+t.offsetWidth-this.pointer.size,l=n+i.offsetWidth-this.pointer.size;o+=this.pointer.size,n+=this.pointer.size;var d=Math.min(Math.max(o,n),r),h=Math.max(Math.min(r,l),o),c=d-o+this.pointer.size+Math.round((h-d)/2);s.style.left=c+"px"}}else if("left"==a||"right"==a){if("left"==a?(s.className=this.pointer.leftClassName,s.style.display=""):(s.className=this.pointer.rightClassName,s.style.display=""),s.style.top="50%",i){var o=$gpt(t),n=$gpt(i),r=o+t.offsetHeight-this.pointer.size,l=n+i.offsetHeight-this.pointer.size;o+=this.pointer.size,n+=this.pointer.size;var d=Math.min(Math.max(o,n),r),h=Math.max(Math.min(r,l),o),c=d-o+this.pointer.size+Math.round((h-d)/2);s.style.top=c+"px"}}else s.style.display="none"},_getVPSize:function(){if(""==this.container)return AUI.u.getVPSize();var e=$(this.container);return{width:e.offsetWidth,height:e.offsetHeight}},_getVPScroll:function(){if(""==this.container)return AUI.u.getVPScroll();var e=$(this.container);return{x:e.scrollLeft,y:e.scrollTop}},_focusTopWindow:function(){for(var e=0,t=0,i=0,s=-1,a=this._windowIndx[0]-1;a>=0;a--)e=$("A5dlg"+a),e&&"hidden"!=e.style.visibility&&(i=Number(e.style.zIndex),i>t&&(t=i,s=a));$e.execute($("A5dlg"+s),"mousedown")},_moveToFront:function(){var e=$(this._windowId),t=0,i=Number(e.style.zIndex);if(i==this._maxDlgZIndx[0]&&this._initShow)return!1;e.style.zIndex=""+this._maxDlgZIndx[0],this._zIndex=this._maxDlgZIndx[0];var s="",a="",n="",o="",r=0,l=0;AUI.LockUI._plLevel&&(l=AUI.LockUI._plLevel.length-1);for(var d=this._windowIndx[0]-1;d>=0;d--)e=$("A5dlg"+d),e&&(s=$ga(e,"A5WindowType"),n=$ga(e,"A5WindowBodyType"),o=$ga(e,"A5WindowActiveClassName"),d!=this._windowCurIndx?(""!=o&&$rcn(e,o),"iframe"==n&&(t=$("A5dlg"+d+".BODY"),a=t.src.toString().split(".").pop().substr(0,3).toLowerCase(),"pdf"==a&&(t.style.visibility="hidden")),r=Number(e.style.zIndex),r>i&&(e.style.zIndex=""+(r-1),A5.windows._w[d]._zIndex=r-1,"modal"!=s&&"modal-popup"!=s||"none"==e.style.display||"hidden"==e.style.display||(AUI.LockUI._plLevel[l]=AUI.LockUI._plLevel[l]-1,l--))):(""!=o&&$acn(e,o),"iframe"==n&&($("A5dlg"+d+".BODY").style.visibility="")));if(0!=AUI.LockUI._plLevel.length){for(var h=0,d=0;d<AUI.LockUI._plLevel.length;d++)h=Math.max(h,AUI.LockUI._plLevel[d]);$("AUILockUIPage").style.zIndex=""+h}},_windowAction:function(e,t){var i=Number($ga(this,"A5WindowButtonIndex")),s=$ga(this,"A5WindowButtonType");if(i>=0){var a="";"tool"==s&&void 0!=typeof t._tools[i]?t._tools[i].action.constructor==Function?t._tools[i].action.call(t):a=t._tools[i].action.toString().toLowerCase():"button"==s&&void 0!=typeof t._buttons[i]&&(t._buttons[i].action.constructor==Function?t._buttons[i].action.call(t):a=t._buttons[i].action.toString().toLowerCase()),""!=a&&("close"==a||"cancel"==a||"hide"==a?t.hide():"refresh"==a?t.refresh():"maximize"==a?t.maximize():"restore"==a?t.restore():"togglemaximize"==a?t.toggleMaximize():"undefined"!=typeof t._a[a]&&t._a[a].call(t))}},_buttonDefaults:{html:"",action:"close",name:"",disabled:!1,show:!0,width:""},_toolDefaults:{image:"",imageHover:"",imagePressed:"",action:"close",name:"",disabled:!1,show:!0,className:"",disabledClassName:"",style:0},_windowIndx:[0],_maxDlgZIndx:[0]},A5.msgBox={show:function(e,t,i){this._window?(this._window._msgBoxAction="cancel",this._window._lockIndex!=-1&&(AUI.LockUI._plLevel=AUI.LockUI._plLevel.splice(this._window._lockIndex,1))):($u.o.assign(this.window,{theme:this.theme,type:"modal",_msgBoxAction:"cancel",autoShow:!1,onBeforeHide:function(){var e=this.handle(this._msgBoxAction);return"boolean"!=typeof e&&(e=!0),e}}),this._window=new A5.Window(this.window),"undefined"!=typeof this._window._defaultTools?"undefined"!=typeof this._window._defaultTools.close&&this._window.addTool(this._window._defaultTools.close):"undefined"!=typeof A5._windowDefaults&&"undefined"!=typeof A5._windowDefaults.title&&"undefined"!=typeof A5._windowDefaults.title.tools&&"undefined"!=typeof A5._windowDefaults.title.tools.defaults&&"undefined"!=typeof A5._windowDefaults.title.tools.defaults.close&&this._window.addTool(A5._windowDefaults.title.tools.defaults.close)),this._window.body.content.html=t,"undefined"!=typeof arguments[3]?this._window.handle=arguments[3]:this._window.handle=function(){},""!=this.className&&(this._window.className=this.className),""!=this.lockUIClassName&&(this._window.lockUIClassName=this.lockUIClassName),""!=this.titleClassName&&(this._window.title.className=this.titleClassName),""!=this.bodyClassName&&(this._window.body.className=this.bodyClassName),""!=this.footerClassName&&(this._window.BUTTONS.className=this.footerClassName),""!=this.closeButtonImage&&(this._window.title.imageClose=this.closeButtonImage),""==this.buttonClassName&&(this.buttonClassName=this._window._buttonDefaults.className),""==this.buttonWidth&&(this.buttonWidth=this._window._buttonDefaults.width),this._window.setToolDisplay("close",!0),$(this._window.getWindowId("buttons")).style.textAlign=this.buttonAlign;var s=!0,a=[];if(i.constructor==Array)for(var n=0;n<i.length;n++)a.push({action:Function("this._msgBoxAction = '"+i[n].value+"'; this.hide();"),className:this.buttonClassName,width:this.buttonWidth}),$u.o.assign(a[n],i[n]);else{i=i.toLowerCase();var o={className:this.buttonClassName,width:this.buttonWidth},r={className:this.buttonClassName,width:this.buttonWidth},l={className:this.buttonClassName,width:this.buttonWidth},d={className:this.buttonClassName,width:this.buttonWidth};$u.o.assign(o,this.buttons.ok),$u.o.assign(r,this.buttons.cancel),$u.o.assign(l,this.buttons.yes),$u.o.assign(d,this.buttons.no),o.action=function(){this._msgBoxAction="ok",this.hide()},r.action=function(){this._msgBoxAction="cancel",this.hide()},l.action=function(){this._msgBoxAction="yes",this.hide()},d.action=function(){this._msgBoxAction="no",this.hide()},"o"==i?a=[o]:"oc"==i?a=[o,r]:"yn"==i?a=[l,d]:"ync"==i?a=[l,d,r]:(s=!1,"wait"==i&&this._window.setToolDisplay("close",!1))}if(s){this._window.clearButtons();for(var n=0;n<a.length;n++)this._window.addButton(a[n]);this._window.setDisplay("buttons",!0)}else this._window.setDisplay("buttons",!1);this._window.setTitle(e),this._window.setSize(this.width,this.height),this._window.refresh(),this._window.show()},hide:function(){this._window&&this._window.hide()},theme:"",className:"",titleClassName:"",bodyClassName:"",footerClassName:"",buttonClassName:"",buttonWidth:"",buttonAlign:"",closeButtonImage:"",lockUIClassName:"",width:"",height:"",buttons:{ok:{html:"OK"},cancel:{html:"Cancel"},yes:{html:"Yes"},no:{html:"No"}},window:{},_window:!1,_win:{}},A5.TabBand=Class.create(),A5.TabBand.prototype={initialize:function(e,t){var i="object"==typeof arguments[2]?arguments[2]:{};$u.o.assign(this,{override:"base",location:"top",className:"",separator:{className:"",show:!1},tab:{className:"",selectedClassName:"",disabledClassName:"",closeClassName:"",closeIcon:"",closeHoverIcon:"",closeIconStyle:0},scrollButtons:{overlay:!1,fullHeight:!1,prevClassName:"",prevDisabledClassName:"",prevImage:"",prevDisabledImage:"",nextClassName:"",nextDisabledClassName:"",nextImage:"",nextDisabledImage:""},tools:{className:"",items:[]},onBeforeChange:0,onChange:0,onBeforeLeave:0,onLeave:0,onRightClick:0,onInitial:0,onBeforeRemove:0,onRemove:0},!0),"undefined"!=typeof i.theme&&A5.themes.assign(this,i.theme,"tabBand"),"undefined"!=typeof i.className&&"+"==i.className.charAt(0)&&(i.className=this.className+" "+i.className.substr(1)),"undefined"!=typeof i.separator&&"undefined"!=typeof i.separator.className&&"+"==i.separator.className.charAt(0)&&(i.separator.className=this.separator.className+" "+i.separator.className.substr(1)),"undefined"!=typeof i.tab&&("undefined"!=typeof i.tab.className&&"+"==i.tab.className.charAt(0)&&(i.tab.className=this.tab.className+" "+i.tab.className.substr(1)),"undefined"!=typeof i.tab.selectedClassName&&"+"==i.tab.selectedClassName.charAt(0)&&(i.tab.selectedClassName=this.tab.selectedClassName+" "+i.tab.selectedClassName.substr(1)),"undefined"!=typeof i.tab.disabledClassName&&"+"==i.tab.disabledClassName.charAt(0)&&(i.tab.disabledClassName=this.tab.disabledClassName+" "+i.tab.disabledClassName.substr(1))),"undefined"!=typeof i.scrollButtons&&("undefined"!=typeof i.scrollButtons.prevClassName&&"+"==i.scrollButtons.prevClassName.charAt(0)&&(i.scrollButtons.prevClassName=this.scrollButtons.prevClassName+" "+i.scrollButtons.prevClassName.substr(1)),"undefined"!=typeof i.scrollButtons.prevDisabledClassName&&"+"==i.scrollButtons.prevDisabledClassName.charAt(0)&&(i.scrollButtons.prevDisabledClassName=this.scrollButtons.prevDisabledClassName+" "+i.scrollButtons.prevDisabledClassName.substr(1)),"undefined"!=typeof i.scrollButtons.nextClassName&&"+"==i.scrollButtons.nextClassName.charAt(0)&&(i.scrollButtons.nextClassName=this.scrollButtons.nextClassName+" "+i.scrollButtons.nextClassName.substr(1)),"undefined"!=typeof i.scrollButtons.nextDisabledClassName&&"+"==i.scrollButtons.nextDisabledClassName.charAt(0)&&(i.scrollButtons.nextDisabledClassName=this.scrollButtons.nextDisabledClassName+" "+i.scrollButtons.nextDisabledClassName.substr(1))),$u.o.assign(this,i),A5.overrides.assign(this,"tabBand",this.override),this.location=this.location.toLowerCase(),"bottom"!=this.location&&(this.location="top");var s=$(e);this._ele=s,this.ctrlId=s.id,s.innerHTML="",s.className=this.className,s.style.overflow="hidden",s.style.position="relative",(A5.flags.supportsTouch||"always"==A5.u.drag.useDragScrolling)&&($e.add(s,"a5dragscrolldischange",this._dragScrollDisChange,this),$e.add(s,"a5dragscrollend",this._dragScrollEnd,this,!0),A5.u.drag.add(s,"custom",{overlay:this.scrollButtons.overlay,axis:"x",tolerance:5,onStart:function(e,t,i){e.tEle=$(this.id+".TABTABLE"),e.pEle=$(this.id+".PTOOLBAR"),e.nEle=$(this.id+".NTOOLBAR"),e.tabOffset=$u.s.toNum(e.tEle.style.left),e.tabMinLeft=(e.tEle.offsetWidth-(this.offsetWidth-$if(!t.overlay,e.pEle.offsetWidth+e.nEle.offsetWidth+4,4)))*-1,e.tabDis=0,e.tabOffset<=e.tabMinLeft?e.tabDis=1:0==e.tabOffset&&(e.tabDis=-1),$e.stopEvent(i)},onMove:function(e){var t=Math.min(Math.max(e.tabOffset+e.moveX,e.tabMinLeft),0);t==e.tabMinLeft&&1!=e.tabDis?(e.tabDis=1,$sa(this,"a5dragscrolldisable","n"),$e.execute(this,"a5dragscrolldischange")):0==t&&e.tabDis!=-1?(e.tabDis=-1,$sa(this,"a5dragscrolldisable","p"),$e.execute(this,"a5dragscrolldischange")):0!=e.tabDis&&t<0&&t>e.tabMinLeft&&(e.tabDis=0,$sa(this,"a5dragscrolldisable",""),$e.execute(this,"a5dragscrolldischange")),e.tEle.style.left=t+"px"},onEnd:function(e,t){$e.stopEvent(t),$e.execute(this,"a5dragscrollend")}}));var a=document.createElement("table");a.id=this.ctrlId+".TABTABLE",this._tblEle=a,a.cellSpacing=0,a.cellPadding=0,a.style.position="relative",s.appendChild(a),a.insertRow(0);var n=document.createElement("div");n.id=this.ctrlId+".PTOOLBAR",this._ptbEle=n,n.style.position="absolute",n.style.left="0px",this.scrollButtons.fullHeight&&(n.style.height="100%"),"bottom"==this.location?n.style.top="0px":n.style.bottom="0px";var o=document.createElement("div");o.id=this.ctrlId+".NTOOLBAR",this._ntbEle=o,o.style.position="absolute",o.style.right="0px",this.scrollButtons.fullHeight&&(o.style.height="100%"),"bottom"==this.location?o.style.top="0px":o.style.bottom="0px",s.appendChild(n),s.appendChild(o);var r=document.createElement("a");r.id=this.ctrlId+".PREV",this._pbEle=r,r.className=this.scrollButtons.prevClassName,r.innerHTML=A5.u.icon.html(this.scrollButtons.prevImage,'id="'+this.ctrlId+'.PREVIMG" style="border: none;"'),r.style.display="none",n.appendChild(r),$e.add(r,A5.d.evnts.click,this._scrollPrev,this,!0),$e.add(r,A5.d.evnts.dblClick,this._scrollPrev,this,!0);var l=document.createElement("a");l.id=this.ctrlId+".NEXT",this._nbEle=l,l.className=this.scrollButtons.nextClassName,l.innerHTML=A5.u.icon.html(this.scrollButtons.nextImage,'id="'+this.ctrlId+'.NEXTIMG" style="border: none;"'),l.style.display="none",o.appendChild(l),$e.add(l,A5.d.evnts.click,this._scrollNext,this,!0),$e.add(l,A5.d.evnts.dblClick,this._scrollNext,this,!0),this._firstTabIndx=-1,this._lastTabIndx=-1,this._items=new Array;for(var d=0;d<t.length;d++)this._add(t[d]);if(this._firstTabIndx=this._getFirstAvailableTab(),this._lastTabIndx=this._getLastAvailableTab(),this._canScroll=!1,this._scrollTab=this._firstTabIndx,this._scrollOffset=0,this._scrollTempOffset=0,this._scrollAnimateInc=0,this._scrollTO=0,this._scrollRJ=!1,this._canScrollNext=!0,this._canScrollPrev=!1,this._setScrollDisabled("p",!1),this.separator.show){var h=document.createElement("div");h.className=this.separator.className,"bottom"==this.location?(s.insertBefore(h,s.firstChild),n.style.top=h.offsetHeight+"px",o.style.top=h.offsetHeight+"px"):(s.appendChild(h),n.style.bottom=h.offsetHeight+"px",o.style.bottom=h.offsetHeight+"px"),n.style.display="none",n.style.display="",o.style.display="none",o.style.display=""}this.refresh(),this.value="",$e.add(window,"resize",this.refresh,this,!0)},add:function(e){this._add(e),this._firstTabIndx=this._getFirstAvailableTab(),this._lastTabIndx=this._getLastAvailableTab(),this.refresh()},_add:function(e){e=this._parseTab(e);this._items.length;this._items.push(e);var t=(this._ele,document.createElement("a"));if(t.href="#",t.className=this._gDef(e.className,this.tab.className),e.disabled&&$acn(t,this._gDef(e.disabledClassName,this.tab.disabledClassName)),e.show||(t.style.display="none"),t.innerHTML="<span>&nbsp;"+e.html+"&nbsp;</span>",e.close){var i=A5.u.icon.element(this._gDef(e.closeIcon,this.tab.closeIcon)),s=this._gDef(e.closeIconStyle,this.tab.closeIconStyle);"string"!=typeof s&&"object"!=typeof s||$ss(i,s),i.style.verticalAlign="top",i.style.borderStyle="none",t.appendChild(i),$acn(t,this._gDef(e.closeClassName,this.tab.closeClassName)),A5.flags.isMobile||($e.add(i,"mouseover",this._closeMOver,this),$e.add(i,"mouseout",this._closeMOut,this)),$e.add(i,A5.d.evnts.click,this._close,this)}var a=this._tblEle,n=a.rows[0].cells.length;a.rows[0].insertCell(n),a.rows[0].cells[n].appendChild(t),$e.add(t,A5.d.evnts.click,this._click,this),$e.add(t,"click",function(e){return $e.preventDefault(e),!1}),$e.add(t,"contextmenu",this._rClick,this)},insert:function(e,t){var i=this._getTabIndex(t);e=this._parseTab(e),this._items.splice(i,0,e);var s=(this._ele,document.createElement("a"));if(s.href="#",s.className=this._gDef(e.className,this.tab.className),e.disabled&&$acn(s,this._gDef(e.disabledClassName,this.tab.disabledClassName)),e.show||(s.style.display="none"),s.innerHTML="<span>&nbsp;"+e.html+"&nbsp;</span>",e.close){var a=A5.u.icon.element(this._gDef(e.closeIcon,this.tab.closeIcon)),n=this._gDef(e.closeIconStyle,this.tab.closeIconStyle);"string"!=typeof n&&"object"!=typeof n||$ss(a,n),a.style.verticalAlign="top",a.style.borderStyle="none",s.appendChild(a),$acn(s,this._gDef(e.closeClassName,this.tab.closeClassName)),A5.flags.isMobile||($e.add(a,"mouseover",this._closeMOver,this),$e.add(a,"mouseout",this._closeMOut,this)),$e.add(a,A5.d.evnts.click,this._close,this)}var o=this._tblEle,r=i;o.rows[0].insertCell(r),o.rows[0].cells[r].appendChild(s),$e.add(s,A5.d.evnts.click,this._click,this),$e.add(s,"click",function(e){return $e.preventDefault(e),!1}),$e.add(s,"contextmenu",this._rClick,this),this._firstTabIndx=this._getFirstAvailableTab(),this._lastTabIndx=this._getLastAvailableTab(),this.refresh()},remove:function(e){var t=this._getTabIndex(e);if(t==-1)return!1;var i=!0;if(this._items[t].onBeforeRemove.constructor==Function?i=this._items[t].onBeforeRemove.call(this,this._items[t]):this.onBeforeRemove.constructor==Function&&(i=this.onBeforeRemove.call(this,this._items[t])),i){var s=this._getTab(t);$e.remove(s,A5.d.evnts.click,this._click),$e.remove(s,"contextmenu",this._rClick),s.lastChild.tagName&&"img"==s.lastChild.tagName.toLowerCase()&&(A5.flags.isMobile||($e.remove(s.lastChild,"mouseover",this._closeMOver),$e.remove(s.lastChild,"mouseout",this._closeMOut)),$e.remove(s.lastChild,A5.d.evnts.click,this._close)),delete s,t<this._scrollTab&&this._scrollTab--,this._tblEle.rows[0].deleteCell(t),this._items[t].onRemove.constructor==Function?this._items[t].onRemove.call(this,this._items[t]):this.onRemove.constructor==Function&&this.onRemove.call(this,this._items[t]),this._items.splice(t,1)}if(this.refresh(),t==this._curTabIndx){if("undefined"!=typeof this._items[t]&&!this._items[t].disabled&&this._items[t].show)return this._curTabIndx=-1,this.select(t),!1;this.select(this._getNearestAvailableTab(this._curTabIndx))}else this._curTabIndx>t&&this._curTabIndx--;0==this._items.length&&(this._curTabIndx=-1)},enable:function(e){var t=this._getTabIndex(e);if(t==-1)return!1;this._items[t].disabled=!1;var i=this._getTab(t);i&&$rcn(i,this._gDef(this._items[t].className,this.tab.className)),this.refresh()},disable:function(e){var t=this._getTabIndex(e);if(t==-1)return!1;this._items[t].disabled=!0;var i=this._getTab(t);i&&$acn(i,this._gDef(this._items[t].disabledClassName,this.tab.disabledClassName)),this.refresh()},show:function(e){var t=this._getTabIndex(e);if(t==-1)return!1;this._items[t].show=!0;var i=this._getTab(t);i&&(i.style.display=""),this.refresh()},hide:function(e){var t=this._getTabIndex(e);if(t==-1)return!1;this._items[t].show=!1;var i=this._getTab(t);i&&(i.style.display="none"),this.refresh(),t==this._curTabIndx&&this.select(this._getNearestAvailableTab(this._curTabIndx))},select:function(e){var t=this._getTabIndex(e);if(t==-1)return!1;if(t!=this._curTabIndx&&this._items[t].show&&!this._items[t].disabled){var i=!0;if("undefined"!=typeof this._items[this._curTabIndx]&&(this._items[this._curTabIndx].onBeforeLeave.constructor==Function?i=this._items[this._curTabIndx].onBeforeLeave.call(this,this._items[this._curTabIndx]):this.onBeforeLeave.constructor==Function&&(i=this.onBeforeLeave.call(this,this._items[this._curTabIndx]))),i&&(this._items[t].onBeforeChange.constructor==Function?i=this._items[t].onBeforeChange.call(this,this._items[t]):this.onBeforeChange.constructor==Function&&(i=this.onBeforeChange.call(this,this._items[t]))),i){if("undefined"!=typeof this._items[this._curTabIndx]){var s=this._getTab(this._curTabIndx);this._items[this._curTabIndx].disabled?s.className=this._gDef(this._items[this._curTabIndx].disabledClassName,this.tab.disabledClassName):s.className=this._gDef(this._items[this._curTabIndx].className,this.tab.className),this._items[this._curTabIndx].close&&$acn(s,this._gDef(this._items[this._curTabIndx].closeClassName,this.tab.closeClassName)),this._items[this._curTabIndx].onLeave.constructor==Function?this._items[this._curTabIndx].onLeave.call(this,this._items[this._curTabIndx]):this.onLeave.constructor==Function&&this.onLeave.call(this,this._items[this._curTabIndx])}this._curTabIndx=t,this.value=this._items[this._curTabIndx].value;var s=this._getTab(this._curTabIndx);s.className=this._gDef(this._items[this._curTabIndx].selectedClassName,this.tab.selectedClassName),this._items[this._curTabIndx].close&&$acn(s,this._gDef(this._items[this._curTabIndx].closeClassName,this.tab.closeClassName)),this._items[t].onChange.constructor==Function?this._items[t].onChange.call(this,this._items[t]):this.onChange.constructor==Function&&this.onChange.call(this,this._items[t]),this._items[t]._initial||(this._items[t].onInitial.constructor==Function?this._items[t].onInitial.call(this,this._items[t]):this.onInitial.constructor==Function&&this.onInitial.call(this,this._items[t]),this._items[t]._initial=!0),this.scrollTo(t)}}},reset:function(){var e=this._getTabIndex(tId);return e!=-1&&void(e!=this._curTabIndx?this._items[e]._initial=!1:this._items[e].onInitial.constructor==Function?this._items[e].onInitial.call(this,this._items[e]):this.onInitial.constructor==Function&&this.onInitial.call(this,this._items[e]))},refresh:function(){var e=this._ele,t=this._tblEle,i=this._pbEle,s=this._nbEle;if(this._firstTabIndx=this._getFirstAvailableTab(),this._lastTabIndx=this._getLastAvailableTab(),this._scrollTab==-1&&this._firstTabIndx!=-1&&(this._scrollTab=this._firstTabIndx),t.offsetWidth+6>e.offsetWidth&&!this._canScroll)i.style.display="",s.style.display="",t.style.marginLeft=i.offsetWidth+"px",this._canScroll=!0;else if(t.offsetWidth+6<=e.offsetWidth&&this._canScroll)i.style.display="none",s.style.display="none",t.style.left="",t.style.marginLeft="",this._setScrollDisabled("p",!1),this._canScrollPrev=!1,this._setScrollDisabled("n",!0),this._canScrollNext=!0,this._scrollTab=this._firstTabIndx,this._scrollOffset=0,this._scrollRJ=!1,this._canScroll=!1;else if(this._canScroll){var a=this._ptbEle,n=this._ntbEle;t.offsetWidth-this._scrollOffset<e.offsetWidth-$if(this.scrollButtons.overlay,0,a.offsetWidth+n.offsetWidth)&&(this._scrollTab=this._items.length-1),this._scrollReset()}},scrollTo:function(e){if(!this._canScroll)return!1;var t="undefined"==typeof arguments[1]||arguments[1],i=this._getTabIndex(e);if(i==-1)return!1;if(!this._items[i].show)return!1;var s=this._ele,a=this._tblEle,n=this._ptbEle,o=this._ntbEle,r=a.rows[0].cells[i];r.offsetLeft+r.offsetWidth-this._scrollOffset>s.offsetWidth-$if(this.scrollButtons.overlay,0,n.offsetWidth+o.offsetWidth)||a.offsetWidth-this._scrollOffset<s.offsetWidth-$if(this.scrollButtons.overlay,0,n.offsetWidth+o.offsetWidth)?(this._scrollRJ=!0,this._scrollTab=i,this._scrollOffset=a.rows[0].cells[this._scrollTab].offsetLeft+a.rows[0].cells[this._scrollTab].offsetWidth+4,this._scrollOffset=this._scrollOffset-(s.offsetWidth-$if(this.scrollButtons.overlay,0,n.offsetWidth+o.offsetWidth)),this._scrollAnimate(t),this._scrollTab==this._lastTabIndx&&(this._setScrollDisabled("n",!1),this._canScrollNext=!1),
this._setScrollDisabled("p",!0),this._canScrollPrev=!0):r.offsetLeft<this._scrollOffset&&(this._scrollRJ=!1,this._scrollTab=i,this._scrollOffset=a.rows[0].cells[this._scrollTab].offsetLeft,this._scrollAnimate(t),this._scrollTab==this._firstTabIndx&&(this._setScrollDisabled("p",!1),this._canScrollPrev=!1),this._setScrollDisabled("n",!0),this._canScrollNext=!0)},setHTML:function(e,t){var i=this._getTabIndex(e);this._items[i].html=t,this._tblEle.rows[0].cells[i].firstChild.firstChild.innerHTML="&nbsp;"+t+"&nbsp;"},_scrollReset:function(){if(this._scrollTab==-1)return!1;var e=this._ele,t=this._tblEle,i=this._ptbEle,s=this._ntbEle,a=t.rows[0].cells[this._scrollTab];t.offsetWidth-this._scrollOffset<e.offsetWidth-$if(this.scrollButtons.overlay,0,i.offsetWidth+s.offsetWidth)?(this._scrollRJ=!0,this._scrollTab=this._lastTabIndx,this._scrollOffset=a.offsetLeft+a.offsetWidth+4,this._scrollOffset=this._scrollOffset-(e.offsetWidth-$if(this.scrollButtons.overlay,0,i.offsetWidth+s.offsetWidth)),this._scrollAnimate(!0)):this._scrollRJ?(this._scrollOffset=a.offsetLeft+a.offsetWidth+4,this._scrollOffset=this._scrollOffset-(e.offsetWidth-$if(this.scrollButtons.overlay,0,i.offsetWidth+s.offsetWidth)),this._scrollOffset<0&&(this._scrollOffset=0,this._scrollTab=this._firstTabIndx,this._scrollRJ=!1),this._scrollAnimate(!0)):this._scrollOffset!=a.offsetLeft&&(this._scrollOffset=a.offsetLeft,this._scrollAnimate(!0)),this._scrollTab==this._lastTabIndx&&this._canScrollNext?(this._setScrollDisabled("n",!1),this._canScrollNext=!1):this._scrollTab==this._lastTabIndx||this._canScrollNext||(this._setScrollDisabled("n",!0),this._canScrollNext=!0),this._scrollTab==this._firstTabIndx&&this._canScrollPrev?(this._setScrollDisabled("p",!1),this._canScrollPrev=!1):this._scrollTab==this._lastTabIndx||this._canScrollNext||(this._setScrollDisabled("p",!0),this._canScrollPrev=!0)},_scrollPrev:function(){if(this._canScrollPrev){var e=this._ele,t=this._tblEle,i=this._ptbEle,s=this._ntbEle;this._scrollTab=this._getPrevAvailableTab(this._scrollTab),this._scrollTab==-1&&(this._scrollRJ=!1,this._scrollTab=this._firstTabIndx),this._scrollRJ?(this._scrollOffset=t.rows[0].cells[this._scrollTab].offsetLeft+t.rows[0].cells[this._scrollTab].offsetWidth+4,this._scrollOffset=this._scrollOffset-(e.offsetWidth-$if(this.scrollButtons.overlay,0,i.offsetWidth+s.offsetWidth)),this._scrollOffset<0&&(this._scrollOffset=0,this._scrollTab=this._firstTabIndx,this._scrollRJ=!1),this._scrollAnimate(!0)):(this._scrollOffset=t.rows[0].cells[this._scrollTab].offsetLeft,this._scrollAnimate(!0)),this._scrollTab==this._firstTabIndx&&this._canScrollPrev?(this._setScrollDisabled("p",!1),this._canScrollPrev=!1):this._scrollTab==this._lastTabIndx||this._canScrollNext||(this._setScrollDisabled("p",!0),this._canScrollPrev=!0),this._canScrollNext||(this._setScrollDisabled("n",!0),this._canScrollNext=!0)}},_scrollNext:function(){if(this._canScrollNext){var e=this._ele,t=this._tblEle,i=this._ptbEle,s=this._ntbEle,a=this._getNextAvailableTab(this._scrollTab);this._scrollRJ||(t.offsetWidth-this._scrollOffset-t.rows[0].cells[this._scrollTab].offsetWidth<e.offsetWidth-$if(this.scrollButtons.overlay,0,i.offsetWidth+s.offsetWidth)?(this._scrollRJ=!0,a=this._lastTabIndx):(this._scrollTab=a,this._scrollOffset=t.rows[0].cells[this._scrollTab].offsetLeft,this._scrollAnimate(!0))),this._scrollRJ&&(this._scrollTab=a,this._scrollOffset=t.rows[0].cells[this._scrollTab].offsetLeft+t.rows[0].cells[this._scrollTab].offsetWidth+4,this._scrollOffset=this._scrollOffset-(e.offsetWidth-$if(this.scrollButtons.overlay,0,i.offsetWidth+s.offsetWidth)),this._scrollAnimate(!0)),this._scrollTab==this._lastTabIndx&&this._canScrollNext?(this._setScrollDisabled("n",!1),this._canScrollNext=!1):this._scrollTab==this._lastTabIndx||this._canScrollNext||(this._setScrollDisabled("n",!0),this._canScrollNext=!0),this._canScrollPrev||(this._setScrollDisabled("p",!0),this._canScrollPrev=!0)}},_scrollAnimate:function(){var e=this._tblEle;if("undefined"!=typeof arguments[0]){if(!arguments[0])return e.style.left="-"+this._scrollOffset+"px",this._scrollTempOffset=this._scrollOffset,!1;clearTimeout(this._scrollTO),this._scrollAnimateInc=5}if(this._scrollAnimateInc--,0==this._scrollAnimateInc)e.style.left="-"+this._scrollOffset+"px",this._scrollTempOffset=this._scrollOffset;else{this._scrollTempOffset=Math.round(this._scrollOffset-(this._scrollOffset-this._scrollTempOffset)/2.5),e.style.left="-"+this._scrollTempOffset+"px";var t=this;this._scrollTO=setTimeout(function(){t._scrollAnimate(),delete t},30)}},_setScrollDisabled:function(e,t){"p"==e?t?(this._pbEle.className=this.scrollButtons.prevClassName,A5.u.icon.update(this._pbEle.firstChild,this.scrollButtons.prevImage)):(this._pbEle.className=this._gDef(this.scrollButtons.prevDisabledClassName,this.scrollButtons.prevClassName),A5.u.icon.update(this._pbEle.firstChild,this._gDef(this.scrollButtons.prevDisabledImage,this.scrollButtons.prevImage))):t?(this._nbEle.className=this.scrollButtons.nextClassName,A5.u.icon.update(this._nbEle.firstChild,this.scrollButtons.nextImage)):(this._nbEle.className=this._gDef(this.scrollButtons.nextDisabledClassName,this.scrollButtons.nextClassName),A5.u.icon.update(this._nbEle.firstChild,this._gDef(this.scrollButtons.nextDisabledImage,this.scrollButtons.nextImage)))},_dragScrollDisChange:function(e,t){if(t._canScroll){var i=$ga(this,"a5dragscrolldisable");"n"==i?(t._setScrollDisabled("n",!1),t._canScrollNext=!1):"p"==i?(t._setScrollDisabled("p",!1),t._canScrollPrev=!1):(t._setScrollDisabled("n",!0),t._setScrollDisabled("p",!0),t._canScrollNext=!0,t._canScrollPrev=!0)}},_dragScrollEnd:function(){var e=this._tblEle;this._scrollOffset=Math.abs($u.s.toNum(e.style.left));for(var t=0;t<e.rows[0].cells.length;t++)if(e.rows[0].cells[t].offsetLeft>=this._scrollOffset){this._scrollTab=t;break}},_close:function(e,t){var i=this.parentNode.parentNode.cellIndex;return t._items[i].disabled||t.remove(i),$e.stopEvent(e),!1},_closeMOver:function(e,t){var i=this.parentNode.parentNode.cellIndex;A5.u.icon.update(this,t._gDef(t._items[i].closeIconHover,t.tab.closeIconHover))},_closeMOut:function(e,t){var i=this.parentNode.parentNode.cellIndex;A5.u.icon.update(this,t._gDef(t._items[i].closeIcon,t.tab.closeIcon))},_click:function(e,t){var i=this.parentNode.cellIndex;return t.select(i),e=$e.getEvent(e),$e.stopEvent(e),!1},_rClick:function(e,t){var i=this.parentNode.cellIndex;return e=$e.getEvent(e),$e.stopEvent(e),t._items[i].onRightClick.constructor==Function?t._items[i].onRightClick.call(t,t._items[i]):t.onRightClick.constructor==Function&&t.onRightClick.call(t,t._items[i]),!1},_getTab:function(e){if(e>=0&&e<this._items.length){var t=this._tblEle.rows[0].cells[e],i=t.firstChild;return i}return!1},_getTabIndex:function(e){if("number"==typeof e)return e>-1&&e<this._items.length?e:-1;for(var t=0;t<this._items.length;t++)if(e==this._items[t].value)return t;return-1},_getNextAvailableTab:function(e){for(var t=e+1;t<this._items.length;t++)if(!this._items[t].disabled&&this._items[t].show)return t;return-1},_getPrevAvailableTab:function(e){for(var t=e-1;t>-1;t--)if(!this._items[t].disabled&&this._items[t].show)return t;return-1},_getNearestAvailableTab:function(e){for(var t=e-1;t>-1;t--)if(!this._items[t].disabled&&this._items[t].show)return t;for(var t=e+1;t<this._items.length;t++)if(!this._items[t].disabled&&this._items[t].show)return t;return-1},_getLastAvailableTab:function(){for(var e=this._items.length-1;e>-1;e--)if(!this._items[e].disabled&&this._items[e].show)return e;return-1},_getFirstAvailableTab:function(e){for(var t=0;t<this._items.length;t++)if(!this._items[t].disabled&&this._items[t].show)return t;return-1},_parseTab:function(e){return"object"!=typeof e&&(e={html:e.toString()}),"undefined"==typeof e.close&&(e.close=this.tab.close),$u.o.assign(e,this._defaultTab,!0),""==e.html&&(e.html=e.value),""==e.value&&(e.value=e.html),"undefined"!=typeof e.className&&"+"==e.className.charAt(0)&&(e.className=this.tab.className+" "+e.className.substr(1)),"undefined"!=typeof e.selectedClassName&&"+"==e.selectedClassName.charAt(0)&&(e.selectedClassName=this.tab.selectedClassName+" "+e.selectedClassName.substr(1)),"undefined"!=typeof e.disabledClassName&&"+"==e.disabledClassName.charAt(0)&&(e.disabledClassName=this.tab.disabledClassName+" "+e.disabledClassName.substr(1)),e},_gDef:function(){for(var e=0;e<arguments.length;e++)if(""!=arguments[e])return arguments[e];return""},_defaultTab:{html:"",value:"",className:"",selectedClassName:"",disabledClassName:"",close:!1,closeIcon:"",closeIconHover:"",closeIconStyle:"",show:!0,disabled:!1,onChange:0,onBeforeChange:0,onLeave:0,onBeforeLeave:0,onRightClick:0,onInitial:0,onBeforeRemove:0,onRemove:0,_initial:!1}},A5.TabbedInterfaceComponentHelper=Class.create(),A5.TabbedInterfaceComponentHelper.prototype={initialize:function(tbiId,settings){this.tbiId=tbiId,$u.o.assign(settings,{compact:!1,fill:!1,minHeight:0,tabBand:{},pane:{padding:4,header:{className:"",style:0},footer:{className:"",style:0}}},!0),"undefined"==typeof settings.tabBand.hide&&(settings.tabBand.hide=settings.compact),$u.o.assign(this,settings),this.tabBand.onBeforeChange=function(e){if(this._panes[this._curTabIndx]&&"grid"==this._panes[this._curTabIndx].type){var t=this._panes[this._curTabIndx].name.toUpperCase()+"_GridObj";window[t]&&window[t].blur()}if(this.value&&""!=this.value&&$(this.value)){var i=$(this.value);document.all&&"Opera"!=navigator.appName?i.style.display="none":(i.style.visibility="hidden",i.style.top="-200%")}for(var s=-1,a=0;a<this._panes.length;a++)if(this._panes[a]._id==e.value){s=a;break}var n=!0;return s>-1&&this._panes[s].onBeforeChange.constructor==Function&&(n=this._panes[s].onBeforeChange.call(this._tbObj,this._panes[s])),n},this.tabBand.onChange=function(e){if(this.value&&""!=this.value){var t=$(this.value);document.all&&"Opera"!=navigator.appName?t.style.display="":(t.style.visibility="",t.style.top="0px"),this._paneHeight&&($(this.value+".PANE").style.height=this._paneHeight-$(this.value+".HEADER").offsetHeight-$(this.value+".FOOTER").offsetHeight+"px");for(var i=-1,s=0;s<this._panes.length;s++)if(this._panes[s]._id==e.value){i=s;break}if($(this.tbiId+".TITLE")&&($(this.tbiId+".TITLE").innerHTML=e.html+"&nbsp;"),$(this.tbiId+".CLOSE")&&(e.close?$(this.tbiId+".CLOSE").style.display="":$(this.tbiId+".CLOSE").style.display="none"),$(this.tbiId+".PREV")&&(i>0?$(this.tbiId+".PREV").src=this.scrollButtons.prevImage:""!=this.scrollButtons.prevDisabledImage&&($(this.tbiId+".PREV").src=this.scrollButtons.prevDisabledImage)),$(this.tbiId+".NEXT")&&(i<this._panes.length-1?$(this.tbiId+".NEXT").src=this.scrollButtons.nextImage:""!=this.scrollButtons.nextDisabledImage&&($(this.tbiId+".NEXT").src=this.scrollButtons.nextDisabledImage)),this._panes[i].autoRefresh)if("static"==this._panes[i].type)$(this.value+".CONTENT").innerHTML=this._panes[i].html;else if("dynamic"==this._panes[i].type){$(this.value+".CONTENT").innerHTML=this._panes[i].html;var a=this._panes[i].data+$if(""!=this._panes[i].data,"&","")+A5.ajax.buildURLParam("_containerId",this._panes[i]._id+".CONTENT");A5.ajax.callback(this._panes[i].url,a)}else if("url"==this._panes[i].type){var n=this._panes[i].url;""!=this._panes[i].data&&(n=n+"?"+this._panes[i].data),$(this.value+".PANE").src=A5.ajax.addURLRequiredData(n)}else if("grid"==this._panes[i].type){var a=this._panes[i].data;$u.o.assign(a,{gridDiv:this._panes[i]._id+".CONTENT"}),A5.component.runGrid(a)}else if("dialog2"==this._panes[i].type||"customComponent"==this._panes[i].type){var a=this._panes[i].data,o=this._panes[i].type+"Div";a[o]=this._panes[i]._id+".CONTENT",A5.component.runGenericComponent(a)}else if("report"==this._panes[i].type){var a=this._panes[i].data;$u.o.assign(a,{reportIFrame:this._panes[i]._id+".PANE"}),A5.component.runReport(a)}else if("htmlReport"==pSettings.type){var a=this._panes[i].data;$u.o.assign(a,{reportDiv:this._panes[i]._id+".CONTENT"}),A5.component.runReport(a)}i>-1&&this._panes[i].onChange.constructor==Function&&this._panes[i].onChange.call(this._tbObj,this._panes[i])}},this.tabBand.onBeforeRemove=function(e){var t=!0;if("grid"==e.paneType){var i=e.name.toUpperCase()+"_GridObj";window[i]&&(window[i]._confirmAction()||(t=!1))}for(var s=-1,a=0;a<this._panes.length;a++)if(this._panes[a]._id==e.value){s=a;break}var n=!0;return s>-1&&this._panes[s].onBeforeRemove.constructor==Function&&(n=this._panes[s].onBeforeRemove.call(this._tbObj,this._panes[s])),t&&n},this.tabBand.onRemove=function(item){for(var indx=-1,i=0;i<this._panes.length;i++)if(this._panes[i]._id==item.value){indx=i;break}if(indx>-1&&(this._panes[indx].onRemove.constructor==Function&&this._panes[indx].onRemove.call(this._tbObj,this._panes[indx]),"undefined"!=typeof document.documentElement.style.opacity||!document.all||"Opera"==navigator.appName)){var name=this._panes[indx].name.toUpperCase();"grid"==item.paneType&&window[name+"_GridObj"]?(window[name+"_GridObj"]._destroy(),eval("delete "+name+"_GridObj")):"dialog2"==item.paneType&&window[name+"_DlgObj"]?(window[name+"_DlgObj"]._destroy(),eval(name+"_DlgObj = false; try{delete "+name+"_DlgObj;}catch(err){}")):"customComponent"==item.paneType&&window[name+"_CustObj"]&&(window[name+"_CustObj"]._destroy(),eval("delete "+name+"_CustObj"))}$(this.tbiId+".PANES").removeChild($(item.value)),this._panes.splice(indx,1)},this._tbObj=new A5.TabBand(tbiId+".TABBAND",[],this.tabBand),this._tbObj.tbiId=tbiId,$(this.tbiId+".TABBAND").style.display="none",this._tbObj._panes=[],this._curPaneId="",this._paneIndx=0,this._rlTO=0,$(this.tbiId+".CLOSE")&&($(this.tbiId+".PREV").src=this._tbObj.tab.closeIcon),$(this.tbiId+".PREV")&&($(this.tbiId+".PREV").src=this._tbObj.scrollButtons.prevImage),$(this.tbiId+".NEXT")&&($(this.tbiId+".NEXT").src=this._tbObj.scrollButtons.nextImage),this.fill&&($e.add(document.body,"load",this._refreshLayout,this,!0),$e.add(window,"resize",this._refreshLayout,this,!0))},add:function(e){if($u.o.assign(e,this._dPane,!0),e._id=this.tbiId+".PANE."+this._paneIndx,""==e.title?e.title=e.name:""==e.name&&(e.name=e.title),!e.multiple)for(var t=0;t<this._tbObj._panes.length;t++)if(e.name==this._tbObj._panes[t].name){if(this._tbObj.select(this._tbObj._panes[t]._id),this._tbObj.setHTML(t,e.title),this._tbObj._panes[t].autoRefreshOnAdd&&!this._tbObj._panes[t].autoRefresh)if("static"==this._tbObj._panes[t].type)$(this.value+".CONTENT").innerHTML=this._tbObj._panes[t].html;else if("dynamic"==this._tbObj._panes[t].type){$(this.value+".CONTENT").innerHTML=this._tbObj._panes[t].html;var i=this._tbObj._panes[t].data+$if(""!=this._tbObj._panes[t].data,"&","")+A5.ajax.buildURLParam("_containerId",this._tbObj._panes[t]._id+".CONTENT");A5.ajax.callback(this._tbObj._panes[t].url,i)}else if("url"==this._tbObj._panes[t].type){var s=this._tbObj._panes[t].url;""!=this._tbObj._panes[t].data&&(s=s+"?"+this._tbObj._panes[t].data),$(e._id+".PANE").src=A5.ajax.addURLRequiredData(s)}else if("grid"==this._tbObj._panes[t].type){var i=this._tbObj._panes[t].data;$u.o.assign(i,{gridDiv:this._tbObj._panes[t]._id+".CONTENT"}),A5.component.runGrid(i)}else if("dialog2"==this._tbObj._panes[t].type||"customComponent"==this._tbObj._panes[t].type){var i=this._tbObj._panes[t].data,a=this._tbObj._panes[t].type+"Div";i[a]=this._tbObj._panes[t]._id+".CONTENT",A5.component.runGenericComponent(i)}else if("report"==this._tbObj._panes[t].type){var i=this._tbObj._panes[t].data;$u.o.assign(i,{reportIFrame:this._tbObj._panes[t]._id+".PANE"}),A5.component.runReport(i)}else if("htmlReport"==e.type){var i=this._tbObj._panes[t].data;$u.o.assign(i,{reportDiv:this._tbObj._panes[t]._id+".CONTENT"}),A5.component.runReport(i)}return this._showMenu(!1),!1}this.tabBand.hide||($(this.tbiId+".TABBAND").style.display="");var n=$(this.tbiId+".PANES"),o=document.createElement("div");o.id=e._id,o.style.position="absolute",o.style.top="0px",o.style.left="0px",o.style.width="100%",document.all&&"Opera"!=navigator.appName?o.style.display="none":(o.style.visibility="hidden",o.style.top="-200%"),n.appendChild(o);var r=document.createElement("div");r.id=e._id+".HEADER",r.className=this._gDef(e.header.className,this.pane.header.className);var l=$if(0!=e.header.style,e.header.style,this.pane.header.style);if("object"!=typeof l&&"string"!=typeof l||$ss(r,l),e.header.show||(r.style.display="none"),r.innerHTML=e.header.html,o.appendChild(r),"static"==e.type||"dynamic"==e.type||"grid"==e.type||"dialog2"==e.type||"customComponent"==e.type||"htmlReport"==e.type){r=document.createElement("div"),r.id=e._id+".PANE",r.style.position="relative",r.style.overflow="auto",r.style.height="0px";var d=document.createElement("div");if(d.id=e._id+".CONTENT",d.style.padding=this.pane.padding+"px",r.appendChild(d),o.appendChild(r),d.innerHTML=e.html,"dynamic"==e.type){var i=e.data+$if(""!=e.data,"&","")+A5.ajax.buildURLParam("_containerId",e._id+".CONTENT");e.autoRefresh||A5.ajax.callback(e.url,i)}else if("grid"==e.type){var i=e.data;$u.o.assign(i,{gridDiv:e._id+".CONTENT"}),A5.component.runGrid(i)}else if("dialog2"==e.type||"customComponent"==e.type){var i=e.data,a=e.type+"Div";i[a]=e._id+".CONTENT",A5.component.runGenericComponent(i)}else if("htmlReport"==e.type){var i=e.data;$u.o.assign(i,{reportDiv:e._id+".CONTENT"}),A5.component.runReport(i)}}else if("url"==e.type||"report"==e.type){r=document.createElement("iframe"),r.id=e._id+".PANE",r.frameBorder="0",r.border="0",r.style.width="100%",r.style.margin="0px",r.style.marginBottom="-2px",r.style.height="0px";var s=e.url;if(""!=e.data&&(s=s+"?"+e.data),o.appendChild(r),"report"==e.type){var i=e.data;$u.o.assign(i,{reportIFrame:e._id+".PANE"}),A5.component.runReport(i)}else r.src=s}else if(0==this._tbObj._panes.length)return n.innerHTML="",$(this.tbiId+".TABBAND").style.display="none",!1;r=document.createElement("div"),r.id=e._id+".FOOTER",r.className=this._gDef(e.footer.className,this.pane.footer.className),l=$if(0!=e.footer.style,e.footer.style,this.pane.footer.style),"object"!=typeof l&&"string"!=typeof l||$ss(r,l),e.footer.show||(r.style.display="none"),r.innerHTML=e.footer.html,o.appendChild(r),this._tbObj._panes.push(e),this._tbObj.add({html:e.title,value:e._id,name:e.name,paneType:e.type,close:e.close,onRightClick:e.onRightClick,onInitial:e.onInitial});var h=e.autoRefresh;return e.autoRefresh=!1,this._tbObj.select(e._id),e.autoRefresh=h,this._tbObj._panes.autoRefresh=h,this._paneIndx++,this._showMenu(!1),!0},getElement:function(e){for(var t="undefined"!=typeof arguments[1]?arguments[1]:"",i="",s="",a=0;a<this._tbObj._panes.length;a++)e==this._tbObj._panes[a].name&&(i=this._tbObj._panes[a]._id,s=this._tbObj._panes[a].type);return""!=i&&$("header"==t?i+".HEADER":"footer"==t?i+".FOOTER":"url"==s||"report"==s?i+".PANE":i+".CONTENT")},_showMenu:function(e){this.compact&&($(this.tbiId+".TITLEPANEL").style.height="",e?($(this.tbiId+".TITLEPANEL").style.height=$(this.tbiId+".TITLEPANEL").offsetHeight+"px",$(this.tbiId+".MENUPANEL").style.display="",$(this.tbiId+".CONTENTPANEL").style.display="none",$(this.tbiId+".PANETITLE").style.display="none",$(this.tbiId+".MENUTITLE").style.display=""):($(this.tbiId+".MENUPANEL").style.display="none",$(this.tbiId+".CONTENTPANEL").style.display="",$(this.tbiId+".PANETITLE").style.display="",$(this.tbiId+".MENUTITLE").style.display="none")),this.fill&&this.refreshLayout()},_refreshLayout:function(){var e=this;clearTimeout(this._rlTO),this._rlTO=setTimeout(function(){e.refreshLayout(),delete e},100)},refreshLayout:function(){var e=$(this.tbiId),t=$(this.tbiId+".MENU"),i=AUI.u.getVPSize(),s=document.documentElement.offsetHeight,a=e.offsetHeight-e.clientHeight;s==i.height?s=document.body.scrollHeight:s>i.height&&document.all&&"Opera"!=navigator.appName&&(s=document.body.clientHeight);var n=i.height-(a+s-e.offsetHeight);if(n<30)return!1;if(n<this.minHeight&&(n=this.minHeight),e.style.height==n+"px")return this._tbObj.value&&""!=this._tbObj.value&&$e.execute(this._tbObj.value+".PANE","a5resize"),!1;if(e.style.height=n+"px",t&&"none"!=$(this.tbiId+".MENUPANEL").style.display){t.style.height="";var o=n-4;$(this.tbiId+".MENUPANEL_HEADER")&&(o-=$(this.tbiId+".MENUPANEL_HEADER").offsetHeight);for(var r=!1,l=0;l<t.childNodes.length;l++)if("undefined"!=typeof t.childNodes[l].tagName){r=t.childNodes[l];break}t.style.overflow="auto",t.style.position="relative",r&&(o-=t.scrollHeight-r.scrollHeight),t.style.height=o+"px"}if(this._tbObj.value&&""!=this._tbObj.value){var d=$(this._tbObj.value+".PANE");this.tabBand.hide?this._tbObj._paneHeight=n-1:this._tbObj._paneHeight=n-$(this.tbiId+".TABBAND").offsetHeight-1,d&&(d.style.height=this._tbObj._paneHeight-$(this._tbObj.value+".HEADER").offsetHeight-$(this._tbObj.value+".FOOTER").offsetHeight+"px"),$(this.tbiId+".PANES").style.height=this._tbObj._paneHeight+"px",$e.execute(d,"a5resize")}},setTabHTML:function(e,t){for(var i=0;i<this._tbObj._panes.length;i++)e==this._tbObj._panes[i].name&&this._tbObj.setHTML(i,t)},closeOpenPanes:function(){for(var e=this._tbObj._panes.length-1;e>=0;e--)this._tbObj._panes[e].close&&this._tbObj.remove(e)},selectPane:function(e){for(var t=0;t<tbiObj._tbObj._panes.length;t++)if(tbiObj._tbObj._panes[t].title==e){tbiObj._tbObj.select(t);break}},_gDef:function(){for(var e=0;e<arguments.length;e++)if(""!=arguments[e])return arguments[e];return""},_dPane:{name:"",title:"",type:"static",html:"",url:"",data:"",close:!0,autoRefresh:!1,autoRefreshOnAdd:!1,multiple:!1,onChange:0,onBeforeChange:0,onRightClick:0,onInitial:0,onBeforeRemove:0,onRemove:0,header:{className:"",style:0,show:!1,html:""},footer:{className:"",style:0,show:!1,html:""}}},A5.Tree=Class.create({initialize:function(e,t,i){this.contId=e;var s={override:"base",inputId:"",disabledClassName:"",focusClassName:"",multiple:!1,loopNavigate:!1,loopNavigateNullSelection:!0,allowNullSelection:!0,separator:".",loadingMessage:"Loading...",dynamicDataURL:"",dynamicDataURLParams:"",dynamicDataHandle:"",node:{className:"",hoverClassName:"",selectedClassName:"",labelClassName:"",icon:"",expandedIcon:"",collapsedIcon:"",leaf:{firstImage:"",image:"",lastImage:""},branch:{firstExpandedImage:"",firstCollapsedImage:"",firstExpandedHoverImage:"",firstCollapsedHoverImage:"",expandedImage:"",collapsedImage:"",expandedHoverImage:"",collapsedHoverImage:"",lastExpandedImage:"",lastCollapsedImage:"",lastExpandedHoverImage:"",lastCollapsedHoverImage:""}},branch:{className:"",lineImage:"",nullImage:""},onFocus:0,onBlur:0,onRightClick:0,onNodeSelect:0,onNodeClick:0,onNodeExpand:0,onBeforeNodeExpand:0,onNodeCollapse:0,onNodeDraw:0,onBeforePopulate:0,onPopulate:0,selection:[],value:[],disabled:!1,_hasFocus:!1};$u.o.assign(s,i),"undefined"!=typeof A5._treeDefaults&&$u.o.assign(s,A5._treeDefaults),"undefined"!=typeof s.theme&&A5.themes.assign(s,s.theme,"tree"),""==s.node.collapsedIcon&&(s.node.collapsedIcon=s.node.icon),""==s.node.expandedIcon&&(s.node.expandedIcon=s.node.collapsedIcon),""==s.node.selectedCollapsedIcon&&(s.node.selectedCollapsedIcon=s.node.selectedIcon),""==s.node.selectedExpandedIcon&&(s.node.selectedExpandedIcon=s.node.selectedCollapsedIcon),""==s.branch.lineImage&&(s.branch.lineImage=s.branch.nullImage),""==s.node.leaf.image&&(s.node.leaf.image=s.branch.nullImage),""==s.node.branch.expandedImage&&(s.node.branch.expandedImage=s.branch.nullImage),""==s.node.branch.collapsedImage&&(s.node.branch.collapsedImage=s.branch.nullImage),""==s.node.leaf.firstImage&&(s.node.leaf.firstImage=s.node.leaf.image),""==s.node.leaf.lastImage&&(s.node.leaf.lastImage=s.node.leaf.image),""==s.node.branch.firstExpandedImage&&(s.node.branch.firstExpandedImage=s.node.branch.expandedImage),""==s.node.branch.lastExpandedImage&&(s.node.branch.lastExpandedImage=s.node.branch.expandedImage),""==s.node.branch.firstCollapsedImage&&(s.node.branch.firstCollapsedImage=s.node.branch.collapsedImage),""==s.node.branch.lastCollapsedImage&&(s.node.branch.lastCollapsedImage=s.node.branch.collapsedImage),""==s.node.branch.firstExpandedHoverImage&&(s.node.branch.firstExpandedHoverImage=s.node.branch.expandedHoverImage),""==s.node.branch.lastExpandedHoverImage&&(s.node.branch.lastExpandedHoverImage=s.node.branch.expandedHoverImage),""==s.node.branch.firstCollapsedHoverImage&&(s.node.branch.firstCollapsedHoverImage=s.node.branch.collapsedHoverImage),""==s.node.branch.lastCollapsedHoverImage&&(s.node.branch.lastCollapsedHoverImage=s.node.branch.collapsedHoverImage),$u.o.assign(this,s),A5.overrides.assign(this,"tree",this.override),this.populate(t),this._keyWatch=new AUI.KeyWatcher([{key:"up",handle:this._keyPrevNode},{key:"down",handle:this._keyNextNode},{key:"home",handle:this._keyFirstNode},{key:"end",handle:this._keyLastNode},{key:"left",handle:this._keyBranchNode},{key:"right",handle:this._keyChildNode},{key:"enter",handle:this._keyEnter}],this);var a=$(e),n=document.createElement("button");n.id=e+".FOCUSCATCHER",$ss(n,"position: absolute; font-size: 0px; outline: none; opacity: 0; filter: alpha(opacity=0); height: 0px; width: "+a.offsetWidth+"px"),$e.add(n,"keydown",function(e){var t=e.charCode||e.keyCode;9!=t&&$e.preventDefault(e)}),$e.add(n,"keypress",function(e){var t=e.charCode||e.keyCode;9!=t&&$e.preventDefault(e)}),$e.add(n,"focus",this._focus,this,!0),$e.add(a,A5.d.evnts.click,this._focus,this,!0),$e.add(a,"contextmenu",this._rClick,this,!0),a.parentNode.insertBefore(n,a),this.disabled&&this.setDisabled(!0),this.allowNullSelection||0==t.length||this._selectNode(this.getDataNode([0]))},populate:function(e){if(this.onBeforePopulate.constructor==Function){var t=this.onBeforePopulate.call(this,e,"full");if("boolean"==typeof t&&!t)return!1}$e.removeGroup(this.contId+".EVENTS"),this.data=this._expandTreeData(e);var i=this._generateHTMLNodes([],[],this.data,!0,"");i.id=this.contId+".TREE";var s=$(this.contId);s.innerHTML="",s.insertBefore(i,s.lastChild),this.onPopulate.constructor==Function&&this.onPopulate.call(this,this.data,"full")},populateNode:function(e,t){if(this.onBeforePopulate.constructor==Function){var i=this.onBeforePopulate.call(this,t,"node",e);if("boolean"==typeof i&&!i)return!1}t=this._expandTreeData(t);var s=new Array;s[s.length]=$if(e[0]==this.data.length-1,this.branch.nullImage,this.branch.lineImage);for(var a=this.data[e[0]],n=1;n<e.length;n++)s[n]=$if(e[n]==a.children.length-1,this.branch.nullImage,this.branch.lineImage),a=a.children[e[n]];a.children=t,a.location=e,a.expanded=!0;var o=this._generateHTMLNodes(e,s,t,!0,a.branchClassName);$(this.contId+"."+e.join(".")).appendChild(o);var r=$(this.contId+"."+a.location.join(".")+".LABEL").previousSibling;$e.remove(r,A5.d.evnts.up,this._clickToggleBranch),$e.add(r,A5.d.evnts.up,this._clickToggleBranch,this,!1,this.contId+".EVENTS"),A5.flags.isMobile||""==this.node.branch.collapsedHoverImage&&""==a.collapsedHoverImage||($e.remove(r,"mouseover",this._nodeImageMouseOver),$e.remove(r,"mouseout",this._nodeImageMouseOut),$e.add(r,"mouseover",this._nodeImageMouseOver,this,!1,this.contId+".EVENTS"),$e.add(r,"mouseout",this._nodeImageMouseOut,this,!1,this.contId+".EVENTS")),0==a.location[a.location.length-1]&&1==a.location.length?A5.u.icon.update(r,this._gDef(a.expandedImage,this.node.branch.firstExpandedImage)):a.isLast?A5.u.icon.update(r,this._gDef(a.expandedImage,this.node.branch.lastExpandedImage)):A5.u.icon.update(r,this._gDef(a.expandedImage,this.node.branch.expandedImage)),this.onPopulate.constructor==Function&&this.onPopulate.call(this,a.children,"node",e)},getDataNode:function(e){if(0==e.length)return 0;var t=this.data[e[0]];if("number"==typeof e[0])var t=this.data[e[0]],i=[e[0]];else for(var s=0;s<this.data.length;s++)if(this.data[s].value.toLowerCase()==String(e[0]).toLowerCase()){var t=this.data[s],i=[s];break}for(var s=1;s<e.length;s++)if("number"==typeof e[s])t=t.children[e[s]],i[i.length]=e[s];else for(var a=0;a<t.children.length;a++)if(t.children[a].value.toLowerCase()==String(e[s]).toLowerCase()){t=t.children[a],i[i.length]=a;break}return t.location=i,t},scrollToNode:function(e){var t=this.contId+"."+e.location.join(".")+".LABEL";if($(t)){var i=$(t),s=$(this.contId);s.scrollTop>i.offsetTop-2*i.parentNode.offsetHeight?s.scrollTop=i.offsetTop-2*i.parentNode.offsetHeight:s.scrollTop+s.offsetHeight<i.offsetTop&&(s.scrollTop=i.offsetTop+i.parentNode.offsetHeight-s.offsetHeight),s.scrollLeft=i.offsetLeft-40}},setDisabled:function(e){e?$acn(this.contId,this.disabledClassName):$rcn(this.contId,this.disabledClassName),this.disabled=e},setValue:function(){var e=this.value;this._deselectAll();for(var t="",i=new Object,s=new Object,a=0,n=0,o=[],r=0;r<arguments.length;r++)o.push(arguments[r]);var l=!0;"boolean"==typeof o[o.length-1]&&(l=o.pop()),1==o.length&&o[0].constructor==Array&&"string"==typeof o[0][0]&&(o=o[0]);var d=o.length-1;this.multiple&&(d=0);for(var r=d;r<o.length;r++)if(i=0,o[r].constructor==Array?i=this.getDataNode(o[r]):(n=String(o[r]).split(this.separator),n.length>1?i=this.getDataNode(n):(a=new Array,this._getDataNodeFromValue(o[r],this.data,a),a.reverse(),i=this.getDataNode(a))),"object"==typeof i){if(i.location.length>1)for(var h=[],c=0;c<i.location.length-1;c++)h.push(i.location[c]),s=this.getDataNode(h),s.expanded||this._toggleBranch(s);t=this._gDef(i.selectedClassName,this.node.selectedClassName),""!=t&&$acn($(this.contId+"."+i.location.join(".")).firstChild,t),this.selection[this.selection.length]=i}for(var u=[],r=0;r<this.selection.length;r++)u[r]=this._getDataNodeValue(this.selection[r]);this.value=u,""!=this.inputId&&($(this.inputId).value=u.join("\n"),l&&$e.execute(this.inputId,"change")),e.join("\n")!=u.join("\n")&&("object"==typeof i?i.onSelect.constructor==Function&&l&&i.onSelect(i):this.onNodeSelect.constructor==Function&&l&&this.onNodeSelect(i))},navigate:function(e){return!this.disabled&&void("prev"==e.toLowerCase().substr(0,4)?this._keyPrevNode():"next"==e.toLowerCase()?this._keyNextNode():"out"==e.toLowerCase()?this._keyBranchNode():"in"==e.toLowerCase()?this._keyChildNode():"home"==e.toLowerCase()?this._keyFirstNode():"end"==e.toLowerCase()?this._keyLastNode():"enter"==e.toLowerCase()&&this._keyEnter())},_expandTreeData:function(e){if(this.disabled)return!1;for(var t=new Object,i=0;i<e.length;i++)"object"!=typeof e[i]?(t={html:""+$u.s.tran(e[i],["<",">"],["&lt;","&gt;"]),value:""+e[i]},$u.o.assign(t,this._defaultNode,!0),e[i]=t):("undefined"!=typeof e[i].value&&(e[i].defaultValue=!1),$u.o.assign(e[i],this._defaultNode,!0),""==e[i].value&&""!=e[i].html?e[i].value=e[i].html:""==e[i].html&&""!=e[i].value&&(e[i].html=$u.s.tran(e[i].value,["<",">"],["&lt;","&gt;"])),e[i].children.constructor==Array&&(e[i].children=this._expandTreeData(e[i].children))),i==e.length-1?e[i].isLast=!0:e[i].isLast=!1;return e},_getFirstVisDataNode:function(){return this.getDataNode([0])},_getLastVisDataNode:function(){var e=this.data[this.data.length-1],t=new Array;for(t.push(this.data.length-1);e.children.constructor==Array&&e.expanded;)t.push(e.children.length-1),e=e.children[e.children.length-1];return this.getDataNode(t)},_getPrevVisDataNode:function(e){for(var t=new Array,i=0;i<e.location.length;i++)t[i]=e.location[i];if(1==t.length&&0==t[0])return this.loopNavigate?(!this.allowNullSelection||!this.loopNavigateNullSelection)&&this._getLastVisDataNode():e;if(0==t[t.length-1])return t.pop(),this.getDataNode(t);t[t.length-1]--;for(var s=this.getDataNode(t);s.expanded;)t.push(s.children.length-1),s=this.getDataNode(t);return s},_getNextVisDataNode:function(e){for(var t=new Array,i=0;i<e.location.length;i++)t[i]=e.location[i];if(e.isLast&&!e.expanded){if(t.pop(),0==t.length)return this.loopNavigate?(!this.allowNullSelection||!this.loopNavigateNullSelection)&&this._getFirstVisDataNode():e;for(var s=this.getDataNode(t);s.isLast;){if(t.pop(),0==t.length)return this.loopNavigate?(!this.allowNullSelection||!this.loopNavigateNullSelection)&&this._getFirstVisDataNode():e;s=this.getDataNode(t)}return t[t.length-1]++,this.getDataNode(t)}return e.expanded?(t[t.length]=0,this.getDataNode(t)):(t[t.length-1]++,this.getDataNode(t))},_getDataNodeFromValue:function(e,t,i){for(var s=0;s<t.length;s++){
if(t[s].value==e){i[0]=s;break}if(t[s].children.constructor==Array&&this._getDataNodeFromValue(e,t[s].children,i),i.length>0){i.push(s);break}}},_getDataNodeValue:function(e){if(e.defaultValue){for(var t=new Object,i=new Array,s="",a=0;a<e.location.length;a++)i[a]=e.location[a];for(var a=i.length-1;a>=0;a--)t=this.getDataNode(i),s=$if(0!=a,this.separator,"")+t.value+s,i.pop();return s}return e.value},_generateHTMLNodes:function(e,t,i,s,a){var n=document.createElement("ul"),o=new Object,r=new Object,l=new Object,d=new Object,h=(new Array,new Array),c=e.join("."),u="",f=!1,p="",m=this.onNodeDraw.constructor==Function;n.className=this._gDef(a,this.branch.className),n.style.margin="0px",n.style.padding="0px",n.style.listStyle="none",s||(n.style.display="none"),n.unselectable="on";for(var _=0;_<i.length;_++){u=$if(""!=c,this.contId+"."+c+"."+_,this.contId+"."+_),o=document.createElement("li"),o.style.margin="0px",o.style.padding="0px",o.id=u,o.setAttribute("A5TreeNodeLocation",$if(""!=c,c+"."+_,_)),o.unselectable="on",r=document.createElement("div"),r.className=this._gDef(i[_].className,this.node.className),r.style.whiteSpace="nowrap",r.unselectable="on",_==i.length-1&&(f=!0);for(var g=0;g<t.length;g++)d=A5.u.icon.element(t[g]),d.style.verticalAlign="middle",d.align="absmiddle",r.appendChild(d);l=document.createElement("a"),l.id=u+".LABEL",l.tabIndex=-1,l.href="#",$e.add(l,A5.d.evnts.up,this._clickNode,this,!1,this.contId+".EVENTS"),$e.add(l,"click",function(e){return $e.preventDefault(e),!1},null,!1,this.contId+".EVENTS"),A5.flags.isMobile||($e.add(l,"mouseover",this._mOverNode,this,!1,this.contId+".EVENTS"),$e.add(l,"mouseout",this._mOutNode,this,!1,this.contId+".EVENTS"),$sa(l,"A5TreeNodeHoverClassName",this._gDef(i[_].hoverClassName,this.node.hoverClassName))),l.className=this._gDef(i[_].labelClassName,this.node.labelClassName),l.unselectable="on","object"==typeof i[_].children||"string"==typeof i[_].children?(i[_].children.constructor!=Array&&(i[_].expanded=!1),d=A5.u.icon.element(this._gDef(i[_].expandedImage,this.node.branch.firstExpandedImage)),i[_].expanded?(p=this._gDef(i[_].expandedIcon,this.node.expandedIcon),0==_&&0==e.length?A5.u.icon.update(d,this._gDef(i[_].expandedImage,this.node.branch.firstExpandedImage)):f?A5.u.icon.update(d,this._gDef(i[_].expandedImage,this.node.branch.lastExpandedImage)):A5.u.icon.update(d,this._gDef(i[_].expandedImage,this.node.branch.expandedImage))):(p=this._gDef(i[_].collapsedIcon,this.node.collapsedIcon),0==_&&0==e.length?A5.u.icon.update(d,this._gDef(i[_].collapsedImage,this.node.branch.firstCollapsedImage)):f?A5.u.icon.update(d,this._gDef(i[_].collapsedImage,this.node.branch.lastCollapsedImage)):A5.u.icon.update(d,this._gDef(i[_].collapsedImage,this.node.branch.collapsedImage))),A5.flags.isMobile||""==this.node.branch.collapsedHoverImage&&""==i[_].collapsedHoverImage||($e.add(d,"mouseover",this._nodeImageMouseOver,this,!1,this.contId+".EVENTS"),$e.add(d,"mouseout",this._nodeImageMouseOut,this,!1,this.contId+".EVENTS")),d.style.verticalAlign="middle",d.align="absmiddle",$e.add(d,A5.d.evnts.up,this._clickToggleBranch,this,!1,this.contId+".EVENTS"),r.appendChild(d),""!=p?l.innerHTML=A5.u.icon.html(p,'id="'+u+'.LABELICON" style="border: none" align="absmiddle"')+" "+i[_].html:l.innerHTML=i[_].html,r.appendChild(l),i[_].children.constructor==Array?(0==e.length?(tempNodeLocs=new Array,h=new Array):(tempNodeLocs=e.concat([]),h=t.concat([])),tempNodeLocs[tempNodeLocs.length]=_,h[h.length]=$if(f,this.branch.nullImage,this.branch.lineImage),o.appendChild(r),o.appendChild(this._generateHTMLNodes(tempNodeLocs,h,i[_].children,i[_].expanded,i[_].branchClassName))):o.appendChild(r)):(d=A5.u.icon.element(this._gDef(i[_].image,this.node.leaf.firstImage)),0==_&&0==e.length?A5.u.icon.update(d,this._gDef(i[_].image,this.node.leaf.firstImage)):f?A5.u.icon.update(d,this._gDef(i[_].image,this.node.leaf.lastImage)):A5.u.icon.update(d,this._gDef(i[_].image,this.node.leaf.image)),d.style.verticalAlign="middle",d.align="absmiddle",r.appendChild(d),p=this._gDef(i[_].icon,this.node.icon),""!=p?l.innerHTML=A5.u.icon.html(p,'id="'+u+'.LABELICON" style="border: none" align="absmiddle"')+" "+i[_].html:l.innerHTML=i[_].html,r.appendChild(l),o.appendChild(r)),n.appendChild(o),m&&this.onNodeDraw.call(this,l,i[_],_)}return n},_clickToggleBranch:function(e,t){if(this.disabled)return!1;for(var i=this.parentNode.parentNode,s=String(i.getAttribute("A5TreeNodeLocation")).split("."),a=0;a<s.length;a++)s[a]=Number(s[a]);var n=t.getDataNode(s,!1);t._toggleBranch(n,!0)},_toggleBranch:function(e){if(this.disabled)return!1;if(e.onBeforeExpand.constructor==Function?e.onBeforeExpand(e):this.onBeforeNodeExpand.constructor==Function&&this.onBeforeNodeExpand(e),e.children.constructor!=Array){if(e.dynamicDataHandle.constructor==Function||this.dynamicDataHandle.constructor==Function){if(e.dynamicDataHandle.constructor==Function)var t=e.dynamicDataHandle(e);else var t=this.dynamicDataHandle(e);t.constructor==Array&&(this.populateNode(e.location,t),e.onExpand.constructor==Function?e.onExpand(e):this.onNodeExpand.constructor==Function&&this.onNodeExpand(e))}else{var i=urlencode(this._getDataNodeValue(e)),s="",a="";this.dynamicDataURLParams.constructor==Function?a="&"+this.dynamicDataURLParams(e):""!=this.dynamicDataURLParams&&(a="&"+this.dynamicDataURLParams),"object"==typeof e.children?(e.children.url&&(s=e.children.url),""==s&&(s=this.dynamicDataURL),""!=s&&new $a.simple(s,{data:$if(e.children.data,e.children.data+"&","")+"A5AJAXTreeNodeLocation=["+e.location.join(",")+"]&A5AJAXTreeNodeValue="+i+"&__Ajax=true"+a,handle:this._responseHandle,handleContext:this})):(s=""+e.children,"?"==s.substr(0,1)&&(s=this.dynamicDataURL),""!=s&&new $a.simple(s,{data:"A5AJAXTreeNodeLocation=["+e.location.join(",")+"]&A5AJAXTreeNodeValue="+i+"&__Ajax=true"+a,handle:this._responseHandle,handleContext:this})),$(this.contId+"."+e.location.join(".")+".LABEL").innerHTML=this.loadingMessage}var n=$(this.contId+"."+e.location.join(".")+".LABEL").previousSibling;arguments[1]?0==e.location[e.location.length-1]&&1==e.location.length?A5.u.icon.update(n,this._gDef(e.expandedHoverImage,this.node.branch.firstExpandedHoverImage,e.expandedImage,this.node.branch.firstExpandedImage)):e.isLast?A5.u.icon.update(n,this._gDef(e.expandedHoverImage,this.node.branch.lastExpandedHoverImage,e.expandedImage,this.node.branch.lastExpandedImage)):A5.u.icon.update(n,this._gDef(e.expandedHoverImage,this.node.branch.expandedHoverImage,e.expandedImage,this.node.branch.expandedImage)):0==e.location[e.location.length-1]&&1==e.location.length?A5.u.icon.update(n,this._gDef(e.expandedImage,this.node.branch.firstExpandedImage)):e.isLast?A5.u.icon.update(n,this._gDef(e.expandedImage,this.node.branch.lastExpandedImage)):A5.u.icon.update(n,this._gDef(e.expandedImage,this.node.branch.expandedImage)),e.expanded=!0}else{for(var n=$(this.contId+"."+e.location.join(".")+".LABEL").previousSibling,o=$(this.contId+"."+e.location.join(".")).lastChild;!o.tagName;)o=o.previousSibling;if("none"==o.style.display){arguments[1]?0==e.location[e.location.length-1]&&1==e.location.length?A5.u.icon.update(n,this._gDef(e.expandedHoverImage,this.node.branch.firstExpandedHoverImage,e.expandedImage,this.node.branch.firstExpandedImage)):e.isLast?A5.u.icon.update(n,this._gDef(e.expandedHoverImage,this.node.branch.lastExpandedHoverImage,e.expandedImage,this.node.branch.lastExpandedImage)):A5.u.icon.update(n,this._gDef(e.expandedHoverImage,this.node.branch.expandedHoverImage,e.expandedImage,this.node.branch.expandedImage)):0==e.location[e.location.length-1]&&1==e.location.length?A5.u.icon.update(n,this._gDef(e.expandedImage,this.node.branch.firstExpandedImage)):e.isLast?A5.u.icon.update(n,this._gDef(e.expandedImage,this.node.branch.lastExpandedImage)):A5.u.icon.update(n,this._gDef(e.expandedImage,this.node.branch.expandedImage));var r=this._gDef(e.expandedIcon,this.node.expandedIcon);""!=r&&$(this.contId+"."+e.location.join(".")+".LABELICON")&&A5.u.icon.update($(this.contId+"."+e.location.join(".")+".LABELICON"),r),o.style.display="block",e.expanded=!0,e.onExpand.constructor==Function?e.onExpand(e):this.onNodeExpand.constructor==Function&&this.onNodeExpand(e)}else{arguments[1]?0==e.location[e.location.length-1]&&1==e.location.length?A5.u.icon.update(n,this._gDef(e.collapsedHoverImage,this.node.branch.firstCollapsedHoverImage,e.collapsedImage,this.node.branch.firstCollapsedImage)):e.isLast?A5.u.icon.update(n,this._gDef(e.collapsedHoverImage,this.node.branch.lastCollapsedHoverImage,e.collapsedImage,this.node.branch.lastCollapsedImage)):A5.u.icon.update(n,this._gDef(e.collapsedHoverImage,this.node.branch.collapsedHoverImage,e.collapsedImage,this.node.branch.collapsedImage)):0==e.location[e.location.length-1]&&1==e.location.length?A5.u.icon.update(n,this._gDef(e.collapsedImage,this.node.branch.firstCollapsedImage)):e.isLast?A5.u.icon.update(n,this._gDef(e.collapsedImage,this.node.branch.lastCollapsedImage)):A5.u.icon.update(n,this._gDef(e.collapsedImage,this.node.branch.collapsedImage));var r=this._gDef(e.collapsedIcon,this.node.collapsedIcon);""!=r&&$(this.contId+"."+e.location.join(".")+".LABELICON")&&A5.u.icon.update($(this.contId+"."+e.location.join(".")+".LABELICON"),r),o.style.display="none",e.expanded=!1,e.onCollapse.constructor==Function?e.onCollapse(e):this.onNodeCollapse.constructor==Function&&this.onNodeCollapse(e)}}},_selectNode:function(e){if(this.disabled)return!1;var t=[],i=this.value,s="",a=0;if(this.multiple&&(this._keyWatch.ctrl||this._keyWatch.shift)){for(var n=!0,o=0;o<this.selection.length;o++)if(this.selection[o].location.join(".")==e.location.join(".")){s=this._gDef(this.selection[o].selectedClassName,this.node.selectedClassName),a=$(this.contId+"."+this.selection[o].location.join(".")),""!=s&&a&&$rcn(a.firstChild,s),this.selection.splice(o,1),n=!1;break}n&&(s=this._gDef(e.selectedClassName,this.node.selectedClassName),""!=s&&$acn($(this.contId+"."+e.location.join(".")).firstChild,s),this.selection[this.selection.length]=e)}else this._deselectAll(),s=this._gDef(e.selectedClassName,this.node.selectedClassName),""!=s&&$acn($(this.contId+"."+e.location.join(".")).firstChild,s),this.selection[0]=e;for(var o=0;o<this.selection.length;o++)t[o]=this._getDataNodeValue(this.selection[o]);this.value=t,""!=this.inputId&&($(this.inputId).value=t.join("\n"),$e.execute(this.inputId,"change")),i.join("\n")!=t.join("\n")&&(e.onSelect.constructor==Function?e.onSelect(e):this.onNodeSelect.constructor==Function&&this.onNodeSelect(e))},_deselectAll:function(){if(this.disabled)return!1;for(var e=new Object,t=0,i=0;i<this.selection.length;i++)e=this.selection[i],"object"==typeof e&&(selClassName=this._gDef(e.selectedClassName,this.node.selectedClassName),t=$(this.contId+"."+e.location.join(".")),""!=selClassName&&t&&$rcn(t.firstChild,selClassName));this.selection=new Array,this.value=new Array},_nodeImageMouseOver:function(e,t){if(t.disabled)return!1;for(var i=this.parentNode.parentNode,s=String(i.getAttribute("A5TreeNodeLocation")).split("."),a=0;a<s.length;a++)s[a]=Number(s[a]);var n=t.getDataNode(s,!1);n.expanded?0==n.location[n.location.length-1]&&1==n.location.length?A5.u.icon.update(this,t._gDef(n.expandedHoverImage,t.node.branch.firstExpandedHoverImage)):n.isLast?A5.u.icon.update(this,t._gDef(n.expandedHoverImage,t.node.branch.lastExpandedHoverImage)):A5.u.icon.update(this,t._gDef(n.expandedHoverImage,t.node.branch.expandedHoverImage)):0==n.location[n.location.length-1]&&1==n.location.length?A5.u.icon.update(this,t._gDef(n.collapsedHoverImage,t.node.branch.firstCollapsedHoverImage)):n.isLast?A5.u.icon.update(this,t._gDef(n.collapsedHoverImage,t.node.branch.lastCollapsedHoverImage)):A5.u.icon.update(this,t._gDef(n.collapsedHoverImage,t.node.branch.collapsedHoverImage))},_nodeImageMouseOut:function(e,t){if(t.disabled)return!1;for(var i=this.parentNode.parentNode,s=String(i.getAttribute("A5TreeNodeLocation")).split("."),a=0;a<s.length;a++)s[a]=Number(s[a]);var n=t.getDataNode(s,!1);n.expanded?0==n.location[n.location.length-1]&&1==n.location.length?A5.u.icon.update(this,t._gDef(n.expandedImage,t.node.branch.firstExpandedImage)):n.isLast?A5.u.icon.update(this,t._gDef(n.expandedImage,t.node.branch.lastExpandedImage)):A5.u.icon.update(this,t._gDef(n.expandedImage,t.node.branch.expandedImage)):0==n.location[n.location.length-1]&&1==n.location.length?A5.u.icon.update(this,t._gDef(n.collapsedImage,t.node.branch.firstCollapsedImage)):n.isLast?A5.u.icon.update(this,t._gDef(n.collapsedImage,t.node.branch.lastCollapsedImage)):A5.u.icon.update(this,t._gDef(n.collapsedImage,t.node.branch.collapsedImage))},_clickNode:function(e,t){if(t.disabled)return!1;$(t.contId+".FOCUSCATCHER").focus(),t._keyWatch.shift=!1,t._keyWatch.ctrl=!1,"undefined"!=typeof e.shiftKey&&(t._keyWatch.shift=e.shiftKey,t._keyWatch.ctrl=e.ctrlKey);for(var i=this.parentNode.parentNode,s=String(i.getAttribute("A5TreeNodeLocation")).split("."),a=0;a<s.length;a++)s[a]=Number(s[a]);var n=t.getDataNode(s,!1);t._selectNode(n),n.onClick.constructor==Function?n.onClick(n):t.onNodeClick.constructor==Function&&t.onNodeClick(n)},_mOverNode:function(e,t){var i=$ga(this,"A5TreeNodeHoverClassName");""!=i&&$acn(this.parentNode,i)},_mOutNode:function(e,t){var i=$ga(this,"A5TreeNodeHoverClassName");""!=i&&$rcn(this.parentNode,i)},_keyPrevNode:function(){if(this.disabled)return!1;var e=this.selection[this.selection.length-1];if("object"==typeof e){var t=this._getPrevVisDataNode(e);"undefined"!=typeof t.location?(this._selectNode(t),this.scrollToNode(t)):this._deselectAll()}else this._selectNode(this._getLastVisDataNode())},_keyNextNode:function(){if(this.disabled)return!1;var e=this.selection[this.selection.length-1];if("object"==typeof e){var t=this._getNextVisDataNode(e);"undefined"!=typeof t.location?(this._selectNode(t),this.scrollToNode(t)):this._deselectAll()}else this._selectNode(this._getFirstVisDataNode())},_keyFirstNode:function(){return!this.disabled&&void this._selectNode(this._getFirstVisDataNode())},_keyLastNode:function(){return!this.disabled&&void this._selectNode(this._getLastVisDataNode())},_keyBranchNode:function(){if(this.disabled)return!1;var e=this.selection[this.selection.length-1];if("object"==typeof e)if(1==e.expanded)this._toggleBranch(e);else{for(var t=new Array,i=0;i<e.location.length-1;i++)t[i]=e.location[i];t.length>0&&this._selectNode(this.getDataNode(t))}else this._selectNode(this.getDataNode([0]))},_keyChildNode:function(){if(this.disabled)return!1;var e=this.selection[this.selection.length-1];if("object"==typeof e)if(0!=e.expanded||"object"!=typeof e.children&&"string"!=typeof e.children){if("object"==typeof e.children||"string"==typeof e.children){var t=this._getNextVisDataNode(e);"undefined"!=typeof t.location&&(this._selectNode(t),this.scrollToNode(t))}}else this._toggleBranch(e);else this._selectNode(this.getDataNode([0]))},_keyEnter:function(){if(this.disabled)return!1;var e=this.selection[this.selection.length-1];"object"==typeof e&&("object"==typeof e.children||"string"==typeof e.children?this._toggleBranch(e):e.onClick.constructor==Function?e.onClick(e):this.onNodeClick.constructor==Function&&this.onNodeClick(e))},_rClick:function(e,t){return!t.disabled&&(t.onRightClick.constructor==Function?(t.onRightClick(),e=$e.getEvent(e),$e.stopEvent(e),!1):void 0)},_focus:function(e){return 0==this._hasFocus&&(this._keyWatch.on(),this._hasFocus=!0,$e.executeGroup("A5ControlsFocusCatcher"),$e.removeGroup("A5ControlsFocusCatcher"),$e.add(document.documentElement,A5.d.evnts.up,this._blur,this,!0,"A5ControlsFocusCatcher"),""!=this.focusClassName&&$acn($(this.contId),this.focusClassName),this.onFocus.constructor==Function&&this.onFocus()),e=$e.getEvent(e),$e.stopEvent(e),!1},_blur:function(){this._hasFocus=!1,this._keyWatch.off(),""!=this.focusClassName&&$rcn($(this.contId),this.focusClassName),$e.remove(document.documentElement,A5.d.evnts.up,this._blur),this.onBlur.constructor==Function&&this.onBlur()},_responseHandle:function(obj){var resJSON=eval("("+obj.responseText+")");this.populateNode(resJSON.location,resJSON.data);var dataNode=this.getDataNode(resJSON.location),baseId=this.contId+"."+resJSON.location.join("."),buttonNode=$(baseId+".LABEL"),curIcon=this._gDef(dataNode.expandedIcon,this.node.expandedIcon);""!=curIcon?buttonNode.innerHTML=A5.u.icon.html(curIcon,'id="'+baseId+'.LABELICON" style="border: none" align="absmiddle"')+" "+dataNode.html:buttonNode.innerHTML=dataNode.html,dataNode.onExpand.constructor==Function?dataNode.onExpand(dataNode):this.onNodeExpand.constructor==Function&&this.onNodeExpand(dataNode)},_gDef:function(e,t){for(var i=0;i<arguments.length;i++)if(""!=arguments[i])return arguments[i];return""},_defaultNode:{html:"",value:"",children:0,className:"",selectedClassName:"",hoverClassName:"",labelClassName:"",branchClassName:"",icon:"",expandedIcon:"",collapsedIcon:"",image:"",expandedImage:"",collapsedImage:"",expandedHoverImage:"",collapsedHoverImage:"",onSelect:0,onClick:0,onExpand:0,onBeforeExpand:0,onCollapse:0,dynamicDataHandle:0,expanded:!1,defaultValue:!0}}),A5.scrollers={_i:{}},A5.Scroller=Class.create({initialize:function(e,t){this.contId=e,$u.o.assign(this,{theme:"",override:"base",name:"SCROLLER",flow:"ttb",location:"after",className:"",focusClassName:"",dialClassName:"",leftClassName:"",rightClassName:"",topClassName:"",bottomClassName:"",style:"",min:0,max:100,step:1,offset:{top:"0px",bottom:"0px",left:"0px",right:"0px"},message:function(e){return e},slider:{className:"",innerClassName:"",handle:{className:"",style:""},shadow:{show:!0,className:"",style:""},message:{show:"auto",className:"",topClassName:"",bottomClassName:"",leftClassName:"",rightClassName:"",style:"",lowSwitch:75,highSwitch:75}},dial:{show:"downhold",invertDrag:!1,className:"",message:{location:"center",className:"",mainClassName:"",size:""},style:"",pixelStep:4,size:2},onScroll:0,onBeforeScroll:0,onSelect:0,onBeforeSelect:0}),"undefined"!=typeof t.theme&&A5.themes.assign(this,t.theme,"scroller"),$u.o.assign(this,t),A5.overrides.assign(this,"panelCard",this.override),this._initRender(),this.setValue(this.min,!1),A5.scrollers._i[e]=this},refresh:function(){var e=A5.u.drag._w[this.contId+"."+this.name].c;e.pps=this.dial.pixelStep,e.rng=Math.abs(this.max-this.min),e.step=this.step,0==e.rng?this._sEle.style.display="none":this._sEle.style.display="";var t=$(this.contId+"."+this.name+".SLIDER").firstChild.firstChild;if("ttb"==this.flow||"btt"==this.flow){this._sEle.style.top=this.offset.top,this._sEle.style[this._sLoc]=this.offset[this._sLoc],this._sEle.style.bottom=this.offset.bottom;var i=Math.round(t.lastChild.offsetHeight/2)+"px";t.style.top=i,t.style.bottom=i,"ttb"==this.flow?(t.firstChild.style.marginTop="-"+i,t.lastChild.style.marginTop="-"+i):(t.firstChild.style.marginBottom="-"+i,t.lastChild.style.marginBottom="-"+i)}else{this._sEle.style.left=this.offset.left,this._sEle.style[this._sLoc]=this.offset[this._sLoc],this._sEle.style.right=this.offset.right;var i=Math.round(t.lastChild.offsetWidth/2)+"px";t.style.left=i,t.style.right=i,"ltr"==this.flow?(t.firstChild.style.marginLeft="-"+i,t.lastChild.style.marginLeft="-"+i):(t.firstChild.style.marginRight="-"+i,t.lastChild.style.marginRight="-"+i)}"left"==this._sLoc?this._sEle.className=this.className+" "+this.leftClassName:"right"==this._sLoc?this._sEle.className=this.className+" "+this.rightClassName:"top"==this._sLoc?this._sEle.className=this.className+" "+this.topClassName:"bottom"==this._sLoc&&(this._sEle.className=this.className+" "+this.bottomClassName),this.setValue(this.value,!1)},setValue:function(e){return!this._da&&(this._val=Math.min(this.max,Math.max(e,this.min)),this._r(this.value),0!=arguments[1]?this._sel(""):this.value=this._val,void this._sShd())},setDisplay:function(e,t){if("string"!=typeof e)return ele=$(this.contId+"."+this.name),e?ele.style.display="":ele.style.display="none",!0;if("dial"==e){if(t&&"none"==this._dEle.style.display)return $acn(this._sEle,this.dialClassName),"ttb"==this.flow||"btt"==this.flow?this._dEle.style.display="table-cell":this._dEle.style.display="block",this._dLock.style.display="block","none"!=this.dial.message.location&&"auto"==this.slider.message.show&&(this._sbEle.lastChild.firstChild.style.display="none"),this._rMsg(),!0;if(!t&&"none"!=this._dEle.style.display)return $rcn(this._sEle,this.dialClassName),this._dEle.style.display="none",this._sbEle.lastChild.style.top=this._sbEle.firstChild.style.top,this._da||(this._sbEle.firstChild.style.display="none",$rcn(this._sEle,this.focusClassName)),this._dLock.style.display="none","always"==this.slider.message.show||this._da&&"auto"==this.slider.message.show?this._sbEle.lastChild.firstChild.style.display="":this._sbEle.lastChild.firstChild.style.display="none",!0}return!1},_r:function(){this._rMsg();var e=100*Math.abs((this._val-this.min)/(this.max-this.min)),t="";this._vp=e,"ttb"==this.flow?(this._sbEle.lastChild.style.top=e+"%",t=e>=this.slider.message.highSwitch?this.slider.message.className+" "+this.slider.message.bottomClassName:e<this.slider.message.lowSwitch?this.slider.message.className+" "+this.slider.message.topClassName:this.slider.message.className):"btt"==this.flow?(this._sbEle.lastChild.style.bottom=e+"%",t=e>=this.slider.message.highSwitch?this.slider.message.className+" "+this.slider.message.topClassName:e<this.slider.message.lowSwitch?this.slider.message.className+" "+this.slider.message.bottomClassName:this.slider.message.className):"rtl"==this.flow?(this._sbEle.lastChild.style.right=e+"%",t=e>=this.slider.message.highSwitch?this.slider.message.className+" "+this.slider.message.leftClassName:e<this.slider.message.lowSwitch?this.slider.message.className+" "+this.slider.message.rightClassName:this.slider.message.className):"ltr"==this.flow&&(this._sbEle.lastChild.style.left=e+"%",t=e>=this.slider.message.highSwitch?this.slider.message.className+" "+this.slider.message.rightClassName:e<this.slider.message.lowSwitch?this.slider.message.className+" "+this.slider.message.leftClassName:this.slider.message.className),this._oldMCN!=t&&(this._sbEle.lastChild.firstChild.className=t,this._oldMCN=t)},_rMsg:function(e){if("none"!=this._dEle.style.display&&"none"!=this.dial.message.location){var t=[],i=[],s="";if(s="ltr"==this.flow||"rtl"==this.flow?"display: inline-block; height: "+this.dial.message.size+";":"display: inline-block; width: "+this.dial.message.size+";",this.dial.size>0){if("ltr"==this.flow||"ttb"==this.flow)for(var a=1;a<this.dial.size+1;a++)this._val-this.step*a>=this.min&&t.unshift('<div id="'+this.contId+"."+this.name+".DIAL."+a*-1+'" style="'+s+'" class="'+this.dial.message.className+'">'+this.message.call(this,this._val-this.step*a,"dial",a*-1)+"</div>"),this._val+this.step*a<=this.max&&i.push('<div id="'+this.contId+"."+this.name+".DIAL."+a+'" style="'+s+'" class="'+this.dial.message.className+'">'+this.message.call(this,this._val+this.step*a,"dial",a)+"</div>");else for(var a=1;a<this.dial.size+1;a++)this._val-this.step*a>=this.min&&t.push('<div id="'+this.contId+"."+this.name+".DIAL."+a*-1+'" style="'+s+'" class="'+this.dial.message.className+'">'+this.message.call(this,this._val-this.step*a,"dial",a*-1)+"</div>"),this._val+this.step*a<=this.max&&i.unshift('<div id="'+this.contId+"."+this.name+".DIAL."+a+'" style="'+s+'" class="'+this.dial.message.className+'">'+this.message.call(this,this._val+this.step*a,"dial",a)+"</div>");"ttb"==this.flow?this._dEle.innerHTML='<div style="position: relative; display: inline-block;"><div style="position: absolute; bottom: 100%;">'+t.join("")+'</div><div id="'+this.contId+"."+this.name+'.DIAL.0" style="'+s+'" class="'+this.dial.message.className+" "+this.dial.message.mainClassName+'">'+this.message.call(this,this._val,"dial",0)+'</div><div style="position: absolute; top: 100%;">'+i.join("")+"</div></div>":"btt"==this.flow?this._dEle.innerHTML='<div style="position: relative; display: inline-block;"><div style="position: absolute; top: 100%;">'+t.join("")+'</div><div id="'+this.contId+"."+this.name+'.DIAL.0" style="'+s+'" class="'+this.dial.message.className+" "+this.dial.message.mainClassName+'">'+this.message.call(this,this._val,"dial",0)+'</div><div style="position: absolute; bottom: 100%;">'+i.join("")+"</div></div>":"ltr"==this.flow?this._dEle.innerHTML='<div style="position: relative; display: inline-block;"><div style="position: absolute; top: 0px; right: 100%; white-space: nowrap;">'+t.join("")+'</div><div id="'+this.contId+"."+this.name+'.DIAL.0" style="'+s+'" class="'+this.dial.message.className+" "+this.dial.message.mainClassName+'">'+this.message.call(this,this._val,"dial",0)+'</div><div style="position: absolute; top: 0px; left: 100%; white-space: nowrap;">'+i.join("")+"</div></div>":"rtl"==this.flow&&(this._dEle.innerHTML='<div style="position: relative; display: inline-block;"><div style="position: absolute; top: 0px; left: 100%; white-space: nowrap;">'+t.join("")+'</div><div id="'+this.contId+"."+this.name+'.DIAL.0" style="'+s+'" class="'+this.dial.message.className+" "+this.dial.message.mainClassName+'">'+this.message.call(this,this._val,"dial",0)+'</div><div style="position: absolute; top: 0px; right: 100%; white-space: nowrap;">'+i.join("")+"</div></div>")}else this._dEle.innerHTML='<div style="position: relative; display: inline-block;"><div id="'+this.contId+"."+this.name+'.DIAL.0" style="'+s+'" class="'+this.dial.message.className+" "+this.dial.message.mainClassName+'">'+this.message.call(this,this._val,"dial",0)+"</div></div>";if("track"==this.dial.location){var n=this._dEle.firstChild;n.style.position="absolute","ttb"==this.flow?this._vp<=50?n.style.top=this._vp+"%":n.style.bottom=100-this._vp+"%":"btt"==this.flow?this._vp<=50?n.style.bottom=this._vp+"%":n.style.top=100-this._vp+"%":"ltr"==this.flow?this._vp<=50?n.style.left=this._vp+"%":n.style.right=100-this._vp+"%":"rtl"==this.flow&&(this._vp<=50?n.style.right=this._vp+"%":n.style.left=100-this._vp+"%")}}"none"!=this._sbEle.lastChild.firstChild.style.display&&(this._sbEle.lastChild.firstChild.innerHTML=this.message.call(this,this._val,"slider"))},_sel:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:null;if(this.onBeforeSelect.constructor==Function){var i=this.onBeforeSelect.call(this,this._val,e,t);if("boolean"==typeof i&&!i)return this._val=this.value,this._r(),!1}this.value=this._val,this.onSelect.constructor==Function&&this.onSelect.call(this,this.value,e,t),this._sShd()},_sShd:function(){"ttb"==this.flow?this._sbEle.firstChild.style.top=this._sbEle.lastChild.style.top:"btt"==this.flow?this._sbEle.firstChild.style.bottom=this._sbEle.lastChild.style.bottom:"rtl"==this.flow?this._sbEle.firstChild.style.right=this._sbEle.lastChild.style.right:"ltr"==this.flow&&(this._sbEle.firstChild.style.left=this._sbEle.lastChild.style.left)},_svp:function(e,t){if(e=Math.round(e/100*Math.abs(this.max-this.min)/this.step)*this.step+this.min,e=Math.round(e*this.step)/this.step,e!=this._val){if(this._val=e,this.onBeforeScroll.constructor==Function){var i=this.onBeforeScroll.call(this,e,t);"number"==typeof i&&(e=i)}this._r(),this.onScroll.constructor==Function&&this.onScroll.call(this,e,t),this._sMove=!0}},_tap:function(e){var t="slider",i=$e.getCoors(e);this._da||(this._cvEle.style.display="none");var s=document.elementFromPoint(i.clientX,i.clientY);this._da||(this._cvEle.style.display="");var a="";if("none"!=this._dEle.style.display)for(;s!=document.body&&s!=this._sEle;){if(s==this._dEle){t="dial";break}if(s==this._sbEle.lastChild.firstChild){t="dial",a=s.id;break}""!=s.id&&(a=s.id),s=s.parentNode}if("dial"==t){a=a.split(".");var n=a.pop();a=a.join("."),n=a==this.contId+"."+this.name+".DIAL"||a==this.contId+"."+this.name+".MESSAGE"?Number(n):null,this._sel("dial",n),this._sbEle.firstChild.style.top=this._sbEle.lastChild.style.top,"always"!=this.dial.show?this.setDisplay("dial",!1):this._sbEle.firstChild.style.display="none"}else this._sMove&&("auto"!=this.slider.message.show||"none"!=this._dEle.style.display&&"none"==this.dial.message.location||(this._sbEle.lastChild.firstChild.style.display="none"),"none"==this._dEle.style.display&&(this._sbEle.firstChild.style.display="none",this._sel("slider")),this._sMove=!1);"none"==this._dEle.style.display&&$rcn(this._sEle,this.focusClassName)},_initRender:function(){var e=$(this.contId),t=document.createElement("div");t.id=this.contId+"."+this.name,""!=this.style&&$ss(t,this.style),$ss(t,$gs(t)+"; position: absolute; -moz-user-select: -moz-none; -khtml-user-select: none; -webkit-user-select: none; -ms-user-select: none; user-select: none;"),t.className=this.className;var i="",s="none",a="table-cell",n="none";if("always"==this.slider.message.show&&"always"!=this.dial.show&&(s=""),"ttb"==this.flow||"btt"==this.flow){var o="top",r="middle",l="right";"btt"==this.flow&&(o="bottom"),"low"==this.dial.location?r="ttb"==this.flow?"top":"bottom":"high"==this.dial.location&&(r="ttb"==this.flow?"bottom":"top"),"after"==this.location?i=['<div style="display: table; height: 100%;">','<div style="display: table-row;">','<div id="'+this.contId+"."+this.name+'.DIAL" class="'+this.dial.className+'" style="'+this.dial.style+"; display: "+n+"; vertical-align: "+r+'; position: relative;"></div>','<div class="'+this.slider.className+'" id="'+this.contId+"."+this.name+'.SLIDER" style="display: table-cell;">','<div class="'+this.slider.innerClassName+'" style="position: absolute; top: 0px; bottom: 0px;">','<div style="position: absolute; width: 100%;">','<div class="'+this.slider.shadow.className+'" style="'+this.slider.shadow.style+"; display: none; position: absolute; "+o+': 0%;"></div>','<div class="'+this.slider.handle.className+'" style="'+this.slider.handle.style+"; position: absolute; "+o+': 0%;">','<div id="'+this.contId+"."+this.name+'.MESSAGE.0" class="'+this.slider.message.className+'" style="display: '+s+';"></div>',"</div>","</div>","</div>","</div>","</div>","</div>",'<div id="'+this.contId+"."+this.name+'.COVER" style="z-index: 1000; position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px; background: transparent;"></div>'].join(""):"before"==this.location&&(i=['<div style="display: table; height: 100%;">','<div style="display: table-row;">','<div class="'+this.slider.className+'" id="'+this.contId+"."+this.name+'.SLIDER" style="display: table-cell;">','<div class="'+this.slider.innerClassName+'" style="position: absolute; top: 0px; bottom: 0px;">','<div style="position: absolute; width: 100%;">','<div class="'+this.slider.shadow.className+'" style="'+this.slider.shadow.style+"; display: none; position: absolute; "+o+': 0%;"></div>','<div class="'+this.slider.handle.className+'" style="'+this.slider.handle.style+"; position: absolute; "+o+': 0%;">','<div id="'+this.contId+"."+this.name+'.MESSAGE.0" class="'+this.slider.message.className+'" style="display: '+s+';"></div>',"</div>","</div>","</div>","</div>",'<div id="'+this.contId+"."+this.name+'.DIAL" class="'+this.dial.className+'" style="'+this.dial.style+"; display: "+n+"; vertical-align: "+r+'; position: relative;"></div>',"</div>","</div>",'<div id="'+this.contId+"."+this.name+'.COVER" style="z-index: 1000; position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px; background: transparent;"></div>'].join(""),l="left"),t.style.top=this.offset.top,t.style[l]=this.offset[l],t.style.bottom=this.offset.bottom}else{var o="left",r="center",l="bottom";"rtl"==this.flow&&(o="right"),"low"==this.dial.location?r="ltr"==this.flow?"left":"right":"high"==this.dial.location&&(r="ltr"==this.flow?"right":"left"),"after"==this.location?i=['<div id="'+this.contId+"."+this.name+'.DIAL" class="'+this.dial.className+'" style="'+this.dial.style+"; display: "+n+"; text-align: "+r+'; position: relative;"></div>','<div class="'+this.slider.className+'" id="'+this.contId+"."+this.name+'.SLIDER">','<div class="'+this.slider.innerClassName+'" style="position: absolute; left: 0px; right: 0px;">','<div style="position: absolute; height: 100%;">','<div class="'+this.slider.shadow.className+'" style="'+this.slider.shadow.style+"; display: none; position: absolute; "+o+': 0%;"></div>','<div class="'+this.slider.handle.className+'" style="'+this.slider.handle.style+"; position: absolute; "+o+': 0%;">','<div id="'+this.contId+"."+this.name+'.MESSAGE.0" class="'+this.slider.message.className+'" style="display: '+s+';"></div>',"</div>","</div>","</div>","</div>",'<div id="'+this.contId+"."+this.name+'.COVER" style="z-index: 1000; position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px; background: transparent;"></div>'].join(""):"before"==this.location&&(i=['<div class="'+this.slider.className+'" id="'+this.contId+"."+this.name+'.SLIDER">','<div class="'+this.slider.innerClassName+'" style="position: absolute; left: 0px; right: 0px;">','<div style="position: absolute; height: 100%;">','<div class="'+this.slider.shadow.className+'" style="'+this.slider.shadow.style+"; display: none; position: absolute; "+o+': 0%;"></div>','<div class="'+this.slider.handle.className+'" style="'+this.slider.handle.style+"; position: absolute; "+o+': 0%;">','<div id="'+this.contId+"."+this.name+'.MESSAGE.0" class="'+this.slider.message.className+'" style="display: '+s+';"></div>',"</div>","</div>","</div>","</div>",'<div id="'+this.contId+"."+this.name+'.DIAL" class="'+this.dial.className+'" style="'+this.dial.style+"; display: "+n+"; text-align: "+r+'; position: relative;"></div>','<div id="'+this.contId+"."+this.name+'.COVER" style="z-index: 1000; position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px; background: transparent;"></div>'].join(""),
l="top"),t.style.left=this.offset.left,t.style[l]=this.offset[l],t.style.right=this.offset.right,a="block"}if(t.innerHTML=i,"absolute"!=e.style.position&&(e.style.position="relative"),this._dLock=document.createElement("div"),this._dLock.id=this.contId+"."+this.name+".DLOCK",$ss(this._dLock,"display: none; position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px;"),$e.add(this._dLock,"abstracttap",function(){this.setDisplay("dial",!1)},this,!0),e.appendChild(this._dLock),e.appendChild(t),!$ga(e,"A5CustomScroll")&&"hidden"!=e.style.overflow){var d=A5.u.convertUnits(this.offset[l],"px");if("ttb"==this.flow||"btt"==this.flow){var h=A5.u.convertUnits(this.offset.top,"px"),c=A5.u.convertUnits(this.offset.bottom,"px");"left"==l?$e.add(e,"scroll",Function("var ele = $('"+this.contId+"."+this.name+"'); ele.style.top = (this.scrollTop+"+h+")+'px'; ele.style.bottom = ("+c+"-this.scrollTop)+'px'; ele.style."+l+" = (this.scrollLeft-"+d+")+'px';")):$e.add(e,"scroll",Function("var ele = $('"+this.contId+"."+this.name+"'); ele.style.top = (this.scrollTop+"+h+")+'px'; ele.style.bottom = ("+c+"-this.scrollTop)+'px'; ele.style."+l+" = ("+d+"-this.scrollLeft)+'px';")),t.style.top=e.scrollTop+h+"px",t.style.bottom=c-e.scrollTop+"px"}else{var u=A5.u.convertUnits(this.offset.left,"px"),f=A5.u.convertUnits(this.offset.right,"px");"top"==l?$e.add(e,"scroll",Function("var ele = $('"+this.contId+"."+this.name+"'); ele.style.left = (this.scrollLeft+"+u+")+'px'; ele.style.right = ("+f+"-this.scrollLeft)+'px'; ele.style."+l+" = (this.scrollTop-"+d+")+'px';")):$e.add(e,"scroll",Function("var ele = $('"+this.contId+"."+this.name+"'); ele.style.left = (this.scrollLeft+"+u+")+'px'; ele.style.right = ("+f+"-this.scrollLeft)+'px'; ele.style."+l+" = ("+d+"-this.scrollTop)+'px';")),t.style.left=e.scrollTop+u+"px",t.style.right=f-e.scrollTop+"px"}}var p=$(this.contId+"."+this.name+".DIAL"),m=$(this.contId+"."+this.name+".SLIDER").firstChild.firstChild;if("ttb"==this.flow||"btt"==this.flow){var d=Math.round(m.lastChild.offsetHeight/2)+"px";m.style.top=d,m.style.bottom=d,"ttb"==this.flow?(m.firstChild.style.marginTop="-"+d,m.lastChild.style.marginTop="-"+d):(m.firstChild.style.marginBottom="-"+d,m.lastChild.style.marginBottom="-"+d)}else{var d=Math.round(m.lastChild.offsetWidth/2)+"px";m.style.left=d,m.style.right=d,"ltr"==this.flow?(m.firstChild.style.marginLeft="-"+d,m.lastChild.style.marginLeft="-"+d):(m.firstChild.style.marginRight="-"+d,m.lastChild.style.marginRight="-"+d)}this._sLoc=l,this._sEle=t,this._dEle=p,this._sbEle=m,this._cvEle=$(this.contId+"."+this.name+".COVER"),"left"==this._sLoc?this._sEle.className=this.className+" "+this.leftClassName:"right"==this._sLoc?this._sEle.className=this.className+" "+this.rightClassName:"top"==this._sLoc?this._sEle.className=this.className+" "+this.topClassName:"bottom"==this._sLoc&&(this._sEle.className=this.className+" "+this.bottomClassName),$e.add(t,"abstractdown",function(e){$e.stopPropagation(e)}),$e.add(t,"abstractup",Function("if($('"+this.contId+"."+this.name+".DIAL').style.display == 'none') $rcn(this,'"+this.focusClassName+"');")),"downhold"==this.dial.show?$e.add(t,"abstractdownhold",Function("A5.scrollers._i['"+this.contId+"'].setDisplay('dial',true);")):"dblclick"==this.dial.show&&$e.add(t,"abstractdblclick",Function("A5.scrollers._i['"+this.contId+"'].setDisplay('dial',true);")),$e.add(t,"abstracttap",this._tap,this,!0),A5.u.drag.add(t,"custom",{tolerance:-1,contId:this.contId,flow:this.flow,location:this.location,sEle:t,dEle:p,sbEle:m,cvEle:this._cvEle,fcn:this.focusClassName,amnt:-1,sss:this.slider.shadow.show,dsm:this.dial.show,dml:this.dial.message.location,pps:this.dial.pixelStep,rng:Math.abs(this.max-this.min),step:this.step,dIvrtD:this.dial.invertDrag,sMsg:this.slider.message.show,onStart:function(e,i,s){$acn(t,i.fcn),i.cvEle.style.display="none","none"==i.dEle.style.display&&"never"!=i.sMsg&&(i.sbEle.lastChild.firstChild.style.display=""),"ttb"==i.flow||"btt"==i.flow?("ttb"==i.flow?e.so=$u.s.toNum(i.sbEle.lastChild.style.top):"btt"==i.flow&&(e.so=$u.s.toNum(i.sbEle.lastChild.style.bottom)),e.ss=i.sbEle.offsetHeight,e.sas=i.sbEle.parentNode.parentNode.offsetWidth):"rtl"!=i.flow&&"ltr"!=i.flow||("rtl"==i.flow?e.so=$u.s.toNum(i.sbEle.lastChild.style.right):"ltr"==i.flow&&(e.so=$u.s.toNum(i.sbEle.lastChild.style.left)),e.ss=i.sbEle.offsetWidth,e.sas=i.sbEle.parentNode.parentNode.offsetHeight),e.sib=!1,i.sss&&(i.sbEle.firstChild.style.display="");for(var a=document.elementFromPoint(e.x,e.y);a!=document.body&&a!=i.sEle;){if(a==i.sbEle.parentNode.parentNode||a==i.sbEle.lastChild){e.sib=!0;break}if(a==i.sbEle.lastChild.firstChild&&"none"!=i.dEle.style.display)break;a=a.parentNode}if(e.osib=e.sib,e.sib)if(a!=i.sbEle.lastChild){if("rtl"==i.flow||"ltr"==i.flow)var n=e.x-$gpl(i.sbEle)+document.body.scrollLeft;else var n=e.y-$gpt(i.sbEle)+document.body.scrollTop;"rtl"!=i.flow&&"btt"!=i.flow||(n=e.ss-n),A5.scrollers._i[i.contId]._svp(Math.max(0,Math.min(100,100/e.ss*n)),"slider"),"ttb"==i.flow?e.so=$u.s.toNum(i.sbEle.lastChild.style.top):"btt"==i.flow?e.so=$u.s.toNum(i.sbEle.lastChild.style.bottom):"rtl"==i.flow?e.so=$u.s.toNum(i.sbEle.lastChild.style.right):"ltr"==i.flow&&(e.so=$u.s.toNum(i.sbEle.lastChild.style.left))}else A5.scrollers._i[i.contId]._rMsg(A5.scrollers._i[i.contId].value);else A5.scrollers._i[i.contId]._rMsg(A5.scrollers._i[i.contId].value);A5.scrollers._i[i.contId]._da=!0},onMove:function(e,t,i){var s=e.moveY,a=e.moveX,n="slider";if("rtl"!=t.flow&&"ltr"!=t.flow||(a=s,s=e.moveX),"rtl"!=t.flow&&"btt"!=t.flow||(s*=-1),e.osib&&"drag"==t.dsm&&("before"!=t.location&&(a*=-1),a>e.sas&&0!=e.sib?(A5.scrollers._i[t.contId].setDisplay("dial",!0),e.sib=!1,e.sts=Math.max(0,Math.min(100,e.so+100/e.ss*s)),e.stm=s):a<=e.sas&&0==e.sib&&(A5.scrollers._i[t.contId].setDisplay("dial",!1),e.sib=!0)),e.sib)var o=Math.max(0,Math.min(100,e.so+100/e.ss*s));else{if(t.dIvrtD&&(s*=-1),e.osib)var o=e.sts+100/t.pps/t.rng*t.step*(s-e.stm);else var o=e.so+100/t.pps/t.rng*t.step*s;o=Math.max(0,Math.min(100,o));var n="dial"}o!=e.amnt&&(e.amnt=o,A5.scrollers._i[t.contId]._svp(o,n))},onEnd:function(e,t,i){t.cvEle.style.display="",A5.scrollers._i[t.contId]._da=!1,"auto"!=t.sMsg||"none"!=t.dEle.style.display&&"none"==t.dml||(t.sbEle.lastChild.firstChild.style.display="none"),"none"==t.dEle.style.display&&(t.sbEle.firstChild.style.display="none",A5.scrollers._i[t.contId]._sel("slider"),$rcn(t.sEle,t.fcn))}}),"always"==this.dial.show&&this.setDisplay("dial",!0),0==Math.abs(this.max-this.min)?t.style.display="none":t.style.display=""}}),A5.ViewBox=Class.create({initialize:function(e,t,i){"undefined"==typeof i&&(i=t,t=null),this.contId=e,$u.o.assign(this,{theme:"",override:"base",type:"template",inputId:"",focusClassName:"",disabledClassName:"",template:"",multiple:!1,separator:"\n",selectionMode:"default",loopNavigate:!1,loopNavigateNullSelection:!0,allowNullSelection:!0,allowNullDeselection:!1,allowAnyValue:!1,autoRefresh:!1,scroll:{},layout:"",layouts:{},items:{},onDraw:0,onBeforeDraw:0,onPopulate:0,onBeforePopulate:0,onBeforeSelect:0,onSelect:0,onSelectComplete:0,onClick:0,onDblClick:0,onRightClick:0,onDown:0,onUp:0,onSwipe:0,onDownHold:0,onFocus:0,onBlur:0,value:[],state:{}}),"undefined"!=typeof i.theme&&A5.themes.assign(this,i.theme,"viewBox"),$u.o.assign(this,i),A5.overrides.assign(this,"viewBox",this.override);for(var s in this.items)$u.o.assign(this.items[s],this._itemD,!0);for(var a in this.layouts){$u.o.assign(this.layouts[a],this._layoutD,!0);for(var s in this.layouts[a].items)$u.o.assign(this.layouts[a].items[s],this._itemD,!0)}var n="VIEWBOX."+e,o=$(e);if($e.add(o,A5.d.evnts.click,this._click,this,!1,n),$e.add(o,A5.d.evnts.dblClick,this._dblClick,this,!1,n),$e.add(o,"contextmenu",this._rClick,this,!1,n),$e.add(o,A5.d.evnts.down,this._down,this,!1,n),$e.add(o,A5.d.evnts.up,this._up,this,!1,n),$e.add(o,"abstractdownhold",this._downHold,this,!1,n),$e.add(o,"abstractswipe",this._swipe,this,!1,n),this._oid="",this._s={id:[],cn:[]},this._i={ids:[],i:[],ia:[],v:[]},this._cl=this.layouts[this.layout],0!=this.scroll){var r={theme:"",axis:"both"};$u.o.assign(r,this.scroll),$u.o.assign(r,this._cl.scroll),""==r.theme&&(r.theme=this.theme),A5.u.drag.add(o,"scroll",r)}this._keyWatch=new AUI.KeyWatcher([{key:"up",handle:this._keyPrevItem},{key:"down",handle:this._keyNextItem},{key:"left",handle:this._keyPrevItem},{key:"right",handle:this._keyNextItem},{key:"home",handle:this._keyFirstItem},{key:"end",handle:this._keyLastItem},{key:"enter",handle:this._keyEnter}],this),this._hasFocus=!1;var l=document.createElement("button");l.id=e+".FOCUSCATCHER",$ss(l,"position: absolute; display: block; font-size: 0px; outline: none; opacity: 0; filter: alpha(opacity=0); height: 0px; width: "+o.offsetWidth+"px"),$e.add(l,"keydown",function(e){var t=e.charCode||e.keyCode;9!=t&&$e.preventDefault(e)},!1,n),$e.add(l,"keypress",function(e){var t=e.charCode||e.keyCode;9!=t&&$e.preventDefault(e)},!1,n),$e.add(l,"focus",this._focus,this,!0,n),o.parentNode.insertBefore(l,o),null!=t?this.populate(t):"static"==this._cl.type&&this.refresh()},destroy:function(){this._keyWatch.off(),A5.u.drag.remove($(this.contId),"scroll"),$e.removeGroup("VIEWBOX."+this.contId)},populate:function(e){var t="undefined"!=typeof arguments[1]&&arguments[1],i=("undefined"!=typeof arguments[2]&&arguments[2],"undefined"==typeof arguments[3]||arguments[3]);if(this.onBeforePopulate.constructor==Function&&i){var s=this.onBeforePopulate.call(this,e);if("boolean"==typeof s&&!s)return!1}this.data=e,this.refresh(t),this.onPopulate.constructor==Function&&i&&this.onPopulate.call(this,e)},refresh:function(){this._refreshing=!0;var e="undefined"==typeof arguments[0]||arguments[0],t=[].concat(this.value);if(this._cl=this.layouts[this.layout],"static"==this._cl.type)if(this._cl.html.constructor==Function)var i=this._cl.html.call(this);else var i=this._cl.html;else{"undefined"==typeof this._cl._t&&(this._cl._t=A5.u.template.parse(this._cl.template));var i=A5.u.template.expand(this.data,{template:this._cl._t},{value:this.value,state:this.state})}var s=$(this.contId);if($ga(s,"A5CustomScroll")){var a={axis:"both"};$u.o.assign(a,this.scroll),$u.o.assign(a,this._cl.scroll),$u.o.assign(A5.u.drag._w[s.id].s,a),delete A5.u.drag._st[s.id]}this.onBeforeDraw.constructor==Function&&this.onBeforeDraw.call(this,i),A5.u.element.setContent(s,i),e||(this.value=[]),this._s={id:[],cn:[]},this._i={ids:[],i:[],ia:[],v:[]};var n=[];this._getIds(s,n),n.sort(function(e,t){return e.ni>t.ni?1:e.ni<t.ni?-1:0});for(var o=0;o<n.length;o++)this._i.ids.push(n[o].id),this._i.v.push(n[o].v),this._i.i.push(n[o].i),this._i.ia.push(n[o].ia);this.allowNullSelection||0==this._i.ids.length||e&&0!=t.length||this.navigate("first"),e&&this.setValue(this.value,!1),this.onDraw.constructor==Function&&this.onDraw.call(this,s),this._refreshing=!1},setState:function(e){$u.o.assign(this.state,e)},getState:function(e){return this.state},clearState:function(e){this.state={}},setValue:function(e){var t="undefined"==typeof arguments[1]||arguments[1],i=[];e.constructor!=Array&&(e=[e]),this.multiple||(e=[e[0]]);for(var s=0;s<e.length;s++)tIds=this._valueToId(e[s]),tIds&&(i=i.concat(tIds));this._deselAll(),this.allowAnyValue&&(this.value=e),this._sel(i,t),this.allowAnyValue&&(this.value=e)},setLayout:function(e){this.layout=e,this.refresh()},setDisabled:function(e){""!=this.disabledClassName&&(e?$acn(this.contId,this.disabledClassName):$rcn(this.contId,this.disabledClassName)),this.disabled=e},scrollToItem:function(e){var t=this._valueToId(e);if(t){var i=$(t[0]);if(i){var s=$(this.contId),a="undefined"!=typeof arguments[1]?arguments[1]:{};A5.u.element.setScroll(s,i,a)}}},setElementDisabled:function(e,t){var i=this._valueToId(e);if(i){for(var s=!1,e=[].concat(this.value),a=!1,n="",o=0;o<i.length;o++){s=$(i[o]),$sa(s,"a5-disabled",""+t),s.disabled=t,n=$ga(s,"a5-item"),n=n.split(":").shift();var r=this._getItemObj(n).disabledClassName;if(""!=r&&(t?$acn(s,r):$rcn(s,r)),t){var l=$u.a.find(this._s.id,i[o]);l!=-1&&(e.splice(l,1),a=!0)}}a&&this.setValue(e)}},getElement:function(e){var t=this._valueToId(e);if(!t)return!1;for(var i=[],s=0;s<t.length;s++)i.push($(t[s]));return i},setElementClass:function(e,t){var i=this.getElement(e);$scn(i,t)},addElementClass:function(e,t){var i=this.getElement(e);$acn(i,t)},removeElementClass:function(e,t){var i=this.getElement(e);$rcn(i,t)},navigate:function(e){if(0==this._i.ids.length)return!1;if(e=e.toLowerCase(),0==this.value.length&&("n"==e[0]?e="first":"p"==e[0]&&(e="last")),"n"==e[0]){var t=this._getNextId(this._s.id[0]);t&&this.setValue("#"+t)}else if("p"==e[0]){var t=this._getPrevId(this._s.id[0]);t&&this.setValue("#"+t)}else if("f"==e[0]){if(this._idSelectable(this._i.ids[0]))var t=this._i.ids[0];else var t=this._getNextId(this._i.ids[0]);t&&this.setValue("#"+t)}else if("l"==e[0]){if(this._idSelectable(this._i.ids[this._i.ids.length-1]))var t=this._i.ids[this._i.ids.length-1];else var t=this._getPrevId(this._i.ids[this._i.ids.length-1]);t&&this.setValue("#"+t)}},_click:function(e,t){if(A5.u.drag._sDif>=$e.abstractEvents.click.scrollMax)return!1;if(t.disabled)return!1;var i="",s=t._aEle(e);if(0==t._hasFocus&&t._focus(e),$(t.contId+".FOCUSCATCHER").focus(),s&&t._startItem)if(t._startItem.i==s.i){if("true"!=$ga(s.ele,"a5-disabled")&&!s.ele.disabled){i=s.ele.id;var a=t._getItemObj(s.i);a.selectable&&(t.multiple&&"additive"==t.selectionMode||t._deselAll(s.ele.id),t._selLow(s.v,s.ia,a,s.ele,!0),t._selComp(!0)),a.onClick.constructor==Function?a.onClick.call(t,s.v,s.ia,a,s.ele,e):t.onClick.constructor==Function&&t.onClick.call(t,s.v,s.ia,a,s.ele,e)}}else t.onClick.constructor==Function&&t.onClick.call(t,!1,!1,!1,!1,e);else t.onClick.constructor==Function&&t.onClick.call(t,!1,!1,!1,!1,e);this._oid==i?this._isdc=!0:(this._isdc=!1,this._oid=i),delete s},_dblClick:function(e,t){if(t.disabled||!this._isdc)return!1;var i=t._aEle(e);if(i){if("true"!=$ga(i.ele,"a5-disabled")&&!i.ele.disabled){var s=t._getItemObj(i.i);s.onDblClick.constructor==Function?s.onDblClick.call(t,i.v,i.ia,s,i.ele,e):t.onDblClick.constructor==Function&&t.onDblClick.call(t,i.v,i.ia,s,i.ele,e)}}else t.onDblClick.constructor==Function&&t.onDblClick.call(t,!1,!1,!1,!1,e);delete i},_rClick:function(e,t){if(t.disabled)return!1;var i=t._aEle(e);if(i){if("true"!=$ga(i.ele,"a5-disabled")&&!i.ele.disabled){var s=t._getItemObj(i.i);s.onRightClick.constructor==Function?s.onRightClick.call(t,i.v,i.ia,s,i.ele,e):t.onRightClick.constructor==Function&&t.onRightClick.call(t,i.v,i.ia,s,i.ele,e)}}else t.onRightClick.constructor==Function&&t.onRightClick.call(t,!1,!1,!1,!1,e);delete i},_down:function(e,t){if(t.disabled)return!1;var i=t._aEle(e);if(t._startItem=!1,i){var s=t._getItemObj(i.i);t._startItem={i:i.i,ia:i.ia,v:i.v,id:i.ele.id},"true"==$ga(i.ele,"a5-disabled")||i.ele.disabled||(s.onDown.constructor==Function?s.onDown.call(t,i.v,i.ia,s,i.ele,e):t.onDown.constructor==Function&&t.onDown.call(t,i.v,i.ia,s,i.ele,e))}else t.onDown.constructor==Function&&t.onDown.call(t,!1,!1,!1,!1,e);delete i},_up:function(e,t){if(t.disabled)return!1;var i=t._aEle(e);if(i){if("true"!=$ga(i.ele,"a5-disabled")&&!i.ele.disabled){var s=t._getItemObj(i.i);s.onUp.constructor==Function?s.onUp.call(t,i.v,i.ia,s,i.ele,e):t.onUp.constructor==Function&&t.onUp.call(t,i.v,i.ia,s,i.ele,e)}}else t.onUp.constructor==Function&&t.onUp.call(t,!1,!1,!1,!1,e);delete i},_downHold:function(e,t){if(t.disabled)return!1;var i=t._aEle(e);if(i){if("true"!=$ga(i.ele,"a5-disabled")&&!i.ele.disabled){var s=t._getItemObj(i.i);s.onDownHold.constructor==Function?s.onDownHold.call(t,i.v,i.ia,s,i.ele,e):t.onDownHold.constructor==Function&&t.onDownHold.call(t,i.v,i.ia,s,i.ele,e)}}else t.onDownHold.constructor==Function&&t.onDownHold.call(t,!1,!1,!1,!1,e);delete i},_swipe:function(e,t){if(t.disabled)return!1;if(t._startItem){var i=$(t._startItem.id);if("true"!=$ga(i,"a5-disabled")&&!i.disabled){var s=t._getItemObj(t._startItem.i);s.onSwipe.constructor==Function?s.onSwipe.call(t,t._startItem.v,t._startItem.ia,s,$(t._startItem.id),e):t.onSwipe.constructor==Function&&t.onSwipe.call(t,t._startItem.v,t._startItem.ia,s,$(t._startItem.id),e)}}else t.onSwipe.constructor==Function&&t.onSwipe.call(t,!1,!1,!1,!1,e)},_focus:function(e){return 0==this._hasFocus&&(this._keyWatch.on(),this._hasFocus=!0,$e.executeGroup("A5ControlsFocusCatcher"),$e.removeGroup("A5ControlsFocusCatcher"),$e.add(document.documentElement,A5.d.evnts.up,this._blur,this,!0,"A5ControlsFocusCatcher"),""!=this.focusClassName&&$acn($(this.contId),this.focusClassName),this.onFocus.constructor==Function&&this.onFocus()),$e.stopEvent(e),!1},_blur:function(){this._hasFocus=!1,this._keyWatch.off(),""!=this.focusClassName&&$rcn($(this.contId),this.focusClassName),$e.remove(document.documentElement,A5.d.evnts.up,this._blur),this.onBlur.constructor==Function&&this.onBlur()},_keyPrevItem:function(){return!this.disabled&&void this.navigate("prev")},_keyNextItem:function(){return!this.disabled&&void this.navigate("next")},_keyFirstItem:function(){return!this.disabled&&void this.navigate("first")},_keyLastItem:function(){return!this.disabled&&void this.navigate("last")},_keyEnter:function(){if(this.disabled)return!1;if(0!=this._s.id.length){var e=$(this._s.id[0]),t=$ga(e,"a5-item");t=t.split(":");var i=this._getValue(e),s=t.shift();t=t.join(":");var a=this._getItemObj(s);a.onClick.constructor==Function?a.onClick.call(this,i,t,a,e):this.onClick.constructor==Function&&this.onClick.call(this,i,t,a,e)}else this.onClick.constructor==Function&&this.onClick.call(this,!1,!1,!1,!1)},_sel:function(e,t){for(var i="",s="",a="",n=null,o=null,r=!1,l=0;l<e.length;l++)s=e[l],i=$u.a.find(this._i.ids,s),i!=-1&&(a=this._i.v[i],n=this._getItemObj(this._i.i[i]),o=$(s),r||(r=o),this._selLow(a,this._i.ia[i],n,o,t));r&&this.scrollToItem("#"+r.id),this._selComp(t)},_selLow:function(e,t,i,s,a){var n=$u.a.find(this._s.id,s.id);if(n!=-1){if(0==this.allowNullDeselection&&1==this.value.length){if(a){var o=!0;i.onBeforeSelect.constructor==Function?o=i.onBeforeSelect.call(this,e,t,i,s):this.onBeforeSelect.constructor==Function&&(o=this.onBeforeSelect.call(this,e,t,i,s)),("undefined"==typeof o||o)&&(i.onSelect.constructor==Function?i.onSelect.call(this,e,t,i,s):this.onSelect.constructor==Function&&this.onSelect.call(this,e,t,i,s))}return!1}$rcn(this._s.id[n],this._s.cn[n]),this.value.splice(n,1),this._s.id.splice(n,1),this._s.cn.splice(n,1)}else{var o=!0;if(a&&(i.onBeforeSelect.constructor==Function?o=i.onBeforeSelect.call(this,e,t,i,s):this.onBeforeSelect.constructor==Function&&(o=this.onBeforeSelect.call(this,e,t,i,s))),"undefined"==typeof o||o)return this.value.push(e),this._s.id.push(s.id),this._s.cn.push(i.selectedClassName),$acn(s,i.selectedClassName),a&&(i.onSelect.constructor==Function?i.onSelect.call(this,e,t,i,s):this.onSelect.constructor==Function&&this.onSelect.call(this,e,t,i,s)),!0}return!1},_selComp:function(e){""!=this.inputId&&($(this.inputId).value=this.value.join(this.separator),e&&$e.execute(this.inputId,"change")),e&&this.onSelectComplete.constructor==Function&&this.onSelectComplete.call(this,this.value),this.autoRefresh&&!this._refreshing&&this.refresh()},_deselAll:function(e){for(var t={id:[],cn:[]},i=[],s=0;s<this._s.id.length;s++)this._s.id[s]==e?(t.id.push(this._s.id[s]),t.cn.push(this._s.cn[s]),i.push(this._getValue($(e)))):$rcn(this._s.id[s],this._s.cn[s]);this.value=i,this._s=t},_aEle:function(e,t){var t=$(this.contId),i=$e.getCoors(e),s=document.elementFromPoint(i.clientX,i.clientY);if(!s)return!1;for(;s!=t&&s!=document.body;){if(ia=$ga(s,"a5-item"),null!=ia&&""!=ia){ia=ia.split(":");var a=this._getValue(s),n=ia.shift();ia=ia.join(":");var o=this._getItemObj(n);return"undefined"!=typeof o&&{i:n,ia:ia,v:a,ele:s}}s=s.parentNode}return!1},_getIds:function(e,t){var i="number"==typeof arguments[2]?arguments[2]:0,s=e.firstChild;if(!s)return i;for(i=this._pushId(s,t,i);s.nextSibling;)s=s.nextSibling,i=this._pushId(s,t,i);return i},_pushId:function(e,t,i){if(1==e.nodeType){var s=$ga(e,"a5-item");if(null!=s&&""!=s){""==e.id&&(e.id=A5.u.getUniqueId()),s=s.split(":");var a=s.shift(),n=this._getItemObj(a);if(n.selectable){var o=this._getValue(e),r=$ga(e,"a5-navindex");i++,""!=r&&null!=r||(r=1e4+i),t.push({id:e.id,v:o,i:a,ia:s.join(":"),ni:r})}}e.firstChild&&(i=this._getIds(e,t,i))}return i},_getValue:function(e){var t=$ga(e,"a5-value");return""!=t&&null!=t||(t=e.id),t},_getNextId:function(e){var t=$(this.contId),i=$u.a.find(this._i.ids,e);if(i==-1)return!1;if(i+=1,i>=this._i.ids.length){if(!this.loopNavigate)return!1;if(this.loopNavigateNullSelection&&this.allowNullSelection)return this._deselAll(),this._selComp(!0),!1;i=0}for(var s="",a=i;a<this._i.ids.length;a++)if(s=this._i.ids[a],this._idSelectable(s,t))return s;if(this.loopNavigate){if(this.loopNavigateNullSelection&&this.allowNullSelection)return this._deselAll(),this._selComp(!0),!1;for(var a=0;a<i;a++)if(s=this._i.ids[a],this._idSelectable(s,t))return s}return!1},_getPrevId:function(e){var t=$(this.contId),i=$u.a.find(this._i.ids,e);if(i==-1)return!1;if(i-=1,i<0){if(!this.loopNavigate)return!1;if(this.loopNavigateNullSelection&&this.allowNullSelection)return this._deselAll(),this._selComp(!0),!1;i=this._i.ids.length-1}for(var s="",a=i;a>=0;a--)if(s=this._i.ids[a],this._idSelectable(s,t))return s;if(this.loopNavigate){if(this.loopNavigateNullSelection&&this.allowNullSelection)return this._deselAll(),this._selComp(!0),!1;for(var a=this._i.ids.length-1;a>i;a--)if(s=this._i.ids[a],this._idSelectable(s,t))return s}return!1},_idSelectable:function(e,t){var i=$(e);if(!i||"true"==$ga(i,"a5-disabled"))return!1;for(;i!=t&&i!=document.body;){if("none"==i.style.display||"hidden"==i.style.visibility)return!1;i=i.parentNode}return!0},_valueToId:function(e){if(!e)return!1;var t=[];if(e.length>0){if("#"==e[0])return[e.substr(1)];if("@"==e[0]){e=e.split(":");for(var i=e.shift(),s=e.join(":"),a=0;a<this._i.v.length;a++)this._i.i[a]==i&&this._i.ia[a]==s&&t.push(this._i.ids[a])}else for(var a=0;a<this._i.v.length;a++)this._i.v[a]==e&&t.push(this._i.ids[a])}return 0!=t.length&&t},_getItemObj:function(e){return"object"==typeof this._cl.items[e]?this._cl.items[e]:this.items[e]},_layoutD:{type:"template",html:"",template:"",scroll:{},items:{}},_itemD:{selectable:!0,selectedClassName:"",disabledClassName:"",onClick:!1,onDblClick:!1,onRightClick:!1,onBeforeSelect:!1,onSelect:!1,onDown:!1,onUp:!1,onSwipe:!1,onDownHold:!1}}),A5.ListBox=Class.create(),A5.ListBox.prototype={initialize:function(e,t,i){this.contId=e,$u.o.assign(this,{theme:"",override:"base",inputId:"",disabledClassName:"",focusClassName:"",multiple:!1,separator:"\n",selectionMode:"default",loopNavigate:!1,loopNavigateNullSelection:!0,allowNullSelection:!0,allowNullDeselection:!1,defaultValues:!1,calculateValue:0,scroll:{},layout:"",layouts:{},data:{nullHTML:""},columnLayout:{header:{show:!0,className:"",item:{className:"",hoverClassName:"",order:{ascendingImage:"",descendingImage:"",className:"",style:0},resize:{location:"after",className:"",handle:{className:"",size:"14px"}}}},data:{item:{className:"",style:""}}},view:{type:"default",size:50,maxSize:0,offset:10,navigation:{pull:{allow:!0,size:40},prev:{html:"Prev",className:"",pressedClassName:""},next:{html:"Next",className:"",pressedClassName:""}}},group:{auto:[],navigator:{show:!1,location:"right",offset:4,size:28,process:function(e){return e},className:"",focusClassName:"",style:0}},scroller:{show:!1},header:{show:!0,html:"",className:"",style:0},footer:{show:!0,html:"",className:"",style:0},lock:{className:"",html:""},content:{header:{show:!0,html:"",className:"",style:0},footer:{show:!0,html:"",className:"",style:0}},item:{className:"",hoverClassName:"",selectedClassName:"",style:0,titleClassName:"",separatorClassName:"",template:""},items:{},animation:{swap:{flow:"ltr",duration:600},lock:{duration:200}},state:{view:{start:0,end:0,hasPrev:!1,hasNext:!1}},filter:!1,order:!1,disabled:!1,readOnly:!1,onFocus:0,onBlur:0,onRightClick:0,onSelect:0,onBeforeSelect:0,onClick:0,onDblClick:0,onPopulate:0,onBeforePopulate:0,onListDraw:0,onBeforeListDraw:0,onItemDraw:0,onBeforeItemDraw:0,onNavigate:0,onBeforeAddRows:0,onAddRows:0,onBeforeRemoveRows:0,onRemoveRows:0,onBeforeUpdateRow:0,onUpdateRow:0,onBeforeFilter:0,onFilter:0,onBeforeOrder:0,onOrder:0,selection:[],selectionData:[],selectionKey:[],value:[],_hasFocus:!1}),"undefined"!=typeof A5._listBoxDefaults&&$u.o.assign(this,A5._listBoxDefaults),"undefined"!=typeof i.theme&&A5.themes.assign(this,i.theme,"listbox"),$u.o.assign(this,i),"undefined"==typeof this.scroller.theme&&(this.scroller.theme=this.theme),A5.overrides.assign(this,"listBox",this.override),"undefined"!=typeof this.item.template&&(""==this.layout&&(this.layout="*default"),this.layouts["*default"]={type:"template",template:this.item.template}),"undefined"!=typeof this.item.calculateValue&&(this.calculateValue=this.item.calculateValue),""!=this._template&&this.calculateValue.constructor!=Function&&(this.calculateValue=function(e){if(e.constructor==Object){var t=new Array;for(prop in e)t.push(e[prop]);return t.join("\n")}return e.constructor==Array?e.join("\n"):e});var s=$(this.contId);"absolute"!=s.style.position&&(s.style.position="relative"),$ss(s,$gs(s)+"; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"),$sa(s,"A5StoredStylePadding",s.style.padding),this._keyWatch=new AUI.KeyWatcher([{key:"up",handle:this._keyPrevItem},{key:"down",handle:this._keyNextItem},{key:"left",handle:this._keyPrevItem},{key:"right",handle:this._keyNextItem},{key:"home",handle:this._keyFirstItem},{key:"end",handle:this._keyLastItem},{key:"enter",handle:this._keyEnter}],this),this._hasFocus=!1;var a="LISTBOX."+e,n=document.createElement("button");n.id=e+".FOCUSCATCHER",$ss(n,"position: absolute; display: block; font-size: 0px; outline: none; opacity: 0; filter: alpha(opacity=0); height: 0px; width: "+s.offsetWidth+"px"),$e.add(n,"keydown",function(e){var t=e.charCode||e.keyCode;9!=t&&$e.preventDefault(e)},!1,a),$e.add(n,"keypress",function(e){var t=e.charCode||e.keyCode;9!=t&&$e.preventDefault(e)},!1,a),$e.add(n,"focus",this._focus,this,!0,a),$e.add(s,A5.d.evnts.click,this._onClick,this,!0,a),$e.add(s,A5.d.evnts.dblClick,this._onDblClick,this,!0,a),$e.add(s,"contextmenu",this._rClick,this,!0,a),$e.add(s,A5.d.evnts.down,this._down,this,!0,a),$e.add(s,"a5listnavevent",this._navEvnt,this,!0,a),s.parentNode.insertBefore(n,s),this._data=[].concat(t),this._clOrderCol=-1,this._clOrderCols=[],this._clOrderDir=0,this._clfWidth=-1,this._clfFlex=!1,this._clfCSC={i:!1,dir:0},this._ioStyle=!1,this.view._ds=-1,this.view._de=-1,this._curL="",this._curLObj={},this._hPad=0,this._vPad=0,this._cssSelP=this.contId.split(/[\W]*/).join(""),this._isInit=!0,this.refresh(),this.setDisabled(this.disabled),this._isInit=!1,this._l=-2,this._tl=-2,this._lTO=0},destroy:function(){this._keyWatch.off(),A5.u.drag.remove($(this.contId+".GROUPNAV"),"custom"),A5.u.drag.remove($(this.contId+".CHEADER"),"custom"),A5.u.drag.remove($(this.contId+".CONTENTWRAPPER"),"scroll"),$e.removeGroup("LISTBOX."+this.contId)},setDisabled:function(e){e?$acn(this.contId,this.disabledClassName):$rcn(this.contId,this.disabledClassName),this.disabled=e},setLayout:function(e){this.layout=e,this.refresh()},setColumnOrderImage:function(e,t){if(0==t&&(e=!1),this.columnLayout.header.show&&0!=this._curLObj.columns.length){if("number"==typeof this._clfCSC.i&&($(this.contId+".CHEADER."+this._clfCSC.i+".IMG").style.display="none"),this._clfCSC={i:e,d:t},"number"==typeof this._clfCSC.i){var i=$(this.contId+".CHEADER."+this._clfCSC.i+".IMG");i.style.display="",this._clfCSC.d<0?A5.u.icon.update(i,this.columnLayout.header.item.order.descendingImage):A5.u.icon.update(i,this.columnLayout.header.item.order.ascendingImage)}}else this._clfCSC={i:e,d:t}},setDisplay:function(e,t){if("column-header"==e)this.columnLayout.header.show=t,this.refresh();else if("content-header"==e){var i=$(this.contId+".CONTENT.HEADER");this.content.header.show=t,t?i.style.display="":i.style.display="none"}else if("content-footer"==e){var i=$(this.contId+".CONTENT.FOOTER");this.content.footer.show=t,t?i.style.display="":i.style.display="none"}else if("header"==e){var i=$(this.contId+".HEADER");this.header.show=t,t?i.style.display="":i.style.display="none",this._resize()}else if("footer"==e){var i=$(this.contId+".FOOTER");this.footer.show=t,t?i.style.display="":i.style.display="none",this._resize()}else"scroller"==e&&this._scr&&(this._scr.setDisplay(t),t&&this._scr.refresh())},setLock:function(e){if(this._l<0&&!e||this._l>0&&e)return!1;var t=$(this.contId+".LOCK");if(e){if(this._l==-1&&!this._isInit)return this._tl=2,!0;t.className=this.lock.className,t.innerHTML=this.lock.html,t.style.display="",t.style.opacity="1",this._l=1,this._tl=2}else{if(1==this._l&&!this._isInit)return this._tl=-2,!0;t.style.opacity="0",this._l=-1,this._tl=-2}var i=this;setTimeout(function(){i._lockComp(),delete i},this.animation.lock.duration+10)},_lockComp:function(){this._l=2*this._l,this._l<0&&$(this.contId+".LOCK")&&($(this.contId+".LOCK").style.display="none"),this._l!=this._tl&&(this._tl<0?this.setLock(!1):this.setLock(!0))},refresh:function(){var e="undefined"==typeof arguments[0]||arguments[0],t="LISTBOX."+this.contId,i=$(this.contId);this._oldWidth=i.offsetWidth,this._clOrderCol=-1,this._clOrderCols=[],this._clOrderDir=0,this._clfWidth=-1,this._clfFlex=!1,this._clfCSC={i:!1,dir:0},this._ioStyle=!1,this._tempIsDyn=!1;var s=this.layouts[this.layout];$u.o.assign(s,this._lDefaults,!0);var a=!1;if(this._curLObj==s&&(a=!0),this._isInit){i.innerHTML="";var n=document.createElement("div");n.id=this.contId+".HEADER",$sa(n,"a5-item","*header"),n.className=this.header.className,n.innerHTML=this.header.html,"object"!=typeof this.header.style&&"string"!=typeof this.header.style||$ss(n,this.header.style),$ss(n,$gs(n)+"; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"),i.appendChild(n);var o=document.createElement("div");o.id=this.contId+".CHEADER",o.className=this.columnLayout.header.className,$ss(o,"overflow: hidden; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;");var r=document.createElement("div");r.id=this.contId+".CHEADER.GROUP",r.style.whiteSpace="nowrap",o.appendChild(r);var l=document.createElement("div");if(l.id=this.contId+".COLRESIZE",l.className=this.columnLayout.header.item.resize.className,$ss(l,"position: absolute; top: 0px; display: none;"),o.appendChild(l),A5.u.drag.add(o,"custom",{stopPropagation:!0,tolerance:-1,contId:this.contId,crEle:l,onStart:function(e,t){var i=document.elementFromPoint(e.x,e.y),s=String($ga(i,"a5-item")).split(":");"*col-resize"==s[0]&&(e.a=!0,e.sw=i.parentNode.offsetWidth,t.indx=Number(s[1]),t.crEle.style.left=i.parentNode.offsetLeft+"px",t.crEle.style.height=i.parentNode.offsetHeight+"px",t.crEle.style.width=e.sw+"px",t.crEle.style.display="")},onMove:function(e,t){e.a&&(t.crEle.style.width=e.sw+e.moveX+"px")},onEnd:function(e,t){e.a&&(t.m=e.moveX,$e.execute(this,"a5listcoldrag"),e.a=!1,t.crEle.style.display="none")}}),$e.add(o,"a5listcoldrag",this._colResize,this,!0,t),i.appendChild(o),(A5.flags.supportsTouch||"always"==this.useDragScrolling&&A5.u.css.supportsTransition)&&"never"!=this.useDragScrolling)var d="translate3d(0px,0px,0px)";else var d="";var h=document.createElement("div");h.id=this.contId+".CONTENTWRAPPER",$e.add(h,A5.u.css.properties.transitionEndEvent,function(){this.style[A5.u.css.properties.transitionDOM]=""}),$ss(h,"position: relative; -webkit-transform: "+d+"; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"),i.appendChild(h);var c=document.createElement("div");c.id=this.contId+".CONTENT.HEADER",c.className=this.content.header.className+" "+this._cssSelP+"W",$sa(c,"a5-item","*content-header"),"object"!=typeof this.content.header.style&&"string"!=typeof this.content.header.style||$ss(c,this.content.header.style),
c.style.WebkitTransform=d,h.appendChild(c);var u=document.createElement("div");u.id=this.contId+".CONTENT",u.style.WebkitTransform=d,h.appendChild(u);var f=document.createElement("div");f.id=this.contId+".CONTENT.FOOTER",f.className=this.content.footer.className+" "+this._cssSelP+"W",$sa(f,"a5-item","*content-footer"),"object"!=typeof this.content.footer.style&&"string"!=typeof this.content.footer.style||$ss(f,this.content.footer.style),f.style.clear="both",f.style.WebkitTransform=d,h.appendChild(f),A5.flags.isFireFox?$e.add(h,"transitionend",Function("var cEle = $('"+this.contId+".CONTENTTEMP'); if(cEle){ this.style['MozTransition'] = ''; $('"+this.contId+"').removeChild(cEle);}"),!1,t):A5.flags.isOpera?$e.add(h,"oTransitionEnd",Function("var cEle = $('"+this.contId+".CONTENTTEMP'); if(cEle){ this.style['OTransition'] = ''; $('"+this.contId+"').removeChild(cEle);}"),!1,t):A5.flags.isWebKit&&$e.add(h,"webkitTransitionEnd",Function("var cEle = $('"+this.contId+".CONTENTTEMP'); if(cEle){ this.style['WebkitTransition'] = ''; $('"+this.contId+"').removeChild(cEle);}"),!1,t);var p=document.createElement("div");p.style.clear="both",h.appendChild(p);var m=document.createElement("div");m.id=this.contId+".FOOTER",$sa(m,"a5-item","*footer"),m.className=this.footer.className,m.innerHTML=this.footer.html,"object"!=typeof this.footer.style&&"string"!=typeof this.footer.style||$ss(m,this.footer.style),$ss(m,$gs(m)+"; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"),i.appendChild(m),"dynamic"!=this.view.type&&"page"!=this.view.type||this.view.navigation.pull.allow&&(this.scroll._pn={id:this.contId,size:this.view.navigation.pull.size,axis:"y",nACn:this.view.navigation.next.pressedClassName,pACn:this.view.navigation.prev.pressedClassName,pe:0,pre:0},this.scroll.onPull&&(this.scroll._pn.pe=this.scroll.onPull),this.scroll.onPullRelease&&(this.scroll._pn.pre=this.scroll.onPullRelease),"template-horizontal"==s.type&&(this.scroll._pn.axis="x"),this.scroll.onPull=function(e,t,i,s){var a=s;"x"==t._pn.axis&&(a=i),clearTimeout(t._rTO),a<t._pn.size*-1?$acn(t._pn.id+".PREV",t._pn.pACn):$rcn(t._pn.id+".PREV",t._pn.pACn),a>t._pn.size?$acn(t._pn.id+".NEXT",t._pn.nACn):$rcn(t._pn.id+".NEXT",t._pn.nACn),t._pn.pe.constructor==Function&&t._pn.pe.apply(this,arguments)},this.scroll.onPullRelease=function(e,t,i,s){var a=s;if("x"==t._pn.axis&&(a=i),Math.abs(a)>t._pn.size){$rcn(t._pn.id+".PREV",t._pn.pACn),$rcn(t._pn.id+".NEXT",t._pn.nACn);var n="p";a>t._pn.size&&(n="n"),A5.u.drag.setDisabled(this,"scroll",!0,!1),t._rTO=setTimeout(Function("$sa('"+t._pn.id+"','a5listnavdir','"+n+"'); $e.execute('"+t._pn.id+"','a5listnav');"),t.momentum.duration)}t._pn.pre.constructor==Function&&t._pn.pre.apply(this,arguments)},$e.add(i,"a5listnav",this._viewNavEvnt,this,!1,t));var _={theme:"",axis:"both"};$u.o.assign(_,this.scroll),$u.o.assign(_,s.scroll),""==_.theme&&(_.theme=this.theme),A5.u.drag.add(h,"scroll",_),$e.add(i,"a5resize",this._resize,this,!0,t),this.scroller.show&&("string"==typeof this.scroller.message?(this.scroller.mTmpl=A5.u.template.parse(this.scroller.message),this.scroller.message=function(e){var t=e;return this._d&&(t=A5.u.template.expand(this._d[this._dm[e]],{template:this.mTmpl}),t=t.split("{*row}").join(e),t=t.split("{*dataRow}").join(this._d[this._dm[e]]["*renderIndex"]),t=t.split("{*dataRowOneBased}").join(this._d[this._dm[e]]["*renderIndex"]+1),t=t.split("{*key}").join(this._dm[e]),this.mTmpl.html=[]),t}):"undefined"==typeof this.scroller.message?this.scroller.message=function(e){return e+1}:(this.scroller._message=this.scroller.message,this.scroller.message=function(e){return this._message(this._d[this._dm[e]])}),this._scr=new A5.Scroller(this.contId+".CONTENTWRAPPER",this.scroller),this._scr._onSelect=this._scr.onSelect,this._scr.onSelect=function(e){$e.execute(this.contId,"a5listscroller"),this._onSelect.constructor==Function&&this._onSelect.call(this,e)},$e.add(h,"a5listscroller",this._scrollerEvnt,this,!0,t));var g=document.createElement("div");g.id=this.contId+".GROUPNAV",g.className=this.group.navigator.className,"object"!=typeof this.group.navigator.style&&"string"!=typeof this.group.navigator.style||$ss(g,this.group.navigator.style),g.style.WebkitTransform="translate3d(0px,0px,0px)",i.appendChild(g),$(h.id+".SCROLLWRAPPER")||$e.add(h,"scroll",function(e,t){var i=$(t.contId+".GROUPNAV");i.style.marginTop=this.scrollTop-Math.round(i.offsetHeight/2)+"px","left"==t.group.navigator.location||"right"==t.group.navigator.location?i.style.marginTop=this.scrollTop-Math.round(i.offsetHeight/2)+"px":i.style.marginLeft=this.scrollLeft-Math.round(i.offsetWidth/2)+"px"},this,!1,t),A5.u.drag.add(g,"custom",{stopPropagation:!0,tolerance:-1,focusCls:this.group.navigator.focusClassName,onStart:function(e,t){var i=this.getBoundingClientRect();"y"==t.daxis?(t.eleOff=i.top,t.eleSize=this.offsetHeight):(t.eleOff=i.left,t.eleSize=this.offsetWidth),t.group=-1,this.style[A5.u.css.properties.transformDOM]=A5.u.css.transform2D("0px","0px"),""!=t.focusCls&&$acn(this,t.focusCls),t.onMove.call(this,e,t)},onMove:function(e,t){var i=e[t.daxis],s=-1;s=i<t.eleOff?0:i>t.eleOff+t.eleSize?t.groups:Math.round((i-t.eleOff)/t.eleSize*t.groups),s!=t.group&&(t.group=s,$e.execute(this,"a5listgotogroup"))},onEnd:function(e,t){this.style[A5.u.css.properties.transformDOM]=t._trans,""!=t.focusCls&&$rcn(this,t.focusCls)}}),$e.add(g,"a5listgotogroup",function(){var e=A5.u.drag._w[this.contId+".GROUPNAV"].c.group;this.scrollToItem(this._groupsNDI[e],{mode:"top"})},this,!0,t);var v=document.createElement("div");v.id=this.contId+".LOCK",$ss(v,"position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px; background: white; display: none;"),v.style[A5.u.css.properties.transitionDOM]="opacity "+this.animation.lock.duration+"ms ease",i.appendChild(v),this.setLock(!0),this.setLock(!1),$e.add(h,"scroll",this._scroll,this,!1,t),i.style.overflow="hidden",i.style.padding="0px",h.style.height="100px",$ga(h,"A5CustomScroll")?(h.style.overflow="hidden",h.style.overflowX="hidden",h.style.overflowY="hidden"):h.style.overflow="auto",u.innerHTML="",u.style.display="",u.style.position="relative"}else{var o=$(this.contId+".CHEADER"),r=$(this.contId+".CHEADER.GROUP"),h=$(this.contId+".CONTENTWRAPPER"),c=$(this.contId+".CONTENT.HEADER"),f=$(this.contId+".CONTENT.FOOTER"),n=$(this.contId+".HEADER"),m=$(this.contId+".FOOTER"),u=$(this.contId+".CONTENT"),g=$(this.contId+".GROUPNAV");if($ga(h,"A5CustomScroll")){"dynamic"!=this.view.type&&"page"!=this.view.type||this.view.navigation.pull.allow&&(this.scroll._pn.axis="y","template-horizontal"==s.type&&(this.scroll._pn.axis="x"));var _={axis:"both"};$u.o.assign(_,this.scroll),$u.o.assign(_,s.scroll),$u.o.assign(A5.u.drag._w[h.id].s,_),delete A5.u.drag._st[h.id]}}u.style.whiteSpace="",this.columnLayout.header.show&&0!=s.columns.length?o.style.display="":o.style.display="none",this.header.show&&""!=this.header.html?(n.style.display="",this._isInit&&(n.innerHTML=this.header.html)):n.style.display="none",this.footer.show&&""!=this.footer.html?(m.style.display="",this._isInit&&(m.innerHTML=this.footer.html)):m.style.display="none",this.content.header.show?(c.style.display="",this._isInit&&(c.innerHTML=this.content.header.html)):c.style.display="none",this.content.footer.show?(f.style.display="",this._isInit&&(f.innerHTML=this.content.footer.html)):f.style.display="none",this.group.navigator.show?(g.style.display="","left"==this.group.navigator.location||"right"==this.group.navigator.location?A5.u.drag._w[g.id].c.daxis="y":A5.u.drag._w[g.id].c.daxis="x"):g.style.display="none","template-horizontal"==this._curL&&"template-horizontal"!=s.type&&(h.style.whiteSpace="",c.style.display="",u.style.display="",f.style.display="");var y={left:0,top:0};if(y=A5.u.element.getScroll(h),"template"==s.type||"template-flow"==s.type||"template-horizontal"==s.type){if(s.template.constructor==Array&&(s.template=s.template.join("")),this._template=s.template,this._template.constructor==Function&&(this._tempIsDyn=!0),"template-flow"==s.type?this._ioStyle={cssFloat:"left",styleFloat:"left"}:"template-horizontal"==s.type&&(this._ioStyle={display:"inline-block",verticalAlign:"top"},"template-horizontal"!=this._curL&&(h.style.whiteSpace="nowrap",c.style.display="inline-block",u.style.display="inline-block",f.style.display="inline-block")),"fill"==s.item.width.substr(0,4).toLowerCase()||"fill"==s.item.height.substr(0,4).toLowerCase()){u.innerHTML='<div class="'+this.item.className+'" style="visibility: hidden;">&nbsp;</div>';var b={paddingTop:"",paddingBottom:"",paddingRight:"",paddingLeft:"",borderTopWidth:"",borderRightWidth:"",borderBottomWidth:"",borderLeftWidth:""},w={marginLeft:"",margingRight:"",marginTop:"",marginBottom:""};"undefined"!=typeof window.getComputedStyle?(b=window.getComputedStyle(i),w=window.getComputedStyle(u.firstChild)):i.currentStyle&&(b=i.currentStyle,w=u.firstChild.currentStyle);var I=0;""!=b.paddingLeft&&(I+=A5.u.convertUnits(b.paddingLeft,"px")),""!=b.paddingRight&&(I+=A5.u.convertUnits(b.paddingRight,"px")),""!=b.borderLeftWidth&&(I+=A5.u.convertUnits(b.borderLeftWidth,"px")),""!=b.borderRightWidth&&(I+=A5.u.convertUnits(b.borderRightWidth,"px")),""!=w.marginLeft&&(I+=A5.u.convertUnits(w.marginLeft,"px")),""!=w.marginRight&&(I+=A5.u.convertUnits(w.marginRight,"px"));var C=0;""!=b.paddingTop&&(C+=A5.u.convertUnits(b.paddingTop,"px")),""!=b.paddingBottom&&(C+=A5.u.convertUnits(b.paddingBottom,"px")),""!=b.borderTopWidth&&(C+=A5.u.convertUnits(b.borderTopWidth,"px")),""!=b.borderBottomWidth&&(C+=A5.u.convertUnits(b.borderBottomWidth,"px")),""!=w.marginTop&&(C+=A5.u.convertUnits(w.marginTop,"px")),""!=w.marginBottom&&(C+=A5.u.convertUnits(w.marginBottom,"px")),this._hPad=I,this._vPad=C,u.innerHTML=""}var A=0,N=0,x=0;if(this.columnLayout.header.show)for(var E=0;E<s.columns.length;E++)A=s.columns[E],$u.o.assign(A,this._cDefaults,!0),N=document.createElement("div"),N.id=this.contId+".CHEADER."+E,$sa(N,"a5-item","*col:"+E),N.innerHTML=A.header.html,N.className=this._gDef(A.header.className,this.columnLayout.header.item.className)+" "+this._cssSelP+"C"+E,A5.flags.isMobile||($e.add(N,"mouseover",Function("$acn(this,'"+this._gDef(A.header.hoverClassName,this.columnLayout.header.item.hoverClassName)+"');"),!1,!1,t),$e.add(N,"mouseout",Function("$rcn(this,'"+this._gDef(A.header.hoverClassName,this.columnLayout.header.item.hoverClassName)+"');"),!1,!1,t)),this._clOrderCols.push(A.order),$ss(N,this._gDef(A.header.style,this.columnLayout.header.item.style)+"; position: relative; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: inline-block; vertical-align: bottom; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"),x=A5.u.icon.element(this.columnLayout.header.item.order.ascendingImage),x.id=this.contId+".CHEADER."+E+".IMG",$acn(x,this.columnLayout.header.item.order.className),"string"!=typeof this.columnLayout.header.item.order.style&&"object"!=typeof this.columnLayout.header.item.order.style||$ss(x,this.columnLayout.header.item.order.style),x.style.display="none",N.appendChild(x),r.appendChild(N)}else if("column"==s.type){s.template.constructor==Array&&(s.template=s.template.join("")),this._aTemplate=s.template,this._aTemplate.constructor==Function&&(this._tempIsDyn=!0),r.innerHTML="",r.style.width="";var A=0,R=[],N=0;s._fTotal=0,s._wTotal=0;for(var E=0;E<s.columns.length;E++)A=s.columns[E],$u.o.assign(A,this._cDefaults,!0),"flex("==A.width.substr(0,5)?(A._w="0px",A._f=Math.abs($u.s.toNum(A.width)),s._fTotal+=A._f):(A._w=A.width,A._f=0,s._wTotal+=A5.u.convertUnits(A.width,"px"));0!=s._fTotal&&(u.innerHTML='<div class="'+this._gDef(s.item.className,this.item.className)+'" style="'+this._gDef(s.item.style,this.item.style)+"; visibility: hidden; height: "+(u.offsetHeight+1e3)+'px;"><div>&nbsp;</div></div>',this._clftWidth=u.firstChild.firstChild.offsetWidth,this._clftWidthDif=i.offsetWidth-this._clftWidth,u.innerHTML="");var D="right";"before"==this.columnLayout.header.item.resize.location&&(D="left");for(var E=0;E<s.columns.length;E++)A=s.columns[E],R.push('<div class="'+this._gDef(A.data.className,this.columnLayout.data.item.className)+" "+this._cssSelP+"C"+E+'" style="'+this._gDef(A.data.style,this.columnLayout.data.item.style)+'; overflow: hidden; text-overflow: ellipsis; white-space: pre; display: inline-block; vertical-align: bottom; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">'+A.data.template+"</div>"),this.columnLayout.header.show&&(N=document.createElement("div"),N.id=this.contId+".CHEADER."+E,$sa(N,"a5-item","*col:"+E),N.innerHTML=A.header.html,N.className=this._gDef(A.header.className,this.columnLayout.header.item.className)+" "+this._cssSelP+"C"+E,A5.flags.isMobile||($e.add(N,"mouseover",Function("$acn(this,'"+this._gDef(A.header.hoverClassName,this.columnLayout.header.item.hoverClassName)+"');"),!1,!1,t),$e.add(N,"mouseout",Function("$rcn(this,'"+this._gDef(A.header.hoverClassName,this.columnLayout.header.item.hoverClassName)+"');"),!1,!1,t)),this._clOrderCols.push(A.order),$ss(N,this._gDef(A.header.style,this.columnLayout.header.item.style)+"; position: relative; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: inline-block; vertical-align: bottom; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"),x=A5.u.icon.element(this.columnLayout.header.item.order.ascendingImage),x.id=this.contId+".CHEADER."+E+".IMG",$acn(x,this.columnLayout.header.item.order.className),"string"!=typeof this.columnLayout.header.item.order.style&&"object"!=typeof this.columnLayout.header.item.order.style||$ss(x,this.columnLayout.header.item.order.style),x.style.display="none",N.appendChild(x),A.resize&&(x=document.createElement("div"),x.className=this.columnLayout.header.item.resize.handle.className,$sa(x,"a5-item","*col-resize:"+E),$ss(x,"position: absolute; top: 0px; bottom: 0px; "+D+": 0px; width: "+this.columnLayout.header.item.resize.handle.size+"; cursor: e-resize;"),N.appendChild(x)),r.appendChild(N));this._clfFlex=0!=s._fTotal,this._template=R.join(""),this._tempIsDyn?(this._cTemplate=this._template,this._template=function(e){return this._cTemplate+"<div>"+this._aTemplate(e)+"</div>"}):this._template=this._template+"<div>"+this._aTemplate+"</div>"}this._curL=s.type,this._curLObj=s,this._resize(!0),this._tempIsDyn||""==this._template||(this._template=A5.u.template.parse(this._template)),this.populate(this._data,e,!1,this._isInit),a?A5.u.element.setScroll(h,y.left,y.top):(A5.u.element.setScroll(h,0,0),this._scroll.call(h,{},this))},populate:function(e){var t="undefined"!=typeof arguments[1]&&arguments[1];if(t)var i=[].concat(this.value);var s="undefined"!=typeof arguments[2]&&arguments[2],a="undefined"==typeof arguments[3]||arguments[3];if(this.onBeforePopulate.constructor==Function&&a){var n=this.onBeforePopulate.call(this,e);if("boolean"==typeof n&&!n)return!1}this._deselectAll(!0),"dynamic"!=this.view.type&&"page"!=this.view.type||(this.view._s=0,this.view._e=this.view.size,this.state.view={start:0,end:0,hasPrev:!1,hasNext:!1}),s&&this._swapList(s),this._data=[],this._dataMap=[],this._data=this._data.concat(e),this._groups=[],this._groupsN=[],this._groupsNDI=[],$(this.contId+".CONTENT").innerHTML="",this._values=new Array;for(var o="",r=[].concat(this._data),l=0;l<r.length;l++)"object"==typeof r[l]&&(r[l]["*key"]=l);if(this.filter||this.order||this.group.auto.length>0){for(var d=[],l=0;l<r.length;l++)o=this._getStrData(r[l]),"-"!=o&&"*title"!=o&&"*static"!=o&&d.push(r[l]);r=d}if(this.filter){var d=[];if(this.filter.constructor==Object){for(var l=0;l<r.length;l++)for(var h in this.filter)if(this.filter[h](r[l][h])){d.push(r[l]);break}}else for(var l=0;l<r.length;l++)this.filter(r[l])&&d.push(r[l]);r=d}if(this.group.auto.length>0&&0!=r.length)for(var c=[[].concat(r)],d=[],l=0;l<this.group.auto.length;l++){$u.o.assign(this.group.auto[l],this._gDefaults,!0);for(var u=0;u<c.length;u++)c[u].constructor==Array&&(this._orderData(this.group.auto[l].order,c[u],!1),d=this._groupData(c[u],l),c.splice.apply(c,[u,1].concat(d)),u+=d.length)}if(this.columnLayout.header.show&&0!=this._curLObj.columns.length&&(this._clOrderCol>-1&&($(this.contId+".CHEADER."+this._clOrderCol+".IMG").style.display="none"),this._clOrderDir=0,"number"==typeof this._clfCSC.i)){var f=$(this.contId+".CHEADER."+this._clfCSC.i+".IMG");f.style.display="",this._clfCSC.d<0?A5.u.icon.update(f,this.columnLayout.header.item.order.descendingImage):A5.u.icon.update(f,this.columnLayout.header.item.order.ascendingImage)}if(this.order)if(this.group.auto.length>0)for(var u=0;u<c.length;u++)c[u].constructor==Array&&this._orderData(this.order,c[u],!0);else this._orderData(this.order,r,!0);if(this.group.auto.length>0&&0!=r.length){r=[];for(var u=0;u<c.length;u++)c[u].constructor==Array?r=r.concat(c[u]):r.push(c[u])}for(var p=0,o="",l=0;l<r.length;l++)o=this._getStrData(r[l]),"-"!=o&&"*title"!=o&&"*static"!=o?("object"==typeof r[l]?(r[l]["*renderIndex"]=p,r[l]["*value"]=this.calculateValue(r[l],p),this._values.push(r[l]["*value"]),this._dataMap.push(r[l]["*key"])):(this._values.push(this.calculateValue(r[l],p)),this._dataMap.push(p)),p++):"*title"==o&&(1!=r[l].navigate&&"undefined"!=typeof r[l].navigate||("undefined"!=typeof r[l]["*navTitle"]?this._groups.push(r[l]["*navTitle"]):this._groups.push(this.group.navigator.process(r[l]["*title"])),"undefined"!=typeof r[l]["*name"]?this._groupsN.push(r[l]["*name"]):this._groupsN.push(this._groups[this._groups.length-1]),this._groupsNDI.push(p)));if(this.scroller.show&&("dynamic"!=this.view.type&&"page"!=this.view.type||(this._scr.value=0,A5.u.element.setScroll($(this.contId+".CONTENTWRAPPER"),0,0)),0==this._dataMap.length?this._scr.max=0:this._scr.max=this._dataMap.length-1,this._scr._dm=this._dataMap,this._scr._d=this._data,this._scr.refresh()),this._renderData(r,0,0,"populate"),this.allowNullSelection||0==e.length||t&&0!=i.length||this._selectItem(0),t&&(this.allowNullDeselection&&this._deselectAll(),this.setValue(i,!1)),0==this.value.length){var m=$(this.contId+".CONTENTWRAPPER"),_=A5.u.element.getScroll(m);A5.u.element.setScroll(m,_.left,_.top)}this.onPopulate.constructor==Function&&a&&this.onPopulate.call(this,this._rData)},_groupData:function(e,t){for(var i="",s="",a=[],n=[],o=0;o<e.length;o++)i=this.group.auto[t].group(e[o]),i!=s&&(0!=n.length&&(a.push({"*title":this.group.auto[t].header.html.call(this,s,n),navigate:this.group.auto[t].navigate,className:this.group.auto[t].header.className}),a.push(n),this.group.auto[t].footer.show&&(this.group.auto[t].footer.html.constructor==Function?a.push({"*static":this.group.auto[t].footer.html.call(this,s,n),className:this.group.auto[t].footer.className}):a.push({"*static":this.group.auto[t].footer.html,className:this.group.auto[t].footer.className}))),n=[],s=i),n.push(e[o]);return 0!=n.length&&(a.push({"*title":this.group.auto[t].header.html.call(this,s,n),navigate:this.group.auto[t].navigate,className:this.group.auto[t].header.className}),a.push(n),this.group.auto[t].footer.show&&(this.group.auto[t].footer.html.constructor==Function?a.push({"*static":this.group.auto[t].footer.html.call(this,s,n),className:this.group.auto[t].footer.className}):a.push({"*static":this.group.auto[t].footer.html,className:this.group.auto[t].footer.className}))),a},_orderData:function(e,t,i){if(0==t.length)return t;if(e.constructor==Function)t.sort(e);else{var s=[];if(e.constructor==Object||e.constructor==Array){var a="";if(e.constructor==Array)for(var n=0,o=0;o<e.length;o++)n=1,"string"==typeof e[o]?r=e[o]:(r=e[o][0],n=e[o][1]),0==s.length?(s.push(this._orderFuncGen(r,n,t)),a=r):(s.push("if(result == 0){"),s.push(this._orderFuncGen(r,n,t)),s.push("}"));else for(var r in e)0==s.length?(s.push(this._orderFuncGen(r,e[r],t)),a=r):(s.push("if(result == 0){"),s.push(this._orderFuncGen(r,e[r],t)),s.push("}"));if(s.push("return result;"),this.columnLayout.header.show&&0!=this._curLObj.columns.length&&i&&(this._clOrderCol=$u.a.find(this._clOrderCols,a),this._clOrderCol>-1)){this._clOrderDir=e[a];var l=$(this.contId+".CHEADER."+this._clOrderCol+".IMG");l.style.display="",this._clOrderDir<0?A5.u.icon.update(l,this.columnLayout.header.item.order.descendingImage):A5.u.icon.update(l,this.columnLayout.header.item.order.ascendingImage)}}else{var d="var v1 = arguments[0]; var v2 = arguments[1]; var result = 0;",h="result = v1-v2;",c="return result;";"string"==typeof t[0]?h="if(v1.toLowerCase()<v2.toLowerCase()) result = -1; if(v1.toLowerCase()>v2.toLowerCase()) result = 1;":"boolean"==typeof t[0]&&(h="if(v1<v2) result = -1; if(v1>v2) result = 1;"),e<0&&(c="return result*-1;"),s=[d,h,c]}t.sort(Function(s.join("")))}return t},_orderFuncGen:function(e,t,i){var s=e.split(":"),a=s[0],n="var v1 = arguments[0]."+a+"; var v2 = arguments[1]."+a+"; if(v1 == null) v1 = ''; if(v2 == null) v2 = ''; var result = 0;",o="result = v1-v2;",r="";return"string"==typeof i[0][a]||null==i[0][a]?(n+="v1 = v1.replace(/(<([^>]+)>)/ig,'');v2 = v2.replace(/(<([^>]+)>)/ig,'');",s.length>1?"number"==s[1]?n+=" v1 = $u.s.toNum(v1); v2 = $u.s.toNum(v2);":"date"==s[1]?(s.shift(),s.shift(),n=n+" var tDate = new Date(); var tFrm = tDate._parseFormat('"+s.join(":")+"'); tDate.fromFormat(v1,tFrm); v1 = new Date(tDate); tDate.fromFormat(v2,tFrm); v2 = new Date(tDate);"):"boolean"==s[1]?(n+=" v1 = $u.s.toBool(v1); v2 = $u.s.toBool(v2);",o="if(v1<v2) result = -1; if(v1>v2) result = 1;"):"first"==s[1]?(n=n+" v1 = v1.substr(0,"+s[2]+"); v2 = v2.substr(0,"+s[2]+");",o="if(v1<v2) result = -1; if(v1>v2) result = 1;"):"length"==s[1]&&(n+=" v1 = v1.length; v2 = v2.length;"):o="if(v1.toLowerCase()<v2.toLowerCase()) result = -1; if(v1.toLowerCase()>v2.toLowerCase()) result = 1;"):"boolean"==typeof i[0][a]&&(o="if(v1<v2) result = -1; if(v1>v2) result = 1;"),t<0&&(r="result = result*-1;"),n+o+r},appendRows:function(e){var t=this._data.length;if(this.onBeforeAddRows.constructor==Function){var i=this.onBeforeAddRows.call(this,e,{type:"append"});if("boolean"==typeof i&&!i)return!1}if(this._data=this._data.concat(e),this.filter||this.order||this.group.auto.length>0)this.populate(this._data,!0,!1,!1);else{for(var s=this._dataMap.length,a=t;a<this._data.length;a++)this._isData(this._data[a])&&("object"==typeof this._data[a]?(this._data[a]["*key"]=a,this._data[a]["*renderIndex"]=this._dataMap.length,this._data[a]["*value"]=this.calculateValue(this._data[a],this._dataMap.length),this._values.push(this._data[a]["*value"]),this._dataMap.push(this._data[a]["*key"])):(this._values.push(this.calculateValue(this._data[a],this._dataMap.length)),this._dataMap.push(rIndex)));this.scroller.show&&(0==this._dataMap.length?this._scr.max=0:this._scr.max=this._dataMap.length-1,this._scr._dm=this._dataMap,this._scr._d=this._data,this._scr.refresh()),this._renderData([].concat(this._data),t,s,"append-rows")}this.onAddRows.constructor==Function&&this.onAddRows.call(this,this._rData,{type:"append"})},removeRows:function(e){for(var t=[],i=0;i<e.length;i++)"number"!=typeof e[i]&&(e[i]=this._getIndex(e[i],!0)),e[i]!=-1&&t.push(this._dataMap[e[i]]);if(this.onBeforeRemoveRows.constructor==Function){var s=this.onBeforeRemoveRows.call(this,t);if("boolean"==typeof s&&!s)return!1}t.sort(function(e,t){return t-e});for(var i=0;i<t.length;i++)this._data.splice(t[i],1);this.populate(this._data,!0,!1,!1),this.onRemoveRows.constructor==Function&&this.onRemoveRows.call(this)},insertRows:function(e,t){if("number"!=typeof e&&(e=this._getIndex(e)),e=this._dataMap[e],"undefined"==typeof e)this.appendRows(t);else{if(this.onBeforeAddRows.constructor==Function){var i=this.onBeforeAddRows.call(this,t,{type:"insert",index:e});if("boolean"==typeof i&&!i)return!1}var s=[e,0].concat(t);this._data.splice.apply(this._data,s),this.populate(this._data,!0,!1,!1),this.onAddRows.constructor==Function&&this.onAddRows.call(this,this._rData,{type:"insert",index:e})}},updateRow:function(e,t){if("number"!=typeof e&&(e=this._getIndex(e,!0)),e==-1)return!1;if(dIndx=e,e=this._dataMap[e],this.onBeforeUpdateRow.constructor==Function){var i=this.onBeforeUpdateRow.call(this,e,t);if("boolean"==typeof i&&!i)return!1}if("object"==typeof t?$u.o.assign(this._data[e],t):this._data[e]=t,this.filter||this.order||this.group.auto.length>0)this.populate(this._data,!0,!1,!1);else{var s={};if($u.o.assign(s,this._data[e]),""==this._template){this._hasOBIDEvnt&&this.onBeforeItemDraw.call(this,s,dIndx);var a=s.toString(),n=s.toString()}else{var o=this._template;if(this._tempIsDyn)var o=A5.u.template.parse(o(iData));this._hasOBIDEvnt&&this.onBeforeItemDraw.call(this,s,dIndx);var a=this._fillTemplate(o,s);a=a.split("{*row}").join(e),a=a.split("{*dataRow}").join(dIndx),a=a.split("{*dataRowOneBased}").join(dIndx+1);var n=this.calculateValue(s,e)}this._data[e]["*value"]=n,this._values[dIndx]=n;var r=$(this.contId+"."+dIndx);r&&(r.innerHTML=a,this._hasOIDEvnt&&this.onItemDraw.call(this,r,s,dIndx),this.onListDraw.constructor==Function&&this.onListDraw.call(this,this._rData,-1))}this.onUpdateRow.constructor==Function&&this.onUpdateRow.call(this,e,this._data[e])},setFilter:function(e){if(this.onBeforeFilter.constructor==Function){var t=this.onBeforeFilter.call(this,e);if("boolean"==typeof t&&!t)return!1}if(0==this._data.length)return!1;if(e.constructor==Object){this.filter={};for(var i in e)e[i].constructor==Function?this.filter[i]=e[i]:e[i].constructor==RegExp&&(this.filter[i]=Function("return ("+e[i].toString()+").test(arguments[0]);"))}else e.constructor==Function?this.filter=e:e.constructor==RegExp?this.filter=Function("return ("+e.toString()+").test(arguments[0]);"):this.filter=!1;this.populate(this._data,!0,!1,!1),this.onFilter.constructor==Function&&this.onFilter.call(this)},setOrder:function(e){if(this.onBeforeOrder.constructor==Function){var t=this.onBeforeOrder.call(this,e);if("boolean"==typeof t&&!t)return!1}return 0!=this._data.length&&(this.order=e,this.populate(this._data,!0,!1,!1),void(this.onOrder.constructor==Function&&this.onOrder.call(this)))},setValue:function(e){if(this.readOnly)return!1;var t="undefined"==typeof arguments[1]||arguments[1],i=!1;if(e.constructor==Object)if("all"==e.select)e=[].concat(this._values);else if("group"==e.select){var s=e.group;s.constructor!=Array&&(s=[s]);for(var a=0,n=0,o=0,r=[],l=0;l<s.length;l++)if(a=$u.a.find(this._groupsN,s[l]),a!=-1){n=this._groupsNDI[a],o=this._rData.length-1,a<this._groupsN.length-1&&(o=this._groupsNDI[a+1]-1);for(var d=n;d<=o;d++)r.push(d)}e.additive&&(r=r.concat(this.selection),r=$u.a.dedup(r)),e=r}else if("view"==e.select){for(var h=[],l=this.view._ds-1;l<=this.view._de;l++)h.push(this._rData[l]["*value"]);e.additive&&(h=h.concat(this.value),h=$u.a.dedup(h)),e=h}else e="";if(e.constructor==Array){e=[].concat(e);for(var l=0;l<e.length;l++)e[l]=this._getIndex(e[l]);if(e.join("\n")==this.selection.join("\n")&&(t=!1),0==e.length){if(this.allowNullSelection){if(this.onBeforeSelect.constructor==Function&&t){var c=this.onBeforeSelect(-1);if("boolean"!=typeof c&&(c=!0),!c)return!1}this._deselectAll(),t&&(i=!0)}}else if(this.multiple){if(this.onBeforeSelect.constructor==Function&&t){var c=this.onBeforeSelect.apply(this,e);if("boolean"!=typeof c&&(c=!0),!c)return!1}this._deselectAll();for(var l=0;l<e.length;l++)this._selectItem(e[l],!0,!1);0!=this.selection.length&&this.scrollToItem(this.selection[0]),t&&(i=!0)}else this._selectItem(e.pop(),!1,t)}else if(e=this._getIndex(e),(e==-1&&0==this.value.length||e==this.selection[0])&&(t=!1),this.allowNullDeselection&&this._deselectAll(),e==-1){if(this.allowNullSelection){if(this.onBeforeSelect.constructor==Function&&t){var c=this.onBeforeSelect(-1);if("boolean"!=typeof c&&(c=!0),!c)return!1}this._deselectAll(),t&&(i=!0)}}else this._selectItem(e,!1,t);i&&(""!=this.inputId&&($(this.inputId).value=this.value.join(this.separator),$e.execute(this.inputId,"change")),this.onSelect.constructor==Function&&this.onSelect(-1))},getData:function(e){if(e=this._getIndex(e),e>-1)return"number"==typeof this._dataMap[e]?this._data[this._dataMap[e]]:this._values[e]},valueInList:function(e){return e=this._getIndex(e,!0),e>-1},scrollToItem:function(e){if(0==this._data.length){var t=$(this.contId+".CONTENTWRAPPER");return A5.u.element.setScroll(t,0,0),!1}if(e=this._getIndex(e),("dynamic"==this.view.type||"page"==this.view.type)&&this.view._ds!=-1&&this.view._de!=-1&&0!=this._rData.length&&(e<this._rData[this.view._ds]["*renderIndex"]||e>this._rData[this.view._de]["*renderIndex"]))return this._viewNav("goto",e),this._rData[this.view._de]["*renderIndex"]<e&&(e=this._rData[this.view._de]["*renderIndex"]),this.scrollToItem(e,{mode:"top"}),!0;var i=$(this.contId+"."+e);if(i){i.previousSibling&&"true"==$ga(i.previousSibling,"A5IsListTitle")&&(i=i.previousSibling);var t=$(this.contId+".CONTENTWRAPPER"),s="undefined"!=typeof arguments[1]?arguments[1]:{};"template-horizontal"==this._curL?s.axis="x":s.axis="y",A5.u.element.setScroll(t,i,s),this._scroll.call(t,{},this)}},navigate:function(e){var t="undefined"==typeof arguments[1]||arguments[1];e=e.toLowerCase(),"prev"==e.substr(0,4)?this._keyPrevItem(t):"next"==e?this._keyNextItem(t):"home"==e?this._keyFirstItem(t):"end"==e?this._keyLastItem(t):"dynamic"==this.view.type?"page-prev"==e?this._viewNav("p"):"page-next"==e&&this._viewNav("n"):"page-prev"==e?this._keyFirstItem(t):"page-next"==e&&this._keyLastItem(t)},resize:function(){this._resize(!0)},_getIndex:function(e){var t=this.allowNullSelection||arguments[1]?-1:0;if("undefined"==typeof e)return t;if("number"!=typeof e){e=""+e;for(var i=0;i<this._values.length;i++)if(this._values[i].toLowerCase()==e.toLowerCase()){t=i;break}}else t=e;return t},_renderData:function(e,t,i,s){this._rData=e,this._hasOBIDEvnt=this.onBeforeItemDraw.constructor==Function,this._hasOIDEvnt=this.onItemDraw.constructor==Function,this.onBeforeListDraw.constructor==Function&&this.onBeforeListDraw.call(this,e,t);var a=$(this.contId+".CONTENT"),n="",o=t,r=e.length-1;if("dynamic"==this.view.type){if(this.state.view.hasPrev=!1,this.state.view.hasNext=!1,o=this.view._s,o>r)return void(this.onListDraw.constructor==Function&&this.onListDraw.call(this,e,t));if("view-add"!=s)if(0!=t){if(!(this.view._e-this.view._s<this.view.size))return void(this.onListDraw.constructor==Function&&this.onListDraw.call(this,e,t));o=t,this.view._e=Math.min(e.length-1,this.view._s+this.view.size)}else if(this.view._ds=-1,this.view._de=-1,0!=this.view._s){var l=document.createElement("div");l.id=this.contId+".PREV",l.className=this.view.navigation.prev.className,l.innerHTML=this.view.navigation.prev.html,$sa(l,"a5-item","*prev"),a.appendChild(l),$(this.contId+".CONTENT.HEADER").style.display="none",this.state.view.hasPrev=!0}else this.content.header.show&&($(this.contId+".CONTENT.HEADER").style.display="");else{o=t;var d=$(this.contId+".NEXT");d&&a.removeChild(d)}this.view._e=Math.min(r,this.view._e),r=this.view._e,this.state.view.start=this.view._s,this.state.view.end=this.view._e,i+=o}if(""==this._template)for(var h=o;h<=r;h++)n=this._getStrData(e[h]),"-"==n||"*title"==n||"*static"==n?this._renderSep(e[h],a):(this.view._ds==-1&&(this.view._ds=h),this.view._de=h,this._renderSimpleItem(e[h],i,h,a),i++);else for(var c="object"==typeof this.defaultValues,h=o;h<=r;h++)n=this._getStrData(e[h]),"-"==n||"*title"==n||"*static"==n?this._renderSep(e[h],a):(this.view._ds==-1&&(this.view._ds=h),this.view._de=h,c&&$u.o.assign(e[h],this.defaultValues,!0),this._renderItem(e[h],e[h]["*renderIndex"],h,a));if("dynamic"==this.view.type){if(this.view._e!=e.length-1){var u=document.createElement("div");u.id=this.contId+".NEXT",u.className=this.view.navigation.next.className,u.innerHTML=this.view.navigation.next.html,$sa(u,"a5-item","*next"),a.appendChild(u),$(this.contId+".CONTENT.FOOTER").style.display="none",this.state.view.hasNext=!0}else this.content.footer.show&&($(this.contId+".CONTENT.FOOTER").style.display="");
this.onNavigate.constructor==Function&&this.onNavigate.call(this,this.view._s,this.view._e)}else this.onNavigate.constructor==Function&&this._navEvnt();if(this.onListDraw.constructor==Function&&this.onListDraw.call(this,e,t),this.group.navigator.show&&"view-nav"!=s){var f=$(this.contId+".GROUPNAV");if("left"==this.group.navigator.location||"right"==this.group.navigator.location?f.innerHTML="<div>"+this._groups.join("</div><div>")+"</div>":f.innerHTML='<div style="display: inline-block;">'+this._groups.join('</div>&nbsp;<div style="display: inline-block;">')+"</div>",f.style.position="absolute",f.style.top="",f.style.left="",f.style.right="",f.style.bottom="",f.style[this.group.navigator.location]=this.group.navigator.offset+"px",0==this._groups.length)f.style.display="none";else{if(f.style.display="",this.group.navigator._trans="","left"==this.group.navigator.location||"right"==this.group.navigator.location){f.style.top="50%";var p=$(this.contId+".CONTENTWRAPPER");f.style.marginTop=p.offsetTop/2-Math.round(f.offsetHeight/2)+"px",f.offsetWidth>this.group.navigator.size&&this.group.navigator.size>0&&("right"==this.group.navigator.location?A5.u.drag._w[this.contId+".GROUPNAV"].c._trans=A5.u.css.transform2D(f.offsetWidth-this.group.navigator.size+"px","0px"):A5.u.drag._w[this.contId+".GROUPNAV"].c._trans=A5.u.css.transform2D("-"+(f.offsetWidth-this.group.navigator.size)+"px","0px"))}else f.style.left="50%",f.style.marginLeft=Math.round(f.offsetWidth/2)+"px",f.offsetHeight>this.group.navigator.size&&this.group.navigator.size>0&&("bottom"==this.group.navigator.location?A5.u.drag._w[this.contId+".GROUPNAV"].c._trans=A5.u.css.transform2D("0px",f.offsetHeight-this.group.navigator.size+"px"):A5.u.drag._w[this.contId+".GROUPNAV"].c._trans=A5.u.css.transform2D("0px","-"+(f.offsetHeight-this.group.navigator.size)+"px"));f.style[A5.u.css.properties.transformDOM]=A5.u.drag._w[this.contId+".GROUPNAV"].c._trans}A5.u.drag._w[this.contId+".GROUPNAV"].c.groups=this._groups.length-1}},_renderItem:function(e,t,i,s){var a="",n=this._template;if(this._tempIsDyn)var n=A5.u.template.parse(n(e));if(this._hasOBIDEvnt){var o={};$u.o.assign(o,e),this.onBeforeItemDraw.call(this,o,t),a=this._fillTemplate(n,o)}else a=this._fillTemplate(n,e);a=a.split("{*row}").join(i),a=a.split("{*dataRow}").join(t),a=a.split("{*dataRowOneBased}").join(t+1),this._renderItemLow(a,t,s,e)},_fillTemplate:function(e,t){var i=A5.u.template.expand(t,{template:e,nullHTML:this.data.nullHTML});return e.html=[],i=i.split("{*key}").join(t["*key"])},_renderSimpleItem:function(e,t,i,s){this._hasOBIDEvnt&&this.onBeforeItemDraw.call(this,e,t),this._renderItemLow(e.toString(),t,s,e)},_renderItemLow:function(e,t,i,s){var a=document.createElement("div");if(a.id=this.contId+"."+t,a.innerHTML=e,a.className=this._gDef(this._curLObj.item.className,this.item.className)+" "+$if("column"==this._curL,this._cssSelP+"W",this._cssSelP+"DIS"),$u.a.find(this.selectionKey,s["*key"])!=-1&&$acn(a,this._gDef(this._curLObj.item.selectedClassName,this.item.selectedClassName)),"object"!=typeof this.item.style&&"string"!=typeof this.item.style&&"object"!=typeof this._curLObj.item.style&&"string"!=typeof this._curLObj.item.style||$ss(a,this._gDef(this._curLObj.item.style,this.item.style)),0!=this._ioStyle&&$ss(a,this._ioStyle),$sa(a,"a5-item",""+t),!A5.flags.isMobile&&(""!=this.item.hoverClassName||""!=this._curLObj.item.hoverClassName)){var n="LISTBOX."+this.contId;$e.add(a,"mouseover",Function("$acn(this,'"+this._gDef(this._curLObj.item.hoverClassName,this.item.hoverClassName)+"');"),!1,!1,n),$e.add(a,"mouseout",Function("$rcn(this,'"+this._gDef(this._curLObj.item.hoverClassName,this.item.hoverClassName)+"');"),!1,!1,n)}i.appendChild(a),this._hasOIDEvnt&&this.onItemDraw.call(this,a,s,t)},_renderSep:function(e,t){if("-"==e){var i=document.createElement("hr");i.className=this._gDef(this._curLObj.item.separatorClassName,this.item.separatorClassName)}else if("undefined"!=typeof e["*title"]){var i=document.createElement("div");i.className=this._gDef(e.className,this._curLObj.item.titleClassName,this.item.titleClassName),i.innerHTML=e["*title"],$sa(i,"A5IsListTitle","true")}else if("undefined"!=typeof e["*static"]){var i=document.createElement("div");i.className=this._gDef(e.className,this._curLObj.item.className,this.item.className),i.innerHTML=e["*static"]}"column"==this._curL&&(i.className=i.className+" "+this._cssSelP+"W"),i.style.clear="both",t.appendChild(i)},_getStrData:function(e){if("string"==typeof e)return e;if("object"==typeof e){if("undefined"!=typeof e["*title"])return"*title";if("undefined"!=typeof e["*static"])return"*static"}return""},_isData:function(e){return"-"!=e&&("object"!=typeof e||"undefined"==typeof e["*title"]&&"undefined"==typeof e["*static"])},_selectItem:function(e){if(this.disabled||this.readOnly)return!1;var t="undefined"!=typeof arguments[1]&&arguments[1],i="undefined"==typeof arguments[2]||arguments[2];if(this.onBeforeSelect.constructor==Function&&i){var s=this.onBeforeSelect(e);if("boolean"!=typeof s&&(s=!0),!s)return!1}var a=e!=-1;if(this.multiple&&(this._keyWatch.ctrl||this._keyWatch.shift||t||"additive"==this.selectionMode)){for(var n=0;n<this.selection.length;n++)if(this.selection[n]==e){this.selection.splice(n,1),this.selectionData.splice(n,1),this.selectionKey.splice(n,1),this.value.splice(n,1),$rcn(this.contId+"."+e,this._gDef(this._curLObj.item.selectedClassName,this.item.selectedClassName)),a=!1;break}}else this.allowNullDeselection&&1==this.selection.length&&this.selection[0]==e&&(a=!1),this._deselectAll();a||!this.allowNullSelection&&0==this.selection.length?(this.value.push(this._values[e]),this.selection.push(e),"number"==typeof this._dataMap[e]?(this.selectionData.push(this._data[this._dataMap[e]]),this.selectionKey.push(this._dataMap[e])):(this.selectionData.push(),this.selectionKey.push(this._values[e])),$acn(this.contId+"."+e,this._gDef(this._curLObj.item.selectedClassName,this.item.selectedClassName)),t||this.scrollToItem(e),""!=this.inputId&&($(this.inputId).value=this.value.join(this.separator),i&&$e.execute(this.inputId,"change")),this.onSelect.constructor==Function&&i&&this.onSelect(e)):""!=this.inputId&&($(this.inputId).value=this.value.join(this.separator),i&&$e.execute(this.inputId,"change"))},_deselectAll:function(){var e="undefined"!=typeof arguments[0]&&arguments[0];if(!e){if(this.disabled)return!1;for(var t=0;t<this.selection.length;t++)$rcn(this.contId+"."+this.selection[t],this._gDef(this._curLObj.item.selectedClassName,this.item.selectedClassName))}this.value=new Array,this.selection=new Array,this.selectionData=new Array,this.selectionKey=new Array},_resize:function(){var e="boolean"==typeof arguments[0]&&arguments[0];"template"==this._curL||"template-flow"==this._curL||"template-horizontal"==this._curL?("fill"==this._curLObj.item.width.substr(0,4).toLowerCase()||"fill"==this._curLObj.item.height.substr(0,4).toLowerCase()||e)&&this._size():"column"==this._curL&&(0!=this._curLObj._fTotal||e)&&this._size();var t=$(this.contId),i=$(this.contId+".CONTENTWRAPPER"),s=A5.u.element.getScroll(i);if(A5.u.element.setScroll(i,s.left,s.top),""!=t.style.height||""!=t.style.maxHeight||"absolute"==t.style.position&&""!=t.style.top&&""!=t.style.bottom){var a=$(this.contId+".HEADER"),n=$(this.contId+".FOOTER"),o=$(this.contId+".CHEADER");if(i.style.height="",""==t.style.height&&""!=t.style.maxHeight)var r=A5.u.convertUnits(t.style.maxHeight,"px");else var r=t.clientHeight;a&&(r-=a.offsetHeight),n&&(r-=n.offsetHeight),o&&(r-=o.offsetHeight),""==t.style.height&&(r=Math.min(r,i.scrollHeight)),i.style.height=r+"px"}else $(this.contId+".CONTENTWRAPPER").style.height=""},_size:function(){var e=$(this.contId);if("template"==this._curL||"template-flow"==this._curL||"template-horizontal"==this._curL){var t=!1,i=!1,s="",a=!1;"fill"==this._curLObj.item.width.substr(0,4).toLowerCase()?(a=!0,t=e.offsetWidth-this._hPad-A5.u.convertUnits(this._curLObj.item.width.substr(5),"px")+"px"):""!=this._curLObj.item.width&&(t=this._curLObj.item.width),"fill"==this._curLObj.item.height.substr(0,4).toLowerCase()?(a=!0,i=e.offsetHeight-this._vPad-A5.u.convertUnits(this._curLObj.item.height.substr(5),"px")+"px"):""!=this._curLObj.item.height&&(i=this._curLObj.item.height),a&&(s="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"),t&&(s=s+"width: "+t+";"),i&&(s=s+"height: "+i+";"),A5.u.css.setSelector("."+this._cssSelP+"DIS",s),A5.u.css.deleteSelector("."+this._cssSelP+"W")}else if("column"==this._curL){var n=$(this.contId+".CHEADER.GROUP"),o=($(this.contId+".CONTENT.HEADER"),$(this.contId+".CONTENT.FOOTER"),$(this.contId+".CONTENT"));if(0!=this._curLObj._fTotal){var r=o.offsetWidth-this._clftWidthDif;if(r>this._curLObj._wTotal)for(var l=r-this._curLObj._wTotal,d=0;d<this._curLObj.columns.length;d++)cObj=this._curLObj.columns[d],0!=cObj._f&&(cObj._w=Math.round(l*(cObj._f/this._curLObj._fTotal)-.49)+"px")}this._clfWidth=0;for(var d=0;d<this._curLObj.columns.length;d++)cObj=this._curLObj.columns[d],A5.u.css.setSelector("."+this._cssSelP+"C"+d,"width: "+cObj._w+";"),this._clfWidth+=A5.u.convertUnits(cObj._w,"px");this._clfWidth+=1,this._clfFlex?A5.u.css.deleteSelector("."+this._cssSelP+"W"):A5.u.css.setSelector("."+this._cssSelP+"W","width: "+this._clfWidth+"px;"),n.style.width=this._clfWidth+o.offsetWidth+"px"}},_colResize:function(){var e=A5.u.drag._w[this.contId+".CHEADER"].c.m;"before"==this.columnLayout.header.item.resize.location&&(e*=-1);var t=A5.u.drag._w[this.contId+".CHEADER"].c.indx,i=this._curLObj.columns[t],s=$(this.contId+".CHEADER."+t).offsetWidth;if(0==i._f){var a=Math.max(10,s+e);i._w=a+"px",i.width=a+"px"}else if(i._f!=this._curLObj._fTotal){var n=$u.n.round(i._f/s*(s+e),2);this._curLObj._fTotal=this._curLObj._fTotal+n-i._f,i._f=n,i.width="flex("+n+")"}this._size()},_scrollerEvnt:function(){this._scr._a=!0,this.scrollToItem(this._scr.value,{mode:"top"}),this._scr._a=!1},_viewNavEvnt:function(e,t){A5.u.drag.setDisabled(this.id+".CONTENTWRAPPER","scroll",!1,!1),t._viewNav($ga(this,"a5listnavdir"))},_viewNav:function(e){var t=$(this.contId+".CONTENTWRAPPER"),i=A5.u.element.getScroll(t),s=!1,a=0,n=this._rData[this.view._ds]["*renderIndex"];if("p"==e){if(0==this.view._s)return!1;s=$(this.contId+"."+n),this.view._s=Math.max(0,this.view._s-this.view.size+this.view.offset),this.view._e=this.view._s+this.view.size}else if("n"==e){if(this.view._e>=this._rData.length-1)return!1;n=this._rData[this.view._de]["*renderIndex"],s=$(this.contId+"."+n),this.view._s=Math.min(Math.max(0,this.view._e-this.view.offset),this._rData.length-this.view.size),this.view._e=this.view._s+this.view.size}else{if("goto"!=e)return!1;var o=arguments[1];if(""!=this._tempalte)for(var r=o;r<this._rData.length;r++)if(this._isData(this._rData[r])&&this._rData[r]["*renderIndex"]>=o){o=r;break}this.view._s=Math.min(Math.max(0,o-this.view.offset),this._rData.length-this.view.size),this.view._e=this.view._s+this.view.size}"goto"!=e&&(a="template-horizontal"==this._curL?s.offsetLeft-i.left:s.offsetTop-i.top),$(this.contId+".CONTENT").innerHTML="",this._renderData(this._rData,0,0,"view-nav"),"goto"!=e&&(s=$(this.contId+"."+n),"template-horizontal"==this._curL?A5.u.element.setScroll(t,s.offsetLeft-a,i.top):A5.u.element.setScroll(t,i.left,s.offsetTop-a)),this.scroller.show&&(this._scr._a||(this.view._e==this._rData.length-1?this._scr.setValue(this._rData[this.view._de]["*renderIndex"],!1):this._scr.setValue(this._rData[this.view._ds]["*renderIndex"],!1),this._scr._sShd()))},_keyPrevItem:function(){if(this.disabled)return!1;var e="undefined"==typeof arguments[0]||arguments[0];if(this.onBeforeSelect.constructor==Function&&e){var t=this.onBeforeSelect();if("boolean"!=typeof t&&(t=!0),!t)return!1}if(oldIndx=this.selection[this.selection.length-1],"undefined"!=typeof oldIndx){if(oldIndx>0)oldIndx-=1,oldIndx<this._rData[this.view._ds]["*renderIndex"]&&("dynamic"==this.view.type||"page"==this.view.type)?(this._viewNav("p"),this._selectItem(oldIndx)):this._selectItem(oldIndx);else if(this.loopNavigate)if("dynamic"!=this.view.type&&"page"!=this.view.type||this._viewNav("l"),this.loopNavigateNullSelection&&this.allowNullSelection){if(this.onBeforeSelect.constructor==Function&&e){var t=this.onBeforeSelect(-1);if("boolean"!=typeof t&&(t=!0),!t)return!1}this._deselectAll(),this.onSelect.constructor==Function&&e&&this.onSelect(-1)}else this._selectItem(this._values.length-1)}else"dynamic"!=this.view.type&&"page"!=this.view.type||(this.loopNavigate?this._viewNav("l"):this._viewNav("f")),this.loopNavigate?this._selectItem(this._values.length-1):this._selectItem(0)},_keyNextItem:function(){if(this.disabled)return!1;var e="undefined"==typeof arguments[0]||arguments[0];if(this.onBeforeSelect.constructor==Function&&e){var t=this.onBeforeSelect();if("boolean"!=typeof t&&(t=!0),!t)return!1}if(oldIndx=this.selection[this.selection.length-1],"undefined"!=typeof oldIndx){if(oldIndx<this._values.length-1)oldIndx+=1,oldIndx>this._rData[this.view._de]["*renderIndex"]&&("dynamic"==this.view.type||"page"==this.view.type)?(this._viewNav("n"),this._selectItem(oldIndx)):this._selectItem(oldIndx);else if(this.loopNavigate)if("dynamic"!=this.view.type&&"page"!=this.view.type||this._viewNav("f"),this.loopNavigateNullSelection&&this.allowNullSelection){if(this.onBeforeSelect.constructor==Function&&e){var t=this.onBeforeSelect(-1);if("boolean"!=typeof t&&(t=!0),!t)return!1}this._deselectAll(),this.onSelect.constructor==Function&&e&&this.onSelect(-1)}else this._selectItem(0)}else"dynamic"!=this.view.type&&"page"!=this.view.type||this._viewNav("f"),this._selectItem(0)},_keyFirstItem:function(){return!this.disabled&&void("dynamic"==this.view.type||"page"==this.view.type?this._viewNav("f"):this._selectItem(0))},_keyLastItem:function(){return!this.disabled&&void("dynamic"==this.view.type||"page"==this.view.type?this._viewNav("f"):this._selectItem(this._values.length-1))},_keyEnter:function(){return!this.disabled&&(this.onClick.constructor==Function&&this.onClick(),void(this.onDblClick.constructor==Function&&this.onDblClick()))},_onClick:function(e){if(A5.u.drag._sDif>=$e.abstractEvents.click.scrollMax)return!1;if(this.disabled)return!1;var t=this.indexFromEvent(e),i={};if(this._custItem&&(i=this._gCustItem(this._custItem)),"number"==typeof t&&t!=-1&&(0==this._hasFocus&&this._focus(e),$(this.contId+".FOCUSCATCHER").focus()),this._keyWatch.shift=!1,this._keyWatch.ctrl=!1,"undefined"!=typeof e.shiftKey&&(this._keyWatch.shift=e.shiftKey,this._keyWatch.ctrl=e.ctrlKey),t>-1)"undefined"==typeof i.selectable&&(i.selectable=!0),i.selectable&&(this._selectItem(t),this.onClick.constructor==Function&&this.onClick(t,this._values[t])),"function"==typeof i.onClick&&i.onClick.call(this,t,this._values[t],i._args);else if("*prev"==t)this._viewNav("p");else if("*next"==t)this._viewNav("n");else if("*col:"==String(t).substr(0,5)){var s=Number(t.substr(5)),a=this._curLObj.columns[s];if(a.header.onClick.constructor==Function&&a.header.onClick.call(this),a.order){var n=!0;if(a.onBeforeOrder.constructor==Function&&(n=a.onBeforeOrder.call(this,s,a)),"boolean"!=typeof n||0!=n){for(var o=this._clOrderCols[s],r=0;r<this._clOrderCols.length;r++)if(this._clOrderCols[r]==o){s=r;break}var l={};l[o]=1,this._clOrderCol==s&&(1==this._clOrderDir?l[o]=-1:l=!1),this.setOrder(l),l||(this._clOrderCol=-1),a.onOrder.constructor==Function&&(n=a.onOrder.call(this,s,a))}}}else if("function"==typeof i.onClick)i.onClick.call(this,!1,"",i._args);else if("*header"==t||"*footer"==t||"*content-header"==t||"*content-footer"==t)return!0;return $e.stopEvent(e),!1},_onDblClick:function(e){if(this.disabled)return!1;var t=this.indexFromEvent(e),i={};if(this._custItem&&(i=this._gCustItem(this._custItem)),t>-1)"function"==typeof this.onDblClick&&this.onDblClick(t,this._values[t]),"function"==typeof i.onDblClick&&i.onDblClick.call(this,t,this._values[t],i._args);else if("*col:"==String(t).substr(0,5)){var s=Number(t.substr(5)),a=this._curLObj.columns[s];a.header.onDblClick.constructor==Function&&a.header.onDblClick.call(this)}else"function"==typeof i.onDblClick&&i.onDblClick.call(this,!1,"",i._args);return $e.stopEvent(e),!1},_rClick:function(e){if(this.disabled)return!1;var t=this.indexFromEvent(e),i={};if(this._custItem&&(i=this._gCustItem(this._custItem)),t>-1)"function"==typeof this.onRightClick&&this.onRightClick(t,this._values[t]),"function"==typeof i.onRightClick&&i.onRightClick.call(this,t,this._values[t],i._args);else if("*col:"==String(t).substr(0,5)){var s=Number(t.substr(5)),a=this._curLObj.columns[s];a.header.onRightClick.constructor==Function&&a.header.onRightClick.call(this)}else"function"==typeof i.onRightClick&&i.onRightClick.call(this,!1,"",i._args);return $e.stopEvent(e),!1},_down:function(e){if(this.disabled)return!1;var t=this.indexFromEvent(e);"*prev"==t?$acn(this.contId+".PREV",this.view.navigation.prev.pressedClassName):"*next"==t&&$acn(this.contId+".NEXT",this.view.navigation.next.pressedClassName)},_scroll:function(e,t){if("dynamic"==t.view.type){if((t.view.maxSize>t.view._e-t.view._s||t.view.maxSize==-1)&&t.state.view.hasNext&&!t._viewAddingItems){var i=A5.u.element.getScroll(this),s=!1;if("template-horizontal"==t._curL?i.width-i.left<2*this.parentNode.offsetWidth&&(s=!0):i.height-i.top<2*this.parentNode.offsetHeight&&(s=!0),s){t._viewAddingItems=!0;var a=t.view._e+1;t.view.maxSize==-1?t.view._e=t.view._e+t.view.size:t.view._e=Math.min(t.view._e+t.view.size,t.view._s+t.view.maxSize),t._renderData(t._rData,a,0,"view-add"),t._viewAddingItems=!1}}}else if("page"!=t.view.type){if(t.scroller.show&&!t._scr._a){var i=A5.u.element.getScroll(this);"template-horizontal"==t._curL?t._scr.setValue(Math.round(1/i.width*i.left*t._scr.max),!1):t._scr.setValue(Math.round(1/i.height*i.top*t._scr.max),!1)}t.onNavigate.constructor==Function&&(clearTimeout(t._cneTO),t._cneTO=setTimeout(Function("$e.execute('"+t.contId+"','a5listnavevent');"),100))}if("column"==t._curL){var n=$(t.contId+".CHEADER");n.scrollLeft=A5.u.element.getScroll(this).left}},_navEvnt:function(){var e=this.indexVisible();this.onNavigate.call(this,e.start,e.end)},indexVisible:function(){var e=$(this.contId+".CONTENTWRAPPER"),t=A5.u.element.getScroll(e),i=0,s=this._dataMap.length-1;if("dynamic"==this.view.type&&(i=this.view._s,s=this.view._e),!("template-horizontal"==this._curL&&t.width<=e.offsetWidth||"template-horizontal"!=this._curL&&t.height<=e.offsetHeight)){var a=Math.round((s-i)/2)+i,n=$(this.contId+"."+a);if("template-horizontal"==this._curL){for(var o=e.offsetWidth,r=n.offsetLeft;r<t.left||r>t.left+o;)r<t.left?i=a:s=a,a=Math.round((s-i)/2)+i,n=$(this.contId+"."+a),r=n.offsetLeft;i=a,s=a;for(var l=n,d=n;l.offsetLeft+d.offsetWidth<t.left+o&&l;)s++,l=$(this.contId+"."+s);for(;d.offsetLeft>t.left&&d;)i--,d=$(this.contId+"."+i)}else{for(var h=e.offsetHeight,c=n.offsetTop;c<t.top||c>t.top+h;)c<t.top?i=a:s=a,a=Math.round((s-i)/2)+i,n=$(this.contId+"."+a),c=n.offsetTop;i=a,s=a;for(var l=n,d=n;l.offsetTop+d.offsetHeight<t.top+h&&l;)s++,l=$(this.contId+"."+s);for(;d.offsetTop>t.top&&d;)i--,d=$(this.contId+"."+i)}i=Math.max(i,0),s=Math.min(s,this._dataMap.length-1)}return{start:i,end:s}},indexFromEvent:function(e){var t=$e.getCoors(e);return this.indexFromPoint(t.clientX,t.clientY)},indexFromPoint:function(e,t){return this.indexFromElement(document.elementFromPoint(e,t))},indexFromElement:function(e){if(!e)return-1;var t=$(this.contId),i="";for(this._custItem=!1;e!=t&&e!=document.body;){if(i=$ga(e,"a5-item"),null!=i){if(""+Number(i)==i)return Number(i);if("*col:"==String(i).substr(0,5)||"*next"==i||"*prev"==i||"*header"==i||"*footer"==i||"*content-header"==i||"*content-footer"==i)return i;this._custItem=i}e=e.parentNode}return-1},indexFromValue:function(e){return this._getIndex(e)},_focus:function(e){return 0==this._hasFocus&&(this._keyWatch.on(),this._hasFocus=!0,$e.executeGroup("A5ControlsFocusCatcher"),$e.removeGroup("A5ControlsFocusCatcher"),$e.add(document.documentElement,A5.d.evnts.up,this._blur,this,!0,"A5ControlsFocusCatcher"),""!=this.focusClassName&&$acn($(this.contId),this.focusClassName),this.onFocus.constructor==Function&&this.onFocus()),$e.stopEvent(e),!1},_blur:function(){this._hasFocus=!1,this._keyWatch.off(),""!=this.focusClassName&&$rcn($(this.contId),this.focusClassName),$e.remove(document.documentElement,A5.d.evnts.up,this._blur),this.onBlur.constructor==Function&&this.onBlur()},_swapList:function(e){if(!A5.u.css.supportsTransition)return!0;var t=$(this.contId),i=$(this.contId+".CONTENTWRAPPER");$(this.contId+".CONTENTWRAPPERTEMP")&&t.removeChild($(this.contId+".CONTENTWRAPPERTEMP"));var s=i.cloneNode(!0);s.id=this.contId+".CONTENTWRAPPERTEMP",$ss(s,{position:"absolute",width:t.clientWidth+"px",top:i.offsetTop+"px"}),t.appendChild(s),s.scrollTop=i.scrollTop,s.scrollLeft=i.scrollLeft;var a=this.animation.swap.duration;"object"==typeof e&&(a=e.duration,e=e.type),"prev"==e?e="rtl"==this.animation.swap.flow?"slide-right":"slide-left":"next"==e&&(e="rtl"==this.animation.swap.flow?"slide-left":"slide-right");var n=1;"slide-left"==e&&(n=-1);var o=A5.u.css.properties.transitionDOM,r=A5.u.css.properties.transformDOM;i.style[r]="translate("+n+"00%,0px)",i.offsetHeight;var l=A5.u.css.properties.transform+" "+a+"ms ease-in-out";i.style[o]=l,s.style[o]=l,i.style[r]="translate(0px,0px)",s.style[r]="translate("+n*-1+"00%,0px)"},_gCustItem:function(e){var t={},i=e.split(":");return e=i.shift(),"object"==typeof this._curLObj.items[e]?t=this._curLObj.items[e]:"object"==typeof this.items[e]&&(t=this.items[e]),t._args=i.join(":"),t},_gDef:function(){for(var e=0;e<arguments.length;e++)if(""!=arguments[e]&&0!=arguments[e]&&null!=arguments[e])return arguments[e];return""},_cDefaults:{header:{html:"",className:"",hoverClassName:"",style:0,onClick:0,onDblClick:0,onRightClick:0},data:{template:"",className:"",style:""},order:!1,onBeforeOrder:0,onOrder:0,width:"flex(1)",resize:!1},_lDefaults:{type:"template",columns:[],template:"",header:"",footer:"",scroll:{},item:{width:"",height:"",className:"",hoverClassName:"",selectedClassName:"",style:!1,titleClassName:"",separatorClassName:""},items:{}},_gDefaults:{order:0,group:0,header:{html:function(e,t){return e}},footer:{show:!1,html:""}}},A5.SpinList=Class.create({initialize:function(e,t,i){this.contId=e,$u.o.assign(this,{theme:"",override:"base",inputId:"",className:"",disabledClassName:"",item:{className:""},height:1,onChange:0,onSelect:0,onBeforePopulate:0,onPopulate:0,disabled:!1,value:""}),"undefined"!=typeof i.theme&&A5.themes.assign(this,i.theme,"spinList"),$u.o.assign(this,i),A5.overrides.assign(this,"spinList",this.override),this._init=!1;var s=$(e);if($acn(s,this.className),$ss(s,$gs(s)+"; position: relative; overflow: hidden; -moz-user-select: -moz-none; -khtml-user-select: none; -webkit-user-select: none; -ms-user-select: none; user-select: none;"),this._pTop=0,!A5.flags.isWebKit&&!A5.flags.isOpera){var a={paddingTop:"",paddingBottom:""};"undefined"!=typeof window.getComputedStyle?a=window.getComputedStyle(s):s.currentStyle&&(a=s.currentStyle),""!=a.paddingTop&&(this._pTop=A5.u.convertUnits(a.paddingTop,"px")*-1)}A5.u.drag.add(e,"custom",{axis:"y",tolerance:10,stopPropagation:!0,sLoc:0,offsetTop:this._pTop,onStart:function(e,t){this.firstChild.style[A5.u.css.properties.transitionDOM]=""},onMove:function(e,t){this.firstChild.style[A5.u.css.properties.transformDOM]=A5.u.css.transform2D("0px",t.sLoc+t.offsetTop+e.customMoveY+"px")},onEnd:function(e,t){if(e.hasMomentum){var i=e.endT-e.startT,a=e.customMoveY/i;t.sLoc=t.sLoc+e.customMoveY+500*a,this.firstChild.style[A5.u.css.properties.transitionDOM]=A5.u.css.properties.transform+" 1000ms ease"}else t.sLoc=t.sLoc+e.customMoveY,this.firstChild.style[A5.u.css.properties.transitionDOM]=A5.u.css.properties.transform+" 600ms ease-out";var n=t.sLoc,o=this.firstChild,r=o.childNodes[0],l=s.offsetHeight/2-r.offsetHeight/2;n=n<l?l-n:(n-l)*-1;var d=Math.round(o.childNodes.length/o.offsetHeight*n);d<0?d=0:d>=o.childNodes.length&&(d=o.childNodes.length-1),r=o.childNodes[d],n=r.offsetTop,n=n<l?l-n:(n-l)*-1,o.style[A5.u.css.properties.transformDOM]=A5.u.css.transform2D("0px",n+t.offsetTop+"px"),t.sLoc=n,$sa(this,"A5SpinListIndex",""+d),$e.execute(this,"a5spinlistselect")}}),$e.add(s,"a5spinlistselect",this._select,this),this.populate(t),this.disabled&&this.setDisabled(!0),this._init=!0},setDisabled:function(e){this.disabled==e&&this._init||(A5.u.drag.setDisabled(this.contId,"custom",e),e?$acn(this.contId,this.disabledClassName):$rcn(this.contId,this.disabledClassName),this.disabled=e)},setValue:function(e){var t="undefined"==typeof arguments[1]||arguments[1],i=$(this.contId);i.firstChild.style[A5.u.css.properties.transitionDOM]="";var s=$u.a.find(this._values,e);if(s!=-1){var a=!1;this.onChange.constructor==Function&&this.value!=e&&(a=!0),this.value=e;var n=this._pTop;this._init||(n=0);var o=i.firstChild,r=o.childNodes[s],l=i.offsetHeight/2-r.offsetHeight/2,d=r.offsetTop;d=d<l?l-d:(d-l)*-1,o.style[A5.u.css.properties.transformDOM]=A5.u.css.transform2D("0px",d+n+"px"),A5.u.drag._w[i.id].c.sLoc=d,$sa(i,"A5SpinListIndex",""+s),""!=this.inputId&&($(this.inputId).value=this.value,t&&$e.execute(this.inputId,"change")),a&&this.onChange(),this.onSelect.constructor==Function&&t&&this.onSelect()}},refresh:function(){var e=$(this.contId);"number"==typeof this.height?e.style.height=e.firstChild.firstChild.offsetHeight*(1+2*this.height)+"px":e.style.height=this.height,$u.a.find(this._values,this.value)==-1&&(this.value=this._values[0]),this.setValue(this.value)},populate:function(e){if(this.onBeforePopulate.constructor==Function){var t=this.onBeforePopulate.call(this,e);if("boolean"==typeof t&&!t)return!1}this._values=[],this._data=[].concat(e);for(var i=["<div>"],s=0;s<e.length;s++)"object"==typeof e[s]?("undefined"==typeof e[s].value&&(e[s].value=e[s].html),"undefined"==typeof e[s].html&&(e[s].html=e[s].value),"undefined"==typeof e[s].className&&(e[s].className=this.item.className),i.push('<div class="'+e[s].className+'">'+e[s].html+"</div>"),this._values.push(e[s].value)):(i.push('<div class="'+this.item.className+'">'+e[s]+"</div>"),this._values.push(e[s]));i.push("</div>");var a=$(this.contId);a.innerHTML=i.join(""),"number"==typeof this.height?a.style.height=a.firstChild.firstChild.offsetHeight*(1+2*this.height)+"px":a.style.height=this.height,$u.a.find(this._values,this.value)==-1&&(this.value=this._values[0]),this.setValue(this.value),this.onPopulate.constructor==Function&&this.onPopulate.call(this,this._data)},_select:function(e,t){var i=Number($ga(this,"A5SpinListIndex")),s=!1;t.onChange.constructor==Function&&t.value!=t._values[i]&&(s=!0),t.value=t._values[i],""!=t.inputId&&($(t.inputId).value=t.value,$e.execute(t.inputId,"change")),s&&t.onChange(),t.onSelect.constructor==Function&&t.onSelect()}}),A5.edit={getSelection:function(e){e.focus();var t=e.value.length,i=t;if(e.setSelectionRange){t=e.selectionStart,i=e.selectionEnd;var s=Math.max(t,i)-Math.min(t,i);t=Math.min(t,i),i=t+s}else if(document.selection&&document.selection.createRange){var a=document.selection.createRange();if(a.collapse(),"textarea"==e.tagName.toLowerCase()){var n=document.body.createTextRange();n.moveToElementText(e)}else var n=e.createTextRange();a.parentElement()==e&&n.setEndPoint("EndToStart",a),t=n.text.replace(/\r/g,"").length;var s=a.text.replace(/\r/g,"").length;i=t+s}return{start:t,end:i,length:s}},setSelection:function(e,t,i){"undefined"==typeof i&&(i=t);var s=Math.min(t,i),a=Math.max(t,i);if(e.setSelectionRange)e.setSelectionRange(s,a);else if(document.selection){var n=e.createTextRange();n.moveStart("character",s),n.collapse(),s!=a&&n.moveEnd("character",a-s),n.select()}}},A5.Edit=Class.create(),A5.Edit.prototype={initialize:function(e){this.override="base","undefined"!=typeof e.theme&&A5.themes.assign(this,e.theme,"edit"),$u.o.assign(this,e),A5.overrides.assign(this,"edit",this.override),this._editPrepare()},create:function(e){var t=document.createElement("input");if("object"==typeof e){"undefined"!=typeof e.className&&(t.className=e.className,delete e.className),"undefined"!=typeof e.style&&($ss(t,e.style),delete e.style);for(var i in e)$sa(t,i,e[i])}return""==t.id&&(t.id=A5.u.getUniqueId()),this._bind(t),t},bind:function(e){if(e.constructor==Array)for(var t=0;t<e.length;t++)this._bind($(e[t]));else this._bind($(e))},_bind:function(e){return"true"==$ga(e,"A5ControlBound")||($e.add(e,"focus",this._focus,this),$e.add(e,"blur",this._blur,this),$e.add(e,"keydown",this._keyDown,this),$e.add(e,"keypress",this._keyPress,this),this._editBind(e),void $sa(e,"A5ControlBound","true"))},setValue:function(e){if("undefined"!=typeof arguments[1]){var t=$(arguments[1]),i=$gvs(t);i!=e&&(this._editBeforeUpdate(t),$svs(t,e),this._editUpdate(t))}else for(var t=0,i="",s=0;s<this._editIds.length;s++){t=$(this._editIds[s]);var i=$gvs(t);i!=e&&(this._editBeforeUpdate(t),$svs(t,e),this._editUpdate(t))}},insertValue:function(e,t){var i=$(this._targetId),s=this._editValSplit(i,!0),a=s.vals[s.selIndx];a.val=e;var n=a.offset+e.length;if(t&&this._multi.auto.separate&&s.selIndx==s.vals.length-1){if(this.multiple.auto.separator.constructor==Function){for(var o=new Array,r=0;r<s.vals.length-1;r++)o.push(s.vals[r].sep);a.sep=this.multiple.auto.separator.call(this,o)}else a.sep=this.multiple.auto.separator;n+=a.sep.length,this.format.showMask&&s.vals.push({val:this.format._pMask.blankValue,sep:"",offset:0})}return i.value=this._editValJoin(s),this.decouple||A5.edit.setSelection(i,n),n},setDisabled:function(e,t){if("undefined"==typeof t&&(t=this._editIds),t.constructor==Array)for(var i=0;i<t.length;i++)$(t[i]).disabled=e;else $(t).disabled=e},setWatermark:function(e){if(this.watermark.text=e,"undefined"!=typeof arguments[1]){var t=$(arguments[1]);this._editClearWatermark(t),this._editSetWatermark(t)}else for(var t=0,i=0;i<this._editIds.length;i++)t=$(this._editIds[i]),this._editClearWatermark(t),this._editSetWatermark(t)},_editPrepare:function(){var e="";"undefined"!=typeof this.watermark&&"undefined"!=typeof this.watermark.style&&(e=this.watermark.style),$u.o.assign(this,{format:{type:"",mask:"",showMask:!1,number:{},parseIn:"string",parseOut:0},watermark:{text:"",className:"",style:"color: gray;"},multiple:{allow:!1,separators:0,auto:{separator:0,persist:!1}}},!0),""!=this.watermark.className&&(this.watermark.style=e),this.format.type=this.format.type.toLowerCase(),this._editTargetId="","custom"==this.format.type?(this.format.parseIn.constructor==Function?this.format._customIn=this.format.parseIn:"number"==this.format.parseIn?this.format._customIn=function(e){return $u.s.toNum(e)}:"boolean"==this.format.parseIn?this.format._customIn=function(e){return $u.s.toBool(e)}:this.format._customIn=function(e){return e.toString()},this.format.parseOut.constructor==Function?this.format._customOut=this.format.parseOut:this.format._customOut=function(e){return e}):"number"==this.format.type&&this.format.number.constructor!=Function?this.format._number=this._editParseNumber(this.format.number):"mask"==this.format.type&&(this.format.mask.constructor!=Function?this.format._pMask=this._editParseMask(this.format.mask):this.format._pMask=this._editParseMask(this.format.mask.call(this))),this._editIds=new Array,this._fakeOnChange=0},_editBind:function(e){var t=""!=e.id?e.id:e.name;this._editIds.push(t),this._editSetWatermark(e)},_editBeforeUpdate:function(e){this._editClearWatermark(e)},_editUpdate:function(e){if(""==e.value||"custom"!=this.format.type&&"mask"!=this.format.type&&"number"!=this.format.type)this._editSetWatermark(e);else{var t=this._editTargetId;this._editTargetId=e.id,this._multi=this._editParseMultiVal();var i=this._editValSplit(e,!1);if("custom"==this.format.type)for(var s=0;s<i.vals.length;s++)i.vals[s].val=this.format._customOut.call(e,this.format._customIn.call(e,i.vals[s].val));else if("number"==this.format.type){if(this.format.number.constructor==Function)var a=this._editParseNumber(this.format.number.call(this));else var a=this.format._number;
var n=e.maxLength;n>500&&(n=-1);for(var s=0;s<i.vals.length;s++)i.vals[s].val=this._editNumberOut(this._editNumberIn(i.vals[s].val,a),a,n)}else if("mask"==this.format.type)for(var o=0;o<i.vals.length;o++){val=i.vals[o].val;var r="",l=0;this.format.mask.constructor==Function?pMask=this._editParseMask(this.format.mask.call(this)):pMask=this.format._pMask;var d=pMask.mask;if(0!=d.length){for(var s=0;s<val.length;s++){for(var h=val.substr(s,1);"string"==typeof d[l]&&d.length>l;)r=r.substr(0,l)+d[l]+r.substr(l+1),d[l]==h&&(s++,h=val.substr(s,1)),l++;for(h.match(d[l])&&(r=r.substr(0,l)+h+r.substr(l+1),l+=1);"string"==typeof d[l]&&d.length>l;)r=r.substr(0,l)+d[l]+r.substr(l+1),d[l]==h&&(s++,h=val.substr(s,1)),l++}i.vals[o].val=r}}this._editTargetId=t,this._multi=this._editParseMultiVal(),e.value=this._editValJoin(i)}},_editParseNumber:function(e){return $u.o.assign(e,{blank:!1,blankValue:0,negative:"-",hasMax:!1,hasMin:!1,max:100,min:0,decimal:".",round:-1,roundDirection:"",comma:"",prefix:"",suffix:"",fill:""},!0),e.negative=e.negative.toLowerCase(),e},_editParseMask:function(e){pMask=new Object,pMask.mask=new Array;for(var t=0;t<e.length;t++)"\\"==e.substr(t,1)?(pMask.mask.push(e.substr(t+1,1)),t++):"L"==e.substr(t,1)?pMask.mask.push(/[A-Z]/):"l"==e.substr(t,1)?pMask.mask.push(/[A-z]/):"#"==e.substr(t,1)?pMask.mask.push(/[0-9\.\-]/):"N"==e.substr(t,1)?pMask.mask.push(/[A-Z0-9\.\-]/):"n"==e.substr(t,1)?pMask.mask.push(/[A-z0-9\.\-]/):"A"==e.substr(t,1)?pMask.mask.push(/[A-Z0-9]/):"a"==e.substr(t,1)?pMask.mask.push(/[A-z0-9]/):"0"==e.substr(t,1)?pMask.mask.push(/[0-9]/):"&"==e.substr(t,1)?pMask.mask.push(/./):pMask.mask.push(e.substr(t,1));pMask.blankValue=new Array;for(var t=0;t<pMask.mask.length;t++)"string"==typeof pMask.mask[t]?pMask.blankValue.push(pMask.mask[t]):pMask.blankValue.push("_");return pMask.blankValue=pMask.blankValue.join(""),pMask},_editParseMultiVal:function(){var e={allow:this.multiple.allow,sep:[],regEx:"",keyBuffer:"",auto:{separate:!1,persist:this.multiple.auto.persist}};if(e.allow){if("string"==typeof this.multiple.separators)e.sep=[this.multiple.separators];else if(this.multiple.separators.constructor==Function)e.sep=this.multiple.separators.call(this),"string"==typeof e.sep&&(e.sep=[e.sep]);else if(this.multiple.separators.constructor==Array)for(var t=0;t<this.multiple.separators.length;t++)e.sep.push(this.multiple.separators[t]);if(0==e.sep.length)e.allow=!1;else{e.sep.sort(function(e,t){return t.length-e.length});for(var i=new Array,t=0;t<e.sep.length;t++)i.push(e.sep[t].replace(/[\\\.\^\$\*\+\?\{\}\[\]\(\)\|]/g,function(e){return"\\"+e}));e.regEx=RegExp(i.join("|"),"g")}("string"==typeof this.multiple.auto.separator&&""!=this.multiple.auto.separator||this.multiple.auto.separator.constructor==Function)&&(e.auto.separate=!0)}return e},_editSetWatermark:function(e){if(("string"==typeof this.watermark.text&&""!=this.watermark.text||this.watermark.text.constructor==Function)&&""==e.value){"password"==e.type&&("undefined"==typeof document.documentElement.style.opacity&&document.all&&"Opera"!=navigator.appName||($sa(e,"A5OriginalType",e.type),e.type="text")),this.watermark.text.constructor==Function?e.value=this.watermark.text.call(this,e):e.value=this.watermark.text,$sa(e,"A5WatermarkText",e.value),""!=this.watermark.className&&$acn(e,this.watermark.className);var t=$gs(e);t=t.split("display:").join("x-display:"),t=t.split("visibility:").join("x-visibility:"),$sa(e,"A5WatermarkOldStyle",t),$ss(e,t+";"+this.watermark.style)}},_editClearWatermark:function(e){if(e.value==$ga(e,"A5WatermarkText")){e.value="";var t=$ga(e,"A5OriginalType");"password"==t&&(e.type=t),""!=this.watermark.className&&$rcn(e,this.watermark.className),$ss(e,$ga(e,"A5WatermarkOldStyle"))}},_editMaskKeyPress:function(e,t,i){var s=0;if(s="number"==typeof e.which?e.which:"number"==typeof e.charCode?e.charCode:e.keyCode,8!=s&&9!=s&&13!=s&&27!=s||(s=0),0!=s&&!e.ctrlKey&&!e.altKey&&0!=i.mask.length){$e.stopEvent(e),this._fakeOnChange!=-1&&(this._fakeOnChange=1);var a=i.mask,n=this._editValSplit(t,!0),o=n.vals[n.selIndx],r=A5.edit.getSelection(t),l=r.start-o.offset;if(l>=a.length&&!this._multi.auto.persist){this._multi.keyBuffer+=String.fromCharCode(s).toLowerCase();for(var d=this._multi.keyBuffer.length,h=new Array,c=0;c<this._multi.sep.length;c++)this._multi.sep[c].substr(0,d).toLowerCase()==this._multi.keyBuffer&&h.push(c);1==h.length?(o.sep=this._multi.sep[h[0]],this.format.showMask&&n.vals.length-1==n.selIndx&&n.vals.push({val:i.blankValue,sep:"",offset:0}),t.value=this._editValJoin(n),A5.edit.setSelection(t,l+o.offset+o.sep.length)):0==h.length&&(this._multi.keyBuffer="")}else{this._multi.keyBuffer="";for(var u=o.val;"string"==typeof a[l]&&a.length>l;)u=u.substr(0,l)+a[l]+u.substr(l+1),l+=1;for(s=String.fromCharCode(s),s.match(a[l])&&(u=u.substr(0,l)+s+u.substr(l+1),l+=1);"string"==typeof a[l]&&a.length>l;)u=u.substr(0,l)+a[l]+u.substr(l+1),l+=1;if(o.val=u,n.selIndx==n.vals.length-1&&l==a.length&&this._multi.auto.separate){if(this.multiple.auto.separator.constructor==Function){for(var f=new Array,c=0;c<n.vals.length-1;c++)f.push(n.vals[c].sep);o.sep=this.multiple.auto.separator.call(this,f)}else o.sep=this.multiple.auto.separator;this.format.showMask&&n.vals.push({val:i.blankValue,sep:"",offset:0}),l+=o.sep.length}t.value=this._editValJoin(n),A5.edit.setSelection(t,l+o.offset)}return!1}},_editMaskKeyDown:function(e,t,i){var s=e.charCode||e.keyCode;if(this.format.showMask&&0!=i.mask.length){if(8==s||46==s){$e.stopEvent(e),this._fakeOnChange!=-1&&(this._fakeOnChange=1);var a=this._editValSplit(t,!0),n=a.vals.length,o=A5.edit.getSelection(t),r=i.blankValue;if(0==o.length){var l=a.vals[a.selIndx],d=o.start-l.offset,h=o.end-l.offset,c=l.val;8==s&&d>0?(c=c.substr(0,d-1)+r.substr(d-1,1)+c.substr(d),o.start--):46==s&&d<c.length&&(c=c.substr(0,d)+r.substr(d,1)+c.substr(d+1),o.start++),c==r&&a.vals.length>1?(delete l,a.vals.splice(a.selIndx,1),a.selIndx==a.vals.length?(a.vals[a.vals.length-1].sep="",46==s&&(o.start=a.vals[a.vals.length-1].offset)):46==s&&(o.start-=r.length)):l.val=c}else for(var u=a.vals.length-1;u>=0;u--)if(a.vals[u].offset>=o.start&&a.vals[u].offset+a.vals[u].val.length<=o.end)a.vals.splice(u,1);else if(a.vals[u].offset<o.start&&a.vals[u].offset+a.vals[u].val.length>o.start||a.vals[u].offset<o.end&&a.vals[u].offset+a.vals[u].val.length>o.end){var d=o.start-a.vals[u].offset,h=o.end-a.vals[u].offset,f=h-Math.max(d,0);a.vals[u].val=a.vals[u].val.substr(0,d)+r.substr(d,f)+a.vals[u].val.substr(h)}if(n!=a.vals.length&&this._multi.auto.persist)if(this.multiple.auto.separator.constructor==Function)for(var p=new Array,u=0;u<a.vals.length-1;u++)a.vals[u].sep=this.multiple.auto.separator.call(this,p),p.push(a.vals[u].sep);else for(var u=0;u<a.vals.length-1;u++)a.vals[u].sep=this.multiple.auto.separator;return t.value=this._editValJoin(a),A5.edit.setSelection(t,o.start),!1}}else 8!=s&&46!=s||(this._fakeOnChange=-1)},_editNumberIn:function(e,t){e=e.toString();var i=!1;t.negative.indexOf("(")!=-1&&e.indexOf("(")!=-1?i=!0:e.indexOf("-")!=-1&&(i=!0);var s=RegExp("[^0-9"+t.decimal+"]");return e=e.split(s).join(""),e=$if(i,"-","")+e.split(s).join(""),e=e.replace(t.decimal,"."),Number(e)},_editNumberOut:function(e,t,i){var s=""!=t.comma,a=e<0,n=t.prefix,o=t.suffix;if(t.round>=0&&(e=$u.n.round(e,t.round,t.roundDirection)),t.blank&&e==t.blankValue)return"";t.hasMax&&(e=Math.min(e,t.max)),t.hasMin&&(e=Math.max(e,t.min)),e=Math.abs(e);var r=String(e),l=$u.s.word(r,1,"."),d=$u.s.word(r,2,".");if(t.round>=0&&(d||(d="0"),d.length!=t.round&&(d=$u.s.pad(d,t.round,"0","r"))),s&&l.length>3){var h=new Array,c=Math.round(l.length/3+.49);l=$u.s.pad(l,3*c,"0","l"),h.push($u.s.lTrim(l.substr(0,3),"0"));for(var u=1;u<c;u++)h.push(l.substr(3*u,3));l=h.join(t.comma)}a&&("p-"==t.negative?n+="-":"-s"==t.negative?o=" -"+o:"s-"==t.negative?o+="-":t.negative.indexOf("(")!=-1?("(p)"==t.negative?n="("+n+")":"(n)"==t.negative||"(ns)"==t.negative?n+="(":n="("+n,"(s)"==t.negative?o=" ("+o+")":"(n)"==t.negative||"(pn)"==t.negative?o=")"+o:o+=")"):n="-"+n);var f=n+l+$if(""!=d,t.decimal+d,"")+o;return""!=t.fill&&i>f.length&&(f=$u.s.pad(f,i,t.fill,"l")),f},_editValSplit:function(e,t){var i=$(e),s=$gvs(i);if(s==$ga(i,"A5WatermarkText")&&(s=""),s=s.replace(/\r/g,""),"undefined"==typeof this._multi&&(this._multi=this._editParseMultiVal()),this._multi.allow){var a={selIndx:0,inSep:!1,sel:{start:s.length,end:s.length,length:0},vals:[]},n=-1,o=0,r="",l="";if(t){if(this.decouple)var d={start:i.value.length,end:i.value.length,length:0};else var d=A5.edit.getSelection(i);var h=s.substr(0,d.start).match(this._multi.regEx);h&&(a.selIndx=h.length),a.sel.start=d.start,a.sel.end=d.end,a.sel.length=d.length}if(0==s.length)a.vals.push({val:"",sep:"",offset:0});else for(;s.length>0;)if(n=s.search(this._multi.regEx),n>-1){r=s.substr(0,n),s=s.substr(n);for(var c=0;c<this._multi.sep.length;c++)if(s.substr(0,this._multi.sep[c].length)==this._multi.sep[c]){l=this._multi.sep[c],s=s.substr(this._multi.sep[c].length);break}a.vals.push({val:r,sep:l,offset:o}),o=o+r.length+l.length}else a.vals.push({val:s,sep:"",offset:o}),o+=r.length,s="";return""!=a.vals[a.vals.length-1].sep&&a.vals.push({val:"",sep:"",offset:o}),a.vals[a.selIndx+1]&&t&&d.start>=a.vals[a.selIndx+1].offset-a.vals[a.selIndx].sep.length&&(a.inSep=!0),a}return{selIndx:0,inSep:!1,sel:{start:s.length,end:s.length,length:0},vals:[{val:s,sep:"",offset:0}]}},_editValJoin:function(e){for(var t=new Array,i=0;i<e.vals.length;i++)t.push(e.vals[i].val),t.push(e.vals[i].sep);return t.join("")},_editFocus:function(e,t){this._editTargetId=t.id;var i=A5.edit.getSelection(t);if(this._editClearWatermark(t),this._fakeOnChange=0,this._multi=this._editParseMultiVal(),"mask"==this.format.type){if(this.format.mask.constructor==Function&&(this.format._pMask=this._editParseMask(this.format.mask.call(this))),"mask"==this.format.type&&this.format.showMask){for(var s=this._editValSplit(t,!0),a=0;a<s.vals.length;a++)""==s.vals[a].val&&(s.vals[a].val=this.format._pMask.blankValue);t.value=this._editValJoin(s),A5.edit.setSelection(t,i.start)}}else if("number"==this.format.type){this.format.number.constructor==Function&&(this.format._number=this._editParseNumber(this.format.number.call(this)));for(var s=this._editValSplit(t,!0),n=0,a=0;a<s.vals.length;a++)s.vals[a].oldOffset=s.vals[a].offset,s.vals[a].offset-=n,s.vals[a].oldVal=s.vals[a].val,s.vals[a].val=String(this._editNumberIn(s.vals[a].val,this.format._number)).split(".").join(this.format._number.decimal),0==s.vals[a].val&&s.vals.length-1==a&&(s.vals[a].val=""),n+=s.vals[a].oldVal.length-s.vals[a].val.length;t.value=this._editValJoin(s),i.start=s.vals[s.selIndx].offset+String(this._editNumberIn(s.vals[s.selIndx].oldVal.substr(0,i.start-s.vals[s.selIndx].oldOffset),this.format._number)).length,A5.edit.setSelection(t,i.start)}},_editBlur:function(e,t){if("undefined"==typeof this._multi&&(this._multi=this._editParseMultiVal()),"custom"==this.format.type){for(var i=this._editValSplit(t,!1),s=0;s<i.vals.length;s++)i.vals[s].val=this.format._customIn.call(t,i.vals[s].val),i.vals[s].val=this.format._customOut.call(t,i.vals[s].val);t.value=this._editValJoin(i)}else if("number"==this.format.type){var a=t.maxLength;a>500&&(a=-1);for(var i=this._editValSplit(t,!1),s=0;s<i.vals.length;s++)i.vals[s].val=this._editNumberOut(this._editNumberIn(i.vals[s].val,this.format._number),this.format._number,a);t.value=this._editValJoin(i)}else if("mask"==this.format.type&&this.format.showMask){for(var i=this._editValSplit(t,!1),s=0;s<i.vals.length;s++)i.vals[s].val==this.format._pMask.blankValue&&(i.vals[s].val="");t.value=this._editValJoin(i)}"mask"==this.format.type&&1==this._fakeOnChange&&$e.execute(t,"change"),this._editSetWatermark(t)},_editKeyDown:function(e,t){"mask"==this.format.type&&this._editMaskKeyDown(e,t,this.format._pMask)},_editKeyPress:function(e,t){"mask"==this.format.type&&this._editMaskKeyPress(e,t,this.format._pMask)},_focus:function(e,t){t._editFocus(e,this)},_blur:function(e,t){t._editBlur(e,this)},_keyDown:function(e,t){t._editKeyDown(e,this)},_keyPress:function(e,t){t._editKeyPress(e,this)}},A5.EditSuggest=Class.create(A5.Edit,{initialize:function(e){if($u.o.assign(this,{theme:"",override:"base",content:{type:"",url:"",data:""},minimum:1,delay:100,selectionRequired:!1,container:{className:"",hoverClassName:"",focusClassName:"",pressedClassName:"",style:0,editClassName:"",separatorClassName:"",button:{html:"",className:"",hoverClassName:"",pressedClassName:""}},listbox:{theme:""},window:{theme:"",type:"popup",location:"dropdown"},onSelect:0,onNoSelect:0}),"undefined"!=typeof e.theme){A5.themes.assign(this,e.theme,"editButtonGroup");var t=e.theme.split(":").shift();""==this.window.theme&&(this.window.theme=t+":dropdown"),""==this.listbox.theme&&(this.listbox.theme=t+":dropdown")}$u.o.assign(this,e),A5.overrides.assign(this,"editSuggest",this.override),this.content.type=this.content.type.toLowerCase(),""==this.content.type&&""!=this.content.url?this.content.type="url":""==this.content.type&&this.content.data.constructor==Function?this.content.type="url":""!=this.content.type||this.content.data.constructor!=Array&&""==this.content.data||(this.content.type="static"),$u.o.assign(this.window,{header:{},tbar:{},bbar:{},footer:{},title:{show:!1},body:{content:{type:"blank"},style:{padding:"0px",overflow:"auto"}},_nsTO:0,_hasFocus:!1,onShow:function(){clearTimeout(this._nsTO),clearTimeout(this._bcTO)},onHide:function(){this._hasFocus||(this._bcTO=setTimeout(Function("$e.execute('"+this._targetId+"','a5blurcomplete');"),100));$(this._targetId);this._makeSelection||this._hasFocus||(this._nsTO=setTimeout(Function("$e.execute('"+this._targetId+"','a5noselect');"),100)),this._makeSelection=!1},autoShow:!1,autoPosition:!1}),$u.o.assign(this.listbox,{loopNavigate:!0,onClick:function(){var e=$(this._targetId);e.focus(),$e.execute(e,"a5listselection")}});var i=new A5.Window(this.window);this._listbox=new A5.ListBox(i.getWindowId("body"),[],this.listbox),this._listbox._window=i,this._listbox.calculateValue.constructor!=Function&&(this._listbox.calculateValue=function(e){return e}),this._editPrepare(),this._value="",this._hasFocus=!1,this._delayTO=0,this._oldIPoint=0},bind:function(e){if(e.constructor==Array)for(var t=0;t<e.length;t++)this._bind($(e[t]));else this._bind($(e))},valueInList:function(e){return this._listbox.valueInList(e)},_bind:function(e){if("true"==$ga(e,"A5ControlBound"))return!0;var t=e.id,i=$(t+".CONTAINER");if(i)for(var s=0,a=0;$(t+".CUSTOMBUTTON."+s);)a=$(t+".CUSTOMBUTTON."+s),$e.add(a,A5.d.evnts.down,Function("$acn(this,'"+this.container.button.pressedClassName+"')")),A5.flags.isMobile||($e.add(a,"mouseover",Function("$acn('"+t+".CONTAINER','"+this.container.hoverClassName+"'); $acn(this,'"+this.container.button.hoverClassName+"')")),$e.add(a,"mouseout",Function("$rcn('"+t+".CONTAINER','"+this.container.hoverClassName+"'); $rcn(this,'"+this.container.button.hoverClassName+"'); $rcn(this,'"+this.container.button.pressedClassName+"')"))),$e.add(a,A5.d.evnts.up,Function("$rcn(this,'"+this.container.button.pressedClassName+"')")),s+=1;$e.add(e,"focus",this._focus,this),$e.add(e,"blur",this._blur,this),$e.add(e,"keydown",this._keyDown,this),$e.add(e,"keyup",this._keyUp,this,!0),$e.add(e,"keypress",this._keyPress,this),$e.add(e,A5.d.evnts.click,this._onClick,this),$e.add(e,"a5listselection",this._listSelection,this),$e.add(e,"a5noselect",this._noSelect,this),$e.add(e,"a5blurcomplete",this._blurComp,this),this._editBind(e),$sa(e,"A5ControlBound","true")},_focus:function(e,t){if(t._hasFocus=!0,t._listbox._window._hasFocus=!0,t._editFocus(e,this),clearTimeout(t._listbox._window._bcTO),t._targetId!=this.id){var i=A5.edit.getSelection(this);t._oldIPoint=i.start,t._initValue=$gvs(this),t._targetId=this.id,t._listbox._targetId=this.id,t._listbox._window._targetId=this.id}else clearTimeout(t._listbox._window._nsTO);var s=$(t._targetId+".CONTAINER");s&&""!=t.container.focusClassName&&$acn(s,t.container.focusClassName)},_blur:function(e,t){if(t.selectionRequired){for(var i=$(t._targetId),s=t._editValSplit(i,!1),a=t._multi.allow?t._initValue.split(t._multi.regEx):[t._initValue],n=!0,o=s.vals.length-1;o>=0;o--){if(n=!0,""!=s.vals[o].val)for(var r=0;r<a.length;r++)if(a[r]==s.vals[o].val){n=!1;break}n&&s.vals.splice(o,1)}if(t._multi.auto.separate&&t._multi.auto.persist)if(t.multiple.auto.separator.constructor==Function)for(var l=new Array,o=0;o<s.vals.length-1;o++)s.vals[o].sep=t.multiple.auto.separator.call(t,l),l.push(s.vals[o].sep);else for(var o=0;o<s.vals.length-1;o++)s.vals[o].sep=t.multiple.auto.separator;s=t._editValJoin(s),$gvs(i)!=s&&(i.value=s)}t._listbox._window.hidden&&this.value!=t._initValue&&(t._listbox._window._nsTO=setTimeout(Function("$e.execute('"+this.id+"','a5noselect');"),100)),t._listbox._window._hasFocus=!1,t._hasFocus=!1,t._editBlur(e,this);var d=$(t._targetId+".CONTAINER");d&&""!=t.container.focusClassName&&t._listbox._window.hidden&&$rcn(d,t.container.focusClassName),t._listbox._window._bcTO=setTimeout(Function("$e.execute('"+this.id+"','a5blurcomplete');"),100)},_blurComp:function(e,t){t._listbox._window.hidden&&(t._targetId="",t._listbox._targetId="",t._listbox._window._targetId="")},_keyDown:function(e,t){t._editKeyDown(e,this);var i=e.charCode||e.keyCode;return 13!=i&&9!=i||t._listbox._window.hidden?(36==i||35==i)&&!t._listbox._window.hidden&&t._listbox.value.length>0?($e.stopEvent(e),36==i?t._listbox.navigate("home"):t._listbox.navigate("end"),0!=t._listbox.value.length?t._setValue(t._listbox.value[0],!1):t._setValue(t._value,!1),!1):void(38!=i&&40!=i||$e.stopPropagation(e)):($e.stopEvent(e),t._listSelection(e,t),!1)},_keyUp:function(e){var t=e.charCode||e.keyCode,i=[9,13,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,112,113,114,115,116,117,118,119,120,121,122,123];if(38!=t||this._listbox._window.hidden)if(40!=t||this._listbox._window.hidden){if(36==t||35==t||37==t||39==t){var s=A5.edit.getSelection($(this._targetId));this._oldIPoint=s.start}else if(27==t)this._listbox._window.hide();else if($u.a.find(i,t)==-1){var s=A5.edit.getSelection($(this._targetId));this._oldIPoint=s.start,this.delay>0?(clearTimeout(this._delayTO),classInst=this,this._delayTO=setTimeout(function(){classInst._getListComplete(),delete classInst},this.delay)):this._getListComplete()}}else this._listbox.navigate("next"),0!=this._listbox.value.length?this._setValue(this._listbox.value[0],!1):this._setValue(this._value,!1);else this._listbox.navigate("prev"),0!=this._listbox.value.length?this._setValue(this._listbox.value[0],!1):this._setValue(this._value,!1)},_onClick:function(e,t){var i=A5.edit.getSelection(this);t._oldIPoint=i.start},_listSelection:function(e,t){if(0!=t._listbox.value.length){var i=$(t._targetId);A5.edit.setSelection(i,t._oldIPoint),t._setValue(t._listbox.value[0],!0),t._initValue=i.value,t.onSelect.constructor==Function&&t.onSelect.call(i,t._listbox._data[t._listbox.selection[0]],t),t._listbox.setValue("")}t._listbox._window._makeSelection=!0,t._listbox._window.hide()},_noSelect:function(e,t){clearTimeout(t._listbox._window._nsTO),t._targetId="",t._listbox._targetId="",t._listbox._window._targetId="",t.onNoSelect.constructor==Function&&t.onNoSelect.call(this,t)},_setValue:function(e,t){var i=$(this._targetId),s=this._editValSplit(i,!0),a=s.vals[s.selIndx];a.val=e;var n=a.offset+e.length;if(t&&this._multi.auto.separate&&s.selIndx==s.vals.length-1){if(this.multiple.auto.separator.constructor==Function){for(var o=new Array,r=0;r<s.vals.length-1;r++)o.push(s.vals[r].sep);a.sep=this.multiple.auto.separator.call(this,o)}else a.sep=this.multiple.auto.separator;n+=a.sep.length,this.format.showMask&&s.vals.push({val:this.format._pMask.blankValue,sep:"",offset:0})}i.value=this._editValJoin(s),this._oldIPoint=n,A5.edit.setSelection(i,n)},_getListComplete:function(){var e=$(this._targetId),t=this._editValSplit(e,!0);if(this._value=t.vals[t.selIndx].val,this._value.length<this.minimum)return this._listbox._window.hide(),"";if("dynamic"==this.content.type&&this.content.data.constructor==Function){var i=this.content.data.call(this,this._value);"undefined"!=typeof i&&i.constructor==Array&&this.populateList(i)}else if("static"==this.content.type){var t=new Array;t=this.content.data.constructor==Array?this.content.data:this.content.data.split("\n");for(var s=this._value.toLowerCase(),a=s.length,i=new Array,n=0;n<t.length;n++)s==this._listbox.calculateValue(t[n]).substr(0,a).toLowerCase()&&(i[i.length]=t[n]);this.populateList(i)}else if("url"==this.content.type){var o="";o=this.content.data.constructor==Function?this.content.data.call(this,e):this.content.data,""!=o&&(o+="&"),o=o+A5.ajax.buildURLParam($if(""==e.name,e.id,e.name),this._value)+"&"+A5.ajax.buildURLParam("A5EditSuggestId",$if(""==e.id,e.name,e.id)),A5.ajax.callback(this.content.url,o)}},populateList:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:this._targetId;if(t!=this._targetId&&""!=t||!this._hasFocus)return!1;if(e.length>0){this._listbox.populate(e),this._listbox.setValue(""),this._listbox._window.hidden||this._listbox._window.hide();var i=$(this._targetId+".CONTAINER");A5.u.element.setScroll(this._listbox._window.getWindowId("body"),0,0);var s=this._editValSplit($(this._targetId),!0);this._listbox.setValue(s.vals[s.selIndx].val),this.window.location.constructor==Array?this._listbox._window.hidden?this._listbox._window.show.apply(this._listbox._window,this.window.location):this._listbox._window.setPosition.apply(this._listbox._window,this.window.location):this._listbox._window.hidden?this._listbox._window.show(this.window.location,$if(i,i,this._targetId)):this._listbox._window.setPosition(this.window.location,$if(i,i,this._targetId)),"max"==this._listbox._window.height.substr(0,3)&&this._listbox._resize()}else this._listbox._window.hide()}}),A5.EditButtonGroup=Class.create(A5.Edit,{initialize:function(e){$u.o.assign(this,{theme:"",override:"base",container:{className:"",hoverClassName:"",focusClassName:"",pressedClassName:"",style:0,editClassName:"",separatorClassName:"",button:{html:"",className:"",hoverClassName:"",pressedClassName:""}}}),"undefined"!=typeof e.theme&&A5.themes.assign(this,e.theme,"editButtonGroup"),$u.o.assign(this,e),A5.overrides.assign(this,"editButtonGroup",this.override),this._editPrepare(),this._buttonNum=0,this._buttonState=!1,this._hasFocus=!1},create:function(e){var t="undefined"==typeof arguments[1]||arguments[1],i=document.createElement("input");if("object"==typeof e){"undefined"!=typeof e.className&&(i.className=e.className,delete e.className),"undefined"!=typeof e.style&&($ss(i,e.style),delete e.style);for(var s in e)$sa(i,s,e[s])}if(""==i.id&&(i.id=A5.u.getUniqueId()),t){var a=document.createElement("table");a.id=i.id+".CONTAINER",a.cellPadding="0",a.cellSpacing="0",a.className=this.container.className,"number"!=typeof this.container.style&&$ss(a,this.container.style),$ss(a,"display: inline-table; *display: inline;"),a.insertRow(0);var n=0;return a.rows[0].insertCell(n),i.className=this.container.editClassName,$ss(i,"width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"),a.rows[0].cells[n].appendChild(i),n++,""!=this.container.separatorClassName&&(a.rows[0].insertCell(n),a.rows[0].cells[n].innerHTML="&nbsp;",a.rows[0].cells[n].className=this.container.separatorClassName,n++),a.rows[0].insertCell(n),a.rows[0].cells[n].id=i.id+".CUSTOMBUTTON.0",a.rows[0].cells[n].className=this.container.button.className,a.rows[0].cells[n].innerHTML=this.container.button.html,a.rows[0].cells[n].style.width="0%",document.documentElement.appendChild(a),this._bind(i),a}return this._bind(i),i},bind:function(e){if(e.constructor==Array)for(var t=0;t<e.length;t++)e[t].constructor==Array?this._bind(e[t][0],e[t][1]):this._bind(e[t]);else this._bind(e,arguments[1])},_bind:function(e){var e=$(e);if("true"==$ga(e,"A5ControlBound"))return!0;var t=""!=e.id?e.id:e.name,i=$(t+".CONTAINER");if(!A5.flags.isMobile&&i&&""!=this.container.hoverClassName&&($e.add(i,"mouseover",Function("$acn(this,'"+this.container.hoverClassName+"')")),$e.add(i,"mouseout",Function("$rcn(this,'"+this.container.hoverClassName+"')"))),i&&this.container.button.hoverClassName)for(var s=0,a=0;$(t+".CUSTOMBUTTON."+s);)a=$(t+".CUSTOMBUTTON."+s),$e.add(a,A5.d.evnts.down,this._bmDown,this),A5.flags.isMobile||($e.add(a,"mouseover",Function("$acn('"+t+".CONTAINER','"+this.container.hoverClassName+"'); $acn(this,'"+this.container.button.hoverClassName+"')")),$e.add(a,"mouseout",this._bmOut,this)),$e.add(a,A5.d.evnts.up,this._bmUp,this),$sa(a,"A5TargetInput",t),s+=1;$e.add(e,"focus",this._focus,this),$e.add(e,"blur",this._blur,this),$e.add(e,"keydown",this._keyDown,this),$e.add(e,"keypress",this._keyPress,this),this._editBind(e),$sa(e,"A5ControlBound","true")},setState:function(e){this._buttonState=e;var t=$(this._targetId+".CONTAINER");t&&(e?(this._hasFocus||""==this.container.focusClassName||$acn(t,this.container.focusClassName),""!=this.container.pressedClassName&&$acn(t,this.container.pressedClassName),""!=this.container.button.pressedClassName&&$acn($(this._targetId+".CUSTOMBUTTON."+this._buttonNum),this.container.button.pressedClassName)):(""!=this.container.pressedClassName&&$rcn(t,this.container.pressedClassName),this._hasFocus||""==this.container.focusClassName||$rcn(t,this.container.focusClassName),""!=this.container.button.pressedClassName&&$rcn($(this._targetId+".CUSTOMBUTTON."+this._buttonNum),this.container.button.pressedClassName)))},_bmDown:function(e,t){var i=$ga(this,"A5TargetInput"),s=$(i);return!s.disabled&&(s.focus(),t._targetId=i,t._buttonNum=Number(this.id.split(".").pop()),void $acn(this,t.container.button.pressedClassName))},_bmOut:function(e,t){var i=$ga(this,"A5TargetInput");$rcn(i+".CONTAINER",t.container.hoverClassName),$rcn(this,t.container.button.hoverClassName),t._buttonState||$rcn(this,t.container.button.pressedClassName)},_bmUp:function(e,t){t._buttonState||$rcn(this,t.container.button.pressedClassName)},_focus:function(e,t){if(t._targetId!=this.id){var i=A5.edit.getSelection(this);t._oldIPoint=i.start}t._targetId=this.id,t._initValue=$gvs(this),t._editFocus(e,this),t._hasFocus=!0;var s=$(t._targetId+".CONTAINER");s&&""!=t.container.focusClassName&&$acn(s,t.container.focusClassName)},_blur:function(e,t){t._editBlur(e,this);var i=$(t._targetId+".CONTAINER");i&&""!=t.container.focusClassName&&!t._buttonState&&$rcn(i,t.container.focusClassName),t._hasFocus=!1}}),A5.EditCombo=Class.create(A5.Edit,{initialize:function(e,t){if($u.o.assign(this,{theme:"",override:"base",decouple:!1,listbox:{theme:""},window:{theme:"",type:"popup",location:"dropdown"},container:{className:"",hoverClassName:"",focusClassName:"",pressedClassName:"",style:0,editClassName:"",separatorClassName:"",button:{html:"",className:"",hoverClassName:"",pressedClassName:""}},filter:0,_dynamicData:!1,progressiveFilterMode:"start",selectionRequired:!1,selectionRequiredFilterMode:"default",onSelect:0,onNoSelect:0}),"undefined"!=typeof t.theme){A5.themes.assign(this,t.theme,"editButtonGroup");var i=t.theme.split(":").shift();""==this.window.theme&&(this.window.theme=i+":dropdown"),""==this.listbox.theme&&(this.listbox.theme=i+":dropdown")}$u.o.assign(this,t),$u.o.assign(this.window,{title:{show:!1},body:{content:{type:"blank"},style:{padding:"0px",overflow:"auto"}},autoShow:!1,autoPosition:!1,_container:{focusClassName:this.container.focusClassName,pressedClassName:this.container.pressedClassName,button:{pressedClassName:this.container.button.pressedClassName}},_selectionRequired:this.selectionRequired,_nsTO:0,_bcTO:0,_hasFocus:!1,onShow:function(){clearTimeout(this._nsTO),clearTimeout(this._bcTO);var e=$(this._targetId+".CONTAINER");e&&(""!=this._container.pressedClassName&&$acn(e,this._container.pressedClassName),""!=this._container.button.pressedClassName&&$acn($(this._targetId+".BUTTON"),this._container.button.pressedClassName))},onHide:function(){this._hasFocus||(this._bcTO=setTimeout(Function("$e.execute('"+this._targetId+"','a5blurcomplete');"),100));var e=$(this._targetId+".CONTAINER");e&&(""==this._container.focusClassName||this._makeSelection||$rcn(e,this._container.focusClassName),""!=this._container.pressedClassName&&$rcn(e,this._container.pressedClassName),""!=this._container.button.pressedClassName&&$rcn($(this._targetId+".BUTTON"),this._container.button.pressedClassName));var t=$(this._targetId);this._makeSelection||this._hasFocus||(this._nsTO=setTimeout(Function("$e.execute('"+this._targetId+"','a5noselect');"),100)),!this._makeSelection&&this._selectionRequired&&$e.execute(t,"a5selectionclear"),this._makeSelection=!1}}),$u.o.assign(this.listbox,{loopNavigate:!0,onClick:function(){setTimeout(Function("$e.execute($('"+this._targetId+"'),'a5listselection');"),1)}}),A5.overrides.assign(this,"editCombo",this.override);var s=new A5.Window(this.window);this._listbox=new A5.ListBox(s.getWindowId("body"),[],this.listbox),this._listbox._window=s,this._listbox.decouple=this.decouple,this._listbox.calculateValue.constructor!=Function&&(this._listbox.calculateValue=function(e){return e}),e.constructor==Function&&(this._dynamicData=e,e=[]),this.setData(e),this._editPrepare(),this._value="",this._oldIPoint=0},setData:function(e){if(this._data=e,!this._listbox._window.hidden){var t="undefined"!=typeof arguments[1]?arguments[1]:"";if(""==t||t==this._targetId){var i="undefined"!=typeof arguments[2]&&arguments[2];if(i){var s=$(this._targetId),e=this._editValSplit(s,!0);this._value=e.vals[e.selIndx].val;var a=this._value.toLowerCase(),n=a.length;this.filter.constructor==Function&&(this._data=this.filter.call(this,this._data));var o=new Array;if("start"==this.progressiveFilterMode)for(var r=0;r<this._data.length;r++)a!=String(this._listbox.calculateValue(this._data[r])).substr(0,n).toLowerCase()&&"undefined"==typeof this._data[r]["*static"]||(o[o.length]=this._data[r]);else{a=a.replace(/[\\\.\^\$\*\+\?\{\}\[\]\(\)\|]/g,function(e){return"\\"+e});for(var l=new RegExp(a,"i"),r=0;r<this._data.length;r++)String(this._listbox.calculateValue(this._data[r])).search(l)==-1&&"undefined"==typeof this._data[r]["*static"]||(o[o.length]=this._data[r])}this._populateList(o,!1)}else this._populateList(e,!0)}}},create:function(e){var t="undefined"==typeof arguments[1]||arguments[1],i=document.createElement("input");if("object"==typeof e){"undefined"!=typeof e.className&&(i.className=e.className,delete e.className),"undefined"!=typeof e.style&&($ss(i,e.style),delete e.style);for(var s in e)$sa(i,s,e[s])}if(""==i.id&&(i.id=A5.u.getUniqueId()),t){var a=document.createElement("table");a.id=i.id+".CONTAINER",a.cellPadding="0",a.cellSpacing="0",a.className=this.container.className,"number"!=typeof this.container.style&&$ss(a,this.container.style),$ss(a,"display: inline-table; *display: inline;"),a.insertRow(0);var n=0;return a.rows[0].insertCell(n),i.className=this.container.editClassName,$ss(i,"width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"),a.rows[0].cells[n].appendChild(i),n++,""!=this.container.separatorClassName&&(a.rows[0].insertCell(n),a.rows[0].cells[n].innerHTML="&nbsp;",a.rows[0].cells[n].className=this.container.separatorClassName,n++),a.rows[0].insertCell(n),a.rows[0].cells[n].id=i.id+".BUTTON",a.rows[0].cells[n].className=this.container.button.className,a.rows[0].cells[n].innerHTML=this.container.button.html,a.rows[0].cells[n].style.width="0%",document.documentElement.appendChild(a),this._bind(i),a}return this._bind(i),i},bind:function(e){if(e.constructor==Array)for(var t=0;t<e.length;t++)e[t].constructor==Array?this._bind(e[t][0],e[t][1]):this._bind(e[t]);else this._bind(e,arguments[1])},valueInList:function(e){return this._listbox.valueInList(e)},_bind:function(e){var e=$(e);if("true"==$ga(e,"A5ControlBound"))return!0;var t=""!=e.id?e.id:e.name,i=$(t+".CONTAINER");!A5.flags.isMobile&&i&&""!=this.container.hoverClassName&&($e.add(i,"mouseover",Function("$acn(this,'"+this.container.hoverClassName+"')")),
$e.add(i,"mouseout",Function("$rcn(this,'"+this.container.hoverClassName+"')")));var s="undefined"!=typeof arguments[1]?arguments[1]:"",a=!1;if(""==s?$(t+".BUTTON")&&(a=$(t+".BUTTON")):a=$(s),a?($sa(a,"A5TargetInput",t),$e.add(a,A5.d.evnts.click,this._bOnClick,this),!A5.flags.isMobile&&i&&this.container.button.hoverClassName&&($e.add(a,"mouseover",Function("$acn('"+t+".CONTAINER','"+this.container.hoverClassName+"'); $acn(this,'"+this.container.button.hoverClassName+"')")),$e.add(a,"mouseout",Function("$rcn('"+t+".CONTAINER','"+this.container.hoverClassName+"'); $rcn(this,'"+this.container.button.hoverClassName+"')")))):$sa(e,"A5HasButton","false"),i&&this.container.button.hoverClassName)for(var n=0,o=0;$(t+".CUSTOMBUTTON."+n);)o=$(t+".CUSTOMBUTTON."+n),$e.add(o,A5.d.evnts.down,Function("$acn(this,'"+this.container.button.pressedClassName+"')")),A5.flags.isMobile||($e.add(o,"mouseover",Function("$acn('"+t+".CONTAINER','"+this.container.hoverClassName+"'); $acn(this,'"+this.container.button.hoverClassName+"')")),$e.add(o,"mouseout",Function("$rcn('"+t+".CONTAINER','"+this.container.hoverClassName+"'); $rcn(this,'"+this.container.button.hoverClassName+"'); $rcn(this,'"+this.container.button.pressedClassName+"')"))),$e.add(o,A5.d.evnts.up,Function("$rcn(this,'"+this.container.button.pressedClassName+"')")),n+=1;$e.add(e,"focus",this._focus,this),$e.add(e,"blur",this._blur,this),$e.add(e,"keydown",this._keyDown,this),$e.add(e,"keyup",this._keyUp,this,!0),$e.add(e,"keypress",this._keyPress,this),$e.add(e,A5.d.evnts.up,this._mUp,this),$e.add(e,"a5listselection",this._listSelection,this),$e.add(e,"a5noselect",this._noSelect,this),$e.add(e,"a5blurcomplete",this._blurComp,this),$e.add(e,"a5selectionclear",this._srClear,this),this.selectionRequired&&"progressive"!=this.selectionRequiredFilterMode&&(e.readOnly=!0),this._editBind(e),$sa(e,"A5ControlBound","true")},_focus:function(e,t){if(t._listbox._window._hasFocus=!0,t._editFocus(e,this),clearTimeout(t._listbox._window._bcTO),t._targetId!=this.id){var i=A5.edit.getSelection(this);t._oldIPoint=i.start,t._targetId=this.id,t._listbox._targetId=t._targetId,t._listbox._window._targetId=t._targetId,t._initValue=$gvs(this)}else clearTimeout(t._listbox._window._nsTO);var s=$(t._targetId+".CONTAINER");s&&""!=t.container.focusClassName&&$acn(s,t.container.focusClassName)},_blur:function(e,t){t.selectionRequired&&t._listbox._window.hidden&&t._srClear({},t),t._listbox._window.hidden&&this.value!=t._initValue&&(t._listbox._window._nsTO=setTimeout(Function("$e.execute('"+this.id+"','a5noselect');"),100)),t._listbox._window._hasFocus=!1,t._editBlur(e,this);var i=$(t._targetId+".CONTAINER");i&&""!=t.container.focusClassName&&t._listbox._window.hidden&&$rcn(i,t.container.focusClassName),t._listbox._window.hidden&&(t._listbox._window._bcTO=setTimeout(Function("$e.execute('"+this.id+"','a5blurcomplete');"),100))},_blurComp:function(e,t){t._listbox._window.hidden&&(t._targetId="",t._listbox._targetId="",t._listbox._window._targetId="")},_mUp:function(e,t){var i=A5.edit.getSelection(this);if(t._oldIPoint=i.start,"false"==$ga(this,"A5HasButton")||t.selectionRequired){if(this.disabled)return!1;t._targetId!=this.id&&(t._targetId=this.id,t._listbox._targetId=this.id,t._listbox._window._targetId=this.id,t._initValue=$gvs(this.id)),setTimeout(function(){t._getFullList()},0)}},_bOnClick:function(e,t){$e.stopEvent(e);var i=$ga(this,"A5TargetInput"),s=$(i);if(s.disabled)return!1;if(t.decouple)t._oldIPoint=0;else{s.focus();var a=A5.edit.getSelection(s);t._oldIPoint=a.start}return t._targetId=i,t._listbox._targetId=i,t._listbox._window._targetId=i,t._initValue=$gvs(i),setTimeout(function(){t._getFullList()},0),!1},_keyDown:function(e,t){if(!t.decouple){t.selectionRequired||"progressive"==t.selectionRequiredFilterMode||t._editKeyDown(e,this);var i=e.charCode||e.keyCode;return 13!=i&&9!=i||t._listbox._window.hidden?(36==i||35==i)&&!t._listbox._window.hidden&&t._listbox.value.length>0?($e.stopEvent(e),36==i?t._listbox.navigate("home"):t._listbox.navigate("end"),0!=t._listbox.value.length?t._oldIPoint=t.insertValue(t._listbox.value[0],!1):t._oldIPoint=t.insertValue(t._value,!1),!1):void(38!=i&&40!=i||(e.altKey&&(t._listbox._window.hidden?t._getFullList():t._listbox._window.hide()),$e.stopPropagation(e),$e.stopEvent(e))):($e.stopEvent(e),t._listSelection(e,t),!1)}},_keyUp:function(e){if(!this.decouple){var t=e.charCode||e.keyCode,i=[9,13,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,112,113,114,115,116,117,118,119,120,121,122,123];if(38!=t||this._listbox._window.hidden)if(40!=t||this._listbox._window.hidden)if(36==t||35==t||37==t||39==t){var s=A5.edit.getSelection($(this._targetId));this._oldIPoint=s.start}else if(8!=t&&46!=t||!this.selectionRequired||"progressive"==this.selectionRequiredFilterMode){if($u.a.find(i,t)==-1&&(!this.selectionRequired||"progressive"==this.selectionRequiredFilterMode)){var a=$(this._targetId),n=this._editValSplit(a,!0);this._value=n.vals[n.selIndx].val;var o=this._value.toLowerCase(),r=o.length;this._dynamicData.constructor==Function&&(this._data=this._dynamicData.call(this,this._targetId,!0));var n=this._data;this.filter.constructor==Function&&(n=this.filter.call(this,n));var l=new Array;if("start"==this.progressiveFilterMode)for(var d=0;d<n.length;d++)o!=String(this._listbox.calculateValue(n[d])).substr(0,r).toLowerCase()&&"undefined"==typeof n[d]["*static"]||(l[l.length]=n[d]);else{o=o.replace(/[\\\.\^\$\*\+\?\{\}\[\]\(\)\|]/g,function(e){return"\\"+e});for(var h=new RegExp(o,"i"),d=0;d<n.length;d++)String(this._listbox.calculateValue(n[d])).search(h)==-1&&"undefined"==typeof n[d]["*static"]||(l[l.length]=n[d])}this._populateList(l)}}else{var a=$(this._targetId),n=this._editValSplit(a,!0),c=n.vals[n.selIndx].offset,u=n.vals.length;if(0==n.sel.length)8==t&&0!=n.sel.start?n.vals.length-1==n.selIndx&&""==n.vals[n.selIndx].val?(n.vals.splice(n.selIndx,1),n.selIndx>0&&(n.vals[n.selIndx-1].sep="")):(n.vals[n.selIndx].offset==n.sel.start&&n.selIndx>0?n.selIndx--:n.selIndx>0&&""!=n.vals[n.selIndx].sep&&!n.inSep?(n.vals[n.selIndx-1].sep=n.vals[n.selIndx].sep,c=n.vals[n.selIndx-1].offset+n.vals[n.selIndx-1].val.length):c=n.vals[n.selIndx].offset,n.vals.splice(n.selIndx,1)):46==t&&n.sel.start!=a.value.length&&(n.inSep&&""!=n.vals[n.selIndx].sep?(c+=n.vals[n.selIndx].val.length,n.vals.length-1==n.selIndx?n.vals[n.selIndx].sep="":(n.vals[n.selIndx].sep=n.vals[n.selIndx+1].sep,n.vals.splice(n.selIndx+1,1))):n.vals.splice(n.selIndx,1));else for(var d=n.vals.length-1;d>=0;d--)n.vals[d].offset+n.vals[d].val.length>=n.sel.start&&n.vals[d].offset<=n.sel.end&&(c=n.vals[d].offset,n.vals.splice(d,1));if(u!=n.vals.length&&this._multi.auto.persist)if(this.multiple.auto.separator.constructor==Function)for(var f=new Array,d=0;d<n.vals.length-1;d++)n.vals[d].sep=this.multiple.auto.separator.call(this,f),f.push(n.vals[d].sep);else for(var d=0;d<n.vals.length-1;d++)n.vals[d].sep=this.multiple.auto.separator;a.value=this._editValJoin(n),this._initValue=a.value,this._oldIPoint=c,A5.edit.setSelection(a,c),this._dynamicData.constructor==Function&&(this._data=this._dynamicData.call(this,this._targetId,!0));var n=this._data;this.filter.constructor==Function&&(n=this.filter.call(this,n));var l=[].concat(n);this._populateList(l)}else this._listbox.navigate("next"),0!=this._listbox.value.length?this._oldIPoint=this.insertValue(this._listbox.value[0],!1):this._oldIPoint=this.insertValue(this._value,!1);else this._listbox.navigate("prev"),0!=this._listbox.value.length?this._oldIPoint=this.insertValue(this._listbox.value[0],!1):this._oldIPoint=this.insertValue(this._value,!1)}},_keyPress:function(e,t){if(!t.decouple)if(t.selectionRequired&&"progressive"!=t.selectionRequiredFilterMode){var i=e.charCode||e.keyCode;if(9!=i&&37!=i&&39!=i&&$e.stopEvent(e),8!=i&&9!=i&&13!=i&&27!=i||(i=0),0!=i&&!e.ctrlKey&&!e.altKey){i=String.fromCharCode(i).toLowerCase(),t._listbox._window.hidden&&t._getFullList();var s=-1,a=t._listbox.selection[0];"undefined"==typeof a&&(a=-1);for(var n=a+1;n<t._listbox._values.length;n++)if(i==String(t._listbox._values[n]).substr(0,1).toLowerCase()){s=n;break}if(s==-1)for(var n=0;n<=a;n++)if(i==String(t._listbox._values[n]).substr(0,1).toLowerCase()){s=n;break}if(s!=-1)t._oldIPoint=t.insertValue(t._listbox.calculateValue(t._data[s]),!1);else if(t._multi.auto.persist)t._oldIPoint=t.insertValue("",!1);else{var o=t._editValSplit(this,!0),r=o.vals[o.selIndx];t._multi.keyBuffer+=i;for(var l=t._multi.keyBuffer.length,d=new Array,n=0;n<t._multi.sep.length;n++)t._multi.sep[n].substr(0,l).toLowerCase()==t._multi.keyBuffer&&d.push(n);if(1==d.length){var h=$(t._targetId);r.sep=t._multi.sep[d[0]],t.format.showMask&&o.vals.length-1==o.selIndx&&o.vals.push({val:t.format._pMask.blankValue,sep:"",offset:0}),h.value=t._editValJoin(o),t._initValue=h.value,A5.edit.setSelection(h,r.offset+r.val.length+r.sep.length),t._multi.keyBuffer=""}else 0==d.length&&(t._multi.keyBuffer="",t._oldIPoint=t.insertValue("",!1))}t._listbox._selectItem(s)}}else t._editKeyPress(e,this)},_listSelection:function(e,t){if(0!=t._listbox.value.length){var i=$(t._targetId);t.decouple?t._editClearWatermark(i):(i.focus(),A5.edit.setSelection(i,t._oldIPoint)),t._oldIPoint=t.insertValue(t._listbox.value[0],!0),t._initValue=i.value,t.onSelect.constructor==Function&&t.onSelect.call(i,t._listbox._data[t._listbox.selection[0]],t)}t._listbox._window._makeSelection=!0,t._listbox._window.hide()},_noSelect:function(e,t){clearTimeout(t._listbox._window._nsTO),t._targetId="",t._listbox._targetId="",t._listbox._window._targetId="",t.onNoSelect.constructor==Function&&t.onNoSelect.call(this,t)},_srClear:function(e,t){var i=$gvs(t._targetId);i!=t._initValue&&""!=i&&$svs(t._targetId,t._initValue)},_getFullList:function(){var e=$(this._targetId),t=this._editValSplit(e,!0);this._value=t.vals[t.selIndx].val,this._dynamicData.constructor==Function&&(this._data=this._dynamicData.call(this,this._targetId,!1));var i=this._data;this.filter.constructor==Function&&(i=this.filter.call(this,i)),this._populateList(i,!0)},_populateList:function(e){var t="undefined"!=typeof arguments[1]&&arguments[1],i=$(this._targetId+".CONTAINER"),s=!1;if(e.length>0){s=!0,this._listbox.populate(e);var a=this._editValSplit($(this._targetId),!0);this._listbox.setValue(a.vals[a.selIndx].val)}else t&&(s=!0,this._listbox.populate([]));if(s){var n=!1;this._listbox._window.hidden&&(this.window.location.constructor==Array?this._listbox._window.show.apply(this._listbox._window,this.window.location):this._listbox._window.show(this.window.location,$if(i,i,this._targetId)),n=!0),"max"==this._listbox._window.height.substr(0,3)&&(this._listbox._resize(),n=!0),n&&(this.window.location.constructor==Array?this._listbox._window.setPosition.apply(this._listbox._window,this.window.location):this._listbox._window.setPosition(this.window.location,$if(i,i,this._targetId))),t&&this._listbox.value.length>0&&this._listbox.scrollToItem(this._listbox.value[0])}else this._listbox._window.hide()}}),A5.EditTree=Class.create(A5.Edit,{initialize:function(e,t){if($u.o.assign(this,{override:"base",decouple:!1,tree:{theme:""},window:{theme:"",type:"popup",location:"dropdown"},container:{className:"",hoverClassName:"",focusClassName:"",pressedClassName:"",style:0,editClassName:"",separatorClassName:"",button:{html:"",className:"",hoverClassName:"",pressedClassName:""}},selectionRequired:!1,onSelect:0,onNoSelect:0}),"undefined"!=typeof t.theme){A5.themes.assign(this,t.theme,"editButtonGroup");var i=t.theme.split(":").shift();""==this.window.theme&&(this.window.theme=i+":dropdown"),""==this.tree.theme&&(this.tree.theme=i+":dropdown")}$u.o.assign(this,t),A5.overrides.assign(this,"editTree",this.override),this.setData(e),$u.o.assign(this.window,{title:{show:!1},body:{content:{type:"blank"},style:{padding:"0px",overflow:"auto"}},autoShow:!1,autoPosition:!1,_container:{focusClassName:this.container.focusClassName,pressedClassName:this.container.pressedClassName,button:{pressedClassName:this.container.button.pressedClassName}},_nsTO:0,_hasFocus:!1,onShow:function(){clearTimeout(this._nsTO),clearTimeout(this._bcTO);var e=$(this._targetId+".CONTAINER");e&&(""!=this._container.pressedClassName&&$acn(e,this._container.pressedClassName),""!=this._container.button.pressedClassName&&$acn($(this._targetId+".BUTTON"),this._container.button.pressedClassName))},onHide:function(){this._hasFocus||(this._bcTO=setTimeout(Function("$e.execute('"+this._targetId+"','a5blurcomplete');"),100));var e=$(this._targetId+".CONTAINER");e&&(""==this._container.focusClassName||this._makeSelection||$rcn(e,this._container.focusClassName),""!=this._container.pressedClassName&&$rcn(e,this._container.pressedClassName),""!=this._container.button.pressedClassName&&$rcn($(this._targetId+".BUTTON"),this._container.button.pressedClassName)),this._makeSelection||this._hasFocus||(this._nsTO=setTimeout(Function("$e.execute('"+this._targetId+"','a5noselect');"),100)),this._makeSelection=!1}}),$u.o.assign(this.tree,{loopNavigate:!0,_onSelect:this.onSelect,decouple:this.decouple,onNodeClick:function(e){if(!e.children){var t=$(this._targetId);this.decouple||t.focus(),setTimeout(Function("$e.execute($('"+this._targetId+"'),'a5treeselection');"),1)}}});var s=new A5.Window(this.window);this._tree=new A5.Tree(s.getWindowId("body"),e,this.tree),this._tree._window=s,this._editPrepare(),this._value="",this._oldIPoint=0},setData:function(e){this._data=e},create:function(e){var t="undefined"==typeof arguments[1]||arguments[1],i=document.createElement("input");if("object"==typeof e){"undefined"!=typeof e.className&&(i.className=e.className,delete e.className),"undefined"!=typeof e.style&&($ss(i,e.style),delete e.style);for(var s in e)$sa(i,s,e[s])}if(""==i.id&&(i.id=A5.u.getUniqueId()),t){var a=document.createElement("table");a.id=i.id+".CONTAINER",a.cellPadding="0",a.cellSpacing="0",a.className=this.container.className,"number"!=typeof this.container.style&&$ss(a,this.container.style),$ss(a,"display: inline-table; *display: inline;"),a.insertRow(0);var n=0;return a.rows[0].insertCell(n),i.className=this.container.editClassName,$ss(i,"width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"),a.rows[0].cells[n].appendChild(i),n++,""!=this.container.separatorClassName&&(a.rows[0].insertCell(n),a.rows[0].cells[n].innerHTML="&nbsp;",a.rows[0].cells[n].className=this.container.separatorClassName,n++),a.rows[0].insertCell(n),a.rows[0].cells[n].id=i.id+".BUTTON",a.rows[0].cells[n].className=this.container.button.className,a.rows[0].cells[n].innerHTML=this.container.button.html,a.rows[0].cells[n].style.width="0%",document.documentElement.appendChild(a),this._bind(i),a}return this._bind(i),i},bind:function(e){if(e.constructor==Array)for(var t=0;t<e.length;t++)e[t].constructor==Array?this._bind(e[t][0],e[t][1]):this._bind(e[t]);else this._bind(e,arguments[1])},_bind:function(e){var e=$(e);if("true"==$ga(e,"A5ControlBound"))return!0;var t=""!=e.id?e.id:e.name,i=$(t+".CONTAINER");!A5.flags.isMobile&&i&&""!=this.container.hoverClassName&&($e.add(i,"mouseover",Function("$acn(this,'"+this.container.hoverClassName+"')")),$e.add(i,"mouseout",Function("$rcn(this,'"+this.container.hoverClassName+"')")));var s="undefined"!=typeof arguments[1]?arguments[1]:"",a=!1;if(""==s?$(t+".BUTTON")&&(a=$(t+".BUTTON")):a=$(s),a?($sa(a,"A5TargetInput",t),$e.add(a,A5.d.evnts.click,this._bOnClick,this),!A5.flags.isMobile&&i&&this.container.button.hoverClassName&&($e.add(a,"mouseover",Function("$acn('"+t+".CONTAINER','"+this.container.hoverClassName+"'); $acn(this,'"+this.container.button.hoverClassName+"')")),$e.add(a,"mouseout",Function("$rcn('"+t+".CONTAINER','"+this.container.hoverClassName+"'); $rcn(this,'"+this.container.button.hoverClassName+"')")))):$sa(e,"A5HasButton","false"),i&&this.container.button.hoverClassName)for(var n=0,o=0;$(t+".CUSTOMBUTTON."+n);)o=$(t+".CUSTOMBUTTON."+n),$e.add(o,A5.d.evnts.down,Function("$acn(this,'"+this.container.button.pressedClassName+"')")),A5.flags.isMobile||($e.add(o,"mouseover",Function("$acn('"+t+".CONTAINER','"+this.container.hoverClassName+"'); $acn(this,'"+this.container.button.hoverClassName+"')")),$e.add(o,"mouseout",Function("$rcn('"+t+".CONTAINER','"+this.container.hoverClassName+"'); $rcn(this,'"+this.container.button.hoverClassName+"'); $rcn(this,'"+this.container.button.pressedClassName+"')"))),$e.add(o,A5.d.evnts.up,Function("$rcn(this,'"+this.container.button.pressedClassName+"')")),n+=1;$e.add(e,"focus",this._focus,this),$e.add(e,"blur",this._blur,this),$e.add(e,"keydown",this._keyDown,this),$e.add(e,"keyup",this._keyUp,this,!0),$e.add(e,"keypress",this._keyPress,this),$e.add(e,A5.d.evnts.up,this._mUp,this),$e.add(e,"a5treeselection",this._treeSelection,this),$e.add(e,"a5noselect",this._noSelect,this),$e.add(e,"a5blurcomplete",this._blurComp,this),this.selectionRequired&&(e.readOnly=!0),this._editBind(e),$sa(e,"A5ControlBound","true")},_focus:function(e,t){if(t._tree._window._hasFocus=!0,t._editFocus(e,this),clearTimeout(t._tree._window._bcTO),t._targetId!=this.id){var i=A5.edit.getSelection(this);t._oldIPoint=i.start,t._targetId=this.id,t._tree._targetId=t._targetId,t._tree._window._targetId=t._targetId,t._initValue=$gvs(this)}else clearTimeout(t._tree._window._nsTO);var s=$(t._targetId+".CONTAINER");s&&""!=t.container.focusClassName&&$acn(s,t.container.focusClassName)},_blur:function(e,t){if(t.selectionRequired){var i=$gvs(this);i!=t._initValue&&""!=i&&$svs(this,t._initValue)}t._tree._window.hidden&&this.value!=t._initValue&&(t._tree._window._nsTO=setTimeout(Function("$e.execute('"+this.id+"','a5noselect');"),100)),t._tree._window._hasFocus=!1,t._editBlur(e,this);var s=$(t._targetId+".CONTAINER");s&&""!=t.container.focusClassName&&t._tree._window.hidden&&$rcn(s,t.container.focusClassName),t._tree._window.hidden&&(t._tree._window._bcTO=setTimeout(Function("$e.execute('"+this.id+"','a5blurcomplete');"),100))},_blurComp:function(e,t){t._tree._window.hidden&&(t._targetId="",t._tree._targetId="",t._tree._window._targetId="")},_mUp:function(e,t){var i=A5.edit.getSelection(this);if(t._oldIPoint=i.start,"false"==$ga(this,"A5HasButton")||t.selectionRequired){if(this.disabled)return!1;t._targetId!=this.id&&(t._targetId=this.id,t._tree._targetId=this.id,t._tree._window._targetId=this.id,t._initValue=$gvs(this.id)),setTimeout(function(){t._treeShow()},0)}},_bOnClick:function(e,t){$e.stopEvent(e);var i=$ga(this,"A5TargetInput"),s=$(i);if(s.disabled)return!1;if(t.decouple)t._oldIPoint=0;else{s.focus();var a=A5.edit.getSelection(s);t._oldIPoint=a.start}return t._targetId=i,t._tree._targetId=i,t._tree._window._targetId=i,t._initValue=$gvs(s),setTimeout(function(){t._treeShow()},0),!1},_keyDown:function(e,t){if(!t.decouple){t._editKeyDown(e,this);var i=e.charCode||e.keyCode;return 13!=i&&9!=i||t._tree._window.hidden?(36==i||35==i||37==i||39==i)&&!t._tree._window.hidden&&t._tree.value.length>0?($e.stopEvent(e),36==i?t._tree.navigate("home"):35==i?t._tree.navigate("end"):37==i?t._tree.navigate("out"):39==i&&t._tree.navigate("in"),0!=t._tree.value.length?$svs(t._targetId,t._tree.value[0]):$svs(t._targetId,t._value),!1):void(38!=i&&40!=i||(e.altKey?t._tree._window.hidden?t._treeShow():t._tree._window.hide():t._tree._window.hidden||(38==i?t._tree.navigate("prev"):t._tree.navigate("next"),0!=t._tree.value.length?t._oldIPoint=t.insertValue(t._tree.value[0],!1):t._oldIPoint=t.insertValue(t._value,!1)),$e.stopPropagation(e),$e.stopEvent(e))):($e.stopEvent(e),t._tree.navigate("enter"),!1)}},_keyUp:function(e){if(!this.decouple){var t=e.charCode||e.keyCode;if(36==t||35==t||37==t||39==t){var i=A5.edit.getSelection($(this._targetId));this._oldIPoint=i.start}else if((8==t||46==t)&&this.selectionRequired){var s=$(this._targetId),a=this._editValSplit(s,!0),n=a.vals[a.selIndx].offset,o=a.vals.length;if(0==a.sel.length)8==t&&0!=a.sel.start?a.vals.length-1==a.selIndx&&""==a.vals[a.selIndx].val?(a.vals.splice(a.selIndx,1),a.selIndx>0&&(a.vals[a.selIndx-1].sep="")):(a.vals[a.selIndx].offset==a.sel.start&&a.selIndx>0?a.selIndx--:a.selIndx>0&&""!=a.vals[a.selIndx].sep&&!a.inSep?(a.vals[a.selIndx-1].sep=a.vals[a.selIndx].sep,n=a.vals[a.selIndx-1].offset+a.vals[a.selIndx-1].val.length):n=a.vals[a.selIndx].offset,a.vals.splice(a.selIndx,1)):46==t&&a.sel.start!=s.value.length&&(a.inSep&&""!=a.vals[a.selIndx].sep?(n+=a.vals[a.selIndx].val.length,a.vals.length-1==a.selIndx?a.vals[a.selIndx].sep="":(a.vals[a.selIndx].sep=a.vals[a.selIndx+1].sep,a.vals.splice(a.selIndx+1,1))):a.vals.splice(a.selIndx,1));else for(var r=a.vals.length-1;r>=0;r--)a.vals[r].offset+a.vals[r].val.length>=a.sel.start&&a.vals[r].offset<=a.sel.end&&(n=a.vals[r].offset,a.vals.splice(r,1));if(o!=a.vals.length&&this._multi.auto.persist)if(this.multiple.auto.separator.constructor==Function)for(var l=new Array,r=0;r<a.vals.length-1;r++)a.vals[r].sep=this.multiple.auto.separator.call(this,l),l.push(a.vals[r].sep);else for(var r=0;r<a.vals.length-1;r++)a.vals[r].sep=this.multiple.auto.separator;s.value=this._editValJoin(a),this._initValue=s.value,this._oldIPoint=n,A5.edit.setSelection(s,n)}}},_keyPress:function(e,t){if(!t.decouple)if(t.selectionRequired){var i=0;if(i="number"==typeof e.which?e.which:"number"==typeof e.charCode?e.charCode:e.keyCode,9!=i&&37!=e.keyCode&&39!=e.keyCode&&$e.stopEvent(e),8!=i&&9!=i&&13!=i&&27!=i||(i=0),0!=i&&!e.ctrlKey&&!e.altKey){i=String.fromCharCode(i).toLowerCase();var s=t._editValSplit(this,!0),a=s.vals[s.selIndx];if(""!=a.val)if(t._multi.auto.persist)s.selIndx==s.vals.length-1&&""==a.sep&&(t._oldIPoint=t.insertValue(a.val,!0),t._initValue=this.value);else{t._multi.keyBuffer+=i;for(var n=t._multi.keyBuffer.length,o=new Array,r=0;r<t._multi.sep.length;r++)t._multi.sep[r].substr(0,n).toLowerCase()==t._multi.keyBuffer&&o.push(r);1==o.length?(a.sep=t._multi.sep[o[0]],t.format.showMask&&s.vals.length-1==s.selIndx&&s.vals.push({val:t.format._pMask.blankValue,sep:"",offset:0}),this.value=t._editValJoin(s),t._initValue=this.value,A5.edit.setSelection(this,a.offset+a.val.length+a.sep.length),t._multi.keyBuffer=""):0==o.length&&(t._multi.keyBuffer="")}}}else t._editKeyPress(e,this)},_treeShow:function(){this._tree._window.hidden||this._tree._window.hide();var e=this._editValSplit($(this._targetId),!0),t=$(this._targetId+".CONTAINER");this.window.location.constructor==Array?this._tree._window.hidden?this._tree._window.show.apply(this._tree._window,this.window.location):this._tree._window.setPosition.apply(this._tree._window,this.window.location):this._tree._window.hidden?this._tree._window.show(this.window.location,$if(t,t,this._targetId)):this._tree._window.setPosition(this.window.location,$if(t,t,this._targetId)),this._tree.setValue(e.vals[e.selIndx].val)},_treeSelection:function(e,t){if(t._targetId=t._tree._targetId,0!=t._tree.value.length){var i=$(t._targetId);t.decouple?t._editClearWatermark(i):(i.focus(),A5.edit.setSelection(i,t._oldIPoint)),t._oldIPoint=t.insertValue(t._tree.value[0],!0),t._initValue=i.value}t._tree._window._makeSelection=!0,t._tree._window.hide()},_noSelect:function(e,t){clearTimeout(t._tree._window._nsTO),t._targetId="",t._tree._targetId="",t._tree._window._targetId="",t.onNoSelect.constructor==Function&&t.onNoSelect.call(this,t)}}),A5.RadioGroup=Class.create({initialize:function(e,t,i){this._t="radio",this.value="",this._initLow(e,t,i)},_initLow:function(e,t,i){this.contId=e,$u.o.assign(this,{name:e,layout:"horizontal",allowMissing:!0,cols:3,rows:3,className:"",style:"",label:{className:"",style:""},input:{className:"",style:""},onChange:0}),$u.o.assign(this,i),this.populate(t),$e.add(e,"a5change",function(){this.onChange.constructor==Function&&this.onChange()},this,!0)},setValue:function(e){var t="undefined"==typeof arguments[1]||arguments[1];if(this._cVal(e))return!1;if(e.constructor!=Array&&(e=""==e?[]:[e]),0!=e.length&&this.allowMissing){var i=this._addVal.length;this._setAddVal(e),0==i&&0==this._addVal.length||this.refresh()}$svs(this.name,e,$(this.contId)),t&&this.onChange.constructor==Function&&this.onChange()},populate:function(e){this.items=[],this._values=[];for(var t=0;t<e.length;t++)"object"!=typeof e[t]?(this.items.push({value:e[t],html:e[t]}),this._values.push(e[t])):(this.items.push(e[t]),this._values.push(e[t].value));this._setAddVal(this.value),this.refresh()},refresh:function(){for(var e=$(this.contId),t=[],i="",s=0;s<this.items.length;s++)i="",this._cVal(this.items[s].value)&&(i='checked="checked"'),t.push('<span class="'+this.className+'" style="'+this.style+'"><input type="'+this._t+'" value="'+this.items[s].value+'" name="'+this.name+'" id="'+this.contId+"."+s+'" '+i+" onchange=\"$e.execute('"+this.contId+"','a5change');\" class=\""+this.input.className+'" style="'+this.input.style+'"><label for="'+this.contId+"."+s+'" class="'+this.label.className+'" style="'+this.label.style+'">'+this.items[s].html+"</label></span>");for(var a=0;a<this._addVal.length;a++)i="",this._cVal(this._addVal)&&(i='checked="checked"'),t.push('<span class="'+this.className+'" style="'+this.style+'"><input type="'+this._t+'" value="'+this._addVal[a]+'" name="'+this.name+'" id="'+this.contId+"."+(s+a)+'" '+i+" onchange=\"$e.execute('"+this.contId+"','a5change');\" class=\""+this.input.className+'" style="'+this.input.style+'"><label for="'+this.contId+"."+(s+a)+'" class="'+this.label.className+'" style="'+this.label.style+'">'+this._addVal[a]+"</label></span>");var n=this.layout.toLowerCase();if("v"==n[0])e.innerHTML=t.join("<br/>\n");else if("lrtb"==n){for(var o=["<table><tr>"],s=0;s<t.length;s++){0!=s&&o.push("</tr><tr>");for(var a=0;a<this.cols;a++)0!=a&&s++,"undefined"!=typeof t[s]?o.push("<td>"+t[s]+"<td>"):o.push("<td><td>")}o.push("</tr></table>"),e.innerHTML=o.join("\n")}else if("tblr"==n){for(var r=[],a=0;a<this.rows;a++)r[a]=[];for(var s=0;s<t.length;s++)for(var a=0;a<this.rows;a++)0!=a&&s++,"undefined"!=typeof t[s]?r[a].push("<td>"+t[s]+"<td>"):r[a].push("<td><td>");for(var a=0;a<this.rows;a++)r[a]="<tr>"+r[a].join("")+"</tr>";e.innerHTML="<table>"+r.join("\n")+"</table>"}else e.innerHTML=t.join("\n")},_setAddVal:function(e){if(this._addVal=[],this.allowMissing){e.constructor!=Array&&(e=[e]);for(var t=0;t<e.length;t++)""!=e[t]&&this._values.indexOf(e[t])==-1&&this._addVal.push(e[t])}},_cVal:function(e){return e==this.value}}),A5.CheckboxGroup=Class.create(A5.RadioGroup,{initialize:function(e,t,i){this._t="checkbox",this.value=[],this._initLow(e,t,i)},_cVal:function(e){return e.constructor==Array?(e.sort(),this.value.sort(),e.join("|||")==this.value.join("|||")):this.value.indexOf(e)!=-1}}),A5.Select=Class.create({initialize:function(e,t,i){this.id=e,$u.o.assign(this,{allowMissing:!0,value:""}),$u.o.assign(this,i),this.populate(t)},setValue:function(e){var t="undefined"==typeof arguments[1]||arguments[1];if(this._cVal(e))return!1;if(e.constructor!=Array&&(e=""==e?[]:[e]),0!=e.length&&this.allowMissing){var i=this._addVal.length;this._setAddVal(e),0==i&&0==this._addVal.length||this.refresh()}$svs(this.id,e),t&&$e.execute(this.id,"change")},populate:function(e){this.items=[],this._values=[];for(var t=0;t<e.length;t++)"object"!=typeof e[t]?(this.items.push({value:e[t],text:e[t]}),this._values.push(e[t])):(this.items.push(e[t]),this._values.push(e[t].value));this._setAddVal(this.value),this.refresh()},refresh:function(){var e=$(this.id);if(e.options.length>0)for(var t=e.options.length-1;t>=0;t--)e.remove(t);for(var t=0;t<this.items.length;t++)e.options.add(new Option(this.items[t].value,this.items[t].text));for(var t=0;t<this._addVal.length;t++)e.options.add(new Option(this._addVal[t],this._addVal[t]),0)},_setAddVal:function(e){if(this._addVal=[],this.allowMissing){e.constructor!=Array&&(e=[e]);for(var t=0;t<e.length;t++)""!=e[t]&&this._values.indexOf(e[t])==-1&&this._addVal.push(e[t])}},_cVal:function(e){return e==this.value}}),A5.buttons={element:function(e,t){var i="undefined"!=typeof arguments[2]?arguments[2]:{},s={};$u.o.assign(s,this._sDef),"undefined"!=typeof t.theme&&A5.themes.assign(s,t.theme,"button"),$u.o.assign(t,s,!0);var a=document.createElement("button");a.innerHTML=this.contents(e,t),a.className=t.className,a.title=t.tip,$ss(a,t.style);for(var n in i)$sa(a,n,i[n]);return a},html:function(e,t){var i="undefined"!=typeof arguments[2]?arguments[2]:"",s={};return $u.o.assign(s,this._sDef),"undefined"!=typeof t.theme&&A5.themes.assign(s,t.theme,"button"),$u.o.assign(t,s,!0),html='<button id="'+e+'" class="'+t.className+'"  style="'+t.style+'" '+i+">"+this.contents(e,t)+"</button>",html},contents:function(){var e="";if(1==arguments.length)var t=arguments[0];else var e='id="'+arguments[0]+'.ICON" ',t=arguments[1];var i={};$u.o.assign(i,this._sDef),"undefined"!=typeof t.theme&&A5.themes.assign(i,t.theme,"button"),$u.o.assign(t,i,!0),""!=t.icon&&"undefined"!=typeof t.icon&&t.layout.search("icon")!=-1&&(t.hasIcon=!0);var s=t.hasIcon?A5.u.icon.html(t.icon,e+'class="'+t.iconClassName+'" style="'+t.iconStyle+'; vertical-align: middle; border: none;"'):"",a="";return"icon"==t.layout?a=s:"text"==t.layout?a=t.html:"icon text"==t.layout?a=s+" "+t.html:"text icon"==t.layout?a=t.html+" "+s:"icon/text"==t.layout?a=s+"<br />"+t.html:"text/icon"==t.layout?a=t.html+"<br />"+s:"icon-text"==t.layout?a='<table style="width: 100%;"><tr><td style="text-align: left;">'+s+'</td><td style="text-align: right;">'+t.html+"</td></tr></table>":"text-icon"==t.layout&&(a='<table style="width: 100%;"><tr><td style="text-align: left;">'+t.html+'</td><td style="text-align: right;">'+s+"</td></tr></table>"),a},_sDef:{theme:"",style:"",className:"",iconStyle:"",iconClassName:"",html:"",icon:"",layout:"icon text",tip:""},_p:{}},$e.add(document.documentElement,A5.d.evnts.up,function(){for(var e in A5.buttons._p)$rcn(e,A5.buttons._p[e]);A5.buttons._p={}}),A5.Button=Class.create(),A5.Button.prototype={initialize:function(e){$u.o.assign(this,{override:"base",style:0,className:"",hoverClassName:"",pressedClassName:"",disabledClassName:"",iconStyle:0,iconClassName:"",html:"",icon:"",hoverIcon:"",pressedIcon:"",disabledIcon:"",layout:"icon text",tip:"",animation:{show:{type:"",duration:500},hide:{type:"",duration:500}},onClick:0,watches:[],_hasIcon:!1}),"undefined"!=typeof e.theme&&A5.themes.assign(this,e.theme,"button"),$u.o.assign(this,e),A5.overrides.assign(this,"button",this.override),""!=this.icon&&this.layout.search("icon")!=-1&&(this._hasIcon=!0),this._buttonIds=new Array},create:function(e){var t=document.createElement("button");if("object"==typeof e){"undefined"!=typeof e.className&&(t.className=e.className,delete e.className),"undefined"!=typeof e.style&&($ss(t,e.style),delete e.style);for(var i in e)$sa(t,i,e[i])}return""==t.id&&(t.id=A5.u.getUniqueId()),this._bind(t),t},bind:function(e){if(e.constructor==Array)for(var t=0;t<e.length;t++)this._bind($(e[t]));else this._bind($(e))},_bind:function(e){if("true"==$ga(e,"A5ControlBound"))return!0;if(e.length){for(var t=0;t<e.length;t++)""==e[t].id&&(e[t].id=e[t].name+"."+t),this._bind(e[t]);return!1}if(""!=this.className&&$acn(e,this.className),"object"!=typeof this.style&&"string"!=typeof this.style||$ss(e,this.style),A5.flags.supportsMouse&&($e.remove(e,"mouseover",this._mOver),$e.remove(e,"mouseout",this._mOut)),$e.remove(e,A5.d.evnts.down,this._mDown),$e.remove(e,A5.d.evnts.up,this._mUp),$e.remove(e,A5.d.evnts.click,this._mClick),A5.flags.supportsMouse&&($e.add(e,"mouseover",this._mOver,this),$e.add(e,"mouseout",this._mOut,this)),$e.add(e,A5.d.evnts.down,this._mDown,this),$e.add(e,A5.d.evnts.up,this._mUp,this),$e.add(e,A5.d.evnts.click,this._mClick,this),this._setContent(e),this._buttonIds.push(e.id),this.watches.length>0)for(var i=""!=e.id?e.id:e.name,t=0;t<this.watches.length;t++)if("undefined"!=typeof this.watches[t].onChange){var s=new Object,a=new Array;"undefined"!=typeof this.watches[t].data&&(this.watches[t].data.constructor==Function?s=this.watches[t].data.call(e):"object"==typeof this.watches[t].data&&$u.o.assign(s,this.watches[t].data)),"undefined"!=typeof this.watches[t].watch&&(this.watches[t].watch.constructor==Function?a=this.watches[t].watch.call(e,s):"object"==typeof this.watches[t].watch&&$u.o.assign(s,this.watches[t].watch)),
A5.Watch.add(i,a,{data:s,onChange:this.watches[t].onChange})}$sa(e,"A5ControlBound","true")},setDisabled:function(e){var t=this._getButtons(arguments[1]);if(t)if(e){for(var i=0;i<t.length;i++)t[i].disabled=!0,this._hasIcon&&""!=this.disabledIcon&&A5.u.icon.update($(t[i].id+".ICON"),this.disabledIcon);""!=this.disabledClassName&&$acn(t,this.disabledClassName)}else{for(var i=0;i<t.length;i++)t[i].disabled=!1,this._hasIcon&&A5.u.icon.update($(t[i].id+".ICON"),this.icon);""!=this.disabledClassName&&$rcn(t,this.disabledClassName)}},setDisplay:function(e){var t=this._getButtons(arguments[1]);if(t)if(e)for(var i=0;i<t.length;i++)A5.u.element.show(t[i],this.animation.show);else for(var i=0;i<t.length;i++)A5.u.element.hide(t[i],this.animation.hide)},refresh:function(){var e=this._getButtons(arguments[0]);if(e)for(var t=0;t<e.length;t++)this._setContent(e[t])},_setContent:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:{hasIcon:this._hasIcon,html:this.html,tip:this.tip,icon:this.icon,hoverIcon:this.hoverIcon,pressedIcon:this.pressedIcon,disabledIcon:this.disabledIcon};""!=t.icon&&"undefined"!=typeof t.icon&&this.layout.search("icon")!=-1&&(t.hasIcon=!0);var i=t.hasIcon?A5.u.icon.html(t.icon,'id="'+e.id+'.ICON" class="'+this.iconClassName+'" style="vertical-align: middle; border: none;"'):"",s="";if("icon"==this.layout?s=i:"text"==this.layout?s=t.html:"icon text"==this.layout?s=i+" "+t.html:"text icon"==this.layout?s=t.html+" "+i:"icon/text"==this.layout?s=i+"<br />"+t.html:"text/icon"==this.layout?s=t.html+"<br />"+i:"icon-text"==this.layout?s='<table style="width: 100%;"><tr><td style="text-align: left;">'+i+'</td><td style="text-align: right;">'+t.html+"</td></tr></table>":"text-icon"==this.layout&&(s='<table style="width: 100%;"><tr><td style="text-align: left;">'+t.html+'</td><td style="text-align: right;">'+i+"</td></tr></table>"),e.innerHTML=s,e.title=t.tip,"object"==typeof this.iconStyle||"string"==typeof this.iconStyle)for(var a=e.getElementsByTagName("img"),n=0;n<a.length;n++)a[n].id==e.id+".ICON"&&$ss(a[n],this.iconStyle)},_getButtons:function(e){var t=new Array,i=0;if("undefined"==typeof e)for(var s=0;s<this._buttonIds.length;s++)i=$(this._buttonIds[s]),i&&t.push(i);else if(e.constructor==Array)for(var s=0;s<e.length;s++)i=$(e[s]),i&&t.push(i);else $(e)&&t.push($(e));return 0!=t.length&&t},_getIcon:function(e){var t=e.id+".ICON";iEle=!1,tEles=e.getElementsByTagName("img");for(var i=0;i<tEles.length;i++)if(tEles[i].id==t){iEle=tEles[i];break}if(!iEle){tEles=e.getElementsByTagName("i");for(var i=0;i<tEles.length;i++)if(tEles[i].id==t){iEle=tEles[i];break}}return iEle},_mOver:function(e,t){this.disabled||(""!=t.hoverClassName&&$acn(this,t.hoverClassName),t._hasIcon&&""!=t.hoverIcon&&A5.u.icon.update($(this.id+".ICON"),t.hoverIcon))},_mOut:function(e,t){""!=t.hoverClassName&&$rcn(this,t.hoverClassName),""!=t.pressedClassName&&$rcn(this,t.pressedClassName),t._hasIcon&&(this.disabled&&""!=t.disabledIcon?A5.u.icon.update($(this.id+".ICON"),t.disabledIcon):A5.u.icon.update($(this.id+".ICON"),t.icon))},_mDown:function(e,t){this.disabled||(""!=t.pressedClassName&&($acn(this,t.pressedClassName),A5.buttons._p[this.id]=t.pressedClassName),t._hasIcon&&""!=t.pressedIcon&&A5.u.icon.update($(this.id+".ICON"),t.pressedIcon)),$e.preventDefault(e),this.focus()},_mUp:function(e,t){this.disabled&&""!=t.disabledIcon?A5.u.icon.update($(this.id+".ICON"),t.disabledIcon):t._hasIcon&&""!=t.hoverIcon?A5.u.icon.update($(this.id+".ICON"),t.hoverIcon):t._hasIcon&&A5.u.icon.update($(this.id+".ICON"),t.icon)},_mClick:function(e,t){this.disabled||t.onClick.constructor==Function&&t.onClick.call(this,t)}},A5.ButtonToggle=Class.create(A5.Button,{initialize:function(e){this._states=0,"undefined"!=typeof arguments[1]&&(this._states=arguments[1]),$u.o.assign(this,{override:"base",type:"two-state",keepPressed:!0,style:0,className:"",hoverClassName:"",pressedClassName:"",disabledClassName:"",iconStyle:0,iconClassName:"",html:"",icon:"",hoverIcon:"",pressedIcon:"",disabledIcon:"",layout:"icon text",tip:"",animation:{show:{type:"",duration:500},hide:{type:"",duration:500}},onClick:0,watches:[],_hasIcon:!1}),"undefined"!=typeof e.theme&&A5.themes.assign(this,e.theme,"button"),$u.o.assign(this,e),A5.overrides.assign(this,"buttonToggle",this.override),""!=this.icon&&this.layout.search("icon")!=-1&&(this._hasIcon=!0),this._buttonIds=new Array},setValue:function(e){var t=this._getButtons(arguments[1]);if(t)if("multi-state"!=this.type||"number"!=typeof e&&"string"!=typeof e)if(e){if(""!=this.pressedClassName&&this.keepPressed&&$acn(t,this.pressedClassName),this._hasIcon&&""!=this.pressedIcon&&this.keepPressed)for(var i=0;i<t.length;i++)A5.u.icon.update(this._getIcon(t[i]),this.pressedIcon);$sa(t,"A5ButtonState","true")}else{if(""!=this.pressedClassName&&$rcn(t,this.pressedClassName),this._hasIcon&&""!=this.icon)for(var i=0;i<t.length;i++)A5.u.icon.update(this._getIcon(t[i]),this.icon);$sa(t,"A5ButtonState","false")}else{for(var i=0;i<t.length;i++)this._setContent(t[i],this._states[e]);$sa(t,"A5ButtonState",""+e)}},getValue:function(){var e=this._getButtons(arguments[0]);if(e){if("multi-state"==this.type){if(1==e.length)return Number($ga(e[0],"A5ButtonState"));for(var t=[],i=0;i<e.length;i++)t.push(Number($ga(e[i],"A5ButtonState")));return t}if(1==e.length)return $u.s.toBool($ga(e[0],"A5ButtonState"));for(var t=[],i=0;i<e.length;i++)t.push($u.s.toBool($ga(e[i],"A5ButtonState")));return t}return"multi-state"==this.type&&-1},_mOver:function(e,t){if(!this.disabled){if("multi-state"==t.type){var i=$ga(this,"A5ButtonState");t._states.constructor==Array&&(i="string"==typeof i?Number(i):0);var s={icon:"",hoverIcon:"",pressedIcon:"",disabledIcon:""};$u.o.assign(s,t._states[i])}else var s=t;""!=t.hoverClassName&&$acn(this,t.hoverClassName),t._hasIcon&&""!=s.hoverIcon&&"true"!=$ga(this,"A5ButtonState")&&A5.u.icon.update($(this.id+".ICON"),s.hoverIcon)}},_mOut:function(e,t){if(""!=t.hoverClassName&&$rcn(this,t.hoverClassName),"true"!=$ga(this,"A5ButtonState")&&(""!=t.pressedClassName&&($rcn(this,t.pressedClassName),A5.buttons._p[this.id]=t.pressedClassName),t._hasIcon)){if("multi-state"==t.type){var i=$ga(this,"A5ButtonState");t._states.constructor==Array&&(i="string"==typeof i?Number(i):0);var s={icon:"",hoverIcon:"",pressedIcon:"",disabledIcon:""};$u.o.assign(s,t._states[i])}else var s=t;this.disabled&&""!=s.disabledIcon?A5.u.icon.update($(this.id+".ICON"),s.disabledIcon):A5.u.icon.update($(this.id+".ICON"),s.icon)}},_mUp:function(e,t){if(""!=t.pressedClassName&&$rcn(this,t.pressedClassName),"true"==$ga(this,"A5ButtonState")||"multi-state"==t.type){if("multi-state"==t.type){var i=$ga(this,"A5ButtonState");t._states.constructor==Array&&(i="string"==typeof i?Number(i):0);var s={icon:"",hoverIcon:"",pressedIcon:"",disabledIcon:""};$u.o.assign(s,t._states[i])}else var s=t;this.disabled&&""!=s.disabledIcon?A5.u.icon.update($(this.id+".ICON"),s.disabledIcon):t._hasIcon&&""!=s.hoverIcon?A5.u.icon.update($(this.id+".ICON"),s.hoverIcon):t._hasIcon&&A5.u.icon.update($(this.id+".ICON"),s.icon)}},_mClick:function(e,t){if(!this.disabled){if("multi-state"==t.type){var i=$ga(this,"A5ButtonState");t._states.constructor==Array&&(i="string"==typeof i?Number(i):0,i+1<t._states.length?i++:i=0),t._setContent(this,t._states[i]),$sa(this,"A5ButtonState",""+i)}else{var i=!0;"true"!=$ga(this,"A5ButtonState")?(""!=t.pressedClassName&&t.keepPressed&&$acn(this,t.pressedClassName),$sa(this,"A5ButtonState","true")):(""!=t.pressedClassName&&$rcn(this,t.pressedClassName),$sa(this,"A5ButtonState","false"),i=!1)}t.onClick.constructor==Function&&t.onClick.call(this,t,i)}}}),A5.ButtonDropdown=Class.create(A5.Button,{initialize:function(e){this._control=0,"undefined"!=typeof arguments[1]&&(this._control=arguments[1]),$u.o.assign(this,{override:"base",type:"",style:0,className:"",hoverClassName:"",pressedClassName:"",disabledClassName:"",contentClassName:"",iconStyle:0,iconClassName:"",html:"",icon:"",hoverIcon:"",pressedIcon:"",disabledIcon:"",layout:"icon text",dropdown:{location:"right",className:"",hoverClassName:"",html:"",icon:""},tip:"",animation:{show:{type:"",duration:500},hide:{type:"",duration:500}},defaultValue:"",onClick:0,watches:[],_hasIcon:!1}),"string"==typeof e.type?"split"!=e.type&&(e.type="dropdown"):e.type="dropdown","undefined"!=typeof e.theme&&("split"==e.type?A5.themes.assign(this,e.theme,"buttonSplit"):A5.themes.assign(this,e.theme,"buttonDropdown")),$u.o.assign(this,e),A5.overrides.assign(this,"buttonDropdown",this.override),""!=this.icon&&this.layout.search("icon")!=-1&&(this._hasIcon=!0),"object"!=typeof this._control&&"function"!=typeof this._control||("function"==typeof this._control.onHide?(this._control._onHide=this._control.onHide,this._control.onHide=Function("$sa(this._targetId,'A5ButtonState','false'); $e.execute(this._targetId,'mouseup'); this._onHide();")):this._control.onHide=Function("$sa(this._targetId,'A5ButtonState','false'); $e.execute(this._targetId,'mouseup');")),this._buttonIds=[],this._buttonContent={}},refresh:function(){var e=this._getButtons(arguments[0]);if(e)for(var t=0;t<e.length;t++)"undefined"!=typeof this._buttonContent[e[t].id]?this._setContent(e[t],this._buttonContent[e[t].id]):this._setContent(e[t])},setState:function(e,t){e=$(e),t?($sa(e,"A5ButtonState","true"),""!=this.pressedClassName&&$acn(e,this.pressedClassName),this._hasIcon&&""!=this.pressedIcon&&A5.u.icon.update($(e.id+".ICON"),this.pressedIcon)):($sa(e,"A5ButtonState","false"),""!=this.pressedClassName&&$rcn(e,this.pressedClassName),this.disabled&&""!=this.disabledIcon?A5.u.icon.update($(e.id+".ICON"),this.disabledIcon):this._hasIcon&&""!=this.hoverIcon&&"true"==$ga(e,"A5ButtonMOver")?A5.u.icon.update($(e.id+".ICON"),this.hoverIcon):this._hasIcon&&A5.u.icon.update($(e.id+".ICON"),this.icon))},setContent:function(e){var t=this._getButtons(arguments[1]);if(t){var i={hasIcon:this._hasIcon,html:this.html,tip:this.tip,icon:this.icon,hoverIcon:this.hoverIcon,pressedIcon:this.pressedIcon,disabledIcon:this.disabledIcon};"object"==typeof e&&$u.o.assign(e,i,!0);for(var s=0;s<t.length;s++)"object"==typeof e?(this._setContent(t[s],e),this._buttonContent[t[s].id]=e):(this._setContent(t[s]),delete this._buttonContent[t[s].id])}},clearContent:function(){this._buttonContent={},this.refresh()},_bind:function(e){if("true"==$ga(e,"A5ControlBound"))return!0;if(e.length){for(var t=0;t<e.length;t++)""==e[t].id&&(e[t].id=e[t].name+"."+t),this._bind(e[t]);return!1}if(""!=this.className&&$acn(e,this.className),"object"!=typeof this.style&&"string"!=typeof this.style||$ss(e,this.style),A5.flags.supportsMouse&&($e.remove(e,"mouseover",this._mOver),$e.remove(e,"mouseout",this._mOut)),$e.remove(e,A5.d.evnts.move,this._mMove),$e.remove(e,A5.d.evnts.down,this._mDown),$e.remove(e,A5.d.evnts.up,this._mUp),$e.remove(e,A5.d.evnts.click,this._mClick),A5.flags.supportsMouse&&($e.add(e,"mouseover",this._mOver,this),$e.add(e,"mouseout",this._mOut,this)),$e.add(e,A5.d.evnts.move,this._mMove,this),$e.add(e,A5.d.evnts.down,this._mDown,this),$e.add(e,A5.d.evnts.up,this._mUp,this),$e.add(e,A5.d.evnts.click,this._mClick,this),this._setContentInit(e),this._buttonIds.push(e.id),this.watches.length>0)for(var i=""!=e.id?e.id:e.name,t=0;t<this.watches.length;t++)if("undefined"!=typeof this.watches[t].onChange){var s=new Object,a=new Array;"undefined"!=typeof this.watches[t].data&&(this.watches[t].data.constructor==Function?s=this.watches[t].data.call(e):"object"==typeof this.watches[t].data&&$u.o.assign(s,this.watches[t].data)),"undefined"!=typeof this.watches[t].watch&&(this.watches[t].watch.constructor==Function?a=this.watches[t].watch.call(e,s):"object"==typeof this.watches[t].watch&&$u.o.assign(s,this.watches[t].watch)),A5.Watch.add(i,a,{data:s,onChange:this.watches[t].onChange})}$sa(e,"A5ControlBound","true")},_setContentInit:function(e){"bottom"==this.dropdown.location?e.innerHTML='<table cellpadding="0" cellspacing="0" style="width: 100%; height: 100%;"><tr><td id="'+e.id+'.CONTENT" class="'+this.contentClassName+'" style="white-space: nowrap;"></td></tr><tr><td id="'+e.id+'.SPLIT" class="'+this.dropdown.className+'"><span style="white-space: nowrap;"></span></td></tr></table>':e.innerHTML='<table cellpadding="0" cellspacing="0" style="width: 100%; height: 100%;"><tr><td id="'+e.id+'.CONTENT" class="'+this.contentClassName+'" style="white-space: nowrap;"></td><td id="'+e.id+'.SPLIT" class="'+this.dropdown.className+'"><span style="white-space: nowrap;"></span></td></tr></table>',$ss(e,$gs(e)+"; overflow: visible; -webkit-appearance: none; -webkit-box-sizing: content-box; -webkit-box-align: start; -webkit-border-fit: lines; -webkit-margin-collapse: discard;"),this._setContent(e)},_setContent:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:{hasIcon:this._hasIcon,html:this.html,tip:this.tip,icon:this.icon,hoverIcon:this.hoverIcon,pressedIcon:this.pressedIcon,disabledIcon:this.disabledIcon};""!=t.icon&&"undefined"!=typeof t.icon&&this.layout.search("icon")!=-1&&(t.hasIcon=!0);for(var i=t.hasIcon?A5.u.icon.html(t.icon,'id="'+e.id+'.ICON" class="'+this.iconClassName+'" style="vertical-align: middle; border: none;"'):"",s="",a=e.getElementsByTagName("td"),n=0,o=0,r=0;r<a.length;r++)a[r].id==e.id+".CONTENT"?n=a[r]:a[r].id==e.id+".SPLIT"&&(o=a[r]);if("icon"==this.layout?s=i:"text"==this.layout?s=t.html:"icon text"==this.layout?s=i+" "+t.html:"text icon"==this.layout?s=t.html+" "+i:"icon/text"==this.layout?s=i+"<br />"+t.html:"text/icon"==this.layout?s=t.html+"<br />"+i:"text-icon"==this.layout?s='<table style="width: 100%;"><tr><td style="text-align: left;">'+t.html+'</td><td style="text-align: right;">'+i+"</td></tr></table>":"icon-text"==this.layout&&(s='<table style="width: 100%;"><tr><td style="text-align: left;">'+i+'</td><td style="text-align: right;">'+t.html+"</td></tr></table>"),n.innerHTML=s,e.title=t.tip,s="",""!=this.dropdown.html&&(s=this.dropdown.html),""!=s&&"bottom"==this.dropdown.location&&(s+="<br />"),""!=this.dropdown.icon&&(s+=A5.u.icon.html(this.dropdown.icon)),o.firstChild.innerHTML=s,""!=e.style.height&&(e.firstChild.style.height=e.offsetHeight-2+"px"),""!=e.style.height&&"bottom"==this.dropdown.location?o.style.height=o.firstChild.offsetHeight+"px":""!=e.style.width&&"bottom"!=this.dropdown.location&&(o.style.width=o.firstChild.offsetWidth+"px"),"object"==typeof this.iconStyle||"string"==typeof this.iconStyle)for(var l=e.getElementsByTagName("img"),r=0;r<l.length;r++)l[r].id==e.id+".ICON"&&$ss(l[r],this.iconStyle)},_parseValues:function(){this._data=[];var e={hasIcon:this.hasIcon,html:this.html,tip:this.tip,icon:this.icon,hoverIcon:this.hoverIcon,pressedIcon:this.pressedIcon,disabledIcon:this.disabledIcon};if(this._data.push(e),this._data[0].value="",this.data.constructor==Array)for(var t=0;t<this.data.length;t++)"object"==typeof this.data[t]?(this._data.push(this.data[t]),"undefined"==typeof this._data[t+1].value&&"undefined"!=typeof this._data[t+1].html&&(this._data[t+1].value=this._data[t+1].html)):this._data.push({html:""+this.data[t],value:""+this.data[t]}),$u.o.assign(this._data[t+1],e,!0),""!=this._data[t+1].icon&&this.layout.search("icon")!=-1&&(this._data[t+1]._hasIcon=!0)},_mOver:function(e,t){if($sa(this,"A5ButtonMOver","true"),!this.disabled&&(""!=t.hoverClassName&&$acn(this,t.hoverClassName),t._hasIcon&&""!=t.hoverIcon&&"true"!=$ga(this,"A5ButtonState")&&A5.u.icon.update($(this.id+".ICON"),t.hoverIcon),"split"==t.type&&""!=t.dropdown.hoverClassName)){var i=$(this.id+".SPLIT");t._sl=$gpl(i),t._st=$gpt(i)}},_mOut:function(e,t){$sa(this,"A5ButtonMOver","false"),""!=t.hoverClassName&&$rcn(this,t.hoverClassName),""!=t.dropdown.hoverClassName&&$rcn($(this.id+".SPLIT"),t.dropdown.hoverClassName),"true"!=$ga(this,"A5ButtonState")&&(""!=t.pressedClassName&&$rcn(this,t.pressedClassName),t._hasIcon&&(this.disabled&&""!=t.disabledIcon?A5.u.icon.update($(this.id+".ICON"),t.disabledIcon):A5.u.icon.update($(this.id+".ICON"),t.icon)))},_mMove:function(e,t){if(!this.disabled&&"split"==t.type&&""!=t.dropdown.hoverClassName){if(void 0===e.pageX)var i=e.clientX+document.documentElement.scrollLeft,s=e.clientY+document.documentElement.scrollTop;else var i=e.pageX,s=e.pageY;var a=$(this.id+".SPLIT");i>=t._sl&&i<=t._sl+a.offsetWidth&&s>=t._st&&s<=t._st+a.offsetHeight?$acn(a,t.dropdown.hoverClassName):$rcn(a,t.dropdown.hoverClassName)}},_mDown:function(e,t){this.disabled||(""!=t.pressedClassName&&($acn(this,t.pressedClassName),A5.buttons._p[this.id]=t.pressedClassName),t._hasIcon&&""!=t.pressedIcon&&A5.u.icon.update($(this.id+".ICON"),t.pressedIcon)),$e.preventDefault(e),this.focus()},_mUp:function(e,t){"true"!=$ga(this,"A5ButtonState")&&(""!=t.pressedClassName&&$rcn(this,t.pressedClassName),this.disabled&&""!=t.disabledIcon?A5.u.icon.update($(this.id+".ICON"),t.disabledIcon):t._hasIcon&&""!=t.hoverIcon&&"true"==$ga(this,"A5ButtonMOver")?A5.u.icon.update($(this.id+".ICON"),t.hoverIcon):t._hasIcon&&A5.u.icon.update($(this.id+".ICON"),t.icon))},_mClick:function(e,t){if(!this.disabled){var i="normal",s=!1;if("split"==t.type){if(void 0===e.pageX)var a=e.clientX+document.documentElement.scrollLeft,n=e.clientY+document.documentElement.scrollTop;else var a=e.pageX,n=e.pageY;var o=$(this.id+".SPLIT"),r=$gpl(o),l=$gpt(o);a>=r&&a<=r+o.offsetWidth&&n>=l&&n<=l+o.offsetHeight&&(i="split"),"split"!=i||"object"!=typeof t._control&&"function"!=typeof t._control||(s=!0)}else"object"!=typeof t._control&&"function"!=typeof t._control||(s=!0);s&&(t._control._targetId=this.id,t._control.show&&t._control.show("dropdown",this),""!=t.pressedClassName&&$acn(this,t.pressedClassName),t._hasIcon&&""!=t.pressedIcon&&A5.u.icon.update($(this.id+".ICON"),t.pressedIcon),$sa(this,"A5ButtonState","true")),t.onClick.constructor==Function&&t.onClick.call(this,t,i)}}}),A5.ButtonList=Class.create(),A5.ButtonList.prototype={initialize:function(e,t,i){this.contId=e,$u.o.assign(this,{override:"base",inputId:"",multiple:!1,allowNullSelection:"auto",separator:"\n",className:"",nullSelectionClassName:"",button:{keepPressed:!0,style:0,className:"",firstClassName:"",lastClassName:"",middleClassName:"",hoverClassName:"",pressedClassName:"",selectedClassName:"",disabledClassName:"",iconStyle:0,iconClassName:"",layout:"icon text"},onSelect:0,onClick:0,onBeforePopulate:0,onPopulate:0,_hasIcon:!1}),"undefined"!=typeof i.theme&&A5.themes.assign(this,i.theme,"buttonList"),$u.o.assign(this,i),A5.overrides.assign(this,"buttonList",this.override),""!=this.className&&$acn(e,this.className),this.button.layout.search("icon")!=-1&&(this._hasIcon=!0),this.selection=[],this.value=[],this.populate(t)},setValue:function(e){var t="undefined"==typeof arguments[1]||arguments[1],i=-1;if(this.selection=[],e.constructor==Array)for(var s=0;s<e.length;s++)i=this._valToIndx(e[s]),i!=-1&&this.selection.push(i);else i=this._valToIndx(e),i!=-1&&(this.selection=[i]);this._setState($(this.contId)),""!=this.inputId&&($(this.inputId).value=this.value.join(this.separator),t&&$e.execute(this.inputId,"change")),this.onSelect.constructor==Function&&t&&this.onSelect()},setDisabled:function(e,t){if("boolean"!=typeof t){for(var i=$(this.contId),s=i.getElementsByTagName("button"),a=0;a<s.length;a++)s[a].disabled=e;this._setState(i)}else{var n=this._valToIndx(e);if(n>=0&&n<this._btns.length){var i=$(this.contId),s=i.getElementsByTagName("button");s[n].disabled=t,this._setState(i)}}},setDisplay:function(e,t){var i=this._valToIndx(e);if(i>=0&&i<this._btns.length){var s=$(this.contId),a=s.getElementsByTagName("button");t?a[i].style.display="":a[i].style.display="none",this._setState(s)}},populate:function(e){if(this.onBeforePopulate.constructor==Function){var t=this.onBeforePopulate.call(this,e);if("boolean"==typeof t&&!t)return!1}var i=$(this.contId);i.innerHTML="",this._btns=[],this.appendButtons(e),this.allowNullSelection===!1&&0==this.value.length&&(this.selection=[0],this._setState(i)),this.onPopulate.constructor==Function&&this.onPopulate.call(this,this._btns)},appendButtons:function(e){for(var t=$(this.contId),i=0;i<e.length;i++){var s=document.createElement("button");s.id=A5.u.getUniqueId(),"object"!=typeof this.button.style&&"string"!=typeof this.button.style||$ss(s,this.button.style),t.appendChild(s),this._setContent(s,e[i]),this._btns.push(e[i])}this._setState(t)},insertButtons:function(e,t){var i=this._valToIndx(e);if(i>=0&&i<this._btns.length){for(var s=$(this.contId),a=s.getElementsByTagName("button"),n=a[i],o=0;o<t.length;o++){var r=document.createElement("button");r.id=A5.u.getUniqueId(),"object"!=typeof this.button.style&&"string"!=typeof this.button.style||$ss(r,this.button.style),s.insertBefore(r,n),this._setContent(r,t[o]),n=r.nextSibling,this._btns.splice(i+o,0,t[o])}for(var o=0;o<this.selection.length;o++)this.selection[o]>=i&&(this.selection[o]+=t.length);this._setState(s)}},removeButton:function(e){var t=$(this.contId),i=this._valToIndx(e),s=t.getElementsByTagName("button");if(i!=-1){t.removeChild(s[i]),this._btns.splice(i,1);for(var a=0;a<this.selection.length;a++)this.selection[a]>=i&&this.selection[a]--;this._setState(t)}},updateButton:function(e,t){var i=$(this.contId),s=this._valToIndx(e),a=i.getElementsByTagName("button");s!=-1&&(this._setContent(a[s],t,!0),this._setState(i))},_valToIndx:function(e){if("number"==typeof e)return e;for(var t=0;t<this._btns.length;t++)if(this._btns[t].value==e)return t;return-1},_setState:function(e){var t=e.getElementsByTagName("button");this.value=[],A5.u.element.cssGroup(t,this.button);for(var i=0;i<t.length;i++){t[i].disabled?$acn(t[i],this.button.disabledClassName):$rcn(t[i],this.button.disabledClassName);var s=$if(this._btns[i].pressedClassName,this._btns[i].pressedClassName,this.button.pressedClassName);$u.a.find(this.selection,i)!=-1?($sa(t[i],"A5ButtonState","true"),this.button.keepPressed?$acn(t[i],s):$rcn(t[i],s),this.value.push(this._btns[i].value),""!=this.button.selectedClassName&&$acn(t[i],this.button.selectedClassName)):($sa(t[i],"A5ButtonState",""),$rcn(t[i],s),""!=this.button.selectedClassName&&$rcn(t[i],this.button.selectedClassName));var a=$(t[i].id+".ICON");a&&(t[i].disabled&&""!=this._btns[i].disabledIcon?A5.u.icon.update(a,this._btns[i].disabledIcon):"true"==$ga(t[i],"A5ButtonState")&&""!=this._btns[i].pressedIcon?A5.u.icon.update(a,this._btns[i].pressedIcon):A5.u.icon.update(a,this._btns[i].icon)),$sa(t[i],"A5ButtonIndex",""+i)}""!=this.nullSelectionClassName&&(0==this.value.length?$acn(e,this.nullSelectionClassName):$rcn(e,this.nullSelectionClassName))},_setContent:function(e,t){var i=arguments[2];$u.o.assign(t,this._bDef,!0),""==t.value&&(t.value=t.html),""!=t.icon&&"undefined"!=typeof t.icon&&this.button.layout.search("icon")!=-1&&(t.hasIcon=!0);var s=t.hasIcon?A5.u.icon.html(t.icon,'id="'+e.id+'.ICON" class="'+this.button.iconClassName+'" style="vertical-align: middle; border: none;"'):"",a="";if("icon"==this.button.layout?a=s:"text"==this.button.layout?a=t.html:"icon text"==this.button.layout?a=s+" "+t.html:"text icon"==this.button.layout?a=t.html+" "+s:"icon/text"==this.button.layout?a=s+"<br />"+t.html:"text/icon"==this.button.layout?a=t.html+"<br />"+s:"text-icon"==this.button.layout?a='<table style="width: 100%;"><tr><td style="text-align: left;">'+t.html+'</td><td style="text-align: right;">'+s+"</td></tr></table>":"icon-text"==this.button.layout&&(a='<table style="width: 100%;"><tr><td style="text-align: left;">'+s+'</td><td style="text-align: right;">'+t.html+"</td></tr></table>"),e.innerHTML=a,e.title=t.tip,$sa(e,"A5ButtonIcon",t.icon),$sa(e,"A5ButtonIconHover",t.hoverIcon),$sa(e,"A5ButtonIconPressed",t.pressedIcon),$sa(e,"A5ButtonIconDisabled",t.disabledIcon),"object"!=typeof this.button.iconStyle&&"string"!=typeof this.button.iconStyle||(iEle=$(e.id+".ICON"),iEle&&$ss(iEle,this.button.iconStyle)),!i){e.className=this.button.className+$if(t.className," "+t.className,"");var n=$if(t.pressedClassName,t.pressedClassName,this.button.pressedClassName);if(A5.flags.supportsMouse){var o=$if(t.hoverClassName,t.hoverClassName,this.button.hoverClassName);$e.add(e,"mouseover",Function("$acn(this,'"+o+"');var iEle = $(this.id+'.ICON'); if(iEle){ if(this.disabled && $ga(this,'A5ButtonIconDisabled') != ''){ A5.u.icon.update(iEle,$ga(this,'A5ButtonIconDisabled')); } else if($ga(this,'A5ButtonState') == 'true' && $ga(this,'A5ButtonIconPressed') != ''){ A5.u.icon.update(iEle,$ga(this,'A5ButtonIconPressed')); } else if($ga(this,'A5ButtonIconHover') != ''){ A5.u.icon.update(iEle,$ga(this,'A5ButtonIconHover')); }}")),$e.add(e,"mouseout",Function("$rcn(this,'"+o+"'); if($ga(this,'A5ButtonState') != 'true') $rcn(this,'"+n+"');var iEle = $(this.id+'.ICON'); if(iEle){ if(this.disabled && $ga(this,'A5ButtonIconDisabled') != ''){ A5.u.icon.update(iEle,$ga(this,'A5ButtonIconDisabled'));} else if($ga(this,'A5ButtonState') == 'true' && $ga(this,'A5ButtonIconPressed') != ''){ A5.u.icon.update(iEle,$ga(this,'A5ButtonIconPressed'));} else{ A5.u.icon.update(iEle,$ga(this,'A5ButtonIcon'));}}"))}$e.add(e,A5.d.evnts.down,Function("$acn(this,'"+n+"'); A5.buttons._p[this.id] = '"+n+"'; var iEle = $(this.id+'.ICON'); if(iEle){ if(this.disabled && $ga(this,'A5ButtonIconDisabled') != ''){ A5.u.icon.update(iEle,$ga(this,'A5ButtonIconDisabled'));} else if($ga(this,'A5ButtonState') == 'true' && $ga(this,'A5ButtonIconPressed') != ''){ A5.u.icon.update(iEle,$ga(this,'A5ButtonIconPressed'));} else{ A5.u.icon.update(iEle,$ga(this,'A5ButtonIcon'));}}")),$e.add(e,A5.d.evnts.click,this._onClick,this)}},_onClick:function(e,t){var i=Number($ga(this,"A5ButtonIndex"));if(t.multiple){var s=$u.a.find(t.selection,i);s==-1?t.selection.push(i):t.selection.splice(s,1),t.allowNullSelection===!1&&0==t.selection.length&&(t.selection=[i]),t._setState(this.parentNode)}else t.allowNullSelection===!0&&t.selection[0]==i?t.selection=[]:t.selection=[i],t._setState(this.parentNode);""!=t.inputId&&($(t.inputId).value=t.value.join(t.separator),$e.execute(t.inputId,"change")),t.onClick.constructor==Function&&t.onClick(),t.onSelect.constructor==Function&&t.onSelect()},_bDef:{value:"",html:"",icon:"",hoverIcon:"",pressedIcon:"",disabledIcon:"",tip:""}},A5.Menubar=Class.create({initialize:function(e,t,i){return!!$(e)&&(this.contId=e,$u.o.assign(this,{theme:"",override:"base",layout:"horizontal",className:"",item:{style:0,className:"",hoverClassName:"",pressedClassName:"",disabledClassName:"",cascadeClassName:"",separatorClassName:"",dropdown:{mode:"click"}}},!0),"undefined"!=typeof i.theme&&A5.themes.assign(this,i.theme,"menubar"),$u.o.assign(this,i),A5.overrides.assign(this,"menubar",this.override),this.data=t,void this._render())},getItem:function(e){var t=this._gIndex(e);return t!=-1&&this.data[t]},setDisplay:function(e,t){var i=this._gIndex(e);i!=-1&&(t?(A5.u.element.show($(this.data[i]._id)),this.data[i].show=!0):(A5.u.element.hide($(this.data[i]._id)),this.data[i].show=!1))},setDisabled:function(e,t){var i=this._gIndex(e);i!=-1&&(t?($acn(this.data[i]._id,this.item.disabledClassName),this.data[i].disabled=!0):($rcn(this.data[i]._id,this.item.disabledClassName),this.data[i].disabled=!1))},setState:function(e,t){var i=this._gIndex(e);i!=-1&&(t?($acn(this.data[i]._id,this.item.pressedClassName),this.data[i]._hasDropdown&&(this.data[i].dropdown._state=!0),this.data[i]._state=!0):($rcn(this.data[i]._id,this.item.pressedClassName),this.data[i]._hasDropdown&&(this.data[i].dropdown._state=!1),this.data[i]._state=!1))},_render:function(){var e=0,t=$(this.contId);""!=this.className&&$acn(t,this.className);for(var i=0;i<this.data.length;i++){if("-"==this.data[i]&&(this.data[i]={type:"separator"}),$u.o.assign(this.data[i],this._defaultItem,!0),this.data[i]._id=this.contId+".ITEM"+i,this.data[i]._state=!1,"custom"==this.data[i].type)e=document.createElement("span"),e.className=this._gDef(this.data[i].className,this.item.className),e.innerHTML=this.data[i].html;else if("separator"==this.data[i].type)e=document.createElement("span"),e.className=this._gDef(this.data[i].className,this.item.separatorClassName),e.innerHTML=this.data[i].html;else{""==this.data[i].html&&(this.data[i].html=this.data[i].name),""==this.data[i].name&&(this.data[i].name=this.data[i].html),this.data[i].dropdown.show&&(this.data[i]._hasDropdown=!0),e=document.createElement("div"),e.className=this._gDef(this.data[i].className,this.item.className);var s=this.data[i].html;""!=this.data[i].icon&&(s=A5.u.icon.html(this.data[i].icon)+s),this.data[i]._hasDropdown&&(this.data[i].dropdown._pressedClassName=this._gDef(this.data[i].pressedClassName,this.item.pressedClassName),this.data[i].dropdown._id=this.data[i]._id,this.data[i].dropdown._state=!1,this.data[i].dropdown._onShow=this.data[i].dropdown.onShow,this.data[i].dropdown.onShow=function(){this._onShow.constructor==Function&&this._onShow(),this._state||$acn(this._id,this._pressedClassName)},this.data[i].dropdown._onHide=this.data[i].dropdown.onHide,this.data[i].dropdown.onHide=function(){this._onHide.constructor==Function&&this._onHide(),this._state||$rcn(this._id,this._pressedClassName)},""!=this._gDef(this.data[i].cascadeClassName,this.item.cascadeClassName)&&(s='<span class="'+this._gDef(this.data[i].cascadeClassName,this.item.cascadeClassName)+'" style="display: block;">'+s+"</span>")),e.innerHTML=s,$e.add(e,"mouseover",this._iMOver,this),$e.add(e,"mouseout",this._iMOut,this),$e.add(e,A5.d.evnts.down,this._iMDown,this),$e.add(e,A5.d.evnts.up,this._iMUp,this),$e.add(e,A5.d.evnts.click,this._iClick,this)}e.id=this.data[i]._id,$sa(e,"A5MenuBarItemIndex",""+i),"object"==typeof this.data[i].style||"string"==typeof this.data[i].style?$ss(e,this.data[i].style):"object"!=typeof this.item.style&&"string"!=typeof this.item.style||"separator"==this.data[i].type||$ss(e,this.item.style),"vertical"==this.layout?e.style.display="block":e.style.display="inline-block",t.appendChild(e),0==this.data[i].show&&A5.u.element.hide(e),1==this.data[i].disabled&&$acn(e,this.item.disabledClassName),this.data[i].onInitialize.constructor==Function&&this.data[i].onInitialize.call(this,this.data[i])}},_iMOver:function(e,t){var i=Number($ga(this,"A5MenuBarItemIndex"));if(t.data[i].disabled||$acn(this,t._gDef(t.data[i].hoverClassName,t.item.hoverClassName)),"mouseover"==t.item.dropdown.mode){for(var s=0;s<t.data.length;s++)t.data[s].dropdown.hide&&t.data[s].dropdown.hide();t.data[i]._hasDropdown&&!t.data[i].disabled&&("vertical"==t.layout?t.data[i].dropdown.show("flyout",this):t.data[i].dropdown.show("dropdown",this))}},_iMOut:function(e,t){var i=Number($ga(this,"A5MenuBarItemIndex"));$rcn(this,t._gDef(t.data[i].hoverClassName,t.item.hoverClassName)),t.data[i]._state||t.data[i]._hasDropdown||$rcn(t.data[i]._id,t._gDef(t.data[i].pressedClassName,t.item.pressedClassName))},_iMDown:function(e,t){$e.stopEvent(e);var i=Number($ga(this,"A5MenuBarItemIndex"));t.data[i]._state||t.data[i]._hasDropdown||$acn(t.data[i]._id,t._gDef(t.data[i].pressedClassName,t.item.pressedClassName));for(var s=0;s<t.data.length;s++)t.data[s].dropdown.hide&&t.data[s].dropdown.hide();"mouseover"!=t.item.dropdown.mode&&t.data[i]._hasDropdown&&!t.data[i].disabled&&("vertical"==t.layout?t.data[i].dropdown.show("flyout",this):t.data[i].dropdown.show("dropdown",this))},_iMUp:function(e,t){var i=Number($ga(this,"A5MenuBarItemIndex"));t.data[i]._state||t.data[i]._hasDropdown||$rcn(t.data[i]._id,t._gDef(t.data[i].pressedClassName,t.item.pressedClassName))},_iClick:function(e,t){$e.stopEvent(e);var i=Number($ga(this,"A5MenuBarItemIndex"));t.data[i].onClick.constructor==Function&&t.data[i].onClick.call(this,t)},_gIndex:function(e){if("number"==typeof e&&e>-1&&e<this.data.length)return e;for(var t=0;t<this.data.length;t++)if(this.data[t].name==e)return t;return-1},_gDef:function(){for(var e=0;e<arguments.length;e++)if(""!=arguments[e])return arguments[e];return""},_defaultItem:{type:"item",html:"",icon:"",name:"",show:!0,disabled:!1,style:0,className:"",hoverClassName:"",pressedClassName:"",disabledClassName:"",cascadeClassName:"",onClick:0,onInitialize:0,dropdown:0,_hasDropdown:!1}}),A5.Menu=Class.create(),
A5.Menu.prototype={initialize:function(e,t){this._menuId="A5menu"+this._menuIndx[0],$u.o.assign(this,{override:"base",className:"",innerClassName:"",iconColumn:{show:!0,className:"",preventIndentClassName:"",width:""},closeOnLeave:!1,closeWait:200,cascadeOffsetX:0,cascadeOffsetY:0,dynamicDataURL:"",loadingMessage:"Loading...",item:{className:"",labelClassName:"",iconClassName:"",hoverClassName:"",selectedClassName:"",disabledClassName:"",disabledHoverClassName:"",cascadeClassName:"",separatorClassName:"",titleClassName:"",radioImage:"",checkImage:""},pointer:{show:!1,location:"auto",size:10,upClassName:"",leftClassName:"",downClassName:"",rightClassName:""},animation:{show:{type:"",duration:500},hide:{type:"",duration:500}},onClick:0,onFocus:0,onShow:0,onHide:0,onBeforePopulate:0,onPopulate:0,_showIt:0,_data:[]}),"undefined"!=typeof A5._menuDefaults&&$u.o.assign(this,A5._menuDefaults),"undefined"!=typeof t.theme&&A5.themes.assign(this,t.theme,"menu"),$u.o.assign(this,t),A5.overrides.assign(this,"menu",this.override),this._v=new Object,this._dmg=new Object,this.populate(e),this._menuIndx[0]=this._menuIndx[0]+1,this._lastDir="",this._curLevel=0,this._menuShown=[],this._timeout=0,this._focus=[],this._keyWatch=new AUI.KeyWatcher([{key:"up",handle:this._keyPrev},{key:"down",handle:this._keyNext},{key:"home",handle:this._keyHome},{key:"end",handle:this._keyLastEnd},{key:"left",handle:this._keyOut},{key:"right",handle:this._keyIn},{key:"enter",handle:this._keyEnter}],this)},populate:function(e){if(this.onBeforePopulate.constructor==Function){var t=this.onBeforePopulate.call(this,e,"full");if("boolean"==typeof t&&!t)return!1}e.constructor==Function||e.constructor==Object?(this._dmg["*top"]=e,this._genMenu([],0,""),this._data=[]):e.constructor==String?("?"==e.substr(0,1)?this._dmg["*top"]={data:e.substr(1)}:this._dmg["*top"]={url:e},this._genMenu([],0,""),this._data=[]):(this._genMenu(e,0,""),this._data=e),this.onPopulate.constructor==Function&&this.onPopulate.call(this,this._data)},populateItem:function(e,t){var i=$if(e.constructor==Array,e.length,1),s=this._gItem(this._data,e);if(this.onBeforePopulate.constructor==Function){var a=this.onBeforePopulate.call(this,t,"item",s);if("boolean"==typeof a&&!a)return!1}if(s&&"item"==s.type){var n=$(s._id);n.firstChild.className=this._gDef(s.cascadeClassName,this.item.cascadeClassName),s.children=t,$sa(n,"A5MenuHasChild","true"),$sa(n,"A5MenuChildId",this._menuId+"."+s._loc+".MENU"),this._genMenu(s.children,i,s._loc+".")}this.onPopulate.constructor==Function&&this.onPopulate.call(this,this._data)},show:function(e,t){var i=$(this._menuId+".MENU");A5.u.element.show(i,this.animation.show);var s=!1;if("dropdown"==e.toLowerCase()||"dropdown-right"==e.toLowerCase()||"flyout"==e.toLowerCase()||"flyout-bottom"==e.toLowerCase()||"popup"==e.toLowerCase()||"popup-bottom"==e.toLowerCase()){var a=$(t);a&&($po(i,a,e.toLowerCase(),$if(this.pointer.show,this.pointer.size,0)),this.pointer.show&&this._setPointer(e,i,a),s=!0)}else"undefined"!=typeof e&&"undefined"!=typeof t&&("Number"==typeof e?i.style.top=e+"px":i.style.top=e,"Number"==typeof t?i.style.left=t+"px":i.style.left=t);if(!s&&this.pointer.show&&this._setPointer(e,i,!1),this._curLevel=0,this._showIt++,this._menuShown=new Array(this._menuId+".MENU"),this._focus=[],$(this._menuId+".FOCUSCATCHER").focus(),"undefined"!=typeof this._dmg["*top"])if(this._dmg["*top"].constructor==Function){var n=this._dmg["*top"].call(this,{});this._genMenu(n,0,""),this._data=n}else{var o=this._dmg["*top"].url;""==o&&(o=this.dynamicDataURL),""!=o&&(new $a.simple(o,{data:$if(this._dmg["*top"].data,this._dmg["*top"].data+"&","")+"A5MenuLocation=[]&A5MenuValue=&__Ajax=true",handle:this._responseHandle,handleContext:this}),this.populate([{type:"custom",html:this.loadingMessage}]))}this.onShow.constructor==Function&&this.onShow.call(this);var r=this;setTimeout(function(){$e.add(document.documentElement,"mousedown",r.hide,r,!0),$e.add(document.documentElement,"touchstart",r.hide,r,!0),delete r},10)},hide:function(){for(var e="",t=0;t<this._menuShown.length;t++)A5.u.element.hide($(this._menuShown[t]),this.animation.hide),e=this._menuShown[t].split("."),e.pop(),e=e.join("."),ele=$(e),$rcn(ele,this._gDef($ga(ele,"A5MenuHoverClassName"),this.item.hoverClassName)),$rcn(ele,this._gDef($ga(ele,"A5MenuDisabledHoverClassName"),this.item.disabledHoverClassName));this._menuShown=new Array,ele=$(this._menuId+"."+this._focus.join(".")),$rcn(ele,this._gDef($ga(ele,"A5MenuHoverClassName"),this.item.hoverClassName)),$rcn(ele,this._gDef($ga(ele,"A5MenuDisabledHoverClassName"),this.item.disabledHoverClassName)),$e.remove(document.documentElement,"mousedown",this.hide),$e.remove(document.documentElement,"touchstart",this.hide),this.onHide.constructor==Function&&this.onHide.call(this)},setDisplay:function(e,t){var i=this._gItem(this._data,e);i&&(t?$(i._id).style.display="block":$(i._id).style.display="none")},setDisabled:function(e,t){var i=this._gItem(this._data,e);if(i){var s=$(i._id);t?(s.className=this._gDef(i.className,this.item.className)+" "+this._gDef(i.disabledClassName,this.item.disabledClassName),$sa(s,"A5MenuDisabled","true")):(s.className=this._gDef(i.className,this.item.className),$sa(s,"A5MenuDisabled","false"))}},setValue:function(e,t){this._v[e]=t;for(var i="undefined"!=typeof arguments[2]?arguments[2]:this._data,s=0;s<i.length;s++){if("item"==i[s].type&&i[s].variable==e)t==i[s].name?$acn(i[s]._id,this._gDef(i[s].selectedClassName,this.item.selectedClassName)):$rcn(i[s]._id,this._gDef(i[s].selectedClassName,this.item.selectedClassName));else if("radio"==i[s].type&&i[s].variable==e)t==i[s].name?$(i[s]._id+".ICON").style.visibility="":$(i[s]._id+".ICON").style.visibility="hidden";else if("check"==i[s].type&&i[s].variable==e)t?$(i[s]._id+".ICON").style.visibility="":$(i[s]._id+".ICON").style.visibility="hidden";else if("radio-group"==i[s].type&&i[s].variable==e)for(var a=0;a<i[s].data.length;a++)i[s].data[a].value==t?$acn(i[s]._id+":"+a,this._gDef(i[s].selectedClassName,this.item.selectedClassName)):$rcn(i[s]._id+":"+a,this._gDef(i[s].selectedClassName,this.item.selectedClassName));i[s].children.constructor==Array&&this.setValue(e,t,i[s].children)}},getValue:function(e){return this._v[e]},navigate:function(e){if(e=e.toLowerCase(),this._lastDir=e,0!=this._focus.length){var t=this._gItem(this._data,this._focus);if("radio-group"==t.type){if("prev"==e.substr(0,4)&&t._focus>t._cols-1)return this._menuRGItemMOver.call($(t._id+":"+(t._focus-t._cols)),{},this),!0;if("next"==e&&t._focus<t.data.length-t._cols)return this._menuRGItemMOver.call($(t._id+":"+(t._focus+t._cols)),{},this),!0;if("in"==e&&t._focus+1<t.data.length)return this._menuRGItemMOver.call($(t._id+":"+(t._focus+1)),{},this),!0;if("out"==e&&t._focus-1>-1)return this._menuRGItemMOver.call($(t._id+":"+(t._focus-1)),{},this),!0}return this._navigate(e)}if(this._itemFocus(this._gItemRel(this._data,-1,1)))return!0},_navigate:function(e){if(this._menuItemMOut.call($(this._menuId+"."+this._focus.join(".")),{},this),"prev"==e.substr(0,4)||"next"==e||"home"==e||"end"==e){var t=(this._focus.length,this._focus.pop());if(0==this._focus.length)var i=this._data;else var i=this._gItem(this._data,this._focus).children;if("prev"==e.substr(0,4)){if(this._itemFocus(this._gItemRel(i,t,-1)))return!0}else if("next"==e){if(this._itemFocus(this._gItemRel(i,t,1)))return!0}else if("home"==e){if(this._itemFocus(this._gItemRel(i,-1,1)))return!0}else if("end"==e&&this._itemFocus(this._gItemRel(i,i.length,-1)))return!0}else if("in"==e){var i=this._gItem(this._data,this._focus).children;if(this._itemFocus(this._gItemRel(i,-1,1)))return!0}else if("out"==e&&this._focus.length>1){if(this._focus.pop(),this._itemFocus(this._gItem(this._data,this._focus)))return!0}else if("enter"==e){var s=this._gItem(this._data,this._focus);if(("item"==s.type||"radio"==s.type||"check"==s.type||"radio-group"==s.type)&&0==s.children)return""!=s.variable&&("radio"==s.type?this.setValue(s.variable,s.name):"check"==s.type?this.setValue(s.variable,!this._v[s.variable]):"radio-group"==s.type&&s._focus>-1&&this.setValue(s.variable,s.data[s._focus].value)),s.onClick.constructor==Function?s.onClick.call(this,s):this.onClick.constructor==Function&&this.onClick.call(this,s),s.preventHide||this.hide(),!0;if(0!=s.children){var i=this._gItem(this._data,this._focus).children;if(this._itemFocus(this._gItemRel(i,-1,1)))return!0}else this.hide()}this._menuItemMOver.call($(this._menuId+"."+this._focus.join(".")),{},this)},_genMenu:function(e,t,i){if($(this._menuId+"."+i+"MENU")){var s=$(this._menuId+"."+i+"MENU");$e.removeGroup(this._menuId+"."+i+"MENU")}else{var s=document.createElement("div");document.body.insertBefore(s,document.body.firstChild),s.id=this._menuId+"."+i+"MENU",s.style.display="none",s.style.position="absolute",s.style.zIndex=""+(1e3+t),$e.add(s,"mousedown",function(e){$e.stopPropagation(e)}),$e.add(s,"touchstart",function(e){$e.stopPropagation(e)})}s.className=this.className;for(var a=!1,n=0;n<e.length;n++)e[n]=this._parseMenuItem(e[n],i+n),e[n]._index=n,""==e[n].icon&&"radio"!=e[n].type&&"check"!=e[n].type||(a=!0);"boolean"==typeof this.iconColumn.show?a=this.iconColumn.show:"auto"!=this.iconColumn.show&&(a=!0);var o="";if(0==t&&(o='<div id="'+this._menuId+'.POINTER" style="display: none; position: absolute;"></div>'),a){s.innerHTML='<div class="'+this.iconColumn.className+'"><div class="'+this.innerClassName+'"></div></div>'+o;var r=s.firstChild.firstChild}else{s.innerHTML='<div class="'+this.innerClassName+'"></div>'+o;var r=s.firstChild}if(0==t){var l=document.createElement("a");l.href="#",l.id=this._menuId+".FOCUSCATCHER",$ss(l,"font-size: 0px; display: block; height: 0px; width: 0px; overflow: hidden; outline-style: none; position: absolute;"),l.tabIndex="-1",$e.add(l,"focus",this._mFocus,this,!0),$e.add(l,"blur",this._mBlur,this,!0),$e.add(l,A5.d.evnts.click,function(e){return $e.stopEvent(e),!1}),s.insertBefore(l,s.firstChild)}for(var n=0;n<e.length;n++)r.appendChild(this._genMenuItem(e[n],t,i+n,a,this._menuId+"."+i+"MENU")),e[n].children.constructor==Array&&this._genMenu(e[n].children,t+1,i+n+"."),e[n].onInitialize.constructor==Function&&e[n].onInitialize.call(this,e[n]);$e.add(s,"mouseover",this._menuMOver,this,!1,this._menuId+"."+i+"MENU"),$e.add(s,"mouseout",this._menuMOut,this,!1,this._menuId+"."+i+"MENU")},_genMenuItem:function(e,t,i,s,a){var n=e.children.constructor==Array;if("item"==e.type||"radio"==e.type||"check"==e.type){var o=document.createElement("div");o.className=this._gDef(e.className,this.item.className),"radio"==e.type?o.innerHTML='<span style="display: block;"><div style="width: '+this.iconColumn.width+'; float: left;" class="'+this.item.iconClassName+'">'+A5.u.icon.html(this.item.radioImage,'id="'+e._id+'.ICON" style="visibility: hidden; border: none;" align="top"')+'</div><span class="'+this._gDef(e.labelClassName,this.item.labelClassName)+'">'+e.html+'</span><br style="clear: both;" /></span></span>':"check"==e.type?o.innerHTML='<span style="display: block;"><div style="width: '+this.iconColumn.width+'; float: left;" class="'+this.item.iconClassName+'">'+A5.u.icon.html(this.item.checkImage,'id="'+e._id+'.ICON" style="visibility: hidden; border: none;" align="top"')+'</div><span class="'+this._gDef(e.labelClassName,this.item.labelClassName)+'">'+e.html+'</span><br style="clear: both;" /></span></span>':s?o.innerHTML="<span"+$if(n,' class="'+this._gDef(e.cascadeClassName,this.item.cascadeClassName)+'"',"")+' style="display: block;"><div style="width: '+this.iconColumn.width+'; float: left;" class="'+this.item.iconClassName+'">'+$if(""!=e.icon,A5.u.icon.html(e.icon,'id="'+e._id+'.ICON" style="border: none;" align="top"'),A5.u.icon.html(this.item.radioImage,'id="'+e._id+'.ICON" style="visibility: hidden; width: 1px; height: 1px;" align="top"'))+'</div><span class="'+this._gDef(e.labelClassName,this.item.labelClassName)+'">'+e.html+'</span><br style="clear: both;" /></span></span>':o.innerHTML="<span"+$if(n,' class="'+this._gDef(e.cascadeClassName,this.item.cascadeClassName)+'"',"")+' style="display: block;"><span class="'+this._gDef(e.labelClassName,this.item.labelClassName)+'">'+e.html+'</span><br style="clear: both;" /></span></span>',e.style&&$ss(o,e.style)}else if("custom"==e.type){var o=document.createElement("div");o.className=this._gDef(e.className,this.item.className),e.style&&$ss(o,e.style),o.innerHTML="<div"+$if(s&&!e.preventIndent,' style="padding-left: '+this.iconColumn.width+'"',"")+">"+e.html+"</div>"}else if("radio-group"==e.type){var o=document.createElement("div"),r=document.createElement("div");s&&!e.preventIndent&&(r.style.paddingLeft=this.iconColumn.width),o.appendChild(r);var l=document.createElement("table");l.cellSpacing="0",l.cellPadding="0",r.appendChild(l);var d=0,h=1,c=0,u=0,f=this._gDef(e.className,this.item.className);h="number"==typeof e.columns?e.columns:Math.round(Math.sqrt(e.data.length)),h=Math.max(h,1),c=Math.round(e.data.length/h+.49);for(var p=0;p<c;p++){l.insertRow(p);for(var m=0;m<h;m++){if(l.rows[p].insertCell(m),u<e.data.length){"object"!=typeof e.data[u]&&(e.data[u]={value:e.data[u],html:e.data[u]}),$u.o.assign(e.data[u],{value:"",html:""},!0),""==e.data[u].value&&(e.data[u].value=e.html),""==e.data[u].html&&(e.data[u].html=e.value);var d=document.createElement("div");d.className=f,d.id=e._id+":"+u,d.innerHTML='<span style="display: block;">'+e.data[u].html+"</span>",$sa(d,"A5MenuLocation",i),$sa(d,"A5MenuHoverClassName",e.hoverClassName),$sa(d,"A5MenuDisabledHoverClassName",e.disabledHoverClassName),$sa(d,"A5MenuItemGroupIndex",String(u)),$e.add(d,"mouseover",this._menuRGItemMOver,this,!1,a),$e.add(d,"mouseout",this._menuRGItemMOut,this,!1,a),$e.add(d,A5.d.evnts.click,this._menuItemClick,this,!1,a),e.style&&$ss(d,e.style),d.style.display="block",l.rows[p].cells[m].appendChild(d)}else{if(1==c)break;l.rows[p].cells[m].innerHTML="&nbsp;"}u++}}e._cols=h,e._rows=c}else{if("separator"==e.type){var o=document.createElement("div");return o.id=e._id,e.preventIndent?o.className=this.iconColumn.preventIndentClassName:o.className=this._gDef(e.className,this.item.className),e.style&&$ss(o,e.style),o.innerHTML='<div class="'+this._gDef(e.className,this.item.separatorClassName)+'"'+$if(s&&!e.preventIndent,' style="margin-left: '+this.iconColumn.width+'"',"")+"></div>",o}if("title"==e.type){var o=document.createElement("div");return o.id=e._id,o.className=this._gDef(e.className,this.item.titleClassName),e.style&&$ss(o,e.style),o.innerHTML=e.html,o}}if(o.id=e._id,o.style.display="block",n?($sa(o,"A5MenuHasChild","true"),$sa(o,"A5MenuChildId",this._menuId+"."+i+".MENU")):($sa(o,"A5MenuHasChild","flase"),$sa(o,"A5MenuChildId","")),$sa(o,"A5MenuLevel",String(t)),$sa(o,"A5MenuLocation",i),$sa(o,"A5MenuHoverClassName",e.hoverClassName),$sa(o,"A5MenuDisabledHoverClassName",e.disabledHoverClassName),$sa(o,"A5MenuItemType",e.type),$e.add(o,"mouseover",this._menuItemMOver,this,!1,a),$e.add(o,"mouseout",this._menuItemMOut,this,!1,a),"radio-group"!=e.type&&$e.add(o,A5.d.evnts.click,this._menuItemClick,this,!1,a),e.preventIndent){var _=document.createElement("div");return _.className=this.iconColumn.preventIndentClassName,_.appendChild(o),_}return o},_parseMenuItem:function(e,t){return"object"!=typeof e&&(e="-"==e?{type:"separator"}:{name:String(e)}),$u.o.assign(e,{name:"",html:"",icon:"",type:"",variable:"",style:!1,className:"",labelClassName:"",hoverClassName:"",selectedClassName:"",disabledClassName:"",disabledHoverClassName:"",cascadeClassName:"",preventHide:!1,preventIndent:!1,onClick:0,onFocus:0,onInitialize:0,children:0},!0),e._id=this._menuId+"."+t,e._loc=t,e._dynamic=!1,""==e.name&&(e.name=e.html),""==e.html&&(e.html=e.name),e.type=e.type.toLowerCase(),"separator"!=e.type&&"title"!=e.type&&"radio"!=e.type&&"check"!=e.type&&"radio-group"!=e.type&&"custom"!=e.type&&(e.type="item"),"radio-group"==e.type&&(e._focus=-1),"radio-group"!=e.type&&"radio"!=e.type&&"check"!=e.type||""==e.variable||"undefined"==typeof this._v[e.variable]&&(this._v[e.variable]=null),e.children.constructor==Function||e.children.constructor==Object?(this._dmg[e._loc]=e.children,e.children=[],e._dynamic=!0):e.children.constructor==String&&("?"==e.children.substr(0,1)?this._dmg[e._loc]={data:e.children.substr(1)}:this._dmg[e._loc]={url:e.children},e.children=[],e._dynamic=!0),e},_setPointer:function(e,t,i){var s=$(this._menuId+".POINTER");s.style.top="",s.style.left="";var a="up",n=0,o=0;if("up"==this.pointer.location||"down"==this.pointer.location||"left"==this.pointer.location||"right"==this.pointer.location?a=this.pointer.location:"dropdown"==e.toLowerCase()||"dropdown-right"==e.toLowerCase()?a=$gpt(t)>$gpt(i)?"up":"down":"flyout"!=e.toLowerCase()&&"flyout-bottom"!=e.toLowerCase()||(a=$gpl(t)>$gpl(i)?"left":"right"),"up"==a||"down"==a){if("up"==a?(s.className=this.pointer.upClassName,s.style.display=""):(s.className=this.pointer.downClassName,s.style.display=""),s.style.left="50%",i){var o=$gpl(t),n=$gpl(i),r=o+t.offsetWidth-this.pointer.size,l=n+i.offsetWidth-this.pointer.size;o+=this.pointer.size,n+=this.pointer.size;var d=Math.min(Math.max(o,n),r),h=Math.max(Math.min(r,l),o),c=d-o+this.pointer.size+Math.round((h-d)/2);s.style.left=c+"px"}}else if("left"==a||"right"==a){if("left"==a?(s.className=this.pointer.leftClassName,s.style.display=""):(s.className=this.pointer.rightClassName,s.style.display=""),s.style.top="50%",i){var o=$gpt(t),n=$gpt(i),r=o+t.offsetHeight-this.pointer.size,l=n+i.offsetHeight-this.pointer.size;o+=this.pointer.size,n+=this.pointer.size;var d=Math.min(Math.max(o,n),r),h=Math.max(Math.min(r,l),o),c=d-o+this.pointer.size+Math.round((h-d)/2);s.style.top=c+"px"}}else s.style.display="none"},_menuItemMOver:function(e,t){var i=$ga(this,"A5MenuLocation");i=i.split(".");for(var s=0;s<i.length;s++)i[s]=Number(i[s]);var a=t._gItem(t._data,i);if(r=$(t._menuId+"."+t._focus.join(".")),r.id!=this.id&&"true"!=$ga(r,"A5MenuHasChild")&&($rcn(r,t._gDef($ga(r,"A5MenuHoverClassName"),t.item.hoverClassName)),$rcn(r,t._gDef($ga(r,"A5MenuDisabledHoverClassName"),t.item.disabledHoverClassName))),this.id+".MENU"!=t._menuShown[t._menuShown.length-1]){var n=Number($ga(this,"A5MenuLevel")),o=$ga(this,"A5MenuChildId"),r=0,l=t._menuShown.slice(n+1);t._menuShown.splice(n+1,t._menuShown.length-n);for(var s=0;s<l.length;s++)o!=l[s]&&(A5.u.element.hide($(l[s]),t.animation.hide),itemId=l[s].split("."),itemId.pop(),itemId=itemId.join("."),r=$(itemId),$rcn(r,t._gDef($ga(r,"A5MenuHoverClassName"),t.item.hoverClassName)),$rcn(r,t._gDef($ga(r,"A5MenuDisabledHoverClassName"),t.item.disabledHoverClassName)));if("item"!=a.type&&"radio"!=a.type&&"check"!=a.type||"true"==$ga(this,"A5MenuDisabled"))"item"==a.type||"radio"==a.type||"check"==a.type?$acn(this,t._gDef($ga(this,"A5MenuDisabledHoverClassName"),t.item.disabledHoverClassName)):"radio-group"==a.type&&arguments[2]&&("prev"!=t._lastDir.substr(0,4)?t._menuRGItemMOver.call($(a._id+":0"),e,t):t._menuRGItemMOver.call($(a._id+":"+a._cols*(a._rows-1)),e,t));else if($acn(this,t._gDef($ga(this,"A5MenuHoverClassName"),t.item.hoverClassName)),"true"==$ga(this,"A5MenuHasChild")){if(r=$(o),t._menuShown.push(o),a._dynamic&&t._showIt>$u.s.toNum(""+$ga(this,"A5MenuChildLastRefresh"))){if(t._dmg[a._loc].constructor==Function)t.populateItem(i,t._dmg[a._loc].call(t,a));else{var d=t._dmg[a._loc].url;""==d&&(d=t.dynamicDataURL),""!=d&&(new $a.simple(d,{data:$if(t._dmg[a._loc].data,t._dmg[a._loc].data+"&","")+"A5MenuLocation=["+a._loc.split(".").join(",")+"]&A5MenuValue="+a.name+"&__Ajax=true",handle:t._responseHandle,handleContext:t}),t.populateItem(i,[{type:"custom",html:t.loadingMessage}]))}$sa(this,"A5MenuChildLastRefresh",""+t._showIt)}"block"!=r.style.display&&(A5.u.element.show(r,t.animation.show),$po(r,this,"flyout",t.cascadeOffsetX,t.cascadeOffsetY),t._curLevel=n)}}t._focus=i,$(t._menuId+".FOCUSCATCHER").focus()},_menuItemMOut:function(e,t){var i=$ga(this,"A5MenuItemType");if("item"!=i&&"radio"!=i&&"check"!=i||"true"!=$ga(this,"A5MenuHasChild")&&($rcn(this,t._gDef($ga(this,"A5MenuHoverClassName"),t.item.hoverClassName)),$rcn(this,t._gDef($ga(this,"A5MenuDisabledHoverClassName"),t.item.disabledHoverClassName))),"radio-group"==i){var s=Number($ga(this,"A5MenuRGItemFocus"));s>-1&&($rcn(this.id+":"+s,t._gDef($ga(this,"A5MenuHoverClassName"),t.item.hoverClassName)),$rcn(this.id+":"+s,t._gDef($ga(this,"A5MenuDisabledHoverClassName"),t.item.disabledHoverClassName)))}},_menuRGItemMOver:function(e,t){var i=$ga(this,"A5MenuLocation");i=i.split(".");for(var s=0;s<i.length;s++)i[s]=Number(i[s]);var a=t._gItem(t._data,i);a._focus>-1&&$rcn(a._id+":"+a._focus,t._gDef($ga(this,"A5MenuHoverClassName"),t.item.hoverClassName)),a._focus=Number($ga(this,"A5MenuItemGroupIndex")),$sa(a._id,"A5MenuRGItemFocus",String(a._focus)),$acn(this,t._gDef(a.hoverClassName,t.item.hoverClassName))},_menuRGItemMOut:function(e,t){$rcn(this,t._gDef($ga(this,"A5MenuHoverClassName"),t.item.hoverClassName))},_menuItemClick:function(e,t){var i=$ga(this,"A5MenuLocation");i=i.split(".");for(var s=t._data[Number(i[0])],a=1;a<i.length;a++)s=s.children[Number(i[a])];return"item"!=s.type&&"radio"!=s.type&&"check"!=s.type&&"radio-group"!=s.type||0!=s.children?void(0!=s.children&&s.onClick.constructor==Function&&s.onClick.call(t,s)):($e.stopEvent(e),""!=s.variable&&("item"==s.type||"radio"==s.type?t.setValue(s.variable,s.name):"check"==s.type?t.setValue(s.variable,!t._v[s.variable]):"radio-group"==s.type&&s._focus>-1&&t.setValue(s.variable,s.data[s._focus].value)),s.onClick.constructor==Function?s.onClick.call(t,s):t.onClick.constructor==Function&&t.onClick.call(t,s),s.preventHide||t.hide(),!1)},_menuMOver:function(e,t){clearTimeout(t._timeout)},_menuMOut:function(e,t){t.closeOnLeave&&(t._timeout=setTimeout(function(){t.hide(),delete t},t.closeWait))},_itemFocus:function(e){if(e){var t=e._loc;t=t.split(".");for(var i=0;i<t.length;i++)t[i]=Number(t[i]);return this._focus=t,this._menuItemMOver.call($(e._id),{},this,!0),e.onFocus.constructor==Function?e.onFocus.call(this,e):this.onFocus.constructor==Function&&this.onFocus.call(this,e),!0}},_mFocus:function(){this._keyWatch.on()},_mBlur:function(){this._keyWatch.off()},_keyPrev:function(){return this.navigate("prev"),!0},_keyNext:function(){return this.navigate("next"),!0},_keyHome:function(){return this.navigate("home"),!0},_keyLastEnd:function(){return this.navigate("end"),!0},_keyOut:function(){return this.navigate("out"),!0},_keyIn:function(){return this.navigate("in"),!0},_keyEnter:function(){return this.navigate("enter"),!0},_gItem:function(e,t){var i="undefined"!=typeof arguments[2]?arguments[2]:0;if(t.constructor==Array){var s=t[i],a=!1;if("number"==typeof s)a=e[s];else for(var n=0;n<e.length;n++)e[n].name==s&&(a=e[n]);return t.length-1>i&&a?this._gItem(a.children,t,i+1):a}if("number"==typeof t)return e[t];for(var n=0;n<e.length;n++)if(e[n].name==t)return e[n];return!1},_gItemRel:function(e,t,i){var s=0;t+=i;for(var a=0;a<e.length;a++)if(itemIndx=t+a*i,itemIndx<0?itemIndx=e.length+itemIndx:itemIndx>e.length-1&&(itemIndx-=e.length),"separator"!=e[itemIndx].type&&"title"!=e[itemIndx].type)return s=$(e[itemIndx]._id),e[itemIndx]},_gDef:function(){for(var e=0;e<arguments.length;e++)if(""!=arguments[e])return arguments[e];return""},_responseHandle:function(obj){var resJSON=eval("("+obj.responseText+")");resJSON.location.length>0?this.populateItem(resJSON.location,resJSON.data):this.populate(resJSON.data)},_menuIndx:[0]},A5.ErrorHandler=Class.create(),A5.ErrorHandler.prototype={initialize:function(e){$u.o.assign(e,{type:"block",className:"",edit:{className:"",container:{className:""}},icon:"",global:{contId:"",hoverClassName:"",hoverInputClassName:""}},!0),$u.o.assign(this,e),"undefined"!=typeof this.inputClassName&&(this.edit.className=this.inputClassName),this._e=new Array,this._tipId="",this._tipTO=0},set:function(e,t){if(e.constructor==Array)for(var i=0;i<e.length;i++){"undefined"!=typeof t[i]&&this._createError(e[i],t[i]);$(e)}else this._createError(e,t)},clear:function(){if(arguments.length>0){var e=new Array;"string"==typeof arguments[0]?e.push(arguments[0]):e=arguments[0];for(var t=-1,i=0;i<e.length;i++){for(var s=0;s<this._e.length;s++)if(this._e[s].id==e[i]){t=s;break}t>-1&&this._removeError(t)}if("global"==this.type&&0==this._e.length){var a=$(this.global.contId);a.innerHTML="",a.style.display="none"}}else{if("inline"==this.type)for(var i=0;i<this._e.length;i++)$(this._e[i].id+".ERRORSPAN").style.display="none",this._editPrep(this._e[i].id,!1);else if("tip"==this.type)for(var i=0;i<this._e.length;i++)$e.remove($(this._e[i].id),"mouseover",this._mover),$e.remove($(this._e[i].id),"mouseout",this._mout),this._editPrep(this._e[i].id,!1),$(this._e[i].id+".ERRORTIPDIV").style.display="none";else if("icon"==this.type)for(var i=0;i<this._e.length;i++)$(this._e[i].id+".ERRORTIPICON").style.display="none",this._editPrep(this._e[i].id,!1);else if("global"==this.type){$e.removeGroup(this.global.contId);var a=$(this.global.contId);a.innerHTML="",a.style.display="none";for(var i=0;i<this._e.length;i++)$e.remove($(this._e[i].id),"mouseover",this._mover),$e.remove($(this._e[i].id),"mouseout",this._mout),this._editPrep(this._e[i].id,!1)}else for(var i=0;i<this._e.length;i++)$(this._e[i].id+".ERRORDIV").style.display="none",this._editPrep(this._e[i].id,!1);this._e=new Array}},_createError:function(e,t){for(var i=!1,s=0;s<this._e.length;s++)if(this._e[s].id==e){i=!0,this._e[s].msg=t;break}if(i||this._e.push({id:e,msg:t}),"inline"==this.type)if($(e+".ERRORSPAN")){var a=$(e+".ERRORSPAN");a.innerHTML=t,a.className=this.className,a.style.display="";var n=$(e);this._editPrep(n,!0)}else{var a=document.createElement("span");a.id=e+".ERRORSPAN",a.innerHTML=t,a.className=this.className;var n=$(e);n.tagName?this._editPrep(n,!0,a):n[n.length-1].parentNode.insertBefore(a,n[n.length-1].nextSibling)}else if("tip"==this.type){if($(e+".ERRORTIPDIV")){var a=$(e+".ERRORTIPDIV");a.innerHTML=t,a.className=this.className;var n=$(e);this._editPrep(n,!0)}else{var a=document.createElement("div");a.id=e+".ERRORTIPDIV",a.innerHTML=t,a.className=this.className,a.style.display="none",a.style.position="absolute",a.style.zIndex="5000";var n=$(e);this._editPrep(n,!0),document.body.appendChild(a),$e.add(a,"mouseover",this._stopTO,this),$e.add(a,"mouseout",this._mout,this)}i||($e.add(n,"mouseover",this._mover,this),$e.add(n,"mouseout",this._mout,this))}else if("icon"==this.type)if($(e+".ERRORTIPICON")){var o=$(e+".ERRORTIPICON");A5.u.icon.update(o,this.icon),o.style.display="";var a=$(e+".ERRORTIPICONDIV");a.innerHTML=t,a.className=this.className;var n=$(e);this._editPrep(n,!0)}else{var o=A5.u.icon.element(this.icon);o.id=e+".ERRORTIPICON",$ss(o,"vertical-align: middle; margin-left: 2px;");var a=$(e+".ERRORTIPICONDIV");a||(a=document.createElement("div"),a.id=e+".ERRORTIPICONDIV"),a.innerHTML=t,a.className=this.className,a.style.display="none",a.style.position="absolute",a.style.zIndex="5000";var n=$(e);n.tagName?this._editPrep(n,!0,o):n[n.length-1].parentNode.insertBefore(o,n[n.length-1].nextSibling),document.body.appendChild(a),$e.add(a,"mouseover",this._stopTO,this),$e.add(a,"mouseout",this._mout,this),$e.add(o,"mouseover",this._mover,this),$e.add(o,"mouseout",this._mout,this)}else if("global"==this.type)if(i){var a=$(e+".ERRORGLOBALDIV");a.innerHTML=t}else{var a=document.createElement("div");a.id=e+".ERRORGLOBALDIV",a.innerHTML=t,a.className=this.className,$sa(a,"A5ErrorId",e);var r=$(this.global.contId);r.appendChild(a),r.style.display="",$e.add(a,"mouseover",this._mover,this,!1,this.global.contId),$e.add(a,"mouseout",this._mout,this,!1,this.global.contId),$e.add(a,"click",this._globalSelect,this,!1,this.global.contId);var n=$(e);this._editPrep(n,!0),$e.add(n,"mouseover",this._mover,this),$e.add(n,"mouseout",this._mout,this)}else if($(e+".ERRORDIV")){var a=$(e+".ERRORDIV");a.innerHTML=t,a.className=this.className,a.style.display="";var n=$(e);this._editPrep(n,!0)}else{var a=document.createElement("div");a.id=e+".ERRORDIV",a.innerHTML=t,a.className=this.className;var n=$(e);n.tagName?this._editPrep(n,!0,a):n[n.length-1].parentNode.insertBefore(a,n[n.length-1].nextSibling)}},_removeError:function(e){if("inline"==this.type)$(this._e[e].id+".ERRORSPAN").style.display="none",this._editPrep(this._e[e].id,!1);else if("tip"==this.type)$e.remove($(this._e[e].id),"mouseover",this._mover),$e.remove($(this._e[e].id),"mouseout",this._mout),this._editPrep(this._e[e].id,!1),$(this._e[e].id+".ERRORTIPDIV").style.display="none";else if("icon"==this.type)$(this._e[e].id+".ERRORTIPICON").style.display="none",$(this._e[e].id+".ERRORTIPICONDIV").style.display="none",this._editPrep(this._e[e].id,!1);else if("global"==this.type){var t=$(this._e[e].id+".ERRORGLOBALDIV");$e.remove(t,"mouseover",this._mover),$e.remove(t,"mouseout",this._mout),$e.remove(t,"click",this._globalSelect),t=t.parentNode,t.removeChild($(this._e[e].id+".ERRORGLOBALDIV")),$e.remove($(this._e[e].id),"mouseover",this._mover),$e.remove($(this._e[e].id),"mouseout",this._mout),this._editPrep(this._e[e].id,!1)}else $(this._e[e].id+".ERRORDIV").style.display="none",this._editPrep(this._e[e].id,!1);this._e.splice(e,1)},_mover:function(e,t){if("tip"==t.type){""!=this._tipId&&t._moutComplete(),t._tipId=t._gcn(this)+".ERRORTIPDIV";var i=$(t._tipId);i.style.display="block",$po(i,this,"dropdown",3)}else if("icon"==t.type){""!=this._tipId&&t._moutComplete(),t._tipId=t._gcn(this)+"DIV";var i=$(t._tipId);i.style.display="block",$po(i,this,"dropdown-right",3)}else if("global"==t.type)if(""!=$ga(this,"A5ErrorId")&&"string"==typeof $ga(this,"A5ErrorId")){var i=$($ga(this,"A5ErrorId"));""!=t.global.hoverInputClassName&&$acn(i,t.global.hoverInputClassName),""!=t.global.hoverClassName&&$acn(this,t.global.hoverClassName)}else{var i=$(t._gcn(this)+".ERRORGLOBALDIV");""!=t.global.hoverInputClassName&&$acn(this,t.global.hoverInputClassName),""!=t.global.hoverClassName&&$acn(i,t.global.hoverClassName)}},_mout:function(e,t){if("tip"==t.type)t._tipTO=setTimeout(function(){t._moutComplete()},300);else if("icon"==t.type)t._tipTO=setTimeout(function(){t._moutComplete()},300);else if("global"==t.type)if(""!=$ga(this,"A5ErrorId")&&"string"==typeof $ga(this,"A5ErrorId")){var i=$($ga(this,"A5ErrorId"));""!=t.global.hoverInputClassName&&$rcn(i,t.global.hoverInputClassName),""!=t.global.hoverClassName&&$rcn(this,t.global.hoverClassName)}else{var i=$(t._gcn(this)+".ERRORGLOBALDIV");""!=t.global.hoverInputClassName&&$rcn(this,t.global.hoverInputClassName),""!=t.global.hoverClassName&&$rcn(i,t.global.hoverClassName)}},_moutComplete:function(){ele=$(this._tipId),ele&&(ele.style.display="none"),this._tipId="",clearTimeout(this._tipTO),this._tipTO=0},_stopTO:function(e,t){clearTimeout(t._tipTO),t._tipTO=0},_globalSelect:function(e,t){for(var i=$($ga(this,"A5ErrorId")),s=i;"body"!=s.tagName.toLowerCase();){if("none"==s.style.display||"hidden"==s.style.visibility)return!1;s=s.parentNode}i.tagName?(i.focus(),i.select()):i[0].focus()},_editPrep:function(e,t){e=$(e);var i="undefined"!=typeof arguments[2]&&arguments[2],s=e.tagName;if("string"!=typeof s)return!1;s=s.toLowerCase();var a=e.type;"string"==typeof a&&(a=a.toLowerCase()),$(e.id+".CONTAINER")&&"input"==s&&"checkbox"!=a&&"radio"!=a?(t?$acn(e.id+".CONTAINER",this.edit.container.className):$rcn(e.id+".CONTAINER",this.edit.container.className),i&&$(e.id+".CONTAINER").parentNode.insertBefore(i,$(e.id+".CONTAINER").nextSibling)):(t?"checkbox"!=a&&"radio"!=a&&$acn(e,this.edit.className):$rcn(e,this.edit.className),i&&e.parentNode.insertBefore(i,e.nextSibling))},_gcn:function(e){return""!=e.id?e.id:e.name}},A5.d._dateFrm={},Date.prototype.fromFormat=function(e,t){var i="number"==typeof arguments[2]?arguments[2]:50;(i>99||i<0)&&(i=50);var s=this._parseFormat(t),a={y:null,m:null,d:this.getDate()},n="";this.setDate(1),this.setHours(0,0,0,0);for(var o=0;o<s.months.length;o++)e=e.replace(RegExp(s.months[o],"gi"),""+(o+1));for(var o=0;o<s.monthsShort.length;o++)e=e.replace(RegExp(s.monthsShort[o],"gi"),""+(o+1));
for(var r=e.replace(/[^0-9]/g,"\n").split("\n"),l=new Array,o=0;o<r.length;o++)""!=r[o]&&l.push(r[o]);for(var d=0,o=0;o<s.formatContent.length;o++)if(""!=s.formatContent[o]){if(!l[d])break;if(n=l[d],"yyyy"==s.formatContent[o])a.y=$u.s.toNum(n),d++;else if("yy"==s.formatContent[o]||"y"==s.formatContent[o]){var h=$u.s.toNum(n);h<100&&(h+=1900),h<1900+i&&(h+=100),a.y=h,d++}else if("MM"==s.formatContent[o]||"M"==s.formatContent[o]||"mon"==s.formatContent[o].toLowerCase().substr(0,3))a.m=$u.s.toNum(n)-1,d++;else if("dd"==s.formatContent[o]||"d"==s.formatContent[o]||"x"==s.formatContent[o])a.d=$u.s.toNum(n),d++;else if("0h"==s.formatContent[o]||"h"==s.formatContent[o]){var c=Math.max(Math.max($u.a.find(s.formatContent,"am"),$u.a.find(s.formatContent,"AM")),$u.a.find(s.formatContent,"A"));if(c==-1)this.setHours($u.s.toNum(n));else{for(var u=e,f=0;f<s.fromatMask.length;f++)u=u.replace(RegExp(s.fromatMask[f].replace(/[\\\.\^\$\*\+\?\{\}\[\]\(\)\|]/g,function(e){return"\\"+e}),"gi"),"");u=u.replace(/[0-9]/g,"");var h=$u.s.toNum(n);u.search(RegExp("p","i"))!=-1?(h<12&&(h+=12),this.setHours(h)):u.search(RegExp("a","i"))!=-1?(12==h&&(h=0),this.setHours(h)):this.setHours(h)}d++}else"0m"==s.formatContent[o]||"m"==s.formatContent[o]?(this.setMinutes($u.s.toNum(n)),d++):"0s"!=s.formatContent[o]&&"s"!=s.formatContent[o]||(this.setSeconds($u.s.toNum(n)),d++)}null!=a.y&&"undefined"!=typeof a.y&&this.setFullYear(a.y),null!=a.m&&"undefined"!=typeof a.m&&this.setMonth(a.m),null!=a.d&&"undefined"!=typeof a.d&&this.setDate(a.d)},Date.prototype.toFormat=function(e){for(var t=this._parseFormat(e),i=[],s=0;s<t.fromatMask.length;s++)if(i.push(t.fromatMask[s]),"yyyy"==t.formatContent[s])i.push($u.s.pad(""+this.getFullYear(),4,"0"));else if("yy"==t.formatContent[s]||"y"==t.formatContent[s]){var a=Number(String(this.getFullYear()).substr(2));a>=100&&(a-=100),i.push($u.s.pad(""+a,2,"0"))}else if("MM"==t.formatContent[s])i.push($u.s.pad(""+(this.getMonth()+1),2,"0"));else if("M"==t.formatContent[s])i.push(this.getMonth()+1);else if("mon"==t.formatContent[s].toLowerCase().substr(0,3)){var n="";if("O"==t.formatContent[s].substr(1,1)?n="u":"m"==t.formatContent[s].substr(0,1)?n="l":"M"==t.formatContent[s].substr(0,1)&&"o"==t.formatContent[s].substr(1,1)&&(n="fu"),3==t.formatContent[s].length)var o=t.monthsShort[this.getMonth()];else var o=t.months[this.getMonth()];o=$u.s.changeCase(o,n),i.push(o)}else if("dd"==t.formatContent[s])i.push($u.s.pad(""+this.getDate(),2,"0"));else if("d"==t.formatContent[s])i.push(this.getDate());else if("x"==t.formatContent[s])i.push($u.n.toPlaceStr(this.getDate()));else if("w"==t.formatContent[s].toLowerCase().substr(0,1)){if("W"==t.formatContent[s])var r=t.daysShort[this.getDay()].toUpperCase();else if("w"==t.formatContent[s])var r=t.daysShort[this.getDay()].toLowerCase();else{var n="";"E"==t.formatContent[s].substr(1,1)?n="u":"w"==t.formatContent[s].substr(0,1)?n="l":"W"==t.formatContent[s].substr(0,1)&&"e"==t.formatContent[s].substr(1,1)&&(n="fu");var r=$u.s.changeCase(t.days[this.getDay()],n)}i.push(r)}else"0h"==t.formatContent[s]?$u.a.find(t.formatContent,"am")==-1&&$u.a.find(t.formatContent,"AM")==-1&&$u.a.find(t.formatContent,"A")==-1?i.push($u.s.pad(""+this.getHours(),2,"0")):this.getHours()>12?i.push($u.s.pad(""+(this.getHours()-12),2,"0")):0==this.getHours()?i.push("12"):i.push($u.s.pad(""+this.getHours(),2,"0")):"h"==t.formatContent[s]?$u.a.find(t.formatContent,"am")==-1&&$u.a.find(t.formatContent,"AM")==-1&&$u.a.find(t.formatContent,"A")==-1?i.push(this.getHours()):this.getHours()>12?i.push(this.getHours()-12):0==this.getHours()?i.push("12"):i.push(this.getHours()):"0m"==t.formatContent[s]?i.push($u.s.pad(""+this.getMinutes(),2,"0")):"m"==t.formatContent[s]?i.push(this.getMinutes()):"0s"==t.formatContent[s]?i.push($u.s.pad(""+this.getSeconds(),2,"0")):"s"==t.formatContent[s]?i.push(this.getSeconds()):"am"==t.formatContent[s]?this.getHours()>=12&&this.getHours()<24?i.push("pm"):i.push("am"):"AM"==t.formatContent[s]?this.getHours()>=12&&this.getHours()<24?i.push("PM"):i.push("AM"):"A"==t.formatContent[s]&&(this.getHours()>=12&&this.getHours()<24?i.push("P"):i.push("A"));return i.join("")},Date.prototype._parseFormat=function(e){if("string"==typeof e&&"undefined"!=typeof A5.d._dateFrm[e])return A5.d._dateFrm[e];var t={format:"MM/dd/yyyy",fromatMask:[],fromatContent:[],days:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],daysShort:["sun","mon","tue","wed","thu","fri","sat"],months:["january","february","march","april","may","june","july","august","september","october","november","december"],monthsShort:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]};if("string"==typeof e)t.format=e;else if("object"==typeof e){if(e.parsed&&e.fromatMask&&e.formatContent)return e;if(e.months&&!e.monthsShort){e.monthsShort=new Array;for(var i=0;i<e.months.length;i++)e.monthsShort[i]=e.months[i].substr(0,3)}if(e.days&&!e.daysShort){e.daysShort=new Array;for(var i=0;i<e.days.length;i++)e.daysShort[i]=e.days[i].substr(0,3)}e.format&&""==e.format&&(e.format="MM/dd/yyyy"),$u.o.assign(t,e)}var s=$u.a.find(["1-","2-","1/","2/","3","4","8","5-","6-","7-","5/","6/","7/","9-","10","11-","12-","11/","12/","11","12","3C","4C","8C","9C-","10C"],t.format);if(s!=-1){var a=["MM-dd-yyyy","dd-MM-yyyy","MM/dd/yyyy","dd/MM/yyyy","d Month yyyy","Month d, yyyy","Month x, yyyy","MM-yy","MM-dd-yy","dd-MM-yy","MM/yy","MM/dd/yy","dd/MM/yy","dd-Mon-yy","dd Mon yyyy","yy-MM-dd","yyyy-MM-dd","yy/MM/dd","yyyy/MM/dd","yy.MM.dd","yyyy.MM.dd","d MONTH yyyy","MONTH d, yyyy","MONTH x, yyyy","d-MON-yy","d-MON-yyyy"];t.format=a[s]}for(var n=t.format,o=[/([^\\])Weekday/g,/([^\\])WEEKDAY/g,/([^\\])weekday/g,,/([^\\])W/g,/([^\\])w/g,/([^\\])yyyy/g,/([^\\])yy/g,/([^\\])y/g,/([^\\])Month/g,/([^\\])MONTH/g,/([^\\])month/g,/([^\\])Mon/g,/([^\\])MON/g,/([^\\])mon/g,/([^\\])MM/g,/([^\\])M/g,/([^\\])dd/g,/([^\\])d/g,/([^\\])x/g,/([^\\])am/g,/([^\\])AM/g,/([^\\])A/g,/([^\\])0h/g,/([^\\])h/g,/([^\\])0m/g,/([^\\])m/g,/([^\\])0s/g,/([^\\])s/g],r=" "+n,i=0;i<o.length;i++)r=r.replace(o[i],"$1~~~~");r=r.substr(1);var l=r.split("~~~~"),d=[];o=[/\\Weekday/g,/\\WEEKDAY/g,/\\weekday/g,/\\W/g,/\\w/g,/\\yyyy/g,/\\yy/g,/\\y/g,/\\Month/g,/\\MONTH/g,/\\month/g,/\\Mon/g,/\\MON/g,/\\mon/g,/\\MM/g,/\\M/g,/\\dd/g,/\\d/g,/\\x/g,/\\am/g,/\\AM/g,/\\A/g,/\\0h/g,/\\h/g,/\\0m/g,/\\m/g,/\\0s/g,/\\s/g];for(var h=["Weekday","WEEKDAY","weekday","W","w","yyyy","yy","y","Month","MONTH","month","Mon","MON","mon","MM","M","dd","d","x","am","AM","A","0h","h","0m","m","0s","s"],i=0;i<l.length;i++){n=n.substr(l[i].length),d.push($u.s.word(n,1,l[i+1])),n=n.substr(d[i].length);for(var c=0;c<o.length;c++)l[i]=l[i].replace(o[c],h[c])}return t.fromatMask=l,t.formatContent=d,t.hasTime=$if($u.a.find(d,"h")!=-1||$u.a.find(d,"0h")!=-1,!0,!1),t.hasDate=$if($u.a.find(d,"y")!=-1||$u.a.find(d,"yy")!=-1||$u.a.find(d,"yyyy")!=-1,!0,!1),t.secondsMode=$if($u.a.find(d,"s")!=-1||$u.a.find(d,"0s")!=-1,"normal","none"),t.hasMeridian=$if($u.a.find(d,"am")!=-1||$u.a.find(d,"AM")!=-1||$u.a.find(d,"A")!=-1,!0,!1),t.parsed=!0,A5.d._dateFrm[e]=t,t},A5.DatePicker=Class.create(),A5.DatePicker.prototype={initialize:function(e,t){this.contId=e,$u.o.assign(this,{override:"base",inputId:"",days:["Sun","Mon","Tue","Wed","Thur","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],startDay:0,disabledDates:{high:!1,low:!1,days:!1,dates:!1},format:"MM/dd/yyyy",switchYear:50,date:0,width:"",height:"",className:"",disabledClassName:"",style:0,calendar:{lockColumnWidth:!0,daysOfWeek:{show:!0,className:"",style:0},weeksOfYear:{show:!1,className:"",style:0,headerClassName:""},date:{className:"",weekendClassName:"",todayClassName:"",style:0,item:{className:"",hoverClassName:"",selectedClassName:"",disabledClassName:"",outOfRangeClassName:"",style:0}}},navigator:{header:{className:"",style:0,prevIcon:"",nextIcon:"",prevIconHover:"",nextIconHover:"",todayButton:{show:!1,location:"right",html:"Today",tip:"Select today's date"},item:{className:"",hoverClassName:"",selectedClassName:""}},panel:{className:"",style:0,edit:{className:"",style:0,icon:""},item:{className:"",hoverClassName:"",selectedClassName:"",disabledClassName:"",style:0}}},disabled:!1,onItemDraw:0,onClick:0,onRightClick:0,onSelect:0,onNavigate:0,onMonthNavigate:0,onYearNavigate:0}),"undefined"!=typeof A5._datePickerDefaults&&$u.o.assign(this,A5._datePickerDefaults),"undefined"!=typeof t.theme&&A5.themes.assign(this,t.theme,"datePicker"),$u.o.assign(this,t),A5.overrides.assign(this,"datePicker",this.override);var i=!1,s=new Date;this._parsedFormat=s._parseFormat(this.format),this.date.constructor!=Date?"string"==typeof this.date?(s.fromFormat(this.date,this._parsedFormat,this.switchYear),this.date=s,i=!0):this.date=new Date:i=!0,this._month=this.date.getMonth(),this._year=this.date.getFullYear(),this._oldMonth=this._month,this._oldYear=this._year,this._selDay=$if(i,this.date.getDate(),-1),this._selMonth=this._month,this._selYear=this._year,this._daysInMonth=0,this._daysInPrevMonth=0,this._monthStartDay=0,this._curPane="date",this._dd={high:!1,low:!1,days:[]},this._dFocusId="",this._mFocusId="",this._yFocusId="",this._initRender(),this.disabled&&this.setDisabled(!0)},refresh:function(){if(this._dd.low=!1,this._dd.high=!1,this._dd.days=!1,this._dd.dates=!1,this.disabledDates.low){var e="",t=new Date;e=this.disabledDates.low.constructor==Function?this.disabledDates.low.call(this):this.disabledDates.low,"string"!=typeof e&&e.constructor!=Date||("string"==typeof e?t.fromFormat(e,this._parsedFormat,this.switchYear):e.constructor==Date&&(t=e),this._dd.low=t)}if(this.disabledDates.high){var e="";delete t;var t=new Date;e=this.disabledDates.high.constructor==Function?this.disabledDates.high.call(this):this.disabledDates.high,"string"!=typeof e&&e.constructor!=Date||("string"==typeof e?t.fromFormat(e,this._parsedFormat,this.switchYear):e.constructor==Date&&(t=e),this._dd.high=t)}if(this.disabledDates.days&&(this.disabledDates.days.constructor==Function?(this._dd.days=new Array,$u.o.assign(this._dd.days,this.disabledDates.days.call(this))):this.disabledDates.days.constructor==Array&&(this._dd.days=new Array,$u.o.assign(this._dd.days,this.disabledDates.days))),this.disabledDates.dates)if(this.disabledDates.dates.constructor==Function)this._dd.dates=this.disabledDates.dates;else if(this.disabledDates.dates.constructor==Array){this._dd.dates=new Array,$u.o.assign(this._dd.dates,this.disabledDates.dates);for(var e=!1,i=0;i<this._dd.dates.length;i++)"string"==typeof this._dd.dates[i]?(e=new Date(2e3,0,1,0,0,0,0),e.fromFormat(this._dd.dates[i],this._parsedFormat,this.switchYear),this._dd.dates[i]=e.getTime()):this._dd.dates[i]=this._dd.dates[i].getTime()}this._render()},nextMonth:function(){var e=!1;11==this._month?(this._month=0,this._year++,this.onYearNavigate.constructor==Function&&(e=!0)):this._month++,this._render(),e&&this.onYearNavigate.call(this,this.date.toFormat(this._parsedFormat)),this.onMonthNavigate.constructor==Function&&this.onMonthNavigate.call(this,this.date.toFormat(this._parsedFormat))},prevMonth:function(){var e=!1;0==this._month?(this._month=11,this._year--,this.onYearNavigate.constructor==Function&&(e=!0)):this._month--,this._render(),e&&this.onYearNavigate.call(this,this.date.toFormat(this._parsedFormat)),this.onMonthNavigate.constructor==Function&&this.onMonthNavigate.call(this,this.date.toFormat(this._parsedFormat))},nextYear:function(){this._year++,this._render(),this.onYearNavigate.constructor==Function&&this.onYearNavigate.call(this,this.date.toFormat(this._parsedFormat)),this.onMonthNavigate.constructor==Function&&this.onMonthNavigate.call(this,this.date.toFormat(this._parsedFormat))},prevYear:function(){this._year--,this._render(),this.onYearNavigate.constructor==Function&&this.onYearNavigate.call(this,this.date.toFormat(this._parsedFormat)),this.onMonthNavigate.constructor==Function&&this.onMonthNavigate.call(this,this.date.toFormat(this._parsedFormat))},setYear:function(e){this._year=e,this._render(),this.onYearNavigate.constructor==Function&&this.onYearNavigate.call(this,this.date.toFormat(this._parsedFormat)),this.onMonthNavigate.constructor==Function&&this.onMonthNavigate.call(this,this.date.toFormat(this._parsedFormat))},prevDecade:function(){this._dd.low?this._dd.low.getFullYear()<=this._decade&&this._renderDecade(this._decade-10):this._renderDecade(this._decade-10);var e=$(this.contId+".DATEPICKER.YEAR.INPUT");e.focus(),e.select()},nextDecade:function(){this._dd.high?this._dd.high.getFullYear()>=this._decade+10&&this._renderDecade(this._decade+10):this._renderDecade(this._decade+10);var e=$(this.contId+".DATEPICKER.YEAR.INPUT");e.focus(),e.select()},setDisabled:function(e){e?$acn(this.contId,this.disabledClassName):$rcn(this.contId,this.disabledClassName),this.disabled=e},setValue:function(e){var t=!1;if(e.constructor!=Date){if("string"==typeof e){var i=new Date;i.fromFormat(e,this._parsedFormat,this.switchYear),this.date=i,t=!0}}else this.date=e,t=!0;t?(this._month=this.date.getMonth(),this._year=this.date.getFullYear(),this._oldMonth=this._month,this._oldYear=this._year,this._selDay=this.date.getDate(),this._selMonth=this._month,this._selYear=this._year,this.date.setFullYear(this._selYear),this.date.setDate(1),this.date.setMonth(this._selMonth),this.date.setDate(this._selDay),this._togglePane("date")):this._togglePane("date"),this.refresh()},_monthPane:function(e){return this._togglePane("month"),$e.stopEvent(e),!1},_yearPane:function(e){return this._togglePane("year"),$e.stopEvent(e),!1},_monthClick:function(e,t){if($e.stopEvent(e),t.disabled)return!1;if("true"==$ga(this,"A5DatePickerItemDisabled"))return!1;var i=this.id.split(".");return i=Number(i.pop()),t._month=i,t._render(),t._togglePane("date"),t.onMonthNavigate.constructor==Function&&t.onMonthNavigate.call(t,t.date.toFormat(t._parsedFormat)),!1},_yearClick:function(e,t){if($e.stopEvent(e),t.disabled)return!1;if("true"==$ga(this,"A5DatePickerItemDisabled"))return!1;var i=Number(this.innerHTML);return t._year=i,t._render(),t._togglePane("date"),t.onYearNavigate.constructor==Function&&t.onYearNavigate.call(t,t.date.toFormat(t._parsedFormat)),t.onMonthNavigate.constructor==Function&&t.onMonthNavigate.call(t,t.date.toFormat(t._parsedFormat)),!1},_prevDecade:function(e,t){return $e.stopEvent(e),!t.disabled&&(t.prevDecade(),!1)},_nextDecade:function(e,t){return $e.stopEvent(e),!t.disabled&&(t.nextDecade(),!1)},_inputYear:function(e,t){if(t.disabled)return!1;var i=e.charCode||e.keyCode;13!=i&&i||(t.setYear($u.s.toNum(this.value)),t._togglePane("date"))},_prevButton:function(e){return $e.stopEvent(e),!this.disabled&&("year"==this._curPane?this.prevDecade():"month"==this._curPane?this.prevYear():this.prevMonth(),!1)},_nextButton:function(e){return $e.stopEvent(e),!this.disabled&&("year"==this._curPane?this.nextDecade():"month"==this._curPane?this.nextYear():this.nextMonth(),!1)},_todayButton:function(e){if($e.stopEvent(e),this.disabled)return!1;var t=new Date;return this._month=t.getMonth(),this._year=t.getFullYear(),this._oldMonth=this._month,this._oldYear=this._year,this._selDay=t.getDate(),this._selMonth=this._month,this._selYear=this._year,this.date.setFullYear(this._selYear),this.date.setDate(1),this.date.setMonth(this._selMonth),this.date.setDate(this._selDay),this._togglePane("date"),this.refresh(),$(this.inputId)&&($svs(this.inputId,this.date.toFormat(this._parsedFormat)),$e.execute(this.inputId,"change")),this.onYearNavigate.constructor==Function&&this.onYearNavigate.call(this,this.date.toFormat(this._parsedFormat)),this.onMonthNavigate.constructor==Function&&this.onMonthNavigate.call(this,this.date.toFormat(this._parsedFormat)),this.onSelect.constructor==Function&&this.onSelect.call(this,this.date.toFormat(this._parsedFormat)),this.onClick.constructor==Function&&this.onClick.call(this,this.date.toFormat(this._parsedFormat)),!1},_dClick:function(e,t){if($e.stopEvent(e),t.disabled)return!1;if(this.blur(),"true"==$ga(this,"A5DatePickerItemDisabled"))return!1;var i=Number($ga(this,"A5DatePickerDay")),s=t._month+Number($ga(this,"A5DatePickerDayMonth")),a=t._year;s==-1?(a--,s=11):12==s&&(a++,s=0);var n=!1,o=!1;return t._year!=a&&t.onYearNavigate.constructor==Function&&(n=!0),t._month!=s&&t.onMonthNavigate.constructor==Function&&(o=!0),t._year=a,t._month=s,t._selDay=i,t._selMonth=t._month,t._selYear=t._year,t._render(),t.date.setFullYear(t._selYear),t.date.setDate(1),t.date.setMonth(t._selMonth),t.date.setDate(t._selDay),$(t.inputId)&&($svs(t.inputId,t.date.toFormat(t._parsedFormat)),$e.execute(t.inputId,"change")),n&&t.onYearNavigate.call(t,t.date.toFormat(t._parsedFormat)),o&&t.onMonthNavigate.call(t,t.date.toFormat(t._parsedFormat)),t.onSelect.constructor==Function&&t.onSelect.call(t,t.date.toFormat(t._parsedFormat)),t.onClick.constructor==Function&&t.onClick.call(t,t.date.toFormat(t._parsedFormat)),!1},_togglePane:function(e){if(this.disabled)return!1;var t=$(this.contId+".DATEPICKER"),i=$(this.contId+".DATEPICKER.TITLE"),s=$(this.contId+".DATEPICKER.DATEPANE"),a=$(this.contId+".DATEPICKER.MONTHPANE"),n=$(this.contId+".DATEPICKER.YEARPANE"),o=s.offsetHeight+"px";if("month"==e&&"month"!=this._curPane)"date"==this._curPane&&(t.style.height=t.offsetHeight+"px",t.style.width=t.offsetWidth+"px",$(this.contId+".DATEPICKER.MONTHTABLE").style.height=o,$(this.contId+".DATEPICKER.YEARTABLE").style.height=o),s.style.display="none",a.style.display="",n.style.display="none",$acn(this.contId+".DATEPICKER.MONTH",this.navigator.header.item.selectedClassName),$rcn(this.contId+".DATEPICKER.YEAR",this.navigator.header.item.selectedClassName),this._curPane="month";else if("year"==e&&"year"!=this._curPane){"date"==this._curPane&&(t.style.height=t.offsetHeight+"px",t.style.width=t.offsetWidth+"px",$(this.contId+".DATEPICKER.MONTHTABLE").style.height=o,$(this.contId+".DATEPICKER.YEARTABLE").style.height=o),s.style.display="none",a.style.display="none",n.style.display="",$rcn(this.contId+".DATEPICKER.MONTH",this.navigator.header.item.selectedClassName),$acn(this.contId+".DATEPICKER.YEAR",this.navigator.header.item.selectedClassName);var r=$(this.contId+".DATEPICKER.YEAR.INPUT");r.focus(),r.select(),this._curPane="year"}else i.style.height="",i.style.display="",t.style.height="",t.style.width="",s.style.display="",a.style.display="none",n.style.display="none",$rcn(this.contId+".DATEPICKER.MONTH",this.navigator.header.item.selectedClassName),$rcn(this.contId+".DATEPICKER.YEAR",this.navigator.header.item.selectedClassName),this._curPane="date"},_mOver:function(e,t){var i="";i="month"==t._curPane?t._mFocusId:"year"==t._curPane?t._yFocusId:t._dFocusId,""!=i&&("month"==t._curPane||"year"==t._curPane?$rcn(i,t.navigator.panel.item.hoverClassName):$rcn(i,t.calendar.date.item.hoverClassName)),i="","true"!=$ga(this,"A5DatePickerItemDisabled")&&(i=this.id,"month"==t._curPane||"year"==t._curPane?$acn(this,t.navigator.panel.item.hoverClassName):$acn(this,t.calendar.date.item.hoverClassName)),"month"==t._curPane?t._mFocusId=i:"year"==t._curPane?t._yFocusId=i:t._dFocusId=i},_mOut:function(e,t){"month"==t._curPane?t._mFocusId="":"year"==t._curPane?t._yFocusId="":t._dFocusId="","month"==t._curPane||"year"==t._curPane?$rcn(this,t.navigator.panel.item.hoverClassName):$rcn(this,t.calendar.date.item.hoverClassName)},_nmOver:function(e,t){""!=t.navigator.header.item.hoverClassName&&$acn(this,t.navigator.header.item.hoverClassName)},_nmOut:function(e,t){""!=t.navigator.header.item.hoverClassName&&$rcn(this,t.navigator.header.item.hoverClassName)},_rClick:function(e,t){if(t.onRightClick.constructor==Function){if($e.stopEvent(e),t.disabled)return!1;if(this.id==t.contId+".DATEPICKER")t.onRightClick(new Date(t._year,t._month,1),"datepicker");else if("month"==t._curPane)t.onRightClick(new Date(t._year,Number(this.id.split(".").pop()),1),"month");else if("year"==t._curPane)t.onRightClick(new Date(Number(this.innerHTML),t._month,1),"year");else{var i=Number($ga(this,"A5DatePickerDay")),s=t._month+Number($ga(this,"A5DatePickerDayMonth")),a=t._year;s==-1?(a--,s=11):12==s&&(a++,s=0),t.onRightClick(new Date(a,s,i),"date")}return!1}},_render:function(){this._dd.low&&this._dd.low.getFullYear()>=this._year&&(this._year=this._dd.low.getFullYear(),this._dd.low.getMonth()>=this._month&&(this._month=this._dd.low.getMonth())),this._dd.high&&this._dd.high.getFullYear()<=this._year&&(this._year=this._dd.high.getFullYear(),this._dd.high.getMonth()<=this._month&&(this._month=this._dd.high.getMonth()));var e=new Date(this._year,this._month,1),t=new Date,i=t.getDate(),s=t.getMonth(),a=t.getFullYear();this._monthStartDay=e.getDay(),this._monthStartDay=this._monthStartDay-this.startDay,this._monthStartDay<0&&(this._monthStartDay=this._monthStartDay+7),11==this._month?(t.setDate(1),t.setMonth(0),t.setFullYear(this._year+1)):(t.setDate(1),t.setMonth(this._month+1),t.setFullYear(this._year)),e.setDate(0),t.setDate(0),this._daysInMonth=t.getDate(),this._daysInPrevMonth=e.getDate();var n=this.onItemDraw.constructor==Function,o=$(this.contId+".DATEPICKER"),r=1,l=$if(0==this._month,11,this._month-1),d=$if(0==this._month,this._year-1,this._year),h="",c=!1,u=!0;r=this._monthStartDay>0?this._daysInPrevMonth+1-this._monthStartDay:this._daysInPrevMonth-6;var f=0,p=0,m=0,_=-1;this._dd.dates.constructor==Function?_=1:this._dd.dates.constructor==Array&&(_=2);for(var g=2;g<8;g++){this.calendar.weeksOfYear.show&&(p=new Date(d,0,1),m=Math.ceil(((new Date(d,l,r)-p)/864e5+p.getDay()+1)/7),0==m?m=52:53==m&&(m=1),o.rows[g].cells[0].innerHTML=m);for(var v=1;v<8;v++)o.rows[g].cells[v].className=this._dcn[v-1],a==d&&s==l&&i==r?o.rows[g].cells[v].className=this._dcn[v-1]+" "+this.calendar.date.todayClassName:o.rows[g].cells[v].className=this._dcn[v-1],f=o.rows[g].cells[v].firstChild,c=!1,this._dd.low&&(this._dd.low.getFullYear()>d?c=!0:this._dd.low.getFullYear()==d&&(this._dd.low.getMonth()>l?c=!0:this._dd.low.getMonth()==l&&this._dd.low.getDate()>r&&(c=!0))),this._dd.high&&(this._dd.high.getFullYear()<d?c=!0:this._dd.high.getFullYear()==d&&(this._dd.high.getMonth()<l?c=!0:this._dd.high.getMonth()==l&&this._dd.high.getDate()<r&&(c=!0))),this._dd.days&&$u.a.find(this._dd.days,this._di[v-1])!=-1&&(c=!0),e=new Date(d,l,r,0,0,0,0),c||(1==_?c=this._dd.dates.call(this,e):2==_&&this._dd.dates.indexOf(e.getTime())!=-1&&(c=!0)),h=$if(d==this._selYear&&l==this._selMonth&&r==this._selDay,this.calendar.date.item.className+" "+this.calendar.date.item.selectedClassName,this.calendar.date.item.className),c?($sa(f,"A5DatePickerItemDisabled","true"),h=h+" "+this.calendar.date.item.disabledClassName):$sa(f,"A5DatePickerItemDisabled","false"),$sa(f,"A5DatePickerDay",""+r),f.innerHTML=""+r,n&&this.onItemDraw.call(this,f,e,"date"),g<4?(u?(f.className=h+" "+this.calendar.date.item.outOfRangeClassName,$sa(f,"A5DatePickerDayMonth","-1")):(f.className=h,$sa(f,"A5DatePickerDayMonth","0")),r==this._daysInPrevMonth?(r=1,u=!1,d=$if(11==l,d+1,d),l=$if(11==l,0,l+1)):r++):(u?(f.className=h+" "+this.calendar.date.item.outOfRangeClassName,$sa(f,"A5DatePickerDayMonth","1")):(f.className=h,$sa(f,"A5DatePickerDayMonth","0")),r==this._daysInMonth?(r=1,u=!0,d=$if(11==l,d+1,d),l=$if(11==l,0,l+1)):r++)}$(this.contId+".DATEPICKER.MONTH").innerHTML=this.months[this._month],$(this.contId+".DATEPICKER.YEAR").innerHTML=this._year,$(this.contId+".DATEPICKER.YEAR.INPUT").value=this._year;for(var y=0,b="",w=!1,g=0;g<12;g++)y=$(this.contId+".DATEPICKER.MONTH."+g),w=!1,this._dd.low&&(this._dd.low.getFullYear()>this._year?w=!0:this._dd.low.getFullYear()==this._year&&this._dd.low.getMonth()>g&&(w=!0)),this._dd.high&&(this._dd.high.getFullYear()<this._year?w=!0:this._dd.high.getFullYear()==this._year&&this._dd.high.getMonth()<g&&(w=!0)),b=g==this._month?this.navigator.panel.item.className+" "+this.navigator.panel.item.selectedClassName:this.navigator.panel.item.className,w?($sa(y,"A5DatePickerItemDisabled","true"),b=b+" "+this.navigator.panel.item.disabledClassName):$sa(y,"A5DatePickerItemDisabled","false"),y.className=b,n&&this.onItemDraw.call(this,y,new Date(this._year,g,1),"month");$rcn(this.contId+".DATEPICKER.MONTH."+this._oldMonth,this.navigator.panel.item.selectedClassName),$acn(this.contId+".DATEPICKER.MONTH."+this._month,this.navigator.panel.item.selectedClassName),this._renderDecade(10*Math.round((this._year-4.9999999)/10)),this._oldMonth=this._month,this._oldYear=this._year},_renderDecade:function(e){for(var t=0,i="",s=!1,a=this.onItemDraw.constructor==Function,n=0;n<10;n++)t=$(this.contId+".DATEPICKER.YEAR."+n),t.innerHTML=String(e+n),s=!1,this._dd.low&&this._dd.low.getFullYear()>e+n&&(s=!0),this._dd.high&&this._dd.high.getFullYear()<e+n&&(s=!0),i=e+n==this._year?this.navigator.panel.item.className+" "+this.navigator.panel.item.selectedClassName:this.navigator.panel.item.className,s?($sa(t,"A5DatePickerItemDisabled","true"),i=i+" "+this.navigator.panel.item.disabledClassName):$sa(t,"A5DatePickerItemDisabled","false"),t.className=i,a&&this.onItemDraw.call(this,t,new Date(e+n,1,1),"year");this._decade=e},_initRender:function(){for(var e=new Array,t=new Array,i=0;i<7;i++)e[i]=i+this.startDay,e[i]>6&&(e[i]=e[i]-7),this.calendar.date.className.constructor==Array?this.calendar.date.className[e[i]]?t[i]=this.calendar.date.className[e[i]]:t[i]=this.calendar.date.weekendClassName:0==e[i]||6==e[i]?t[i]=this.calendar.date.weekendClassName:t[i]=this.calendar.date.className;this._di=e,this._dcn=t;var s="none",a="none",n="none",o="14.2%";this.calendar.daysOfWeek.show&&(a=""),this.calendar.weeksOfYear.show&&(s="",o="12.5%"),this.calendar.daysOfWeek.show&&this.calendar.weeksOfYear.show&&(n=""),this.calendar.lockColumnWidth||(o="");for(var r=['<table id="{BASEID}.DATEPICKER" cellspacing="0" class="'+this.className+'" style="width: '+this.width+"; height: "+this.height+'; ">'," <tr>",'  <th id="{BASEID}.DATEPICKER.TITLE" colspan="8" class="'+this.navigator.header.className+'">','   <div id="{BASEID}.DATEPICKER.PREVBUTTON" style="float: left;">'+A5.u.icon.html(this.navigator.header.prevIcon,'align="top"')+"</div>",'   <div id="{BASEID}.DATEPICKER.NEXTBUTTON" style="float: right;">'+A5.u.icon.html(this.navigator.header.nextIcon,'align="top"')+"</div>",'   <div id="{BASEID}.DATEPICKER.MONTHYEARBUTTONS"><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.MONTH" class="'+this.navigator.header.item.className+'"></a> <a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.YEAR" class="'+this.navigator.header.item.className+'"></a></div>',"  </th>"," </tr>",' <tbody id="{BASEID}.DATEPICKER.DATEPANE">',"  <tr>",'   <td class="'+this.calendar.daysOfWeek.className+" "+this.calendar.weeksOfYear.headerClassName+'" style="width: '+o+"; display: "+n+'"></td>','   <th class="'+this.calendar.daysOfWeek.className+'" style="width: '+o+"; display: "+a+';">'+this.days[e[0]]+"</th>",'   <th class="'+this.calendar.daysOfWeek.className+'" style="width: '+o+"; display: "+a+';">'+this.days[e[1]]+"</th>",'   <th class="'+this.calendar.daysOfWeek.className+'" style="width: '+o+"; display: "+a+';">'+this.days[e[2]]+"</th>",'   <th class="'+this.calendar.daysOfWeek.className+'" style="width: '+o+"; display: "+a+';">'+this.days[e[3]]+"</th>",'   <th class="'+this.calendar.daysOfWeek.className+'" style="width: '+o+"; display: "+a+';">'+this.days[e[4]]+"</th>",'   <th class="'+this.calendar.daysOfWeek.className+'" style="width: '+o+"; display: "+a+';">'+this.days[e[5]]+"</th>",'   <th class="'+this.calendar.daysOfWeek.className+'" style="width: '+o+"; display: "+a+';">'+this.days[e[6]]+"</th>","  </tr>"],i=0;i<6;i++)r=r.concat(["  <tr>",'   <td id="{BASEID}.DV'+i+'.0" class="'+this.calendar.weeksOfYear.className+'" align="center" vAlign="center" style="display: '+s+"; width: "+o+';"></td>','   <td id="{BASEID}.DV'+i+'.1" class="'+t[0]+'" style="width: '+o+';"><a href="#" tabindex="-1" class="'+this.calendar.date.item.className+'">&nbsp;</a></td>','   <td id="{BASEID}.DV'+i+'.2" class="'+t[1]+'" style="width: '+o+';"><a href="#" tabindex="-1" class="'+this.calendar.date.item.className+'">&nbsp;</a></td>','   <td id="{BASEID}.DV'+i+'.3" class="'+t[2]+'" style="width: '+o+';"><a href="#" tabindex="-1" class="'+this.calendar.date.item.className+'">&nbsp;</a></td>','   <td id="{BASEID}.DV'+i+'.4" class="'+t[3]+'" style="width: '+o+';"><a href="#" tabindex="-1" class="'+this.calendar.date.item.className+'">&nbsp;</a></td>','   <td id="{BASEID}.DV'+i+'.5" class="'+t[4]+'" style="width: '+o+';"><a href="#" tabindex="-1" class="'+this.calendar.date.item.className+'">&nbsp;</a></td>','   <td id="{BASEID}.DV'+i+'.6" class="'+t[5]+'" style="width: '+o+';"><a href="#" tabindex="-1" class="'+this.calendar.date.item.className+'">&nbsp;</a></td>','   <td id="{BASEID}.DV'+i+'.7" class="'+t[6]+'" style="width: '+o+';"><a href="#" tabindex="-1" class="'+this.calendar.date.item.className+'">&nbsp;</a></td>',"  </tr>"]);if(r=r.concat([" </tbody>",' <tbody id="{BASEID}.DATEPICKER.MONTHPANE" style="display: none;">',"  <tr>",'   <td class="'+this.navigator.panel.className+'" colspan="8" style="padding: 0px;">','    <table id="{BASEID}.DATEPICKER.MONTHTABLE" cellspacing="0" cellpadding="2" style="width: 100%; height: 100%;">',"     <tr>",'      <td style="width:33%"><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.MONTH.0" class="'+this.navigator.panel.item.className+'">'+this.months[0]+"</a></td>",'      <td style="width:34%"><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.MONTH.1" class="'+this.navigator.panel.item.className+'">'+this.months[1]+"</a></td>",'      <td style="width:33%"><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.MONTH.2" class="'+this.navigator.panel.item.className+'">'+this.months[2]+"</a></td>","     </tr>","     <tr>",'      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.MONTH.3" class="'+this.navigator.panel.item.className+'">'+this.months[3]+"</a></td>",'      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.MONTH.4" class="'+this.navigator.panel.item.className+'">'+this.months[4]+"</a></td>",'      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.MONTH.5" class="'+this.navigator.panel.item.className+'">'+this.months[5]+"</a></td>","     </tr>","     <tr>",'      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.MONTH.6" class="'+this.navigator.panel.item.className+'">'+this.months[6]+"</a></td>",'      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.MONTH.7" class="'+this.navigator.panel.item.className+'">'+this.months[7]+"</a></td>",'      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.MONTH.8" class="'+this.navigator.panel.item.className+'">'+this.months[8]+"</a></td>","     </tr>","     <tr>",'      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.MONTH.9" class="'+this.navigator.panel.item.className+'">'+this.months[9]+"</a></td>",'      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.MONTH.10" class="'+this.navigator.panel.item.className+'">'+this.months[10]+"</a></td>",'      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.MONTH.11" class="'+this.navigator.panel.item.className+'">'+this.months[11]+"</a></td>","     </tr>","    </table>","   </td>","  </tr>"," </tbody>",' <tbody id="{BASEID}.DATEPICKER.YEARPANE" style="display: none;">',"  <tr>",'   <td class="'+this.navigator.panel.className+'" colspan="8" style="padding: 0px;">','    <table id="{BASEID}.DATEPICKER.YEARTABLE" cellspacing="0" cellpadding="2" style="width: 100%; height: 100%;">',"     <tr>",'      <td colspan="4" align="center">','       <input id="{BASEID}.DATEPICKER.YEAR.INPUT" size="4" class="'+this.navigator.panel.edit.className+'" style="text-align: center;" />',"      </td>","     </tr>","     <tr>",'      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.YEAR.PREVDEC" class="'+this.navigator.panel.item.className+'">&laquo;</a></td>','      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.YEAR.0" class="'+this.navigator.panel.item.className+'"></a></td>','      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.YEAR.1" class="'+this.navigator.panel.item.className+'"></a></td>','      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.YEAR.2" class="'+this.navigator.panel.item.className+'"></a></td>',"     </tr>","     <tr>",'      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.YEAR.3" class="'+this.navigator.panel.item.className+'"></a></td>','      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.YEAR.4" class="'+this.navigator.panel.item.className+'"></a></td>','      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.YEAR.5" class="'+this.navigator.panel.item.className+'"></a></td>','      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.YEAR.6" class="'+this.navigator.panel.item.className+'"></a></td>',"     </tr>","     <tr>",'      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.YEAR.7" class="'+this.navigator.panel.item.className+'"></a></td>','      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.YEAR.8" class="'+this.navigator.panel.item.className+'"></a></td>','      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.YEAR.9" class="'+this.navigator.panel.item.className+'"></a></td>','      <td><a href="#" tabindex="-1" id="{BASEID}.DATEPICKER.YEAR.NEXTDEC" class="'+this.navigator.panel.item.className+'">&raquo;</a></td>',"     </tr>","    </table>","   </td>","  </tr>"," </tbody>","</table>"]),
r=r.join("\n"),r=$u.s.tran(r,"{BASEID}",this.contId),$(this.contId).innerHTML=r,this.navigator.header.todayButton.show){var l=document.createElement("a");l.href="#",l.tabIndex="-1",l.id=this.contId+".DATEPICKER.TODAYBUTTON",l.className=this.navigator.header.item.className,l.title=this.navigator.header.todayButton.tip,l.innerHTML=this.navigator.header.todayButton.html;var d=$(this.contId+".DATEPICKER.TITLE");"center"==this.navigator.header.todayButton.location?(d=$(this.contId+".DATEPICKER.MONTHYEARBUTTONS"),d.appendChild(document.createTextNode(" - ")),d.appendChild(l)):"left"==this.navigator.header.todayButton.location?($ss(l,"float: left;"),d.insertBefore(l,$(this.contId+".DATEPICKER.NEXTBUTTON"))):($ss(l,"float: right;"),d.insertBefore(l,$(this.contId+".DATEPICKER.MONTHYEARBUTTONS"))),$e.add(l,A5.d.evnts.click,this._todayButton,this,!0),$e.add(l,"click",function(e){return $e.preventDefault(e),!1}),A5.flags.isMobile||($e.add(l,"mouseover",this._nmOver,this),$e.add(l,"mouseout",this._nmOut,this))}var h=$(this.contId+".DATEPICKER");"object"!=typeof this.style&&"string"!=typeof this.style||$ss(h,this.style),$e.add(h,"contextmenu",this._rClick,this);var c=$(this.contId+".DATEPICKER.DATEPANE").getElementsByTagName("a");if($e.add(c,A5.d.evnts.click,this._dClick,this),$e.add(c,"click",function(e){return $e.preventDefault(e),!1}),A5.flags.isMobile||($e.add(c,"mouseover",this._mOver,this),$e.add(c,"mouseout",this._mOut,this)),$e.add(c,"contextmenu",this._rClick,this),"object"!=typeof this.calendar.date.item.style&&"string"!=typeof this.calendar.date.item.style||$ss(c,this.calendar.date.item.style),"object"==typeof this.calendar.date.style||"string"==typeof this.calendar.date.style)for(var i=2;i<8;i++)for(var u=1;u<8;u++)$ss(h.rows[i].cells[u],this.calendar.date.style),""!=o&&(h.rows[i].cells[u].style.width=o);if("object"==typeof this.calendar.daysOfWeek.style||"string"==typeof this.calendar.daysOfWeek.style)for(var u=1;u<8;u++)$ss(h.rows[1].cells[u],this.calendar.daysOfWeek.style),this.calendar.daysOfWeek.show?h.rows[2].cells[u].style.display="":h.rows[1].cells[u].style.display="none";if("object"==typeof this.calendar.weeksOfYear.style||"string"==typeof this.calendar.weeksOfYear.style)for(var i=1;i<8;i++)$ss(h.rows[i].cells[0],this.calendar.weeksOfYear.style),1==i?this.calendar.daysOfWeek.show&&this.calendar.weeksOfYear.show?h.rows[i].cells[0].style.display="":h.rows[i].cells[0].style.display="none":this.calendar.weeksOfYear.show?h.rows[i].cells[0].style.display="":h.rows[i].cells[0].style.display="none";c=$(this.contId+".DATEPICKER.MONTHPANE").getElementsByTagName("a"),A5.flags.isMobile||($e.add(c,"mouseover",this._mOver,this),$e.add(c,"mouseout",this._mOut,this)),$e.add(c,"contextmenu",this._rClick,this),"object"!=typeof this.navigator.panel.item.style&&"string"!=typeof this.navigator.panel.item.style||$ss(c,this.navigator.panel.item.style),c=$(this.contId+".DATEPICKER.YEARPANE").getElementsByTagName("a"),A5.flags.isMobile||($e.add(c,"mouseover",this._mOver,this),$e.add(c,"mouseout",this._mOut,this)),$e.add(c,"contextmenu",this._rClick,this),"object"!=typeof this.navigator.panel.item.style&&"string"!=typeof this.navigator.panel.item.style||$ss(c,this.navigator.panel.item.style),"object"!=typeof this.navigator.panel.edit.style&&"string"!=typeof this.navigator.panel.edit.style||$ss(this.contId+".DATEPICKER.YEAR.INPUT",this.navigator.panel.edit.style),$e.add(this.contId+".DATEPICKER.MONTH",A5.d.evnts.click,this._monthPane,this,!0),$e.add(this.contId+".DATEPICKER.MONTH","click",function(e){return $e.preventDefault(e),!1}),$e.add(this.contId+".DATEPICKER.YEAR",A5.d.evnts.click,this._yearPane,this,!0),$e.add(this.contId+".DATEPICKER.YEAR","click",function(e){return $e.preventDefault(e),!1}),A5.flags.isMobile||($e.add([this.contId+".DATEPICKER.MONTH",this.contId+".DATEPICKER.YEAR"],"mouseover",this._nmOver,this),$e.add([this.contId+".DATEPICKER.MONTH",this.contId+".DATEPICKER.YEAR"],"mouseout",this._nmOut,this)),$e.add(this.contId+".DATEPICKER.PREVBUTTON",A5.d.evnts.click,this._prevButton,this,!0),$e.add(this.contId+".DATEPICKER.PREVBUTTON","click",function(e){return $e.preventDefault(e),!1}),$e.add(this.contId+".DATEPICKER.NEXTBUTTON",A5.d.evnts.click,this._nextButton,this,!0),$e.add(this.contId+".DATEPICKER.NEXTBUTTON","click",function(e){return $e.preventDefault(e),!1}),"object"!=typeof this.navigator.header.style&&"string"!=typeof this.navigator.header.style||$ss(this.contId+".DATEPICKER.TITLE",this.navigator.header.style),"object"!=typeof this.navigator.panel.style&&"string"!=typeof this.navigator.panel.style||($ss($(this.contId+".DATEPICKER.MONTHPANE").rows[0].cells[0],this.navigator.panel.style),$ss($(this.contId+".DATEPICKER.YEARPANE").rows[0].cells[0],this.navigator.panel.style)),$e.add(this.contId+".DATEPICKER.YEAR.INPUT","keypress",this._inputYear,this),$e.add(this.contId+".DATEPICKER.YEAR.INPUTCOMMIT",A5.d.evnts.click,this._inputYear,this),$e.add(this.contId+".DATEPICKER.YEAR.INPUTCOMMIT","click",function(e){return $e.preventDefault(e),!1}),$e.add([this.contId+".DATEPICKER.MONTH.0",this.contId+".DATEPICKER.MONTH.1",this.contId+".DATEPICKER.MONTH.2",this.contId+".DATEPICKER.MONTH.3",this.contId+".DATEPICKER.MONTH.4",this.contId+".DATEPICKER.MONTH.5",this.contId+".DATEPICKER.MONTH.6",this.contId+".DATEPICKER.MONTH.7",this.contId+".DATEPICKER.MONTH.8",this.contId+".DATEPICKER.MONTH.9",this.contId+".DATEPICKER.MONTH.10",this.contId+".DATEPICKER.MONTH.11"],A5.d.evnts.click,this._monthClick,this),$e.add([this.contId+".DATEPICKER.MONTH.0",this.contId+".DATEPICKER.MONTH.1",this.contId+".DATEPICKER.MONTH.2",this.contId+".DATEPICKER.MONTH.3",this.contId+".DATEPICKER.MONTH.4",this.contId+".DATEPICKER.MONTH.5",this.contId+".DATEPICKER.MONTH.6",this.contId+".DATEPICKER.MONTH.7",this.contId+".DATEPICKER.MONTH.8",this.contId+".DATEPICKER.MONTH.9",this.contId+".DATEPICKER.MONTH.10",this.contId+".DATEPICKER.MONTH.11"],"click",function(e){return $e.preventDefault(e),!1}),$e.add([this.contId+".DATEPICKER.YEAR.0",this.contId+".DATEPICKER.YEAR.1",this.contId+".DATEPICKER.YEAR.2",this.contId+".DATEPICKER.YEAR.3",this.contId+".DATEPICKER.YEAR.4",this.contId+".DATEPICKER.YEAR.5",this.contId+".DATEPICKER.YEAR.6",this.contId+".DATEPICKER.YEAR.7",this.contId+".DATEPICKER.YEAR.8",this.contId+".DATEPICKER.YEAR.9"],A5.d.evnts.click,this._yearClick,this),$e.add([this.contId+".DATEPICKER.YEAR.0",this.contId+".DATEPICKER.YEAR.1",this.contId+".DATEPICKER.YEAR.2",this.contId+".DATEPICKER.YEAR.3",this.contId+".DATEPICKER.YEAR.4",this.contId+".DATEPICKER.YEAR.5",this.contId+".DATEPICKER.YEAR.6",this.contId+".DATEPICKER.YEAR.7",this.contId+".DATEPICKER.YEAR.8",this.contId+".DATEPICKER.YEAR.9"],"click",function(e){return $e.preventDefault(e),!1}),$e.add(this.contId+".DATEPICKER.YEAR.PREVDEC",A5.d.evnts.click,this._prevDecade,this),$e.add(this.contId+".DATEPICKER.YEAR.PREVDEC","click",function(e){return $e.preventDefault(e),!1}),$e.add(this.contId+".DATEPICKER.YEAR.NEXTDEC",A5.d.evnts.click,this._nextDecade,this),$e.add(this.contId+".DATEPICKER.YEAR.NEXTDEC","click",function(e){return $e.preventDefault(e),!1}),this.refresh()}},A5.TimePicker=Class.create(),A5.TimePicker.prototype={initialize:function(e,t){this.contId=e,$u.o.assign(this,{override:"base",inputId:"",format:"h:0m am",switchYear:50,time:0,hours:0,minutes:0,seconds:0,className:"",disabledClassName:"",style:0,edit:{className:"",buttonClassName:"",buttonImage:"",menu:{hourColumns:12,minuteColumns:10,secondColumns:10}},meridianClassName:"",mouseWheelEdit:!0,selectionRequired:!1,disabled:!1,onRightClick:0,onChange:0,onHourChange:0,onMinuteChange:0,onSecondChange:0}),"undefined"!=typeof A5._timePickerDefaults&&$u.o.assign(this,A5._timePickerDefaults),"undefined"!=typeof t.theme&&(A5.themes.assign(this,t.theme,"timePicker"),this.edit.menu.theme=t.theme.split(":").shift()),$u.o.assign(this,t),A5.overrides.assign(this,"timePicker",this.override),$u.o.assign(this.edit.menu,{iconColumn:{show:!1},_onSelect:this.onSelect,onClick:function(){$(this._targetId).focus();var e="",t=this._targetId.split("."),i=t.pop();"H"==i?e=this.getValue("hours"):"M"==i?e=this.getValue("minutes"):"S"==i&&(e=this.getValue("seconds")),"H"==i&&(e=e.toUpperCase().search("PM")!=-1&&12!=$u.s.toNum(e)||e.toUpperCase().search("AM")!=-1&&12==$u.s.toNum(e)?$u.s.toNum(e)+12:$u.s.toNum(e),24==e&&(e=0),this._hasMeridian&&(e>=12?($svs(t.join(".")+".A","PM"),e-=12):$svs(t.join(".")+".A","AM"))),$svs(this._targetId,e),$e.execute(this._targetId,"change")}});var i=new Date;this._parsedFormat=i._parseFormat(this.format),this.time.constructor!=Date&&("string"==typeof this.time?(i.fromFormat(this.time,this._parsedFormat,this.switchYear),this.time=i):this.time=new Date),this._initRender(),this.disabled&&this.setDisabled(!0),this._menu=new A5.Menu([{type:"radio-group",columns:this.edit.menu.hourColumns,name:"hours",variable:"hours",data:this._getHours()},{type:"radio-group",columns:this.edit.menu.minuteColumns,name:"minutes",variable:"minutes",data:this._getMinutes()},{type:"radio-group",columns:this.edit.menu.secondColumns,name:"seconds",variable:"seconds",data:this._getSeconds()}],this.edit.menu)},refresh:function(){var e=this.time.getHours(),t=this.time.getMinutes(),i=this.time.getSeconds(),s="AM";this._parsedFormat.hasMeridian&&e>=12?(e-=12,0==e&&(e=12),s="PM"):this._parsedFormat.hasMeridian&&0==e&&(e=12),t=t<10?"0"+t:""+t,i=i<10?"0"+i:""+i,e=""+e,$svs(this.contId+".H",e),$svs(this.contId+".M",t),$svs(this.contId+".S",i),$svs(this.contId+".A",s)},setDisabled:function(e){e?$acn(this.contId,this.disabledClassName):$rcn(this.contId,this.disabledClassName),$(this.contId+".H")&&($(this.contId+".H").disabled=e),$(this.contId+".M")&&($(this.contId+".M").disabled=e),$(this.contId+".S")&&($(this.contId+".S").disabled=e),this.disabled=e},setValue:function(e){if(e.constructor!=Date){if("string"==typeof e){var t=new Date;t.fromFormat(e,this._parsedFormat,this.switchYear),this.time=t}}else this.time=e;this.refresh()},_getHours:function(){if(this.disabled)return!1;var e=new Array;if(this.hours.constructor==Array)e=this.hours;else if(this.hours.constructor==Function)e=this.hours(this.time);else{if("number"==typeof this.hours&&(step=Math.max(this.hours,1)),this._parsedFormat.hasMeridian)for(var t=0;t<24;t+=step)0==t?e.push("12am"):t<12?e.push(t+"am"):12==t?e.push("12pm"):e.push(t-12+"pm");else for(var t=0;t<24;t+=step)e.push(""+t)}return e},_getMinutes:function(){if(this.disabled)return!1;var e=new Array;if(this.minutes.constructor==Array)e=this.minutes;else if(this.minutes.constructor==Function)e=this.minutes(this.time);else{var t=1;"number"==typeof this.minutes&&(t=Math.max(this.minutes,1));for(var i=0;i<60;i+=t)i<10?e.push("0"+i):e.push(""+i)}return e},_getSeconds:function(){if(this.disabled)return!1;var e=new Array;if(this.seconds.constructor==Array)e=this.seconds;else if(this.seconds.constructor==Function)e=this.seconds(this.time);else{var t=1;"number"==typeof this.seconds&&(t=Math.max(this.seconds,1));for(var i=0;i<60;i+=t)i<10?e.push("0"+i):e.push(""+i)}return e},_eScroll:function(e,t){if($e.stopEvent(e),t.disabled)return!1;var i=!1;if(e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i){var s=this.id.split(".").pop();if("H"==s)var a=t._getHours();else if("M"==s)var a=t._getMinutes();else if("S"==s)var a=t._getSeconds();for(var n=new Array,o=this.value,r=0;r<a.length;r++)n.push(String(a[r]).toUpperCase());var l=$u.a.find(n,o);if(l==-1&&"H"==s&&t._parsedFormat.hasMeridian)o+=$gvs(t.contId+".A"),l=$u.a.find(n,o);else if(l==-1){for(var r=0;r<n.length;r++)n[r]=$u.s.toNum(""+n[r]);l=$u.a.find(n,$u.s.toNum(o))}l!=-1?(l=$u.a.find(n,o),l+=i,l>a.length-1?l=0:l<0&&(l=a.length-1)):l=0;var d=a[l];"H"==s?(d=d.toUpperCase().search("PM")!=-1?$u.s.toNum(d)+12:$u.s.toNum(d),t._parsedFormat.hasMeridian&&(d>=12?(d-=12,0==d&&(d=12),$svs(t.contId+".A","PM")):0==d?(d=12,$svs(t.contId+".A","AM")):$svs(t.contId+".A","AM"))):(d=$u.s.toNum(d),d<10&&(d="0"+d)),this.value=d,$e.execute(this,"change")}return!1},_eChange:function(e,t){var i=this.id.split(".").pop();if("H"==i)if(t._parsedFormat.hasMeridian){var s=Number(this.value);"PM"==$gvs(t.contId+".A")&&12!=s&&(s+=12),t.time.setHours(s);var a="AM";24==s&&(hor=0),s>=12?(s-=12,0==s&&(s=12),a="PM"):0==s&&(s=12),$svs(t.contId+".H",""+s),$svs(t.contId+".A",""+a)}else t.time.setHours(this.value);else"M"==i?t.time.setMinutes(this.value):"S"==i&&t.time.setSeconds(this.value);$(t.inputId)&&($svs(t.inputId,t.time.toFormat(t._parsedFormat)),$e.execute(t.inputId,"change")),"H"==i?(t.onHourChange.constructor==Function&&t.onHourChange(t.time),t.onChange.constructor==Function&&t.onChange(t.time)):"M"==i?(t.onMinuteChange.constructor==Function&&t.onMinuteChange(t.time),t.onChange.constructor==Function&&t.onChange(t.time)):"S"==i&&(t.onSecondChange.constructor==Function&&t.onSecondChange(t.time),t.onChange.constructor==Function&&t.onChange(t.time))},_ddShow:function(e,t){if($e.stopEvent(e),t.disabled)return!1;var i=this.id.split(".");if(i=i[i.length-2],t._menu.setDisplay("hours",!1),t._menu.setDisplay("minutes",!1),t._menu.setDisplay("seconds",!1),"H"==i){t._menu.setDisplay("hours",!0);var s=t.time.getHours();t._parsedFormat.hasMeridian?0==s||24==s?t._menu.setValue("hours","12am"):12==s?t._menu.setValue("hours","12pm"):s<12?t._menu.setValue("hours",s+"am"):t._menu.setValue("hours",s-12+"pm"):t._menu.setValue("hours",""+s)}else"M"==i?(t._menu.setDisplay("minutes",!0),t._menu.setValue("minutes",$gvs(t.contId+".M"))):"S"==i&&(t._menu.setDisplay("seconds",!0),t._menu.setValue("seconds",$gvs(t.contId+".S")));return t._menu._targetId=t.contId+"."+i,t._menu._hasMeridian=t._parsedFormat.hasMeridian,t._menu.show("dropdown",this),!1},_mClick:function(e,t){return $e.stopEvent(e),!t.disabled&&("AM"==this.innerHTML?t.time.setHours(t.time.getHours()+12):t.time.setHours(t.time.getHours()-12),t.refresh(),$(t.inputId)&&($svs(t.inputId,t.time.toFormat(t._parsedFormat)),$e.execute(t.inputId,"change")),t.onHourChange.constructor==Function&&t.onHourChange(t.time),t.onChange.constructor==Function&&t.onChange(t.time),!1)},_rClick:function(e,t){return!t.disabled&&(t.onRightClick.constructor==Function?(t.onRightClick(),$e.stopEvent(e),!1):void 0)},_initRender:function(){var e=new Array,t="";this.selectionRequired&&(t=' readonly="readonly"'),e=e.concat(['<table id="'+this.contId+'.TABLE" class="'+this.className+'" style="direction: ltr;" border="0" cellspacing="0" cellpadding="0">'," <tr>",'  <td><input id="'+this.contId+'.H" class="'+this.edit.className+'" size="2" maxlength="2"'+t+" /></td>","  <td>:</td>",'  <td><input id="'+this.contId+'.M" class="'+this.edit.className+'" size="2" maxlength="2"'+t+" /></td>"]),"none"!=this._parsedFormat.secondsMode&&(e=e.concat(["  <td>:</td>",'  <td><input id="'+this.contId+'.S" class="'+this.edit.className+'" size="2" maxlength="2" /></td>'])),this._parsedFormat.hasMeridian&&e.push('<td><div id="'+this.contId+'.A" class="'+this.meridianClassName+'">AM</div></td>'),e=e.concat([" </tr>"," <tr>",'  <td><div tabindex="-1" id="'+this.contId+'.H.DD" class="'+this.edit.buttonClassName+'" style="font: 0pt arial;">'+A5.u.icon.html(this.edit.buttonImage,'style="border: none;"')+"</div></td>",'  <td style="font-size: 0px;"></td>','  <td><div tabindex="-1" id="'+this.contId+'.M.DD" class="'+this.edit.buttonClassName+'" style="font: 0pt arial;">'+A5.u.icon.html(this.edit.buttonImage,'style="border: none;"')+"</div></td>"]),"none"!=this._parsedFormat.secondsMode&&(e=e.concat(["  <td></td>",'  <td><div tabindex="-1" id="'+this.contId+'.S.DD" class="'+this.edit.buttonClassName+'" style="font: 0pt arial;">'+A5.u.icon.html(this.edit.buttonImage,'style="border: none;"')+"</div></td>"])),this._parsedFormat.hasMeridian&&e.push("<td></td>"),"object"!=typeof this.style&&"string"!=typeof this.style||$ss(this.contId+".TABLE",this.style),e=e.concat([" </tr>","</table>"]);var i=$(this.contId);i.innerHTML=e.join("\n"),$e.add(i,"contextmenu",this._rClick,this),this.mouseWheelEdit&&($e.add([this.contId+".H",this.contId+".M",this.contId+".S"],"mousewheel",this._eScroll,this),$e.add([this.contId+".H",this.contId+".M",this.contId+".S"],"DOMMouseScroll",this._eScroll,this)),$e.add([this.contId+".H",this.contId+".M",this.contId+".S"],"change",this._eChange,this),$e.add([this.contId+".H.DD",this.contId+".M.DD",this.contId+".S.DD"],A5.d.evnts.click,this._ddShow,this),this._parsedFormat.hasMeridian&&$e.add(this.contId+".A",A5.d.evnts.click,this._mClick,this),this.refresh()}},A5.DateTimePicker=Class.create(),A5.DateTimePicker.prototype={initialize:function(e,t){if(this.contId=e,$u.o.assign(this,{override:"base",inputId:"",format:"MM/dd/yyyy h:0m am",switchYear:50,date:0,combinedContainer:{layout:"time/date",className:""},disabled:!1,datePicker:{disabledDates:{}},timePicker:{},onChange:0}),"undefined"!=typeof A5._dateTimePickerDefaults&&$u.o.assign(this,A5._dateTimePickerDefaults),"undefined"!=typeof t.theme){A5.themes.assign(this,t.theme,"dateTimePicker");var i=t.theme.split(":").shift();this.datePicker.theme=i,this.timePicker.theme=i}$u.o.assign(this,t),A5.overrides.assign(this,"dateTimePicker",this.override);var s=new Date;this._parsedFormat=s._parseFormat(this.format);var a=this._parsedFormat.hasDate,n=this._parsedFormat.hasTime;if(this.date.constructor!=Date&&("string"==typeof this.date?(s.fromFormat(this.date,this._parsedFormat,this.switchYear),this.date=s):this.date=new Date),this.datePicker.date=this.date,this.datePicker.format=this.format,this.datePicker.switchYear=this.switchYear,this.datePicker.inputId=this.contId+".DT",this.timePicker.time=this.date,this.timePicker.format=this.format,this.timePicker.switchYear=this.switchYear,this.timePicker.inputId=this.contId+".DT",this.isCombined=!1,a&&n){var o='<td id="'+this.contId+'.T" align="center" valign="center"></td>',r='<td id="'+this.contId+'.D" align="center" valign="center"></td>',l=o+"</tr><tr>"+r,d=this.combinedContainer.layout.toLowerCase();"time date"==d?l=o+r:"date time"==d?l=r+o:"date/time"==d&&(l=r+"</tr><tr>"+o),$(this.contId).innerHTML='<input type="hidden" id="'+this.contId+'.DT" /><table class="'+this.combinedContainer.className+'" cellspacing="0" cellpadding="2"><tr>'+l+"</tr></table>",this._dp=new A5.DatePicker(this.contId+".D",this.datePicker),this._tp=new A5.TimePicker(this.contId+".T",this.timePicker),this.isCombined=!0}else a?($(this.contId).innerHTML='<input type="hidden" id="'+this.contId+'.DT" /><div id="'+this.contId+'.D"></div>',this._dp=new A5.DatePicker(this.contId+".D",this.datePicker)):n&&($(this.contId).innerHTML='<input type="hidden" id="'+this.contId+'.DT" /><div id="'+this.contId+'.T"></div>',this._tp=new A5.TimePicker(this.contId+".T",this.timePicker));$e.add(this.contId+".DT","change",this._change,this,!0),this.disabled&&this.setDisabled(!0)},setDisabled:function(e){this._dp&&this._dp.setDisabled(e),this._tp&&this._tp.setDisabled(e),this.disabled=e},setValue:function(e){if(e.constructor!=Date){if("string"!=typeof e)return!1;var t=new Date;""!=e&&t.fromFormat(e,this._parsedFormat,this.switchYear),e=t}this.date=e,this._parsedFormat.hasDate&&this._dp.setValue(e),this._parsedFormat.hasTime&&this._tp.setValue(e)},refresh:function(){$u.o.assign(this._dp.disabledDates,this.datePicker.disabledDates),this._dp.refresh()},_change:function(){$(this.inputId)&&($svs(this.inputId,this.date.toFormat(this._parsedFormat)),$e.execute(this.inputId,"change")),this.onChange.constructor==Function&&this.onChange.call(this,this.date.toFormat(this._parsedFormat))}},A5.EditDateTime=Class.create(A5.Edit,{initialize:function(e){if($u.o.assign(this,{theme:"",override:"base",decouple:!1,dateTime:{theme:""},window:{theme:"",type:"popup",location:"dropdown",autoGenerateButtons:!0,title:{tools:{items:[]}},buttons:{items:[]}},container:{className:"",hoverClassName:"",focusClassName:"",pressedClassName:"",style:0,editClassName:"",separatorClassName:"",button:{html:"",className:"",hoverClassName:"",pressedClassName:""}},selectionRequired:!1,onSelect:0,onNoSelect:0}),"undefined"!=typeof e.theme){A5.themes.assign(this,e.theme,"editButtonGroup");var t=e.theme.split(":").shift();""==this.window.theme&&(this.window.theme=t+":dropdown"),""==this.dateTime.theme&&(this.dateTime.theme=t+":dropdown")}$u.o.assign(this,e),A5.overrides.assign(this,"editDateTime",this.override);for(var i=!1,s=!1,a=0;a<this.window.title.tools.items.length;a++)if("undefined"!=typeof this.window.title.tools.items[a].action&&"commit"==this.window.title.tools.items[a].action){i=!0;break}if(this.window.autoGenerateButtons)this.window.buttons.items.push({html:"Close",action:"close"}),this.window.buttons.items.push({html:"Done",action:"commit"}),s=!0;else for(var a=0;a<this.window.buttons.items.length;a++)if("undefined"!=typeof this.window.buttons.items[a].action&&"commit"==this.window.buttons.items[a].action){s=!0;break}this._hasTCommit=i,this._hasBCommit=s,$u.o.assign(this.window,{decouple:this.decouple,title:{show:!1},body:{content:{type:"blank"}},autoShow:!1,autoPosition:!1,_container:{focusClassName:this.container.focusClassName,pressedClassName:this.container.pressedClassName,button:{pressedClassName:this.container.button.pressedClassName}},_nsTO:0,_bcTO:0,_hasFocus:!1,onShow:function(){clearTimeout(this._nsTO),clearTimeout(this._bcTO);var e=$(this._targetId+".CONTAINER");e&&(""!=this._container.pressedClassName&&$acn(e,this._container.pressedClassName),""!=this._container.button.pressedClassName&&$acn($(this._targetId+".BUTTON"),this._container.button.pressedClassName))},onHide:function(){this._hasFocus||(this._bcTO=setTimeout(Function("$e.execute('"+this._targetId+"','a5blurcomplete'); var t = 1"),100));var e=$(this._targetId+".CONTAINER");e&&(""==this._container.focusClassName||this._makeSelection||$rcn(e,this._container.focusClassName),""!=this._container.pressedClassName&&$rcn(e,this._container.pressedClassName),""!=this._container.button.pressedClassName&&$rcn($(this._targetId+".BUTTON"),this._container.button.pressedClassName)),this._makeSelection||this._hasFocus||(this._nsTO=setTimeout(Function("$e.execute('"+this._targetId+"','a5noselect');"),100)),this._makeSelection=!1}}),$u.o.assign(this.dateTime,{decouple:this.decouple,onChange:function(){var e=$(this._targetId);this.decouple||e.focus(),setTimeout(Function("$e.execute($('"+this._targetId+"'),'a5datetimeselection');"),1)}}),this._editPrepare(),this._value="",this._oldIPoint=0},_createDropdown:function(){var e=new A5.Window(this.window);this._dateTime=new A5.DateTimePicker(e.getWindowId("body"),this.dateTime),this._dateTime._window=e,this._dateTime._parsedFormat.hasTime?(this._hasTCommit&&this._dateTime._window.setDisplay("title",!0),this._hasBCommit&&this._dateTime._window.setDisplay("buttons",!0),this._dateTime.onChange=0):(this._hasTCommit&&this._dateTime._window.setDisplay("title",!1),this._hasBCommit&&this._dateTime._window.setDisplay("buttons",!1)),this._dateTime._window.addAction("commit",function(){var e=$(this._targetId);this.decouple||e.focus(),$e.execute(e,"a5datetimeselection")})},create:function(e){var t="undefined"==typeof arguments[1]||arguments[1],i=document.createElement("input");if("object"==typeof e){"undefined"!=typeof e.className&&(i.className=e.className,delete e.className),"undefined"!=typeof e.style&&($ss(i,e.style),delete e.style);for(var s in e)$sa(i,s,e[s])}if(""==i.id&&(i.id=A5.u.getUniqueId()),t){var a=document.createElement("table");a.id=i.id+".CONTAINER",a.cellPadding="0",a.cellSpacing="0",a.className=this.container.className,"number"!=typeof this.container.style&&$ss(a,this.container.style),$ss(a,"display: inline-table; *display: inline;"),a.insertRow(0);var n=0;return a.rows[0].insertCell(n),i.className=this.container.editClassName,$ss(i,"width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"),a.rows[0].cells[n].appendChild(i),n++,""!=this.container.separatorClassName&&(a.rows[0].insertCell(n),a.rows[0].cells[n].innerHTML="&nbsp;",a.rows[0].cells[n].className=this.container.separatorClassName,n++),a.rows[0].insertCell(n),a.rows[0].cells[n].id=i.id+".BUTTON",a.rows[0].cells[n].className=this.container.button.className,a.rows[0].cells[n].innerHTML=this.container.button.html,a.rows[0].cells[n].style.width="0%",document.documentElement.appendChild(a),this._bind(i),a}return this._bind(i),i},bind:function(e){if(e.constructor==Array)for(var t=0;t<e.length;t++)e[t].constructor==Array?this._bind(e[t][0],e[t][1]):this._bind(e[t]);else this._bind(e,arguments[1])},_bind:function(e){var e=$(e);if("true"==$ga(e,"A5ControlBound"))return!0;var t=""!=e.id?e.id:e.name,i=$(t+".CONTAINER");!A5.flags.isMobile&&i&&""!=this.container.hoverClassName&&($e.add(i,"mouseover",Function("$acn(this,'"+this.container.hoverClassName+"')")),$e.add(i,"mouseout",Function("$rcn(this,'"+this.container.hoverClassName+"')")));var s="undefined"!=typeof arguments[1]?arguments[1]:"",a=!1;if(""==s?$(t+".BUTTON")&&(a=$(t+".BUTTON")):a=$(s),a?($sa(a,"A5TargetInput",t),$e.add(a,A5.d.evnts.click,this._bOnClick,this),!A5.flags.isMobile&&i&&this.container.button.hoverClassName&&($e.add(a,"mouseover",Function("$acn('"+t+".CONTAINER','"+this.container.hoverClassName+"'); $acn(this,'"+this.container.button.hoverClassName+"')")),$e.add(a,"mouseout",Function("$rcn('"+t+".CONTAINER','"+this.container.hoverClassName+"'); $rcn(this,'"+this.container.button.hoverClassName+"')")))):$sa(e,"A5HasButton","false"),i&&this.container.button.hoverClassName)for(var n=0,o=0;$(t+".CUSTOMBUTTON."+n);)o=$(t+".CUSTOMBUTTON."+n),$e.add(o,A5.d.evnts.down,Function("$acn(this,'"+this.container.button.pressedClassName+"')")),A5.flags.isMobile||($e.add(o,"mouseover",Function("$acn('"+t+".CONTAINER','"+this.container.hoverClassName+"'); $acn(this,'"+this.container.button.hoverClassName+"')")),$e.add(o,"mouseout",Function("$rcn('"+t+".CONTAINER','"+this.container.hoverClassName+"'); $rcn(this,'"+this.container.button.hoverClassName+"'); $rcn(this,'"+this.container.button.pressedClassName+"')"))),$e.add(o,A5.d.evnts.up,Function("$rcn(this,'"+this.container.button.pressedClassName+"')")),n+=1;$e.add(e,"focus",this._focus,this),$e.add(e,"blur",this._blur,this),$e.add(e,"keydown",this._keyDown,this),$e.add(e,"keyup",this._keyUp,this,!0),$e.add(e,"keypress",this._keyPress,this),$e.add(e,A5.d.evnts.up,this._mUp,this),$e.add(e,"a5datetimeselection",this._dtSelection,this),$e.add(e,"a5noselect",this._noSelect,this),$e.add(e,"a5blurcomplete",this._blurComp,this),this.selectionRequired&&(e.readOnly=!0),this._editBind(e),$sa(e,"A5ControlBound","true")},_focus:function(e,t){if(t._dateTime||t._createDropdown(),t._dateTime._window._hasFocus=!0,t._editFocus(e,this),clearTimeout(t._dateTime._window._bcTO),t._targetId!=this.id){var i=A5.edit.getSelection(this);t._oldIPoint=i.start,t._targetId=this.id,t._dateTime._targetId=t._targetId,t._dateTime._window._targetId=t._targetId,t._initValue=$gvs(this)}else clearTimeout(t._dateTime._window._nsTO);var s=$(t._targetId+".CONTAINER");s&&""!=t.container.focusClassName&&$acn(s,t.container.focusClassName)},_blur:function(e,t){if(t.selectionRequired){var i=$gvs(this);i!=t._initValue&&""!=i&&$svs(this,t._initValue)}t._dateTime._window.hidden&&this.value!=t._initValue&&(t._dateTime._window._nsTO=setTimeout(Function("$e.execute('"+this.id+"','a5noselect');"),100)),t._dateTime._window._hasFocus=!1,t._editBlur(e,this);var s=$(t._targetId+".CONTAINER");s&&""!=t.container.focusClassName&&t._dateTime._window.hidden&&$rcn(s,t.container.focusClassName),t._dateTime._window.hidden&&(t._dateTime._window._bcTO=setTimeout(Function("$e.execute('"+this.id+"','a5blurcomplete');"),100))},_blurComp:function(e,t){t._dateTime._window.hidden&&(t._targetId="",t._dateTime._targetId="",t._dateTime._window._targetId="")},_mUp:function(e,t){t._dateTime||t._createDropdown();var i=A5.edit.getSelection(this);if(t._oldIPoint=i.start,"false"==$ga(this,"A5HasButton")||t.selectionRequired){if(this.disabled)return!1;t._targetId!=this.id&&(t._targetId=this.id,t._dateTime._targetId=t._targetId,t._dateTime._window._targetId=t._targetId,t._initValue=$gvs(this.id));var s=this;setTimeout(function(){t._showDTP(s)},0)}},_bOnClick:function(e,t){t._dateTime||t._createDropdown(),$e.stopEvent(e);var i=$ga(this,"A5TargetInput"),s=$(i);if(s.disabled)return!1;if(t.decouple)t._oldIPoint=0;else{s.focus();var a=A5.edit.getSelection(s);t._oldIPoint=a.start}return t._targetId=i,t._dateTime._targetId=t._targetId,t._dateTime._window._targetId=t._targetId,t._initValue=$gvs(s),setTimeout(function(){t._showDTP(s)},0),!1},_keyUp:function(e){if(!this.decouple){var t=e.charCode||e.keyCode;if(36==t||35==t||37==t||39==t){var i=A5.edit.getSelection($(this._targetId));this._oldIPoint=i.start}else if((8==t||46==t)&&this.selectionRequired){var s=$(this._targetId),a=this._editValSplit(s,!0),n=a.vals[a.selIndx].offset,o=a.vals.length;if(0==a.sel.length)8==t&&0!=a.sel.start?a.vals.length-1==a.selIndx&&""==a.vals[a.selIndx].val?(a.vals.splice(a.selIndx,1),a.selIndx>0&&(a.vals[a.selIndx-1].sep="")):(a.vals[a.selIndx].offset==a.sel.start&&a.selIndx>0?a.selIndx--:a.selIndx>0&&""!=a.vals[a.selIndx].sep&&!a.inSep?(a.vals[a.selIndx-1].sep=a.vals[a.selIndx].sep,n=a.vals[a.selIndx-1].offset+a.vals[a.selIndx-1].val.length):n=a.vals[a.selIndx].offset,a.vals.splice(a.selIndx,1)):46==t&&a.sel.start!=s.value.length&&(a.inSep&&""!=a.vals[a.selIndx].sep?(n+=a.vals[a.selIndx].val.length,a.vals.length-1==a.selIndx?a.vals[a.selIndx].sep="":(a.vals[a.selIndx].sep=a.vals[a.selIndx+1].sep,a.vals.splice(a.selIndx+1,1))):a.vals.splice(a.selIndx,1));else for(var r=a.vals.length-1;r>=0;r--)a.vals[r].offset+a.vals[r].val.length>=a.sel.start&&a.vals[r].offset<=a.sel.end&&(n=a.vals[r].offset,a.vals.splice(r,1));if(o!=a.vals.length&&this._multi.auto.persist)if(this.multiple.auto.separator.constructor==Function)for(var l=new Array,r=0;r<a.vals.length-1;r++)a.vals[r].sep=this.multiple.auto.separator.call(this,l),l.push(a.vals[r].sep);else for(var r=0;r<a.vals.length-1;r++)a.vals[r].sep=this.multiple.auto.separator;s.value=this._editValJoin(a),this._initValue=s.value,this._oldIPoint=n,A5.edit.setSelection(s,n)}}},_keyPress:function(e,t){if(!t.decouple)if(t.selectionRequired){var i=0;if(i="number"==typeof e.which?e.which:"number"==typeof e.charCode?e.charCode:e.keyCode,9!=i&&37!=e.keyCode&&39!=e.keyCode&&$e.stopEvent(e),8!=i&&9!=i&&13!=i&&27!=i||(i=0),0!=i&&!e.ctrlKey&&!e.altKey){i=String.fromCharCode(i).toLowerCase();var s=t._editValSplit(this,!0),a=s.vals[s.selIndx];if(""!=a.val)if(t._multi.auto.persist)s.selIndx==s.vals.length-1&&""==a.sep&&(t._oldIPoint=t.insertValue(a.val,!0),t._initValue=this.value);else{t._multi.keyBuffer+=i;for(var n=t._multi.keyBuffer.length,o=new Array,r=0;r<t._multi.sep.length;r++)t._multi.sep[r].substr(0,n).toLowerCase()==t._multi.keyBuffer&&o.push(r);1==o.length?(a.sep=t._multi.sep[o[0]],t.format.showMask&&s.vals.length-1==s.selIndx&&s.vals.push({val:t.format._pMask.blankValue,sep:"",offset:0}),this.value=t._editValJoin(s),t._initValue=this.value,A5.edit.setSelection(this,a.offset+a.val.length+a.sep.length),t._multi.keyBuffer=""):0==o.length&&(t._multi.keyBuffer="")}}}else t._editKeyPress(e,this)},_showDTP:function(e){this._dateTime||this._createDropdown(),this._targetId=e.id,this._dateTime._targetId=e.id,this._initValue=$gvs(e);var t=this._editValSplit(e,!0);this._dateTime.setValue(t.vals[t.selIndx].val),this._dateTime._window.hide();var i=$(this._targetId+".CONTAINER");this.window.location.constructor==Array?this._dateTime._window.hidden?this._dateTime._window.show.apply(this._dateTime._window,this.window.location):this._dateTime._window.setPosition.apply(this._dateTime._window,this.window.location):this._dateTime._window.hidden?this._dateTime._window.show(this.window.location,$if(i,i,this._targetId)):this._dateTime._window.setPosition(this.window.location,$if(i,i,this._targetId))},_dtSelection:function(e,t){if(0!=t._dateTime.date.getDate){var i=$(t._targetId);t.decouple?t._editClearWatermark(i):A5.edit.setSelection(i,t._oldIPoint),t._setValue(t._dateTime.date.toFormat(t._dateTime._parsedFormat),!0),
t._initValue=i.value,t.onSelect.constructor==Function&&t.onSelect.call(i,t._dateTime.date.toFormat(t._dateTime._parsedFormat),t)}t._dateTime._window._makeSelection=!0,t._dateTime._window.hide()},_noSelect:function(e,t){clearTimeout(t._dateTime._window._nsTO),t._targetId="",t._dateTime._targetId="",t._dateTime._window._targetId="",t.onNoSelect.constructor==Function&&t.onNoSelect.call(this,t)},_setValue:function(e,t){var i=$(this._targetId),s=this._editValSplit(i,!0),a=s.vals[s.selIndx];a.val=e;var n=a.offset+e.length;if(t&&this._multi.auto.separate&&s.selIndx==s.vals.length-1){if(this.multiple.auto.separator.constructor==Function){for(var o=new Array,r=0;r<s.vals.length-1;r++)o.push(s.vals[r].sep);a.sep=this.multiple.auto.separator.call(this,o)}else a.sep=this.multiple.auto.separator;n+=a.sep.length,this.format.showMask&&s.vals.push({val:this.format._pMask.blankValue,sep:"",offset:0})}i.value=this._editValJoin(s),this._oldIPoint=n,this.decouple&&A5.edit.setSelection(i,n)}}),A5.commandHandler={_o:{},create:function(e,t,i){$u.o.assign(i,{onAction:0,onSetProperty:0},!0),this._o[e]={o:t,s:i}},get:function(e){if("undefined"!=typeof this._o[e])return this._o[e].o},action:function(e,t){"undefined"!=typeof this._o[e]&&this._o[e].s.onAction.constructor==Function&&this._o[e].s.onAction.call(this._o[e].o,t)},setProperty:function(e,t,i){"undefined"!=typeof this._o[e]&&(this._o[e][t]=i,this._o[e].s.onSetProperty.constructor==Function&&this._o[e].s.onSetProperty.call(this._o[e].o,t))},getProperty:function(e,t){return"undefined"!=typeof this._o[e]?this._o[e][t]:null}},A5.Toolbar=Class.create(),A5.Toolbar.prototype={initialize:function(e,t,i){this.contId=e,$u.o.assign(this,{theme:"",override:"base",style:0,className:"",globalProperties:{}}),"undefined"!=typeof i.theme&&A5.themes.assign(this,i.theme,"toolbar"),$u.o.assign(this,i),A5.overrides.assign(this,"toolbar",this.override),this.data=t,this.render()},getControl:function(e){for(var t=0;t<this.data.length;t++)if("object"==typeof this.data[t]&&this.data[t].name==e)return this.data[t];return!1},render:function(){var e=$(this.contId);e.className=this.className,"string"==typeof this.style&&$ss(e,$gs(e)+this.style);for(var t=0;t<this.data.length;t++)if("undefined"!=typeof this.data[t].create){if($u.o.assign(this.data[t],this.globalProperties,!0),"undefined"!=typeof this.data[t].createDefaults)var i=this.data[t].create(this.data[t].createDefaults);else var i=this.data[t].create();e.appendChild(i)}else if("-"==this.data[t])e.appendChild(document.createTextNode(" | "));else if("string"==typeof this.data[t]){var i=document.createElement("span");i.innerHTML=this.data[t],e.appendChild(i)}}},A5.HTMLEditor=Class.create(),A5.HTMLEditor.prototype={initialize:function(e,t){if(!$(e)||"true"==$ga(e,"A5ISHTMLEDITOR"))return!1;this.ctrlId=e,this._htmlEdId="A5HTMLEDITOR"+this._htmlEdIndx[0],this._htmlEdIndx[0]++,$u.o.assign(t,{theme:"",override:"base",toolbar:{items:[],settings:{}},data:{className:[],font:[],format:[{value:"Normal",html:'<p style="margin: 0px;">Normal</p>',tag:"p"},{value:"Heading 1",html:'<h1 style="margin: 0px;">Heading 1</h1>',tag:"h1"},{value:"Heading 2",html:'<h2 style="margin: 0px;">Heading 2</h2>',tag:"h2"},{value:"Heading 3",html:'<h3 style="margin: 0px;">Heading 3</h3>',tag:"h3"},{value:"Heading 4",html:'<h4 style="margin: 0px;">Heading 4</h4>',tag:"h4"},{value:"Heading 5",html:'<h5 style="margin: 0px;">Heading 5</h5>',tag:"h5"},{value:"Heading 6",html:'<h6 style="margin: 0px;">Heading 6</h6>',tag:"h6"},{value:"Formatted",html:'<pre style="margin: 0px;">Formatted</pre>',tag:"pre"},{value:"Address",html:'<address style="margin: 0px;">Address</address>',tag:"address"}]},classNames:[],styleSheets:{css:"",linked:""},insert:{image:{allow:!1,relativePath:"",styleName:"",titleText:"Insert Image",bodyText:"File:",editWatermarkText:"",editImage:"",data:""},file:{allow:!1,relativePath:"",styleName:"",titleText:"Insert File",bodyText:"File:",editWatermarkText:"",editImage:"",data:""},window:{}},icons:{bold:"images/$$format.font.bold.png.a5image",italic:"images/$$format.font.italic.png.a5image",underline:"images/$$format.font.line.under.png.a5image",strike:"images/$$format.font.line.through.png.a5image",superScript:"images/$$format.text.superScript.png.a5image",subScript:"images/$$format.text.subScript.png.a5image",color:"images/$$format.font.color.png.a5image",highlightColor:"images/$$format.text.hilite.color.png.a5image",backgroundColor:"images/$$format.background.color.png.a5image",justifyLeft:"images/$$format.justify.left.png.a5image",justifyCenter:"images/$$format.justify.center.png.a5image",justifyRight:"images/$$format.justify.right.png.a5image",justify:"images/$$format.justify.justified.png.a5image",outdent:"images/$$format.indent.out.png.a5image",indent:"images/$$format.indent.png.a5image",bulletedList:"images/$$format.list.bulleted.png.a5image",numberedList:"images/$$format.list.numbered.png.a5image",insertTable:"images/$$layout.table.png.a5image",insertLink:"images/$$control.html.link.png.a5image",insertImage:"images/$$control.image.png.a5image",insertFile:"images/$$file.open.png.a5image",insertSymbol:"images/$$generic.pilcrow.png.a5image",clearFormat:"images/$$edit.clear.png.a5image",toggleCodeView:"images/$$code.xml.tag.png.a5image",tableInsertRowBefore:"images/$$layout.table.row.insert.before.png.a5image",tableInsertRowAfter:"images/$$layout.table.row.insert.after.png.a5image",tableInsertColumnBefore:"images/$$layout.table.col.insert.before.png.a5image",tableInsertColumnAfter:"images/$$layout.table.col.insert.after.png.a5image",tableDeleteRow:"images/$$layout.table.row.remove.png.a5image",tableDeleteColumn:"images/$$layout.table.col.remove.png.a5image"},onFocus:0,onBlur:0,onStateChange:0,onChange:0},!0),$u.o.assign(t.insert.window,{theme:t.theme,baseCtrlId:this.ctrlId,title:{html:"Insert",tools:{items:[]}},header:{show:!1},body:{content:{type:"url",url:"about:blank"}},footer:{show:!1},type:"modal",resize:"both",autoShow:!1,autoPosition:!0}),$u.o.assign(this,t),A5.overrides.assign(this,"htmlEditor",this.override),this._iWindow=new A5.Window(this.insert.window),$e.add(this._iWindow.getWindowId(),"a5insert",function(e,t){t._iWindow.hide();var i=$ga(this,"a5inserttype");if("image"==i){var s=$ga(this,"a5imagetoinsert");t.command("insertimage",s)}else if("file"==i){var a=$ga(this,"a5filetoinsert"),n=a.split("/").pop();t._edInsertHTML("a",n,{href:a,target:"_blank"})}},this),this._iWindow.addTool(this._iWindow._defaultTools.close),this.styleSheets.css.constructor==Array?this.styleSheets.css.join("\n"):this.styleSheets.css.constructor!=String&&(this.styleSheets.css=""),this.styleSheets.css="table, td {border: 1px dashed #aaa;}"+this.styleSheets.css,A5.commandHandler.create(this._htmlEdId,this,{onAction:function(e){e=e.split(":");var t=e[0];if("format"==t){for(var i=[],s=[],a=0;a<this.data.format.length;a++)i.push(this.data.format[a].value),s.push(this.data.format[a].tag);var n=$u.a.find(i,e[1]);n>-1&&(n=s[n],this.command("formatblock","<"+n+">"))}else if("fontName"==t)this.command("fontName",e[1]);else if("fontSize"==t)this.command("fontSize",e[1]);else if("getColor"==t)this._colorMenu(e[1]);else if("getSymbol"==t)this._symbolMenu();else if("setColor"==t){var o=e[2];"no-color"==o&&(o=""),"fontColor"==e[1]?this.command("foreColor",o):"highlightColor"==e[1]?this.command("hilitecolor",o):"backgroundColor"==e[1]&&this.command("backColor",o)}else if("tableMenu"==t)this._tblMenu();else if("toggleDesignMode"==t)this.toggleDesignMode();else if("hideMenus"==t){this._tMenu&&this._tMenu.hide(),this._cMenu&&this._cMenu.hide(),this._sMenu&&this._sMenu.hide();var r=this._tbObj.getControl("fontName");r&&r._listbox._window.hide(),r=this._tbObj.getControl("fontSize"),r&&r._listbox._window.hide(),r=this._tbObj.getControl("format"),r&&r._listbox._window.hide(),r=this._tbObj.getControl("className"),r&&r._listbox._window.hide()}else if("insertHTML"==t)this._edInsertHTML("",e[1]);else if("clearButtonState"==t){var r=this._tbObj.getControl(e[1]);r&&r.setState($(r._buttonIds[0]),!1)}else if("insert"==t)if("link"==e[1]){var l=prompt("Link URL","");null!=l&&this._edInsertHTML("a",l,{href:l})}else"image"==e[1]?(this._iWindow.setTitle(this.insert.image.titleText),this._iWindow.body.content.url="__a5FileUploadMasterPage.a5w?fileUploadUrl=__a5HTMLEditorFileInsertPage.a5w&fileUploadAutoUpload=true&fileUploadText="+this.insert.image.bodyText+"&fileSelectImg="+this.insert.image.editImage+"&fileBoxWaterMark="+this.insert.image.editWatermarkText+"&stylesheetName="+this.insert.image.styleName+"&insertType=image&relativePath="+this.insert.image.relativePath+"&windowID="+this._iWindow.getWindowId(),""!=this.insert.image.data&&(this._iWindow.body.content.url=this._iWindow.body.content.url+"&"+this.insert.image.data)):(this._iWindow.setTitle(this.insert.file.titleText),this._iWindow.body.content.url="__a5FileUploadMasterPage.a5w?fileUploadUrl=__a5HTMLEditorFileInsertPage.a5w&fileUploadAutoUpload=true&fileUploadText="+this.insert.file.bodyText+"&fileSelectImg="+this.insert.file.editImage+"&fileBoxWaterMark="+this.insert.file.editWatermarkText+"&stylesheetName="+this.insert.file.styleName+"&insertType=file&relativePath="+this.insert.file.relativePath+"&windowID="+this._iWindow.getWindowId(),""!=this.insert.file.data&&(this._iWindow.body.content.url=this._iWindow.body.content.url+"&"+this.insert.file.data)),this._iWindow.refresh(),this._iWindow.show();else"command"==t&&3==e.length?this.command(e[1],e[2]):"command"==t&&this.command(e[1])}});var i=$(e);$sa(i,"A5ISHTMLEDITOR","true");var s=document.createElement("iframe");s.id=e+".HTMLEDITOR",""!=i.style.width?s.style.width=i.style.width:s.style.width=i.offsetWidth+"px",""!=i.style.height?s.style.height=i.style.height:s.style.height=i.offsetHeight+"px",s.style.overflow="auto",s.frameBorder="0",s.border="0",s.className=i.className,i.parentNode.insertBefore(s,i),i.style.display="none",this._iEle=s,this._tEle=i,document.all&&"Opera"!=navigator.appName?(this._iEle.contentWindow.document.designMode="on",this._eDoc=this._iEle.contentWindow.document,$e.add(this._iEle.contentWindow,"focus",this._edFocus,this,!0),$e.add(this._iEle.contentWindow,"blur",this._edBlur,this,!0),$e.add(this._iEle.contentWindow,"contextmenu",function(e){return $e.stopEvent(e),!1}),this.focus(),this._isIE=!0):(this._iEle.contentDocument.designMode="on",this._iEle.style.lineHeight="0",this._eDoc=this._iEle.contentDocument,$e.add(this._eDoc,"focus",this._edFocus,this,!0),$e.add(this._eDoc,"blur",this._edBlur,this,!0),$e.add(this._eDoc,"contextmenu",function(e){return $e.stopEvent(e),!1}),this._isIE=!1),this._eDoc.open();var a=i.value;""==a&&(a=""),this._eDoc.write("<head>"+$if(""!=this.styleSheets.linked,'<link rel="stylesheet" type="text/css" href="'+this.styleSheets.linked+'" />',"")+$if(""!=this.styleSheets.css,'<style type="text/css">'+this.styleSheets.css+"</style>","")+"</head><body>"+a+"</body>"),this._eDoc.close(),$e.add(this._eDoc,"keyup",this._edGetState,this,!0),$e.add(this._eDoc,"keydown",this._edKeyDown,this,!0),$e.add(this._eDoc,"mouseup",this._edGetState,this,!0),this.state={bold:!1,underline:!1,italic:!1,strikeThrough:!1,justifyLeft:!0,justifyCenter:!1,justifyRight:!1,justifyFull:!1,fontName:"",fontSize:"",unorderedList:!1,orderedList:!1,className:"",format:"",canUndo:!1,canRedo:!1},this.onStateChange.constructor==Function&&this.onStateChange(),this._edBlurTO=0,this._kw=new AUI.KeyWatcher([{key:"ctrl+b",handle:Function("A5.commandHandler.action('"+this._htmlEdId+"','command:bold'); return true;")},{key:"ctrl+i",handle:Function("A5.commandHandler.action('"+this._htmlEdId+"','command:italic'); return true;")},{key:"ctrl+u",handle:Function("A5.commandHandler.action('"+this._htmlEdId+"','command:underline'); return true;")}],this,this._iEle.contentWindow),this._edSelBookmark="",this._edSelRange="";var n=this;setTimeout(function(){n._calcToolbar(),n._edGetClassNames(),delete n},1)},command:function(e){if("none"==this._iEle.style.display)return!1;this._iEle.contentWindow.focus();var t=arguments[1],i=e.toLowerCase();if(this._isIE&&""!=this._edSelBookmark){var s=this._eDoc.body.createTextRange();s.moveToBookmark(this._edSelBookmark),s.select()}if(""!=this._edSelRange){var a=this._iEle.contentWindow.getSelection();a.addRange(this._edSelRange)}if("backcolor"==i){var n=this._edGetSelElement();if(!n.tagName)return!1;var o=n.tagName.toLowerCase(),r=["p","pre","div","td","th","li","h1","h2","h3","h4","h5","h6","blockquote","dd","dt","legend","fieldset","caption","body"];if($u.a.find(r,o)==-1)for(;$u.a.find(r,o)==-1;)n=n.parentNode,n.tagName&&(o=n.tagName.toLowerCase());if($u.a.find(r,o)==-1)return!1;"body"!=n.tagName.toLowerCase()&&(n.style.backgroundColor=t)}else if("hilitecolor"==i)navigator.userAgent.toLowerCase().match("firefox")||navigator.userAgent.toLowerCase().match("opera")||(e="backcolor"),this._eDoc.queryCommandEnabled(e)&&this._eDoc.execCommand(e,!1,t);else if("insertdate"==i){var l=new Date;l=$u.d.toStr(l,"[mm]/[dd]/[yyyy]"),this._edInsertHTML("",""+l)}else if("inserttime"==i){var d=new Date;d=$u.d.toStr(d,"[t:h]:[t:m][t:am]"),this._edInsertHTML("",""+d)}else if("inserttable"==i){t=t.split(","),t[0]=$u.s.toNum(t[0]),t[1]=$u.s.toNum(t[1]);for(var h=new Array,c=0;c<t[1];c++){h.push("<tr>");for(var u=0;u<t[0];u++)h.push("<td>&nbsp;</td>");h.push("</tr>")}this._edInsertHTML("table",h.join(""))}else if("inserttablecolumn"==i){var n=this._edGetSelElement();if(!n.tagName)return!1;if("td"!=n.tagName.toLowerCase())for(;"td"!=n.tagName.toLowerCase();)n=n.parentNode;if("td"!=n.tagName.toLowerCase())return!1;var f=n.cellIndex;for(null!=t&&"after"==t.toLowerCase()&&(f+=1);"table"!=n.tagName.toLowerCase();)n=n.parentNode;for(var c=0;c<n.rows.length;c++)n.rows[c].insertCell(f),n.rows[c].cells[f].innerHTML="&nbsp;"}else if("inserttablerow"==i){var n=this._edGetSelElement();if(!n.tagName)return!1;if("td"!=n.tagName.toLowerCase())for(;"td"!=n.tagName.toLowerCase();)n=n.parentNode;if("td"!=n.tagName.toLowerCase())return!1;var p=n.parentNode.rowIndex;for(null!=t&&"after"==t.toLowerCase()&&(p+=1);"table"!=n.tagName.toLowerCase();)n=n.parentNode;for(var m=0,c=0;c<n.rows.length;c++)m=Math.max(m,n.rows[c].cells.length);n.insertRow(p);for(var c=0;c<m;c++)n.rows[p].insertCell(c),n.rows[p].cells[c].innerHTML="&nbsp;"}else if("deletetablecolumn"==i){var n=this._edGetSelElement();if(!n.tagName)return!1;if("td"!=n.tagName.toLowerCase())for(;"td"!=n.tagName.toLowerCase();)n=n.parentNode;if("td"!=n.tagName.toLowerCase())return!1;for(var f=n.cellIndex;"table"!=n.tagName.toLowerCase();)n=n.parentNode;for(var c=0;c<n.rows.length;c++)n.rows[c].deleteCell(f)}else if("deletetablerow"==i){var n=this._edGetSelElement();if(!n.tagName)return!1;if("td"!=n.tagName.toLowerCase())for(;"td"!=n.tagName.toLowerCase();)n=n.parentNode;if("td"!=n.tagName.toLowerCase())return!1;for(var p=n.parentNode.rowIndex;"table"!=n.tagName.toLowerCase();)n=n.parentNode;n.deleteRow(p)}else if("setclassname"==i){var n=this._edGetSelElement();"body"!=n.tagName.toLowerCase()&&(n.className=t)}else if("setstyle"==i){var n=this._edGetSelElement();"body"!=n.tagName.toLowerCase()&&$ss(n,t)}else if("cut"==i||"copy"==i||"paste"==i)navigator.userAgent.toLowerCase().match("firefox")?alert("Firefox does not support "+i+". Use keyboard shortcut to "+i+"."):this._eDoc.execCommand(e,!1,t);else if(this._isIE){var s=this._eDoc.selection.createRange();s.expand("character");var _=this._eDoc.selection.createRange();_.expand("textedit");for(var g=_.parentElement();"body"!=g.tagName.toLowerCase();)g=g.parentNode;g.innerHTML==this._eDoc.body.innerHTML&&this._eDoc.queryCommandEnabled(e)&&this._eDoc.execCommand(e,!1,t)}else this._eDoc.queryCommandEnabled(e)&&this._eDoc.execCommand(e,!1,t);this._edGetState(),this.focus()},toggleDesignMode:function(){var e=!0;if("undefined"!=typeof arguments[0]){if("code"!=arguments[0].toLowerCase()&&"textarea"!=arguments[0].toLowerCase()||(e=!1),"none"!=this._iEle.style.display&&e||"none"==this._iEle.style.display&&!e)return!1}else"none"!=this._iEle.style.display&&(e=!1);if(e){this._tEle.value!=String(this._eDoc.body.innerHTML)&&this.setHTML(this._tEle.value),this._iEle.style.display="",this._tEle.style.display="none",this.focus();for(var t=0;t<this._tbObj.data.length;t++)"object"==typeof this._tbObj.data[t]&&"undefined"!=typeof this._tbObj.data[t].setDisabled&&this._tbObj.data[t].setDisabled(!1,this._tbObj.data[t]._editIds)}else{this._tEle.value=this.getHTML(),this._iEle.style.display="none",this._tEle.style.display="",this._tEle.focus();for(var t=0;t<this._tbObj.data.length;t++)"object"==typeof this._tbObj.data[t]&&"undefined"!=typeof this._tbObj.data[t].setDisabled&&this._tbObj.data[t].setDisabled(!0,this._tbObj.data[t]._editIds);this._tbObj.getControl("toggleCode").setDisabled(!1)}},getHTML:function(){var e=String(this._eDoc.body.innerHTML);return"none"==this._iEle.style.display&&(e=this._tEle.value),e=e.replace(RegExp("\r","g"),"")},setHTML:function(e){this._eDoc.body.innerHTML=e,this._tEle.value=e,this._isIE&&"none"!=this._iEle.style.display&&(this._iEle.style.display="none",this._iEle.style.display=""),this._edSelRange=""},focus:function(){this._isIE&&(this._iEle.style.visibility="hidden",this._iEle.style.overflow="hidden",this._iEle.style.visibility="",this._iEle.style.overflow=""),this._iEle.contentWindow.focus()},_calcToolbar:function(){var e=this.ctrlId;if(!$(e+".TOOLBAR")){var t=document.createElement("div");t.id=e+".TOOLBAR",this._iEle.parentNode.insertBefore(t,this._iEle)}var i=!1;this.toolbar.items?0==this.toolbar.items.length&&(i=!0):i=!0,i&&(this.toolbar.items=["format"," ","fontName"," ","fontSize"," ","bold","italic","underline","strikethrough","superscript","subscript"," ","fontColor","highlightColor","backgroundColor"," ","justifyLeft","justifyCenter","justifyRight","justifyFull"," ","outdent","indent"," ","unorderedList","orderedList"," ","symbol","tableMenu","link"],this.insert.image.allow&&this.toolbar.items.push("image"),this.insert.file.allow&&this.toolbar.items.push("file"),this.toolbar.items=this.toolbar.items.concat([" ","clearFormat"," ","toggleCode"]));for(var s=[],a=0;a<this.toolbar.items.length;a++)"string"==typeof this.toolbar.items[a]?s.push(this._calcToolbarControl(this.toolbar.items[a])):"object"==typeof this.toolbar.items[a]&&"string"==typeof this.toolbar.items[a].control?s.push(this._calcToolbarControl(this.toolbar.items[a].control,this.toolbar.items[a].settings)):s.push(this.toolbar.items[a]);this._tbObj=new A5.Toolbar(e+".TOOLBAR",s,{theme:this.theme,globalProperties:{htmlEdId:this._htmlEdId,createDefaults:{unselectable:"on"}}})},_calcToolbarControl:function(e){if("*space"==e)return" ";if("*break"==e)return"<br />";if("format"==e)return new A5.EditCombo(this.data.format,{name:"format",createDefaults:{size:10},theme:this.theme,selectionRequired:!0,listbox:{item:{template:"{html}",calculateValue:function(e){return e.value}}},onSelect:function(e,t){A5.commandHandler.action(t.htmlEdId,"format:"+e.value)}});if("fontName"==e)return new A5.EditCombo([{value:"Times New Roman",html:'<span style="font-family: Times New Roman;">Times New Roman</span>'},{value:"Tahoma",html:'<span style="font-family: Tahoma;">Tahoma</span>'},{value:"Arial",html:'<span style="font-family: Arial;">Arial</span>'},{value:"Courier",html:'<span style="font-family: Courier;">Courier</span>'}],{name:"fontName",createDefaults:{size:20},theme:this.theme,selectionRequired:!0,listbox:{item:{template:"{html}",calculateValue:function(e){return e.value}}},onSelect:function(e,t){A5.commandHandler.action(t.htmlEdId,"fontName:"+e.value)}});if("fontSize"==e)return new A5.EditCombo([{value:"1 (8pt)",html:'<span style="font-size: 8pt;">1 (8pt)</span>'},{value:"2 (10pt)",html:'<span style="font-size: 10pt;">2 (10pt)</span>'},{value:"3 (12pt)",html:'<span style="font-size: 12pt;">3 (12pt)</span>'},{value:"4 (14pt)",html:'<span style="font-size: 14pt;">4 (14pt)</span>'},{value:"5 (18pt)",html:'<span style="font-size: 18pt;">5 (18pt)</span>'},{value:"6 (24pt)",html:'<span style="font-size: 24pt;">6 (24pt)</span>'},{value:"7 (36pt)",html:'<span style="font-size: 36pt;">7 (36pt)</span>'}],{name:"fontSize",createDefaults:{size:7},theme:this.theme,selectionRequired:!0,listbox:{item:{template:"{html}",calculateValue:function(e){return e.value}}},onSelect:function(e,t){A5.commandHandler.action(t.htmlEdId,"fontSize:"+e.value.substr(0,1))}});if("bold"==e)return new A5.ButtonToggle({name:"bold",tip:"Bold",theme:this.theme+":toolbar",layout:"icon",icon:this.icons.bold,onClick:function(e){A5.commandHandler.action(e.htmlEdId,"command:bold")}});if("italic"==e)return new A5.ButtonToggle({name:"italic",tip:"Italic",theme:this.theme+":toolbar",layout:"icon",icon:this.icons.italic,onClick:function(e){A5.commandHandler.action(e.htmlEdId,"command:italic")}});if("underline"==e)return new A5.ButtonToggle({name:"underline",tip:"Underline",theme:this.theme+":toolbar",layout:"icon",icon:this.icons.underline,onClick:function(e){A5.commandHandler.action(e.htmlEdId,"command:underline")}});if("strikethrough"==e)return new A5.ButtonToggle({name:"strikethrough",tip:"Strikethrough",theme:this.theme+":toolbar",layout:"icon",icon:this.icons.strike,onClick:function(e){A5.commandHandler.action(e.htmlEdId,"command:strikethrough")}});if("superscript"==e)return new A5.ButtonToggle({name:"superscript",tip:"Superscript",theme:this.theme+":toolbar",layout:"icon",icon:this.icons.superScript,onClick:function(e){A5.commandHandler.action(e.htmlEdId,"command:superscript")}});if("subscript"==e)return new A5.ButtonToggle({name:"subscript",tip:"Subscript",theme:this.theme+":toolbar",layout:"icon",icon:this.icons.subScript,onClick:function(e){A5.commandHandler.action(e.htmlEdId,"command:subscript")}});if("fontColor"==e)return new A5.ButtonDropdown({theme:this.theme+":toolbar",tip:"Font Color",layout:"icon",icon:this.icons.color,name:"fontColor",onClick:function(e){A5.commandHandler.action(e.htmlEdId,"getColor:fontColor")}});if("highlightColor"==e)return new A5.ButtonDropdown({theme:this.theme+":toolbar",tip:"Highlight Color",layout:"icon",icon:this.icons.highlightColor,name:"highlightColor",onClick:function(e){A5.commandHandler.action(e.htmlEdId,"getColor:highlightColor")}});if("backgroundColor"==e)return new A5.ButtonDropdown({theme:this.theme+":toolbar",tip:"Background Color",layout:"icon",icon:this.icons.backgroundColor,name:"backgroundColor",onClick:function(e){A5.commandHandler.action(e.htmlEdId,"getColor:backgroundColor")}});if("justifyLeft"==e)return new A5.ButtonToggle({name:"justifyLeft",tip:"Left",theme:this.theme+":toolbar",value:"left",layout:"icon",icon:this.icons.justifyLeft,onClick:function(e){A5.commandHandler.action(e.htmlEdId,"command:justifyLeft")}});if("justifyCenter"==e)return new A5.ButtonToggle({name:"justifyCenter",tip:"Center",theme:this.theme+":toolbar",value:"center",layout:"icon",icon:this.icons.justifyCenter,onClick:function(e){A5.commandHandler.action(e.htmlEdId,"command:justifyCenter")}});if("justifyRight"==e)return new A5.ButtonToggle({name:"justifyRight",tip:"Right",theme:this.theme+":toolbar",value:"right",layout:"icon",icon:this.icons.justifyRight,onClick:function(e){A5.commandHandler.action(e.htmlEdId,"command:justifyRight")}});if("justifyFull"==e)return new A5.ButtonToggle({name:"justifyFull",tip:"Justified",theme:this.theme+":toolbar",value:"justified",layout:"icon",icon:this.icons.justify,onClick:function(e){A5.commandHandler.action(e.htmlEdId,"command:justifyFull")}});if("outdent"==e)return new A5.Button({theme:this.theme+":toolbar",tip:"Outdent",layout:"icon",icon:this.icons.outdent,onClick:function(e){A5.commandHandler.action(e.htmlEdId,"command:outdent")}});if("indent"==e)return new A5.Button({theme:this.theme+":toolbar",tip:"Indent",layout:"icon",icon:this.icons.indent,onClick:function(e){A5.commandHandler.action(e.htmlEdId,"command:indent")}});if("unorderedList"==e)return new A5.ButtonToggle({name:"unorderedList",tip:"Unordered List",theme:this.theme+":toolbar",layout:"icon",icon:this.icons.bulletedList,onClick:function(e){A5.commandHandler.action(e.htmlEdId,"command:InsertUnorderedList")}});if("orderedList"==e)return new A5.ButtonToggle({name:"orderedList",tip:"Ordered List",theme:this.theme+":toolbar",layout:"icon",icon:this.icons.numberedList,onClick:function(e){A5.commandHandler.action(e.htmlEdId,"command:InsertOrderedList")}});if("symbol"==e)return new A5.ButtonDropdown({theme:this.theme+":toolbar",tip:"Insert Symbol",layout:"icon",icon:this.icons.insertSymbol,name:"symbol",onClick:function(e){A5.commandHandler.action(e.htmlEdId,"getSymbol")}});if("tableMenu"==e)return new A5.ButtonDropdown({name:"tableMenu",tip:"Table",theme:this.theme+":toolbar",layout:"icon",icon:this.icons.insertTable,onClick:function(e){A5.commandHandler.action(e.htmlEdId,"tableMenu")}});if("link"==e)return new A5.Button({theme:this.theme+":toolbar",tip:"Insert Link",layout:"icon",icon:this.icons.insertLink,onClick:function(e){A5.commandHandler.action(e.htmlEdId,"insert:link")}});if("image"==e){if(this.insert.image.allow)return new A5.Button({theme:this.theme+":toolbar",tip:"Insert Image",layout:"icon",icon:this.icons.insertImage,onClick:function(e){A5.commandHandler.action(e.htmlEdId,"insert:image")}})}else if("file"==e){if(this.insert.file.allow)return new A5.Button({theme:this.theme+":toolbar",tip:"Insert File",layout:"icon",icon:this.icons.insertFile,onClick:function(e){A5.commandHandler.action(e.htmlEdId,"insert:file")}})}else{if("clearFormat"==e)return new A5.Button({theme:this.theme+":toolbar",tip:"Clear Format",layout:"icon",icon:this.icons.clearFormat,onClick:function(e){A5.commandHandler.action(e.htmlEdId,"command:removeFormat")}});if("toggleCode"==e)return new A5.ButtonToggle({name:"toggleCode",theme:this.theme+":toolbar",tip:"Toggle Code",layout:"icon",icon:this.icons.toggleCodeView,onClick:function(e){A5.commandHandler.action(e.htmlEdId,"toggleDesignMode")}})}return""},_colorMenu:function(e){this._cMenu||(this._cMenu=new A5.Menu([{variable:"color",name:"no-color",html:"No Color"},{type:"title",html:"Preset Colors"},{type:"radio-group",preventIndent:!0,columns:10,name:"color",variable:"color",data:[{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #ffffff;" title="#ffffff">&nbsp;</div>',value:"#ffffff"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #000000;" title="#000000">&nbsp;</div>',value:"#000000"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #eeece1;" title="#eeece1">&nbsp;</div>',value:"#eeece1"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #1f497d;" title="#1f497d">&nbsp;</div>',value:"#1f497d"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #4f81bd;" title="#4f81bd">&nbsp;</div>',value:"#4f81bd"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #c0504d;" title="#c0504d">&nbsp;</div>',value:"#c0504d"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #9bbb59;" title="#9bbb59">&nbsp;</div>',value:"#9bbb59"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #8064a2;" title="#8064a2">&nbsp;</div>',value:"#8064a2"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #4bacc6;" title="#4bacc6">&nbsp;</div>',value:"#4bacc6"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #f79646;" title="#f79646">&nbsp;</div>',value:"#f79646"}]},{type:"separator",preventIndent:!0},{type:"radio-group",preventIndent:!0,columns:10,name:"color",variable:"color",data:[{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #f2f2f2;" title="#f2f2f2">&nbsp;</div>',value:"#f2f2f2"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #7f7f7f;" title="#7f7f7f">&nbsp;</div>',value:"#7f7f7f"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #ddd9c3;" title="#ddd9c3">&nbsp;</div>',value:"#ddd9c3"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #c6d9f0;" title="#c6d9f0">&nbsp;</div>',value:"#c6d9f0"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #dbe5f1;" title="#dbe5f1">&nbsp;</div>',value:"#dbe5f1"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #f2dcdb;" title="#f2dcdb">&nbsp;</div>',value:"#f2dcdb"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #ebf1dd;" title="#ebf1dd">&nbsp;</div>',value:"#ebf1dd"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #e5e0ec;" title="#e5e0ec">&nbsp;</div>',value:"#e5e0ec"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #dbeef3;" title="#dbeef3">&nbsp;</div>',value:"#dbeef3"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #fdeada;" title="#fdeada">&nbsp;</div>',value:"#fdeada"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #d8d8d8;" title="#d8d8d8">&nbsp;</div>',value:"#d8d8d8"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #595959;" title="#595959">&nbsp;</div>',value:"#595959"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #c4bd97;" title="#c4bd97">&nbsp;</div>',value:"#c4bd97"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #8db3e2;" title="#8db3e2">&nbsp;</div>',value:"#8db3e2"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #b8cce4;" title="#b8cce4">&nbsp;</div>',value:"#b8cce4"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #e5b9b7;" title="#e5b9b7">&nbsp;</div>',value:"#e5b9b7"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #d7e3bc;" title="#d7e3bc">&nbsp;</div>',value:"#d7e3bc"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #ccc1d9;" title="#ccc1d9">&nbsp;</div>',value:"#ccc1d9"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #b7dde8;" title="#b7dde8">&nbsp;</div>',value:"#b7dde8"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #fbd5b5;" title="#fbd5b5">&nbsp;</div>',value:"#fbd5b5"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #bfbfbf;" title="#bfbfbf">&nbsp;</div>',value:"#bfbfbf"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #3f3f3f;" title="#3f3f3f">&nbsp;</div>',value:"#3f3f3f"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #938953;" title="#938953">&nbsp;</div>',value:"#938953"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #548dd4;" title="#548dd4">&nbsp;</div>',value:"#548dd4"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #95b3d7;" title="#95b3d7">&nbsp;</div>',value:"#95b3d7"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #d99694;" title="#d99694">&nbsp;</div>',value:"#d99694"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #c3d69b;" title="#c3d69b">&nbsp;</div>',value:"#c3d69b"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #b2a2c7;" title="#b2a2c7">&nbsp;</div>',
value:"#b2a2c7"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #92cddc;" title="#92cddc">&nbsp;</div>',value:"#92cddc"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #fac08f;" title="#fac08f">&nbsp;</div>',value:"#fac08f"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #a5a5a5;" title="#a5a5a5">&nbsp;</div>',value:"#a5a5a5"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #262626;" title="#262626">&nbsp;</div>',value:"#262626"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #494429;" title="#494429">&nbsp;</div>',value:"#494429"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #17365d;" title="#17365d">&nbsp;</div>',value:"#17365d"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #366092;" title="#366092">&nbsp;</div>',value:"#366092"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #953734;" title="#953734">&nbsp;</div>',value:"#953734"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #76923c;" title="#76923c">&nbsp;</div>',value:"#76923c"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #5f497a;" title="#5f497a">&nbsp;</div>',value:"#5f497a"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #31859b;" title="#31859b">&nbsp;</div>',value:"#31859b"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #e36c09;" title="#e36c09">&nbsp;</div>',value:"#e36c09"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #a5a5a5;" title="#a5a5a5">&nbsp;</div>',value:"#a5a5a5"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #0c0c0c;" title="#0c0c0c">&nbsp;</div>',value:"#0c0c0c"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #1d1b10;" title="#1d1b10">&nbsp;</div>',value:"#1d1b10"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #0f243e;" title="#0f243e">&nbsp;</div>',value:"#0f243e"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #244061;" title="#244061">&nbsp;</div>',value:"#244061"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #632423;" title="#632423">&nbsp;</div>',value:"#632423"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #4f6128;" title="#4f6128">&nbsp;</div>',value:"#4f6128"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #3f3151;" title="#3f3151">&nbsp;</div>',value:"#3f3151"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #205867;" title="#205867">&nbsp;</div>',value:"#205867"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #974806;" title="#974806">&nbsp;</div>',value:"#974806"}]},{type:"title",html:"Standard Colors"},{type:"radio-group",preventIndent:!0,columns:10,name:"color",variable:"color",data:[{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #c00000;" title="#c00000">&nbsp;</div>',value:"#c00000"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #ff0000;" title="#ff0000">&nbsp;</div>',value:"#ff0000"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #ffc000;" title="#ffc000">&nbsp;</div>',value:"#ffc000"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #ffff00;" title="#ffff00">&nbsp;</div>',value:"#ffff00"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #92d050;" title="#92d050">&nbsp;</div>',value:"#92d050"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #00b050;" title="#00b050">&nbsp;</div>',value:"#00b050"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #00b0f0;" title="#00b0f0">&nbsp;</div>',value:"#00b0f0"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #0070c0;" title="#0070c0">&nbsp;</div>',value:"#0070c0"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #002060;" title="#002060">&nbsp;</div>',value:"#002060"},{html:'<div style="border: solid 1px #aaa; width: 11px; height: 11px; font-size: 0px; background: #7030a0;" title="#7030a0">&nbsp;</div>',value:"#7030a0"}]}],{theme:this.theme,htmlEdId:this._htmlEdId,iconColumn:{show:!0},onClick:function(){A5.commandHandler.action(this.htmlEdId,"setColor:"+this.cTarget+":"+this.getValue("color"))},onHide:function(){A5.commandHandler.action(this.htmlEdId,"clearButtonState:"+this.cTarget)}}));var t=this._tbObj.getControl(e),i=$(t._buttonIds[0]),s=!1;"backgroundColor"==e&&(s=!0),this._cMenu.hide(),this._cMenu.cTarget=e,this._cMenu.setValue("color",""),this._cMenu.setDisplay([0],s),this._cMenu.show("dropdown",i),t.setState(i,!0)},_tblMenu:function(){this._tMenu||(this._tMenu=new A5.Menu([{type:"custom",preventIndent:!0,html:'<table id="'+this._htmlEdId+'.INSERTTABLE"></table>',onInitialize:function(e){var t=$(this._tblId);t.cellSpacing="0",t.cellPadding="1",$e.add(t,"mouseout",this._tblMOut,this);for(var i=0;i<8;i++){t.insertRow(i);for(var s=0;s<10;s++)t.rows[i].insertCell(s),t.rows[i].cells[s].innerHTML='<div style="width: 12px; height: 12px; background: #ffffff; border: solid 1px #aaa; font: 0pt arial;">&nbsp;</div>',$sa(t.rows[i].cells[s],"A5TableRows",""+(i+1)),$sa(t.rows[i].cells[s],"A5TableCols",""+(s+1)),$e.add(t.rows[i].cells[s],"mouseover",this._tblCellMOver,this),$e.add(t.rows[i].cells[s],"click",this._tblCellOnClick,this)}t.insertRow(8),t.rows[8].insertCell(0),t.rows[8].cells[0].colSpan="10",t.rows[8].cells[0].style.textAlign="center",t.rows[8].cells[0].innerHTML="0x0"}},{type:"separator",preventIndent:!0},{html:"Insert Row Before",icon:this.icons.tableInsertRowBefore,onClick:function(){A5.commandHandler.action(this.htmlEdId,"command:inserttablerow:before")}},{html:"Insert Row After",icon:this.icons.tableInsertRowAfter,onClick:function(){A5.commandHandler.action(this.htmlEdId,"command:inserttablerow:after")}},{html:"Insert Column Before",icon:this.icons.tableInsertColumnBefore,onClick:function(){A5.commandHandler.action(this.htmlEdId,"command:inserttablecolumn:before")}},{html:"Insert Column After",icon:this.icons.tableInsertColumnAfter,onClick:function(){A5.commandHandler.action(this.htmlEdId,"command:inserttablecolumn:after")}},{html:"Remove Row",icon:this.icons.tableDeleteRow,onClick:function(){A5.commandHandler.action(this.htmlEdId,"command:deletetablerow")}},{html:"Remove Column",icon:this.icons.tableDeleteColumn,onClick:function(){A5.commandHandler.action(this.htmlEdId,"command:deletetablecolumn")}}],{theme:this.theme,htmlEdId:this._htmlEdId,onHide:function(){A5.commandHandler.action(this.htmlEdId,"clearButtonState:tableMenu")},_tblId:this._htmlEdId+".INSERTTABLE",_tblCellMOver:function(e,t){for(var i=$(t._tblId),s=Number($ga(this,"A5TableRows")),a=Number($ga(this,"A5TableCols")),n=0;n<8;n++)for(var o=0;o<10;o++)n<s&&o<a?i.rows[n].cells[o].firstChild.style.background="#ccc":i.rows[n].cells[o].firstChild.style.background="#fff";i.rows[8].cells[0].innerHTML=a+"x"+s},_tblMOut:function(e,t){for(var i=$(t._tblId),s=0;s<8;s++)for(var a=0;a<10;a++)i.rows[s].cells[a].firstChild.style.background="#fff";i.rows[8].cells[0].innerHTML="0x0"},_tblCellOnClick:function(e,t){var i=Number($ga(this,"A5TableRows")),s=Number($ga(this,"A5TableCols"));A5.commandHandler.action(t.htmlEdId,"command:insertTable:"+s+","+i),t.hide()}}));var e=this._tbObj.getControl("tableMenu"),t=$(e._buttonIds[0]),i=!0,s=this._edGetSelElement();if(s)for(;"body"!=s.tagName.toLowerCase();){if("td"==s.tagName.toLowerCase()){i=!1;break}s=s.parentNode}else i=!1;this._tMenu.setDisabled([2],i),this._tMenu.setDisabled([3],i),this._tMenu.setDisabled([4],i),this._tMenu.setDisabled([5],i),this._tMenu.setDisabled([6],i),this._tMenu.setDisabled([7],i),this._tMenu.show("dropdown",t),e.setState(t,!0)},_symbolMenu:function(){this._sMenu||(this._sMenu=new A5.Menu([{type:"radio-group",preventIndent:!0,columns:8,name:"symbol",variable:"symbol",data:["&euro;","&cent;","&pound;","&yen;","&curren;","&copy;","&reg;","&trade;","&plusmn;","&ne;","&asymp;","&le;","&ge;","&divide;","&times;","&infin;","&frac12;","&frac14;","&frac34;","&sup2;","&sup3;","&permil;","&para;","&sect;","&alpha;","&beta;","&Delta;","&micro;","&Omega;","&Sigma;","&Oslash;","&ang;","&ordm;","&laquo;","&raquo;","&middot;","&bull;","&dagger;","&Dagger;","&fnof;"]}],{theme:this.theme,htmlEdId:this._htmlEdId,iconColumn:{show:!0},onClick:function(e){A5.commandHandler.action(this.htmlEdId,"insertHTML:"+this.getValue("symbol"))},onHide:function(){A5.commandHandler.action(this.htmlEdId,"clearButtonState:symbol")}}));var e=this._tbObj.getControl("symbol"),t=$(e._buttonIds[0]);this._sMenu.setValue("symbol",""),this._sMenu.show("dropdown",t),e.setState(t,!0)},_edInsertHTML:function(e,t){this._iEle.contentWindow.focus();var i,s="undefined"!=typeof arguments[2]?arguments[2]:{};if(this._eDoc.selection&&this._eDoc.selection.createRange&&"Opera"!=navigator.appName){i=this._eDoc.selection.createRange();var a=this._eDoc.selection.createRange();a.expand("textedit");for(var n=a.parentElement();"body"!=n.tagName.toLowerCase();)n=n.parentNode;if(n.innerHTML==this._eDoc.body.innerHTML){var o=new Array;for(var r in s)if(o.push(" "),"style"==r){var l=new Array;for(var d in s[r])l.push(d+": "+s[r][d]+";");l=l.join(" "),o.push('style="'+l+'"')}else o.push(r+'="'+$u.s.tran(s[r],'"','\\"')+'"');o=o.join(""),""!=e?i.pasteHTML("<"+e+o+">"+t+"</"+e+">"):i.pasteHTML(t)}}else if(window.getSelection){var h=this._iEle.contentWindow.getSelection();if(i=h.getRangeAt(0),i.deleteContents(),""!=e){var n=this._eDoc.createElement(e);n.innerHTML=t;for(var r in s)"style"==r?$ss(n,s[r]):n[r]=s[r];""==this._eDoc.body.innerHTML?this._eDoc.body.appendChild(n):i.insertNode(n)}else this._eDoc.queryCommandEnabled("inserthtml")&&this._eDoc.execCommand("inserthtml",!1,t)}},_edGetSelElement:function(){var e;if(this._eDoc.selection&&this._eDoc.selection.createRange&&"Opera"!=navigator.appName){if(e=this._eDoc.selection.createRange(),e.parentElement)return e.expand("character"),e.parentElement()}else if(window.getSelection){var t=this._iEle.contentWindow.getSelection();return t.anchorNode.tagName?t.anchorNode:t.anchorNode.parentNode}return!1},_edGetClassNames:function(){for(var e=new Array,t=new Array,i=0,s=0;s<this._eDoc.styleSheets.length;s++)if(i=!1,this._eDoc.styleSheets[s].cssRules?i=this._eDoc.styleSheets[s].cssRules:this._eDoc.styleSheets[s].rules&&(i=this._eDoc.styleSheets[s].rules),i)for(var a=0;a<i.length;a++)e=e.concat(String(i[a].selectorText).split(","));for(var n=0,s=0;s<e.length;s++)if(e[s].indexOf(".")!=-1){n=e[s].split("."),n.shift();for(var a=0;a<n.length;a++)n[a]=$u.s.tran(n[a],[" ","\n",":"],[" "," "," "]),n[a]=$u.s.word(n[a],1," ");t=t.concat(n)}t=$u.a.dedup(t)},_edKeyDown:function(e){var t=e.charCode||e.keyCode;if(9==t){for(var i=!1,s=this._edGetSelElement();"body"!=s.tagName.toLowerCase();){if("li"==s.tagName.toLowerCase()){i=!0;break}s=s.parentNode}$e.preventDefault(e),i?e.shiftKey?this.command("outdent"):this.command("indent"):e.shiftKey||this._edInsertHTML("","&nbsp;&nbsp;&nbsp;&nbsp;")}},_edGetState:function(e){if(this._isIE&&!window.getSelection&&(this._iEle.style.display="none",this._iEle.style.display=""),window.getSelection){var t=this._iEle.contentWindow.getSelection(),i=t.getRangeAt(0);this._edSelRange=i;var s=i.commonAncestorContainer;if("undefined"!=typeof s.tagName&&"html"==s.tagName.toLowerCase())return!1}if(this._eDoc.selection&&this._eDoc.selection.createRange&&"Opera"!=navigator.appName){var i=this._eDoc.selection.createRange();"undefined"!=typeof i.text&&(this._edSelBookmark=i.getBookmark())}var a=$u.o.toJSON(this.state);this.state.bold=this._eDoc.queryCommandState("bold"),this.state.underline=this._eDoc.queryCommandState("underline"),this.state.italic=this._eDoc.queryCommandState("italic"),this.state.strikeThrough=this._eDoc.queryCommandState("strikethrough"),this.state.superScript=this._eDoc.queryCommandState("superscript"),this.state.subScript=this._eDoc.queryCommandState("subscript"),this.state.justifyLeft=this._eDoc.queryCommandState("justifyLeft"),this.state.justifyCenter=this._eDoc.queryCommandState("justifyCenter"),this.state.justifyRight=this._eDoc.queryCommandState("justifyRight"),this.state.justifyFull=this._eDoc.queryCommandState("justifyFull"),this.state.justifyLeft||this.state.justifyCenter||this.state.justifyRight||this.state.justifyFull||(this.state.justifyLeft=!0),this.state.fontName=String(this._eDoc.queryCommandValue("fontName")),this.state.fontSize=String(this._eDoc.queryCommandValue("fontSize")),this.state.unorderedList=this._eDoc.queryCommandState("InsertUnorderedList"),this.state.orderedList=this._eDoc.queryCommandState("InsertOrderedList");var n=this._edGetSelElement();n?this.state.className=n.className:this.state.className="",this.state.format=this.data.format[0].value;for(var o=this._eDoc.queryCommandValue("formatblock").toLowerCase(),r=0;r<this.data.format.length;r++)if(o==this.data.format[r].tag.toLowerCase()||o==this.data.format[r].value.toLowerCase()){this.state.format=this.data.format[r].value;break}var l=$u.o.toJSON(this.state);if(a!=l){this.onStateChange.constructor==Function&&this.onStateChange();var d=this._tbObj.getControl("bold");if(d&&d.setValue(this.state.bold),d=this._tbObj.getControl("italic"),d&&d.setValue(this.state.italic),d=this._tbObj.getControl("underline"),d&&d.setValue(this.state.underline),d=this._tbObj.getControl("strikethrough"),d&&d.setValue(this.state.strikeThrough),d=this._tbObj.getControl("subscript"),d&&d.setValue(this.state.subScript),d=this._tbObj.getControl("superscript"),d&&d.setValue(this.state.superScript),d=this._tbObj.getControl("justifyLeft"),d&&d.setValue(this.state.justifyLeft),d=this._tbObj.getControl("justifyCenter"),d&&d.setValue(this.state.justifyCenter),d=this._tbObj.getControl("justifyRight"),d&&d.setValue(this.state.justifyRight),d=this._tbObj.getControl("justifyFull"),d&&d.setValue(this.state.justifyFull),d=this._tbObj.getControl("unorderedList"),d&&d.setValue(this.state.unorderedList),d=this._tbObj.getControl("orderedList"),d&&d.setValue(this.state.orderedList),d=this._tbObj.getControl("format"),d&&("string"==typeof this.state.format?d.setValue(this.state.format):d.setValue("Font name")),d=this._tbObj.getControl("fontName"),d&&(""==this.state.fontName?d.setValue("Font name"):"string"==typeof this.state.fontName?d.setValue(this.state.fontName):d.setValue("Font name")),d=this._tbObj.getControl("fontSize"))if(""==this.state.fontSize)d.setValue("Font size");else{var h=$u.s.toNum(""+this.state.fontSize),c=["Font size","1 (8pt)","2 (10pt)","3 (12pt)","4 (14pt)","5 (18pt)","6 (24pt)","7 (36pt)"];h>c.length&&(h=0),d.setValue(c[h])}d=this._tbObj.getControl("className"),d&&(""==this.state.className||"apple-style-span"==String(this.state.className).toLowerCase()?d.setValue("Apply class name"):"string"==typeof this.state.className?d.setValue(this.state.className):d.setValue("Apply class name"))}if(this._tEle.value=this.getHTML(),e){if("keyup"==e.type.toLowerCase()){var u=e.charCode||e.keyCode;u>=16&&u<=18||u>=37&&u<=40||27==u||u>=33&&u<=36||45==u||u>=112&&u<=123||this.onChange.constructor==Function&&this.onChange()}}else this.onChange.constructor==Function&&this.onChange()},_edFocus:function(){clearTimeout(this._edBlurTO),this._kw.on(),this.onFocus.constructor==Function&&this.onFocus.call(this),A5.commandHandler.action(this._htmlEdId,"hideMenus")},_edBlur:function(){var e=this;this._edBlurTO=setTimeout(function(){e._edCompleteBlur(),delete e},100)},_edCompleteBlur:function(){this._kw.off(),this.onBlur.constructor==Function&&this.onBlur.call(this)},_htmlEdIndx:[0]},A5.PopupHTMLEditor=Class.create(),A5.PopupHTMLEditor.prototype={initialize:function(e){$u.o.assign(e,{theme:"",override:"base",className:"",window:{theme:"",type:"modeless",resize:"both",autoSize:!0,buttons:{items:[{html:"Save",action:"commit"},{html:"Cancel"}]}},editor:{theme:""},onCommit:0},!0),""==e.window.theme&&(e.window.theme=e.theme+":dropdown"),""==e.editor.theme&&(e.editor.theme=e.theme),$u.o.assign(this,e),$u.o.assign(this.window,{tbar:{show:!0},body:{content:{type:"blank"}},onShow:function(){this.onResize()},onResize:function(){var e=$(this.getWindowId()+".EDITOR"),t=$(this.getWindowId()+".EDITOR.HTMLEDITOR"),i=e.parentNode;e.style.height="10px",t.style.height="10px";var s=i.parentNode.offsetHeight-2*($gpt(i)-$gpt(i.parentNode));s=Math.max(s,10),e.style.height=s+"px",t.style.height=s+"px",e.style.width=t.parentNode.offsetWidth+"px",t.style.width=t.parentNode.offsetWidth+"px"},_onCommit:this.onCommit}),A5.overrides.assign(this,"popupHTMLEditor",this.override),this._win=new A5.Window(this.window),this._win.addAction("commit",function(){var e=this._hEd.getHTML();$svs(this._targetId,e),$svs(this._targetId+".DISPLAY",e),$svs(this._targetId+".PREVIEW",e),$e.execute(this._targetId,"change"),this.hide(),this._onCommit.constructor==Function&&this._onCommit(e)})},setValue:function(e){if("undefined"!=typeof arguments[1]){var t=$(arguments[1]);$gvs(t)!=e&&($svs(t,e),$svs(t.id+".DISPLAY",e),$svs(t.id+".PREVIEW",e))}},edit:function(e){if(!this._win._hEd){$(this._win.getWindowId("body")).innerHTML='<div style="position: relative;"><textarea id="'+this._win.getWindowId()+'.EDITOR" class="'+this.className+'" style="position: absolute; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"></textarea></div>',$(this._win.getWindowId("tbar")).innerHTML='<div id="'+this._win.getWindowId()+'.EDITOR.TOOLBAR"></div>',this._win._hEd=new A5.HTMLEditor(this._win.getWindowId()+".EDITOR",this.editor),this._win._hEd._iWindow._targetId=this._win.getWindowId()+".EDITOR",$ss(this._win._hEd._iEle,$gs(this._win._hEd._iEle)+" box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"),$e.add(this._win.getWindowId("tbar"),"mousedown",Function("A5.commandHandler.action('"+this._win._hEd._htmlEdId+"','hideMenus');"));var t=this;return setTimeout(function(){t.edit(e),delete t,delete e},10),!0}if(e=$(e),this._win._hEd.setHTML($gvs(e)),this._win._targetId=e.id,$(e.id+".DISPLAY")?e=$(e.id+".DISPLAY"):$(e.id+".PREVIEW")&&(e=$(e.id+".PREVIEW")),this._win.show("dropdown",e),this.window.autoSize){var i=($(this._win._windowId+".BODYCONTAINER"),$(this._win._windowId+".BODY"),this._win._hEd._iEle);"none"==i.style.display&&(i=this._win._hEd._tEle);var s=e.offsetWidth+($(this._win._windowId+".BODYCONTAINER").offsetWidth-i.offsetWidth),a=e.offsetHeight+($(this._win._windowId+".BODY").offsetHeight-i.offsetHeight);this._win.setSize(s+"px",a+"px")}this._win._hEd.focus();var n=$(this._win._windowId);n.style.top=Math.max($gpt(e)-this._win._hEd._tEle.parentNode.offsetTop-1,0)+"px",n.style.left=Math.max($gpl(e)-this._win._hEd._tEle.parentNode.offsetLeft-1,0)+"px"},bind:function(e){if(e.constructor==Array)for(var t=0;t<e.length;t++)this._bind($(e[t]));else this._bind($(e))},_bind:function(e){if("true"==$ga(e,"A5ControlBound"))return!0;var t=$(e.id+".DISPLAY");t||(t=$(e.id+".PREVIEW"));var i=$(e.id+".BUTTON");t||(t=document.createElement("div"),t.id=e.id+".PREVIEW",t.className=e.className,$ss(t,$gs(e)),e.style.display="none",t.style.display="inline-block",e.parentNode.insertBefore(t,e)),$sa(t,"A5TargetID",e.id),t.innerHTML=e.value,i?($sa(i,"A5TargetID",e.id),$e.add(i,"click",function(e,t){$e.stopPropagation(e),t.edit($ga(this,"A5TargetID"))},this),$e.add(t,"dblclick",function(e,t){t.edit($ga(this,"A5TargetID"))},this)):$e.add(t,"click",function(e,t){$e.stopPropagation(e),t.edit($ga(this,"A5TargetID"))},this),$sa(e,"A5ControlBound","true")}},A5.Slider=Class.create(),A5.Slider.prototype={initialize:function(e,t){this.contId=e,$u.o.assign(this,{theme:"",override:"base",inputId:"",type:"",separator:"..",dataType:"number",format:"",direction:"",min:0,max:100,step:1,className:"",disabledClassName:"",innerClassName:"",handle:{show:!0,className:"",hoverClassName:"",selectedClassName:"",minClassName:"",maxClassName:""},range:{show:!0,className:"",hoverClassName:"",selectedClassName:""},value:0,disabled:!1,onChange:0,onSlide:0}),"undefined"!=typeof t.theme&&A5.themes.assign(this,t.theme,"slider"),$u.o.assign(this,t),A5.overrides.assign(this,"slider",this.override),this._coor={},this._sliderSize=0,this._sliderUnitPrePx=0,this._min=0,this._max=0,this._val1=0,this._val2=0,this._tVal1=0,this._tVal2=0,this._rEle=0,this._hEle1=0,this._hEle2=0,this._cHandle="",this._cfHandle="",this._dPlace=0,this._initRender(),this.disabled&&this.setDisabled(!0)},setDisabled:function(e){e?$acn(this.contId,this.disabledClassName):$rcn(this.contId,this.disabledClassName),this.disabled=e},setValue:function(e){var t="undefined"==typeof arguments[1]||arguments[1];if(this._setMinMax(),"string"==this.dataType)"range"==this.type?("string"==typeof e&&(e=e.split(this.separator)),e.constructor==Array?(this._val1=$u.a.find(this.data,e[0]),this._val2=$u.a.find(this.data,e[1])):this._val1=$u.a.find(this.data,e)):this._val1=$u.a.find(this.data,e);else if("date"==this.dataType)if("range"==this.type)if("string"==typeof e&&(e=e.split(this.separator)),e.constructor==Array){if("string"==typeof e[0]){var i=new Date;i.fromFormat(e[0],this.format),e[0]=i}if("string"==typeof e[1]){var i=new Date;i.fromFormat(e[1],this.format),e[1]=i}e[0]=(e[0]-this.min)/864e5+1,e[1]=(e[1]-this.min)/864e5+1,this._val1=Math.round(e[0]),this._val2=Math.round(e[1])}else{if("string"==typeof e){var i=new Date;i.fromFormat(e,this.format),e=i}e=(e-this.min)/864e5+1,this._val1=Math.round(e)}else{if("string"==typeof e){var i=new Date;i.fromFormat(e,this.format),e=i}e=(e-this.min)/864e5+1,this._val1=Math.round(e)}else"range"==this.type?("string"==typeof e&&(e=e.split(this.separator)),e.constructor==Array?(this._val1=$u.s.toNum(""+e[0]),this._val2=$u.s.toNum(""+e[1])):this._val1=$u.s.toNum(""+e)):this._val1=$u.s.toNum(""+e);this._val1=Math.max(Math.min(this._val1,this._max),this._min),this._val2=Math.max(Math.min(this._val2,this._max),this._min),this._cfHandle="",this._refresh(t)},refresh:function(){this.setValue(this.value,!1)},_setMinMax:function(){if("string"==this.dataType)this._min=0,this._max=this.data.length-1,this.step=1;else if("date"==this.dataType){if("string"==typeof this.min){var e=new Date;e.fromFormat(this.min,this.format),this.min=e}if("string"==typeof this.max){var t=new Date;t.fromFormat(this.max,this.format),this.max=t}this._min=1,this._max=Math.round((this.max-this.min)/864e5+1)}else this._min=this.min,this._max=this.max},_sClick:function(e){if(this._dragFlag||this.disabled)return!0;var t=AUI.u.getVPScroll(),i=$e.getCoors(e),s=$(this.contId+".SLIDER"),a=i.clientX+t.x-$gpl(s),n=s.offsetWidth,o=(this._max-this._min)/n,r=Math.round(o*a/this.step)*this.step+this._min,l=0;Math.round(this.step)!=this.step&&(l=Math.pow(10,String(this.step).split(".")[1].length)),l>0&&(r=Math.round(r*l)/l);var d="min-value";"range"==this.type?r>this._val2?(this._val2=r,d="max-value"):r<this._val1?this._val1=r:Math.abs(r-this._val1)>Math.abs(r-this._val2)?(this._val2=r,d="max-value"):this._val1=r:(this._val1=r,d="value"),this._cfHandle=d,this._refresh()},_refresh:function(){var e="undefined"==typeof arguments[0]||arguments[0],t=String(this.value);if(this._hEle1.style.left=100/(this._max-this._min)*(this._val1-this._min)+"%",this._hEle2.style.left=100/(this._max-this._min)*(this._val2-this._min)+"%","range"==this.type){if(this._rEle.style.left=this._hEle1.style.left,this._rEle.style.width=100/(this._max-this._min)*(this._val2-this._val1)+"%","string"==this.dataType)this.value=[this.data[this._val1],this.data[this._val2]];else if("date"==this.dataType){var i=new Date(this.min),s=new Date(this.min);i.setDate(i.getDate()+this._val1-1),s.setDate(s.getDate()+this._val2-1),this.value=[i,s]}else this.value=[this._val1,this._val2];this.inputId.constructor==Array?("date"==this.dataType?($svs(this.inputId[0],this.value[0].toFormat(this.format)),$svs(this.inputId[1],this.value[1].toFormat(this.format))):($svs(this.inputId[0],this.value[0]),$svs(this.inputId[1],this.value[1])),e&&($e.execute(this.inputId[0],"change"),$e.execute(this.inputId[1],"change"))):("date"==this.dataType?$svs(this.inputId,this.value[0].toFormat(this.format)+this.separator+this.value[1].toFormat(this.format)):$svs(this.inputId,this.value.join(this.separator)),e&&$e.execute(this.inputId,"change"))}else{if(this._rEle.style.width=100/(this._max-this._min)*(this._val1-this._min)+"%","string"==this.dataType)this.value=this.data[this._val1];else if("date"==this.dataType){var i=new Date(this.min);i.setDate(i.getDate()+this._val1-1),this.value=i}else this.value=this._val1;"date"==this.dataType?$svs(this.inputId,this.value.toFormat(this.format)):$svs(this.inputId,this.value),e&&$e.execute(this.inputId,"change")}this.onChange.constructor==Function&&t!=String(this.value)&&e&&this.onChange.call(this,{value:this.value,handle:this._cfHandle})},_initRender:function(){var e=$(this.contId);""!=this.className&&$acn(e,this.className);var t=document.createElement("div");t.id=this.contId+".SLIDER",t.className=this.innerClassName,t.style.position="relative",$e.add(t,"selectstart",function(e){return $e.stopEvent($e.getEvent(e)),!1}),$e.add(t,"dragstart",function(e){return $e.stopEvent($e.getEvent(e)),!1}),e.appendChild(t),$e.add(t,"abstracttap",this._sClick,this,!0);var i=document.createElement("div");i.id=this.contId+".SLIDERRANGE",i.className=this.range.className,i.style.position="absolute",this.range.show||(i.style.display="none"),A5.flags.isMobile||""==this.range.hoverClassName||($e.add(i,"mouseover",Function("if(!arguments[1]._dragFlag) $acn(this,'"+this.range.hoverClassName+"');"),this),$e.add(i,"mouseout",Function("$rcn(this,'"+this.range.hoverClassName+"');"))),t.appendChild(i);var s=document.createElement("div");s.id=this.contId+".SLIDERHANDLE1",s.className=this.handle.className+$if("range"==this.type," "+this.handle.minClassName,""),s.style.position="absolute",this.handle.show||(s.style.display="none"),A5.flags.isMobile||""==this.handle.hoverClassName||($e.add(s,"mouseover",Function("if(!arguments[1]._dragFlag) $acn(this,'"+this.handle.hoverClassName+"');"),this),$e.add(s,"mouseout",Function("$rcn(this,'"+this.handle.hoverClassName+"');"))),t.appendChild(s);var a=document.createElement("div");a.id=this.contId+".SLIDERHANDLE2",a.className=this.handle.className+" "+this.handle.maxClassName,a.style.position="absolute",this.handle.show&&"range"==this.type||(a.style.display="none"),A5.flags.isMobile||""==this.handle.hoverClassName||($e.add(a,"mouseover",Function("if(!arguments[1]._dragFlag) $acn(this,'"+this.handle.hoverClassName+"');"),this),$e.add(a,"mouseout",Function("$rcn(this,'"+this.handle.hoverClassName+"');"))),t.appendChild(a),this._rEle=i,this._hEle1=s,this._hEle2=a,A5.u.drag.add(e,"custom",{tolerance:0,so:this,onStart:function(e,t){if(t.so.disabled)return!1;t.so._sliderSize=this.firstChild.offsetWidth,t.so._sliderUnitPrePx=(t.so._max-t.so._min)/t.so._sliderSize,t.so._dPlace=0,Math.round(t.so.step)!=t.so.step&&(t.so._dPlace=Math.pow(10,String(t.so.step).split(".")[1].length)),e._val=Math.round((e.x-$gpl(this.firstChild))*t.so._sliderUnitPrePx/t.so.step)*t.so.step+t.so._min,t.so._dPlace>0&&(e._val=Math.round(e._val*t.so._dPlace)/t.so._dPlace),e._val=Math.max(Math.min(e._val,t.so._max),t.so._min);var i=t.so._val1,s=t.so._val2;if("range"==t.so.type){var a=$(t.so.contId+".SLIDERHANDLE1").offsetWidth*t.so._sliderUnitPrePx;t.so._val1+a<e._val&&e._val<t.so._val2-a?(t.so._cfHandle="range",""!=t.so.range.selectedClassName&&$acn(t.so.contId+".SLIDERRANGE",t.so.range.selectedClassName),""!=t.so.handle.selectedClassName&&($acn(t.so.contId+".SLIDERHANDLE1",t.so.handle.selectedClassName),$acn(t.so.contId+".SLIDERHANDLE2",t.so.handle.selectedClassName))):Math.abs(t.so._val1-e._val)<Math.abs(t.so._val2-e._val)?(i=e._val,t.so._cfHandle="min-value",""!=t.so.handle.selectedClassName&&$acn(t.so.contId+".SLIDERHANDLE1",t.so.handle.selectedClassName)):(s=e._val,t.so._cfHandle="max-value",""!=t.so.handle.selectedClassName&&$acn(t.so.contId+".SLIDERHANDLE2",t.so.handle.selectedClassName))}else i=e._val,t.so._cfHandle="value",""!=t.so.handle.selectedClassName&&$acn(t.so.contId+".SLIDERHANDLE1",t.so.handle.selectedClassName);if(t.so._hEle1.style.left=100/(t.so._max-t.so._min)*(i-t.so._min)+"%",t.so._hEle2.style.left=100/(t.so._max-t.so._min)*(s-t.so._min)+"%","range"==t.so.type){if(t.so._rEle.style.left=t.so._hEle1.style.left,t.so._rEle.style.width=100/(t.so._max-t.so._min)*(s-i)+"%",t.so.onSlide.constructor==Function){var n=i,o=s;"string"==t.so.dataType?(n=t.so.data[n],o=t.so.data[o]):"date"==t.so.dataType&&(n=new Date(t.so.min),n.setDate(n.getDate()+i-1),o=new Date(t.so.min),o.setDate(o.getDate()+s-1)),t.so.onSlide.call(t.so,{value:[n,o],handle:t.so._cfHandle})}}else if(t.so._rEle.style.width=100/(t.so._max-t.so._min)*(i-t.so._min)+"%",t.so.onSlide.constructor==Function){var n=i;"string"==t.so.dataType?n=t.so.data[n]:"date"==t.so.dataType&&(n=new Date(t.so.min),n.setDate(n.getDate()+i-1)),t.so.onSlide.call(t.so,{value:n,handle:t.so._cfHandle})}t.so._tVal1=i,t.so._tVal2=s,t.so._val1=i,t.so._val2=s},onMove:function(e,t){if(t.so.disabled)return!1;var i=t.so._val1,s=t.so._val2;if("max-value"==t.so._cfHandle){var s=s+Math.round(e.moveX*t.so._sliderUnitPrePx/t.so.step)*t.so.step;s=Math.max(s,i),s=Math.min(s,t.so._max)}else if("range"==t.so._cfHandle){var a=Math.round(e.moveX*t.so._sliderUnitPrePx/t.so.step)*t.so.step,n=!1;a<0?i+a-t.so._min<0&&(s=t.so._min+(s-i),i=t.so._min,n=!0):t.so._max-(s+a)<0&&(i=t.so._max-(s-i),s=t.so._max,n=!0),n||(i+=a,s+=a)}else i+=Math.round(e.moveX*t.so._sliderUnitPrePx/t.so.step)*t.so.step,"range"==t.so.type&&(i=Math.min(i,s));if(i=Math.max(i,t.so._min),i=Math.min(i,t.so._max),t.so._dPlace>0&&(i=Math.round(i*t.so._dPlace)/t.so._dPlace,s=Math.round(s*t.so._dPlace)/t.so._dPlace),t.so._hEle1.style.left=100/(t.so._max-t.so._min)*(i-t.so._min)+"%",t.so._hEle2.style.left=100/(t.so._max-t.so._min)*(s-t.so._min)+"%","range"==t.so.type){if(t.so._rEle.style.left=t.so._hEle1.style.left,t.so._rEle.style.width=100/(t.so._max-t.so._min)*(s-i)+"%",t.so.onSlide.constructor==Function){var o=i,r=s;"string"==t.so.dataType?(o=t.so.data[o],r=t.so.data[r]):"date"==t.so.dataType&&(o=new Date(t.so.min),o.setDate(o.getDate()+i-1),r=new Date(t.so.min),r.setDate(r.getDate()+s-1)),t.so.onSlide.call(t.so,{value:[o,r],handle:t.so._cfHandle})}}else if(t.so._rEle.style.width=100/(t.so._max-t.so._min)*(i-t.so._min)+"%",t.so.onSlide.constructor==Function){var o=i;"string"==t.so.dataType?o=t.so.data[o]:"date"==t.so.dataType&&(o=new Date(t.so.min),o.setDate(o.getDate()+i-1)),t.so.onSlide.call(t.so,{value:o,handle:t.so._cfHandle})}t.so._tVal1=i,t.so._tVal2=s},onEnd:function(e,t){return!t.so.disabled&&("range"==t.so._cfHandle&&""!=t.so.range.selectedClassName?($rcn(t.so.contId+".SLIDERRANGE",t.so.range.selectedClassName),""!=t.so.handle.selectedClassName&&($rcn(t.so.contId+".SLIDERHANDLE1",t.so.handle.selectedClassName),$rcn(t.so.contId+".SLIDERHANDLE2",t.so.handle.selectedClassName))):"max-value"==t.so._cfHandle?""!=t.so.handle.selectedClassName&&$rcn(t.so.contId+".SLIDERHANDLE2",t.so.handle.selectedClassName):""!=t.so.handle.selectedClassName&&$rcn(t.so.contId+".SLIDERHANDLE1",t.so.handle.selectedClassName),
t.so._val1=t.so._tVal1,t.so._val2=t.so._tVal2,void t.so._refresh())}}),this.setValue(this.value,!1)}},A5.switches={html:function(e,t){var i="undefined"!=typeof arguments[2]?arguments[2]:"";t=this._getSet(t);var s="left";e==t.values.on?"ltr"==t.flow&&(s="right"):"rtl"==t.flow&&(s="right");var a=t.text.on,n=t.text.off;if("rtl"==t.flow&&(a=t.text.off,n=t.text.on),"left"==s)var o="-100%",r="0%",l="0%";else var o="0%",r="100%",l="100%";return html=["<div "+i+' class="'+t.className+" "+$if(e,t.onClassName,t.offClassName)+'" style="overflow: hidden;'+t.style+'">',' <div style="position: relative;" class="'+t.innerClassName+'">','  <div style="position: absolute; z-index: 1; width: 100%; left: '+o+';" class="'+t.leftClassName+'">'+a+"</div>",'  <div style="position: absolute; z-index: 2; left: '+l+';" class="'+t.buttonClassName+'">&nbsp;</div>','  <div style="position: absolute; z-index: 1; width: 100%; left: '+r+';" class="'+t.rightClassName+'">'+n+"</div>"," </div>","</div>"].join("\n"),html},_getSet:function(e){var t={theme:"",override:"base",value:!1,inputId:"",flow:"ltr",style:"",className:"",disabledClassName:"",onClassName:"",offClassName:"",innerClassName:"",rightClassName:"",leftClassName:"",buttonClassName:"",text:{on:"",off:""},values:{on:!0,off:!1},disabled:!1,onSelect:0};return"undefined"!=typeof e.theme&&A5.themes.assign(t,e.theme,"switch"),$u.o.assign(t,e),A5.overrides.assign(t,"switch",t.override),t}},A5.Switch=Class.create({initialize:function(e,t){this.contId=e,$u.o.assign(this,{theme:"",override:"base",value:!1,inputId:"",flow:"ltr",className:"",disabledClassName:"",onClassName:"",offClassName:"",innerClassName:"",rightClassName:"",leftClassName:"",buttonClassName:"",text:{on:"",off:""},values:{on:!0,off:!1},disabled:!1,onSelect:0}),"undefined"!=typeof t.theme&&A5.themes.assign(this,t.theme,"switch"),$u.o.assign(this,t),A5.overrides.assign(this,"switch",this.override),this._render(),this._init=!1,this._value=!1,this.setValue(this.value,!1),this.disabled&&this.setDisabled(!0),this._init=!0},setDisabled:function(e){A5.u.drag.setDisabled(this.contId,"custom",e),e?$acn(this.contId,this.disabledClassName):$rcn(this.contId,this.disabledClassName),this.disabled=e},setValue:function(e){var t="undefined"==typeof arguments[1]||arguments[1];"boolean"==typeof e&&(e=e?this.values.on:this.values.off);var i=this._value;this.value=e;var s=$(this.contId),a="left";this.value==this.values.on?($acn(s,this.onClassName),$rcn(s,this.offClassName),"ltr"==this.flow&&(a="right"),this._value=!0):($acn(s,this.offClassName),$rcn(s,this.onClassName),"rtl"==this.flow&&(a="right"),this._value=!1),"left"==a?(s.firstChild.firstChild.style.left="-100%",s.firstChild.lastChild.style.left="0%",s.firstChild.childNodes[1].style.left="0%"):(s.firstChild.firstChild.style.left="0%",s.firstChild.lastChild.style.left="100%",s.firstChild.childNodes[1].style.left="100%"),$sa(s,"A5SwitchLoc",a),""!=this.inputId&&($svs(this.inputId,this.value),t&&$e.execute(this.inputId,"change")),this.onSelect.constructor==Function&&this._init&&i!=this._value&&t&&this.onSelect.call(this)},_switch:function(e,t){if(t.disabled)return!1;var i=!1;"left"==$ga(this,"A5SwitchLoc")?"rtl"==t.flow&&(i=!0):"ltr"==t.flow&&(i=!0),t.setValue(i)},_toggle:function(e,t){return!t.disabled&&void t.setValue(!t._value)},_render:function(){var e=$(this.contId);e.style.overflow="hidden",$acn(e,this.className);var t=document.createElement("div");t.style.position="relative",t.className=this.innerClassName;var i=document.createElement("div");$ss(i,"position: absolute; z-index: 1; width: 100%; left: -100%;"),i.className=this.leftClassName,"ltr"==this.flow?i.innerHTML=this.text.on:i.innerHTML=this.text.off,t.appendChild(i);var s=document.createElement("div");$ss(s,"position: absolute; z-index: 2; left: 0%;"),s.className=this.buttonClassName,s.innerHTML="&nbsp;",t.appendChild(s);var a=document.createElement("div");$ss(a,"position: absolute; z-index: 1; width: 100%; left: 0%;"),a.className=this.rightClassName,"rtl"==this.flow?a.innerHTML=this.text.on:a.innerHTML=this.text.off,t.appendChild(a),e.appendChild(t),$e.add(e,"a5switch",this._switch,this),$e.add(e,A5.d.evnts.click,this._toggle,this),A5.u.drag.add(e,"custom",{axis:"x",onMove:function(e){var t=e.customMoveX/this.offsetWidth*100;"right"==$ga(this,"A5SwitchLoc")&&(t=(this.offsetWidth+e.customMoveX)/this.offsetWidth*100),t=Math.max(Math.min(t,100),0),this.firstChild.firstChild.style.left=t-100+"%",this.firstChild.lastChild.style.left=t+"%",this.firstChild.childNodes[1].style.left=t+"%"},onEnd:function(e){var t=e.customMoveX/this.offsetWidth*100;"right"==$ga(this,"A5SwitchLoc")&&(t=(this.offsetWidth+e.customMoveX)/this.offsetWidth*100),t=Math.max(Math.min(t,100),0),t<50?$sa(this,"A5SwitchLoc","left"):$sa(this,"A5SwitchLoc","right"),$e.execute(this,"a5switch")}})}}),A5.map={staticMap:function(e){$u.o.assign(e,{secure:!1,width:400,height:300,scale:null,center:null,zoom:null,markers:[]},!0);var t=[];t.push(A5.ajax.buildURLParam("size",e.width+"x"+e.height)),e.scale&&t.push(A5.ajax.buildURLParam("scale",e.scale)),e.center&&t.push(A5.ajax.buildURLParam("center",e.center)),e.zoom&&t.push(A5.ajax.buildURLParam("zoom",e.zoom));for(var i="",s=0;s<e.markers.length;s++){if(i="",e.markers[s].size&&(i=i+"size:"+e.markers[s].size+"|"),e.markers[s].color&&(i=i+"color:"+e.markers[s].color+"|"),e.markers[s].label&&(i=i+"label:"+e.markers[s].label+"|"),e.markers[s].location.constructor==Array)for(var a=0;a<e.markers[s].location.length;a++)i=i+e.markers[s].location[a]+"|";else i=i+e.markers[s].location+"|";i=$u.s.rTrim(i,"|"),t.push(A5.ajax.buildURLParam("markers",i))}return e.secure?"https://maps.googleapis.com/maps/api/staticmap?"+t.join("&"):"http://maps.googleapis.com/maps/api/staticmap?"+t.join("&")},initState:-1,initQueue:[],init:function(){A5.map.initState=1;for(var e=0;e<A5.map.initQueue.length;e++)A5.map._m[A5.map.initQueue[e]]._genMap()},_fn:"http://maps.googleapis.com/maps/api/js?sensor=true&libraries=geometry&callback=A5.map.init",_m:{},_mrk:{},_mrkC:{},_ovr:{},_d:{}},A5.Map=Class.create({initialize:function(e,t){if(this.contId=e,$u.o.assign(this,{override:"base",type:"",ui:{draggable:!0,panControl:null,zoomControl:null,zoomOnDlbClick:!0,streetViewControl:null,mapTypeControl:null,scale:null,overviewMap:null},route:{draggable:!1,avoid:{highways:null,tolls:null},travelMode:"driving",units:"default",optimizeOrder:!1,directionsPanel:!1},draw:{polygon:{startIcon:{url:"",width:!1,height:!1,anchor:{x:!1,y:!1}}}},onClick:!1,onDblClick:!1,onRightClick:!1,onZoomChange:!1,onInitialize:!1}),$u.o.assign(this,t),A5.overrides.assign(this,"map",this.override),this._dmc=[],this._mrk={},this._ovr={},this._mode={clickable:!0},1==A5.map.initState)this._genMap();else{if(A5.map.initState==-1){A5.map.initState=0;var i=document.createElement("script");i.src=A5.map._fn,document.getElementsByTagName("head")[0].appendChild(i)}A5.map.initQueue.push(this.contId)}A5.map._m[this.contId]=this},refresh:function(){return!this._delayMethod("refresh",arguments)&&(google.maps.event.trigger(this.map,"resize"),void this.map.setZoom(this.map.getZoom()))},setValue:function(){this.setCenter.apply(this,arguments)},setZoom:function(e){return!this._delayMethod("setZoom",arguments)&&void this.map.setZoom(e)},setCenter:function(e){if(this._delayMethod("setCenter",arguments))return!1;var t="undefnined"!=typeof arguments[1]&&arguments[1];if("string"==typeof e)"undefined"==typeof this._gc&&(this._gc=new google.maps.Geocoder),this._gc.geocode({address:e},Function("if(arguments[1] == google.maps.GeocoderStatus.OK) A5.map._m['"+this.contId+"'].map."+$if(t,"panTo","setCenter")+"(arguments[0][0].geometry.location);"));else{var i=new google.maps.LatLng(e[0],e[1],(!0));t?this.map.panTo(i):this.map.setCenter(i)}},view:function(){if(this._delayMethod("view",arguments))return!1;for(var e=!1,t=[],i=0;i<arguments.length;i++)t.push(arguments[i]);if("boolean"==typeof t[t.length-1]&&(e=t.pop()),1==t.length){if(t[0].constructor==Array&&"number"!=typeof t[0][0])return t=t[0],t.push(e),this.view.apply(this,t),!0;this.setCenter(t[0],e)}else{for(var s=t[0][0],a=t[0][0],n=t[0][1],o=t[0][1],i=1;i<t.length;i++)s=Math.max(s,t[i][0]),a=Math.min(a,t[i][0]),n=Math.max(n,t[i][1]),o=Math.min(o,t[i][1]);var r=new google.maps.LatLngBounds(new google.maps.LatLng(s,o,(!0)),new google.maps.LatLng(a,n,(!0)));e?this.map.panToBounds(r):this.map.fitBounds(r)}},viewMarkers:function(){if(this._delayMethod("viewMarkers",arguments))return!1;var e=[],t=0,i=arguments;1==i.length&&i[0].constructor==Array&&(i=i[0]);for(var s=0;s<i.length;s++)"undefined"!=typeof this._mrk[i[s]]&&(t=A5.map._mrk[this.contId+":"+i[s]].getPosition(),e.push([t.lat(),t.lng()]));1==e.length?this.setCenter(e[0]):e.length>0&&this.view.apply(this,e)},viewMarkerGroups:function(){if(this._delayMethod("viewMarkerGroups",arguments))return!1;var e=[],t=0,i=arguments;1==i.length&&i[0].constructor==Array&&(i=i[0]);for(var s in this._mrk)$u.a.find(i,this._mrk[s].group)!=-1&&(t=A5.map._mrk[this.contId+":"+s].getPosition(),e.push([t.lat(),t.lng()]));1==e.length?this.setCenter(e[0]):e.length>0&&this.view.apply(this,e)},addMarker:function(e,t,i){if(this._delayMethod("addMarker",arguments))return!1;var s={group:"",icon:{url:"",width:!1,height:!1,anchor:{x:!1,y:!1}},title:"",detail:{has:!1,data:""},overlay:{has:!1,data:10,fill:{color:null,opacity:null},stroke:{color:null,width:null,opacity:null}},draggable:!1,animation:!1,emphasize:!1,onClick:!1,onDblClick:!1,onDrag:!1,onDragEnd:!1,onDragStart:!1,onMouseDown:!1,onMouseOut:!1,onMouseOver:!1,onMouseUp:!1,onRightClick:!1,onAddComplete:!1,onRemove:!1};$u.o.assign(s,i),"undefined"!=typeof this._mrk[e]&&this.removeMarker(e),this._mrk[e]=s,"string"==typeof t?("undefined"==typeof this._gc&&(this._gc=new google.maps.Geocoder),this._gc.geocode({address:t},Function("if(arguments[1] == google.maps.GeocoderStatus.OK){ A5.map._m['"+this.contId+"']._mrk['"+e+"'].position = arguments[0][0].geometry.location; A5.map._m['"+this.contId+"']._addMarker('"+e+"');}"))):(this._mrk[e].position=new google.maps.LatLng(t[0],t[1],(!0)),this._addMarker(e))},removeMarker:function(e){return!this._delayMethod("removeMarker",arguments)&&void("undefined"!=typeof this._mrk[e]&&(this._mrk[e].onRemove&&s.onRemove.call(this,this._mrk[e],A5.map._mrk[this.contId+":"+e]),this._mrk[e].overlay.has&&(A5.map._mrkC[this.contId+":"+e].setMap(null),delete A5.map._mrkC[this.contId+":"+e]),A5.map._mrk[this.contId+":"+e].setMap(null),delete A5.map._mrk[this.contId+":"+e],delete this._mrk[e]))},setMarkerDisplay:function(e,t){return!this._delayMethod("setMarkerDisplay",arguments)&&void("undefined"!=typeof this._mrk[e]&&A5.map._mrk[this.contId+":"+e].setVisible(t))},emphasizeMarker:function(e,t){return!this._delayMethod("emphasizeMarker",arguments)&&void("undefined"!=typeof this._mrk[e]&&(A5.map._mrk[this.contId+":"+e].setAnimation(google.maps.Animation.BOUNCE),"number"==typeof t&&setTimeout(Function("A5.map._m['"+this.contId+"'].deemphasizeMarker('"+e+"')"),t)))},deemphasizeMarker:function(e){return!this._delayMethod("deemphasizeMarker",arguments)&&void("undefined"!=typeof this._mrk[e]&&A5.map._mrk[this.contId+":"+e].setAnimation(null))},removeMarkerGroup:function(e){if(this._delayMethod("removeMarkerGroup",arguments))return!1;for(var t in this._mrk)this._mrk[t].group==e&&this.removeMarker(t)},setMarkerGroupDisplay:function(e,t){if(this._delayMethod("setMarkerGroupDisplay",arguments))return!1;for(var i in this._mrk)this._mrk[i].group==e&&A5.map._mrk[this.contId+":"+i].setVisible(t)},emphasizeMarkerGroup:function(e,t){if(this._delayMethod("emphasizeMarkerGroup",arguments))return!1;for(var i in this._mrk)this._mrk[i].group==e&&A5.map._mrk[this.contId+":"+i].setAnimation(google.maps.Animation.BOUNCE);"number"==typeof t&&setTimeout(Function("A5.map._m['"+this.contId+"'].deemphasizeMarkerGroup('"+e+"')"),t)},deemphasizeMarkerGroup:function(e){if(this._delayMethod("deemphasizeMarkerGroup",arguments))return!1;for(var t in this._mrk)this._mrk[t].group==e&&A5.map._mrk[this.contId+":"+t].setAnimation(null)},getMarkerPositions:function(){if(this._delayMethod("getMarkerPositions",arguments))return!1;var e={},t=0,i=0==arguments.length,s=arguments;1==s.length&&s[0].constructor==Array&&(s=s[0]);for(var a in this._mrk)(i||$u.a.find(s,a)!=-1)&&(t=A5.map._mrk[this.contId+":"+a].getPosition(),e[a]=[t.lat(),t.lng()]);return e},getMarkerGroupPositions:function(){if(this._delayMethod("getMarkerGroupPositions",arguments))return!1;var e={},t=0,i=arguments;1==i.length&&i[0].constructor==Array&&(i=i[0]);for(var s in this._mrk)$u.a.find(i,this._mrk[s].group)!=-1&&(t=A5.map._mrk[this.contId+":"+s].getPosition(),e[s]=[t.lat(),t.lng()]);return e},showMarkerDetail:function(e){if(this._delayMethod("showMarkerDetail",arguments))return!1;if("undefined"!=typeof this._mrk[e]){var t=this._mrk[e].detail.data;if("string"==typeof t)this._showDetailLow(e,t);else if(t.constructor==Function)this._showDetailLow(e,t());else if(t.constructor==Object){var i="";"undefined"!=typeof t.data&&(i=t.data),new $a.simple(t.url,{method:"get",data:i,handle:Function("if(arguments[0].responseText) A5.map._m['"+this.contId+"']._showDetailsLow('"+e+"',arguments[0].responseText);")})}}},plotRoute:function(){if(this._delayMethod("plotRoute",arguments))return!1;this._dirSetup();var e=[];if(1==arguments.length)e=arguments[0];else for(var t=0;t<arguments.length;t++)e.push(arguments[t]);this._r=[].concat(e);var i=e.shift();i.constructor==Array&&(i=new google.maps.LatLng(i[0],i[1]));var s=e.pop();s.constructor==Array&&(s=new google.maps.LatLng(s[0],s[1]));var a=[],n=0;if(e.length>0)for(var t=0;t<e.length;t++)n=e[t],n.constructor==Array&&(n=new google.maps.LatLng(n[0],n[1])),a.push({location:n});var o=google.maps.DirectionsTravelMode.DRIVING,r=null;"WALKING"==this.route.travelMode.toUpperCase()&&(o=google.maps.DirectionsTravelMode.WALKING),"IMPERIAL"==this.route.units.toUpperCase()?r=google.maps.UnitSystem.IMPERIAL:"METRIC"==this.route.units.toUpperCase()&&(r=google.maps.UnitSystem.METRIC),this._dirS.route({origin:i,destination:s,waypoints:a,unitSystem:r,travelMode:o,avoidHighways:this.route.avoid.highways,avoidTolls:this.route.avoid.tolls,optimizeWaypoints:this.route.optimizeOrder},Function("if(arguments[1] == google.maps.DirectionsStatus.OK) A5.map._m['"+this.contId+"']._dirR.setDirections(arguments[0]);"))},clearRoute:function(){"undefined"!=typeof this._dirR&&this._dirR.setDirections({routes:[]}),this._r=[]},getRoute:function(){var e={start:!1,end:!1,waypoints:{original:[],plotted:[],order:[]}};if(this._r==[])return e;var t=this._dirR.getDirections();e.start=this._r[0],e.end=this._r[this._r.length-1];for(var i=1;i<this._r.length-1;i++)e.waypoints.original.push(this._r[i]);e.waypoints.order=t.routes[0].waypoint_order;for(var i=0;i<e.waypoints.order.length;i++)e.waypoints.plotted.push(e.waypoints.original[e.waypoints.order[i]]);return e},addOverlay:function(e,t,i,s){if(this._delayMethod("addOverlay",arguments))return!1;var a={type:t,data:i,group:"",fill:{color:null,opacity:null},stroke:{color:null,width:null,opacity:null},onClick:!1,onDblClick:!1,onMouseDown:!1,onMouseOut:!1,onMouseOver:!1,onMouseUp:!1,onRightClick:!1,onAddComplete:!1,onRemove:!1};$u.o.assign(a,s),"undefined"!=typeof this._ovr[e]&&this.removeOverlay(e),this._ovr[e]=a,"circle"==t?"string"==typeof i[0]?("undefined"==typeof this._gc&&(this._gc=new google.maps.Geocoder),this._gc.geocode({address:i[0]},Function("if(arguments[1] == google.maps.GeocoderStatus.OK){ A5.map._m['"+this.contId+"']._ovr['"+e+"'].data[0] = arguments[0][0].geometry.location; A5.map._m['"+this.contId+"']._addOverlay('"+e+"');}"))):(this._ovr[e].data[0]=new google.maps.LatLng(i[0][0],i[0][1],(!0)),this._addOverlay(e)):"polygon"==t&&this._addOverlay(e)},getOverlayData:function(){if(this._delayMethod("getOverlayData",arguments))return!1;var e={},t=0==arguments.length,i=arguments;1==i.length&&i[0].constructor==Array&&(i=i[0]);for(var s in this._ovr)(t||$u.a.find(i,s)!=-1)&&this._getOvrData(s,e);return e},getOverlayGroupData:function(){if(this._delayMethod("getOverlayGroupData",arguments))return!1;var e={},t=arguments;1==t.length&&t[0].constructor==Array&&(t=t[0]);for(var i in this._ovr)$u.a.find(t,this._ovr[i].group)!=-1&&this._getOvrData(i,e);return e},_getOvrData:function(e,t){var i=A5.map._ovr[this.contId+":"+e],s=0,a=0;if("polygon"==this._ovr[e].type){t[e]={type:"polygon",data:[]},a=i.getPath();for(var n=0;n<a.length;n++)t[e].data.push([a.getAt(n).lat(),a.getAt(n).lng()])}else t[e]={type:"circle",data:[]},s=i.getCenter(),t[e].data.push([s.lat(),s.lng()]),t[e].data.push(i.getRadius())},removeOverlay:function(e){return!this._delayMethod("removeOverlay",arguments)&&void("undefined"!=typeof this._ovr[e]&&(this._ovr[e].onRemove&&s.onRemove.call(this,this._ovr[e],A5.map._ovr[this.contId+":"+e]),A5.map._ovr[this.contId+":"+e].setMap(null),delete A5.map._ovr[this.contId+":"+e],delete this._ovr[e]))},removeOverlayGroup:function(e){if(this._delayMethod("removeOverlayGroup",arguments))return!1;for(var t in this._ovr)this._ovr[t].group==e&&this.removeOverlay(t)},setMode:function(e){if("edit"==this._mode.type&&""!=this._mode.eo){var t=A5.map._ovr[this.contId+":"+this._mode.eo];t&&t.setOptions({editable:!1})}this._mode.l&&google.maps.event.removeListener(this._mode.l),"draw"==this._mode.type&&("overlay-polygon"==this._mode.subType&&this._mrk.__A5DRAWPOLYSTART?(this.removeOverlay(this._mode.name),this.removeMarker("__A5DRAWPOLYSTART")):"overlay-circle"==this._mode.subType&&1==this._mode.p.length&&this.removeOverlay(this._mode.name)),"draw"==e?(this._mode.type=e,this._mode.subType=arguments[1],"route"==this._mode.subType?(this._mode.s="undefined"!=typeof arguments[2]?arguments[2]:{},$u.o.assign(this._mode.s,{maximum:!1},!0),this._mode.cf="undefined"!=typeof arguments[3]&&arguments[3],this._dirSetup(),this._dirR.setOptions({preserveViewport:!0})):(this._mode.name=arguments[2],this._mode.s="undefined"!=typeof arguments[3]?arguments[3]:{},this._mode.cf="undefined"!=typeof arguments[4]&&arguments[4]),this._mode.l&&google.maps.event.removeListener(this._mode.l),this._mode.l=google.maps.event.addListener(this.map,"click",Function("A5.map._m['"+this.contId+"']._draw(arguments[0]);")),this._mode.p=[],this.map.setOptions({draggableCursor:"crosshair"}),this._setOvrClickable(!1)):"erase"==e?(this._mode.type=e,this._mode.subType=arguments[1],this._mode.cf="undefined"!=typeof arguments[2]&&arguments[2],this.map.setOptions({draggableCursor:"crosshair"}),this._setOvrClickable(!0)):"edit"==e?(this._mode.type=e,this._mode.subType=arguments[1],this._mode.cf="undefined"!=typeof arguments[2]&&arguments[2],this.map.setOptions({draggableCursor:"crosshair"}),this._setOvrClickable(!0)):(this._mode.type="default",this._mode.subType="",this._mode.l&&google.maps.event.removeListener(this._mode.l),this._mode.lc&&google.maps.event.removeListener(this._mode.lc),this._mode.p=[],this.map.setOptions({draggableCursor:""}),this._dirR&&this._dirR.setOptions({preserveViewport:!1}),this._setOvrClickable(!0))},_addMarker:function(e){var t=this._mrk[e],i=null;if(""!=t.icon.url){var s=null,a=null;t.icon.anchor.x&&t.icon.anchor.y&&(s=new google.maps.Point(t.icon.anchor.x,t.icon.anchor.y)),t.icon.width&&t.icon.height&&(a=new google.maps.Size(t.icon.width,t.icon.height)),i=new google.maps.MarkerImage(t.icon.url,a,null,s)}var n=null;"drop"==t.animation||1==t.animation?n=google.maps.Animation.DROP:"bounce"==t.animation&&(n=google.maps.Animation.BOUNCE);var o={draggable:t.draggable,icon:i,title:t.title,position:t.position,map:this.map,animation:n};if(A5.map._mrk[this.contId+":"+e]=new google.maps.Marker(o),t.detail.has&&google.maps.event.addListener(A5.map._mrk[this.contId+":"+e],"click",Function("A5.map._m['"+this.contId+"'].showMarkerDetail('"+e+"');")),t.overlay.has){var r=this._cRad(t.overlay.data);A5.map._mrkC[this.contId+":"+e]=new google.maps.Circle({map:this.map,center:t.position,radius:r,fillColor:t.overlay.fill.color,fillOpacity:t.overlay.fill.opacity,strokeColor:t.overlay.stroke.color,strokeOpacity:t.overlay.stroke.opacity,strokeWeight:t.overlay.stroke.width}),t.draggable&&google.maps.event.addListener(A5.map._mrk[this.contId+":"+e],"drag",Function("A5.map._mrkC['"+this.contId+":"+e+"'].setCenter(arguments[0].latLng)"))}google.maps.event.addListener(A5.map._mrk[this.contId+":"+e],"click",Function("var mObj = A5.map._m['"+this.contId+"']; if(mObj._mode.type == 'erase' && mObj._mode.subType == 'marker'){ mObj._erase('"+e+"');} else if(mObj._mrk['"+e+"'].onClick){mObj._mrk['"+e+"'].onClick.apply(this,arguments);}")),t.onDblClick&&google.maps.event.addListener(A5.map._mrk[this.contId+":"+e],"dblclick",t.onDblClick),t.onDrag&&google.maps.event.addListener(A5.map._mrk[this.contId+":"+e],"drag",t.onDrag),t.onDragEnd&&google.maps.event.addListener(A5.map._mrk[this.contId+":"+e],"dragend",t.onDragEnd),t.onDragStart&&google.maps.event.addListener(A5.map._mrk[this.contId+":"+e],"dragstart",t.onDragStart),t.onMouseDown&&google.maps.event.addListener(A5.map._mrk[this.contId+":"+e],"mousedown",t.onMouseDown),t.onMouseOut&&google.maps.event.addListener(A5.map._mrk[this.contId+":"+e],"mouseout",t.onMouseOut),t.onMouseOver&&google.maps.event.addListener(A5.map._mrk[this.contId+":"+e],"mouseover",t.onMouseOver),t.onMouseUp&&google.maps.event.addListener(A5.map._mrk[this.contId+":"+e],"mouseup",t.onMouseUp),t.onRightClick&&google.maps.event.addListener(A5.map._mrk[this.contId+":"+e],"rightclick",t.onRightClick),"number"==typeof t.emphasize&&this.emphasizeMarker(e,t.emphasize),t.onAddComplete&&t.onAddComplete.call(this,t,A5.map._mrk[this.contId+":"+e])},_addOverlay:function(e){var t=this._ovr[e];if("circle"==t.type){var i=this._cRad(t.data[1]);A5.map._ovr[this.contId+":"+e]=new google.maps.Circle({map:this.map,center:t.data[0],radius:i,fillColor:t.fill.color,fillOpacity:t.fill.opacity,strokeColor:t.stroke.color,strokeOpacity:t.stroke.opacity,strokeWeight:t.stroke.width,clickable:this._mode.clickable})}else if("polygon"==t.type){for(var s=[],a=0;a<t.data.length;a++)s.push(new google.maps.LatLng(t.data[a][0],t.data[a][1],(!0)));A5.map._ovr[this.contId+":"+e]=new google.maps.Polygon({map:this.map,paths:s,fillColor:t.fill.color,fillOpacity:t.fill.opacity,strokeColor:t.stroke.color,strokeOpacity:t.stroke.opacity,strokeWeight:t.stroke.width,clickable:this._mode.clickable})}google.maps.event.addListener(A5.map._ovr[this.contId+":"+e],"click",Function("var mObj = A5.map._m['"+this.contId+"']; if(mObj._mode.type == 'erase' && mObj._mode.subType == 'overlay'){ mObj._erase('"+e+"');} else if(mObj._mode.type == 'edit' && mObj._mode.subType == 'overlay'){ mObj._edit('"+e+"');} else if(mObj._ovr['"+e+"'].onClick){mObj._ovr['"+e+"'].onClick.apply(this,arguments);}")),t.onDblClick&&google.maps.event.addListener(A5.map._ovr[this.contId+":"+e],"dblclick",t.onDblClick),t.onMouseDown&&google.maps.event.addListener(A5.map._ovr[this.contId+":"+e],"mousedown",t.onMouseDown),t.onMouseOut&&google.maps.event.addListener(A5.map._ovr[this.contId+":"+e],"mouseout",t.onMouseOut),t.onMouseOver&&google.maps.event.addListener(A5.map._ovr[this.contId+":"+e],"mouseover",t.onMouseOver),t.onMouseUp&&google.maps.event.addListener(A5.map._ovr[this.contId+":"+e],"mouseup",t.onMouseUp),t.onRightClick&&google.maps.event.addListener(A5.map._ovr[this.contId+":"+e],"rightclick",t.onRightClick),t.onAddComplete&&t.onAddComplete.call(this,t,A5.map._ovr[this.contId+":"+e])},_draw:function(e){if("marker"==this._mode.subType){if(this.addMarker(this._mode.name,[e.latLng.lat(),e.latLng.lng()],this._mode.s),this._mode.cf.constructor==Function){var t=this._mode.cf.call(this,e);if("string"==typeof t)return this._mode.name=t,!0}this.setMode("default")}else if("overlay-circle"==this._mode.subType){if(this._mode.p.push(e.latLng),1==this._mode.p.length){var i=[[this._mode.p[0].lat(),this._mode.p[0].lng()],1];this.addOverlay(this._mode.name,"circle",i,this._mode.s),this._mode.lc=google.maps.event.addListener(this.map,"mousemove",Function("var co = A5.map._ovr['"+this.contId+":"+this._mode.name+"']; co.setRadius(google.maps.geometry.spherical.computeDistanceBetween(co.getCenter(),arguments[0].latLng));"))}else if(2==this._mode.p.length){this._mode.lc&&google.maps.event.removeListener(this._mode.lc);var i=[[this._mode.p[0].lat(),this._mode.p[0].lng()],google.maps.geometry.spherical.computeDistanceBetween(this._mode.p[0],this._mode.p[1])];if(this.addOverlay(this._mode.name,"circle",i,this._mode.s),this._mode.cf.constructor==Function){var t=this._mode.cf.call(this,i);if("string"==typeof t)return this._mode.p=[],this._mode.name=t,!0}this.setMode("default")}}else"overlay-polygon"==this._mode.subType?(this._mode.p.push([e.latLng.lat(),e.latLng.lng()]),1==this._mode.p.length?this.addMarker("__A5DRAWPOLYSTART",this._mode.p[0],{onClick:Function("A5.map._m['"+this.contId+"']._drawPolyFin()"),icon:this.draw.polygon.startIcon}):this.addOverlay(this._mode.name,"polygon",this._mode.p,this._mode.s)):"route"==this._mode.subType&&(this._mode.p.length<this._mode.s.maximum||0==this._mode.s.maximum)&&(this._mode.p.push([e.latLng.lat(),e.latLng.lng()]),this._mode.p.length>1&&(this.plotRoute([].concat(this._mode.p)),this._mode.cf.constructor==Function&&this._mode.cf.call(this,this._mode.p)))},_drawPolyFin:function(){if(this.removeMarker("__A5DRAWPOLYSTART"),this._mode.cf.constructor==Function){var e=this._mode.cf.call(this,this._mode.p);if("string"==typeof e)return this._mode.p=[],this._mode.name=e,!0}this.setMode("default")},_erase:function(e){var t=!0;"marker"==this._mode.subType?(this._mode.cf&&(t=this._mode.cf.call(this,e,this._mrk[e])),t&&this.removeMarker(e)):(this._mode.cf&&(t=this._mode.cf.call(this,e,this._ovr[e])),t&&this.removeOverlay(e))},_edit:function(e){if(this._mode.cf&&!this._mode.cf.call(this,e,this._ovr[e]))return!1;if(""!=this._mode.eo){var t=A5.map._ovr[this.contId+":"+this._mode.eo];t&&t.setOptions({editable:!1})}A5.map._ovr[this.contId+":"+e].setOptions({editable:!0}),this._mode.eo=e},_setOvrClickable:function(e){this._mode.clickable=e;for(var t in this._ovr)A5.map._ovr[this.contId+":"+t].setOptions({clickable:e})},_cRad:function(e){var t=String(e),i=$u.s.toNum(t);return"sq km"==t.substr(t.length-5).toLowerCase()?i=Math.sqrt(1e6*i/Math.PI):"sq mi"==t.substr(t.length-5).toLowerCase()?i=Math.sqrt(2589846.49*i/Math.PI):"sq ft"==t.substr(t.length-5).toLowerCase()?i=Math.sqrt(.09290304*i/Math.PI):"sq m"==t.substr(t.length-4).toLowerCase()?i=Math.sqrt(i/Math.PI):"km"==t.substr(t.length-2).toLowerCase()?i=1e3*i:"mi"==t.substr(t.length-2).toLowerCase()?i=1609.3*i:"ft"==t.substr(t.length-2).toLowerCase()&&(i=.3048*i),i},_dirSetup:function(){if("undefined"==typeof this._dirS){this._dirS=new google.maps.DirectionsService;var e=null;$(this.route.directionsPanel)&&(e=$(this.route.directionsPanel)),this._dirR=new google.maps.DirectionsRenderer({draggable:this.route.draggable,panel:e}),this._dirR.setMap(this.map)}},_showDetailLow:function(e,t){"undefined"==typeof A5.map._d[this.contId]&&(A5.map._d[this.contId]=new google.maps.InfoWindow({content:""})),A5.map._d[this.contId].setContent(t),A5.map._d[this.contId].open(this.map,A5.map._mrk[this.contId+":"+e])},_zChange:function(){var e=this.map.getZoom();this.onZoomChange.call(this,{zoom:e,oldZoom:this._zOld}),this._zOld=e},_genMap:function(){var e=google.maps.MapTypeId.ROADMAP;"HYBRID"==this.type.toUpperCase()?e=google.maps.MapTypeId.HYBRID:"ROADMAP"==this.type.toUpperCase()?e=google.maps.MapTypeId.ROADMAP:"SATELLITE"==this.type.toUpperCase()?e=google.maps.MapTypeId.SATELLITE:"TERRAIN"==this.type.toUpperCase()&&(e=google.maps.MapTypeId.TERRAIN);var t={center:new google.maps.LatLng(42.4,(-71.05)),zoom:11,mapTypeControl:this.ui.mapTypeControl,overviewMapControl:this.ui.overviewMap,overviewMapControlOptions:{opened:!0},panControl:this.ui.panControl,scaleControl:this.ui.scale,streetViewControl:this.ui.streetViewControl,zoomControl:this.ui.zoomControl,mapTypeId:e,draggable:this.ui.draggable,disableDoubleClickZoom:!this.ui.zoomOnDlbClick};this.map=new google.maps.Map(document.getElementById(this.contId),t),this.onClick&&google.maps.event.addListener(this.map,"click",this.onClick),this.onDblClick&&google.maps.event.addListener(this.map,"dblclick",this.onDblClick),this.onRightClick&&google.maps.event.addListener(this.map,"rightclick",this.onRightClick),this.onZoomChange&&google.maps.event.addListener(this.map,"zoom_changed",Function("A5.map._m['"+this.contId+"']._zChange();"));for(var i=0;i<this._dmc.length;i++)this[this._dmc[i].method].apply(this,this._dmc[i].args);if(this._dmc=[],this._zOld=this.map.getZoom(),this.onInitialize){var s=this.map.getCenter();this.onInitialize.call(this,{zoom:this.map.getZoom(),center:[s.lat(),s.lng()]})}},_delayMethod:function(e,t){if(this.map)return!1;for(var i={method:e,args:[]},s=0;s<t.length;s++)i.args.push(t[s]);return this._dmc.push(i),!0}}),"undefined"==typeof A5.themes&&(A5.themes={_t:{},add:function(e,t){if("undefined"==typeof this._t[e]&&(this._t[e]={}),$u.o.assign(this._t[e],t),t.general&&t.general.iconSet&&"svg"==t.general.iconSet.type&&!$(e+"-icons")){var i=document.createElement("div");i.id=e+"-icons",$ss(i,"position: absolute; top: -1000px;"),i.innerHTML=t.general.iconSet.icons,document.documentElement.appendChild(i)}},assign:function(e,t,i){t=t.split(":");var s=t.shift();if("undefined"!=typeof this._t[s]){var a=this._t[s];if("undefined"!=typeof a[i]){var n=a[i];if(t.length>0)for(var o=t.length-1;o>=0;o--){if("undefined"!=typeof n[t.join(":")])return $u.o.assign(e,n[t.join(":")]),!0;t.pop()}return"undefined"!=typeof n.base&&$u.o.assign(e,n.base),!0}}}}),"undefined"==typeof A5.overrides&&(A5.overrides={_o:{},add:function(e,t){"undefined"==typeof this._o[e]&&(this._o[e]={}),$u.o.assign(this._o[e],t)},assign:function(e,t,i){if("undefined"!=typeof this._o[t]){var s=this._o[t];"undefined"!=typeof s[i]&&"undefined"!=typeof s[i]&&$u.o.assign(e,s[i])}}}),A5.u={_uIdIndx:0,getUniqueId:function(){return A5.u._uIdIndx++,"A5UID"+A5.u._uIdIndx},convertUnits:function(e,t,i){if("string"==typeof e&&"undefined"==typeof i&&(e=$u.s.aTrim(e),i=t,t=e.substr(e.length-2,2),e=$u.s.toNum(e)),0==e)return 0;if(i==t)return e;if("undefined"==typeof this._units){var s=document.createElement("div");$ss(s,"width: 1cm; height: 1in; padding: 0px; border: none; margin: 0px; position: absolute; left: -2in; top: -2in"),document.body.insertBefore(s,document.body.firstChild),this._units={px:1},this._units["in"]=s.offsetHeight,this._units.pt=this._units["in"]/72,this._units.pc=12*this._units.pt,this._units.cm=s.offsetWidth,this._units.mm=this._units.cm/10}var a=this._units[t],n=this._units[i],o=e*a/n;return"number"!=typeof o&&(o=0),o},css:{setSelector:function(e,t){var i=$("A5STYLESHEET");i||(i=document.createElement("style"),i.id="A5STYLESHEET",$sa(i,"type","text/css"),document.getElementsByTagName("head")[0].appendChild(i));for(var s=i.sheet?i.sheet:i.styleSheet,a=s.cssRules?s.cssRules:s.rules,n=0;n<a.length;n++)if(a[n].selectorText==e)return a[n].style.cssText=t,!0;return""!=t&&void(s.insertRule?s.insertRule(e+"{"+t+"}",a.length):s.addRule(e,t))},deleteSelector:function(e){var t=$("A5STYLESHEET");if(!t)return!1;for(var i=t.sheet?t.sheet:t.styleSheet,s=i.cssRules?i.cssRules:i.rules,a=0;a<s.length;a++)if(s[a].selectorText==e)return i.deleteRule?i.deleteRule(a):i.removeRule&&i.removeRule(a),!0}},icon:{_:{cls:{tag:"i"},parse:function(e){if("cssIcon="==e.substr(0,8)){e=e.substr(8),e=e.split("{");var t="";return e.length>1&&(t=e[1].split("}").shift()),e=e[0],{t:"cls",i:e,css:t}}if("svgIcon="==e.substr(0,8)){e=e.substr(8),e=e.split("{");var t="";e.length>1&&(t=e[1].split("}").shift()),e=e[0],e=e.split(":");var i=[],s="";if(e[1])for(var a=e[1].split(","),n=/^[0-9]/,o=0;o<a.length;o++)n.test(a[o])?i=a[o].split(" "):s=a[o];return e=e[0],{t:"svg",i:e,css:t,s:i,cn:s}}return{t:"img",i:e}}},html:function(e){if("string"!=typeof e)return"";e=this._.parse(e);var t="string"==typeof arguments[1]?" "+arguments[1]:"";if("cls"==e.t){var i=/class="([^"]+)"/i,s=i.test(t)?" "+i.exec(t)[0].replace(i,"$1"):"";if(t=t.replace(i,""),
""!=e.css){var a=/style="([^"]+)"/i,n=a.test(t)?a.exec(t)[0].replace(a,"$1"):"";t=t.replace('style="'+n+'"',""),t=t+' style="'+n+";"+e.css+'"'}return"<"+this._.cls.tag+' class="'+e.i+s+'"'+t+"></"+this._.cls.tag+">"}if("svg"==e.t){var o=e.s;if(o.length>1)var o=' width="'+o[0]+'" height="'+o[1]+'"';else if(1==o.length)var o=' width="'+o[0]+'" height="'+o[0]+'"';var r=e.cn;if(""!=r&&(r=' class="'+r+'"'),""!=e.css){var a=/style="([^"]+)"/i,n=a.test(t)?a.exec(t)[0].replace(a,"$1"):"";t=t.replace('style="'+n+'"',""),t=t+' style="'+n+";"+e.css+'"'}return"<svg"+r+o+t+'><use x="0" y="0" width="100%" height="100%" xlink:href="'+e.i+'" pointer-events="none"/></svg>'}return'<img src="'+e.i+'"'+t+" />"},element:function(e){if("string"!=typeof e)return!1;if(e=this._.parse(e),"cls"==e.t){var t=document.createElement(this._.cls.tag);t.className=e.i,""!=e.css&&$ss(t,$gs(t)+";"+e.css)}else if("svg"==e.t){var i="http://www.w3.org/2000/svg",t=document.createElementNS(i,"svg");t.setAttribute("class",e.cn),e.s.length>1?(t.setAttribute("width",e.s[0]),t.setAttribute("height",e.s[1])):1==e.s.length&&(t.setAttribute("width",e.s[0]),t.setAttribute("height",e.s[0]));var s=document.createElementNS(i,"use");s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttributeNS("http://www.w3.org/1999/xlink","href",e.i),s.setAttribute("pointer-events","none"),t.appendChild(s),""!=e.css&&$ss(t,$gs(t)+";"+e.css)}else{var t=document.createElement("img");t.src=e.i}return t},update:function(e,t){return"string"==typeof t&&(t=this._.parse(t),void("cls"==t.t?(e.className=t.i,""!=t.css&&$ss(e,$gs(e)+";"+t.css)):"svg"==t.t?(e.childNodes&&e.childNodes[0].setAttributeNS("http://www.w3.org/1999/xlink","href",t.i),""!=t.css&&$ss(e,$gs(e)+";"+t.css),""!=t.cn&&e.setAttribute("class",t.cn),t.s.length>1?(e.setAttribute("width",t.s[0]),e.setAttribute("height",t.s[1])):1==t.s.length&&(e.setAttribute("width",t.s[0]),e.setAttribute("height",t.s[0]))):e.src=t.i))}},json:{compress:function(e,t){var i="function"==typeof arguments[2]&&arguments[2],s={c:{},e:{},pn:"a",p:"a",pp:"",pu:!1},a=this._c(e,s,i);return $u.o.assign(t,s.e),a},_c:function(e,t,i){if(null==e)return e;var s=!0;if(e.constructor==Array)for(var a=[],n=0;n<e.length;n++)a.push(this._c(e[n],t,i));else if(e.constructor==Object){var a={};for(var o in e)i&&(s=i(o,e[o])),s&&("undefined"==typeof t.c[o]&&(t.c[o]=t.pn,t.e[t.pn]=o,t.pu?t.p<"Z"?t.p=String.fromCharCode(t.p.charCodeAt(0)+1):(t.p="a",t.pu=!1,""==t.pp?t.pp="a":t.pp=String.fromCharCode(t.pp.charCodeAt(0)+1)):t.p<"z"?t.p=String.fromCharCode(t.p.charCodeAt(0)+1):(t.p="A",t.pu=!0),t.pn=t.pp+t.p),a[t.c[o]]=this._c(e[o],t,i))}else a=e;return a},expand:function(e,t){if(null==e)return e;if(e.constructor==Array)for(var i=[],s=0;s<e.length;s++)i.push(this.expand(e[s],t));else if(e.constructor==Object){var i={};for(var a in e)i[t[a]]=this.expand(e[a],t)}else i=e;return i},preparse:function(e){if(e.constructor==Array)for(var t=0;t<e.length;t++)this.preparse(e[t]);else if(e.constructor==Object)for(var i in e)e[i].constructor==Function?e[i]={"*a5type":"function","*data":e[i].toString()}:e[i].constructor==Date?e[i]={"*a5type":"date","*data":e[i].getTime()}:e.constructor==Object&&this.preparse(e[i])},postparse:function(e){if(e.constructor==Array)for(var t=0;t<e.length;t++)this.postparse(e[t]);else if(e.constructor==Object)for(var i in e)if(e.constructor==Object)if("undefined"!=typeof e[i]["*a5type"])if("function"==e[i]["*a5type"]){var s=e[i]["*data"],a=s.substring(8,s.indexOf("{")).trim(),n=s.substring(s.indexOf("{")+1,s.length-1);a=a.substring(a.indexOf("(")+1,a.length-1).split(","),e[i]=null,0==a.length?e[i]=new Function(n):1==a.length?e[i]=new Function(a[0],n):2==a.length?e[i]=new Function(a[0],a[1],n):3==a.length?e[i]=new Function(a[0],a[1],a[2],n):4==a.length?e[i]=new Function(a[0],a[1],a[2],a[3],n):5==a.length?e[i]=new Function(a[0],a[1],a[2],a[3],a[4],n):6==a.length?e[i]=new Function(a[0],a[1],a[2],a[3],a[4],a[5],n):7==a.length?e[i]=new Function(a[0],a[1],a[2],a[3],a[4],a[5],a[6],n):8==a.length?e[i]=new Function(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],n):9==a.length?e[i]=new Function(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],n):10==a.length&&(e[i]=new Function(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],n))}else"date"==e[i]["*a5type"]&&(e[i]=new Date(e[i]["*data"]));else this.postparse(e[i])}},object:{each:function(e,t){var i="undefined"!=typeof arguments[2]?arguments[2]:[],s=[],a=null;if(e.constructor==Array)for(var n=0;n<e.length;n++)null==e[n]||e[n].constructor!=Array&&e[n].constructor!=Object?(a=t(n,e[n],i.concat(n),s),"undefined"!=typeof a&&(e[n]=a)):s=s.concat(this.each(e[n],t,i.concat(n)));else if(e.constructor==Object)for(var o in e)null==e[o]||e[o].constructor!=Array&&e[o].constructor!=Object?(a=t(o,e[o],i.concat(o),s),"undefined"!=typeof a&&(e[o]=a)):s=s.concat(this.each(e[o],t,i.concat(o)));return s},set:function(e,t,i){"string"==typeof t&&(0==t.indexOf("[")&&(t=t.substr(1)),t=t.replace(/\]/g,""),t=t.split(/[\[\.]/g));for(var s=0;s<t.length-1;s++){if("undefined"==typeof e[t[s]])return!1;e=e[t[s]]}return"undefined"!=typeof e[t[t.length-1]]&&(e[t[t.length-1]]=i,!0)},get:function(e,t){"string"==typeof t&&(0==t.indexOf("[")&&(t=t.substr(1)),t=t.replace(/\]/g,""),t=t.split(/[\[\.]/g));for(var i=0;i<t.length-1;i++){if("undefined"==typeof e[t[i]])return null;e=e[t[i]]}return"undefined"!=typeof e[t[t.length-1]]?e[t[t.length-1]]:null}},template:{formats:{uppercase:function(e){return String(e).toUpperCase()},lowercase:function(e){return String(e).toLowerCase()},number:function(e){"number"!=typeof e&&(e=$u.s.toNum(""+e));var t="string"==typeof arguments[1]?arguments[1]:"";return e.toFormat(t)},date:function(e){var t="string"==typeof arguments[1]?arguments[1]:"";return e.toFormat(t)},dateString:function(e,t,i){"undefined"==typeof i&&(i=t);var s=A5.stringToDate(e,t);return s.toFormat(i)},escape:function(e){return e=String(e).replace(/\&/g,"&amp;"),e=e.replace(/\</g,"&lt;"),e=e.replace(/\>/g,"&gt;"),e=e.replace(/"/g,"&quot;")}},parse:function(e){var t={t:"",n:"",html:[],h:!1,f:!1,m:"",e:[],r:{},st:[],"*c":0,"*p":null,tf:"",hr:!1};return e=e.replace(/\\\{/g,"__A5OPENCURRLY__"),e=e.replace(/\\\}/g,"__A5CLOSECURRLY__"),this._parse(e,t),t.t=this._subParse(t.t,t,"item","",t),t},_parse:function(e,t){var i=e.match(/\{\/[^}]+/g);if(t.ml=0,null!=i){t.ml=i.length;for(var s="",a="",n="",o="",r=0,l=i.length-1;l>=0;l--)if(s=i[l].substr(2),n=s,a=s,o="",!("*"==s[0]&&"*root"!=s.substr(0,5)||e.indexOf("{"+s+"}")==-1&&e.indexOf("{"+s+"@")==-1||e.indexOf("{/"+s+"}")==-1)){"*root"==s&&(t.hr=!0,a="root"),e.indexOf("{"+s+"@")!=-1&&(n=e.substr(e.indexOf("{"+s+"@")+1),n=n.substr(0,n.indexOf("}")),o=n.split("@").pop().trim()),r={n:a,t:"",html:[],h:"",f:"",m:"",e:[],r:{},st:[],"*c":0,"*p":null,tf:o};var d=e.split("{"+n+"}");d.shift(),d=d.join("{"+n+"}").split("{/"+s+"}")[0],e=e.replace("{"+n+"}"+d+"{/"+s+"}","<template:"+a+" />"),r=this._parse(d,r),r.t.indexOf("{*header}")!=-1&&(r.h=r.t.split("{*header}")[1].split("{/*header}")[0],r.t=r.t.replace("{*header}"+r.h+"{/*header}",""),r.h=this._subParse(r.h,r,"set",s,t)),r.t.indexOf("{*footer}")!=-1&&(r.f=r.t.split("{*footer}")[1].split("{/*footer}")[0],r.t=r.t.replace("{*footer}"+r.f+"{/*footer}",""),r.f=this._subParse(r.f,r,"set",s,t)),r.t.indexOf("{*empty}")!=-1&&(r.m=r.t.split("{*empty}")[1].split("{/*empty}")[0],r.t=r.t.replace("{*empty}"+r.m+"{/*empty}",""),r.m=this._subParse(r.m,r,"set",s,t)),r.t=this._subParse(r.t,r,"item",s,t),t.st.push(r),l-=r.ml}}return t.t=e,t},_subParse:function(e,t,i,s,a){var n=e.match(/\{\@[^}]+/g);if(null!=n)for(var o="",r="",l="",d=!1,h=0;h<n.length;h++)d=!1,o=n[h].substr(2),r=o.trim().split("("),l=r.shift(),r=r.join("("),""!=r&&(r="["+r.substr(0,r.length-1)+"]",r=r.split("[countOneBased]").join("arguments[1].countOneBased"),r=r.split("[count]").join("arguments[1].count"),r=r.split("[path]").join("arguments[1].path"),r=r.split("[value]").join("arguments[0]"),r=r.split("[temp]").join("arguments[1].temp"),r=r.split("[root]").join("arguments[1].root"),r=r.replace(/(\[parent(\.parent)*\])/gi,function(e){return e=e.split("."),"arguments[1].parent["+e.length+"]"}),r=r.replace(/__A5OPENCURRLY__/g,"{"),r=r.replace(/__A5CLOSECURRLY__/g,"}"),d=Function("if(arguments[0] == null) return []; with(arguments[0]){try{var v = "+r+"; if(v == null) return []; return v;} catch(err){ console.log('ERROR: template function call');  return [];};};")),t.e.push({n:l,s:i,t:"func",a:d,i:h}),e=e.replace("{@"+o+"}","<func:"+(t.e.length-1)+" />");if(n=e.match(/\{\*partial [^}]+/g),null!=n)for(var c="",h=0;h<n.length;h++)c=n[h].substr(10),t.e.push({n:c,s:i,t:"partial"}),e=e.replace("{*partial "+c+"}","<partial:"+c+" />");if(n=e.match(/\{\*if(?:\{\*if(?:\{\*if(?:\{\*if[\s\S]+?\{\*endif\}|[\s\S])+?\{\*endif\}|[\s\S])+?\{\*endif\}|[\s\S])+?\{\*endif\}/g),null!=n)for(var u="",f="",p="",m=[],_={},g=/[A-z0-9\.\[\]]+\[-[^\]]+\]/g,v=null,y="",b="",h=0;h<n.length;h++){m=["with(arguments[0]){"],_={st:[],f:0,s:i,t:"condition"},u=n[h].substr(4,n[h].length-12),u.indexOf("{*endif}")!=-1&&(u=this._subParse(u,t,i,s,a)),u=u.split("{*else}"),f="",u.length>1&&(f=u.pop()),u=u[0],u=u.split("{*elseif ");for(var w=0;w<u.length;w++)p=u[w].split("}"),m.push("if("+p.shift()+") return "+w+";"),p=p.join("}"),_.st.push(this.parse(p));for(""!=f?(m.unshift("if(arguments[0] == null) return "+_.st.length+";"),m.push("return "+_.st.length+";"),_.st.push(this.parse(f))):(m.push("return -1;"),m.unshift("if(arguments[0] == null) return -1;")),m.push("}"),m=m.join("\n"),m=m.split("[countOneBased]").join("arguments[1].countOneBased"),m=m.split("[count]").join("arguments[1].count"),m=m.split("[path]").join("arguments[1].path"),m=m.split("[value]").join("arguments[0]"),m=m.split("[temp]").join("arguments[1].temp"),m=m.split("[root]").join("arguments[1].root"),m=m.replace(/(\[parent(\.parent)*\])/gi,function(e){return e=e.split("."),"arguments[1].parent["+e.length+"]"}),m=m.replace(/__A5OPENCURRLY__/g,"{"),m=m.replace(/__A5CLOSECURRLY__/g,"}"),v=g.exec(m);null!=v;)y=v[0],y=y.split("["),b=y.pop(),y=y.join("["),y=y+"["+y+".length"+b,m=m.replace(v[0],y),v=g.exec(m);m="try{"+m+"} catch(err){ console.log('ERROR: template conditional'); return -1;}",_.f=Function(m),t.e.push(_),e=e.replace(n[h],"<condition:"+(t.e.length-1)+" />")}if(n=e.match(/\{[^\}]+\}/g),null!=n)for(var r="",I=null,C="",A="",N="",$="",x=/[\W]/,g=/[A-z0-9\.\[\]]+\[-[^\]]+\]/g,v=null,y="",b="",h=0;h<n.length;h++)if(("item"==i&&"undefined"==typeof t.r[n[h]]||"set"==i&&"undefined"==typeof a.r[n[h]])&&"*"!=n[h].charAt(1)&&"/"!=n[h].charAt(1)){if(r=n[h].substr(1,n[h].length-2),x.test(r)&&"{[value]}"!=n[h])for(r=r.split("[countOneBased]").join("arguments[1].countOneBased"),r=r.split("[count]").join("arguments[1].count"),r=r.split("[path]").join("arguments[1].path"),r=r.split("[value]").join("arguments[0]"),r=r.split("[temp]").join("arguments[1].temp"),r=r.split("[root]").join("arguments[1].root"),r=r.replace(/(\[parent(\.parent)*\])/gi,function(e){return e=e.split("."),"arguments[1].parent["+e.length+"]"}),r=r.replace(/__A5OPENCURRLY__/g,"{"),r=r.replace(/__A5CLOSECURRLY__/g,"}"),r=r.replace(/\\\:/g,"__A5COLON__"),I=null,r.indexOf("||")!=-1&&(r=r.split("||"),I=r.pop(),I=$u.o.toJSON(I),r=r.join("||")),r.indexOf(":")!=-1&&(r=r.split(":"),C=r.shift(),A=r.join(":").trim(),r=C,A=A.split("("),N=A.shift().trim(),$=A.join("("),""!=$&&($=","+$.substr(0,$.length-1)),r=r+"; if(v != null) v = A5.u.template.formats['"+N+"']("+r+$+")"),r=r.replace(/__A5COLON__/g,":"),v=g.exec(r);null!=v;)y=v[0],y=y.split("["),b=y.pop(),y=y.join("["),y=y+"["+y+".length"+b,r=r.replace(v[0],y),v=g.exec(r);"set"==i?x.test(r)&&"{[value]}"!=n[h]||null!=I?a.r[n[h]]=Function("if(arguments[0] == null) return "+I+"; with(arguments[0]){try{var v = "+r+"; if(v == null) return "+I+"; return v;} catch(err){ console.log('ERROR: template expression'); return "+I+";};};"):a.r[n[h]]=r:x.test(r)&&"{[value]}"!=n[h]||null!=I?t.r[n[h]]=Function("if(arguments[0] == null) return "+I+"; with(arguments[0]){try{var v = "+r+"; if(v == null) return "+I+"; return v;} catch(err){ console.log('ERROR: template expression'); return "+I+";};};"):t.r[n[h]]=r}return e},expand:function(e,t){"string"==typeof t&&(t={template:t});var i="undefined"!=typeof arguments[2]?arguments[2]:{};$u.o.assign(t,{template:"",nullValue:"",partials:{}},!0),"undefined"!=typeof t.nullHTML&&(t.nullValue=t.nullHTML);for(var s in t.partials)"string"==typeof t.partials[s]&&(t.partials[s]=this.parse(t.partials[s]));if("string"==typeof t.template)var a=this.parse(t.template);else var a=t.template;if(a.hr)a["*p"]=[],this._e({root:e},a,t,"",i,e,[e],!0);else{var n=!1;if(null!=e&&e.constructor==Array&&(n=!0),n)for(var o=0;o<=e.length-1;o++)a["*p"]=[{type:"array",property:"root",index:o}],this._e(e[o],a,t,"",i,e,[e],!0),a["*c"]++;else a["*p"]=[{type:"object",property:"root",index:0}],this._e(e,a,t,"",i,e,[e],!0)}var r=a.html.join("");return r=r.replace("__A5OPENCURRLY__","{"),r=r.replace("__A5CLOSECURRLY__","}"),a.html=[],r},_e:function(e,t,i,s,a,n,o,r){r&&o.unshift(e);for(var l=t.t,d=0;d<t.st.length;d++)if("undefined"==typeof e[t.st[d].n])l=l.replace("<template:"+t.st[d].n+" />",this._rs(t.st[d].m));else{var h=e[t.st[d].n];if(h.constructor==Array){if(""!=t.st[d].tf){var c=this._gf(t.st[d].tf.split("."));c&&(h=c.c([].concat(h),a,n,o))}if(0==h.length)l=l.replace("<template:"+t.st[d].n+" />",this._rs(t.st[d].m));else{t.st[d]["*c"]=0;for(var u=0;u<h.length;u++)t.st[d]["*p"]=t["*p"].concat([{type:"array",property:t.st[d].n,index:u}]),this._e(h[u],t.st[d],i,s+t.st[d].n+".",a,n,o,!0),t.st[d]["*c"]++;l=l.replace("<template:"+t.st[d].n+" />",this._rs(t.st[d].h+t.st[d].html.join("")+t.st[d].f))}}else t.st[d]["*p"]=t["*p"].concat([{type:"object",property:t.st[d].n,index:0}]),this._e(h,t.st[d],i,s+t.st[d].n+".",a,n,o,!0),l=l.replace("<template:"+t.st[d].n+" />",this._rs(t.st[d].h+t.st[d].html.join("")+t.st[d].f));l=this._eCmds(l,t.st[d],h,e,"set",i,s,a,n,o),t.st[d].html=[]}l=this._eCmds(l,t,e,e,"item",i,s,a,n,o);var f="";for(var p in t.r)f="{[value]}"==p?e:"string"==typeof t.r[p]?e[t.r[p]]:t.r[p].call(this,e,{count:t["*c"],countOneBased:t["*c"]+1,path:t["*p"],temp:a,root:n,parent:o}),l=null==f||"undefined"==typeof f?l.split(String(p)).join(i.nullValue):l.split(String(p)).join(f);t.html.push(l),r&&o.shift()},_eCmds:function(e,t,i,s,a,n,o,r,l,d){for(var h=t.e,c=h.length-1;c>=0;c--)if(h[c].s==a)if("func"==h[c].t){var u=this._gf(this._gfp(h[c].n));u&&(e=h[c].a?e.replace("<func:"+c+" />",this._rs(u.c.apply(u.s,h[c].a.call(this,i,{count:t["*c"],countOneBased:t["*c"]+1,path:t["*p"],temp:r,root:l,parent:d})))):"set"==a?e.replace("<func:"+c+" />",this._rs(u.c(s,t.n,r,l,d))):e.replace("<func:"+c+" />",this._rs(u.c(i,"",r,l,d))))}else if("partial"==h[c].t){"set"==a?this._e(s,n.partials[h[c].n],n,o,r,l,d):this._e(i,n.partials[h[c].n],n,o,r,l,d);var f=n.partials[h[c].n].html.join("");n.partials[h[c].n].html=[],e=e.replace("<partial:"+h[c].n+" />",this._rs(f))}else if("condition"==h[c].t){if("set"==a)var p=h[c].f.call(this,s,{count:t["*c"],countOneBased:t["*c"]+1,path:t["*p"],temp:r,root:l,parent:d});else var p=h[c].f.call(this,i,{count:t["*c"],countOneBased:t["*c"]+1,path:t["*p"],temp:r,root:l,parent:d});var f="";if(p>-1){h[c].st[p]["*c"]=t["*c"],h[c].st[p]["*p"]=t["*p"],this._e(i,h[c].st[p],n,o,r,l,d);var f=h[c].st[p].html.join("");h[c].st[p].html=[]}e=e.replace("<condition:"+c+" />",this._rs(f))}return e},_rs:function(e){return e.split("$$").join("$$$$")},_gfp:function(e){e=e.split(/\.(?![^\[]+\])/g);for(var t=[],i=[],s=0;s<e.length;s++)e[s].indexOf("]")==e[s].length-1?(i=e[s].substr(0,e[s].length-1).split(/\[/),t.push(i[0]),i=i[1],i=i.substr(1,i.length-2),t.push(i)):t.push(e[s]);return t},_gf:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:{c:window,s:window};return t.s=t.c,t.c=t.c[e.shift()],"undefined"!=typeof t.c&&(0!=e.length&&(t=this._gf(e,t)),t)}},element:{cssGroup:function(e,t){$u.o.assign(t,{firstClassName:!1,lastClassName:!1,middleClassName:!1},!0);for(var i=0;i<e.length;i++)t.firstClassName&&$rcn(e[i],t.firstClassName),t.lastClassName&&$rcn(e[i],t.lastClassName),t.middleClassName&&$acn(e[i],t.middleClassName);for(var i=0;i<e.length;i++)if("none"!=e[i].style.display){t.firstClassName&&$acn(e[i],t.firstClassName),t.middleClassName&&$rcn(e[i],t.middleClassName);break}for(var i=e.length-1;i>=0;i--)if("none"!=e[i].style.display){t.lastClassName&&$acn(e[i],t.lastClassName),t.middleClassName&&$rcn(e[i],t.middleClassName);break}},toggle:function(e,t){"object"!=typeof t&&(t={}),"none"==e.style.display?"undefined"!=typeof t.show?A5.u.element.show(e,t.show):A5.u.element.show(e,t):"undefined"!=typeof t.hide?A5.u.element.hide(e,t.hide):A5.u.element.hide(e,t)},metrics:function(e){var t={paddingTop:"",paddingBottom:"",paddingRight:"",paddingLeft:"",borderTopWidth:"",borderRightWidth:"",borderBottomWidth:"",borderLeftWidth:""};"undefined"!=typeof window.getComputedStyle?t=window.getComputedStyle(e):e.currentStyle&&(t=e.currentStyle);var i=0;""!=t.paddingLeft&&(i+=A5.u.convertUnits(t.paddingLeft,"px")),""!=t.paddingRight&&(i+=A5.u.convertUnits(t.paddingRight,"px")),""!=t.borderLeftWidth&&(i+=A5.u.convertUnits(t.borderLeftWidth,"px")),""!=t.borderRightWidth&&(i+=A5.u.convertUnits(t.borderRightWidth,"px"));var s=0;return""!=t.paddingTop&&(s+=A5.u.convertUnits(t.paddingTop,"px")),""!=t.paddingBottom&&(s+=A5.u.convertUnits(t.paddingBottom,"px")),""!=t.borderTopWidth&&(s+=A5.u.convertUnits(t.borderTopWidth,"px")),""!=t.borderBottomWidth&&(s+=A5.u.convertUnits(t.borderBottomWidth,"px")),{width:e.offsetWidth,height:e.offsetHeight,innerWidth:e.offsetWidth-i,innerHeight:e.offsetHeight-s}},hide:function(e,t){"object"!=typeof t&&(t={});var i=["fade","slide","blind","clip","drop","explode","fold","puff","scale","size","pulsate"],s="undefined"!=typeof t.onComplete?t.onComplete:null;if($u.a.find(i,t.type)!=-1&&"undefined"!=typeof jQuery){if("none"!=e.style.display&&$sa(e,"A5StyleDisplay",e.style.display),0!=jQuery(e).queue().length)jQuery(e).stop(!0,!0);else if("none"==e.style.display&&!t.force)return!1;if(t.force){var a=$ga(e,"A5StyleDisplay");"string"==typeof a?e.style.display=a:e.style.display=""}"slide"==t.type?jQuery(e).slideUp(t.duration,s):"fade"==t.type?jQuery(e).fadeOut(t.duration,s):jQuery(e).hide(t.type,t.duration,s)}else{if("none"==e.style.display)return!1;$sa(e,"A5StyleDisplay",e.style.display),e.style.display="none",s&&s()}},show:function(e,t){"object"!=typeof t&&(t={});var i=["fade","slide","blind","clip","drop","explode","fold","puff","scale","size","pulsate"],s="undefined"!=typeof t.onComplete?t.onComplete:null;if($u.a.find(i,t.type)!=-1&&"undefined"!=typeof jQuery){if(0!=jQuery(e).queue().length)jQuery(e).stop(!0,!0);else if("none"!=e.style.display&&!t.force)return!1;t.force&&(e.style.display="none"),"slide"==t.type?jQuery(e).slideDown(t.duration,s):"fade"==t.type?jQuery(e).fadeIn(t.duration,s):jQuery(e).show(t.type,t.duration,s)}else{if("none"!=e.style.display)return!1;var a=$ga(e,"A5StyleDisplay");"string"==typeof a?e.style.display=a:e.style.display="",s&&s()}},setContent:function(e,t){e=$(e);var i="undefined"!=typeof arguments[2]&&arguments[2];e.firstChild&&1==e.firstChild.nodeType&&e.firstChild.id==e.id+".SCROLLWRAPPER"&&(e=e.firstChild),"object"==typeof t?(e.innerHTML="",e.appendChild(t)):e.innerHTML=t,i&&("undefined"!=typeof i.element?A5.u.element.setScroll(e,i.element,i.settings):A5.u.element.setScroll(e,i.x,i.y,i.settings))},setScroll:function(e,t,i,s){if(e=$(e),0==e)return!1;"SCROLLWRAPPER"==e.id.split(".").pop()&&(e=e.parentNode);var a=$ga(e,"A5CustomScroll"),n=!1;if("object"==typeof t||"string"==typeof t){var n=$(t);s=i,t=!1,i=!1}if("object"!=typeof s&&(s={}),$u.o.assign(s,{fireEvent:!1,mode:"into-view",axis:"both",offset:{x:0,y:0},animation:{allow:!1,duration:300}},!0),n){var o=A5.u.element.getScroll(e),r=n.parentNode,l=n.offsetTop,d=n.offsetLeft;for("absolute"!=e.style.position&&"relative"!=e.style.position&&(l-=e.offsetTop,d-=e.offsetLeft);r!=e;)"absolute"!=r.style.position&&"relative"!=r.style.position||(l+=r.offsetTop,d+=r.offsetLeft),r=r.parentNode;"top"==s.mode?i=l-s.offset.y:"bottom"==s.mode?i=l+n.offsetHeight-e.offsetHeight+s.offset.y:(o.left>d||e.offsetWidth<n.offsetWidth?t=d-s.offset.x:o.left+e.offsetWidth<d+n.offsetWidth&&(t=d+n.offsetWidth-e.offsetWidth+s.offset.x),o.top>l||e.offsetHeight<n.offsetHeight?i=l-s.offset.y:o.top+e.offsetHeight<l+n.offsetHeight&&(i=l+n.offsetHeight-e.offsetHeight+s.offset.y))}if("string"==typeof a&&""!=a){if(!e.firstChild)return!1;if(e.firstChild.id!=e.id+".SCROLLWRAPPER")return!1;a=a.split(",");var h=Number(a[0]),c=Number(a[1]);"number"==typeof t&&"y"!=s.axis&&(h=t),"number"==typeof i&&"x"!=s.axis&&(c=i);var u=Math.max(e.scrollWidth+h-e.offsetWidth,0),f=Math.max(e.firstChild.offsetHeight-e.offsetHeight,0);h<0?h=0:h>u&&(h=u),c<0?c=0:c>f&&(c=f);var p=A5.u.drag._snap(e,h,c);h=p.x,c=p.y,$sa(e,"A5CustomScroll",h+","+c),s.animation.allow?(e.firstChild.style[A5.u.css.properties.transitionDOM]=A5.u.css.properties.transform+" "+s.animation.duration+"ms ease",e.firstChild.style[A5.u.css.properties.transformDOM]=A5.u.css.transform2D(h*-1,c*-1)):(e.firstChild.style[A5.u.css.properties.transitionDOM]="",A5.flags.iOSVersion!=-1?e.firstChild.style[A5.u.css.properties.transformDOM]="translate("+h*-1+"px,"+c*-1+"px)":e.firstChild.style[A5.u.css.properties.transformDOM]=A5.u.css.transform2D(h*-1,c*-1)),A5.u.drag._st[e.id]&&(clearInterval(A5.u.drag._st[e.id].inter),delete A5.u.drag._st[e.id]);var m=$(e.id+".SCROLLINDICATOR.X");m&&(m.style[A5.u.css.properties.transitionDOM]="",m.style.display="none"),m=$(e.id+".SCROLLINDICATOR.Y"),m&&(m.style[A5.u.css.properties.transitionDOM]="",m.style.display="none")}else"number"==typeof t&&"y"!=s.axis&&(e.scrollLeft=t),"number"==typeof i&&"x"!=s.axis&&(e.scrollTop=i);s.fireEvent&&$e.execute(e,"scroll")},getScroll:function(e){if(e=$(e),0==e)return!1;"SCROLLWRAPPER"==e.id.split(".").pop()&&(e=e.parentNode);var t=$ga(e,"A5CustomScroll");if(t){t=t.split(",");var i=Number(t[0]),s=Number(t[1]);if(A5.u.drag._st[e.id]){var a={};a[A5.u.css.properties.transformDOM]="","undefined"!=typeof window.getComputedStyle?a=window.getComputedStyle(e.firstChild):e.currentStyle&&(a=e.firstChild.currentStyle);var n={e:0,f:0};if(A5.flags.isFireFox||A5.flags.isOpera){var o=/matrix\(\s*-?\d+(?:\.\d+)?\s*,\s*-?\d+(?:\.\d+)?\s*,\s*-?\d+(?:\.\d+)?\s*,\s*-?\d+(?:\.\d+)?\s*\,\s*(-?\d+(?:\.\d+)?)\s*,\s*(-?\d+(?:\.\d+)?)\s*\)/,r=a[A5.u.css.properties.transformDOM].match(o);r&&(n.e=r[1],n.f=r[2])}else n=A5.flags.isWebKit?new WebKitCSSMatrix(a[A5.u.css.properties.transformDOM]):new MSCSSMatrix(a[A5.u.css.properties.transformDOM]);i=Math.round(n.e)*-1,s=Math.round(n.f)*-1}var l=e.scrollWidth+i,d=e.firstChild?e.firstChild.offsetHeight:e.offsetHeight;return{top:s,left:i,width:l,height:d}}return{top:e.scrollTop,left:e.scrollLeft,width:e.scrollWidth,height:e.scrollHeight}}}},A5.PanelCard=Class.create({initialize:function(e){this.contId="",this.renderMode="default",this._initLow.apply(this,arguments),this._ieCludge=!1,document.all&&!document.createElement("canvas").getContext&&(this._ieCludge=!0),this.onInitialize.constructor==Function&&this.onInitialize.call(this)},_initLow:function(e){$u.o.assign(this,{theme:"",override:"base",placeholderHTML:"",className:"",header:{show:!1,scroll:!1,html:"",className:"",style:0},body:{scroll:{axis:"both"},content:{type:"",src:"",data:""},className:"",style:0},overlay:{show:!1,html:""},footer:{show:!1,scroll:!1,html:"",className:"",style:0},onSize:0,onInitialize:0,onCreate:0,onBeforeDestroy:0,onDestroy:0,width:0,height:0,_sizing:"",_beforeBody:0,_afterBody:0,_onSetSize:0,_panelType:"panelCard",_name:"",_title:"",_w:0,_h:0}),"undefined"!=typeof e.theme&&A5.themes.assign(this,e.theme,"panelCard"),$u.o.assign(this,e),A5.overrides.assign(this,"panelCard",this.override)},create:function(){if(this._created)return $(this.contId);var e="undefined"!=typeof arguments[0]&&arguments[0],t="undefined"!=typeof arguments[1]&&arguments[1],i=""!=this.contId,s=!1;if(t){if(this.contId=e,s=document.createElement("div"),s.id=this.contId,"auto-create-destroy"==this.renderMode||"auto-create"==this.renderMode||"programmatic"==this.renderMode)return s.innerHTML=this.placeholderHTML,s}else if(i&&(s=$(this.contId)),0==s){if(e)if(this.contId=e,$(this.contId))var s=$(this.contId);else{var s=document.createElement("div");s.id=this.contId}else{this.contId=A5.u.getUniqueId();var s=document.createElement("div");s.id=this.contId}i=!1}i||(s.className=this.className,s.style.position="relative"),s.innerHTML="";var a=document.createElement("div");if(a.id=this.contId+".HEADER",a.className=this.header.className,"string"!=typeof this.header.style&&"object"!=typeof this.header.style||$ss(a,this.header.style),a.innerHTML=this._parseHTML(this.header.html),""==a.style.overflow&&(a.style.overflow="hidden"),this.header.show||(a.style.display="none"),a.style.position="relative",this.header.scroll&&(a.style.overflow="auto","object"==typeof this.header.scroll?("undefined"==typeof this.header.scroll.theme&&(this.header.scroll.theme=this.theme),A5.u.drag.add(a,"scroll",this.header.scroll)):A5.u.drag.add(a,"scroll",{axis:"both",theme:this.theme})),s.appendChild(a),this._beforeBody.constructor==Function&&this._beforeBody(s,n),"panelCard"==this._panelType)if("url"==this.body.content.type){var n=document.createElement("iframe");n.id=this.contId+".BODY","string"!=typeof this.body.style&&"object"!=typeof this.body.style||$ss(n,this.body.style),n.frameBorder="0",n.border="0",n.style.padding="0px",n.style.width="100%",document.all||(n.style.marginBottom="-5px");var o="",r="";o=this.body.content.src.constructor==Function?this.body.content.src.call(this):this.body.content.src,r=this.body.content.data.constructor==Function?this.body.content.data.call(this):this.body.content.data,""!=r&&(o+=r),n.src=o}else{var n=document.createElement("div");n.id=this.contId+".BODY";var l="";if("html"==this.body.content.type)l=this.body.content.src.constructor==Function?this.body.content.src.call(this):this.body.content.src;else if("callback"==this.body.content.type){var o="",r="";o=this.body.content.src.constructor==Function?this.body.content.src.call(this):this.body.content.src,r=this.body.content.data.constructor==Function?this.body.content.data.call(this):this.body.content.src,new $a.simple(o,{data:r,handleGeneric:!0,method:"get"})}n.innerHTML=this._parseHTML(l),"string"!=typeof this.body.style&&"object"!=typeof this.body.style||$ss(n,this.body.style),n.style.position="relative",this.body.scroll&&(n.style.overflow="auto","object"==typeof this.body.scroll?("undefined"==typeof this.body.scroll.theme&&(this.body.scroll.theme=this.theme),A5.u.drag.add(n,"scroll",this.body.scroll)):A5.u.drag.add(n,"scroll",{axis:"both",theme:this.theme}))}else{var n=document.createElement("div");n.id=this.contId+".BODY","string"!=typeof this.body.style&&"object"!=typeof this.body.style||$ss(n,this.body.style),n.style.overflow="hidden",n.style.position="relative","panelLayout"==this._panelType&&(n.innerHTML='<div id="'+this.contId+'.BODYINNER" style="position: absolute; left: 0px; top: 0px;"><div id="'+this.contId+'.DOCKOVERLAY" class="'+this.dock.flowLock.className+'" style="position: absolute; left: 0px; top: 0px; display: none; z-index: 4;"></div></div>',$e.add(this.contId+".DOCKOVERLAY",A5.d.evnts.click,function(e,t){t.hideDock()},this))}n.className=this.body.className,s.appendChild(n);var d=document.createElement("div");d.id=this.contId+".FOOTER",d.className=this.footer.className,"string"!=typeof this.footer.style&&"object"!=typeof this.footer.style||$ss(d,this.footer.style),d.innerHTML=this._parseHTML(this.footer.html),""==d.style.overflow&&(d.style.overflow="hidden"),this.footer.show||(d.style.display="none"),d.style.position="relative",this.footer.scroll&&(d.style.overflow="auto","object"==typeof this.footer.scroll?("undefined"==typeof this.footer.scroll.theme&&(this.footer.scroll.theme=this.theme),A5.u.drag.add(d,"scroll",this.footer.scroll)):A5.u.drag.add(d,"scroll",{axis:"both",theme:this.theme})),s.appendChild(d);var h=document.createElement("div");h.id=this.contId+".OVERLAY",h.innerHTML=this._parseHTML(this.overlay.html),this.overlay.show||(h.style.display="none"),s.appendChild(h),this._afterBody.constructor==Function&&this._afterBody(s,n,a,d),A5.flags.supportsTouch&&$e.add(s,"touchmove",function(e){var t=$e.getTouches(e),i=!0;t&&t.length&&t.length>1&&(i=!1),i&&$e.preventDefault(e)});var c=$gs(s);return this._ieCludge||c.search("box-sizing:")!=-1||$ss(s,c+" box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"),c=$gs(n),this._ieCludge||c.search("box-sizing:")!=-1||$ss(n,c+" box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"),this.onCreate.constructor==Function&&this.onCreate.call(this,s,n,a,d),this._created=!0,s},destroy:function(){if(this.onBeforeDestroy.constructor==Function&&this.onBeforeDestroy.call(this),"panelCard"!=this._panelType)for(var e=0;e<this.panels.length;e++)this.panels[e].src.destroy();A5.u.drag.remove(this.contId+".FOOTER","scroll"),A5.u.drag.remove(this.contId+".BODY","scroll"),A5.u.drag.remove(this.contId+".FOOTER","scroll");var t=$(this.contId),i=t.parentElement;"self"==this._sizing?$e.remove(t,"a5resize",this._sizeEle):"parent"==this._sizing?$e.remove(t.parentNode,"a5resize",this._sizeEle):"window"==this._sizing&&(A5.flags.isMobile?($e.remove(window,"orientationchange",this._sizeWindow),A5.flags.iOSVersion==-1&&$e.remove(window,"resize",this._sizeWindow)):$e.remove(window,"resize",this._sizeWindow)),t.innerHTML=this.placeholderHTML,this._created=!1,this._w=0,this._h=0,this.onDestroy.constructor==Function&&this.onDestroy.call(this),$e.execute(i,"a5paneldestroy")},bindSize:function(e){if(!$(this.contId))return!1;var t=$(this.contId);"self"==e?($e.add(t,"a5resize",this._sizeEle,this),this._sizeEle.call(t,{},this)):"parent"==e?($e.add(t.parentNode,"a5resize",this._sizeEle,this),this._sizeEle.call(t.parentNode,{},this)):"window"==e&&(document.body.style.margin="0px",document.body.style.padding="0px",A5.flags.isMobile?($e.add(window,"orientationchange",this._sizeWindow,this,!0),A5.flags.iOSVersion==-1&&$e.add(window,"resize",this._sizeWindow,this,!0)):$e.add(window,"resize",this._sizeWindow,this,!0),document.body.style.overflow="hidden",this._sizeWindowComplete()),this._sizing=e},refresh:function(){this.setSize(this._w,this._h)},resize:function(){if(!$(this.contId))return!1;var e=$(this.contId);"self"==this._sizing?this._sizeEle.call(e,{},this):"parent"==this._sizing?this._sizeEle.call(e.parentNode,{},this):"window"==this._sizing&&this._sizeWindowComplete()},setSize:function(e,t){if(this._created){var i=!!arguments[2]&&arguments[2],s=!arguments[3]||arguments[3];if(i&&this._w==e&&this._h==t)return!1;var a=$(this.contId),n=$(this.contId+".BODY");if(0==a||0==n)return!1;a.style.height="";var o=$gs(a),r=0;if(this._ieCludge&&a.currentStyle["padding-right"]?r=A5.u.convertUnits($u.s.toNum(a.currentStyle["padding-right"]),$u.s.aTrim(a.currentStyle["padding-right"]," 1234567890."),"px")+A5.u.convertUnits($u.s.toNum(a.currentStyle["padding-left"]),$u.s.aTrim(a.currentStyle["padding-left"]," 1234567890."),"px")+A5.u.convertUnits($u.s.toNum(a.currentStyle["border-right-width"]),$u.s.aTrim(a.currentStyle["border-right-width"]," 1234567890."),"px")+A5.u.convertUnits($u.s.toNum(a.currentStyle["border-left-width"]),$u.s.aTrim(a.currentStyle["border-left-width"]," 1234567890."),"px"):o.search("box-sizing:")==-1&&$ss(a,o+" box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"),e>=0){var l=a.style.marginLeft,d=a.style.marginRight;""==l&&(l=a.style.margin),""==d&&(d=a.style.margin),r+=""==l?0:A5.u.convertUnits($u.s.toNum(l),$u.s.aTrim(l," 1234567890."),"px"),r+=""==d?0:A5.u.convertUnits($u.s.toNum(d),$u.s.aTrim(d," 1234567890."),"px"),a.style.width=e-r+"px",this._w=e,this.width=e}if(t>=0){
o=$gs(n),r=0,this._ieCludge&&n.currentStyle["padding-top"]?r=A5.u.convertUnits($u.s.toNum(n.currentStyle["padding-top"]),$u.s.aTrim(n.currentStyle["padding-top"]," 1234567890."),"px")+A5.u.convertUnits($u.s.toNum(n.currentStyle["padding-bottom"]),$u.s.aTrim(n.currentStyle["padding-bottom"]," 1234567890."),"px")+A5.u.convertUnits($u.s.toNum(n.currentStyle["border-top-width"]),$u.s.aTrim(n.currentStyle["border-top-width"]," 1234567890."),"px")+A5.u.convertUnits($u.s.toNum(n.currentStyle["border-bottom-width"]),$u.s.aTrim(n.currentStyle["border-bottom-width"]," 1234567890."),"px"):o.search("box-sizing:")==-1&&$ss(n,o+" box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;");var h=a.style.marginTop,c=a.style.marginBottom;""==h&&(h=a.style.margin),""==c&&(c=a.style.margin),r+=""==h?0:A5.u.convertUnits($u.s.toNum(h),$u.s.aTrim(h," 1234567890."),"px"),r+=""==c?0:A5.u.convertUnits($u.s.toNum(c),$u.s.aTrim(c," 1234567890."),"px"),n.style.height=t-(a.offsetHeight-n.offsetHeight)-r+"px",this._h=t,this.height=t}$e.execute(n,"a5resize"),this._onSetSize.constructor==Function&&this._onSetSize.call(this),this.onSize.constructor==Function&&s&&this.onSize.call(this,{width:this._w,height:this._h})}else{var a=$(this.contId);a&&(a.style.width=e+"px",a.style.height=t+"px")}},setDisplay:function(e,t){if(this._created&&(e=e.toLowerCase(),("header"==e||"footer"==e||"overlay"==e)&&this[e].show!=t)){this[e].show=t;var i=$(this.getPanelId(e));t?i.style.display="":i.style.display="none",this.setSize(this._w,this._h,!1,!1)}},getPanelId:function(e){e="undefined"!=typeof arguments[0]?arguments[0].toString():"",e=e.toLowerCase();var t=this.contId;return"header"==e?t+=".HEADER":"body"==e?t+=".BODY":"footer"==e?t+=".FOOTER":"overlay"==e&&(t+=".OVERLAY"),t},_sizeEle:function(e,t){this&&t.setSize(this.offsetWidth,this.offsetHeight,!0)},_sizeWindow:function(e){if(A5.flags.iOSVersion!=-1&&(A5.PanelCard._iOSAE=!1,document.activeElement)){var t=document.activeElement.tagName.toLowerCase(),i=String(document.activeElement.type).toLowerCase();("input"==t&&$u.a.find(["button","radio","checkbox","submit","reset","image","file","range"],i)||"textarea"==t||"select"==t)&&(A5.PanelCard._iOSAE=document.activeElement,A5.PanelCard._iOSSel=A5.edit.getSelection(document.activeElement),document.activeElement.blur())}var s=this;clearTimeout(this._swTO),this._swTO=setTimeout(function(){s._sizeWindowComplete(),delete s},50)},_sizeWindowComplete:function(){var e,t;"undefined"!=typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(e=document.getElementsByTagName("body")[0].clientWidth,t=document.getElementsByTagName("body")[0].clientHeight),this.setSize(e,t,!0),A5.flags.iOSVersion!=-1&&A5.PanelCard._iOSAE&&(A5.PanelCard._iOSAE.focus(),A5.edit.getSelection(A5.PanelCard._iOSAE,A5.PanelCard._iOSSel.start,A5.PanelCard._iOSSel.end))},_parseHTML:function(e){return e=e.split("{panel.id}").join(this.contId),e=e.split("{panel.name}").join(this._name),e=e.split("{panel.title}").join(this._title)},_getPanelEleById:function(e,t){var i=0,s=!1;if("undefined"!=typeof t.tagName)var a=t.id,n=t;else{var a=t.src.contId,n=t._ele;"panelCard"==t.src._panelType&&(s=!0)}if(e=e.split("{panel.id}").join(a),arguments[2]||s){i=n.getElementsByTagName("*");for(var o=0;o<i.length;o++)if(i[o].id==e)return i[o]}else{i=n.firstChild.getElementsByTagName("*");for(var o=0;o<i.length;o++)if(i[o].id==e)return i[o];i=n.lastChild.previousSibling.getElementsByTagName("*");for(var o=0;o<i.length;o++)if(i[o].id==e)return i[o]}return!1},_gDef:function(){for(var e=0;e<arguments.length;e++)if(""!=arguments[e]&&0!=arguments[e]&&null!=arguments[e])return arguments[e];return""}}),A5.PanelNavigator=Class.create(A5.PanelCard,{_initLow:function(e,t){this.panels=e,$u.o.assign(this,{type:"",flow:"ltr",theme:"",override:"base",loopNavigate:!1,placeholderHTML:"",className:"",header:{show:!1,html:"",className:"",style:0},body:{className:"",style:0},overlay:{show:!1,html:""},footer:{show:!1,html:"",className:"",style:0},indicator:{show:!1,location:"bottom",className:"",panelClassName:"",panelSelectedClassName:""},controls:{prev:{has:!1,id:"{panel.id}.CTRL.PREV",settings:{layout:"text",html:"Back"}},next:{has:!1,id:"{panel.id}.CTRL.NEXT",settings:{layout:"text",html:"Next"}},back:{has:!1,id:"{panel.id}.CTRL.BACK",settings:{layout:"text",html:"Back"}},forward:{has:!1,id:"{panel.id}.CTRL.FORWARD",settings:{layout:"text",html:"Forward"}},panels:[]},animation:{type:"slide",duration:400},state:{activePanel:"",hasPrevPanel:!1,prevPanelIndex:0,prevPanel:"",hasNextPanel:!1,nextPanelIndex:0,nextPanel:"",history:[],historyIndex:-1,hasHistoryBack:!1,historyBack:"",hasHistoryForward:!1,historyForward:""},onSize:0,onInitialize:0,onCreate:0,onBeforeDestroy:0,onDestroy:0,onPanelActivate:0,onBeforePanelActivate:0,onPanelActivateComplete:0,_isRemPanel:!1,_isHistoryNav:!1,_sizing:"",_panelIndx:-1,_beforeBody:0,_overrideBeforeActivate:!1,_panelType:"panelNavigator",_name:"",_title:"",_pOff:"-"+Math.max(screen.width+100,screen.height+100)+"px"}),"tabband"==t.type?($u.o.assign(t,{location:"top",tabband:{location:"",theme:""}},!0),""==t.tabband.location&&(t.tabband.location=t.location),""==t.tabband.theme&&("bottom"==t.tabband.location?t.tabband.theme=t.theme+":bottom":t.tabband.theme=t.theme)):"carousel"==t.type&&$u.o.assign(t,{swipe:{allow:!0,velocity:.5}},!0),"undefined"!=typeof t.theme&&A5.themes.assign(this,t.theme,"panelNavigator"),$u.o.assign(this,t),A5.overrides.assign(this,"panelNavigator",this.override)},refresh:function(){this.setSize(this._w,this._h)},getPanel:function(e){for(var t=e.split(":"),i={},s=this,a=-1;t.length>0;){if(a=s._getPanelIndx(t.shift()),a==-1)return!1;i=s.panels[a],s=i.src}return i},setActivePanel:function(e){window.event&&("touchend"!=window.event.type&&"touchstart"!=window.event.type||$e.preventDefault(window.event));for(var t=[],i=this,s=0;s<arguments.length;s++)t.push(arguments[s]);setTimeout(function(){i._setActivePanel.apply(i,t),delete i,delete t},0)},_setActivePanel:function(e){if(""==e)return!1;var t=e.split(":");e=t.shift();var i=this._getPanelIndx(e);if(i==-1||0==this.panels.length)return!1;var s="undefined"!=typeof arguments[1]?arguments[1]:0,a=!0,n=!0;if("boolean"==typeof s?(a=s,n=!1,s=0):"undefined"!=typeof arguments[2]&&(a=arguments[2]),this.onBeforePanelActivate.constructor==Function&&!this._overrideBeforeActivate){var o=this.onBeforePanelActivate();if(0==o)return n&&(this._overrideBeforeActivate=!0,this._panelIndx=i,s=Math.abs(s-1),1==s&&(s=0),this.setActivePanel(this.state.activePanel,s),this._overrideBeforeActivate=!1),this._isHistoryNav=!1,!1}var r=$(this.contId+".BODY");if("auto-create"!=this.panels[i].src.renderMode.substr(0,11)||this.panels[i].src._created?i!=this._panelIndx&&this.panels[i].src.setSize(r.clientWidth,r.clientHeight,!0):this._pToCreate=i,0==t.length||"panelNavigator"!=this.panels[i].src._panelType&&"panelLayout"!=this.panels[i].src._panelType||this.panels[i].src.setActivePanel(t.join(":"),$if(i==this._panelIndx&&a,!0,!1)),i==this._panelIndx){for(var l=!1,d=0;d<this.controls.panels.length;d++)this.controls.panels[d]._b&&(l=!1,this.controls.panels[d].panel==this.state.activePanel&&(l=!0),this.controls.panels[d]._b.setValue(l));return this._isHistoryNav=!1,!1}this._panelIndx!=-1&&"auto-create-destroy"==this.panels[this._panelIndx].src.renderMode&&(this._pToDestroy=this._panelIndx);var h=$(this.panels[i]._id),c=this._panelIndx!=-1&&$(this.panels[this._panelIndx]._id),u=i-this._panelIndx;this.loopNavigate&&(0==i&&this._panelIndx==this.panels.length-1||0==this._panelIndx&&i==this.panels.length-1)&&(u*=-1);var f=this.animation.type;"slide"==f&&("ttb"==this.flow||"btt"==this.flow?("btt"==this.flow&&(u*=-1),f=u>0?"slide-up":"slide-down"):("rtl"==this.flow&&(u*=-1),f=u>0?"slide-left":"slide-right")),this._isHistoryNav||(this.state.historyIndex++,this.state.history.splice(this.state.historyIndex),this.state.history.push(e)),this._isHistoryNav=!1,this._panelIndx=i,this._setPanelState(),"tabband"==this.type?this._tbSet&&this._tabband.select(e):"carousel"==this.type&&this._setPanelInfo(r),this.onPanelActivate.constructor==Function&&this.onPanelActivate(),this._transEle(h,c,f,s,a),this.controls.prev.has&&(this.state.hasPrevPanel?this.controls.prev._b.setDisplay(!0):this.controls.prev._b.setDisplay(!1)),this.controls.next.has&&(this.state.hasNextPanel?this.controls.next._b.setDisplay(!0):this.controls.next._b.setDisplay(!1)),this.controls.back.has&&(this.state.hasHistoryBack?this.controls.back._b.setDisplay(!0):this.controls.back._b.setDisplay(!1)),this.controls.forward.has&&(this.state.hasHistoryForward?this.controls.forward._b.setDisplay(!0):this.controls.forward._b.setDisplay(!1));for(var l=!1,d=0;d<this.controls.panels.length;d++)this.controls.panels[d]._b&&(l=!1,this.controls.panels[d].panel==this.state.activePanel&&(l=!0),this.controls.panels[d]._b.setValue(l))},firstPanel:function(e){this._panelIndx>0&&this.setActivePanel(this.panels[0].name,e)},prevPanel:function(e){this.state.hasPrevPanel&&this.setActivePanel(this.state.prevPanel,e)},nextPanel:function(e){this.state.hasNextPanel&&this.setActivePanel(this.state.nextPanel,e)},lastPanel:function(e){this._panelIndx<this.panels.length-1&&this.setActivePanel(this.panels[this.panels.length-1].name,e)},historyFirst:function(e){return!(this.state.historyIndex<=0)&&(this.state.historyIndex=0,this._isHistoryNav=!0,void this.setActivePanel(this.state.history[this.state.historyIndex],e))},historyBack:function(e){return!(this.state.historyIndex<=0)&&(this.state.historyIndex--,this._isHistoryNav=!0,void this.setActivePanel(this.state.history[this.state.historyIndex],e))},historyForward:function(e){return!(this.state.historyIndex>this.state.history.length-2)&&(this.state.historyIndex++,this._isHistoryNav=!0,void this.setActivePanel(this.state.history[this.state.historyIndex],e))},historyLast:function(e){return!(this.state.historyIndex>this.state.history.length-2)&&(this.state.historyIndex=this.state.history.length-1,this._isHistoryNav=!0,void this.setActivePanel(this.state.history[this.state.historyIndex],e))},addPanel:function(e){this.panels.push(e);var t=$(this.contId+".BODY");this._addPanel(e,t,!1),this.indicator.show&&this._renderIndc($(this.contId+".INDICATOR")),"tabband"==this.type&&this._tabband.add({html:this.panels[this.panels.length-1].title,value:this.panels[this.panels.length-1].name,close:this.panels[this.panels.length-1].close}),this._setPanelState(),this._setPanelInfo(t),1==this.panels.length&&this.setActivePanel(e.name,!1)},insertPanel:function(e,t){var i=this._getPanelIndx(t);i==-1&&this.addPanel(e),i<=this._panelIndx&&this._panelIndx++,this.panels.splice(i,0,e);var s=$(this.contId+".BODY"),a=$(this.panels[i]._id);this._addPanel(e,s,a),this.indicator.show&&this._renderIndc($(this.contId+".INDICATOR")),"tabband"==this.type&&this._tabband.insert({html:this.panels[i].title,value:this.panels[i].name,close:this.panels[i].close},this.panels[i+1].name),this._setPanelState(),this._setPanelInfo(s),1==this.panels.length&&this.setActivePanel(e.name,!1)},removePanel:function(e){var t=this._getPanelIndx(e);if(t==-1)return!1;"tabband"==this.type&&this._tabband.remove(this.panels[t].name),this._isRemPanel=!0,this.panels[t].src.destroy(),this._isRemPanel=!1;var i=$(this.contId+".BODY"),s=$(this.panels[t]._id);i.removeChild(s),this.panels.splice(t,1),t==this._panelIndx?(this._panelIndx=-1,this.state.hasPrevPanel&&this.setActivePanel(this.state.prevPanel,!1),this.state.hasNextPanel&&this.setActivePanel(this.state.nextPanel,!1)):t<this._panelIndx&&this._panelIndx--,this.indicator.show&&this._renderIndc($(this.contId+".INDICATOR")),this._setPanelState(),this._setPanelInfo(i)},getState:function(){var e={type:this._panelType,panels:[]};$u.o.assign(e,this.state);for(var t=0;t<this.panels.length;t++)"panelCard"!=this.panels[t].src._panelType?e.panels[t]=this.panels[t].src.getState():e.panels[t]={type:"panelCard"};return e},setState:function(e){this.setActivePanel(e.activePanel,!1);for(var t=0;t<this.panels.length;t++)"panelCard"!=this.panels[t].src._panelType&&this.panels[t].src.setState(e.panels[t])},_afterBody:function(e,t,i,s){$e.add(t,"a5transcomplete",this._activeComp,this,!0),$e.add(t,"a5paneldestroy",this._childDestroy,this,!0),this._panelIndx=0,this._pCount=0;for(var a={},n=0;n<this.panels.length;n++)if(a=this.panels[n],0==n){var o=this._addPanel(a,t,!1,!0);o.style.top="0px",o.style.left="0px"}else this._addPanel(a,t,!1);if(this.indicator.show){var r=document.createElement("div");r.id=this.contId+".INDICATOR",r.className=this.indicator.className,$e.add(r,A5.d.evnts.click,this._indClick,this);var l=this.indicator.location;if("#"==l[0]?this._indLoc="element":(l=l.toLowerCase(),"auto"==l&&(l="ttb"==this.flow||"btt"==this.flow?"right":"bottom"),this._indLoc=l,$ss(r,"position: absolute; "+l+": 0px; z-index: 4; text-align: center;")),this._renderIndc(r),"element"==this._indLoc){var d=this._getPanelEleById(l.substr(1),e);d.appendChild(r)}else t.appendChild(r),"left"==this._indLoc||"right"==this._indLoc?(r.style.marginTop="-"+r.offsetHeight/2+"px",r.style.top="50%"):(r.style.marginLeft="-"+r.offsetWidth/2+"px",r.style.left="50%")}if(0==this.panels.length?this._panelIndx=-1:(this.state.history=[this.panels[this._panelIndx].name],this.state.historyIndex=0),this._setPanelState(),t.style.padding="0px","tabband"==this.type){var h=document.createElement("div");h.id=this.contId+".TABBAND",$e.add(h,"a5setactivepanel",this._tbChange,this),$e.add(h,"a5removepanel",this._tbRemove,this),"bottom"==this.location?e.insertBefore(h,s):e.insertBefore(h,t),this.tabband.onRemove=function(e){$sa(this._ele,"A5REMNAVPANEL",e.value),$e.execute(this._ele,"a5removepanel")},this._tabband=new A5.TabBand(h,[],this.tabband),this._tabband.onChange=function(e){$sa(this._ele,"A5NEWNAVPANEL",e.value),$e.execute(this._ele,"a5setactivepanel")},this._tbSet=!0;for(var n=0;n<this.panels.length;n++)this._tabband._add({html:this.panels[n].title,value:this.panels[n].name,close:this.panels[n].close});this._tabband._firstTabIndx=this._tabband._getFirstAvailableTab(),this._tabband._lastTabIndx=this._tabband._getLastAvailableTab(),this._tabband.refresh(),this._tabband.select(this.state.activePanel)}else if("carousel"==this.type){this._setPanelInfo(t);var c="x";"ttb"!=this.flow&&"btt"!=this.flow||(c="y");var u="$sa(this,'A5PanelNavSwipe','none');\n$e.execute(this,'a5carouselend');";if(this.swipe.allow)var u=["var d = arguments[0];","vX = $u.n.round((d.startX-d.x)/Math.round(d.endT-d.startT),2);","vY = $u.n.round((d.startY-d.y)/Math.round(d.endT-d.startT),2);","var swipe = 'none';","if(Math.max(Math.abs(vX),Math.abs(vY)) > "+this.swipe.velocity+"){"," if(Math.abs(vX) > Math.abs(vY)){","  if(vX > 0) swipe = 'left';","  else swipe = 'right';"," } else{","  if(vX > 0) swipe = 'up';","  else swipe = 'down';"," }","}","$sa(this,'A5PanelNavSwipe',swipe);","$e.execute(this,'a5carouselend');"].join("\n");A5.u.drag.add(t,"custom",{axis:c,stopPropagation:!0,animate:A5.u.css.supportsTransition&&"none"!=this.animation.type,tolerance:15,onStart:function(e,t){var i=$ga(this,"A5PanelNavData").split(","),s=$(i[1]),a=$(i[2]);e._d={ele:$(i[0]),sp:"left",ap:"top",w:this.offsetWidth,h:this.offsetHeight},"ttb"==i[3]||"btt"==i[3]?(e._d.sp="top",e._d.ap="left","btt"==i[3]?(e._d.bEle=a,e._d.aEle=s):(e._d.bEle=s,e._d.aEle=a)):"rtl"==i[3]?(e._d.bEle=a,e._d.aEle=s):(e._d.bEle=s,e._d.aEle=a),t.animate?(0!=e._d.bEle&&(e._d.bEle.style.top="0px",e._d.bEle.style.left="0px"),0!=e._d.aEle&&(e._d.aEle.style.top="0px",e._d.aEle.style.left="0px"),"left"==e._d.sp?(0!=e._d.bEle&&(e._d.bEle.style[A5.u.css.properties.transformDOM]="translate(-100%,0px)"),0!=e._d.aEle&&(e._d.aEle.style[A5.u.css.properties.transformDOM]="translate(100%,0px)")):(0!=e._d.bEle&&(e._d.bEle.style[A5.u.css.properties.transformDOM]="translate(0px,-100%)"),0!=e._d.aEle&&(e._d.aEle.style[A5.u.css.properties.transformDOM]="translate(0px,100%)"))):(0!=e._d.bEle&&(e._d.bEle.style[e._d.sp]="-100%",e._d.bEle.style[e._d.ap]="0px"),0!=e._d.aEle&&(e._d.aEle.style[e._d.sp]="100%",e._d.aEle.style[e._d.ap]="0px")),$e.execute(this,"a5carouselstart")},onMove:function(e,t,i){if("left"==e._d.sp||"right"==e._d.sp)var s=e._d.w,a=e.customMoveX;else var s=e._d.h,a=e.customMoveY;a=Math.max(Math.min(a,s),s*-1),t.animate?"left"==e._d.sp?(0!=e._d.ele&&(e._d.ele.style[A5.u.css.properties.transformDOM]="translate("+a+"px,0px)"),0!=e._d.bEle&&(e._d.bEle.style[A5.u.css.properties.transformDOM]="translate("+(a-s)+"px,0px)"),0!=e._d.aEle&&(e._d.aEle.style[A5.u.css.properties.transformDOM]="translate("+(s+a)+"px,0px)")):(0!=e._d.ele&&(e._d.ele.style[A5.u.css.properties.transformDOM]="translate(0px,"+a+"px)"),0!=e._d.bEle&&(e._d.bEle.style[A5.u.css.properties.transformDOM]="translate(0px,"+(a-s)+"px)"),0!=e._d.aEle&&(e._d.aEle.style[A5.u.css.properties.transformDOM]="translate(0px,"+(s+a)+"px)")):(0!=e._d.ele&&(e._d.ele.style[e._d.sp]=a+"px"),0!=e._d.bEle&&(e._d.bEle.style[e._d.sp]=a-s+"px"),0!=e._d.aEle&&(e._d.aEle.style[e._d.sp]=s+a+"px"))},onEnd:Function(u)}),$e.add(t,"a5carouselstart",this._cStart,this,!0),$e.add(t,"a5carouselend",this._cEnd,this,!0)}var f=!1;this.controls.prev.has&&(f=this._getPanelEleById(this.controls.prev.id,e,!0),f&&(this.controls.prev._b=new A5.Button(this.controls.prev.settings),this.controls.prev._b.bind(f),0!=this.panels.length&&this.loopNavigate||(f.style.display="none"),$e.add(f,A5.d.evnts.click,this.prevPanel,this,!0))),this.controls.next.has&&(f=this._getPanelEleById(this.controls.next.id,e,!0),f&&(this.controls.next._b=new A5.Button(this.controls.next.settings),this.controls.next._b.bind(f),0==this.panels.length&&(f.style.display="none"),$e.add(f,A5.d.evnts.click,this.nextPanel,this,!0))),this.controls.back.has&&(f=this._getPanelEleById(this.controls.back.id,e,!0),f&&(this.controls.back._b=new A5.Button(this.controls.back.settings),this.controls.back._b.bind(f),f.style.display="none",$e.add(f,A5.d.evnts.click,this.historyBack,this,!0))),this.controls.forward.has&&(f=this._getPanelEleById(this.controls.forward.id,e,!0),f&&(this.controls.forward._b=new A5.Button(this.controls.forward.settings),this.controls.forward._b.bind(f),f.style.display="none",$e.add(f,A5.d.evnts.click,this.historyForward,this,!0)));for(var n=0;n<this.controls.panels.length;n++)f=this._getPanelEleById(this.controls.panels[n].id,e,!0),f&&(this.controls.panels[n]._b=new A5.ButtonToggle(this.controls.panels[n].settings),this.controls.panels[n]._b.bind(f),this.controls.panels[n].panel==this.state.activePanel&&this.controls.panels[n]._b.setValue(!0,f),$e.add(f,A5.d.evnts.click,this._activatePanel,this),$sa(f,"A5LinkedPanel",this.controls.panels[n].panel))},_addPanel:function(e,t,i){var s="undefined"!=typeof arguments[3]&&arguments[3];return $u.o.assign(e,this._pDefaults,!0),e.src._name=e.name,e.src._title=e.title,e._id=this.contId+".PANEL."+this._pCount,tEle=e.src.create(e._id,!s),tEle.style.position="absolute",tEle.style.top="",tEle.style.top=this._pOff,tEle.style.left=this._pOff,tEle.style.width="100px",this._transClearEvnt(tEle),i?t.insertBefore(tEle,i):t.appendChild(tEle),e._ele=tEle,e.src._created&&this._panelControls(e),this._pCount++,tEle},_childDestroy:function(){if(!this._isRemPanel){for(var e=$(this.contId+".BODY"),t=this.panels.length-1;t>=0;t--)0==$(this.panels[t]._id+".BODY")&&("tabband"==this.type&&this._tabband.remove(this.panels[t].name),e.removeChild($(this.panels[t]._id)));this.panels=[]}},_panelControls:function(e){var t=!1;e.controls.prev.has&&(t=this._getPanelEleById(e.controls.prev.id,e),t&&(e.controls.prev._b=new A5.Button(e.controls.prev.settings),e.controls.prev._b.bind(t),$e.add(t,A5.d.evnts.click,this.prevPanel,this,!0))),e.controls.next.has&&(t=this._getPanelEleById(e.controls.next.id,e),t&&(e.controls.next._b=new A5.Button(e.controls.next.settings),e.controls.next._b.bind(t),$e.add(t,A5.d.evnts.click,this.nextPanel,this,!0)))},_renderIndc:function(e){var t=0;e.innerHTML="";for(var i=0;i<this.panels.length;i++)t=document.createElement("div"),i==this._panelIndx?t.className=this._gDef(this.panels[i].indicator.className,this.indicator.panelClassName)+" "+this._gDef(this.panels[i].indicator.selectedClassName,this.indicator.panelSelectedClassName):t.className=this._gDef(this.panels[i].indicator.className,this.indicator.panelClassName),e.appendChild(t),"left"!=this._indLoc&&"right"!=this._indLoc||e.appendChild(document.createElement("br"))},_activatePanel:function(e,t){panel=$ga(this,"A5LinkedPanel"),t.setActivePanel(panel)},_onSetSize:function(){var e=$(this.contId+".BODY");if(this._panelIndx!=-1&&this.panels[this._panelIndx].src.setSize(e.clientWidth,e.clientHeight,!0),"tabband"==this.type&&this._tabband.refresh(),"element"!=this._indLoc){var t=$(this.contId+".INDICATOR");t&&("left"==this._indLoc||"right"==this._indLoc?t.style.marginTop="-"+t.offsetHeight/2+"px":t.style.marginLeft="-"+t.offsetWidth/2+"px")}},_getPanelIndx:function(e){if("number"==typeof e)return e;for(var t=0;t<this.panels.length;t++)if(this.panels[t].name==e)return t;return-1},_tbChange:function(e,t){t._tbSet=!1,t.setActivePanel($ga(this,"A5NEWNAVPANEL")),t._tbSet=!0},_tbRemove:function(e,t){var i=$ga(this,"A5REMNAVPANEL");setTimeout(function(){t._tbRemoveComplete(i),delete t},0)},_tbRemoveComplete:function(e){this._tbRem||(this._tbRem=!0,this.removePanel(e),this._tbRem=!1)},_indClick:function(e,t){if(this.offsetHeight>this.offsetWidth)var i=e.clientY-$gpt(this)-this.offsetHeight/2;else var i=e.clientX-$gpl(this)-this.offsetWidth/2;i>0?t.nextPanel():t.prevPanel()},_cStart:function(){var e=$(this.contId+".BODY");this.state.hasPrevPanel&&this.panels[this.state.prevPanelIndex].src.setSize(e.clientWidth,e.clientHeight,!0),this.state.hasNextPanel&&this.panels[this.state.nextPanelIndex].src.setSize(e.clientWidth,e.clientHeight,!0)},_cEnd:function(){var e=$(this.contId+".BODY"),t=$ga(e,"A5PanelNavData").split(","),i=$ga(e,"A5PanelNavSwipe"),s=$(t[0]),a=$(t[1]),n=$(t[2]),o=!1;if("ttb"==this.flow||"btt"==this.flow){var r=$gpt(s.parentNode),l=$gpt(s)-r,d=e.offsetHeight;if(a&&Math.abs($gpt(a)-r)<d&&(o=a),n&&Math.abs($gpt(n)-r)<d&&(o=n),"ttb"==this.flow)var h="bottom",c="top";else var h="top",c="bottom"}else{var r=$gpl(s.parentNode),l=$gpl(s)-r,d=e.offsetWidth;if(a&&Math.abs($gpl(a)-r)<d&&(o=a),n&&Math.abs($gpl(n)-r)<d&&(o=n),"rtl"==this.flow)h="left",c="right";else var h="right",c="left"}var u=1/d*Math.abs(l);if(i==h&&this.state.hasPrevPanel)this._setActivePanel(this.state.prevPanel,u);else if(i==c&&this.state.hasNextPanel)this._setActivePanel(this.state.nextPanel,u);else if(Math.abs(l)>15)if(u>.5&&o){u=1-u;for(var f="",p=0;p<this.panels.length;p++)if(o.id==this.panels[p]._id){f=this.panels[p].name;break}0==u?this._setActivePanel(f,!1):this._setActivePanel(f,u)}else{var m=l,_="";"ttb"==this.flow||"btt"==this.flow?("btt"==this.flow&&(m*=-1),_=m>0?"slide-up":"slide-down"):("rtl"==this.flow&&(m*=-1),_=m>0?"slide-left":"slide-right"),1!=u||o||(u=0),this._transEle(s,o,_,u)}},_setPanelInfo:function(e){if(!this.panels[this._panelIndx])return!1;var t=[];t.push(this.panels[this._panelIndx]._id),this.state.hasPrevPanel?t.push(this.panels[this.state.prevPanelIndex]._id):t.push(""),this.state.hasNextPanel?t.push(this.panels[this.state.nextPanelIndex]._id):t.push(""),t.push(this.flow),$sa(e,"A5PanelNavData",t.join(","))},_setPanelState:function(){var e=this.state;e.activePanel="",e.hasPrevPanel=!1,e.prevPanel="",e.prevPanelIndex=-1,e.hasNextPanel=!1,e.nextPanel="",e.nextPanelIndex=-1,0!=this.panels.length&&(this.panels[this._panelIndx]&&(e.activePanel=this.panels[this._panelIndx].name),this._panelIndx>0?(e.hasPrevPanel=!0,e.prevPanelIndex=this._panelIndx-1,e.prevPanel=this.panels[e.prevPanelIndex].name):this.loopNavigate&&(e.hasPrevPanel=!0,e.prevPanelIndex=this.panels.length-1,e.prevPanel=this.panels[e.prevPanelIndex].name),this._panelIndx<=this.panels.length-2?(e.hasNextPanel=!0,e.nextPanelIndex=this._panelIndx+1,e.nextPanel=this.panels[e.nextPanelIndex].name):this.loopNavigate&&(e.hasNextPanel=!0,e.nextPanelIndex=0,e.nextPanel=this.panels[e.nextPanelIndex].name)),e.historyIndex>0?(e.hasHistoryBack=!0,e.historyBack=e.history[e.historyIndex-1]):(e.hasHistoryBack=!1,e.historyBack=""),e.historyIndex<e.history.length-1?(e.hasHistoryForward=!0,e.historyForward=e.history[e.historyIndex+1]):(e.hasHistoryForward=!1,e.historyForward="");var t=$(this.contId+".INDICATOR");if(t){for(var i=t.getElementsByTagName("div"),s=0;s<this.panels.length;s++)i[s].className=this._gDef(this.panels[s].indicator.className,this.indicator.panelClassName);0!=this.panels.length&&this.panels[this._panelIndx]&&(i[this._panelIndx].className=this._gDef(this.panels[this._panelIndx].indicator.className,this.indicator.panelClassName)+" "+this._gDef(this.panels[this._panelIndx].indicator.selectedClassName,this.indicator.panelSelectedClassName))}},_transEle:function(e,t,i){var s="undefined"!=typeof arguments[3]?arguments[3]:0,a="undefined"==typeof arguments[4]||arguments[4];if(1==s)return!1;var n="",o="",r=A5.u.css.properties.transform,l=A5.u.css.properties.transformDOM,d=A5.u.css.properties.transitionDOM;if(A5.u.css.supportsTransition&&"none"!=i){"slide-left"==i?(0==s&&(e.style[l]=A5.u.css.transform2D("100%","0px")),e.style.top="0px",e.style.left="0px",n=A5.u.css.transform2D("0px","0px"),o=A5.u.css.transform2D("-100%","0px")):"slide-right"==i?(0==s&&(e.style[l]=A5.u.css.transform2D("-100%","0px")),e.style.top="0px",e.style.left="0px",n=A5.u.css.transform2D("0px","0px"),o=A5.u.css.transform2D("100%","0px")):"slide-up"==i?(0==s&&(e.style[l]=A5.u.css.transform2D("0px","100%")),e.style.top="0px",e.style.left="0px",n=A5.u.css.transform2D("0px","0px"),o=A5.u.css.transform2D("0px","-100%")):"slide-down"==i?(0==s&&(e.style[l]=A5.u.css.transform2D("0px","-100%")),e.style.top="0px",e.style.left="0px",n=A5.u.css.transform2D("0px","0px"),o=A5.u.css.transform2D("0px","100%")):"fade"==i&&(r="opacity",l="opacity",e.style.opacity="0",e.style.top="1px",e.style.left="1px",n="1",o="0"),e.style[d]="",$sa(e,"A5PanelNavIsActive","true"),t&&(t.style[d]="",$sa(t,"A5PanelNavIsActive","false"));var h=this.animation.duration,c="ease-in-out";0!=s&&(h=Math.round(h*s),c="ease-out"),a?(e.offsetHeight,e.style[d]=r+" "+h+"ms "+c,e.style[l]=n):(e.style[l]=n,$e.execute(e.parentNode,"a5transcomplete")),t&&(a?(t.offsetHeight,t.style[d]=r+" "+h+"ms "+c,t.style[l]=o):t.style.top=this._pOff)}else t&&(t.style.top=this._pOff),e.style.top="0px",e.style.left="0px",$e.execute(e.parentNode,"a5transcomplete")},_transClearEvnt:function(e){$e.add(e,A5.u.css.properties.transitionEndEvent,Function("var e = arguments[0]; if(e.target.id != this.id) return true; if($ga(this,'A5PanelNavIsActive') == 'true'){$e.execute(this.parentNode,'a5transcomplete');}; this.style[A5.u.css.properties.transitionDOM] = ''; this.style[A5.u.css.properties.transformDOM] = ''; this.style.top = $if($ga(this,'A5PanelNavIsActive') == 'true','0px','"+this._pOff+"'); this.style.left = '0px';"))},_activeComp:function(e){if("number"==typeof this._pToDestroy&&(this.panels[this._pToDestroy].src.destroy(),this._pToDestroy=!1),"number"==typeof this._pToCreate){var t=$(this.contId+".BODY");this.panels[this._pToCreate].src.create(),this.panels[this._pToCreate].src.setSize(t.clientWidth,t.clientHeight,!0),this._panelControls(this.panels[this._pToCreate]),this._pToCreate=!1}this.onPanelActivateComplete.constructor==Function&&this.onPanelActivateComplete()},_pDefaults:{name:"",title:"",show:!0,close:!1,indicator:{className:"",selectedClassName:""},controls:{prev:{has:!1,id:"{panel.id}.CTRL.PREV",settings:{layout:"text",html:"Back"}},next:{has:!1,id:"{panel.id}.CTRL.NEXT",settings:{layout:"text",html:"Next"}}}}}),A5.PanelLayout=Class.create(A5.PanelCard,{_initLow:function(e,t){this.panels=e,$u.o.assign(this,{theme:"",override:"base",flow:"ltr",placeholderHTML:"",className:"",header:{show:!1,html:"",className:"",style:0},body:{className:"",ltrClassName:"",rtlClassName:"",ttbClassName:"",bttClassName:"",style:0},overlay:{show:!1,html:""},footer:{show:!1,html:"",className:"",style:0},dock:{method:"overlay",panel:{beforeClassName:"",afterClassName:""},flowLock:{has:!0,className:""}},controls:{prev:{has:!1,id:"{panel.id}.CTRL.PREV",settings:{layout:"text",html:"Back"}},next:{has:!1,id:"{panel.id}.CTRL.NEXT",settings:{layout:"text",html:"Next"}},dock:[]},animation:{type:"slide",duration:400},state:{activePanel:"",firstPanel:"",lastPanel:"",flowCollapsed:"",hasPrevPanel:!1,prevPanel:"",hasNextPanel:!1,nextPanel:"",hasDockPanel:!1,beforeDockPanels:[],afterDockPanels:[],dockPanelShown:!1,currentDockPanel:""},onSize:0,onInitialize:0,onCreate:0,onBeforeDestroy:0,onDestroy:0,onLayoutRefresh:0,onDockPanelShow:0,onDockPanelHide:0,onPanelActivate:0,onBeforePanelActivate:0,_sizing:"",_flowSize:0,_altSize:0,_oldFlow:"",_fpCollapsed:!1,_fpActive:0,_fpFirst:0,_fpLast:0,_fpCollapseTrg:[],_beforeBody:0,_curDock:-1,_prevDock:-1,_panelType:"panelLayout",_name:"",_title:""}),"undefined"!=typeof t.theme&&A5.themes.assign(this,t.theme,"panelLayout"),$u.o.assign(this,t),A5.overrides.assign(this,"panelLayout",this.override)},refresh:function(){for(var e=0,t=0;t<this.panels.length;t++)this.panels[t]._flex=-1,this.panels[t]._lateSize=!1,e=this.panels[t].size,"flex("==e.substr(0,5)?(this.panels[t]._flex=$u.s.toNum(e.substr(5)),e=this.panels[t].minSize):"-"==e.substr(0,1)?this.panels[t]._lateSize=A5.u.convertUnits(e,"px"):"%"==e.substr(e.length-1,1)&&(this.panels[t]._lateSize="%"),"number"!=typeof e&&(e=A5.u.convertUnits(e,"px")),this.panels[t]._size=e;this._onSetSize(!1)},getPanel:function(e){for(var t=e.split(":"),i={},s=this,a=-1;t.length>0;){if(a=s._getPanelIndx(t.shift()),a==-1)return!1;i=s.panels[a],s=i.src}return i},setActivePanel:function(e){window.event&&("touchend"!=window.event.type&&"touchstart"!=window.event.type||$e.preventDefault(window.event));for(var t=[],i=this,s=0;s<arguments.length;s++)t.push(arguments[s]);setTimeout(function(){i._setActivePanel.apply(i,t),delete i,delete t},0)},_setActivePanel:function(e){if(this.onBeforePanelActivate.constructor==Function){var t=this.onBeforePanelActivate();if(0==t)return!1}var i=arguments[1],s=!0;if(""==e)return!1;var a=e.split(":");e=a.shift();for(var n=this._getPanelIndx(e),o=0,r=this._fpCollapseTrg.length-1;r>=0&&(o=this._getPanelIndx(this._fpCollapseTrg[r]),o>n);r--)this._fpCollapseTrg.pop(),this.panels[o].controls.flowCollapse.has&&this.panels[o].controls.flowCollapse._b.setValue(0);if(0==this._fpCollapseTrg.length&&(this.state.flowCollapsed=!1),n>-1){var l=this.panels[n];clearTimeout(l._hideTimeout);var d=!1;if(this._prevDock>-1&&(d=this.panels[this._prevDock]),l.isDocked){if(this._curDock!=n){"auto-create"!=l.src.renderMode.substr(0,11)||l.src._created||(l.src.create(),this._panelControls(l));var h=$(this.contId+".DOCKOVERLAY");this.dock.flowLock.has&&(h.style.display="");var c=l._ele;"rtl"!=this.flow?c.style.left="":c.style.right="";var u=[],f=l.dock.search("after")!=-1;if("underlay"==this.dock.method){var p=$(this.contId+".BODY").firstChild,m=0;d&&(this._prevDock==this._curDock&&f==(d.dock.search("after")!=-1)&&(this._transEle(d._ele,u,d._size*-1,l._size*-1,f,null,null,i),m=d._size),d._ele.style.zIndex=1),this._transEle(c,u,m*-1,l._size*-1,f,null,null,i),this._transEle(p,u,m,l._size,f,!0,null,i),c.style.zIndex=2}else if("push"==this.dock.method){var p=$(this.contId+".BODY").firstChild,m=0;d&&(this._prevDock==this._curDock&&f==(d.dock.search("after")!=-1)&&(this._transEle(d._ele,u,d._size*-1,l._size*-1,f,null,null,i),m=d._size),d._ele.style.zIndex=4),this._transEle(c,u,0,l._size*-1,f,null,null,!1),this._transEle(p,u,m,l._size,f,!0,null,i),c.style.zIndex=4}else this._transEle(c,u,l._size*-1,0,f,null,null,i),d&&(this._prevDock==this._curDock&&this._transEle(d._ele,u,0,d._size*-1,d.dock.search("after")!=-1,null,null,arguments[1]),
d._ele.style.zIndex=4),c.style.zIndex=5;"ttb"==this.flow||"btt"==this.flow?l.src.setSize(this._altSize,l._size,!0):l.src.setSize(l._size,this._altSize,!0),setTimeout(Function(u.join("\n")),0),this._curDock=n,this._prevDock=n,this.state.dockPanelShown=!0,this.state.currentDockPanel=e;for(var _=!1,r=0;r<this.controls.dock.length;r++)this.controls.dock[r]._b&&(_=!1,this.controls.dock[r].panel==this.state.currentDockPanel&&(_=!0),this.controls.dock[r]._b.setValue(_));this.onDockPanelShow.constructor==Function&&this.onDockPanelShow(),s=!1}}else this.hideDock(),l._hidden&&(l.show=!0,this._fpActive=n,this._layoutRefresh(!0,!0),s=!1)}0==a.length||"panelNavigator"!=this.panels[n].src._panelType&&"panelLayout"!=this.panels[n].src._panelType||this.panels[n].src.setActivePanel(a.join(":"),$if(s&&i,!0,!1)),this.onPanelActivate.constructor==Function&&this.onPanelActivate()},firstPanel:function(){for(var e=0;e<this.panels.length;e++)if(p=this.panels[e],p.show&&"collapse-before"!=p.dock&&"collapse-after"!=p.dock&&"auto-collapse-before"!=p.dock&&"auto-collapse-after"!=p.dock){this.setActivePanel(p.name);break}},prevPanel:function(){this.state.hasPrevPanel&&this.setActivePanel(this.state.prevPanel)},nextPanel:function(){this.state.hasNextPanel&&this.setActivePanel(this.state.nextPanel)},lastPanel:function(){for(var e=this.panels.length-1;e>=0;e--)if(p=this.panels[e],p.show&&"collapse-before"!=p.dock&&"collapse-after"!=p.dock&&"auto-collapse-before"!=p.dock&&"auto-collapse-after"!=p.dock){this.setActivePanel(p.name);break}},hideDock:function(){if(this._curDock==-1)return!1;var e=this._curDock;this._curDock=-1,"auto-create-destroy"==this.panels[e].src.renderMode&&this.panels[e].src.destroy();var t=this.panels[e]._ele,i=[],s=this.panels[e].dock.search("after")!=-1;if("underlay"==this.dock.method){var a=$(this.contId+".BODY").firstChild;this._transEle(t,i,this.panels[e]._size*-1,0,s),this._transEle(a,i,this.panels[e]._size,0,s,!0)}else if("push"==this.dock.method){var a=$(this.contId+".BODY").firstChild;this._transEle(a,i,this.panels[e]._size,0,s,!0)}else{this._transEle(t,i,0,this.panels[e]._size*-1,s);var n=$(this.contId+".DOCKOVERLAY");n.style.display="none"}setTimeout(Function(i.join("\n")),0),this.state.dockPanelShown=!1,this.state.currentDockPanel="";for(var o=0;o<this.controls.dock.length;o++)this.controls.dock[o]._b&&this.controls.dock[o]._b.setValue(!1);this.onDockPanelHide.constructor==Function&&this.onDockPanelHide()},collapseFlow:function(e){var t="boolean"!=typeof arguments[1]||arguments[1],i=this._getPanelIndx(e);if(i!=-1){if(this.state.flowCollapsed&&this._fpCollapseTrg[this._fpCollapseTrg.length-1]==i)return!1;this._fpCollapseTrg.push(i),this._fpActive=i,this.state.flowCollapsed=!0,this.panels[i].controls.flowCollapse.has&&this.panels[i].controls.flowCollapse._b.setValue(1),this._layoutRefresh(t,!0)}},expandFlow:function(){if(0==this._fpCollapseTrg.length)return!1;var e="boolean"!=typeof arguments[1]||arguments[1],t=0;if(arguments[0]){for(var i=0;i<this._fpCollapseTrg.length;i++)t=this._getPanelIndx(this._fpCollapseTrg[i]),this.panels[t].controls.flowCollapse.has&&this.panels[t].controls.flowCollapse._b.setValue(0);this._fpCollapseTrg=[]}else t=this._fpCollapseTrg.pop(),t=this._getPanelIndx(t),this.panels[t].controls.flowCollapse.has&&this.panels[t].controls.flowCollapse._b.setValue(0);0==this._fpCollapseTrg.length&&(this.state.flowCollapsed=!1),this._layoutRefresh(e,!0)},getState:function(){var e={type:this._panelType,panels:[]};$u.o.assign(e,this.state);for(var t=0;t<this.panels.length;t++)"panelCard"!=this.panels[t].src._panelType?e.panels[t]=this.panels[t].src.getState():e.panels[t]={type:"panelCard"};return e},setState:function(e){e.flowCollapsed&&this.collapseFlow(e.firstPanel,!1);for(var t=0;t<this.panels.length;t++)"panelCard"!=this.panels[t].src._panelType&&this.panels[t].src.setState(e.panels[t])},_afterBody:function(e,t){var i=t.firstChild;$e.add(t,"scroll",function(){this.scrollLeft=0,this.scrollTop=0}),this._transClearEvnt(i),$e.add(i,"a5transpost",this._transPost,this);for(var s=0;s<this.panels.length;s++)this._createPanel(i,s);t.style.padding="0px";var a=!1;this.controls.prev.has&&(a=this._getPanelEleById(this.controls.prev.id,e,!0),a&&(this.controls.prev._b=new A5.Button(this.controls.prev.settings),this.controls.prev._b.bind(a),$e.add(a,A5.d.evnts.click,this.prevPanel,this,!0))),this.controls.next.has&&(a=this._getPanelEleById(this.controls.next.id,e,!0),a&&(this.controls.next._b=new A5.Button(this.controls.next.settings),this.controls.next._b.bind(a),$e.add(a,A5.d.evnts.click,this.nextPanel,this,!0)));for(var s=0;s<this.controls.dock.length;s++)a=this._getPanelEleById(this.controls.dock[s].id,e,!0),a&&(this.controls.dock[s]._b=new A5.ButtonToggle(this.controls.dock[s].settings),this.controls.dock[s]._b.bind(a),$e.add(a,A5.d.evnts.click,this._showDock,this),$sa(a,"A5LinkedPanel",this.controls.dock[s].panel))},_createPanel:function(e,t){var i=this.panels[t];$u.o.assign(i,this._pDefaults,!0),i.src._name=i.name,i.src._title=i.title,this.panels[t]._flex=-1,this.panels[t]._lateSize=!1;var s=this.panels[t].size;"flex("==s.substr(0,5)?(this.panels[t]._flex=$u.s.toNum(s.substr(5)),s=this.panels[t].minSize):"-"==s.substr(0,1)?this.panels[t]._lateSize=A5.u.convertUnits(s,"px"):"%"==s.substr(s.length-1,1)&&(this.panels[t]._lateSize="%"),"number"!=typeof s&&(s=A5.u.convertUnits(s,"px")),this.panels[t]._size=s;var a=i.src.create(this.contId+".PANEL."+t,!0);a.style.position="absolute","btt"!=this.flow?a.style.top="0px":a.style.bottom="0px","rtl"!=this.flow?a.style.left="0px":a.style.right="0px",a.style.zIndex=3,$sa(a,"A5PanelIndex",""+t),$e.add(a,"a5transpost",this._transPost,this),this._transClearEvnt(a),e.appendChild(a),i._ele=a,i.src._created&&this._panelControls(i)},_panelControls:function(e){var t=!1;if(e.controls.prev.has&&(t=this._getPanelEleById(e.controls.prev.id,e),t&&(e.controls.prev._b=new A5.Button(e.controls.prev.settings),e.controls.prev._b.bind(t),$e.add(t,A5.d.evnts.click,this.prevPanel,this,!0))),e.controls.next.has&&(t=this._getPanelEleById(e.controls.next.id,e),t&&(e.controls.next._b=new A5.Button(e.controls.next.settings),e.controls.next._b.bind(t),$e.add(t,A5.d.evnts.click,this.nextPanel,this,!0))),e.controls.flowCollapse.has&&(t=this._getPanelEleById(e.controls.flowCollapse.id,e))){var i=[];i.push(e.controls.flowCollapse.states.collapse),i.push(e.controls.flowCollapse.states.expand),e.controls.flowCollapse.settings.type="multi-state",$u.o.assign(e.controls.flowCollapse.settings,e.controls.flowCollapse.states.collapse),e.controls.flowCollapse._b=new A5.ButtonToggle(e.controls.flowCollapse.settings,i),e.controls.flowCollapse._b.bind(t),$sa(t,"A5LinkedPanel",e.name),$e.add(t,A5.d.evnts.click,this._toggleFlowCollapse,this)}},_layoutRefresh:function(e,t){if(this._oldFlow!=this.flow){if(!(("ttb"!=this._oldFlow&&"btt"!=this._oldFlow||"rtl"!=this.flow&&"ltr"!=this.flow)&&("rtl"!=this._oldFlow&&"ltr"!=this._oldFlow||"ttb"!=this.flow&&"btt"!=this.flow))){var i=this._flowSize;this._flowSize=this._altSize,this._altSize=i}this._oldFlow=this.flow}var s=$(this.contId+".BODYINNER");"ltr"==this.flow?s.className=this.body.ltrClassName:"ttb"==this.flow?s.className=this.body.ttbClassName:"rtl"==this.flow?s.className=this.body.rtlClassName:s.className=this.body.bttClassName;var a=0;"overlay"!=this.dock.method&&this._transEle($(this.contId+".BODY").firstChild,!1,0,0);var n=this._flowSize,o=this._altSize,r=this._getVPSize(),l=0;r.width<r.height&&(l=1);var d=0;this._w<this._h&&(d=1);for(var h=0,c=0;c<this.panels.length;c++)a=this.panels[c],a._lateSize&&("%"==a._lateSize?a._size=Math.round(n/100*$u.s.toNum(a.size)):a._size=n+a._lateSize),a.show&&"collapse-before"!=a.dock&&"collapse-after"!=a.dock&&(0!=l||"landscape-collapse-before"!=a.dock&&"landscape-collapse-after"!=a.dock)&&(1!=l||"portrait-collapse-before"!=a.dock&&"portrait-collapse-after"!=a.dock)&&(0!=d||"self-landscape-collapse-before"!=a.dock&&"self-landscape-collapse-after"!=a.dock)&&(1!=d||"self-portrait-collapse-before"!=a.dock&&"self-portrait-collapse-after"!=a.dock)&&(h+=a._size);var u=-1,f=0,p=0,m=0,_=!1,g=-1;0!=this._fpCollapseTrg.length&&(g=this._fpCollapseTrg[this._fpCollapseTrg.length-1]);for(var v=0,y=0,b=h>n,w=!1,c=this._fpActive;c<this.panels.length;c++)if(a=this.panels[c],a.show&&"collapse-before"!=a.dock&&"collapse-after"!=a.dock&&(!b||"auto-collapse-before"!=a.dock&&"auto-collapse-after"!=a.dock)&&(0!=l||"landscape-collapse-before"!=a.dock&&"landscape-collapse-after"!=a.dock)&&(1!=l||"portrait-collapse-before"!=a.dock&&"portrait-collapse-after"!=a.dock)&&(0!=d||"self-landscape-collapse-before"!=a.dock&&"self-landscape-collapse-after"!=a.dock)&&(1!=d||"self-portrait-collapse-before"!=a.dock&&"self-portrait-collapse-after"!=a.dock)){if(u==-1&&(u=c),v=a._size,!(y+v<=n||u==c))break;f=c,a._flex==-1?p+=v:m+=a._flex,y+=v}if(u>0&&y<n)for(var c=u-1;c>=0;c--)if(a=this.panels[c],a.show&&"collapse-before"!=a.dock&&"collapse-after"!=a.dock&&(!b||"auto-collapse-before"!=a.dock&&"auto-collapse-after"!=a.dock)&&(0!=l||"landscape-collapse-before"!=a.dock&&"landscape-collapse-after"!=a.dock)&&(1!=l||"portrait-collapse-before"!=a.dock&&"portrait-collapse-after"!=a.dock)&&(0!=d||"self-landscape-collapse-before"!=a.dock&&"self-landscape-collapse-after"!=a.dock)&&(1!=d||"self-portrait-collapse-before"!=a.dock&&"self-portrait-collapse-after"!=a.dock)){if(v=a._size,c<g){y+v<=n&&(w=!0);break}if(!(y+v<=n))break;u=c,a._flex==-1?p+=v:m+=a._flex,y+=v}y!=p&&(_=!0);var I=(this._fpFirst,this._fpLast);this._fpFirst=u,this._fpLast=f;var C=n-p,A=0,N=0,x=[];this.state.firstPanel=this.panels[u].name,this.state.lastPanel=this.panels[f].name,this.state.activePanel=this._fpActive<u?this.state.firstPanel:this.panels[this._fpActive].name,this.state.hasPrevPanel=!1,this.state.prevPanel="",this.state.hasNextPanel=!1,this.state.nextPanel="",this.state.hasDockPanel=!1,this.state.beforeDockPanels=[],this.state.afterDockPanels=[];for(var E=!1,c=0;c<this.panels.length;c++)if(a=this.panels[c],N=a._ele,a.show&&c>=u&&c<=f&&"collapse-before"!=a.dock&&"collapse-after"!=a.dock&&(!b||"auto-collapse-before"!=a.dock&&"auto-collapse-after"!=a.dock)&&(0!=l||"landscape-collapse-before"!=a.dock&&"landscape-collapse-after"!=a.dock)&&(1!=l||"portrait-collapse-before"!=a.dock&&"portrait-collapse-after"!=a.dock)&&(0!=d||"self-landscape-collapse-before"!=a.dock&&"self-landscape-collapse-after"!=a.dock)&&(1!=d||"self-portrait-collapse-before"!=a.dock&&"self-portrait-collapse-after"!=a.dock))"auto-create"!=a.src.renderMode.substr(0,11)||a.src._created||(a.src.create(),this._panelControls(a)),"rtl"!=this.flow?(N.style.left="0px",N.style.right=""):(N.style.right="0px",N.style.left=""),v=a._size,a._flex!=-1&&(v=Math.round(C/m*a._flex)),c==f&&(v=n-A),E=a._curSize>v&&e,e?a._hidden?c>I?this._transEle(N,x,n,A,!1,!1,E):this._transEle(N,!1,0,A,!1):this._transEle(N,x,a._curOffset,A,!1,!1,E):this._transEle(N,!1,0,A,!1),E?a._altSize!=o&&("ttb"==this.flow||"btt"==this.flow?a.src.setSize(o,a._curSize,t):a.src.setSize(a._curSize,o,t)):"ttb"==this.flow||"btt"==this.flow?a.src.setSize(o,v,t):a.src.setSize(v,o,t),N.style.zIndex=3,a.isDocked=!1,a._hidden=!1,a._curOffset=A,a._curSize=v,a._altSize=o,A+=v,a.dock.search("collapse")!=-1&&(a.dock.search("after")!=-1&&""!=this.dock.panel.afterClassName?$rcn(N,this.dock.panel.afterClassName):""!=this.dock.panel.beforeClassName&&$rcn(N,this.dock.panel.beforeClassName)),this._curDock==c&&(this._curDock=-1),a.controls.prev.has&&(this.state.hasPrevPanel&&c==u?a.controls.prev._b.setDisplay(!0):a.controls.prev._b.setDisplay(!1)),a.controls.next.has&&a.controls.next._b.setDisplay(!1),a.controls.flowCollapse.has&&(this.state.hasPrevPanel?a.controls.flowCollapse._b.setDisplay(!1):a.controls.flowCollapse._b.setDisplay(!0));else if(a._hidden?(c>f?this._transEle(N,!1,n,n,!1):"-5000px"!=N.style.left&&"-5000px"!=N.style.right&&(e?a._hideTimeout=setTimeout(Function("$('"+N.id+"').style."+$if("rtl"!=this.flow,"left","right")+" = '-5000px';"),this.animation.duration+100):N.style[$if("rtl"!=this.flow,"left","right")]="-5000px"),N.style.zIndex=1):("auto-create-destroy"==a.src.renderMode&&a.src.destroy(),c>f?(N.style.zIndex=1,this._transEle(N,x,a._curOffset,n,!1)):(N.style.zIndex=1,e?a._hideTimeout=setTimeout(Function("$('"+N.id+"').style."+$if("rtl"!=this.flow,"left","right")+" = '-5000px';"),this.animation.duration+100):N.style[$if("rtl"!=this.flow,"left","right")]="-5000px")),a.dock.search("collapse")!=-1?(a.isDocked=!0,this.state.hasDockPanel=!0,a.dock.search("after")!=-1?(this.state.afterDockPanels.push(a.name),""!=this.dock.panel.afterClassName&&$acn(N,this.dock.panel.afterClassName)):(this.state.beforeDockPanels.push(a.name),""!=this.dock.panel.beforeClassName&&$acn(N,this.dock.panel.beforeClassName))):c<u&&(c>=g||!w)&&a.show?(this.state.hasPrevPanel=!0,this.state.prevPanel=a.name):c>f&&a.show&&!this.state.nextPanel&&(this.state.hasNextPanel=!0,this.state.nextPanel=a.name),a._hidden=!0,this._curDock==c)if(a.isDocked){clearTimeout(a._hideTimeout),N.style[$if("rtl"!=this.flow,"left","right")]="0px";var R=a.dock.search("after")!=-1;if("underlay"==this.dock.method){var D=$(this.contId+".BODY").firstChild,T=0;this._transEle(N,!1,T*-1,a._size*-1,R),this._transEle(D,!1,T,a._size,R,!0),N.style.zIndex=2}else if("push"==this.dock.method){var D=$(this.contId+".BODY").firstChild,T=0;this._transEle(N,!1,0,a._size*-1,R,!1),this._transEle(D,!1,T,a._size,R,!0),N.style.zIndex=2}else this._transEle(N,!1,a._size*-1,0,R),N.style.zIndex=5;E?a._altSize!=o&&("ttb"==this.flow||"btt"==this.flow?a.src.setSize(o,a._size,t):a.src.setSize(a._size,o,t)):"ttb"==this.flow||"btt"==this.flow?a.src.setSize(o,a._size,t):a.src.setSize(a._size,o,t),this.dock.flowLock.has&&($(this.contId+".DOCKOVERLAY").style.display="")}else this._curDock=-1,this.dock.flowLock.has&&($(this.contId+".DOCKOVERLAY").style.display="none");e&&setTimeout(Function(x.join("\n")),0),this.controls.prev.has&&(this.state.hasPrevPanel?this.controls.prev._b.setDisplay(!0):this.controls.prev._b.setDisplay(!1)),a=this.panels[f],a.controls.next.has&&this.state.hasNextPanel&&a.controls.next._b.setDisplay(!0),this.controls.next.has&&(this.state.hasNextPanel?this.controls.next._b.setDisplay(!0):this.controls.next._b.setDisplay(!1));for(var S=0,L=!1,c=0;c<this.controls.dock.length;c++)S=this.controls.dock[c],L=!1,S._b&&("*generic"==S.panel?this.state.hasDockPanel&&(L=!0):"*before"==S.panel?this.state.beforeDockPanels.length>0&&(L=!0):"*after"==S.panel?this.state.afterDockPanels.length>0&&(L=!0):this.panels[this._getPanelIndx(S.panel)].isDocked&&(L=!0),S._b.setDisplay(L));this.onLayoutRefresh.constructor==Function&&this.onLayoutRefresh()},_onSetSize:function(){var e="boolean"!=typeof arguments[0]||arguments[0],t=$(this.contId+".BODY"),i=t.firstChild,s=$(this.contId+".DOCKOVERLAY"),a=t.clientWidth,n=t.clientHeight;this._flowSize=a,this._altSize=n,"ttb"!=this.flow&&"btt"!=this.flow||(this._flowSize=n,this._altSize=a),i.style.width=a+"px",i.style.height=n+"px",s.style.width=a+"px",s.style.height=n+"px",this._layoutRefresh(!1,e)},_showDock:function(e,t){panel=$ga(this,"A5LinkedPanel");var i=t._getPanelIndx(panel);if(i>-1)"true"!=$ga(this,"A5ButtonState")?t.hideDock():t.setActivePanel(panel);else{var s=[],a=t.state.beforeDockPanels.length+t.state.afterDockPanels.length==1&&"*generic"==panel,n=0;if("*before"==panel||"*generic"==panel){if(1==t.state.beforeDockPanels.length&&"*after"==panel||a)return t.setActivePanel(t.state.beforeDockPanels[0]),!0;for(var o=0;o<t.state.beforeDockPanels.length;o++)n=t.panels[t._getPanelIndx(t.state.beforeDockPanels[o])],s.push({html:n.name,value:n.name})}if("*after"==panel||"*generic"==panel){if(1==t.state.afterDockPanels.length&&"*after"==panel||a)return t.setActivePanel(t.state.afterDockPanels[0]),!0;for(var o=0;o<t.state.afterDockPanels.length;o++)n=t.panels[t._getPanelIndx(t.state.afterDockPanels[o])],s.push({html:n.name,value:n.name})}t._dMenu||(t._dMenu=new A5.Menu([],{theme:t.theme,iconColumn:{show:!1},onClick:function(e){pl1Obj.setActivePanel(e.value)}})),t._dMenu.populate(s),t._dMenu.show("dropdown",this)}},_toggleFlowCollapse:function(e,t){var i=$ga(this,"A5LinkedPanel");t.state.flowCollapsed&&t._fpCollapseTrg[t._fpCollapseTrg.length-1]==t._getPanelIndx(i)?t.expandFlow():t.collapseFlow(i)},_getPanelIndx:function(e){if("number"==typeof e)return e;e=e.toLowerCase();for(var t=0;t<this.panels.length;t++)if(this.panels[t].name.toLowerCase()==e)return t;return-1},_getVPSize:function(){return AUI.u.getVPSize()},_transEle:function(e,t,i,s,a,n,o){var r="boolean"!=typeof arguments[7]||arguments[7],l=this._locVals[this.flow.substr(0,1)],d=this._locVals[this.flow.substr(2,1)];if(a){var h=l;l=d,d=h}if(n&&("bottom"==l||"right"==l)){var h=l;l=d,d=h,i*=-1,s*=-1}""==e.style[l]&&(e.style[l]="0px",e.style[d]="");var c=l,u=l,f="";A5.u.css.supportsTransition&&"none"!=this.animation.type?("left"==l?(i=A5.u.css.transform2D(i+"px","0px"),s=A5.u.css.transform2D(s+"px","0px")):"right"==l?(i=A5.u.css.transform2D(i*-1+"px","0px"),s=A5.u.css.transform2D(s*-1+"px","0px")):"top"==l?(i=A5.u.css.transform2D("0px",i+"px"),s=A5.u.css.transform2D("0px",s+"px")):"bottom"==l&&(i=A5.u.css.transform2D("0px",i*-1+"px"),s=A5.u.css.transform2D("0px",s*-1+"px")),c=A5.u.css.properties.transform,u=A5.u.css.properties.transformDOM,f=A5.u.css.properties.transitionDOM):(i+="px",s+="px"),t.constructor==Array?(e.style[u]=i,t.push("var tEle = $('"+e.id+"');"),t.push("tEle.style['"+u+"'] = '"+s+"';"),r&&A5.u.css.supportsTransition?t.push("tEle.style['"+f+"'] = '"+c+" "+this.animation.duration+"ms ease-in-out';"):this.state.dockPanelShown||e.id!=this.contId+".BODYINNER"||t.push("$('"+this.contId+".BODYINNER').style.display = 'none';")):(e.style[u]=s,this.state.dockPanelShown||e.id!=this.contId+".BODYINNER"||($(this.contId+".DOCKOVERLAY").style.display="none")),o||e.id==this.contId+".BODYINNER"?$sa(e,"A5PanelTransPost","true"):$sa(e,"A5PanelTransPost","false")},_transClearEvnt:function(e){$e.add(e,A5.u.css.properties.transitionEndEvent,Function("if(arguments[0].target.id != this.id) return true; this.style[A5.u.css.properties.transitionDOM] = ''; if($ga(this,'A5PanelTransPost') == 'true'){ $e.execute(this,'a5transpost');}"))},_transPost:function(e,t){t.state.dockPanelShown||this.id!=t.contId+".BODYINNER"||($(t.contId+".DOCKOVERLAY").style.display="none");var i=Number(""+$ga(this,"A5PanelIndex"));if(!isNaN(i)){var s=t.panels[i]._curSize,a=t._altSize;"ttb"==t.flow||"btt"==t.flow?t.panels[i].src.setSize(a,s,!0):t.panels[i].src.setSize(s,a,!0)}},_pDefaults:{name:"",title:"",size:"flex(1)",minSize:0,dock:"",show:!0,controls:{prev:{has:!1,id:"{panel.id}.CTRL.PREV",settings:{layout:"text",html:"Back"}},next:{has:!1,id:"{panel.id}.CTRL.NEXT",settings:{layout:"text",html:"Next"}},flowCollapse:{has:!1,id:"{panel.id}.CTRL.FLOWCOLLAPSE",settings:{layout:"text"},states:{collapse:{html:"&laquo;"},expand:{html:"&raquo;"}}}},isDocked:!1,_curOffset:0,_curSize:0,_altSize:0,_hidden:!0},_locVals:{l:"left",r:"right",b:"bottom",t:"top"}}),A5.u.pointerTracker={_:{w:{},a:!1,i:{t:"",ti:[],oad:{x:0,y:0},s:{},d:{}},isInit:!1,start:function(e){$e.preventDefault(e);var t=A5.u.pointerTracker._;if(t.a){if("touch"==t.i.t&&!t.i.d.preventAdd)if(t.i.oad.x=t.i.d.addDelta.x,t.i.oad.y=t.i.d.addDelta.y,"single"==t.i.d.type){if("function"==typeof t.i.s.onSingleEnd&&t.i.s.onSingleEnd.call(this,t.i.d,t.i.s,e),t.i.d.type="double",t.i.ti.push(e.changedTouches[0].identifier),t.calcData(t.i,e,"s"),t.i.d.captured++,"function"==typeof t.i.s.onDblStart&&t.i.s.onDblStart.call(this,t.i.d,t.i.s,e),e.changedTouches.length>1){"function"==typeof t.i.s.onDblEnd&&t.i.s.onDblEnd.call(this,t.i.d,t.i.s,e),t.i.d.type="multi";for(var i=1;i<e.changedTouches.length;i++)t.i.ti.push(e.changedTouches[i].identifier),t.i.d.captured++;t.calcData(t.i,e,"s"),"function"==typeof t.i.s.onMultiStart&&t.i.s.onMultiStart.call(this,t.i.d,t.i.s,e)}}else if("double"==t.i.d.type){"function"==typeof t.i.s.onDblEnd&&t.i.s.onDblEnd.call(this,t.i.d,t.i.s,e),t.i.d.type="multi";for(var i=0;i<e.changedTouches.length;i++)t.i.ti.push(e.changedTouches[i].identifier),t.i.d.captured++;t.calcData(t.i,e,"s"),"function"==typeof t.i.s.onMultiStart&&t.i.s.onMultiStart.call(this,t.i.d,t.i.s,e)}else{for(var i=0;i<e.changedTouches.length;i++)t.i.ti.push(e.changedTouches[i].identifier),t.i.d.captured++;t.calcData(t.i,e,"a"),"function"==typeof t.i.s.onMultiAdd&&t.i.s.onMultiAdd.call(this,t.i.d,t.i.s,e)}}else if(t.a=!0,t.i.s=t.w[this.id],"touchstart"==e.type?t.i.t="touch":t.i.t="mouse",t.i.oad.x=0,t.i.oad.y=0,t.i.d={type:"single",captured:1,preventAdd:!1,x:0,y:0,start:{x:0,y:0},delta:{x:0,y:0,min:{x:0,y:0},max:{x:0,y:0}},original:{x:0,y:0},addDelta:{x:0,y:0},points:[],rotation:!1,scale:!1},"touch"==t.i.t&&t.i.ti.push(e.changedTouches[0].identifier),t.calcData(t.i,e,"s"),t.i.d.original.x=t.i.d.x,t.i.d.original.y=t.i.d.y,"function"==typeof t.i.s.onStart&&t.i.s.onStart.call(this,t.i.d,t.i.s,e),"function"==typeof t.i.s.onSingleStart&&t.i.s.onSingleStart.call(this,t.i.d,t.i.s,e),"touch"==t.i.t&&(e.changedTouches.length>1&&!t.i.d.preventAdd&&("function"==typeof t.i.s.onSingleEnd&&t.i.s.onSingleEnd.call(this,t.i.d,t.i.s,e),t.i.ti.push(e.changedTouches[1].identifier),t.calcData(t.i,e,"s"),t.i.d.captured++,t.i.d.type="double","function"==typeof t.i.s.onDblStart&&t.i.s.onDblStart.call(this,t.i.d,t.i.s,e)),e.changedTouches.length>2&&!t.i.d.preventAdd)){"function"==typeof t.i.s.onDblEnd&&t.i.s.onDblEnd.call(this,t.i.d,t.i.s,e);for(var i=2;i<e.changedTouches.length;i++)t.i.ti.push(e.changedTouches[i].identifier),t.i.d.captured++;t.calcData(t.i,e,"s"),t.i.d.type="multi","function"==typeof t.i.s.onMultiStart&&t.i.s.onMultiStart.call(this,t.i.d,t.i.s,e)}},move:function(e){if(!A5.u.pointerTracker._.a)return!1;$e.preventDefault(e);var t=A5.u.pointerTracker._;("touch"!=t.i.t||t.touchIsTracked(t.i.ti,e))&&"function"==typeof t.i.s.onChange&&(t.calcData(t.i,e,"m"),t.i.s.onChange.call(this,t.i.d,t.i.s,e))},end:function(e){if(!A5.u.pointerTracker._.a)return!1;$e.preventDefault(e);var t=A5.u.pointerTracker._;if("touch"==t.i.t){if(!t.touchIsTracked(t.i.ti,e))return;for(var i=0,s=0;s<e.changedTouches.length;s++)i=t.i.ti.indexOf(e.changedTouches[s].identifier),i!=-1&&t.i.ti.splice(i,1);"single"==t.i.d.type?"function"==typeof t.i.s.onSingleEnd&&t.i.s.onSingleEnd.call(this,t.i.d,t.i.s,e):"double"==t.i.d.type?"function"==typeof t.i.s.onDblEnd&&t.i.s.onDblEnd.call(this,t.i.d,t.i.s,e):"multi"==t.i.d.type&&t.i.ti.length<3&&"function"==typeof t.i.s.onMultiEnd&&t.i.s.onMultiEnd.call(this,t.i.d,t.i.s,e),0==t.i.ti.length?("function"==typeof t.i.s.onEnd&&t.i.s.onEnd.call(this,t.i.d,t.i.s,e),t.a=!1):1==t.i.ti.length?(t.i.d.type="single",t.calcData(t.i,e,"s"),"function"==typeof t.i.s.onSingleStart&&t.i.s.onSingleStart.call(this,t.i.d,t.i.s,e)):2==t.i.ti.length?(t.i.d.type="double",t.calcData(t.i,e,"s"),"function"==typeof t.i.s.onDblStart&&t.i.s.onDblStart.call(this,t.i.d,t.i.s,e)):(t.i.d.type="multi",t.calcData(t.i,e,"r"),"function"==typeof t.i.s.onMultiRemove&&t.i.s.onMultiRemove.call(this,t.i.d,t.i.s,e))}else"function"==typeof t.i.s.onSingleEnd&&t.i.s.onSingleEnd.call(this,t.i.d,t.i.s,e),"function"==typeof t.i.s.onEnd&&t.i.s.onEnd.call(this,t.i.d,t.i.s,e),t.a=!1},calcData:function(e,t,i){if("touch"==e.t){if("s"==i||"e"==i||"a"==i||"r"==i){e.d.points=[];for(var s=0;s<e.ti.length;s++)e.d.points.push({x:0,y:0})}for(var s=0;s<e.ti.length;s++)for(var a=0;a<t.touches.length;a++)if(e.ti[s]==t.touches[a].identifier){e.d.points[s].x=t.touches[a].clientX,e.d.points[s].y=t.touches[a].clientY;break}if(1==e.ti.length)"s"==i||"e"==i?(e.d.x=e.d.points[0].x,e.d.y=e.d.points[0].y,e.d.start.x=e.d.x,e.d.start.y=e.d.y,e.d.delta.x=0,e.d.delta.y=0,e.d.delta.min.x=0,e.d.delta.min.y=0,e.d.delta.max.x=0,e.d.delta.max.y=0,e.d.scale=!1,e.d.rotation=!1):(e.d.x=e.d.points[0].x,e.d.y=e.d.points[0].y,e.d.delta.x=e.d.x-e.d.start.x,e.d.delta.y=e.d.y-e.d.start.y);else if(2==e.ti.length)if("s"==i||"e"==i){e.d.x=Math.floor((e.d.points[0].x+e.d.points[1].x)/2),e.d.y=Math.floor((e.d.points[0].y+e.d.points[1].y)/2),e.d.start.x=e.d.x,e.d.start.y=e.d.y,e.d.delta.x=0,e.d.delta.y=0,e.d.delta.min.x=0,e.d.delta.min.y=0,e.d.delta.max.x=0,e.d.delta.max.y=0,e.d.scale={value:1,width:0,height:0,length:0,delta:{width:0,height:0,length:0},start:{width:0,height:0,length:0}},e.d.scale.width=Math.abs(e.d.points[0].x-e.d.points[1].x),e.d.scale.height=Math.abs(e.d.points[0].y-e.d.points[1].y),e.d.scale.length=Math.floor(Math.sqrt(e.d.scale.width*e.d.scale.width+e.d.scale.height*e.d.scale.height)),e.d.scale.start.width=e.d.scale.width,e.d.scale.start.height=e.d.scale.height,e.d.scale.start.length=e.d.scale.length,e.d.rotation={angle:0,quad:0,delta:{angle:0},start:{angle:0,quad:0}};var n=-Math.floor(180*Math.atan2(e.d.points[1].y-e.d.points[0].y,e.d.points[1].x-e.d.points[0].x)/Math.PI);n<0&&(n+=360),e.d.rotation.angle=n,e.d.rotation.start.angle=n,e.d.rotation.angle<=90?e.d.rotation.quad=1:e.d.rotation.angle<=180?e.d.rotation.quad=2:e.d.rotation.angle<=270?e.d.rotation.quad=3:e.d.rotation.quad=4,e.d.rotation.start.quad=e.d.rotation.quad}else{e.d.x=Math.floor((e.d.points[0].x+e.d.points[1].x)/2),e.d.y=Math.floor((e.d.points[0].y+e.d.points[1].y)/2),e.d.delta.x=e.d.x-e.d.start.x,e.d.delta.y=e.d.y-e.d.start.y,e.d.scale.width=Math.abs(e.d.points[0].x-e.d.points[1].x),e.d.scale.height=Math.abs(e.d.points[0].y-e.d.points[1].y),e.d.scale.length=Math.floor(Math.sqrt(e.d.scale.width*e.d.scale.width+e.d.scale.height*e.d.scale.height)),e.d.scale.delta.width=e.d.scale.width-e.d.scale.start.width,e.d.scale.delta.height=e.d.scale.height-e.d.scale.start.height,e.d.scale.delta.length=e.d.scale.length-e.d.scale.start.length,e.d.scale.value=e.d.scale.length/e.d.scale.start.length;var n=-Math.floor(180*Math.atan2(e.d.points[1].y-e.d.points[0].y,e.d.points[1].x-e.d.points[0].x)/Math.PI);n<0&&(n+=360),e.d.rotation.delta.angle=e.d.rotation.delta.angle+(n-e.d.rotation.angle),e.d.rotation.angle=n,e.d.rotation.angle<=90?e.d.rotation.quad=1:e.d.rotation.angle<=180?e.d.rotation.quad=2:e.d.rotation.angle<=270?e.d.rotation.quad=3:e.d.rotation.quad=4}else if("s"==i||"e"==i||"a"==i||"r"==i){e.d.x=0,e.d.y=0;for(var s=0;s<e.d.points.length;s++)e.d.x+=e.d.points[s].x,e.d.y+=e.d.points[s].y;e.d.x=Math.floor(e.d.x/e.d.points.length),e.d.y=Math.floor(e.d.y/e.d.points.length),e.d.start.x=e.d.x,e.d.start.y=e.d.y,e.d.delta.x=0,e.d.delta.y=0,e.d.delta.min.x=0,e.d.delta.min.y=0,e.d.delta.max.x=0,e.d.delta.max.y=0,e.d.scale=!1,e.d.rotation=!1}else{e.d.x=0,e.d.y=0;for(var s=0;s<e.d.points.length;s++)e.d.x+=e.d.points[s].x,e.d.y+=e.d.points[s].y;e.d.x=Math.floor(e.d.x/e.d.points.length),e.d.y=Math.floor(e.d.y/e.d.points.length),e.d.delta.x=e.d.x-e.d.start.x,e.d.delta.y=e.d.y-e.d.start.y}}else"s"==i||"e"==i?(e.d.points=[{x:t.clientX,y:t.clientY}],e.d.x=t.clientX,e.d.y=t.clientY,e.d.start.x=e.d.x,e.d.start.y=e.d.y,e.d.delta.x=0,e.d.delta.y=0,e.d.delta.min.x=0,e.d.delta.min.y=0,e.d.delta.max.x=0,e.d.delta.max.y=0,e.d.scale=!1,e.d.rotation=!1):(e.d.points[0].x=t.clientX,e.d.points[0].y=t.clientY,e.d.x=t.clientX,e.d.y=t.clientY,e.d.delta.x=e.d.x-e.d.start.x,e.d.delta.y=e.d.y-e.d.start.y);e.d.delta.min.x=Math.min(e.d.delta.min.x,e.d.delta.x),e.d.delta.min.y=Math.min(e.d.delta.min.y,e.d.delta.y),e.d.delta.max.x=Math.max(e.d.delta.max.x,e.d.delta.x),e.d.delta.max.y=Math.max(e.d.delta.max.y,e.d.delta.y),e.d.addDelta.x=e.oad.x+e.d.delta.x,e.d.addDelta.y=e.oad.y+e.d.delta.y},touchIsTracked:function(e,t){for(var i=0;i<t.changedTouches.length;i++)if(e.indexOf(t.changedTouches[i].identifier)!=-1)return!0;return!1},init:function(){this.isInit||($e.add(document.body,"touchmove",this.move),$e.add(document.body,"touchend",this.end),$e.add(document.body,"touchcancel",this.end),$e.add(document.documentElement,"mousemove",this.move),$e.add(document.documentElement,"mouseup",this.end),this.isInit=!0)},selStop:function(e){var t=e.target||e.srcElement;if(t){var i=t.tagName.toLowerCase();if("input"==i||"textarea"==i)return null}return $e.stopEvent($e.getEvent(e)),!1}},add:function(e,t){e=$(e),this._.w[e.id]||($e.add(e,A5.d.evnts.down,this._.start),$e.add(e,"selectstart",this._.selStop),$e.add(e,"dragstart",this._.selStop)),$u.o.assign(t,{onStart:!1,onEnd:!1,onSingleStart:!1,onSingleEnd:!1,onDblStart:!1,onDblEnd:!1,onMutliStart:!1,onMultiEnd:!1,onMultiAdd:!1,onMultiRemove:!1,onChange:!1},!0),this._.w[e.id]=t,this._.init()},remove:function(e){e=$(e),this._.w[e.id]&&($e.remove(e,A5.d.evnts.down,this._.start),$e.remove(e,"selectstart",this._.selStop),$e.remove(e,"dragstart",this._.selStop),delete this._.w[e.id])}},A5.u.drag={useDragScrolling:"auto",defaults:{custom:{tolerance:5},scroll:{theme:"",snap:!1,pull:{x:"atuo",y:"atuo"},onPull:0,onPullRelease:0,onPullEnd:0,momentum:{allow:!0,duration:1e3},bounce:{allow:!0},indicator:{show:!0,h:{show:!0,className:"",barClassName:"",location:"bottom",offset:"0px",left:"0px",right:"0px"},v:{show:!0,className:"",barClassName:"",location:"right",offset:"0px",top:"0px",bottom:"0px"}}}},_sDif:0,_w:{},_st:{},_i:{_a:!1},_da:!1,_di:!1,_start:function(e){var t=e.target||e.srcElement;if(t&&t.tagName){var i=t.tagName.toLowerCase();if("input"==i||"textarea"==i)return null}var s=A5.u.drag,a=s._i;if(a._a)return!0;var n=s._getCoors(e),o=!1;"touchstart"==e.type&&(o=e.changedTouches[0].identifier),s._setupI(a,n.clientX,n.clientY,o),s._awe={};for(var r=!1,l=this,d="";"BODY"!=l.tagName.toUpperCase();){if(d=l.id,""!=d&&"undefined"!=typeof s._w[d]){if(s._awe[d]=l,s._w[d].p){r=!0;break}if(s._w[d].s&&!s._w[d].s.disabled&&!a._s){var h=s._w[d].s,c=$ga(l,"A5CustomScroll"),u=0,f=0;if(c&&(c=c.split(","),u=Number(c[0]),f=Number(c[1])),"undefined"==typeof h._p){h._p={t:0,b:0};var p={paddingTop:"",paddingBottom:""};"undefined"!=typeof window.getComputedStyle?p=window.getComputedStyle(l):l.currentStyle&&(p=l.currentStyle),""!=p.paddingTop&&(h._p.t=A5.u.convertUnits(p.paddingTop,"px")),""!=p.paddingBottom&&(h._p.b=A5.u.convertUnits(p.paddingBottom,"px")),h._p.y=h._p.t+h._p.b}var m=l.scrollWidth+u,_=l.firstChild.offsetHeight+h._p.y-2;if(s._st[d]){var p={};p[A5.u.css.properties.transformDOM]="","undefined"!=typeof window.getComputedStyle?p=window.getComputedStyle(l.firstChild):l.currentStyle&&(p=l.firstChild.currentStyle);var g={e:0,f:0};if(A5.flags.isFireFox||A5.flags.isOpera){var v=/matrix\(\s*-?\d+(?:\.\d+)?\s*,\s*-?\d+(?:\.\d+)?\s*,\s*-?\d+(?:\.\d+)?\s*,\s*-?\d+(?:\.\d+)?\s*\,\s*(-?\d+(?:\.\d+)?)\s*,\s*(-?\d+(?:\.\d+)?)\s*\)/,y=p[A5.u.css.properties.transformDOM].match(v);y&&(g.e=y[1],g.f=y[2])}else g=A5.flags.isWebKit?new WebKitCSSMatrix(p[A5.u.css.properties.transformDOM]):new MSCSSMatrix(p[A5.u.css.properties.transformDOM]);u=Math.round(g.e)*-1,f=Math.round(g.f)*-1,m=s._st[d].w,_=s._st[d].h,clearInterval(s._st[d].inter),delete s._st[d],l.firstChild.style[A5.u.css.properties.transitionDOM]="",l.firstChild.style[A5.u.css.properties.transformDOM]=A5.u.css.transform2D(u*-1,f*-1)}if(a._s={id:d,iX:!1,iY:!1,x:!1,y:!1,vX:u,vY:f,cX:u,cY:f,sW:m,sH:_,mX:m-l.clientWidth,mY:_-l.clientHeight,p:h.pull,oP:h.onPull.constructor==Function,oPE:h.onPullEnd.constructor==Function,oPF:h.onPull,oPEF:h.onPullEnd,b:h.bounce.allow,pX:l.offsetWidth/2,pY:l.offsetHeight/2,pXP:0,pYP:0,oW:l.offsetWidth,oH:l.offsetHeight,xIBEle:!1,yIBEle:!1},("x"==h.axis||"both"==h.axis)&&!a._cX&&(l.clientWidth+4<a._s.sW||"always"==h.pull.x)&&(a._s.x=!0,h.indicator.show&&h.indicator.h.show)){var b=$(l.id+".SCROLLINDICATOR.X");b||(b=document.createElement("div"),b.id=l.id+".SCROLLINDICATOR.X",b.className=h.indicator.h.className,l.appendChild(b),$ss(b,"display: none; position: absolute; overflow: hidden; left: "+h.indicator.h.left+"; right: "+h.indicator.h.right+"; width: auto; "+h.indicator.h.location+": "+h.indicator.h.offset+";"),b.innerHTML='<div class="'+h.indicator.h.barClassName+'" style="position: absolute; top: 0px; left: 0px; font: 0px; width: 5px; height: 5px;"></div>'),b.style.display="none";var w=b.firstChild;w.style.left=a._s.vX/a._s.sW*100+"%",w.style.width=Math.max(5,l.clientWidth/a._s.sW*100)+"%",w.style.minWidth="10px",w.style[A5.u.css.properties.transitionDOM]="",
a._s.xIBEle=w}if(("y"==h.axis||"both"==h.axis)&&!a._cY&&(l.clientHeight+4<a._s.sH||"always"==h.pull.y)&&(a._s.y=!0,h.indicator.show&&h.indicator.v.show)){var b=$(l.id+".SCROLLINDICATOR.Y");b||(b=document.createElement("div"),b.id=l.id+".SCROLLINDICATOR.Y",b.className=h.indicator.v.className,l.appendChild(b),$ss(b,"display: none; position: absolute; overflow: hidden; top: "+h.indicator.v.top+"; bottom: "+h.indicator.v.bottom+"; height: auto; "+h.indicator.v.location+": "+h.indicator.v.offset+";"),b.innerHTML='<div class="'+h.indicator.v.barClassName+'" style="position: absolute; top: 0px; left: 0px; font: 0px; width: 5px; height: 5px;"></div>'),b.style.display="none";var w=b.firstChild;w.style.top=a._s.vY/a._s.sH*100+"%",w.style.height=l.clientHeight/a._s.sH*100+"%",w.style.minHeight="10px",w.style[A5.u.css.properties.transitionDOM]="",a._s.yIBEle=w}h.stopPropagation&&(!a._cX&&a._s.x&&(a._cX=!0),!a._cY&&a._s.y&&(a._cY=!0))}if(s._w[d].c&&!s._w[d].c.disabled&&("x"!=s._w[d].c.axis||a._cX?"y"!=s._w[d].c.axis||a._cY?(a._cX||(a._cX={id:d,l:!1,a:!1,f:0==a._s}),a._cY||(a._cY={id:d,l:!1,a:!1,f:0==a._s})):a._cY={id:d,l:!1,a:!1,f:0==a._s}:a._cX={id:d,l:!1,a:!1,f:0==a._s},0!=a._cX&&0!=a._cY))break}l=l.parentNode}if(1==a._cX&&(a._cX=!1),1==a._cY&&(a._cY=!1),a._cX||(a._cX={id:!1,a:!1,l:!1,f:!1}),a._cY||(a._cY={id:!1,a:!1,l:!1,f:!1}),a._cX.id&&a._cY.id&&a._cX.id==a._cY.id&&(a._cB=!0),a._s||a._cX.id||a._cY.id){s._da=!0;var I=!1;a._cX.id&&s._w[a._cX.id].c.tolerance==-1&&(I=!0),a._cY.id&&s._w[a._cY.id].c.tolerance==-1&&(I=!0),I&&s._move(e)}else a._a=!1,r&&(a._a=!0,setTimeout(function(){A5.u.drag._i._a=!1},0))},_move:function(e){if(A5.u.drag._da){$e.preventDefault(e);var t=A5.u.drag,i=t._i;if(0!=i.touchId){if("mousemove"==e.type)return!1;if(i.touchId!=e.changedTouches[0].identifier)return!1}var s=t._getCoors(e);i.x=s.clientX,i.y=s.clientY,0==i.startX&&(i.startX=i.x),0==i.startY&&(i.startY=i.y),i.moveX=i.x-i.startX,i.moveY=i.y-i.startY,i.customMoveX=i.moveX,i.customMoveY=i.moveY,i.maxX=Math.max(i.moveX,i.maxX),i.minX=Math.min(i.moveX,i.minX),i.maxY=Math.max(i.moveY,i.maxY),i.minY=Math.min(i.moveY,i.minY);var a=Date.now()-i.startT;Math.abs(i.moveX)/a>1||Math.abs(i.moveY)/a>1?i.hasMomentum=!0:i.hasMomentum=!1;var n=!0,o=!0;if(i._s){n=!1,o=!1;var r=i._s.pXP,l=i._s.pYP;if(i._s.x){i._s.iX||i._s.xIBEle&&0!=i.moveX&&(i._s.xIBEle.parentNode.style.display="",i._s.iX=!0);var d=i._s.vX-i.moveX;if(d<0||d>i._s.mX){var h=0;d<0?h=d*-1:d>i._s.mX&&(h=(d-i._s.mX)*-1),i._cX.id?(n=!0,i.customMoveX=h):"never"!=i._s.p.x&&(i._s.cX=d,i._s.pXP=h)}else i._s.cX=d,i._s.pXP=0,i.customMoveX=0,i._cX.a&&(!t._w[i._cX.id].c.onEnd||i._cB&&i._cY.a||t._w[i._cX.id].c.onEnd.call(t._awe[i._cX.id],i,t._w[i._cX.id].c,e),i._cX.a=!1,i._cY.l=!1);i._s.xIBEle&&(i._s.xIBEle.style.left=i._s.cX/i._s.sW*100+"%")}else i._s.y&&i._cX.id?(Math.max(Math.abs(i.minY),i.maxY)<t._w[i._cX.id].c.tolerance||i._cX.f)&&(n=!0):n=!0;if(i._s.y){i._s.iY||i._s.yIBEle&&0!=i.moveY&&(i._s.yIBEle.parentNode.style.display="",i._s.iY=!0);var c=i._s.vY-i.moveY;if(c<0||c>i._s.mY){var u=0;c<0?u=c*-1:c>i._s.mY&&(u=(c-i._s.mY)*-1),i._cY.id?(o=!0,i.customMoveY=u):"never"!=i._s.p.y&&(i._s.cY=c,i._s.pYP=u)}else i._s.cY=c,i._s.pYP=0,i.customMoveY=0,i._cY.a&&(!t._w[i._cY.id].c.onEnd||i._cB&&i._cX.a||t._w[i._cY.id].c.onEnd.call(t._awe[i._cY.id],i,t._w[i._cY.id].c,e),i._cY.a=!1,i._cX.l=!1);i._s.yIBEle&&(i._s.yIBEle.style.top=i._s.cY/i._s.sH*100+"%")}else i._s.x&&i._cY.id?(Math.max(Math.abs(i.minX),i.maxX)<t._w[i._cY.id].c.tolerance||i._cY.f)&&(o=!0):o=!0;!i._s.oP||0==i._s.pXP&&0==i._s.pYP||i._s.oPF.call(t._awe[i._s.id],i,t._w[i._s.id].s,i._s.pXP*-1,i._s.pYP*-1,e),i._s.oPE&&(0==i._s.pXP&&0!=r||0==i._s.pYP&&0!=l)&&i._s.oPEF.call(t._awe[i._s.id],i,t._w[i._s.id].s,i._s.pXP*-1,i._s.pYP*-1,e),t._awe[i._s.id].firstChild.style[A5.u.css.properties.transformDOM]=A5.u.css.transform2D(i._s.cX*-1,i._s.cY*-1),$sa(t._awe[i._s.id],"A5CustomScroll",i._s.cX+","+i._s.cY),t._sDif=Math.max(t._sDif,Math.max(Math.abs(i.startX-i.x),Math.abs(i.startY-i.y))),t._scrlEvnt(t._awe[i._s.id])}i._cB&&n&&o?i._cX.a&&i._cY.a?t._w[i._cX.id].c.onMove&&t._w[i._cX.id].c.onMove.call(t._awe[i._cX.id],i,t._w[i._cX.id].c,e):Math.max(Math.abs(i.customMoveX),Math.abs(i.customMoveY))>t._w[i._cX.id].c.tolerance&&(t._w[i._cX.id].c.onStart&&t._w[i._cX.id].c.onStart.call(t._awe[i._cX.id],i,t._w[i._cX.id].c,e),i._cX.a=!0,i._cY.a=!0):(i._cX.id&&n&&!i._cX.l&&(i._cX.a?t._w[i._cX.id].c.onMove&&t._w[i._cX.id].c.onMove.call(t._awe[i._cX.id],i,t._w[i._cX.id].c,e):Math.abs(i.customMoveX)>t._w[i._cX.id].c.tolerance&&(t._w[i._cX.id].c.onStart&&t._w[i._cX.id].c.onStart.call(t._awe[i._cX.id],i,t._w[i._cX.id].c,e),i._cX.a=!0,t._w[i._cX.id].c.stopPropagation&&(i._cY.l=!0))),i._cY.id&&o&&!i._cY.l&&(i._cY.a?t._w[i._cY.id].c.onMove&&t._w[i._cY.id].c.onMove.call(t._awe[i._cY.id],i,t._w[i._cY.id].c,e):Math.abs(i.customMoveY)>t._w[i._cY.id].c.tolerance&&(t._w[i._cY.id].c.onStart&&t._w[i._cY.id].c.onStart.call(t._awe[i._cY.id],i,t._w[i._cY.id].c,e),i._cY.a=!0,t._w[i._cY.id].c.stopPropagation&&(i._cX.l=!0))))}},_end:function(e){if(A5.u.drag._da){var t=A5.u.drag,i=t._i;if(0!=i.touchId&&e){if("mouseup"==e.type)return!1;if(i.touchId!=e.changedTouches[0].identifier)return!1}if(t._da=!1,i._a=!1,i.endT=Date.now(),e){var s=t._getCoors(e);i.x=s.clientX,i.y=s.clientY,0==i.startX&&(i.startX=i.x),0==i.startY&&(i.startY=i.y)}if(i._cB&&i._cX.a&&i._cY.a?t._w[i._cX.id].c.onEnd&&t._w[i._cX.id].c.onEnd.call(t._awe[i._cX.id],i,t._w[i._cX.id].c,e):i._cX.a?t._w[i._cX.id].c.onEnd&&t._w[i._cX.id].c.onEnd.call(t._awe[i._cX.id],i,t._w[i._cX.id].c,e):i._cY.a&&t._w[i._cY.id].c.onEnd&&t._w[i._cY.id].c.onEnd.call(t._awe[i._cY.id],i,t._w[i._cY.id].c,e),i._s&&(setTimeout(function(){A5.u.drag._sDif=0},50),t._w[i._s.id])){var a=t._w[i._s.id].s;a.onPullRelease.constructor!=Function||0==i._s.pXP&&0==i._s.pYP||a.onPullRelease.call(t._awe[i._s.id],i,a,i._s.pXP*-1,i._s.pYP*-1,e);var n=$(i._s.id),o=a.snap;if("undefined"!=typeof o&&o.constructor==Function&&(o=o()),i.hasMomentum&&a.momentum.allow||0!=i._s.pXP||0!=i._s.pYP||o||"undefined"!=typeof i.overrideX||"undefined"!=typeof i.overrideY){var r=a.momentum.duration,l=i._s.cX,d=i._s.cY;if(a.momentum.allow){var h=i.endT-i.startT,c=(i._s.vX-l)/h,u=(i._s.vY-d)/h;l=i._s.x?l-c*(r/2):l,d=i._s.y?d-u*(r/2):d}l=Math.round(Math.max(Math.min(l,i._s.mX),0)),d=Math.round(Math.max(Math.min(d,i._s.mY),0));var f=t._snap(n,l,d,o);l=f.x,d=f.y,"undefined"!=typeof i.overrideX&&(tx=i.overrideX),"undefined"!=typeof i.overrideY&&(d=i.overrideY),n.firstChild.style[A5.u.css.properties.transitionDOM]=A5.u.css.properties.transform+" "+r+"ms ease",n.firstChild.style[A5.u.css.properties.transformDOM]=A5.u.css.transform2D(l*-1,d*-1),t._st[n.id]={w:i._s.sW,h:i._s.sH,inter:setInterval(Function("A5.u.drag._scrlEvnt($('"+n.id+"'))"),50)},i._s.cX=l,i._s.cY=d,i._s.xIBEle&&(i._s.xIBEle.style[A5.u.css.properties.transitionDOM]="left "+r+"ms ease",i._s.xIBEle.style.left=i._s.cX/i._s.sW*100+"%"),i._s.yIBEle&&(i._s.yIBEle.style[A5.u.css.properties.transitionDOM]="top "+r+"ms ease",i._s.yIBEle.style.top=i._s.cY/i._s.sH*100+"%")}else i._s.xIBEle&&(i._s.xIBEle.parentNode.style.display="none"),i._s.yIBEle&&(i._s.yIBEle.parentNode.style.display="none");$sa(n,"A5CustomScroll",i._s.cX+","+i._s.cY)}this._awe={}}},_snap:function(e,t,i){var s=arguments[3];if("undefined"==typeof s&&A5.u.drag._w[e.id]&&(s=A5.u.drag._w[e.id].s.snap,"undefined"!=typeof s&&s.constructor==Function&&(s=s())),s){var a=0,n=0;if(s.x){if($u.o.assign(s.x,{step:1,offset:0},!0),(s.x.step+" "+s.x.offset).indexOf("%")!=-1)var o=A5.u.element.metrics(e);"string"==typeof s.x.offset?s.x.offset.indexOf("%")!=-1?n=o.innerWidth/100*$u.s.toNum(s.x.offset):(s.x.offset=A5.u.convertUnits(s.x.offset,"px"),n=s.x.offset):n=s.x.offset,s.x.step.constructor==Array||("string"==typeof s.x.step?s.x.step.indexOf("%")!=-1?a=o.innerWidth/100*$u.s.toNum(s.x.step):(s.x.step=A5.u.convertUnits(s.x.step,"px"),a=s.x.step):a=s.x.step,t=Math.round((t-n)/a)*a+n)}if(s.y){if($u.o.assign(s.y,{step:1,offset:0},!0),(s.y.step+" "+s.y.offset).indexOf("%")!=-1)var o=A5.u.element.metrics(e);"string"==typeof s.y.offset?s.y.offset.indexOf("%")!=-1?n=o.innerHeight/100*$u.s.toNum(s.y.offset):(s.y.offset=A5.u.convertUnits(s.y.offset,"px"),n=s.y.offset):n=s.y.offset,s.y.step.constructor==Array||("string"==typeof s.y.step?s.y.step.indexOf("%")!=-1?a=o.innerHeight/100*$u.s.toNum(s.y.step):(s.y.step=A5.u.convertUnits(s.y.step,"px"),a=s.y.step):a=s.y.step,i=Math.round((i-n)/a)*a+n)}}return{x:t,y:i}},_scrlTranEnd:function(e,t){t._st[this.parentNode.id]&&(clearInterval(t._st[this.parentNode.id].inter),delete t._st[this.parentNode.id]),this.style[A5.u.css.properties.transitionDOM]="";var i=$(this.parentNode.id+".SCROLLINDICATOR.X");i&&(i.style.display="none");var i=$(this.parentNode.id+".SCROLLINDICATOR.Y");i&&(i.style.display="none"),t._scrlEvnt(this.parentNode)},_scrlEvnt:function(e){if(e){var t=document.createEvent("UIEvent");t.initEvent("scroll",!0,!0),e.dispatchEvent(t)}},_setupI:function(e,t,i,s){e.touchId=s,e._a=!0,e.startT=Date.now(),e.endT=!1,e.x=t,e.y=i,e.startX=e.x,e.startY=e.y,e.moveX=0,e.moveY=0,e.customMoveX=0,e.customMoveY=0,e.maxX=0,e.minX=0,e.maxY=0,e.minY=0,e.hasMomentum=!1,e._s=!1,e._cX=!1,e._cY=!1,e._cB=!1},stop:function(){A5.u.drag._i._a&&this._end(!1)},start:function(e){this.stop();var t="*a5unbound";this._w[t]||(this._w[t]={c:!1,s:!1,p:!1,i:{}}),$u.o.assign(e,{touchId:!1,axis:"both",onMove:!1,onEnd:!1,endOnUp:!0},!0),e.tolerance=0,this._w[t].c=e;var i=A5.u.drag,s=i._i;i._setupI(s,!1,!1,e.touchId),i._awe={},i._awe[t]={},i._w[t].c&&!i._w[t].c.disabled&&("x"!=i._w[t].c.axis||s._cX?"y"!=i._w[t].c.axis||s._cY?(s._cX||(s._cX={id:t,l:!1,a:!0,f:0==s._s}),s._cY||(s._cY={id:t,l:!1,a:!0,f:0==s._s})):s._cY={id:t,l:!1,a:!0,f:0==s._s}:s._cX={id:t,l:!1,a:!0,f:0==s._s}),1==s._cX&&(s._cX=!1),1==s._cY&&(s._cY=!1),s._cX||(s._cX={id:!1,a:!1,l:!1,f:!1}),s._cY||(s._cY={id:!1,a:!1,l:!1,f:!1}),s._cX.id&&s._cY.id&&s._cX.id==s._cY.id&&(s._cB=!0),this._init(),i._da=!0},add:function(e,t,i){if(!("scroll"!=t||(A5.flags.supportsTouch||"always"==this.useDragScrolling&&A5.u.css.supportsTransition)&&"never"!=this.useDragScrolling))return!1;if(e=this._gEle(e),"true"!=$ga(e,"A5HasDrag")&&delete this._w[e.id],this._add(e),"scroll"==t){var s=e.firstChild,a="";if(s&&"undefined"!=typeof s.tagName&&(a=s.id),a!=e.id+".SCROLLWRAPPER"){var n=document.createElement("div");n.id=e.id+".SCROLLWRAPPER",$ss(n,"padding-top: 1px; padding-bottom: 1px; margin-top: -1px;"),$e.add(n,A5.u.css.properties.transitionEndEvent,this._scrlTranEnd,this),(A5.flags.isIPhone||A5.flags.isIPad)&&$e.add(n,"keyup",function(){this.parentNode.scrollTop=0,this.parentNode.scrollLeft=0}),A5.flags.isAndroid&&$e.add(e,"scroll",function(){this.scrollTop=0,this.scrollLeft=0});for(var o=e.childNodes.length-1;o>=0;o--)n.insertBefore(e.childNodes[o],n.firstChild);e.appendChild(n),$e.add(e,"a5resize",this._scrlResize)}var r={};$u.o.assign(r,this.defaults.scroll),"undefined"!=typeof i.theme&&A5.themes.assign(r,i.theme,"scroll"),$u.o.assign(i,r,!0),"undefined"==typeof i.axis&&(i.axis="both"),"undefined"==typeof i.stopPropagation&&(i.stopPropagation=!1),this._w[e.id].s=i,"absolute"!=e.style.position&&(e.style.position="relative"),$sa(e,"A5CustomScroll","0,0"),$sa(e,"A5DragScrollDisabled","false"),e.style.overflow="hidden",e.style.overflowX="hidden",e.style.overflowY="hidden"}else"custom"==t?($u.o.assign(i,{axis:"both",tolerance:this.defaults.custom.tolerance,onStart:!1,onMove:!1,onEnd:!1,disabled:!1,stopPropagation:!1},!0),this._w[e.id].c=i):"prevent"==t&&(this._w[e.id].p=!0);$sa(e,"A5HasDrag","true"),this._init()},remove:function(e,t){e=$(e),this._w[e.id]||(this._w[e.id]={}),this._i._a&&this._i._s.id==e.id&&this.stop(),"scroll"==t?(this._w[e.id].s=!1,$e.remove(e,"a5resize",this._scrlResize)):"custom"==t?this._w[e.id].c=!1:"prevent"==t&&(this._w[e.id].p=!1),this._rem(e)},setDisabled:function(e,t,i){if(e=$(e),this._w[e.id])if("scroll"==t&&this._w[e.id].s){this._w[e.id].s.disabled=i;var s="undefined"==typeof arguments[3]||arguments[3];s&&(e.firstChild.style[A5.u.css.properties.transformDOM]=A5.u.css.transform2D(0,0)),$sa(e,"A5DragScrollDisabled",""+i)}else this._w[e.id].c&&(this._w[e.id].c.disabled=i)},_scrlResize:function(){if(document.activeElement&&document.activeElement!=document.body){for(var e=document.activeElement,t=e.parentNode;t!=this&&t!=document.body;)t=t.parentNode;if(t==this)return A5.u.element.setScroll(this,e),!0}var i=A5.u.element.getScroll(this);A5.u.element.setScroll(this,i.left,i.top)},_gEle:function(e){return e=$(e),e.unselectable=!0,$ss(e,$gs(e)+"; -moz-user-select: -moz-none; -khtml-user-select: none; -webkit-user-select: none; -ms-user-select: none; user-select: none;"),""==e.id&&(e.id=A5.u.getUniqueId()),e},_init:function(){this._di||($e.add(document.body,"touchmove",this._move),$e.add(document.body,"touchend",this._end),$e.add(document.body,"touchcancel",this._end),$e.add(document.documentElement,"mousemove",this._move),$e.add(document.documentElement,"mouseup",this._end),this._di=!0)},_add:function(e){this._w[e.id]||(this._w[e.id]={c:!1,s:!1,p:!1,i:{}},$e.add(e,A5.d.evnts.down,this._start),$e.add(e,"selectstart",this._dStop),$e.add(e,"dragstart",this._dStop))},_rem:function(e){this._w[e.id].c||this._w[e.id].s||($e.remove(e,A5.d.evnts.down,this._start),$e.remove(e,"selectstart",this._dStop),$e.remove(e,"dragstart",this._dStop),delete this._w[e.id])},_getCoors:function(e){var t=e.type;return"touch"==t.substr(0,5)?{clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}},_dStop:function(e){var t=e.target||e.srcElement;if(t){var i=t.tagName;if(i&&(i=i.toLowerCase(),"input"==i||"textarea"==i))return null}return $e.stopEvent($e.getEvent(e)),!1}},A5.d._numFrm={},Number.prototype.toFormat=function(e){var t=this.parseFormat(e),i=this,s=!1;if(i<0&&(s=!0),t.constructor==Array){for(var a=0;a<t.length&&!t[a].condition(i);a++);e=t[a]}else e=t;if("mask"==e.type){i=i.toString().split(".").join("").split("");for(var n=[],o=0;o<e.mask.length;o++)"#"==e.mask[o]?n.push(i.shift()):n.push(e.mask[o]);i=n.join("")}else if("text"==e.type)i=e.text;else{if("number"==typeof e.fix.to){var r=Math.pow(10,e.fix.to),l=0;e.fix.direction>0?l=.49999:e.fix.direction<0&&(l=-.49999),i=Math.round(Math.abs(i)*r+l)/r}i=i.toString().split(".");var d="";i.length>1&&(d=i[1]);var h=i[0];if(h.length<e.integer.pad.to&&(h=$u.s.pad(h,e.integer.pad.to,e.integer.pad.character)),0!=e.integer.group.every){for(var c=0,u=[],o=h.length-1;o>=0;o--)u.unshift(h.charAt(o)),c++,c==e.integer.group.every&&0!=o&&(u.unshift(e.integer.group.character),c=0);h=u.join("")}if(d.length<e.fractional.pad.to?d=$u.s.pad(d,e.fractional.pad.to,e.fractional.pad.character,"r"):e.fractional.pad.to==-1&&d.length<e.fix.to?d=$u.s.pad(d,e.fix.to,e.fractional.pad.character,"r"):0!=e.fix.to&&d.length>e.fix.to&&(d=d.substr(0,e.fix.to)),e.fractional.displayAsFraction){var f="";d=Number("."+d),f=d.toFraction(),d=""}i=""!=d.trim()?e.prefix+h+e.fractional.character+d+e.suffix:e.prefix+h+e.suffix,!s||"-"!=e.negative&&"("!=e.negative||(i="-"==e.negative?"-"+i:"("+i+")"),e.fractional.displayAsFraction&&(i=i.split("-/-").join(f))}return i},Number.prototype.parseFormat=function(e){var t={condition:function(){return!0},process:!1,type:"number",mask:"",text:"",fix:{to:!1,direction:0},integer:{group:{every:!1,character:","},pad:{to:0,character:"0"}},fractional:{character:".",displayAsFraction:!1,pad:{to:0,character:"0"}},negative:"",prefix:"",suffix:""};if(""==e&&(e={},$u.o.assign(e,t),e.negative="-"),"string"==typeof e){if("undefined"!=typeof A5.d._numFrm[e])return A5.d._numFrm[e];var i=e.split(";");e=[];for(var s="",a="",n=0,o=0,r=0,l=!1,d="",h="",c="p",u=!1,f=!0,p=!1,m=/[#_0][^#_0][#_0\*]|[#_0]\]/g,_=0;_<i.length;_++){if(n=0,o=0,r=0,l=!1,c="p",u=!1,e[_]={},$u.o.assign(e[_],t),i[_]=this._escapeStrFrm(i[_],!0),"if("==i[_].substr(0,3)&&(i[_]=i[_].split(")"),s="n = arguments[0]; return "+i[_].shift().substr(3),e[_].condition=Function(s),i[_]=i[_].join(")"),p=!0),i[_].search("=\\(")!=-1&&")"==i[_].substr(i[_].length-1)&&(s="n = arguments[0]; return "+i[_].substr(i[_].search("=\\(")+1),e[_].process=Function(s),i[_]=i[_].substr(0,i[_].search("=\\("))),i[_].search("-/-")!=-1&&(e[_].fractional.displayAsFraction=!0),"="==i[_].substr(0,1))i[_]=i[_].substr(1),e[_].type="mask",e[_].mask=i[_];else{s=i[_].match(m),null!=s&&1==s.length&&(f=!1);for(var g=0;g<i[_].length;g++)d=i[_][g],h=g==i[_].length-1?"":i[_][g+1],"#"!=d&&"0"!=d&&"_"!=d||"s"==c?"["!=d&&"<"!=d&&">"!=d||"i"!=c?"]"==d&&"i"==c?(u||(e[_].fix.to=0,"<"==h?(e[_].fix.direction=1,g++):">"==h&&(e[_].fix.direction=-1,g++)),c="s"):"#"!=h&&"0"!=h&&"_"!=h&&"*"!=h||"s"==c||"p"==c?"<"!=d&&">"!=d||"f"!=c?("i"==c?c="s":"f"==c&&(c="s",e[_].fix.to=o,e[_].fractional.pad.to=n,e[_].fractional.pad.character=a),"p"==c?e[_].prefix=e[_].prefix+d:"s"==c&&(e[_].suffix=e[_].suffix+d)):"<"==d?e[_].fix.direction=1:">"==d&&(e[_].fix.direction=-1):"i"==c&&"*"!=h&&0==e[_].integer.group.every&&f?(e[_].integer.group.character=d,e[_].integer.group.every=3,l=!0):(e[_].fractional.character=d,e[_].integer.pad.to=n,e[_].integer.pad.character=a,"*"==h?(c="s",g++):(a="",n=0,c="f")):(u=!0,"<"==d?e[_].fix.direction=1:">"==d&&(e[_].fix.direction=-1),e[_].fix.to=0):("p"==c?c="i":"i"==c&&u&&e[_].fix.to--,"f"==c?o++:"i"==c&&l&&r++,"#"!=d&&(n++,a=d));e[_].integer.group.every=r,e[_].prefix=this._escapeStrFrm(e[_].prefix,!1),e[_].suffix=this._escapeStrFrm(e[_].suffix,!1),e[_].prefix.search("\\(")==-1&&e[_].prefix.search("-")==-1&&e[_].suffix.search("\\(")==-1&&e[_].suffix.search("-")==-1&&(e[_].negative="-"),"f"==c?(e[_].fix.to=o,e[_].fractional.pad.to=n,e[_].fractional.pad.character=a):"p"==c&&(e[_].type="text",e[_].text=e[_].prefix)}0==p&&e.length>1&&(2==e.length?(e[0].condition=function(e){return e>=0},e[1].condition=function(e){return e<0}):(e[0].condition=function(e){return e>0},e[1].condition=function(e){return e<0},e[2].condition=function(e){return 0==e}))}A5.d._numFrm[i.join(";")]=e}else if(e.constructor==Aray)for(var _=0;_<e.length;_++)$u.o.assign(e[_],t,!0),""==e[_].negative&&(e[_].negative="-");else $u.o.assign(e,t,!0),""==e.negative&&(e.negative="-");return e},Number.prototype._escapeStrFrm=function(e,t){var i=[["\\(","A5PARENO"],["\\)","A5PARENC"],["\\=","A5EQUALS"]],s=0,a=1;t||(s=1,a=0);for(var n=0;n<i.length;n++)e=e.replace(i[n][s],i[n][a]);return e},Number.prototype.toFraction=function(){var e=this;for(whole=String(e).split(".")[0],e=parseFloat("."+String(e).split(".")[1]),num="1",i=0;i<String(e).length-2;i++)num+="0";for(e*=num,num=parseInt(num),i=2;i<e+1;i++)e%i==0&&num%i==0&&(e/=i,num/=i,i=2);2==e.toString().length&&3==num.toString().length?(e=Math.round(Math.round(e)/10),num=Math.round(Math.round(num)/10)):2==e.toString().length&&2==num.toString().length?(e=Math.round(e/10),num=Math.round(num/10)):(e=Math.round(e),num=Math.round(num));var t=function(e,t){for(var i=e,s=t;;){if(!(i%=s))return s;if(!(s%=i))return i}}(e,num);return(0==whole?"":whole+" ")+e/t+"/"+num/t},A5.u.css.transform2D=function(e,t){return"number"==typeof e&&(e+="px"),"number"==typeof t&&(t+="px"),A5.flags.isOpera?"translate("+e+","+t+")":"translate3d("+e+","+t+",0px)"},document.all&&"Opera"!=navigator.appName&&!window.atob?A5.u.css.supportsTransition=!1:A5.u.css.supportsTransition=!0,A5.flags.isFireFox?A5.u.css.properties={transform:"-moz-transform",transformDOM:"MozTransform",transitionDOM:"MozTransition",transitionEndEvent:"transitionend"}:A5.flags.isOpera?A5.u.css.properties={transform:"-o-transform",transformDOM:"OTransform",transitionDOM:"OTransition",transitionEndEvent:"oTransitionEnd"}:A5.flags.isWebKit?A5.u.css.properties={transform:"-webkit-transform",transformDOM:"webkitTransform",transitionDOM:"webkitTransition",transitionEndEvent:"webkitTransitionEnd"}:A5.u.css.properties={transform:"transform",transformDOM:"transform",transitionDOM:"transition",transitionEndEvent:"transitionend"},Date.now||(Date.now=function(){return(new Date).getTime()}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),window.JSON||(window.JSON={parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(e){if(e instanceof Object){var t="";if(e.constructor===Array){for(var i=0;i<e.length;t+=this.stringify(e[i])+",",i++);return"["+t.substr(0,t.length-1)+"]"}if(e.toString!==Object.prototype.toString)return'"'+e.toString().replace(/"/g,"\\$&")+'"';for(var s in e)t+='"'+s.replace(/"/g,"\\$&")+'":'+this.stringify(e[s])+",";return"{"+t.substr(0,t.length-1)+"}"}return"string"==typeof e?'"'+e.replace(/"/g,"\\$&")+'"':String(e)}});var Report=Class.create();Report.prototype={initialize:function(e,t){this.reportId=e,this.templateId=t,this._prepareReport($(this.reportId))},populate:function(e){var t=!1;for(var i in e)if(e[i].constructor==Array){var t=$(this.reportId+"."+i);this._addRows(this.templateId+"."+i,this.templateId+"."+i,t,e[i],!1)}else $svs(this.reportId+"."+i,e[i]);var s=e["*state"];s&&this._setState(s)},_prepareReport:function(e){for(var t=0;t<e.childNodes.length;t++)e.childNodes[t].getAttribute&&""!=e.childNodes[t].getAttribute("A5ReportDataIndex")&&e.childNodes[t].getAttribute("A5ReportDataIndex")&&(e.childNodes[t].id=this.reportId+"."+e.childNodes[t].getAttribute("A5ReportDataIndex")),e.childNodes[t].childNodes&&0!=e.childNodes[t].childNodes.length&&this._prepareReport(e.childNodes[t])},_addRows:function(e,t,i,s,a){var n=!1,o=$(e).getAttribute("A5ReportFlatten");""!=o&&o&&(a=$u.s.toBool(o));for(var r="",l=0;l<s.length;l++){a?$(e)&&(n=document.getElementById(e).cloneNode(!0),n.id=t+"["+l+"]",i.appendChild(n),this._fillRow(n,s[l],t+"["+l+"]")):(n=document.getElementById(e).cloneNode(!0),n.id=t+"["+l+"]",i.appendChild(n),this._fillRow(n,s[l],t+"["+l+"]"));for(r in s[l])s[l][r].constructor==Array&&this._createGroup(e+"."+r,t+"["+l+"]."+r,n,s[l][r],a);a&&$(e+"~")&&(n=document.getElementById(e+"~").cloneNode(!0),n.id=t+"["+l+"]~",i.appendChild(n),this._fillRow(n,s[l],t+"["+l+"]"))}},_createGroup:function(e,t,i,s,a){if(a)return this._addRows(e,t,i.parentNode,s,a),!1;for(var n=i.getElementsByTagName("table"),o=!1,r=0;r<n.length;r++)if(n[r].getAttribute("A5ReportGroupIndex")==e){o=n[r];break}o&&(o.id=t,this._addRows(e,t,o,s,a))},_fillRow:function(e,t,i){for(var s=0;s<e.childNodes.length;s++)e.childNodes[s].getAttribute&&(""!=e.childNodes[s].getAttribute("A5ReportDataIndex")&&e.childNodes[s].getAttribute("A5ReportDataIndex")&&("img"==e.childNodes[s].tagName.toLowerCase()?e.childNodes[s].src=t[e.childNodes[s].getAttribute("A5ReportDataIndex")]:e.childNodes[s].innerHTML=t[e.childNodes[s].getAttribute("A5ReportDataIndex")]),""!=e.childNodes[s].getAttribute("A5ReportDataAttrib")&&e.childNodes[s].setAttribute("A5ReportDataAttrib",t[e.childNodes[s].getAttribute("A5ReportDataAttrib")]),""!=e.childNodes[s].getAttribute("A5ReportConditionIndex")&&e.childNodes[s].getAttribute("A5ReportConditionIndex")&&(t[e.childNodes[s].getAttribute("A5ReportConditionIndex")]||(e.childNodes[s].style.display="none")),""!=e.childNodes[s].getAttribute("A5ReportRecordReference")&&e.childNodes[s].getAttribute("A5ReportRecordReference")&&("."!=e.childNodes[s].getAttribute("A5ReportRecordReference")?e.childNodes[s].setAttribute("A5ReportRecordReference",i+"."+e.childNodes[s].getAttribute("A5ReportRecordReference")):e.childNodes[s].setAttribute("A5ReportRecordReference",i)),""!=e.childNodes[s].getAttribute("A5ReportGeneratedId")&&e.childNodes[s].getAttribute("A5ReportGeneratedId")&&(e.childNodes[s].id=i+"."+e.childNodes[s].getAttribute("A5ReportGeneratedId")),""!=e.childNodes[s].getAttribute("A5ReportClassNameIndex")&&e.childNodes[s].getAttribute("A5ReportClassNameIndex")&&$acn(e.childNodes[s],t[e.childNodes[s].getAttribute("A5ReportClassNameIndex")])),e.childNodes[s].childNodes&&0!=e.childNodes[s].childNodes.length&&this._fillRow(e.childNodes[s],t,i)},_toggleBranch:function(e){var t=e.split("."),i=t.pop();t=t.join(".");var s=$(e);"none"==s.style.display?(s.style.display="",$acn(t,i+"_isOpen")):(s.style.display="none",$rcn(t,i+"_isOpen"))},_toggleRow:function(e,t){var i=$(t);"none"==i.style.display?(i.style.display="",$acn(e,"A5ReportButtonExpanded")):(i.style.display="none",$rcn(e,"A5ReportButtonExpanded"))},_toggleColumn:function(e,t){var i=e.getAttribute("A5ReportRecordReference"),s=$(i),a=s.className;a&&a.indexOf("hide"+t)>-1?($rcn(s,"hide"+t),$acn(e,"A5ReportButtonExpanded")):($acn(s,"hide"+t),$rcn(e,"A5ReportButtonExpanded"))},_setCurrentRow:function(e,t){var i=e.name,s=e.offset,a=e.child,n=t+i,o=n.split("."),r=$(n);if(!r)return void alert("Could not find branch "+n);if("none"==r.style.display&&(r.style.display="",$acn(o,i+"_isOpen")),a)this._setCurrentRow(a,t+i+"["+(s-1)+"].");else{var l=t+i+"["+(s-1)+"]",d=$(l);d&&(d.focus(),d.scrollIntoView())}},_setState:function(e){var t=e.current_row;t&&this._setCurrentRow(t,this.templateId+".")}},A5.GridComponentHelper=Class.create(),A5.GridComponentHelper.prototype={initialize:function(e,t){this.gridId=e,$u.o.assign(t,{ajaxURL:"",gridColumnInfo:[],detailViewColumnInfo:[],rowRefreshOnFocus:!1,rowRefreshOnDirty:!1,pageNumber:0,pagesInGrid:0,rowsPerPage:0,actualRowsOnPage:0,logicalRecordNumberFirstRecordOnPage:0,_gridRowState:"view",_detailViewState:"view",fieldErrors:{type:"",className:"",inputClassName:"",icon:"",global:{contId:"",hoverClassName:"",hoverInputClassName:""}},rowErrors:{showMessageBox:!1,messageBoxTitle:"Errors",style:"width: 6in; height: 2in; color:red;"},detailViewDataPreFetch:!1,detailViewRefreshOnDirty:!1,detailViewScrollIntoView:!1,detailViewAnimation:{show:{type:"",duration:1e3},hide:{type:"",duration:1e3}},_readOnly:!1,_embeddedMode:!1,_batchChange:!1,hasEditRowMenu:!1,_editPermissions:{allowDelete:!0,allowInsert:!0,allowUpdate:!0},onColumnSort:0,onDetailViewNewRecord:0},!0),$u.o.assign(this,t,!0),this._gridRowWatches=new Object,this._detailViewWatches=new Object,this._gridWatches=new Object,this._searchWatches=new Object,this._searchValues=new Object,this.stateInfo={},this._currentSubmitTimeStamp=!1,this._submitTestInterval=5e3,this._buttons=[],this._menus=[],this._menuData=[],this._ajaxCallbackCompleteCode={},this.fieldErrors.global.contId=this.gridId+".GLOBALERRORS",this._eh=new A5.ErrorHandler(this.fieldErrors),this._reh=new A5.ErrorHandler({type:"tip",className:"errorTip",inputClassName:""}),this._gridColNames=new Array;for(var i=0;i<this.gridColumnInfo.length;i++)this._gridColNames.push(this.gridColumnInfo[i].name);this._detailViewColNames=new Array;for(var i=0;i<this.detailViewColumnInfo.length;i++)this._detailViewColNames.push(this.detailViewColumnInfo[i].name);if(this._searchColNames=new Array,this.searchColumnInfo)for(var i=0;i<this.searchColumnInfo.length;i++)this._searchColNames.push(this.searchColumnInfo[i].name);this.hasEditRowMenu&&(this._rowMenuRow=0,this._rowMenuTO=0,this._rowMenuId=this.gridId+".EDITROWMENU",$e.add(this._rowMenuId,"mouseover",this._rowMenuStopHide,this,!0),$e.add(this._rowMenuId,"mouseout",this._rowMenuMOut,this)),this.rowOnDblClick.constructor!=Function&&"string"!=typeof this.rowOnDblClick&&(this.rowOnDblClick="");var s=$(this.gridId+".GRID_PART.FORM_CONTAINER_DIV"),a=document.createElement("button");a.id=this.gridId+".FOCUSCATCHER",$ss(a,"position: absolute; font-size: 0px; outline: none; opacity: 0; filter: alpha(opacity=0); height: 0px; width: 0px"),$e.add(a,"focus",this._setControlFocus,this),$e.add(a,"blur",this._setControlBlur,this);var n=document.createElement("div");n.style.position="relative",n.appendChild(a),s.parentNode.insertBefore(n,s),this._focusRow=0,this._selectedRow=0,this._focusControl="",this._focusControl2="",this._dvFocustControl="",this._dvFocustControl2="",this._focusRowTO=0,this._helpTO=0,this._detailViewRow=0,this._detailViewIsDirty=!1,this._disabledBySecurity=[],this._disabledBySecurityDV=[],this._cascadingSelectChoices=new Object,this._dVImages=new Object,this._kw=new AUI.KeyWatcher([{key:"F1",handle:this._keyF1},{key:"up",handle:this._keyPrevRow},{key:"down",handle:this._keyNextRow},{key:"F9",handle:this._keySave},{key:"SHIFT+F9",handle:this._keySaveAll},{key:"ENTER",handle:this._keyEnter},{key:"PAGEUP",handle:this._keyPageUp},{key:"PAGEDOWN",handle:this._keyPageDown},{key:"F2",handle:this._keyOpenLookupWindow},{key:"CTRL+D",handle:this._keyDeleteRecord},{key:"ESCAPE",handle:this._keyEscape}],this),this._dvkw=new AUI.KeyWatcher([{key:"F1",handle:this._dvKeyF1},{key:"F9",handle:this._dvKeySave},{key:"CTRL+F9",handle:this._dvKeySaveAndEnter},{key:"ESCAPE",handle:this._dvKeyEscape},{key:"F2",handle:this._dvKeyOpenLookupWindow},{key:"CTRL+D",handle:this._dvKeyDeleteRecord}],this),this._originalValues=new Array,this._originalNullValues=new Array,this._originalDVValues=new Array,this._originalDVNullValues=new Array,this._localDVNullValues=new Array,this._checkedRowKeys=new Array,this._openLookupWindows=new Array,this._openDVLookupWindows=new Array,this._qbeMenu={c:["EXACTMATCH","STARTSWITH","ENDSWITH","CONTAINS","GREATERTHAN","GREATERTHANOREQUALTO","LESSTHAN","LESSTHANOREQUALTO","WILDCARD","QBESYNTAX","ISBLANK","ISNULL","ISNOTBLANK","ISNOTNULL"],n:["EXACTMATCH","GREATERTHAN","GREATERTHANOREQUALTO","LESSTHAN","LESSTHANOREQUALTO","QBESYNTAX","ISNULL","ISNOTNULL"],l:["EXACTMATCH","ISNULL","ISNOTNULL"],d:["EXACTMATCH","GREATERTHAN","GREATERTHANOREQUALTO","LESSTHAN","LESSTHANOREQUALTO","QBESYNTAX","ISBLANK","ISNULL","ISNOTBLANK","ISNOTNULL"]},this._qbeMenu.e=this._qbeMenu.n,this._qbeMenu.t=this._qbeMenu.d,this._qbeMenu.y=this._qbeMenu.t,this._dvFloatingWindow=0,this._floatingLookupWindow={},this._defaultWindowSettings=new Object,this._defaultWindowSettings.dropdown={type:"popup",theme:this.styleName,title:{html:"Null",show:!1},body:{content:{type:"blank"}}},this._genericWindow=new Object;var o={action:"close",name:"Close",image:"images/$$window.button.close.png.a5image"};"undefined"!=typeof A5.themes&&"undefined"!=typeof A5.themes._t[this.styleName]&&(o=A5.themes._t[this.styleName].window.base._defaultTools.close),this._defaultWindowSettings.modal={type:"modal",autoPosition:"in-view",theme:this.styleName,title:{html:"Window",tools:{items:[o],dummy:!1}},body:{content:{type:"blank"}}},this._defaultWindowSettings.modalpopup={type:"modal-popup",autoPosition:"in-view",theme:this.styleName,title:{html:"Window",tools:{items:[o],dummy:!1}},body:{content:{type:"blank"}}},this._defaultWindowSettings.modeless={type:"modeless",autoPosition:"in-view",theme:this.styleName,title:{html:"Window",tools:{items:[o],dummy:!1}},body:{content:{type:"blank"}}},this._defaultWindowSettings.modelesspopup={type:"popup",autoPosition:"in-view",theme:this.styleName,title:{html:"Window",tools:{items:[o],dummy:!1}},body:{content:{type:"blank"}}},this._dirtyRows=new Array,this._dirtyNewRows=new Array,this._editModeRows=new Array,this._isDirty=!1,this._functions={},this._fieldHelpers_S=new Object,this._fieldHelpers_G=new Object,this._fieldHelpers_DV=new Object,this._detailViewWindowState="",this._refreshLinkedContentTO=0,this._keyPageNavigateTO=0,this._gridFilter="",this._gridOrder="",this._gridArguments="",this._gridDBType="",this._vars={SESSION:{},PAGEVARIABLE:{}},this._hiddenCols=new Array},_destroy:function(){var e=this.wsclient;e&&e.disconnect();var t=0;for(var i in this._genericWindow)t=$(this._genericWindow[i].getWindowId("body")),"div"==t.tagName.toLowerCase()&&(t.innerHTML="");this.autoRefreshStop()},_executeEvent:function(e){for(var t=!0,i=new Array,s=1;s<arguments.length;s++)i.push(arguments[s]);var a=!1;return"undefined"!=typeof this[e]&&this[e].constructor==Function&&(a=this[e].apply(this,i),"boolean"==typeof a&&(t=a)),"undefined"!=typeof this["_"+e]&&this["_"+e].constructor==Function&&(a=this["_"+e].apply(this,i),"boolean"==typeof a&&(t=t&&a)),"onRowSelect"!=e&&"onRowStateChange"!=e||this._fireWatches("G",i[0].rowNumber),"onDetailViewStateChange"!=e&&"afterDetailViewCancelEdits"!=e||this._fireWatches("D",1),"afterDetailViewSubmit"!=e&&"afterGridSubmit"!=e&&"afterRowSubmit"!=e||(this._currentSubmitTimeStamp=!1),t},_getCurrentKey:function(e){return"undefined"==typeof this._keys?(this._rowsInGrid>0&&alert("Primary key for Grid was not defined."),
""):e<0?"":"undefined"==typeof this._keys[e-1]?"":this._keys[e-1].join("|||")},_setRowKeys:function(e){this._keys=e},_rowMenuMOver:function(e,t){t._rowMenuStopHide(),t._rowMenuRow=Number(this.id.split(".")[1].substr(1));var i=$(t._rowMenuId);$po(i,this,"dropdown"),i.style.display="block"},_rowMenuMOut:function(e,t){t._rowMenuTO=setTimeout(function(){t._rowMenuHide()},200)},_rowMenuHide:function(){$(this._rowMenuId).style.display="none"},_rowMenuStopHide:function(){clearTimeout(this._rowMenuTO)},_setStateInfo:function(e,t){var i=this.gridId+".STATEINFO",s=$gvs(i),a=e+"=",n=a.length;if(s.indexOf("&"+a)!=-1){s=s.split("&");for(var o=s.length-1;o>=0;o--)if(s[o].substr(0,n)==a)return s[o]=A5.ajax.buildURLParam(e,t),$svs(i,s.join("&")),!0}else s=s+"&"+A5.ajax.buildURLParam(e,t),$svs(i,s)},setErrors:function(e){for(var t=0;t<e.length;t++){var i="",s="",a="";5==e[t].id.split(".").length?(i=e[t].id.split(".")[4],s=e[t].id.split(".")[1],a=e[t].id.split(".")[3].replace("R","")):4==e[t].id.split(".").length&&(i=e[t].id.split(".")[3],s="G",a=e[t].id.split(".")[2].replace("R","")),this.activateControlContainer(i,s,a),this._eh.set(e[t].id,e[t].message)}},_dynamicMask:function(e){if(window[this.format.maskFunctionName]){var t=this._editTargetId;t=t.split("."),t=t[1];var i=window[this.format.maskComponentObject],s={};return s.rowNumber=i._selectedRow,"S"==t||"D"==t?s.part=t:s.part="G",window[this.format.maskFunctionName].call(i,s)}return""},getSelectedRow:function(){var e=this._selectedRow,t=!1,i=$(this.gridId+".R"+e);return null!=$ga(i,"a5deletedrow")&&(t=!0),t?null:e},getRowsInGrid:function(){if(!this._editPermissions.allowDelete&&!this._editPermissions.allowInsert&&!this._editPermissions.allowUpdate)return this._rowsInGrid;for(var e=$(this.gridId+".GRID_PART.DATAREGION").getElementsByTagName("tbody"),t=e.length,i="",s="",a="",n=0,o=0;o<t;o++)flagDelete=$ga(e[o],"a5deletedrow"),i=$ga(e[o],"a5dataregion"),"A5DataRegion"==i&&null==flagDelete&&(a=e[o].id,s=a.split("."),s=String(s[1]),s=s.replace("R",""),s=Number(s),s>0&&(n+=1));return n},getSessionVariable:function(e){return e=e.toUpperCase(),this._vars.SESSION[e]},getPageVariable:function(e){return e=e.toUpperCase(),this._vars.PAGEVARIABLE[e]},_getGridVariables:function(e,t){var i="undefined"!=typeof arguments[2]?arguments[2]:{};if("undefined"!=typeof i.rowNumber)var s=i.rowNumber;else var s=this._selectedRow;e.recordsInGrid=0,"undefined"!=typeof this._rowsInGrid&&(e.recordsInGrid=this._rowsInGrid),e.rowState=this._gridRowState,e.pageNumber=this.pageNumber,e.pagesInGrid=this.pagesInGrid,s>0?e.logicalRecordNumber=(e.pageNumber-1)*this.rowsPerPage+s:e.logicalRecordNumber=0,e.isNewRecordRow=$if(s>0,!1,!0),e.hasDetailView=$if(this._detailViewColNames.length>0,!0,!1),0==e.hasDetailView?(e.isDirty=this._isDirty,s>0?e.isRowDirty=this._dirtyRows[s-1]:e.isRowDirty=this._dirtyNewRows[s*-1-1]):(e.isDirty=!1,e.isRowDirty=!1),e.isOnFirstPage=$if(1==e.pageNumber,!0,!1),e.isOnLastPage=$if(e.pageNumber==e.pagesInGrid,!0,!1),e.hasNextPage=$if(e.pageNumber<e.pagesInGrid,!0,!1),e.hasPrevPage=$if(e.pageNumber>1,!0,!1),0==e.hasDetailView?(t.rowState="",t.isOnFirstRecord=!1,t.isOnLastRecord=!1,t.hasNextRecord=!1,t.hasNextRecord=!1,t.isDirty=!1):(t.rowState=this._detailViewState,t.isOnFirstRecord=$if(1==s&&1==e.pageNumber,!0,!1),t.isOnLastRecord=$if(s==this._rowsInGrid&&e.pageNumber==e.pagesInGrid,!0,!1),t.hasNextRecord=$if(e.pageNumber<e.pagesInGrid||s<this._rowsInGrid,!0,!1),t.hasPrevRecord=$if(1==e.pageNumber&&1==s,!1,!0),t.isDirty=$if(this._detailViewIsDirty,!0,!1));var a=0;if("singlePage"==this.checkBoxSelector)for(var a=0,n="",o="",r=1;r<=this._rowsInGrid;r++)n=$(this.gridId+".V.R"+r+".__ROWCHECKBOX"),o=$gvs(n),""!=$gvs(n)&&(a+=1);else if("multiplePage"==this.checkBoxSelector)var a=this._checkedRowKeys.length;e.checkedRowCount=a;var l=$(this.gridId+".V.R"+s+".__ROWCHECKBOX");e.rowIsChecked=!1,""!=$gvs(l)&&(e.rowIsChecked=!0)},clearErrors:function(){if("undefined"!=typeof arguments[0]){for(var e=new Array,t=0;t<arguments[0].length;t++)if("number"==typeof arguments[0][t])for(var i=0;i<this._eh._e.length;i++)this._eh._e[i].id.indexOf(".R"+arguments[0][t]+".")>-1&&e.push(this._eh._e[i].id);else e.push(arguments[0][t]);this._eh.clear(e)}else this._eh.clear();this.clearDetailViewGlobalError()},_confirmAction:function(){if(this._readOnly)return!0;var e="undefined"!=typeof arguments[0]&&arguments[0];return this._isDirty?(e||A5.msgBox.show(this.messages.t_dirtyRecordWarning,this.messages.dirtyRecordWarning,"O",function(){}),!1):!this._detailViewIsDirty||(e||A5.msgBox.show(this.messages.t_dirtyRecordWarning,this.messages.dirtyRecordWarning,"O",function(){}),!1)},fadeOutMessage:function(e,t){var i="undefined"!=typeof arguments[2]?arguments[2]:2e3,s="undefined"==typeof arguments[3]||arguments[3];A5.fadeOutMessage(e,t,i,s,this.styleName)},setRowErrors:function(e){var t=new Array;this._showGridErrorColumn(!0);for(var i=0;i<e.length;i++)$acn(this.gridId+".TD.R"+e[i].row+".__SYSTEM_ERRORCOLUMN","A5GridHasRowError"),e[i].id=this.gridId+".R"+e[i].row+".__SYSTEM_ROWERROR",this._reh.set(e[i].id,e[i].message),t.push(e[i].message);if(1==this.rowErrors.showMessageBox){var s=t.join("\n");s='<div style="'+this.rowErrors.style+'">'+s+"</div>",A5.msgBox.show(this.rowErrors.messageBoxTitle,s,"O")}},_setCountInfo:function(e){this.pageNumber=e[0],this.pagesInGrid=e[1],this.rowsPerPage=e[2],this.actualRowsOnPage=e[3],this.logicalRecordNumberFirstRecordOnPage=e[4]},_columnTitlesShowHide:function(e){var t=$(this.gridId+".COLUMNTITLES.TOP"),i=$(this.gridId+".COLUMNTITLES.BOTTOM");t&&(t.style.display=e),i&&(i.style.display=e)},columnTitlesRefresh:function(){0==this._rowsInGrid&&1==this.suppressTitlesIfNoRecords?this._columnTitlesShowHide("none"):this._columnTitlesShowHide("")},_clearHiddenRowData:function(e){var t="";t=$(this.gridId+"._HIDDENA5DATA.R"+e),t&&(t.value="")},clearRowErrors:function(){var e=new Array;if("undefined"!=typeof arguments[0]){for(var t=0;t<arguments[0].length;t++)this._clearHiddenRowData(arguments[0][t]),$rcn(this.gridId+".TD.R"+arguments[0][t]+".__SYSTEM_ERRORCOLUMN","A5GridHasRowError"),e.push(this.gridId+".R"+arguments[0][t]+".__SYSTEM_ROWERROR");this._reh.clear(e),0==this._reh._e.length&&this._showGridErrorColumn(!1)}else{for(var t=0;t<=this._rowsInGrid;t++)$rcn(this.gridId+".TD.R"+(t+1)+".__SYSTEM_ERRORCOLUMN","A5GridHasRowError"),e.push(this.gridId+".R"+(t+1)+".__SYSTEM_ROWERROR");this._reh.clear(),this._showGridErrorColumn(!1)}},refreshExternalTreeNavigator:function(){A5.ajax.callback(this.ajaxURL,"__FormID="+this.gridId+"&__FormAction=GenerateTreeBranches&__treeType=externalnavigator&__treeName=TREENAVIGATOR&__treeObject="+this.gridId+"_EXTERNALNAVIGATOR_TREENAVIGATOR&"+$gvs(this.gridId+".STATEINFO"))},refreshRow:function(e){if("undefined"==typeof arguments[0]&&(e=this._selectedRow),"undefined"==typeof this._keys)return alert("Row can not be refreshed because it does not have a Primary Key"),!1;if(this._dirtyRows[e-1])return!1;var t="gridEvent";"undefined"!=typeof arguments[1]&&1==arguments[1]&&(t="controlDirty");var i=this._getRowKey(e),s=this.gridId+".R"+e;data=this._harvestGrid(s),""!=data&&(data="&"+data),""!=i&&(data=data+"&"+i),this._executeEvent("beforeAjaxCallback",{ajaxEvent:"refreshRow"}),this._submitLow("refreshRow",this.gridId,this.ajaxURL,"__row="+e+"&__methodType="+t+data)},blur:function(){$(this.gridId+".FOCUSCATCHER").blur(),this._kw.off()},sort:function(e){if(!this._executeEvent("canSort",{sortColumn:e}))return!1;if(this._executeEvent("beforeAjaxCallback",{ajaxEvent:"sort"}),!this._confirmAction())return!1;var t="undefined"!=typeof arguments[1]?arguments[1]:"";e=""+e;var i=e.split(":");return"undefined"!=typeof i[1]&&(e="expression:"+urlencode(i[1])),"a"==t.toLowerCase()?this._submitLow("sortA",this.gridId,this.ajaxURL,"__sortcolumn="+e+"&__dvWindow="+this._detailViewWindowState):"d"==t.toLowerCase()?this._submitLow("sortD",this.gridId,this.ajaxURL,"__sortcolumn="+e+"&__dvWindow="+this._detailViewWindowState):this._submitLow("sort",this.gridId,this.ajaxURL,"__sortcolumn="+e+"&__dvWindow="+this._detailViewWindowState),this.clearDetailViewGlobalError(),!1},pageNavigate:function(e){if(!this._executeEvent("canPageNavigate",{target:e}))return!1;var t="undefined"!=typeof arguments[1]?arguments[1]:"G",i="undefined"!=typeof arguments[2]?arguments[2]:"";return!!this._confirmAction()&&(this._executeEvent("beforeAjaxCallback",{ajaxEvent:"PageNavigate"}),this._submitLow("PageNavigate",this.gridId,this.ajaxURL,"__targetPage="+e+"&__part="+t+"&__dvWindow="+this._detailViewWindowState+"&"+i),this.clearDetailViewGlobalError(),!1)},groupBreakShowHide:function(e,t,i){var s=!1;""==t.replace(/\s/g,"")&&(t="NULLVALUE");var a=this._rowsInGroupHeader1[t];"string"==typeof a&&(s=!0);var n="",o="",r="";r=s?a.split("|")[1]:a[0],"hide"==i&&(o="none"),"show"==i&&(o=""),"toggle"==i&&(n=$(s?this.gridId+".SNAKING."+r:this.gridId+".R"+r),n&&(i=n.style.display),o=""==i?"none":"");var l="",d=$(this.gridId+".GHCLOSE."+r),h=$(this.gridId+".GHOPEN."+r);if("none"==o?(d&&(d.style.display="none"),h&&(h.style.display="")):(d&&(d.style.display=""),h&&(h.style.display="none")),s)n=$(this.gridId+".SNAKING."+r),n&&(n.style.display=o);else for(var c in a)n=$(this.gridId+".R"+a[c]),n&&(l=$u.s.toBool(""+$ga(n,"a5deletedrow")),l||(n.style.display=o));"undefined"==typeof this._groupBreakState&&(this._groupBreakState={}),this._groupBreakState[t]=o},_applyGroupBreakState:function(){var e=this._rowsInGroupHeader1;if("undefined"==typeof this._groupBreakState)return!1;var t=this._groupBreakState,i="";for(var s in e)i=t[s],"undefined"!=typeof i&&("none"==i&&(i="hide"),""==i&&(i="show"),this.groupBreakShowHide(1,s,i))},collapseAllRows:function(){var e=!1,t=this._rowsInGroupHeader1;for(var i in t)if("string"==typeof t[i]){e=!0;break}var s="";if(e){var a="";for(var i in t){a=t[i].split("|")[1],s=$(this.gridId+".SNAKING."+a),s&&(s.style.display="none");var n=$(this.gridId+".GHCLOSE."+a),o=$(this.gridId+".GHOPEN."+a);n&&(n.style.display="none"),o&&(o.style.display="")}return!1}for(var r=1;r<=this._rowsInGrid;r++){s=$(this.gridId+".R"+r),s&&(s.style.display="none");var n=$(this.gridId+".GHCLOSE."+r),o=$(this.gridId+".GHOPEN."+r);n&&(n.style.display="none"),o&&(o.style.display="")}},refresh:function(){var e="undefined"!=typeof arguments[0]&&arguments[0];return!!this._confirmAction()&&(this._executeEvent("beforeAjaxCallback",{ajaxEvent:"refresh"}),this._submitLow("PageNavigate",this.gridId,this.ajaxURL,"__targetPage=same&__part=G&__refreshChoices="+e),this.clearDetailViewGlobalError(),!1)},argumentValue:function(e){var t=this._gridArguments;if("undefined"==typeof t)return"";var i=t.split("\n"),s="";argName="",argVal="";for(var a=1;a<=i.length;a++)if(s=i[a-1].split("|"),argName=s[s.length-1],argName.toLowerCase()==e.toLowerCase()){argVal=i[a-1].split("|||")[0];break}return argVal},getParentObject:function(){return""!=this.parentGridAlias&&("undefined"!=typeof window[this.parentGridAlias+"_GridObj"]?window[this.parentGridAlias+"_GridObj"]:"undefined"!=typeof window[this.parentGridAlias+"_DlgObj"]&&window[this.parentGridAlias+"_DlgObj"])},setFocus:function(e){if(!$(this.gridId+".R"+e))return!1;if(0!=this._focusRow&&this._executeEvent("onRowBlur",{rowNumber:this._focusRow}),this._focusRow=e,this._editModeRows[this._focusRow-1]){if(""==this._focusControl)for(i=0;i<this.gridColumnInfo.length;i++)if("label"!=this.gridColumnInfo[i].type.split(",")[0]&&"label-html"!=this.gridColumnInfo[i].type.split(",")[0]){this._focusControl=this.gridColumnInfo[i].name;break}if(""!=this._focusControl){var t=$(this.gridId+".V.R"+this._focusRow+"."+this._focusControl);1!=t.disabled&&$f(this.gridId+".V.R"+this._focusRow+"."+this._focusControl)}}else this._focusRowClick.call($(this.gridId+".R"+this._focusRow),null,this),$f(this.gridId+".FOCUSCATCHER")},setSelectedRow:function(e){if("undefined"!=typeof jQuery&&jQuery.noConflict(),"boolean"==typeof arguments[1]&&this._selectedRow!=e)var t=arguments[1];else var t=!1;if(0!=this._selectedRow&&this._selectedRow<=this._rowsInGrid&&(""!=this.rowSelectedClassName&&$(this.gridId+".R"+this._selectedRow)&&this._removeRowClassName($(this.gridId+".R"+this._selectedRow),this.rowSelectedClassName),this.hasRowSelectorIcon&&(this._selectedRow<0?""!=this.newRowSelectorIconOff?$(this.gridId+".R"+this._selectedRow)&&($(this.gridId+".R"+this._selectedRow+".__ROWSELECTOR").src=this.newRowSelectorIconOff):$(this.gridId+".R"+this._selectedRow)&&($(this.gridId+".R"+this._selectedRow+".__ROWSELECTOR").style.visibility="hidden"):""!=this.rowSelectorIconOff?$(this.gridId+".R"+this._selectedRow+".__ROWSELECTOR").src=this.rowSelectorIconOff:$(this.gridId+".R"+this._selectedRow+".__ROWSELECTOR")&&($(this.gridId+".R"+this._selectedRow+".__ROWSELECTOR").style.visibility="hidden"))),this._selectedRow=e,0!=this._selectedRow&&this._selectedRow<=this._rowsInGrid){if(""!=this.rowSelectedClassName&&this._addRowClassName($(this.gridId+".R"+e),this.rowSelectedClassName),this.hasRowSelectorIcon){var i=$(this.gridId+".R"+e+".__ROWSELECTOR");e<0?(i.src=this.newRowSelectorIconOn,""==this.newRowSelectorIconOff&&i.style&&(i.style.visibility="")):(i.src=this.rowSelectorIconOn,""==this.rowSelectorIconOff&&i.style&&(i.style.visibility=""))}}else this._selectedRow>this._rowsInGrid&&(this._selectedRow=0);t&&this._internalRefreshLinkedContent(),this._executeEvent("onRowSelect",{rowNumber:this._selectedRow})},_addRowClassName:function(e,t){if(!e)return!1;for(var i=0;i<e.childNodes.length;i++)e.childNodes[i].tagName&&e.childNodes[i].id!=e.id+".__ROWEXPAND_TR"&&$acn(e.childNodes[i],t)},_removeRowClassName:function(e,t){if(!e)return!1;for(var i=0;i<e.childNodes.length;i++)e.childNodes[i].tagName&&$rcn(e.childNodes[i],t)},_selectAllRowCheckboxes:function(e){for(i=1;i<=this._rowsInGrid;i++)$svs(this.gridId+".V.R"+i+".__ROWCHECKBOX",e),this._setCheckedRow(i,e);this._fireWatches("all")},saveSearchCriteria:function(e){return""==e?(alert("Name not specified."),!1):void this.submitSearchForm(!1,e)},_executeLoadSavedSearch:function(e,t){var i=$(e),s=$gvs(i);this.loadSavedSearch(s,t);var a=A5.windows.getFromElement(i);a.hide()},_executeSaveSavedSearch:function(e){var t=$(e),i=$gvs(t);if(eleError=$(this.gridId+".SAVESEARCHERROR"),""==i){if(eleError)return eleError.style.display="",eleError.innerHTML=this._saveSavedSearchDialog.warningBlankName,!1}else eleError.style.display="none",this.saveSearchCriteria(i)},loadSavedSearch:function(e,t){"undefined"==typeof t&&(t=!1);var i="_searchName="+e+"&_execute="+t;this.ajaxCallback("G","none","__a5systemLoadSavedSearch","",i)},loadSearchUI:function(e){var t={};t=this._loadSavedSearchDialog,this._promptRepository(e,t)},saveSearchUI:function(e){var t={};t=this._saveSavedSearchDialog,this._promptRepository(e,t)},_getRepositoryChoices:function(e,t,i,s){var a="_listBoxId="+e+"&_idToPopulate="+t+"&_repositoryDataType="+i;""!=s&&(a=a+"&"+s),this.ajaxCallback("G","none","__a5LoadFromRepository","",a)},_promptRepository:function(objEle,obj){var windowName=obj.windowName,currWindow=this.getWindow(windowName),windowDefObj={type:"modeless",body:{content:{type:"blank",elementId:"~"}},height:obj.windowHeight,width:obj.windowWidth,title:{html:"Window",location:"top"},disableMove:!0,animation:obj.windowAnimation,buttons:obj.windowButtons};currWindow||(currWindow=this.createWindow(windowName,"dropdown",windowDefObj));var windowDiv=currWindow.getWindowId("body");$(windowDiv).innerHTML=obj.windowHTML,currWindow.show("dropdown",objEle),obj.javascript&&eval(obj.javascript)},submitSearchForm:function(){var e="undefined"==typeof arguments[0]||arguments[0],t="undefined"!=typeof arguments[1]?arguments[1]:"";if(e){if(!this._executeEvent("canSearchSubmit",{}))return!1;if(!this._confirmAction())return!1}e&&this.onlyShowDetailViewOnRequest&&"page"==this.detailViewPosition&&this.hideGridWhenDetailViewIsShown&&(this._detailViewWindowState="closed");var i=this.getMapDataFromSearchPart(),s=this.gridId+".STATEINFO";if(e)var a="_submitActionType=SubmitSearchForm";else var a="_submitActionType=SaveSearchForm&_searchName="+t;return a=a+"&__dvWindow="+this._detailViewWindowState,a+=i,e&&this._executeEvent("beforeAjaxCallback",{ajaxEvent:"submitSearchForm"}),this._submitLow("submit:new",this.gridId+".SEARCH_PART.FORM",this.ajaxURL,a,!0,s,"__sf"),!1},getMapDataFromSearchPart:function(){var e="",t="",s="";if(this._searchPartMaps&&(e=this._searchPartMaps),""!=e)for(i=0;i<e.length;i++){var a=e[i],t=this["googleMap_SEARCH_"+a].computePostValues();t=t.split("&");var n="GM_"+a;t=n+"."+t.join("&"+n+"."),t="&"+t;var o=this["googleMap_SEARCH_"+a].map,r=o.getBounds(),l=r.getNorthEast(),d=r.getSouthWest(),h=l.lat(),c=l.lng(),u=d.lat(),f=d.lng(),p="&"+n+"._NElat="+h+"&"+n+"._NElng="+c+"&"+n+"._SWlat="+u+"&"+n+"._SWlng="+f;p=p+"&"+n+"._zoom="+o.getZoom(),s=s+t+p}return s},computeSearchFromMetaData:function(e){return!!this._executeEvent("canSearchSubmit",{})&&(!!this._confirmAction()&&void this.ajaxCallback("G","none","__a5systemComputeSearchFromMetaData","",e))},clearAllSearchPartMaps:function(){var e="";if(this._searchPartMaps&&(e=this._searchPartMaps),""==e)return!1;for(i=0;i<e.length;i++){var t=e[i];this["googleMap_SEARCH_"+t].deleteOverlays()}},initializeAllSearchPartMaps:function(){var e="";if(this._searchPartMaps&&(e=this._searchPartMaps),""==e)return!1;for(i=0;i<e.length;i++){var t=e[i];this["googleMap_SEARCH_"+t].initializeGoogleMap()}},clearSearchForm:function(){if(!this._executeEvent("canSearchClear",{}))return!1;if(!this._confirmAction())return!1;this.onlyShowDetailViewOnRequest&&"page"==this.detailViewPosition&&this.hideGridWhenDetailViewIsShown&&(this._detailViewWindowState="closed"),this._resetSearchForm(),this.clearAllSearchPartMaps(),this.initializeAllSearchPartMaps(),this._searchValues=new Object;var e=this.gridId+".STATEINFO",t="__clearSearch=yes&_submitActionType=ClearSearchForm&__dvWindow="+this._detailViewWindowState;return this._executeEvent("beforeAjaxCallback",{ajaxEvent:"clearSearchForm"}),this._submitLow("submit:new",this.gridId+".SEARCH_PART.FORM",this.ajaxURL,t,!0,e,"__sf"),!1},_resetSearchForm:function(){var e=0,t="";if("undefined"==typeof this.searchColumnInfo)return!0;if(this.searchPartIsKeyword)$svs(this.gridId+"_KEYWORDSEARCH","");else for(var i=0;i<this.searchColumnInfo.length;i++)this.searchColumnInfo[i].isRange?(e=$n("S.FROM."+this.searchColumnInfo[i].name),e=$cetp(e,$(this.gridId+".SEARCH_PART.FORM")),e&&(t=e.tagName?$ga(e,"A5OriginalValue").split("||A5ARRAYSEP||"):$ga(e[0],"A5OriginalValue").split("||A5ARRAYSEP||"),1==t.length&&(t=t[0]),"object"==typeof this._fieldHelpers_S[this.searchColumnInfo[i].name]?this._fieldHelpers_S[this.searchColumnInfo[i].name].setValue(t,e[0]):$svs(e,t),e=$n("S._TO."+this.searchColumnInfo[i].name),e=$cetp(e,$(this.gridId+".SEARCH_PART.FORM")),t=e.tagName?$ga(e,"A5OriginalValue").split("||A5ARRAYSEP||"):$ga(e[0],"A5OriginalValue").split("||A5ARRAYSEP||"),1==t.length&&(t=t[0]),"object"==typeof this._fieldHelpers_S[this.searchColumnInfo[i].name]?this._fieldHelpers_S[this.searchColumnInfo[i].name].setValue(t,e[0]):$svs(e,t))):(e=$n("S."+this.searchColumnInfo[i].name),e=$cetp(e,$(this.gridId+".SEARCH_PART.FORM")),e&&(t=$ga(e[0],"A5OriginalValue").split("||A5ARRAYSEP||"),1==t.length&&(t=t[0]),"object"==typeof this._fieldHelpers_S[this.searchColumnInfo[i].name]?this._fieldHelpers_S[this.searchColumnInfo[i].name].setValue(t,e[0]):$svs(e,t)))},showAlternateView:function(e){for(var t=-1,i="id",s=e,a=0;a<this._altViews.length;a++)if(this._altViews[a][i]==s){t=a;break}if(t==-1)return!1;var n=(this._altViews[a].id,this._altViews[a].onActivate);"function"==typeof n?n():""!=n&&window[n].call(this);for(var a=0;a<this._altViews.length;a++){var o=$(this.gridId+".ALTVIEW."+this._altViews[a].id);o&&(o.style.display="none")}o=$(this.gridId+".ALTVIEW."+e),o&&(o.style.display="")},argumentsSubmit:function(){var e="_submitActionType=SubmitArguments",t=this.gridId+".STATEINFO";return this._executeEvent("beforeAjaxCallback",{ajaxEvent:"submitArguments"}),this._submitLow("submit:all",this.gridId+".ARGUMENTS",this.ajaxURL,e,!0,t,""),!1},argumentsCancel:function(){var e="_submitActionType=CancelArguments",t=this.gridId+".STATEINFO";return this._executeEvent("beforeAjaxCallback",{ajaxEvent:"cancelArguments"}),this._submitLow("submit:all",this.gridId+".ARGUMENTS",this.ajaxURL,e,!0,t,""),!1},showAll:function(){return!!this._confirmAction()&&(ele=$(this.gridId+".SEARCH_PART.FORM"),ele&&this._resetSearchForm(),this._executeEvent("beforeAjaxCallback",{ajaxEvent:"showAll"}),void this._submitLow("ShowAll",this.gridId,this.ajaxURL,""))},hideNewRecordRows:function(){if(this._executeEvent("onNewRowsHide",{}),this._dirtyNewRows&&$u.a.find(this._dirtyNewRows,!0)!=-1&&!this._confirmAction())return!1;for(var e="",t=0;t<this._newRowsInGrid;t++)e=this.gridId+".R-"+(t+1),$(e).style.display="none"},showNewRecordRows:function(){for(var e=0,t=1;t<=this._rowsInGrid;t++)this._editModeRows[t-1]&&e++;if(0==this._executeEvent("canNewRowsShow",{rowsInEditMode:e}))return!1;for(var i="",t=0;t<this._newRowsInGrid;t++)i=this.gridId+".R-"+(t+1),$(i).style.display="";this._executeEvent("onNewRowsShow",{})},toggleNewRecordRows:function(){var e=this.gridId+".R-1",t=$(e);"none"==t.style.display?this.showNewRecordRows():this.hideNewRecordRows()},toggleEmbeddedSearchPartRow:function(){if("s"==this.embedSearchPartStyle){var e=$(this.gridId+".EMBEDDED_FREEFORM_SEARCH");""!=this.animateSearchPart?(this._embeddedSearchIsOpen=$if(""==e.style.display,!1,!0),A5.anim.toggle(e,this.animateSearchPart)):(""==e.style.display?e.style.display="none":e.style.display="",this._embeddedSearchIsOpen=$if(""==e.style.display,!0,!1))}else{var e=$(this.gridId+".SEARCH_PART.FORM");""==e.style.display?e.style.display="none":e.style.display="",this._embeddedSearchIsOpen=$if(""==e.style.display,!0,!1)}},toggleVisibility:function(e){if(e=e.toUpperCase(),"SEARCH_PART"==e){var t=$(this.gridId+".SEARCH_PART.TITLE.HIDDEN"),i=$(this.gridId+".SEARCH_PART.TITLE.SHOWN"),s=$(this.gridId+".SEARCH_PART.FORM_CONTAINER_DIV");"none"==t.style.display?(t.style.display="",i.style.display="none",""!=this.animateSearchPart?A5.anim.toggle(s,this.animateSearchPart,"hide"):s.style.display="none"):(t.style.display="none",i.style.display="",""!=this.animateSearchPart?A5.anim.toggle(s,this.animateSearchPart,"show"):s.style.display="",this.initializeAllSearchPartMaps())}},quickSearch:function(e){return!!this._executeEvent("canQuickSearch",{})&&(e.constructor==Array&&(e=e.join("\n")),this._executeEvent("beforeAjaxCallback",{ajaxEvent:"quickSearch"}),this._submitLow("QuickSearch",this.gridId,this.ajaxURL,"__quickSearch="+urlencode(e)+"&__dvWindow="+this._detailViewWindowState),!1)},quickSearchClear:function(){this.quickSearch("")},setRowsPerPage:function(e){return!!this._executeEvent("canSetRowsPerPage",{})&&(!!this._confirmAction()&&(this._executeEvent("beforeAjaxCallback",{ajaxEvent:"setRowsPerPage"}),this._submitLow("SetRowsPerPage",this.gridId,this.ajaxURL,"__rowsPerPage="+e),!1))},gridFilterSet:function(e,t,i){return e=$if(void 0==e,"Null",e),t=$if(void 0==t,"Null",t),i=$if(void 0==i,"Null",i),this._executeEvent("beforeAjaxCallback",{ajaxEvent:"setGridFilter"}),this._submitLow("SetGridFilter",this.gridId,this.ajaxURL,"__filterExpression="+urlencode(e)+"&__orderExpression="+urlencode(t)+"&__filterParameters="+urlencode(i)),!1},gridFilterRemove:function(){return this._executeEvent("beforeAjaxCallback",{ajaxEvent:"removeGridFilter"}),this._submitLow("RemoveGridFilter",this.gridId,this.ajaxURL,""),!1},gridBaseFilterSet:function(e,t,i){return e=$if(void 0==e,"Null",e),t=$if(void 0==t,"Null",t),i=$if(void 0==i,"Null",i),this._executeEvent("beforeAjaxCallback",{ajaxEvent:"setGridBaseFilter"}),this._submitLow("SetGridBaseFilter",this.gridId,this.ajaxURL,"__filterExpression="+urlencode(e)+"&__orderExpression="+urlencode(t)+"&__filterParameters="+urlencode(i)),!1},gridLink:function(e){var t="";t="__LinkDefinition="+urlencode(e);var i="Null";"undefined"!=typeof arguments[1]&&(i=arguments[1]);var s="Null";return"undefined"!=typeof arguments[2]&&(s=arguments[2]),t=t+"&__filterExpression="+urlencode(i),t=t+"&__orderExpression="+urlencode(s),this._executeEvent("beforeAjaxCallback",{ajaxEvent:"setGridLink"}),this._submitLow("SetGridLink",this.gridId,this.ajaxURL,t),!1},gridUnlink:function(){var e="",t="Null";"undefined"!=typeof arguments[0]&&(t=arguments[0]);var i="Null";return"undefined"!=typeof arguments[1]&&(i=arguments[1]),e=e+"__filterEpxression="+urlencode(t),e=e+"&__orderExpression="+urlencode(i),this._executeEvent("beforeAjaxCallback",{ajaxEvent:"removeGridLink"}),this._submitLow("RemoveGridLink",this.gridId,this.ajaxURL,e),!1},fetchMoreRecords:function(){if(!this._hasMoreRecords)return!1;var e="__rowsInGrid="+this._rowsInGrid;this._executeEvent("beforeFetchMoreRecords",{ajaxEvent:"fetchMoreRecords"});var t=$(this.gridId+".FETCHMOREBTN");t&&(t.innerHTML='<img src="'+this.waitIconSmall+'" />'),this.pageNavigate("next-morerecords","G",e)},fetchExplicitRecord:function(e){this._executeEvent("beforeAjaxCallback",{ajaxEvent:"fetchExplicitRecord"});var t="__pk="+e;t=t+"&__rowsInGrid="+this._rowsInGrid,this.ajaxCallback("G","none","__a5systemFetchExplicitRecord","",t)},_registerLinkedGrid:function(e,t,i){"undefined"==typeof this._linkedGrids&&(this._linkedGrids={}),"undefined"==typeof this._linkedGrids[e]&&(this._linkedGrids[e]={}),this._linkedGrids[e][t]=i},cascadingDropdown:function(e,t,i,s,a){var n="";n=n+"__dropdownValue="+urlencode(t),n=n+"&__childControls="+urlencode(i),n=n+"&__thisControl="+urlencode(a),n=n+"&__part="+urlencode(s),n=n+"&__part2="+urlencode(s),n=n+"&_rowNumber="+urlencode(e);var o="";if("G"==s){var r=this.gridId+".R"+e;o=this._harvestGrid(r)}return"D"==s&&(o=A5.form.harvest(this.gridId+".DETAILVIEW_PART.FORM",!0,!0)),"S"==s&&(o=A5.form.harvest(this.gridId+".SEARCH_PART.FORM",!0,!0)),""!=o&&(n=o+"&"+n),this._executeEvent("beforeAjaxCallback",{ajaxEvent:"cascadingDropdown"}),this._submitLow("CascadingDropdown",this.gridId,this.ajaxURL,n),!1},_getEditState:function(e,t){var i="";if("S"==e)return"edit";if("D"==e){if(i=this.detailViewEditMode,"on"==i)return"edit";if(""==i)return"view";if("dvod"==i)return"undefined"==typeof this._dvEditingMode?"view":this._dvEditingMode}else{if(i=this.rowEditMode,"all"==i)return"edit";if(""==i)return"view";if("rod"==i||"rod-s"==i)return this._editModeRows[t-1]?"edit":"view"}},_getRowKey:function(e){if("undefined"==typeof this._keys)return"";if(this._keys[e-1]){var t=this._keys[e-1],i="undefined"!=typeof arguments[1]?arguments[1]:"KEYS",s=new Array;if(t.constructor==Array)for(var a="",n=0;n<t.length;n++)a=t[n],this._embeddedMode&&""==a&&(a="__nullvalue__"),s.push(A5.ajax.buildURLParam(i+".R"+e+"[]",a));else s.push(A5.ajax.buildURLParam(i+".R"+e+"[]",t));return s.join("&")}return""},_setCheckedRow:function(e,t){if(this._executeEvent("onGridRowCheck",{rowNumber:e,checkboxValue:t}),"multiplePage"!=this.checkBoxSelector)return!1;var i=this._keys[e-1],s=i.toString();if(1==t){for(var a=0;a<this._checkedRowKeys.length;a++)if(this._checkedRowKeys[a].toString()==s)return!1;this._checkedRowKeys.push(i)}else for(var a=this._checkedRowKeys.length-1;a>=0;a--)if(this._checkedRowKeys[a].toString()==s)return this._checkedRowKeys.splice(a,1),!1},_genericLinkedContentHandler:function(e,t,i){var s=this._selectedRow,a="Null";"undefined"!=typeof arguments[3]&&(a=arguments[3],s=parseInt(a));var n="";n=s>this._rowsInGrid||s<0?"true":"false";var o="_gridNumber="+e+"&_isLcs="+t+"&_lcsName="+i;o=o+"&_selectedRow="+s+"&_hasParentRow="+n,this.ajaxCallback("G",s,"__a5systemLinkedContentHandler","",o)},openLookup:function(e,t,i){if(!this._executeEvent("canOpenLookup",{}))return!1;var s="",a="";"undefined"!=typeof arguments[3]&&(s=arguments[3]),"undefined"!=typeof arguments[4]&&(a=arguments[4]);var n=a.split(":");"element"==n[0]&&(a=$(n[1]));var o=this._openLookupWindows;this._lookupRow=t;var r=this.gridId+".GRID.LOOKUPWINDOW."+i;"DV"==e&&(o=this._openDVLookupWindows,r=this.gridId+".DV.LOOKUPWINDOW."+i);var l="_part="+e+"&_rowNumber="+t+"&_field="+i;l+=this._getData(e,t,!1);var d=this.gridId+"_LOOKUP_"+i+".GRID_PART.FORM_CONTAINER_DIV",h=this.lookupFieldsWorkingMessages[i];"undefined"!=typeof h&&""!=h||(h='<div style="width: 4in; height: 3in"><img src="CSS/A5System/Images/wait.gif" /> Working...</div>');var c=$u.a.find(this.lookupFieldsResetFilter,i),u=!1;c>-1&&(u=!0);var f=$u.a.find(o,i);if(f==-1){var p=this.gridId+".GRID.LOOKUPWINDOW."+i;"DV"==e&&(p=this.gridId+".DV.LOOKUPWINDOW."+i),$(p).innerHTML=h,this._executeEvent("beforeAjaxCallback",{ajaxEvent:"showLookupGrid"}),this._submitLow("showLookupGrid",this.gridId,this.ajaxURL,l)}else{var m=$u.a.find(this.lookupDynamicFilters,i);if(m!=-1){$(d).innerHTML=h;var _=window[this.gridId+"_LOOKUP_"+i+"_GridObj"].getStateInfo();""!=_&&(l=l+"&"+_),window[this.gridId+"_LOOKUP_"+i+"_GridObj"].refreshLookupGrid(l)}}f==-1&&o.push(i),$(r).style.display="block","DV"!=e&&this.setSelectedRow(t);var f=$u.a.find(this.dropDownLookupWindows,i);if(f==-1)""==s?this._floatingLookupWindow[i].show():this._floatingLookupWindow[i].show(s,a);else{if("DV"==e)var g=$(this.gridId+".D.V.R1."+i);else var g=$(this.gridId+".V.R"+t+"."+i);this._floatingLookupWindow[i].show("dropdown",g)}return!1},synchronizeGrid:function(e){var t=new Array,i=!0;"undefined"!=typeof e.runningInWindow&&(i=e.runningInWindow),"undefined"==typeof e.linkedContentSectionName&&(e.linkedContentSectionName=""),void 0==e.localArguments&&(e.localArguments=""),void 0==e.parameterBucket&&(e.parameterBucket=""),void 0==e.argumentValueBucket&&(e.argumentValueBucket=""),"undefined"==typeof e._noParentRecord&&(e._noParentRecord=!1),void 0==e._gridCurrentFilter&&(e._gridCurrentFilter=""),void 0==e._gridCurrentOrder&&(e._gridCurrentOrder=""),void 0==e._gridCurrentArguments&&(e._gridCurrentArguments=""),void 0==e._gridCurrentDBType&&(e._gridCurrentDBType=""),t.push("__vp__fn=GR"),t.push("__vp__path="+e.a5_default_path),t.push(A5.ajax.buildURLParam("__vp__gridName",e.gridName)),t.push("__vp__div="+e.gridDiv),t.push("__vp__alias="+e.alias);var s=e.flagTimer+e.flagQueryEcho+e.flagDebugMode;t.push("__vp__flags="+s),t.push(A5.ajax.buildURLParam("__vp__userFilter",e.userFilter)),t.push(A5.ajax.buildURLParam("__vp__userOrder",e.userOrder)),t.push(A5.ajax.buildURLParam("__vp__baseFilter",e.baseFilter)),t.push(A5.ajax.buildURLParam("__vp__linkDefinition",e.linkDefinition)),t.push(A5.ajax.buildURLParam("__vp__arguments",e.arguments)),t.push(A5.ajax.buildURLParam("__vp__localArguments",e.localArguments)),t.push(A5.ajax.buildURLParam("__vp__parameterBucket",e.parameterBucket)),t.push(A5.ajax.buildURLParam("__vp__argumentValueBucket",e.argumentValueBucket)),t.push(A5.ajax.buildURLParam("__vp__placeHolderValues",e.placeHolderValues)),t.push(A5.ajax.buildURLParam("__vp___gridCurrentFilter",e._gridCurrentFilter)),t.push(A5.ajax.buildURLParam("__vp___gridCurrentOrder",e._gridCurrentOrder)),t.push(A5.ajax.buildURLParam("__vp___gridCurrentArguments",e._gridCurrentArguments)),t.push(A5.ajax.buildURLParam("__vp___gridCurrentDBType",e._gridCurrentDBType)),t.push(A5.ajax.buildURLParam("__vp___LCSName",e.linkedContentSectionName)),t.push(A5.ajax.buildURLParam("__vp___NoParentRecord",""+e._noParentRecord)),t.push(A5.ajax.buildURLParam("__synchronizeGrid","true")),void 0==e.isLookupGrid&&(e.isLookupGrid=!1),e.isLookupGrid&&t.push(A5.ajax.buildURLParam("__vp__isLookupGrid","true"));var a=t.join("&");a=$u.s.tran(a,"\n","%0D%0A");var n=String(window.location);n=n.split("?"),n.shift(),n=n.join("?");var o=n,r="";if(!e._noParentRecord){if("G"==e.sourceGridPart){var l=e.sourceGridRowNumber,d=e.parentGridId+".R"+l;r=window[e.parentGridId+"_GridObj"]._harvestGrid(d)}if("D"==e.sourceGridPart){var l=1;r=A5.form.harvest(e.parentGridId+".DETAILVIEW_PART.FORM",!0,!0)}if("O"==e.sourceGridPart){var l=e.sourceGridRowNumber;r=window[e.parentGridId+"_DlgObj"]._harvestRow(l)}}var h="_rowNumber="+e.sourceGridRowNumber+"&__gridPart="+e.sourceGridPart+"&__parentGridID="+e.parentGridId+"&__windowName="+e.windowName;
if(r=""!=r?r+"&"+o+"&"+h:h,""!=r&&(o=r+"&"+o),o=a+"&"+o,o=o+"&__runningInWindow="+i,i){if($(this.gridId+".GRID_PART.FORM_CONTAINER_DIV")&&($(this.gridId+".GRID_PART.FORM_CONTAINER_DIV").innerHTML=e.workingMessage),$(this.gridId+".DETAILVIEW_PART.FORM_CONTAINER_DIV")&&($(this.gridId+".DETAILVIEW_PART.FORM_CONTAINER_DIV").innerHTML=""),"O"==e.sourceGridPart)var c=window[e.parentGridId+"_DlgObj"].getWindow(e.windowName);else var c=window[e.parentGridId+"_GridObj"].getWindow(e.windowName);if("undefined"!=typeof e.showWindowParameters&&"undefined"==typeof e.windowPositionArg1){var a=e.showWindowParameters.split("'");e.windowPositionArg1=a[1],e.windowPositionArg2=a[3]}"undefined"!=typeof e.windowPositionArg1?c.show(e.windowPositionArg1,e.windowPositionArg2):c.show("in-view")}return this._executeEvent("beforeAjaxCallback",{ajaxEvent:"synchronizeGrid"}),this._submitLow("SynchronizeGridInWindow",this.gridId,this.ajaxURL,o),!1},openChildGrid:function(e){if("undefined"==typeof e.setFocus&&(e.setFocus="true"),"undefined"==typeof e.gridDiv&&(e.gridDiv=""),"undefined"==typeof e.centerFlags&&(e.centerFlags=""),"undefined"==typeof e.gridName&&(e.gridName=""),"undefined"==typeof e.alias&&(e.alias=e.gridName),"undefined"==typeof e.guid&&(e.guid=A5.ajax.guid()),"undefined"==typeof e.submitCurrentFieldValues&&(e.submitCurrentFieldValues=!1),"undefined"==typeof e.sourceGridPart&&(e.sourceGridPart=""),"undefined"==typeof e.sourceGridRowNumber&&(e.sourceGridRowNumber=0),"undefined"==typeof e._gridCurrentFilter&&(e._gridCurrentFilter=""),"undefined"==typeof e._gridCurrentOrder&&(e._gridCurrentOrder=""),"undefined"==typeof e._gridCurrentArguments&&(e._gridCurrentArguments=""),"undefined"==typeof e._gridCurrentDBType&&(e._gridCurrentDBType=""),"undefined"==typeof e._thisGridAlias&&(e._thisGridAlias=""),"undefined"==typeof e.linkedContentSectionName&&(e.linkedContentSectionName=""),"undefined"==typeof e._thisGridGUID&&(e._thisGridGUID="__unknown__"),"undefined"==typeof e._noParentRecord&&(e._noParentRecord=!1),"undefined"==typeof e.showWindowParameters&&(e.showWindowParameters=""),""==e.gridDiv)return alert("Fatal Error. DIV to display Grid Component was not defined."),!1;if(""==e.gridName)return e.gridName=$(e.gridDiv).innerHTML="Fatal error: Grid to display was not specified.",!1;if(""==e.alias)return $(e.reportDiv).innerHTML="Fatal error: Grid alias was not specified.",!1;void 0==e.workingMessage&&(e.workingMessage='<img src="CSS/A5System/Images/wait.gif" /> Working...'),void 0==e.flagTimer&&(e.flagTimer="F"),void 0==e.flagQueryEcho&&(e.flagQueryEcho="F"),void 0==e.flagDebugMode&&(e.flagDebugMode="F"),void 0==e.userFilter&&(e.userFilter=""),void 0==e.baseFilter&&(e.baseFilter=""),void 0==e.linkDefinition&&(e.linkDefinition=""),void 0==e.arguments&&(e.arguments=""),void 0==e.localArguments&&(e.localArguments=""),void 0==e.parameterBucket&&(e.parameterBucket=""),void 0==e.argumentValueBucket&&(e.argumentValueBucket=""),void 0==e.placeHolderValues&&(e.placeHolderValues=""),void 0==e.userOrder&&(e.userOrder=""),void 0==e.overrideSettings&&(e.overrideSettings=""),void 0==e.linkDefinition&&(e.linkDefinition="");var t=e.flagTimer+e.flagQueryEcho+e.flagDebugMode,i=new Array;i.push("__vp__fn=GR"),i.push("__vp__div="+e.gridDiv),i.push("__vp__centerFlags="+e.centerFlags),i.push(A5.ajax.buildURLParam("__vp__gridName",e.gridName)),i.push("__vp__path="+e.a5_default_path),i.push("__vp__guid="+e.guid),i.push("__vp__alias="+e.alias),i.push("__vp__flags="+t),i.push(A5.ajax.buildURLParam("__vp__userFilter",e.userFilter)),i.push(A5.ajax.buildURLParam("__vp__userOrder",e.userOrder)),i.push(A5.ajax.buildURLParam("__vp__baseFilter",e.baseFilter)),i.push(A5.ajax.buildURLParam("__vp__linkDefinition",e.linkDefinition)),i.push(A5.ajax.buildURLParam("__vp__override",e.overrideSettings)),i.push(A5.ajax.buildURLParam("__vp__arguments",e.arguments)),i.push(A5.ajax.buildURLParam("__vp__localArguments",e.localArguments)),i.push(A5.ajax.buildURLParam("__vp__parameterBucket",e.parameterBucket)),i.push(A5.ajax.buildURLParam("__vp__argumentValueBucket",e.argumentValueBucket)),i.push(A5.ajax.buildURLParam("__vp__placeHolderValues",e.placeHolderValues)),i.push(A5.ajax.buildURLParam("__vp__setFocus",e.setFocus)),i.push(A5.ajax.buildURLParam("__vp___gridCurrentFilter",e._gridCurrentFilter)),i.push(A5.ajax.buildURLParam("__vp___gridCurrentOrder",e._gridCurrentOrder)),i.push(A5.ajax.buildURLParam("__vp___gridCurrentArguments",e._gridCurrentArguments)),i.push(A5.ajax.buildURLParam("__vp___gridCurrentDBType",e._gridCurrentDBType)),i.push(A5.ajax.buildURLParam("__vp___thisGridAlias",e._thisGridAlias)),i.push(A5.ajax.buildURLParam("__vp___thisGridGUID",e._thisGridGUID)),i.push(A5.ajax.buildURLParam("__vp___LCSName",e.linkedContentSectionName)),i.push(A5.ajax.buildURLParam("__vp___NoParentRecord",""+e._noParentRecord)),i.push(A5.ajax.buildURLParam("__openChildGrid","true")),i.push(A5.ajax.buildURLParam("__vp___showWindowParameters",e.showWindowParameters));var s=i.join("&");s=$u.s.tran(s,"\n","%0D%0A");var a=s,n="&"+s+"._a5_ajax",o=String(window.location);o=o.split("?"),o.shift(),o=o.join("?");var r=o;if(1==e.submitCurrentFieldValues){var l="";if(!e._noParentRecord){if("G"==e.sourceGridPart){var d=e.sourceGridRowNumber,h=this.gridId+".R"+d;l=this._harvestGrid(h)}if("D"==e.sourceGridPart){var d=1;l=A5.form.harvest(this.gridId+".DETAILVIEW_PART.FORM",!0,!0)}}var c="_rowNumber="+d+"&__gridPart="+e.sourceGridPart+"&__useCurrentFieldValues=Yes";l=""!=l?l+"&"+r+"&"+c:c,""!=l&&(r=l+"&"+r)}r=r+"&"+a;var n="_dummyPage._a5_ajax",n="&__guid="+e.guid+"&__fn=gr._a5_ajax";n="__a5runGrid.a5w",r+="&__preprocessInternal=true",$(e.gridDiv).innerHTML=e.workingMessage,r=A5.ajax.addParamRequiredData(r),this._executeEvent("beforeAjaxCallback",{ajaxEvent:"openChildGrid"});var u=!1,f=!1,p=!1;"undefined"!=typeof A5.__flagIIS&&(u=A5.__flagIIS),"undefined"!=typeof A5.__flagWorkingPreview&&(f=A5.__flagWorkingPreview),"undefined"!=typeof A5.__flagSimulateIIS&&(p=A5.__flagSimulateIIS),u&&(n=e.gridName+".a5wcmp",r="__virtualPage=__a5RunGrid.a5w&"+r),p&&!f&&(n=e.gridName+".a5wcmp?__virtualPage="+n),new $a.simple(n,{data:r,method:"post",handleGeneric:!0})},refreshLookupGrid:function(e){this._executeEvent("beforeAjaxCallback",{ajaxEvent:"refreshLookupGrid"}),this._submitLow("refreshLookupGrid",this.gridId,this.ajaxURL,e)},lookupGridSelectRow:function(e,t,i,s){if(!this._executeEvent("canLookupGridSelectRow",{}))return!1;if("O"!=i){var a=e+".GRID.LOOKUPWINDOW."+t;"DV"==i&&(a=e+".DV.LOOKUPWINDOW."+t);var n=$(a);n&&(n.style.display="none")}for(var o=new Array,r=new Array,l="",d=0;d<this.lookupGridFieldsToReturn.length;d++){l=this.lookupGridFieldsToReturn[d];for(var h=0;h<this.gridColumnInfo.length;h++)if(this.gridColumnInfo[h].name==this.lookupGridFieldsToReturn[d]){"link"==this.gridColumnInfo[h].type.substr(0,4)&&this._originalValues[s-1][h].constructor==Array?o.push(this._originalValues[s-1][h][0]):o.push(this._originalValues[s-1][h]),l="";break}""!=l&&r.push(l)}return 0!=r.length?(alert("Error: Lookup grid does not contain all of the mapped fillin fields. The following fields are in the Lookup Map, but are not in the Lookup Grid\n"+r.join(", ")),!1):void("O"==i?window[e+"_DlgObj"].fillinLookupValues(o,t,i,this.gridId):window[e+"_GridObj"].fillinLookupValues(o,t,i,this.gridId))},fillinLookupValues:function(e,t,i,s){this._floatingLookupWindow[t].hide(),"G"==i?this._populateDirtyRow(this._lookupRow,e,this.lookupFieldsToFillin[t]):"DV"==i&&this._populateDirtyDetailView(this._lookupRow,e,this.lookupFieldsToFillin[t]),window[s+"_GridObj"].flagResetFilterAfterSelect&&window[s+"_GridObj"].showAll(),this._executeEvent("afterLookupGridFillinValues",{})},detailView:function(e){if(clearTimeout(this._focusRowTO),!this._executeEvent("canDetailViewOpen",{rowNumber:e}))return!1;if(!this._confirmAction())return!1;this._detailViewWindowState="open";var t=this._detailViewWindowPos1,i=this._detailViewWindowPos2;i=i.replace(/___rowNumber___/g,""+e),i=i.replace(/___this___/g,this.gridId+".R"+e);var s=i.split(":");"element"==s[0]&&(i=$(s[1]));var a=!1;if(0==this.detailViewDataPreFetch){$e.removeGroup(this.gridId+".DETAILVIEW_PART.FORMEvents");var n=this._getRowKey(e),o="_rowNumber="+e+"&"+n;""!=t&&("element"==s[0]&&(i=i.id),o="_w1="+t+"&_w2="+i+"&"+o),this._executeEvent("beforeAjaxCallback",{ajaxEvent:"showDetailView"}),this._submitLow("ShowDetailView",this.gridId,this.ajaxURL,o)}else{this.clearDetailViewGlobalError(),this._detailViewRow=e;for(var o=new Array,r=0;r<this._originalDVValues[e-1].length;r++)if(this._originalDVValues[e-1][r].constructor==Array){o[r]=new Array;for(var l=0;l<this._originalDVValues[e-1][r].length;l++)o[r][l]=this._originalDVValues[e-1][r][l]}else o[r]=this._originalDVValues[e-1][r];if("dvod"==this.detailViewEditMode?this._editModeRows[0]?this.cancelEditDetailViewRecord():(this._populateDetailView(e,o,this._detailViewColNames,!1,[],1,!1),a=!0):(this._populateDetailView(e,o,this._detailViewColNames,!1,[],0,!1),a=!0),this._originalDVNullValues.length>0&&(this._localDVNullValues[0]=this._originalDVNullValues[e-1]),this.setSelectedRow(e,!0),"popup"==this.detailViewPosition)$(this.gridId+".DETAILVIEW_PART.COMPLETE").style.display="block",""==t?this._dvFloatingWindow.show():this._dvFloatingWindow.show(t,i);else if("inline"==this.detailViewPosition){var d=$(this.gridId+".DETAILVIEW_PART.COMPLETE");d.style.display="block",this._showInlineDetailView(),d.style.display="none",A5.u.element.show(d,this.detailViewAnimation.show)}else if(A5.u.element.show($(this.gridId+".DETAILVIEW_PART.COMPLETE"),this.detailViewAnimation.show),this.detailViewScrollIntoView){var h=this.gridId+".DETAILVIEW_PART.COMPLETE";setTimeout(function(){var e=$(h);e&&(e.style.display="block"),$swto(e)},100)}this._executeEvent("onDetailViewRender",{rowNumber:this._detailViewRow}),this._setDetailViewControlsDisabledState()}if("page"==this.detailViewPosition&&1==this.hideGridWhenDetailViewIsShown){var c=$(this.gridId+".GRID_PART.FORM_CONTAINER_DIV");if(c.style.display="none",0==this.detailViewDataPreFetch){var d=$(this.gridId+".DETAILVIEW_PART.FORM_CONTAINER_DIV");d.innerHTML='<img src="CSS/A5System/Images/wait.gif" />Working...'}}a&&this._executeEvent("afterDetailViewOpen",{rowNumber:e});var u=this;return setTimeout(function(){u._kw.off()},10),delete u,!1},detailCancelNewRecord:function(){var e=$(this.gridId+".DETAILVIEW_PART.NEWRECORDBUTTON"),t=$(this.gridId+".DETAILVIEW_PART.CANCELNEWRECORDBUTTON");if(this._detailViewOldRow>0&&"open"==this._detailViewOldWindowState){if(!this._confirmAction())return!1;this.detailView(this._detailViewOldRow)}else this.closeDetailView();e.style.display="",t.style.display="none";var i="view";this._detailViewState=i,this._executeEvent("onDetailViewStateChange",{mode:i,isDirty:!1,rowNumber:this._detailViewRow}),"dvod"==this.detailViewEditMode&&this._cancelEditDetailViewRecordWithoutConfirmation(!1)},detailViewNewRecord:function(){if(!this._executeEvent("canDetailViewNewRecord",{}))return!1;if(!this._confirmAction())return!1;if(this._detailViewOldRow=this._detailViewRow,this._detailViewOldWindowState=this._detailViewWindowState,this._detailViewWindowState="open","dvod"==this.detailViewEditMode){var e=$(this.gridId+".DETAILVIEW_PART.FORM_CONTAINER_DIV");this._detailViewHTMLCache=e.innerHTML}var t="_rowsInGrid="+this._rowsInGrid+"&_dvCurrentRow="+this._detailViewRow;if(this._executeEvent("beforeAjaxCallback",{ajaxEvent:"detailViewNewRecord"}),this._submitLow("DetailViewNewRecord",this.gridId,this.ajaxURL,t),"page"==this.detailViewPosition&&1==this.hideGridWhenDetailViewIsShown){var e=$(this.gridId+".GRID_PART.FORM_CONTAINER_DIV");e.style.display="none";var i=$(this.gridId+".DETAILVIEW_PART.FORM_CONTAINER_DIV");i.innerHTML='<img src="CSS/A5System/Images/wait.gif" />Working...'}$(this.gridId+".DVTOOLBAR_VIEWMODE")&&($(this.gridId+".DVTOOLBAR_VIEWMODE").style.display="none"),$(this.gridId+".DVTOOLBAR_CHANGEMODE")&&($(this.gridId+".DVTOOLBAR_CHANGEMODE").style.display="none"),$(this.gridId+".DVTOOLBAR_ENTERMODE")&&($(this.gridId+".DVTOOLBAR_ENTERMODE").style.display="");var s="enter";this._detailViewState=s,this._executeEvent("onDetailViewStateChange",{mode:s,isDirty:!1,rowNumber:this._detailViewRow})},detailViewRefresh:function(){if(this._detailViewRow==-1)return!1;var e=this._getRowKey(this._detailViewRow),t=(this.gridId+".D.R1","");""!=e&&(t=t+"&"+e),t=t+"&_rowNumber="+this._detailViewRow+"&_submitActionType=detailViewRefresh";var i=this.gridId+".STATEINFO";this._executeEvent("beforeAjaxCallback",{ajaxEvent:"detailViewRefresh"}),this._submitLow("submit:all",this.gridId+".DETAILVIEW_PART.FORM",this.ajaxURL,t,!0,i,"",!1)},detailViewNextRecord:function(){if(this._detailViewRow==-1)return this.detailViewLastRecord(),!1;for(var e=-1,t=this._detailViewRow+1;t<=this._rowsInGrid;t++)if("none"!=$(this.gridId+".R"+t).style.display){e=t;break}var i=this.pageNumber,s=this._detailViewRow,a=this.pagesInGrid,n=this._rowsInGrid;this.actualRowsOnPage;return(i!=a||s!=n)&&void(e==-1?this.pageNavigate("next","DV"):this.detailView(e))},detailViewFirstRecord:function(){1==this.pageNumber?this.detailView(1):this.pageNavigate("first","DV")},detailViewPreviousRecord:function(){for(var e=-1,t=this._detailViewRow-1;t>0;t--)if("none"!=$(this.gridId+".R"+t).style.display){e=t;break}if(e==-1){if(1==this.pageNumber&&1==this._detailViewRow)return!1;this.pageNavigate("prev-LastRecord","DV")}else this.detailView(e)},detailViewLastRecord:function(){this.pageNumber==this.pagesInGrid?this.detailView(this.actualRowsOnPage):this.pageNavigate("Last-LastRecord","DV")},validateDetailView:function(){this.submitDetailView(!1,!0)},validateDetailViewField:function(e){this.submitDetailView(!1,!0,e)},_resetDVFocus:function(){if("undefined"!=typeof this._dvFocusControl2){var e=$(this.gridId+".D.V.R1."+this._dvFocusControl2);if(e)try{"undefined"!=typeof e.focus&&e.focus(),"undefined"!=typeof e.select&&e.select()}catch(t){}}},submitDetailView:function(){if(this._testAlreadySubmitting())return!1;if(this._detailViewIsDirty){var e="undefined"!=typeof arguments[1]&&arguments[1],t="undefined"!=typeof arguments[2]?arguments[2]:"";if(1!=e&&!this._executeEvent("canDetailViewSubmit",{rowNumber:this._detailViewRow}))return!1;var i=this._getRowKey(this._detailViewRow);i=i+$if(""!=i,"&","")+"_rowNumber="+this._detailViewRow;var s=$if(arguments[0],"saveDetailViewAndEnter","saveDetailView");if(e&&(s="validateDetailView",""!=t&&(s="validateDetailViewField&__fieldToValidate="+t)),i=i+"&_detailViewRecord="+this._detailViewRow+"&_rowsInGrid="+this._rowsInGrid+"&_submitActionType="+s,i=i+"&__dvWindow="+this._detailViewWindowState,this._localDVNullValues.length>0){var a="&__Nulls_1="+this._localDVNullValues[0].toString();i+=a}var n=this.gridId+".STATEINFO",s=$if(arguments[0],"submitAndEnterDetailView","submitDetailView");e&&(s="validateDetailView"),this._executeEvent("beforeAjaxCallback",{ajaxEvent:s}),this._submitLow("submit:all",this.gridId+".DETAILVIEW_PART.FORM",this.ajaxURL,i,!0,n,"",!e)}return!1},checkedRowsAction:function(e){var t=this.getCheckedRows();t=A5.ajax.buildURLParam("_checkboxAction",e)+"&"+t,this._executeEvent("beforeAjaxCallback",{ajaxEvent:"checkedRowsAction"}),A5.ajax.callback(this.ajaxURL,t)},getCheckedRows:function(){var e=new Array,t=0,i=$gvs(this.gridId+".__ROWCHECKBOX");if("multiplePage"==this.checkBoxSelector)for(var s=0;s<this._checkedRowKeys.length;s++)e.push(A5.ajax.buildURLParam("checkedRows.key"+(s+1)+"[]",this._checkedRowKeys[s])),t++;else if("singlePage"==this.checkBoxSelector)for(var a="",s=0;s<i.length;s++)"undefined"!=typeof this._keys&&(a=this._keys[Number(i[s])-1],e.push(A5.ajax.buildURLParam("checkedRows.key"+(s+1)+"[]",a))),t++;return t>0&&e.push(A5.ajax.buildURLParam("checkboxRows.rows[]",i)),e.push(A5.ajax.buildURLParam("checkboxRows.countChecked",""+t)),e=e.join("&")},resetDetailView:function(){var e=this;return!!this._executeEvent("canDetailViewCancelEdits",{rowNumber:this._detailViewRow})&&void A5.msgBox.show(this.messages.t_undoEditsWarning,this.messages.undoEditsWarning,"OC",function(t){"ok"==t&&e._resetDetailViewWithoutConfirmation()})},_resetDetailViewWithoutConfirmation:function(){if(this._detailViewIsDirty){this._detailViewRow<0?this._populateDetailView(-1,this._newDVValues,this._detailViewColNames):this.detailViewDataPreFetch?this._populateDetailView(this._detailViewRow,this._originalDVValues[this._detailViewRow-1],this._detailViewColNames):this._populateDetailView(1,this._originalDVValues[0],this._detailViewColNames),this.clearErrors(),this.clearDetailViewGlobalError();for(var e="",t="",i=0;i<this.detailViewColumnInfo.length;i++)"img,label"==this.detailViewColumnInfo[i].type&&(t=$(this.gridId+".D.V.R1."+this.detailViewColumnInfo[i].name),t&&(t.value="")),"select,label"==this.detailViewColumnInfo[i].type&&(e=this._cascadingSelectChoices[this.gridId+".D.V.R1."+this.detailViewColumnInfo[i].name],e&&A5.form.populateSelect(this.gridId+".D.V.R1."+this.detailViewColumnInfo[i].name,e.value,e.data,!0));this._executeEvent("afterDetailViewCancelEdits",{rowNumber:this._detailViewRow})}return!1},setRowCountMessage:function(e,t){var i=$(this.gridId+".RECORDCOUNT.TOP"),s=$(this.gridId+".RECORDCOUNT.BOTTOM"),a="";if(i&&s?a=$gvs(i):i?a=$gvs(i):s&&(a=$gvs(s)),""==a)return!1;var n="";"I"==e?n=parseInt(a)+1:"D"==e?n=parseInt(a)-1:"R"==e&&(n=t),i&&$svs(i,n),s&&$svs(s,n)},deleteDetailViewRecord:function(){if("enter"==this._detailViewState)return!1;if(!this._executeEvent("canDetailViewDeleteRecord",{rowNumber:this._detailViewRow}))return!1;var e=this;A5.msgBox.show(this.messages.t_deleteRow,this.messages.deleteRow,"OC",function(t){"ok"==t&&e._deleteDetailViewRecordWithoutConfirmation()})},_deleteDetailViewRecordWithoutConfirmation:function(){var e=this._detailViewRow,t=this._getRowKey(this._detailViewRow);t=t+$if(""!=t,"&","")+"_rowNumber="+this._detailViewRow,t+="&_submitActionType=DeleteDetailViewRecord";var i=this.gridId+".STATEINFO";if("dvod"==this.detailViewEditMode){var s=new Array;s=this.detailViewDataPreFetch?this._originalDVValues[e-1]:this._originalDVValues[0];for(var a=new Array,n=0;n<s.length;n++)a.push(A5.ajax.buildURLParam("old.V.R1."+this.detailViewColumnInfo[n].name,s[n]));a=a.join("&"),t=t+"&"+a;var o=$(i).value?$(i).value:"";""!=o&&(t=t+"&"+o),t="__FormAction=submit&__FormID="+this.gridId+".DETAILVIEW_PART.FORM&"+t,t=$u.s.tran(t,"\n","%0D%0A"),this._executeEvent("beforeAjaxCallback",{ajaxEvent:"deleteDetailViewRecord"}),A5.ajax.callback(this.ajaxURL,t)}else this._executeEvent("beforeAjaxCallback",{ajaxEvent:"deleteDetailViewRecord"}),this._submitLow("submit:all",this.gridId+".DETAILVIEW_PART.FORM",this.ajaxURL,t,!0,i)},setDetailViewGlobalError:function(e){if($(this.gridId+".GLOBALERRORS")&&($(this.gridId+".GLOBALERRORS").innerHTML=e,$(this.gridId+".GLOBALERRORS").style.display="block"),1==this.rowErrors.showMessageBox){var t=e;t='<div style="'+this.rowErrors.style+'">'+t+"</div>",A5.msgBox.show(this.rowErrors.messageBoxTitle,t,"O")}},clearDetailViewGlobalError:function(){$(this.gridId+".GLOBALERRORS")&&($(this.gridId+".GLOBALERRORS").innerHTML="",$(this.gridId+".GLOBALERRORS").style.display="none");var e="";e=$(this.gridId+"D._HIDDENA5DATA.R1"),e&&(e.value="")},closeParentContainer:function(){var e=this.gridId+".GRID_PART.FORM_CONTAINER_DIV";if(closeParentA5Window(e),"undefined"!=typeof tbiObj)for(var t=0;t<tbiObj._tbObj._panes.length;t++)if(tbiObj._tbObj._panes[t].name.toUpperCase()==this.gridId){tbiObj._tbObj.remove(tbiObj._tbObj._panes[t]._id);break}},closeCurrentTabbedUIPane:function(){if("undefined"!=typeof tbiObj){var e=tbiObj._tbObj._curTabIndx;tbiObj._tbObj.remove(e)}},closeDetailView:function(){var e=this;setTimeout(function(){e.closeDetailView_low(),delete e},0)},closeDetailView_low:function(){if(!this._executeEvent("canDetailViewClose",{rowNumber:this._detailViewRow}))return!1;if(!this._confirmAction())return!1;if("dvod"==this.detailViewEditMode&&"undefined"!=typeof this._detailViewHTMLCache){var e=$(this.gridId+".DETAILVIEW_PART.FORM_CONTAINER_DIV");e.innerHTML=this._detailViewHTMLCache,delete this._detailViewHTMLCache}if("popup"!=this.detailViewPosition){if($(this.gridId+".DETAILVIEW_PART.COMPLETE"))if("inline"==this.detailViewPosition){var t={};$u.o.assign(t,this.detailViewAnimation.hide),t.onComplete=Function("$('"+this.gridId+".RDV').style.display = 'none';"),A5.u.element.hide($(this.gridId+".DETAILVIEW_PART.COMPLETE"),t)}else A5.u.element.hide($(this.gridId+".DETAILVIEW_PART.COMPLETE"),this.detailViewAnimation.hide)}else{"modal"==this._dvFloatingWindow.type?AUI.LockUI.pageFree():"popup"==this._dvFloatingWindow.type&&$e.remove(document.documentElement,"click",this._dvFloatingWindow._popupHide);var i=$(this._dvFloatingWindow._windowId);this._dvFloatingWindow.animation.disabled?document.all&&"Opera"!=navigator.appName?i.style.display="none":i.style.visibility="hidden":A5.u.element.hide(i,this._dvFloatingWindow.animation.hide),""!=this._dvFloatingWindow.activeClassName&&$rcn(i,this._dvFloatingWindow.activeClassName),this._dvFloatingWindow._lockIndex=-1,this._dvFloatingWindow.hidden=!0,this._dvFloatingWindow._focusTopWindow()}if(this._detailViewWindowState="","page"==this.detailViewPosition&&1==this.hideGridWhenDetailViewIsShown){var e=$(this.gridId+".GRID_PART.FORM_CONTAINER_DIV");e.style.display="block"}return this._executeEvent("afterDetailViewClose",{rowNumber:this._detailViewRow}),$(this.gridId+".FOCUSCATCHER").focus(),!0},detailViewToggle:function(e){""==this._detailViewWindowState||this._detailViewRow!=e?this.detailView(e):this.closeDetailView()},globalUpdate:function(e,t){var i=t.fieldToUpdate;"<CurrentField>"==i&&(i=this._focusControl),i=i.toUpperCase();var s=this.gridId+".V.R"+e+"."+i,a=$(s);if(!a)return!1;if("search"==t.type){t.onlyUpdateBlankFields=!1;var n=$(t.elementIdSearchValue);if(!n)return!1;var o=$gvs(n),r=$(t.elementIdReplaceValue);if(!r)return!1;var l=$gvs(r),d="";t.allInstances&&(d+="g"),t.caseInsensitive&&(d+="i")}else if("ReadFromCurrentRow"==t.sourceValue)var h=this.getValue("G",i,e);else{var c=$(t.sourceElementId);if(!c)return!1;var h=$gvs(c)}var u="";this._batchChange=!0;var f=!0,p=!0,m="",_=!0,g="",v=!1;if("allnewrecordrows"!=t.rowsToUpdate.toLowerCase())for(var y=1;y<=this._rowsInGrid;y++){if(v=!1,"checkedrows"==t.rowsToUpdate.toLowerCase()&&(m=$(this.gridId+".V.R"+y+".__ROWCHECKBOX"),p=!m||m.checked),u=this.getValue("G",i,y),f=!t.onlyUpdateBlankFields||(""==u||"&nbsp;"==u),"search"==t.type&&(h=this._searchReplace(u,o,l,d)),h==u&&(v=!0),p&&f&&t.promptForConfirmation&&""!=u&&!v){var g=t.confirmationMessage;g=g.replace("[row]",""+y),g=g.replace("[old]",u),g=g.replace("[new]",h);var _=confirm(g)}else _=!0;h==u&&(f=!1),f&&p&&_&&(this.setValue("G",i,y,h),this._setRowState(y,!0))}flagNewRecordRowsVisible=!1;var a=$(this.gridId+".R-1");if(a&&(flagNewRecordRowsVisible=$if("none"==a.style.display,!1,!0)),_=!0,flagNewRecordRowsVisible&&("allvisiblerows"==t.rowsToUpdate.toLowerCase()||"allnewrecordrows"==t.rowsToUpdate.toLowerCase()))for(var y=1;y<=this._newRowsInGrid;y++){if(v=!1,u=this.getValue("G",i,y*-1),f=!t.onlyUpdateBlankFields||(""==u||"&nbsp;"==u),"search"==t.type&&(h=this._searchReplace(u,o,l,d)),h==u&&(v=!0),f&&t.promptForConfirmation&&""!=u&&!v){var g=t.confirmationMessage;g=g.replace("[row]",""+y+" (new record)"),g=g.replace("[old]",u),g=g.replace("[new]",h);var _=confirm(g)}else _=!0;h==u&&(f=!1),f&&(this.setValue("G",i,y*-1,h),this._setRowState(y*-1,!0))}this._batchChange=!1},_searchReplace:function(e,t,i,s){var a=t;a=a.replace(/[\\\.\^\$\*\+\?\{\}\[\]\(\)\|]/g,function(e){return"\\"+e});var n=e.replace(RegExp(a,s),i);return n},_rowExpandLow:function(e){var t=!1,t="undefined"!=typeof arguments[1]&&arguments[1];if("single"==this.rowExpandMode)for(var i=1;i<=this._rowsInGrid;i++)i!=e&&this.rowCollapse(i);if($(this.gridId+".R"+e+".__ROWEXPAND_SEP")&&($(this.gridId+".R"+e+".__ROWEXPAND_SEP").style.display=""),trEle=$(this.gridId+".R"+e+".__ROWEXPAND_TR"),t){var s=$(this.gridId+".R"+e+".__ROWEXPAND_DIV");s.style.display="none";var a="#"+$u.s.tran(this.gridId+".R"+e+".__ROWEXPAND_DIV",".","\\.")}trEle.style.display="",t&&("slide"==this.animationMethod&&jQuery(a).slideToggle(this.animationSpeed),"fade"==this.animationMethod&&jQuery(a).fadeToggle(this.animationSpeed)),1!=this.rowExpandAutoRefresh&&$sa(trEle,"A5RowExpanded","true"),$(this.gridId+".R"+e+".__ROWEXPANDER").src=this.rowCollapseIcon},rowCollapse:function(e){var t=$(this.gridId+".R"+e+".__ROWEXPAND_TR");if(0==t)return!1;var i=!1;if("true"==$ga(t,"A5RowExpanded")&&(i=!0),i&&!this._executeEvent("canRowCollapse",{rowNumber:e}))return!1;$(this.gridId+".R"+e+".__ROWEXPAND_SEP")&&($(this.gridId+".R"+e+".__ROWEXPAND_SEP").style.display="none");var s=!1;if(this.rowExpandAnimation&&(s=this.rowExpandAnimation),s){var a="#"+$u.s.tran(this.gridId+".R"+e+".__ROWEXPAND_DIV",".","\\."),n=this.gridId+".R"+e+".__ROWEXPAND_TR";"slide"==this.animationMethod&&jQuery(a).slideToggle(this.animationSpeed,function(){$(n).style.display="none"}),"fade"==this.animationMethod&&jQuery(a).fadeToggle(this.animationSpeed,function(){$(n).style.display="none"})}else $(this.gridId+".R"+e+".__ROWEXPAND_TR").style.display="none";$(this.gridId+".R"+e+".__ROWEXPANDER").src=this.rowExpandIcon,i&&this._executeEvent("afterRowCollapse",{rowNumber:e}),$sa(t,"A5RowExpanded","false")},rowExpand:function(e){this.rowExpandToggle(e,!0)},rowExpandToggle:function(e){var t="undefined"!=typeof arguments[1]&&arguments[1],i=!1;this.rowExpandAnimation&&(i=this.rowExpandAnimation);var s=$(this.gridId+".R"+e+".__ROWEXPAND_TR");if(0==s)return!1;var a=!1;if(a=e>0?this._dirtyRows[e-1]:this._dirtyNewRows[e*-1-1],"none"==s.style.display||t){if(!this._executeEvent("canRowExpand",{rowNumber:e,isDirty:a}))return!1;if("true"!=$ga(s,"A5RowExpanded")){this._rowExpandLow(e);var n=this._getRowKey(e),o="_rowNumber="+e+"&"+n;if(this._executeEvent("beforeAjaxCallback",{ajaxEvent:"expandRow"}),this.rowExpandAutoRefresh){var r=$(this.gridId+".R"+e+".__ROWEXPAND_DIV");r.innerHTML=this.rowExpandWorkingMessage}return this._submitLow("expandRow",this.gridId,this.ajaxURL,o),!1}this._rowExpandLow(e,i),this._executeEvent("afterRowExpand",{rowNumber:e})}else this.rowCollapse(e)},showRowExpandGrid:function(e,t){var i=this._getRowKey(t),s="_gridNumber="+e+"&_rowNumber="+t+"&"+i;return this._executeEvent("beforeAjaxCallback",{ajaxEvent:"expandRow"}),this._submitLow("expandRowGrid",this.gridId,this.ajaxURL,s),!1},alphabetSearch:function(e){if(!this._executeEvent("canAlphabetButtonSearch",{}))return!1;var t="_searchId="+e+"&__dvWindow="+this._detailViewWindowState;return this._executeEvent("beforeAjaxCallback",{ajaxEvent:"alphabetButtonSearch"}),this._submitLow("Search_AlphabetButtons",this.gridId,this.ajaxURL,t),!1},editRow:function(e){var t=!0,i=$(this.gridId+".R-1");if(i&&(t=$if("none"==i.style.display,!1,!0)),!this._executeEvent("canRowSwitchToEditable",{rowNumber:e,field:"",newRecordRowsVisible:t}))return!1;var s="";if("rod-s"==this.rowEditMode){if($u.a.find(this._dirtyRows,!0)!=-1&&!this._confirmAction())return!1;var a=$u.a.find(this._editModeRows,!0),n=new Array;if(a!=-1){for(var o=0;o<this.gridColumnInfo.length;o++)n.push(A5.ajax.buildURLParam("V.R"+(a+1)+"."+this.gridColumnInfo[o].name,this._originalValues[a][o]));s=n.join("&")}s="_existingRowInEditMode="+(a+1)+$if(""!=s,"&"+s,"");var r=$(this.gridId+".STATEINFO").value;""!=r&&(s=s+"&"+r)}var l=this._getRowKey(e);return s="_rowNumber="+e+"&"+l+$if(""!=s,"&"+s,""),s=$u.s.tran(s,"\n","%0D%0A"),this._executeEvent("beforeAjaxCallback",{ajaxEvent:"editRow"}),this._submitLow("EditRow",this.gridId,this.ajaxURL,s),!1},editField:function(e,t){if(!this._executeEvent("canRowSwitchToEditable",{rowNumber:e,field:t}))return!1;var i="";if("rod-s"==this.rowEditMode){if(!this._confirmAction())return!1;var s=$u.a.find(this._editModeRows,!0),a=new Array;if(s!=-1){for(var n=0;n<this.gridColumnInfo.length;n++)a.push(A5.ajax.buildURLParam("V.R"+(s+1)+"."+this.gridColumnInfo[n].name,this._originalValues[s][n]));i=a.join("&")}i="_existingRowInEditMode="+(s+1)+$if(""!=i,"&"+i,"");var o=$(this.gridId+".STATEINFO").value;""!=o&&(i=i+"&"+o)}var r=this._getRowKey(e);return i="_rowNumber="+e+"&_FieldName="+t+"&"+r+$if(""!=i,"&"+i,""),i=$u.s.tran(i,"\n","%0D%0A"),this._executeEvent("beforeAjaxCallback",{ajaxEvent:"editField"}),this._submitLow("EditField",this.gridId,this.ajaxURL,i),!1},editFieldDV:function(e){return this.editDetailViewRecord(e),!1},deleteRow:function(e){if(!this._executeEvent("canRowDelete",{rowNumber:e}))return!1;var t=this;A5.msgBox.show(this.messages.t_deleteRow,this.messages.deleteRow,"OC",function(i){"ok"==i&&t._deleteRowWithoutConfirmation(e)})},_deleteRowLow:function(e){if(!this._executeEvent("canRowDelete",{rowNumber:e}))return!1;var t=this;A5.msgBox.show(this.messages.t_deleteRow,this.messages.deleteRow,"OC",function(i){"ok"==i&&t._deleteRowWithoutConfirmationLow(e)})},_deleteRowWithoutConfirmationLow:function(e){for(var t="_actualRowsOnPage="+this.actualRowsOnPage,i=[],s=0,a=1;a<=this._rowsInGrid;a++)s=$(this.gridId+".R"+a),"none"==s.style.display&&i.push(a);var n=i.join(",");alert("hidden rows:"+n),t=t+"&_rowsAlreadyHidden="+n+"&_rowsInGrid="+this._rowsInGrid,this.ajaxCallback("G","all","__A5SystemDeleteRowLow","",t)},_deleteRowWithoutConfirmation:function(e){var t="",i=new Array;i.push(this._getRowKey(e));var s=new Array;if("undefined"!=typeof this._originalValues[e-1])for(var a=0;a<this.gridColumnInfo.length;a++)s.push(A5.ajax.buildURLParam("old.V.R"+e+"."+this.gridColumnInfo[a].name,this._originalValues[e-1][a]));t=s.join("&");var n=$(this.gridId+".STATEINFO").value;return""!=n&&(t=t+"&"+n),i=i.join("&"),""!=i&&(t=t+"&"+i),t="_rowSubmitted="+e+"&__FormAction=DeleteRow&_rowNumber="+e+"&__FormID="+this.gridId+"&"+t,t=$u.s.tran(t,"\n","%0D%0A"),this._executeEvent("beforeAjaxCallback",{ajaxEvent:"deleteRecord"}),A5.ajax.callback(this.ajaxURL,t),!1},cancelEditDetailViewRecord:function(){if(this._detailViewRow<0)return!1;if(!this._executeEvent("canDetailViewSwitchFromEditable",{rowNumber:this._detailViewRow}))return!1;if(this._detailViewIsDirty){if(!this._executeEvent("canDetailViewCancelEdits",{rowNumber:this._detailViewRow}))return!1;var e=this;A5.msgBox.show(this.messages.t_cancelEditRow,this.messages.cancelEditRow,"OC",function(t){"ok"==t&&e._cancelEditDetailViewRecordWithoutConfirmation(!0)})}else this._cancelEditDetailViewRecordWithoutConfirmation(!1)},cancelEditRow:function(e){if(!this._executeEvent("canRowSwitchFromEditable",{rowNumber:e}))return!1;if(this._dirtyRows[e-1]){if(!this._executeEvent("canRowCancelEdits",{rowNumber:e}))return!1;var t=this;A5.msgBox.show(this.messages.t_cancelEditRow,this.messages.cancelEditRow,"OC",function(i){"ok"==i&&t._cancelEditRowWithoutConfirmation(e,!0)})}else this._cancelEditRowWithoutConfirmation(e,!1)},_cancelEditRowWithoutConfirmation:function(e,t){var i="",s=new Array;s.push(this._getRowKey(e));for(var a=new Array,n=0;n<this.gridColumnInfo.length;n++)a.push(A5.ajax.buildURLParam("V.R"+e+"."+this.gridColumnInfo[n].name,this._originalValues[e-1][n]));i=a.join("&");var o=$(this.gridId+".STATEINFO").value;return""!=o&&(i=i+"&"+o),s=s.join("&"),""!=s&&(i=i+"&"+s),i="_rowIsDirty="+t+"&_rowSubmitted="+e+"&__FormAction=DeleteRow&_rowNumber="+e+"&__FormID="+this.gridId+"&"+i,i=$u.s.tran(i,"\n","%0D%0A"),this._executeEvent("beforeAjaxCallback",{ajaxEvent:"cancelEditRow"}),this._submitLow("CancelEditRow",this.gridId,this.ajaxURL,i),!1},_cancelEditDetailViewRecordWithoutConfirmation:function(e){var t=this._detailViewRow,i="",s=new Array;s.push(this._getRowKey(t));var a=new Array,n=new Array;n=this.detailViewDataPreFetch?this._originalDVValues[t-1]:this._originalDVValues[0];for(var o=0;o<this.detailViewColumnInfo.length;o++)a.push(A5.ajax.buildURLParam("V.R"+t+"."+this.detailViewColumnInfo[o].name,n[o]));i=a.join("&");var r=$(this.gridId+".STATEINFO").value;return""!=r&&(i=i+"&"+r),s=s.join("&"),""!=s&&(i=i+"&"+s),i="_rowIsDirty="+e+"&_rowSubmitted="+t+"&_rowNumber="+t+"&__FormID="+this.gridId+"&"+i,i=$u.s.tran(i,"\n","%0D%0A"),
this._executeEvent("beforeAjaxCallback",{ajaxEvent:"cancelEditDetailViewRecord"}),this._submitLow("CancelEditDetailViewRecord",this.gridId,this.ajaxURL,i),!1},editDetailViewRecord:function(){var e="";if(this._detailViewRow<0)return!1;if("undefined"!=typeof arguments[0]&&(e=arguments[0]),!this._executeEvent("canDetailViewSwitchToEditable",{rowNumber:this._detailViewRow,field:e}))return!1;var t=this._getRowKey(this._detailViewRow),i="";return i="_fieldName="+e+"&_rowNumber="+this._detailViewRow+"&"+t+$if(""!=i,"&"+i,""),i=$u.s.tran(i,"\n","%0D%0A"),this._executeEvent("beforeAjaxCallback",{ajaxEvent:"editDetailViewRecord"}),this._submitLow("EditDetailViewRecord",this.gridId,this.ajaxURL,i),!1},clientSideValidateField:function(e,t,i){var s="";if("G"==e){var a=this.gridColumnInfo,n=this._colNumFromName(this._gridColNames,t);if(i<0){if(!this._dirtyNewRows[Math.abs(i)-1])return!1}else if(!this._dirtyRows[i-1])return!1}else var a=this.detailViewColumnInfo,n=this._colNumFromName(this._detailViewColNames,t),s=".D";if("undefined"!=typeof a[n]&&"undefined"!=typeof a[n].validate){var o=this.getValue(e,t,i),r=a[n].validate.call(this,o,t,i);"string"==typeof r?this.setErrors([{id:this.gridId+s+".V.R"+i+"."+t,message:r}]):this.clearErrors([this.gridId+s+".V.R"+i+"."+t])}},_testAlreadySubmitting:function(){if("object"==typeof this._currentSubmitTimeStamp){var e=new Date;if(e.getTime()-this._currentSubmitTimeStamp.getTime()<this._submitTestInterval)return!0}return this._currentSubmitTimeStamp=new Date,!1},validateGridRow:function(e){this.submitGridPartRow(e,!0)},validateGridField:function(e,t){this.submitGridPartRow(e,!0,t)},submitGridPartRow:function(e){var t="",i="undefined"!=typeof arguments[1]&&arguments[1];if(t="undefined"!=typeof arguments[2]?arguments[2]:"",!i&&this._testAlreadySubmitting())return!1;if(1!=i&&!this._executeEvent("canRowSubmit",{rowNumber:e}))return!1;if(e<0){if(this._dirtyNewRows[Math.abs(e)-1]){var s="",a=new Array;$sa(this.gridId+".R"+e,"A5IsDirty","true"),a.push(this.gridId+".R"+e),s=this._harvestGrid(a);var n=$(this.gridId+".STATEINFO").value;""!=n&&(s=s+"&"+n);var o=this.getStateInfo();""!=o&&(s=s+"&"+o);var r="saveGridDataNewRow";i&&(r="validateGridDataNewRow",""!=t&&(r="validateGridDataNewRowField&__fieldToValidate="+t)),s="_rowsInGrid="+this._rowsInGrid+"&_rowSubmitted="+e+"&__FormAction="+r+"&__FormID="+this.gridId+"&"+s,s=$u.s.tran(s,"\n","%0D%0A");var l="submitGridNewRow";return i&&(l="validateGridNewRow",""!=t&&(l="validateNewGridField_"+t)),this._executeEvent("beforeAjaxCallback",{ajaxEvent:l}),A5.ajax.callback(this.ajaxURL,s),!1}}else if(this._dirtyRows[e-1]){var s="",a=new Array,d=new Array;$sa(this.gridId+".R"+e,"A5IsDirty","true"),a.push(this.gridId+".R"+e),d.push(this._getRowKey(e)),s=this._harvestGrid(a);var n=$(this.gridId+".STATEINFO").value;""!=n&&(s=s+"&"+n),d=d.join("&"),""!=d&&(s=s+"&"+d);var r="saveGridDataRow";i&&(r="validateGridDataRow",""!=t&&(r="validateGridDataRowField&__fieldToValidate="+t)),s="_rowSubmitted="+e+"&__FormAction="+r+"&__FormID="+this.gridId+"&"+s;var n=$(this.gridId+".STATEINFO").value;""!=n&&(s=s+"&"+n);var o=this.getStateInfo();""!=o&&(s=s+"&"+o),s=$u.s.tran(s,"\n","%0D%0A");var l="submitGridRow";return i&&(l="validateGridRow",""!=t&&(l="validateGridField_"+t)),this._executeEvent("beforeAjaxCallback",{ajaxEvent:l}),A5.ajax.callback(this.ajaxURL,s),!1}},validateGrid:function(){this.submitGridPart(!1,"",!0)},submitGridPart:function(){if($u.a.find(this._dirtyRows,!0)==-1&&$u.a.find(this._dirtyNewRows,!0)==-1)return!1;if(this._testAlreadySubmitting())return!1;var e="undefined"!=typeof arguments[2]&&arguments[2];if(1!=e&&!this._executeEvent("canGridSubmit",{}))return!1;if("undefined"!=typeof arguments[0]&&1==arguments[0]){var t="undefined"!=typeof arguments[1]?arguments[1]:"";""==t&&(t="Submit changes?");var i=confirm(t);if(!i)return!1}for(var s="",a=new Array,n=new Array,o=1;o<=this._rowsInGrid;o++)this._dirtyRows[o-1]&&($sa(this.gridId+".R"+o,"A5IsDirty","true"),a.push(this.gridId+".R"+o),n.push(this._getRowKey(o)));for(var o=1;o<=this._newRowsInGrid;o++)this._dirtyNewRows[o-1]&&($sa(this.gridId+".R-"+o,"A5IsDirty","true"),a.push(this.gridId+".R-"+o));s=this._harvestGrid(a);var r=$(this.gridId+".STATEINFO").value;""!=r&&(s=s+"&"+r);var l=this.getStateInfo();""!=l&&(s=s+"&"+l),n=n.join("&"),""!=n&&(s=s+"&"+n);var d="saveGridData";e&&(d="validateGridData"),s="_rowsInGrid="+this._rowsInGrid+"&__FormAction="+d+"&__FormID="+this.gridId+"&"+s,s=$u.s.tran(s,"\n","%0D%0A");var h="submitGrid";return e&&(h="validateGrid"),this._executeEvent("beforeAjaxCallback",{ajaxEvent:h}),A5.ajax.callback(this.ajaxURL,s),!1},_currentGridQuery:function(){var e=new Array;return e.push(A5.ajax.buildURLParam("_gridCurrentFilter",this._gridFilter)),e.push(A5.ajax.buildURLParam("_gridCurrentOrder",this._gridOrder)),e.push(A5.ajax.buildURLParam("_gridCurrentArguments",this._gridArguments)),e.push(A5.ajax.buildURLParam("_gridCurrentDBType",this._gridDBType)),e.join("&")},exportData:function(){var e="undefined"!=typeof arguments[0]?arguments[0]:"Excel",t="undefined"!=typeof arguments[1]?arguments[1]:"10000",i="undefined"!=typeof arguments[2]?arguments[2]:"Y",s="undefined"!=typeof arguments[3]?arguments[3]:"Y",a="&_exportHiddenFields="+i+"&_useColHeadings="+s,n="_csfilename=_Default_&_exportDataType="+e+"&_recordSelection=Records%20in%20current%20query&_exportSource=1&_maxRecords="+t+"&_zip=N"+a;this.ajaxCallback("G",1,"__a5systemfileExport","",n)},filterCheckedRows:function(){flagUnchecked=!1,"undefined"!=typeof arguments[0]&&(flagUnchecked=arguments[0]);var e="__flagUnchecked="+flagUnchecked;this.ajaxCallback("G",1,"__a5systemFilterCheckedRows","",e)},_executeAjaxCallbackCompleteCode:function(e){var t=this._ajaxCallbackCompleteCode[e];"undefined"!=typeof t&&(t.call(),delete this._ajaxCallbackCompleteCode[e])},ajaxCallback:function(e,t,i){e=e.toUpperCase().substring(0,1);var s="undefined"!=typeof arguments[3]?arguments[3]:"",a="undefined"!=typeof arguments[4]?arguments[4]:"",n="undefined"!=typeof arguments[5]?arguments[5]:{},o="",r=A5.UUID();if("undefined"!=typeof n.onComplete){o=n.onComplete;var l=this._ajaxCallbackCompleteCode;l[r]=o}if(isNaN(t))if("all"==t.toLowerCase()||"all:all"==t.toLowerCase())var d="all",h=this._selectedRow;else if("none"==t.toLowerCase()||"none:none"==t.toLowerCase())var d="none",h=this._selectedRow;else if(t.indexOf(":")==-1)var d="all",h=this._selectedRow;else var c=new String(t),h=c.split(":")[0],d=c.split(":")[1];else var d=t,h=t;var u=this._getData(e,d);u=u+"&_part="+e,u=u+"&"+this._currentGridQuery(),u=u+"&_selectedGridPartRow="+this._selectedRow,u=u+"&__callbackId="+r,""==s?(u="_XbasicFunction="+i+"&_currentRow="+h+"&__FormAction=GenericAjaxCallback&__FormID="+this.gridId+u,s=this.ajaxURL):u="_Action="+i+"&_currentRow="+h+"&__FormAction=GenericAjaxCallback&__FormID="+this.gridId+u,""!=a&&(u=u+"&"+a);var f=$u.o.toJSON(A5.flags);return u=u+"&"+A5.ajax.buildURLParam("__a5browserflags",f),A5.ajax.callback(s,u),!1},isDirty:function(){return!!this._detailViewIsDirty||!!this._isDirty},_getData:function(e,t){var i="undefined"==typeof arguments[2]||arguments[2];e=e.toUpperCase().substring(0,1);var s="",a="",n=new Array;if("D"==e)if(t=this._detailViewRow,n.push(this._getRowKey(t)),""==this.detailViewEditMode);else if(this._detailViewIsDirty){a=A5.form.harvest(this.gridId+".DETAILVIEW_PART.FORM",!0,!0);for(var o=[],r="1",l="",d="1",h=0;h<this.detailViewColumnInfo.length;h++)"label,label"==this.detailViewColumnInfo[h].type&&(l=this.getValue("D",this.detailViewColumnInfo[h].name,r),o.push(A5.ajax.buildURLParam("V.R"+r+"."+this.detailViewColumnInfo[h].name,l)));a=a+"&"+o.join("&")}else{var c=new Array;if(t<0)for(var u=0;u<this.detailViewColumnInfo.length;u++)"undefined"!=typeof this._newDVValues&&(c.push(A5.ajax.buildURLParam("old.V.R1."+this.detailViewColumnInfo[u].name,this._newDVValues[u])),c.push(A5.ajax.buildURLParam("V.R1."+this.detailViewColumnInfo[u].name,this._newDVValues[u])));else if(this.detailViewDataPreFetch)for(var u=0;u<this.detailViewColumnInfo.length;u++)c.push(A5.ajax.buildURLParam("old.V.R1."+this.detailViewColumnInfo[u].name,this._originalDVValues[t-1][u])),c.push(A5.ajax.buildURLParam("V.R1."+this.detailViewColumnInfo[u].name,this._originalDVValues[t-1][u]));else for(var u=0;u<this.detailViewColumnInfo.length;u++)c.push(A5.ajax.buildURLParam("old.V.R1."+this.detailViewColumnInfo[u].name,this._originalDVValues[0][u])),c.push(A5.ajax.buildURLParam("V.R1."+this.detailViewColumnInfo[u].name,this._originalDVValues[0][u]));a=c.join("&"),a=a+"&_selectedGridRow="+this._selectedRow}else if("S"==e)a=A5.form.harvest(this.gridId+".SEARCH_PART.FORM",!0,!0);else if("string"==typeof t){if("all"==t.toLowerCase()){for(var f=new Array,c=new Array,u=1;u<=this._rowsInGrid;u++)if(n.push(this._getRowKey(u)),""!=this.rowEditMode)if(this._dirtyRows[u-1])f.push(this.gridId+".R"+u);else for(var d=0;d<this.gridColumnInfo.length;d++)c.push(A5.ajax.buildURLParam("V.R"+u+"."+this.gridColumnInfo[d].name,this._originalValues[u-1][d])),c.push(A5.ajax.buildURLParam("old.V.R"+u+"."+this.gridColumnInfo[d].name,this._originalValues[u-1][d]));if(""!=this.rowEditMode)for(var u=1;u<=this._newRowsInGrid;u++)if(this._dirtyNewRows[u-1])f.push(this.gridId+".R"+u*-1);else if("undefined"!=typeof this._newValues)for(var d=0;d<this._newValues.length;d++)c.push(A5.ajax.buildURLParam("V.R-"+u+"."+this.gridColumnInfo[d].name,this._newValues[d])),c.push(A5.ajax.buildURLParam("old.V.R-"+u+"."+this.gridColumnInfo[d].name,this._newValues[d]));f.length>0&&(a=this._harvestGrid(f)),c.length>0&&(a=a+$if(""!=a,"&","")+c.join("&"))}}else{var p=!1;if(p=t<0?this._dirtyNewRows[Math.abs(t)-1]:this._dirtyRows[t-1],t>0&&n.push(this._getRowKey(t)),""!=this.rowEditMode)if(p){var f=new Array;f.push(this.gridId+".R"+t),a=this._harvestGrid(f)}else{var c=new Array;if(t>0)for(var u=0;u<this.gridColumnInfo.length;u++)c.push(A5.ajax.buildURLParam("V.R"+t+"."+this.gridColumnInfo[u].name,this._originalValues[t-1][u])),c.push(A5.ajax.buildURLParam("old.V.R"+t+"."+this.gridColumnInfo[u].name,this._originalValues[t-1][u]));else if("undefined"!=typeof this._newValues)for(var u=0;u<this._newValues.length;u++)c.push(A5.ajax.buildURLParam("V.R"+t+"."+this.gridColumnInfo[u].name,this._newValues[u])),c.push(A5.ajax.buildURLParam("old.V.R"+t+"."+this.gridColumnInfo[u].name,this._newValues[u]));a=c.join("&")}}n=n.join("&");var m="";i&&(m=$(this.gridId+".STATEINFO").value),""!=n&&(s=s+"&"+n),""!=a&&(s=s+"&"+a),""!=m&&(s=s+"&"+m);var _=this.getStateInfo();return""!=_&&(s=s+"&"+_),s=s+"&"+this.getCheckedRows(),s=$u.s.tran(s,"\n","%0D%0A")},harvestColumn:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:",";e=e.toUpperCase();for(var i=[],s="",a=1;a<=this._rowsInGrid;a++)s=$(this.gridId+".R"+a),s&&""==s.style.display&&i.push(this.getValue("G",e,a));var n=i.join(t);return n},_getArrayControls:function(){var e=this.gridColumnInfo;this.detailViewColumnInfo.length>0&&(e=this.detailViewColumnInfo);for(var t=[],i=0;i<e.length;i++)e[i].name.split("[").length>1&&t.push(e[i].name.split("[")[0]);return t.join(",")},getValue:function(e,t,i){return this._getValue(e,t,i)},_hideSnakingColumnFieldLabels:function(){for(var e="",t=0,i=0;i<this.gridColumnInfo.length;i++)for(j=1;j<=this._rowsInGrid;j++)t=$u.a.find(this._snakingRowsInFirstColumn,""+j),t==-1&&(e=$(this.gridId+".LBL.R"+j+"."+this.gridColumnInfo[i].name).parentNode,e&&(e.style.display="none"))},_colNumFromName:function(e,t){var i=$u.a.find(e,t);return i==-1&&(i=$u.a.find(e,t+"[]")),i},_getValue:function(e,t,i){e=e.toUpperCase(),t=t.toUpperCase();var s=0,a="";if("D"==e){if(s=this._colNumFromName(this._detailViewColNames,t),s==-1)return!1;var n=this.detailViewColumnInfo[s].dataType;if(n=n.toUpperCase(),s>-1){t=this._detailViewColNames[s],a=this.detailViewColumnInfo[s].type.split(",")[0];var o=!1;if(this._detailViewRow<0){if("undefined"==typeof this._newDVValues)return o=!0,""}else"undefined"==typeof this._originalDVValues&&(o=!0);if((this._detailViewIsDirty||o)&&"label"!=a&&"label-html"!=a&&"link"!=a&&"img"!=a){var r=$gvs("V.R1."+t,$(this.gridId+".DETAILVIEW_PART.FORM"));return r==$ga("V.R1."+t,"A5WatermarkText",$(this.gridId+".DETAILVIEW_PART.FORM"))[0]&&(r=""),"undefined"!=typeof n&&"L"==n&&(r=$u.s.toBool(r)),r}if(this._detailViewRow<0){if("link"==a)return this._newDVValues[s][0];var r=this._newDVValues[s];return"undefined"!=typeof n&&"L"==n&&(r=$u.s.toBool(r)),r}if(this.detailViewDataPreFetch){if("link"==a)return this._originalDVValues[this._detailViewRow-1][s][0];var r=this._originalDVValues[this._detailViewRow-1][s];return"undefined"!=typeof n&&"L"==n&&(r=$u.s.toBool(r)),r}if(this._originalDVValues[0]){if("link"==a)return this._originalDVValues[0][s][0];var r=this._originalDVValues[0][s];return"undefined"!=typeof n&&"L"==n&&(r=$u.s.toBool(r)),r}var r=$gvs(this.gridId+".D.V.R1."+t);return"undefined"!=typeof n&&"L"==n&&(r=$u.s.toBool(r)),A5.isBlank(r)&&(r=""),r}var r=$gvs(this.gridId+".D.V.R1."+t);return r==$ga(this.gridId+".D.V.R1."+t,"A5WatermarkText")&&(r=""),"undefined"!=typeof n&&"L"==n&&(r=$u.s.toBool(r)),r}if("G"==e){if(0==i)return"";if(s=this._colNumFromName(this._gridColNames,t),s==-1)return!1;var n=this.gridColumnInfo[s].dataType;if(n=n.toUpperCase(),s>-1){t=this._gridColNames[s],a=this.gridColumnInfo[s].type.split(",")[0];var l=!1;if(i<0?this._dirtyNewRows[Math.abs(i)-1]&&(l=this._dirtyNewRows[Math.abs(i)-1]):this._dirtyRows[i-1]&&(l=this._dirtyRows[i-1]),l&&"label"!=a&&"label-html"!=a&&"link"!=a&&"img"!=a){var r=$gvs("V.R"+i+"."+t,$(this.gridId+".R"+i));return r==$ga("V.R"+i+"."+t,"A5WatermarkText",$(this.gridId+".R"+i))[0]&&(r=""),"undefined"!=typeof n&&"L"==n&&(r=$u.s.toBool(r)),r}if(this._originalValues[i-1]&&""!=this.rowEditMode){if("link"==a)return this._originalValues[i-1][s][0];var r=this._originalValues[i-1][s];return"undefined"!=typeof n&&"L"==n&&(r=$u.s.toBool(r)),r}var r=$gvs(this.gridId+".V.R"+i+"."+t);return r.constructor!=Array&&(r==$ga(this.gridId+".V.R"+i+"."+t,"A5WatermarkText")&&(r=""),r=r.replace(/<span[^>]+A5HL="Y">([^<]+)<\/span>/gi,"$1"),A5.isBlank(r)&&(r="")),"undefined"!=typeof n&&"L"==n&&(r=$u.s.toBool(r)),r}var r=$gvs(this.gridId+".V.R"+i+"."+t);return r==$ga(this.gridId+".V.R"+i+"."+t,"A5WatermarkText")&&(r=""),"undefined"!=typeof n&&"L"==n&&(r=$u.s.toBool(r)),r}if("S"==e){var r=$gvs("S."+t,$(this.gridId+".SEARCH_PART.FORM"));return""==r&&(r=$gvs("S."+t+"[]",$(this.gridId+".SEARCH_PART.FORM"))),r==$ga(this.gridId+".S."+t,"A5WatermarkText")&&(r=""),r}},_setCellStyles:function(e,t){for(var i=$(this.gridId+".R"+e),s=0;s<i.rows.length;s++)for(var a=0;a<i.rows[s].cells.length;a++){var n=$gs(i.rows[s].cells[a]);n=$u.s.rTrim(n,";")+";"+t,$ss(i.rows[s].cells[a],n)}},_addCellClassNames:function(e,t){for(var i=$(this.gridId+".R"+e),s=0;s<i.rows.length;s++)for(var a=0;a<i.rows[s].cells.length;a++)$acn(i.rows[s].cells[a],t)},_removeCellClassNames:function(e,t){for(var i=$(this.gridId+".R"+e),s=0;s<i.rows.length;s++)for(var a=0;a<i.rows[s].cells.length;a++)$rcn(i.rows[s].cells[a],t)},setValue:function(e,t,i,s){var a="boolean"!=typeof arguments[4]||arguments[4];this._setValue(e,t,i,s,a)},_setValue:function(e,t,i,s){null==s&&(s=""),t=t.toUpperCase(),e=e.toUpperCase();var a=0,n="",o="",r=!1,l="boolean"!=typeof arguments[4]||arguments[4];if("D"==e){if(l="boolean"!=typeof s||s,s=i,a=this._colNumFromName(this._detailViewColNames,t),a>-1)if(t=this._detailViewColNames[a],n=this.detailViewColumnInfo[a].type.split(",")[0],o=this.detailViewColumnInfo[a].dataType,"label"!=n&&"link"!=n||(s.constructor==Array?s[0]=String(s[0]).replace(/\&/g,"&amp;"):s=String(s).replace(/\&/g,"&amp;"),"label"==n&&"plain"==this.detailViewColumnInfo[a].displayFormat&&(s=s.replace(/\</g,"&lt;"),s=s.replace(/\>/g,"&gt;"),s=s.replace(/\n/g,"<br/>"))),"undefined"!=typeof this._fieldHelpers_DV[t])this._fieldHelpers_DV[t].setValue(s,this.gridId+".D.V.R1."+t),r=$(this.gridId+".D.V.R1."+t);else if("label"==n||"label-html"==n||"link"==n||"img"==n)$svs(this.gridId+".D.V.R1."+t,s),r=$(this.gridId+".D.V.R1."+t);else if("popup-rte"==n)$svs("V.R1."+t,s,$(this.gridId+".DETAILVIEW_PART.FORM")),$(this.gridId+".V.R"+i+"."+t+".DISPLAY").innerHTML=s;else if("rte"==n){$svs("V.R1."+t,s,$(this.gridId+".DETAILVIEW_PART.FORM"));var d=window[this.gridId+"_"+t+"_RTEObj"];"undefined"!=typeof d._rteObj?d._rteObj.setHTML(s):d.setHTML(s)}else"l"==o&&(s=$u.s.toBool(""+s)),$svs("V.R1."+t,s,$(this.gridId+".DETAILVIEW_PART.FORM"));else $svs("V.R1."+t,s,$(this.gridId+".DETAILVIEW_PART.FORM"));if(!r&&l){if(r=$n("V.R1."+t),r=$cetp(r,$(this.gridId+".DETAILVIEW_PART.FORM")))for(var h=0;h<r.length;h++)$e.execute(r[h],"change")}else l&&$e.execute(r,"change")}else if("G"==e)if(a=this._colNumFromName(this._gridColNames,t),a>-1?(t=this._gridColNames[a],n=this.gridColumnInfo[a].type.split(",")[0],o=this.gridColumnInfo[a].dataType,"label"!=n&&"link"!=n||(s.constructor==Array?s[0]=String(s[0]).replace(/\&/g,"&amp;"):s=String(s).replace(/\&/g,"&amp;"),"label"==n&&"plain"==this.gridColumnInfo[a].displayFormat&&(s=s.replace(/\</g,"&lt;"),s=s.replace(/\>/g,"&gt;"),s=s.replace(/\n/g,"<br/>"))),"undefined"!=typeof this._fieldHelpers_G[t]?(this._fieldHelpers_G[t].setValue(s,this.gridId+".V.R"+i+"."+t),r=$(this.gridId+".V.R"+i+"."+t)):"label"==n||"label-html"==n||"link"==n||"img"==n?($svs(this.gridId+".V.R"+i+"."+t,s),r=$(this.gridId+".V.R"+i+"."+t)):"popup-rte"==n?($svs("V.R"+i+"."+t,s,$(this.gridId+".R"+i)),$(this.gridId+".V.R"+i+"."+t+".DISPLAY").innerHTML=s):("l"==o&&(s=$u.s.toBool(""+s)),$svs("V.R"+i+"."+t,s,$(this.gridId+".R"+i)))):$svs("V.R"+i+"."+t,s,$(this.gridId+".R"+i)),!r&&l){if(r=$n("V.R"+i+"."+t),r=$cetp(r,$(this.gridId+".R"+i)))for(var h=0;h<r.length;h++)$e.execute(r[h],"change")}else l&&$e.execute(r,"change");else if("S"==e&&(l="boolean"!=typeof s||s,s=i,r=$n("S."+t),0==r&&(r=$n("S."+t+"[]")),r=$cetp(r,$(this.gridId+".SEARCH_PART.FORM")),$svs(r,s,$(this.gridId+".SEARCH_PART.FORM")),r&&l))for(var h=0;h<r.length;h++)$e.execute(r[h],"change")},_harvestGrid:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:"";""!=t&&(t+=".");var i=new Array;if("object"==typeof e&&e.length)for(var s=0;s<e.length;s++)i[i.length]=$(e[s]);else i=[$(e)];var a="",n=0,o=0,r=new Object,l=new Array,d=(new Array,new Array),h=new Array,c=new Array,u=!1,f=0;if(""!=this.rowEditMode)for(var s=0;s<i.length;s++){if(h[h.length]=i[s].id,n=Number(i[s].id.split(".")[1].substr(1)),n<0?f=this._newValues:(n-=1,this._originalNullValues.length>0&&l.push(A5.ajax.buildURLParam("__Nulls_"+(n+1),this._originalNullValues[n].toString())),f=this._originalValues[n]),r=i[s].getElementsByTagName("input"),"undefined"==typeof f)return!1;for(var p=0;p<r.length;p++)"true"!=r[p].getAttribute("A5HarvestIgnore")&&r[p].id.split(".")[0]==this.gridId&&(o=this._colNumFromName(this._gridColNames,r[p].name.split(".")[2]),"radio"==r[p].type.toLowerCase()?$u.a.find(d,r[p].name)==-1&&(d[d.length]=r[p].name,o>-1&&(l[l.length]=a5_AJAX_Form_SubmitValueParam(t+"old."+r[p].name,f[o])),u="true"==r[p].getAttribute("A5IsDirty"),u&&(c[c.length]=r[p].name),l[l.length]=a5_AJAX_Form_SubmitValueParam(t+r[p].name,$gvs($n(r[p].name),i[s]))):"checkbox"==r[p].type.toLowerCase()?$u.a.find(d,r[p].name)==-1&&(d[d.length]=r[p].name,o>-1&&(l[l.length]=a5_AJAX_Form_SubmitValueParam(t+"old."+r[p].name,f[o])),u="true"==r[p].getAttribute("A5IsDirty"),u&&(c[c.length]=r[p].name),l[l.length]=a5_AJAX_Form_SubmitValueParam(t+r[p].name,$gvs($n(r[p].name),i[s]))):"submit"!=r[p].type.toLowerCase()&&"reset"!=r[p].type&&"button"!=r[p].type&&"image"!=r[p].type&&"file"!=r[p].type&&(o>-1&&(l[l.length]=a5_AJAX_Form_SubmitValueParam(t+"old."+r[p].name,f[o])),u="true"==r[p].getAttribute("A5IsDirty"),u&&(c[c.length]=r[p].name),a=$gvs(r[p]),a==r[p].getAttribute("A5WatermarkText")&&(a=""),l[l.length]=a5_AJAX_Form_SubmitValueParam(t+r[p].name,a)));r=i[s].getElementsByTagName("select");for(var p=0;p<r.length;p++)"true"!=r[p].getAttribute("A5HarvestIgnore")&&r[p].id.split(".")[0]==this.gridId&&(o=this._colNumFromName(this._gridColNames,r[p].name.split(".")[2]),o>-1&&(l[l.length]=a5_AJAX_Form_SubmitValueParam(t+"old."+r[p].name,f[o])),u="true"==r[p].getAttribute("A5IsDirty"),u&&(c[c.length]=r[p].name),l[l.length]=a5_AJAX_Form_SubmitValueParam(t+r[p].name,$gvs(r[p])));r=i[s].getElementsByTagName("textarea");for(var p=0;p<r.length;p++)"true"!=r[p].getAttribute("A5HarvestIgnore")&&r[p].id.split(".")[0]==this.gridId&&(o=this._colNumFromName(this._gridColNames,r[p].name.split(".")[2]),o>-1&&(l[l.length]=a5_AJAX_Form_SubmitValueParam(t+"old."+r[p].name,f[o])),u="true"==r[p].getAttribute("A5IsDirty"),u&&(c[c.length]=r[p].name),a=$gvs(r[p]),a==r[p].getAttribute("A5WatermarkText")&&(a=""),l[l.length]=a5_AJAX_Form_SubmitValueParam(t+r[p].name,a))}for(var m=[],_="",a="",p=0;p<e.length;p++){_=e[p].split(".R")[1];for(var g=0;g<this.gridColumnInfo.length;g++)"label,label"==this.gridColumnInfo[g].type&&(a=this.getValue("G",this.gridColumnInfo[g].name,_),m.push(A5.ajax.buildURLParam("V.R"+_+"."+this.gridColumnInfo[g].name,a)))}return"a5DirtyRegions="+h.join("\n")+"&a5RegionsDirtyValues="+c.join("\n")+"&"+l.join("&")+"&"+m.join("&")},_populateRowViewMode:function(e,t,i){this._populateRow(e,t,i,!1,[],!0)},_populateRow:function(e,t,i){var s="undefined"!=typeof arguments[3]&&arguments[3],a="undefined"!=typeof arguments[4]?arguments[4]:new Array,n=0;"undefined"!=typeof arguments[5]&&arguments[5]&&(n=1),"rod-s"!=this.rowEditMode&&"rod"!=this.rowEditMode||0==this._editModeRows[e-1]&&(n=1);for(var o="undefined"!=typeof arguments[6]&&arguments[6],r=0,l=0,d="",h=0;h<i.length;h++)if($u.a.find(a,i[h])==-1){if(r=this._colNumFromName(this._gridColNames,i[h]),d="",r>-1?(i[h]=this._gridColNames[r],e>0&&(this._originalValues[e-1]||(this._originalValues[e-1]=new Array),this._originalValues[e-1][r]=t[h]),d=this.gridColumnInfo[r].type.split(",")[n],"label"!=d&&"link"!=d||(t[h].constructor==Array?t[h][0]=t[h][0].replace(/\&/g,"&amp;"):t[h]=t[h].replace(/\&/g,"&amp;"),"label"==d&&"plain"==this.gridColumnInfo[r].displayFormat&&(t[h]=t[h].replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\n/g,"<br/>"))),l=$n("label"==d||"label-html"==d||"link"==d||"img"==d?this.gridId+".V.R"+e+"."+i[h]:"V.R"+e+"."+i[h])):l=$n("V.R"+e+"."+i[h]),l=$cetp(l,$(this.gridId+".R"+e)),!l.tagName){for(var c=new Array,u=0;u<l.length;u++)l[u].id.split(".")[0]==this.gridId&&c.push(l[u]);l=0!=c.length&&c}l&&(1==o&&"true"==$ga(l[0],"A5IsDirty")||("undefined"!=typeof this._fieldHelpers_G[i[h]]?this._fieldHelpers_G[i[h]].setValue(t[h],l[0]):($svs(l,t[h],!1,!1),"popup-rte"==d&&($(this.gridId+".V.R"+e+"."+i[h]+".DISPLAY").innerHTML=t[h])),$sa(l,"A5IsDirty","false")))}s||this._setRowState(e,!1),this._fireWatches("G",e),this._executeEvent("afterRowPopulate",{rowNumber:e})},_populateDirtyRow:function(e,t,i){var s=0,a=0,n="",o=!1,r=0;this._batchChange=!0;for(var l=0;l<i.length;l++){if(a=this._colNumFromName(this._gridColNames,i[l]),a>-1?(i[l]=this._gridColNames[a],n=this.gridColumnInfo[a].type.split(",")[s],"label"!=n&&"link"!=n||(t[l].constructor==Array?t[l][0]=t[l][0].replace(/\&/g,"&amp;"):t[l]=t[l].replace(/\&/g,"&amp;"),"label"==n&&"plain"==this.gridColumnInfo[a].displayFormat&&(t[l]=t[l].replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\n/g,"<br/>"))),"label"==n||"label-html"==n||"link"==n||"img"==n?r=$n(this.gridId+".V.R"+e+"."+i[l]):"popup-rte"==n?(r=$n("V.R"+e+"."+i[l]),$(this.gridId+".V.R"+e+"."+i[l]+".DISPLAY").innerHTML=t[l]):r=$n("V.R"+e+"."+i[l]),r=$cetp(r,$(this.gridId+".R"+e)),e<0?this._newValues[a]!=t[l]&&($sa(r,"A5IsDirty","true",$(this.gridId+".R"+e)),o=!0,$e.execute(r[0],"change")):this._originalValues[e-1][a]!=t[l]&&($sa(r,"A5IsDirty","true",$(this.gridId+".R"+e)),o=!0,$e.execute(r[0],"change"))):(r=$n("V.R"+e+"."+i[l]),r=$cetp(r,$(this.gridId+".R"+e)),$sa(r,"A5IsDirty","true",$(this.gridId+".R"+e)),o=!0,$e.execute(r[0],"change")),!r.tagName){for(var d=new Array,h=0;h<r.length;h++)r[h].id.split(".")[0]==this.gridId&&d.push(r[h]);r=0!=d.length&&d}r&&("undefined"!=typeof this._fieldHelpers_G[i[l]]?this._fieldHelpers_G[i[l]].setValue(t[l],r[0]):$svs(r,t[l],!1,!1))}this._batchChange=!1,this._setRowState(e,o),this._fireWatches("G",e),this._executeEvent("afterRowPopulate",{rowNumber:e})},_populateDetailView:function(e,t,i){var s="undefined"!=typeof arguments[3]&&arguments[3],a="undefined"!=typeof arguments[4]?arguments[4]:new Array,n=0;"undefined"!=typeof arguments[5]&&(n=arguments[5]);var o="undefined"==typeof arguments[6]||arguments[6];s||(this._resetDetailViewForm(),this._setDetailViewState(!1));for(var r=0,l=0,d="",h=0;h<i.length;h++)if($u.a.find(a,i[h])==-1){if(r=this._colNumFromName(this._detailViewColNames,i[h]),r>-1)if(i[h]=this._detailViewColNames[r],e>0&&(this._originalDVValues[e-1]||(this._originalDVValues[e-1]=new Array),this._originalDVValues[e-1][r]=t[h]),d=this.detailViewColumnInfo[r].type.split(",")[n],"label"!=d&&"link"!=d||(t[h].constructor==Array?t[h][0]=t[h][0].replace(/\&/g,"&amp;"):t[h]=t[h].replace(/\&/g,"&amp;"),"label"==d&&"plain"==this.detailViewColumnInfo[r].displayFormat&&(t[h]=t[h].replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\n/g,"<br/>"))),"label"==d||"label-html"==d||"link"==d||"img"==d)l=$n(this.gridId+".D.V.R1."+i[h]);else if("popup-rte"==d)l=$n("V.R1."+i[h]),$(this.gridId+".D.V.R1."+i[h]+".DISPLAY").innerHTML=t[h];else if("rte"==d){l=$n("V.R1."+i[h]);var c=window[this.gridId+"_"+i[h]+"_RTEObj"];"undefined"!=typeof c._rteObj?c._rteObj.setHTML(t[h]):c.setHTML(t[h])}else l=$n("V.R1."+i[h]);else l=$n("V.R1."+i[h]);l=$cetp(l,$(this.gridId+".DETAILVIEW_PART.FORM")),l&&("undefined"!=typeof this._fieldHelpers_DV[i[h]]?this._fieldHelpers_DV[i[h]].setValue(t[h],l[0]):$svs(l,t[h],!1,!1),$sa(l,"A5IsDirty","false"),"object"==typeof t[h]?$sa(l,"A5OriginalValue",t[h].join("||A5ARRAYSEP||")):$sa(l,"A5OriginalValue",t[h]))}this._fireWatches("D",1),o&&this._executeEvent("onDetailViewRender",{rowNumber:this._detailViewRow})},_fireWatches:function(e,t){if("G"==e||"all"==e)if("number"==typeof t){for(var i in this._gridWatches)A5.Watch.fire(this.gridId+"."+i);for(var s in this._gridRowWatches)A5.Watch.fire(this.gridId+".R"+t+"."+s)}else{for(var i in this._gridWatches)A5.Watch.fire(this.gridId+"."+i);if(0!=this.pagesInGrid)for(var s in this._gridRowWatches)for(var a=1;a<=this._rowsInGrid;a++)A5.Watch.fire(this.gridId+".R"+a+"."+s);for(var s in this._gridRowWatches)for(var a=1;a<=this._newRowsInGrid;a++)A5.Watch.fire(this.gridId+".R-"+a+"."+s)}if(("D"==e||"all"==e)&&0!=this._detailViewRow)for(var n in this._detailViewWatches)A5.Watch.fire(this.gridId+".DV."+n);if("S"==e||"all"==e)for(var o in this._searchWatches)A5.Watch.fire(this.gridId+".S."+o)},_resetDetailViewForm:function(){for(var e=0,t=$(this.gridId+".DETAILVIEW_PART.FORM"),i="",s=!1,a=0;a<this.detailViewColumnInfo.length;a++){e=$n("V.R1."+this.detailViewColumnInfo[a].name),delete n;var n=new Array;s=!1;for(var o=0;o<e.length;o++)$isChild(e[o],t)&&(n.push(e[o]),"true"==$ga(e[o],"A5IsDirty")&&(s=!0));s&&(i=$ga(n[0],"A5OriginalValue"),i=i.split("||A5ARRAYSEP||"),1==i.length&&(i=i[0]),"object"==typeof this._fieldHelpers_S[this.detailViewColumnInfo[a].name]?this._fieldHelpers_S[this.detailViewColumnInfo[a].name].setValue(i,n):$svs(n,i),$sa(n,"A5IsDirty","false"))}$sa(t,"A5IsDirty","false")},_populateDirtyDetailView:function(e,t,i){var s=0,a=0,n="",o=!1,r=0,l="",d="";this._batchChange=!0;for(var h=0;h<i.length;h++){if(a=this._colNumFromName(this._detailViewColNames,i[h]),a>-1){if(i[h]=this._detailViewColNames[a],n=this.detailViewColumnInfo[a].type.split(",")[s],"label"!=n&&"link"!=n||(t[h].constructor==Array?t[h][0]=t[h][0].replace(/\&/g,"&amp;"):t[h]=t[h].replace(/\&/g,"&amp;"),"label"==n&&"plain"==this.detailViewColumnInfo[a].displayFormat&&(t[h]=t[h].replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\n/g,"<br/>"))),"label"==n||"label-html"==n||"link"==n||"img"==n?r=$n(this.gridId+".D.V.R1."+i[h]):"popup-rte"==n?(r=$n("V.R1."+i[h]),$(this.gridId+".D.V.R1."+i[h]+".DISPLAY").innerHTML=t[h]):"rte"==n?(r=$n("V.R1."+i[h]),window[this.gridId+"_"+i[h]+"_RTEObj"]._rteObj.setHTML(t[h])):r=$n("V.R1."+i[h]),r=$cetp(r,$(this.gridId+".DETAILVIEW_PART.FORM")),r&&(r.constructor==Array||"undefined"!=typeof r.tagName)){if(r.tagName)l=r.getAttribute("A5OriginalValue").split("||A5ARRAYSEP||");else{var d=r[0].getAttribute("A5OriginalValue");l="",d&&(l=d.split("||A5ARRAYSEP||"))}l.toString()!=t[h].toString()&&($sa(r,"A5IsDirty","true",$(this.gridId+".DETAILVIEW_PART.FORM")),o=!0,$e.execute(r[0],"change"),$sa(r,"A5IsDirty","true",$(this.gridId+".DETAILVIEW_PART.FORM")))}}else r=$n("V.R1."+i[h]),r=$cetp(r,$(this.gridId+".DETAILVIEW_PART.FORM")),r&&($sa(r,"A5IsDirty","true",$(this.gridId+".DETAILVIEW_PART.FORM")),o=!0,$e.execute(r[0],"change"));r&&("undefined"!=typeof this._fieldHelpers_DV[i[h]]?this._fieldHelpers_DV[i[h]].setValue(t[h],r[0]):$svs(r,t[h],$(this.gridId+".D.R1"),!1))}this._batchChange=!1,o&&this._setDetailViewState(o),this._fireWatches("D",1)},_deleteRow:function(e){$(this.gridId+".R"+e).style.display="none",$sa(this.gridId+".R"+e,"A5DeletedRow","true"),this._setRowState(e,!1);for(var t=0,i=e+1;i<=this._rowsInGrid;i++)if("none"!=$(this.gridId+".R"+i).style.display){t=i;break}if(0==t)for(var i=e-1;i>0;i--)if("none"!=$(this.gridId+".R"+i).style.display){t=i;break}0!=t?this.setFocus(t):this._focusRow=0},_setRowState:function(e,t){var i=!1;if(e<0){if(0==this._editPermissions.allowInsert)return!1;this._dirtyNewRows[Math.abs(e)-1]!=t&&(i=!0,this._dirtyNewRows[Math.abs(e)-1]=t)}else{if(0==this._editPermissions.allowUpdate&&0==this._editPermissions.allowDelete)return!1;this._dirtyRows[e-1]!=t&&(i=!0,this._dirtyRows[e-1]=t)}if(i){var s="view";t?(s=e<0?"enter":"change",$acn(this.gridId+".TD.R"+e+".__SYSTEM_STATUSCOLUMN","A5GridRowIsDirty"),this._gridRowState=s,this._executeEvent("onRowStateChange",{mode:s,isDirty:!0,rowNumber:e})):($rcn(this.gridId+".TD.R"+e+".__SYSTEM_STATUSCOLUMN","A5GridRowIsDirty"),this._gridRowState=s,this._executeEvent("onRowStateChange",{mode:s,isDirty:!1,rowNumber:e})),t?$u.a.find(this._dirtyRows,!0)==-1&&$u.a.find(this._dirtyNewRows,!0)==-1||this._isDirty||(this._isDirty=!0,this._enable(this.gridId+".GRID_PART.SUBMITBUTTON_BOTTOM",!0),this._enable(this.gridId+".GRID_PART.CANCELBUTTON_BOTTOM",!0),this._enable(this.gridId+".GRID_PART.SUBMITBUTTON_TOP",!0),this._enable(this.gridId+".GRID_PART.CANCELBUTTON_TOP",!0),this._executeEvent("onGridStateChange",{isDirty:!0})):$u.a.find(this._dirtyRows,!0)==-1&&$u.a.find(this._dirtyNewRows,!0)==-1&&this._isDirty&&(this._isDirty=!1,this._enable(this.gridId+".GRID_PART.SUBMITBUTTON_BOTTOM",!1),this._enable(this.gridId+".GRID_PART.CANCELBUTTON_BOTTOM",!1),this._enable(this.gridId+".GRID_PART.SUBMITBUTTON_TOP",!1),this._enable(this.gridId+".GRID_PART.CANCELBUTTON_TOP",!1),this._executeEvent("onGridStateChange",{isDirty:!1}))}},_setDetailViewImages:function(e){"undefined"==typeof e&&(e="view");var t=$(this.gridId+".D.IMG.CANCELEDIT"),i=$(this.gridId+".D.IMG.SAVE"),s=$(this.gridId+".D.IMG.SAVEANDENTER"),a=$(this.gridId+".DETAILVIEW_PART.NEWRECORDBUTTON"),n=$(this.gridId+".DETAILVIEW_PART.CANCELNEWRECORDBUTTON");"change"==e?(t&&(t.src=this._dVImages.cancelEdits),i&&(i.src=this._dVImages.saveRecord),s&&(s.src=this._dVImages.saveAndEnter)):"enter"==e?(t&&(t.src=this._dVImages.cancelEdits),i&&(i.src=this._dVImages.saveRecord),s&&(s.src=this._dVImages.saveAndEnter)):"view"==e&&(t&&(t.src=this._dVImages.d_cancelEdits),i&&(i.src=this._dVImages.d_saveRecord),s&&(s.src=this._dVImages.d_saveAndEnter),a&&(a.style.display=""),n&&(n.style.display="none"))},_setDetailViewState:function(e){var t=this._detailViewState;if(this._detailViewIsDirty!=e){if(t="view",this._detailViewRow<0&&(t="enter"),"enter"==t){if(0==this._editPermissions.allowInsert&&e)return!1}else if("view"==t&&0==this._editPermissions.allowUpdate&&e)return!1;e?(this._detailViewIsDirty=!0,this._enable(this.gridId+".DETAILVIEW_PART.SUBMITBUTTON",!0),this._enable(this.gridId+".DETAILVIEW_PART.CANCELEDITSBUTTON",!0),this._enable(this.gridId+".DETAILVIEW_PART.SAVEANDENTERBUTTON",!0),$(this.gridId+".DVTOOLBAR_VIEWMODE")&&($(this.gridId+".DVTOOLBAR_VIEWMODE").style.display="none"),
this._detailViewRow==-1?($(this.gridId+".DVTOOLBAR_CHANGEMODE")&&($(this.gridId+".DVTOOLBAR_CHANGEMODE").style.display="none"),$(this.gridId+".DVTOOLBAR_ENTERMODE")&&($(this.gridId+".DVTOOLBAR_ENTERMODE").style.display="")):($(this.gridId+".DVTOOLBAR_CHANGEMODE")&&($(this.gridId+".DVTOOLBAR_CHANGEMODE").style.display=""),$(this.gridId+".DVTOOLBAR_ENTERMODE")&&($(this.gridId+".DVTOOLBAR_ENTERMODE").style.display="none")),t=this._detailViewRow<0?"enter":"change",this._detailViewState=t,this._executeEvent("onDetailViewStateChange",{mode:t,isDirty:!0,rowNumber:this._detailViewRow})):(this._detailViewIsDirty=!1,this._enable(this.gridId+".DETAILVIEW_PART.SUBMITBUTTON",!1),this._enable(this.gridId+".DETAILVIEW_PART.CANCELEDITSBUTTON",!1),this._enable(this.gridId+".DETAILVIEW_PART.SAVEANDENTERBUTTON",!1),$(this.gridId+".DVTOOLBAR_VIEWMODE")&&($(this.gridId+".DVTOOLBAR_VIEWMODE").style.display=""),$(this.gridId+".DVTOOLBAR_CHANGEMODE")&&($(this.gridId+".DVTOOLBAR_CHANGEMODE").style.display="none"),$(this.gridId+".DVTOOLBAR_ENTERMODE")&&($(this.gridId+".DVTOOLBAR_ENTERMODE").style.display="none"),this._detailViewState=t,this._executeEvent("onDetailViewStateChange",{mode:t,isDirty:!1,rowNumber:this._detailViewRow}))}else this._detailViewRow<0&&"view"==t?(t="enter",this._detailViewState=t,this._executeEvent("onDetailViewStateChange",{mode:t,isDirty:e,rowNumber:this._detailViewRow})):this._detailViewRow>0&&"enter"==t&&(t="view",this._detailViewState=t,this._executeEvent("onDetailViewStateChange",{mode:t,isDirty:e,rowNumber:this._detailViewRow}));this._setDetailViewImages(t),ele_delete=$(this.gridId+".D.IMG.DELETE"),this._detailViewRow==-1?(this._enable(this.gridId+".DETAILVIEW_PART.DELETERECORDBUTTON",!1),ele_delete&&(ele_delete.src=this._dVImages.d_deleteRecord)):(this._enable(this.gridId+".DETAILVIEW_PART.DELETERECORDBUTTON",!0),ele_delete&&(ele_delete.src=this._dVImages.deleteRecord))},_internalRefreshLinkedContent:function(){clearTimeout(this._refreshLinkedContentTO);var e=this;this._refreshLinkedContentTO=setTimeout(function(){e.refreshLinkedContent(),delete e},200)},refreshLinkedContent:function(){if("undefined"!=typeof this.linkedObjects)for(var e=0;e<this.linkedObjects.length;e++)window[this.linkedObjects[e]]&&window[this.linkedObjects[e]].reset()},_resetRow:function(e){if(!this._executeEvent("canRowCancelEdits",{rowNumber:e}))return!1;var t=this;A5.msgBox.show(this.messages.t_undoEditsWarning,this.messages.undoEditsWarning,"OC",function(i){"ok"==i&&t._resetRowWithoutConfirmation(e)})},_resetImage:function(e,t,i){var s="",a="";"d"==e.toLowerCase()?(s=this.detailViewColumnInfo,a=this._originalDVValues[0]):(s=this.gridColumnInfo,a=this._originalValues[t-1]);for(var n=-1,o=0;o<s.length;o++)if(s[o].name.toLowerCase()==i.toLowerCase()){n=o;break}if(n==-1)return!1;var r="";"undefined"!=typeof a&&(r=a[n][0]),"undefined"!=typeof this.__oldImage&&(r=this.__oldImage,delete this.__oldImage),"d"==e.toLowerCase()?this.setValue("d",i,r,!1):this.setValue("g",i,t,r,!1)},_resetRowWithoutConfirmation:function(e){if(e<0){var t="";t=$(this.gridId+"._HIDDENA5DATA.R"+e),t&&(t.value=""),this._populateRow(e,this._newValues,this._gridColNames);for(var t="",i=this.gridColumnInfo,s=0;s<i.length;s++)"img"==i[s].type.substr(0,3)&&(t=$(this.gridId+".V.R"+e+"."+i[s].name+"_HIDDENA5FN"),t&&(t.value="",$sa(t,"a5isdirty",!1)))}else{this._populateRow(e,this._originalValues[e-1],this._gridColNames),$(this.gridId+".TD.R"+e+".__SYSTEM_ERRORCOLUMN").className.search("A5GridHasRowError")!=-1&&this.refreshRow(e);for(var t="",i=this.gridColumnInfo,s=0;s<i.length;s++)"img"==i[s].type.substr(0,3)&&(t=$(this.gridId+".V.R"+e+"."+i[s].name+"_HIDDENA5FN"),t&&(t.value="",$sa(t,"a5isdirty",!1)))}var a=new Array;a.push(e),this.clearRowErrors(a),this.clearErrors([e]);for(var n="",s=0;s<this.gridColumnInfo.length;s++)"select,label"==this.gridColumnInfo[s].type&&(n=this._cascadingSelectChoices[this.gridId+".V.R"+e+"."+this.gridColumnInfo[s].name],n&&A5.form.populateSelect(this.gridId+".V.R"+e+"."+this.gridColumnInfo[s].name,n.value,n.data,!0));this._executeEvent("afterRowCancelEdits",{rowNumber:e}),this._executeEvent("afterCancelEdits",{rowNumber:e})},resetGridPart:function(){if(!this._executeEvent("canGridCancelEdits",{}))return!1;var e=this;A5.msgBox.show(this.messages.t_undoAllEditsWarning,this.messages.undoAllEditsWarning,"OC",function(t){"ok"==t&&e._resetGridPartWithoutConfirmation()})},_resetGridPartWithoutConfirmation:function(){if("undefined"!=typeof arguments[0]&&1==arguments[0]){var e="undefined"!=typeof arguments[1]?arguments[1]:"";""==e&&(e="Cancel changes?");var t=confirm(e);if(!t)return!1}for(var i=1;i<=this._rowsInGrid;i++)this._dirtyRows[i-1]&&this._resetRowWithoutConfirmation(i);for(var i=1;i<=this._newRowsInGrid;i++)this._dirtyNewRows[i-1]&&this._resetRowWithoutConfirmation(i*-1);this.clearErrors(),this.clearRowErrors(),this._executeEvent("afterGridCancelEdits",{})},populateDropdownBox:function(e,t,i,s,a){var n="",o="";if("G"==e)n=this.gridId+".V.R"+i+"."+t,o=this.getValue("G",t,i);else if("S"==e){var n=$(this.gridId+".S."+t);o=this.getValue("S",t),n&&A5.form.populateSelect(n,o,s,a);var n=$(this.gridId+".S._TO."+t);n&&A5.form.populateSelect(n,o,s,a)}else n=this.gridId+".D.V.R1."+t,o=this.getValue("D",t);n=$(n),n&&A5.form.populateSelect(n,o,s,a)},prepareSearch:function(){if(this.embeddedSearchPart){if("s"==this.embedSearchPartStyle)var e=$(this.gridId+".EMBEDDED_FREEFORM_SEARCH");else var e=$(this.gridId+".SEARCH_PART.FORM");"undefined"!=typeof this._embeddedSearchIsOpen&&(this._embeddedSearchIsOpen?e.style.display="":e.style.display="none")}if($(this.gridId+".SEARCH_PART.FORM")){if(A5.form.prepare(this.gridId+".SEARCH_PART.FORM"),this.embeddedSearchPart){for(var t=0,i=0;i<this.searchColumnInfo.length;i++)t=$(this.gridId+".S."+this.searchColumnInfo[i].name),$e.add(t,"change",this._searchOnChange,this),this._searchValues[t.id]&&$svs(t,this._searchValues[t.id]),this.searchColumnInfo[i].isRange&&(t=$(this.gridId+".S._TO."+this.searchColumnInfo[i].name),$e.add(t,"change",this._searchOnChange,this),this._searchValues[t.id]&&$svs(t,this._searchValues[t.id]));t=$(this.gridId+"_SORTCOLUMN"),t&&($e.add(t,"change",this._searchOnChange,this),this._searchValues[t.id]&&$svs(t,this._searchValues[t.id])),t=$(this.gridId+"_SORTDIR"),t&&($e.add(t,"change",this._searchOnChange,this),this._searchValues[t.id]&&$svs(t,this._searchValues[t.id])),t=$(this.gridId+"_ROWCOUNT"),t&&($e.add(t,"change",this._searchOnChange,this),this._searchValues[t.id]&&$svs(t,this._searchValues[t.id]))}var s=-1;for(var a in this._fieldHelpers_S)s=$u.a.find(this._searchColNames,a),this._fieldHelpers_S[a].bind(this.gridId+".S."+a),this.searchColumnInfo[s].isRange&&this._fieldHelpers_S[a].bind(this.gridId+".S._TO."+a);for(var n in this._searchWatches){for(var o=new Array,r="",l=0,i=0;i<this._searchWatches[n].watch.length;i++)if(this._searchWatches[n].watch[i]==this.gridId+".STATEINFO")o.push(this.gridId+".STATEINFO");else if(r=$(this.gridId+".S."+this._searchWatches[n].watch[i]).tagName.toLowerCase(),"input"!=r&&"select"!=r&&"textarea"!=r){l=$n("S."+this._searchWatches[n].watch[i]),l=$cetp(l,$(this.gridId+".SEARCH_PART.FORM"));for(var d=0;d<l.length;d++)o.push(l[d].id)}else o.push(this.gridId+".S."+this._searchWatches[n].watch[i]);A5.Watch.add(this.gridId+".S."+n,o,{data:{rowNumber:1},onChange:this._searchWatches[n].onChange})}}this._executeEvent("onSearchRender",{})},_searchOnChange:function(e,t){t._searchValues[this.id]=$gvs(this)},prepareGrid:function(){if(this._namedLayout&&""==!this._namedLayout){var e=$(this.gridId+".NAMEDLAYOUTSELECTOR");e&&$svs(e,this._namedLayout)}if(this._dirtyRows=new Array,this._dirtyNewRows=new Array,this._editModeRows=new Array,this._isDirty=!1,0!=this.pagesInGrid)for(var t=1;t<=this._rowsInGrid;t++)this._prepareRow(t);for(var t=0;t<this.gridColumnInfo.length;t++)$e.add(this.gridId+".QBE.I."+this.gridColumnInfo[t].name,"click",this._gridQBEMenu,this,!1,this.gridId+".GRID");for(var t=1;t<=this._newRowsInGrid;t++)this._prepareNewRow(t);if("multiplePage"==this.checkBoxSelector)for(var i="",t=0;t<this._keys.length;t++){i=this._keys[t].toString();for(var s=0;s<this._checkedRowKeys.length;s++)if(i==this._checkedRowKeys[s].toString()){$svs(this.gridId+".V.R"+(t+1)+".__ROWCHECKBOX",!0);break}}$e.add(this.gridId+".QBE.MENUFORM","click",function(e){$e.stopPropagation(e)},null,!1,this.gridId+".GRID");for(var t=0;t<this._hiddenCols.length;t++)this._showGridColumn(this._hiddenCols[t],!1);this._executeEvent("onGridRender",{}),""!=this.LCSName&&this._LCS_clearLocks(this.LCSName);for(var a in this._gridWatches){for(var n=new Array,o="",r=0,l=0,d=0,t=0;t<this._gridWatches[a].watch.length;t++)if(this._gridWatches[a].watch[t]==this.gridId+".STATEINFO")n.push(this.gridId+".STATEINFO");else if(d="new"==this._gridWatches[a].target||0!=this.pagesInGrid?-1:1,l=$(this.gridId+".V.R"+d+"."+this._gridWatches[a].watch[t]),o="",l&&(o=l.tagName.toLowerCase()),"input"!=o&&"select"!=o&&"textarea"!=o){if("new"!=this._gridWatches[a].target&&0!=this.pagesInGrid)for(var s=1;s<=this._rowsInGrid;s++){r=$n("V.R"+s+"."+this._gridWatches[a].watch[t]),r=$cetp(r,$(this.gridId+".R"+s));for(var h=0;h<r.length;h++)n.push(r[h].id)}if("new"==this._gridWatches[a].target||"all"==this._gridWatches[a].target)for(var s=1;s<=this._newRowsInGrid;s++){r=$n("V.R-"+s+"."+this._gridWatches[a].watch[t]),r=$cetp(r,$(this.gridId+".R-"+s));for(var h=0;h<r.length;h++)n.push(r[h].id)}}else{if("new"!=this._gridWatches[a].target&&0!=this.pagesInGrid)for(var s=1;s<=this._rowsInGrid;s++)n.push(this.gridId+".V.R"+s+"."+this._gridWatches[a].watch[t]);if("new"==this._gridWatches[a].target||"all"==this._gridWatches[a].target)for(var s=1;s<=this._newRowsInGrid;s++)n.push(this.gridId+".V.R-"+s+"."+this._gridWatches[a].watch[t])}A5.Watch.add(this.gridId+"."+a,n,{onChange:this._gridWatches[a].onChange})}},_LCS_clearLocks:function(e){AUI.WaitDialog.clearLocal(this.parentGridAlias+"_LCS_"+e)},selectNamedLayout:function(e){return!!this._executeEvent("canNamedLayoutSelect",{layoutName:e})&&void this.ajaxCallback("G","none","__systemChangeLayoutName","","__selectedLayoutName="+e)},_setDetailViewControlsDisabledState:function(){var e=$(this.gridId+".DETAILVIEW_PART.FORM");if("dvod"==this.detailViewEditMode&&1!=this._editModeRows[0]&&this._detailViewRow>0){eles=e.getElementsByTagName("input");for(var t=0;t<eles.length;t++)eles[t].disabled=!0;eles=e.getElementsByTagName("select");for(var t=0;t<eles.length;t++)eles[t].disabled=!0;eles=e.getElementsByTagName("textarea");for(var t=0;t<eles.length;t++)eles[t].disabled=!0}},prepareDetailView:function(){0==this._detailViewRow?this._detailViewWindowState="":this._detailViewWindowState="open",$e.removeGroup(this.gridId+".DETAILVIEW_PART.FORMEvents2"),A5.form.prepare(this.gridId+".DETAILVIEW_PART.FORM");var e=$(this.gridId+".DETAILVIEW_PART.FORM");$sa(e,"A5OnDirty",this.gridId+"_GridObj._setDVControlDirty()");var t=e.getElementsByTagName("input");$e.add(t,"focus",this._setDVControlFocus,this,!1,this.gridId+".DETAILVIEW_PART.FORMEvents2"),$e.add(t,"blur",this._setDVControlBlur,this,!1,this.gridId+".DETAILVIEW_PART.FORMEvents2");for(var i=0;i<t.length;i++)$u.a.find(this._disabledBySecurityDV,t[i].name.split(".").pop())!=-1&&(t[i].disabled=!0);t=e.getElementsByTagName("select"),$e.add(t,"focus",this._setDVControlFocus,this,!1,this.gridId+".DETAILVIEW_PART.FORMEvents2"),$e.add(t,"blur",this._setDVControlBlur,this,!1,this.gridId+".DETAILVIEW_PART.FORMEvents2");for(var i=0;i<t.length;i++){if("true"==$ga(t[i],"A5CascadingSelect")){delete s;var s=new Object;s.value=t[i].value,s.data=new Array;for(var a=0;a<t[i].options.length;a++)s.data.push([t[i].options[a].text,t[i].options[a].value]);this._cascadingSelectChoices[t[i].id]=s}$u.a.find(this._disabledBySecurityDV,t[i].name.split(".").pop())!=-1&&(t[i].disabled=!0)}t=e.getElementsByTagName("textarea"),$e.add(t,"focus",this._setDVControlFocus,this,!1,this.gridId+".DETAILVIEW_PART.FORMEvents2"),$e.add(t,"blur",this._setDVControlBlur,this,!1,this.gridId+".DETAILVIEW_PART.FORMEvents2");for(var i=0;i<t.length;i++)$u.a.find(this._disabledBySecurityDV,t[i].name.split(".").pop())!=-1&&(t[i].disabled=!0);if(this._dvkw.off(),this._setDetailViewState(!1),this._setDetailViewControlsDisabledState(),"view"!=this._getEditState("D",1))for(var n in this._fieldHelpers_DV)this._fieldHelpers_DV[n].bind(this.gridId+".D.V.R1."+n);var o=!0;0==this._detailViewRow&&(o=!1);for(var r in this._detailViewWatches){for(var l=new Array,d="",t=0,i=0;i<this._detailViewWatches[r].watch.length;i++)if(this._detailViewWatches[r].watch[i]==this.gridId+".STATEINFO")l.push(this.gridId+".STATEINFO");else if(tempEle=$(this.gridId+".D.V.R1."+this._detailViewWatches[r].watch[i]),d="",tempEle&&(d=tempEle.tagName.toLowerCase()),"input"!=d&&"select"!=d&&"textarea"!=d){t=$n("V.R1."+this._detailViewWatches[r].watch[i]),t=$cetp(t,$(this.gridId+".DETAILVIEW_PART.FORM_CONTAINER_DIV"));for(var a=0;a<t.length;a++)l.push(t[a].id)}else l.push(this.gridId+".D.V.R1."+this._detailViewWatches[r].watch[i]);A5.Watch.add(this.gridId+".DV."+r,l,{fireInitial:o,data:{rowNumber:this._detailViewRow},onChange:this._detailViewWatches[r].onChange})}if(this._detailViewRow>0&&this._executeEvent("onDetailViewRender",{rowNumber:this._detailViewRow}),"page"==this.detailViewPosition&&1==this.hideGridWhenDetailViewIsShown&&"open"==this._detailViewWindowState){var h=$(this.gridId+".GRID_PART.FORM_CONTAINER_DIV");h.style.display="none"}},runAction:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:"",i=this._actions;if("undefined"==typeof i)return!1;var s=i[e];if("undefined"==typeof s)return!1;if(""!=s){var a=Function(s);a.call(t)}},animateToggle:function(e){var t="undefined"!=typeof arguments[1]&&arguments[1];"boolean"==typeof t&&(t={type:"slide",duration:600});var i="";return!!(i="string"==typeof e?$(e):e)&&void A5.u.element.toggle(i,t)},animateShow:function(e){var t="";return!!(t="string"==typeof e?$(e):e)&&(""!=t.style.display&&void this.animateToggle(e,arguments[1]))},animateHide:function(e){var t="";return!!(t="string"==typeof e?$(e):e)&&("none"!=t.style.display&&void this.animateToggle(e,arguments[1]))},_showInlineDetailView:function(){if("inline"==this.detailViewPosition){var e=$(this.gridId+".RDV");if(this._detailViewRow==-1)var t=$(this.gridId+".R"+this._rowsInGrid).nextSibling;else{var t=$(this.gridId+".R"+this._detailViewRow).nextSibling;t||$(this.gridId+".R"+this._detailViewRow).parentNode.appendChild(e)}t&&t.parentNode.insertBefore(e,t),"none"==$(this.gridId+".DETAILVIEW_PART.COMPLETE").style.display?e.style.display="none":e.style.display=""}},_prepareRow:function(e){this._executeEvent("onRowRender",{rowNumber:e});var t=$(this.gridId+".R"+e);if(""!=this.rowEditMode&&(this._dirtyRows[e-1]=!1,"all"==this.rowEditMode||this._editModeRows[e-1]?this._editModeRows[e-1]=!0:this._editModeRows[e-1]=!1,t)){for(var i=t.getElementsByTagName("input"),s=0;s<i.length;s++)"true"!=$ga(i[s],"A5HarvestIgnore")&&($e.add(i[s],"keyup",this._setControlDirty,this,!1,this.gridId+".GRID"),$e.add(i[s],"change",this._setControlDirty,this,!1,this.gridId+".GRID"),"checkbox"!=i[s].type&&"radio"!=i[s].type||$e.add(i[s],"click",this._setControlDirty,this,!1,this.gridId+".GRID"),this._editModeRows[e-1]&&$u.a.find(this._disabledBySecurity,i[s].name.split(".").pop())==-1||(i[s].disabled=!0));$e.add(i,"focus",this._setControlFocus,this,!1,this.gridId+".GRID"),$e.add(i,"blur",this._setControlBlur,this,!1,this.gridId+".GRID"),i=t.getElementsByTagName("select"),$e.add(i,"keyup",this._setControlDirty,this,!1,this.gridId+".GRID"),$e.add(i,"change",this._setControlDirty,this,!1,this.gridId+".GRID"),$e.add(i,"focus",this._setControlFocus,this,!1,this.gridId+".GRID"),$e.add(i,"blur",this._setControlBlur,this,!1,this.gridId+".GRID");for(var s=0;s<i.length;s++){if("true"==$ga(i[s],"A5CascadingSelect")){delete a;var a=new Object;a.value=i[s].value,a.data=new Array;for(var n=0;n<i[s].options.length;n++)a.data.push([i[s].options[n].text,i[s].options[n].value]);this._cascadingSelectChoices[i[s].id]=a}"true"!=$ga(i[s],"A5HarvestIgnore")&&(this._editModeRows[e-1]&&$u.a.find(this._disabledBySecurity,i[s].name.split(".").pop())==-1||(i[s].disabled=!0))}i=t.getElementsByTagName("textarea");for(var s=0;s<i.length;s++)"true"!=$ga(i[s],"A5HarvestIgnore")&&(this._editModeRows[e-1]&&$u.a.find(this._disabledBySecurity,i[s].name.split(".").pop())==-1||(i[s].disabled=!0));if($e.add(i,"keyup",this._setControlDirty,this,!1,this.gridId+".GRID"),$e.add(i,"change",this._setControlDirty,this,!1,this.gridId+".GRID"),$e.add(i,"focus",this._setControlFocus,this,!1,this.gridId+".GRID"),$e.add(i,"blur",this._setControlBlur,this,!1,this.gridId+".GRID"),t.setAttribute("A5DataRegion","A5DataRegion"),this._editModeRows[e-1])for(var o in this._fieldHelpers_G)this._fieldHelpers_G[o].bind(this.gridId+".V.R"+e+"."+o)}if(t){""!=this.rowHoverClassName&&($e.add(t,"mouseover",function(e,t){t._addRowClassName(this,t.rowHoverClassName)},this,!1,this.gridId+".GRID"),$e.add(t,"mouseout",function(e,t){t._removeRowClassName(this,t.rowHoverClassName)},this,!1,this.gridId+".GRID")),$e.add(t,"click",this._focusRowClick,this,!1,this.gridId+".GRID"),""!=this.rowOnDblClick&&$e.add(t,"dblclick",this._rowDblClick,this,!1,this.gridId+".GRID");for(var r in this._gridRowWatches){for(var l=new Array,d="",i=0,h=0,s=0;s<this._gridRowWatches[r].watch.length;s++)if(this._gridRowWatches[r].watch[s]==this.gridId+".STATEINFO")l.push(this.gridId+".STATEINFO");else if(h=$(this.gridId+".V.R"+e+"."+this._gridRowWatches[r].watch[s]),d="",h&&(d=h.tagName.toLowerCase()),"input"!=d&&"select"!=d&&"textarea"!=d){i=$n("V.R"+e+"."+this._gridRowWatches[r].watch[s]),i=$cetp(i,$(this.gridId+".R"+e));for(var n=0;n<i.length;n++)l.push(i[n].id)}else l.push(this.gridId+".V.R"+e+"."+this._gridRowWatches[r].watch[s]);A5.Watch.add(this.gridId+".R"+e+"."+r,l,{data:{rowNumber:e},onChange:this._gridRowWatches[r].onChange})}}},_prepareNewRow:function(e){this._executeEvent("onRowRender",{rowNumber:e*-1});var t=$(this.gridId+".R-"+e);if(t&&($e.add(t,"mouseover",function(e,t){t._addRowClassName(this,t.rowHoverClassName)},this,!1,this.gridId+".GRID"),$e.add(t,"mouseout",function(e,t){t._removeRowClassName(this,t.rowHoverClassName)},this,!1,this.gridId+".GRID")),this._dirtyNewRows[e-1]=!1,t){for(var i=t.getElementsByTagName("input"),s=0;s<i.length;s++)"true"!=$ga(i[s],"A5HarvestIgnore")&&($e.add(i[s],"keyup",this._setControlDirty,this,!1,this.gridId+".GRID"),$e.add(i[s],"change",this._setControlDirty,this,!1,this.gridId+".GRID"),"checkbox"!=i[s].type&&"radio"!=i[s].type||$e.add(i[s],"click",this._setControlDirty,this,!1,this.gridId+".GRID"),$u.a.find(this._disabledBySecurity,i[s].name.split(".").pop())!=-1&&(i[s].disabled=!0));$e.add(i,"focus",this._setControlFocus,this,!1,this.gridId+".GRID"),$e.add(i,"blur",this._setControlBlur,this,!1,this.gridId+".GRID"),i=t.getElementsByTagName("select"),$e.add(i,"keyup",this._setControlDirty,this,!1,this.gridId+".GRID"),$e.add(i,"change",this._setControlDirty,this,!1,this.gridId+".GRID"),$e.add(i,"focus",this._setControlFocus,this,!1,this.gridId+".GRID"),$e.add(i,"blur",this._setControlBlur,this,!1,this.gridId+".GRID");for(var s=0;s<i.length;s++){if("true"==$ga(i[s],"A5CascadingSelect")){delete a;var a=new Object;a.value=i[s].value,a.data=new Array;for(var n=0;n<i[s].options.length;n++)a.data.push([i[s].options[n].text,i[s].options[n].value]);this._cascadingSelectChoices[i[s].id]=a}$u.a.find(this._disabledBySecurity,i[s].name.split(".").pop())!=-1&&(i[s].disabled=!0)}i=t.getElementsByTagName("textarea"),$e.add(i,"keyup",this._setControlDirty,this,!1,this.gridId+".GRID"),$e.add(i,"change",this._setControlDirty,this,!1,this.gridId+".GRID"),$e.add(i,"focus",this._setControlFocus,this,!1,this.gridId+".GRID"),$e.add(i,"blur",this._setControlBlur,this,!1,this.gridId+".GRID");for(var s=0;s<i.length;s++)$u.a.find(this._disabledBySecurity,i[s].name.split(".").pop())!=-1&&(i[s].disabled=!0);t.setAttribute("A5DataRegion","A5DataRegion");for(var o in this._fieldHelpers_G)this._fieldHelpers_G[o].bind(this.gridId+".V.R-"+e+"."+o);for(var r in this._gridRowWatches){for(var l=new Array,d="",i=0,h=0,s=0;s<this._gridRowWatches[r].watch.length;s++)if(this._gridRowWatches[r].watch[s]==this.gridId+".STATEINFO")l.push(this.gridId+".STATEINFO");else if(h=$(this.gridId+".V.R-"+e+"."+this._gridRowWatches[r].watch[s]),d="",h&&(d=h.tagName.toLowerCase()),"input"!=d&&"select"!=d&&"textarea"!=d){i=$n("V.R-"+e+"."+this._gridRowWatches[r].watch[s]),i=$cetp(i,$(this.gridId+".R-"+e));for(var n=0;n<i.length;n++)l.push(i[n].id)}else l.push(this.gridId+".V.R-"+e+"."+this._gridRowWatches[r].watch[s]);A5.Watch.add(this.gridId+".R-"+e+"."+r,l,{data:{rowNumber:e*-1},onChange:this._gridRowWatches[r].onChange})}}},_prepareRowEvents:function(){},_rowDblClick:function(e,t){var i=Number(this.id.split(".")[1].substr(1));t.rowOnDblClick.constructor==Function?t.rowOnDblClick(i):""!=t.rowOnDblClick&&t[t.rowOnDblClick]&&t[t.rowOnDblClick](i)},_setControlDirty:function(e,t){t.setControlDirty(this,!0)},_constrainElementsToParent:function(e,t){for(var i=new Array,s=0;s<e.length;s++)$isChild(e[s],t)&&i.push(e[s]);return i},setControlDirty:function(e){var t="undefined"!=typeof arguments[1]&&arguments[1];this._batchChange&&(t=!1);var i=e.name.split(".");if("undefined"==typeof i[1])return!1;var s=Number(e.name.split(".")[1].substr(1)),a=this._colNumFromName(this._gridColNames,e.name.split(".")[2]),n=this._constrainElementsToParent($n(e.name),$(this.gridId+".R"+s));s<0?$u.compare($gvs(n),this._newValues[a])||($sa(n,"A5IsDirty","true"),t&&this._setRowState(s,!0)):this._originalValues[s-1]&&($u.compare($gvs(n),this._originalValues[s-1][a])||($sa(n,"A5IsDirty","true"),t&&(this.rowRefreshOnDirty&&!this._dirtyRows[s-1]&&this.refreshRow(s,!0),this._setRowState(s,!0))))},_focusRowClick:function(e,t){if(0!=t._focusRow&&t._focusRow!=Number(this.id.split(".")[1].substr(1))&&$rcn(t.gridId+".R"+t._focusRow,t.rowSelectedClassName),t._kw.on(),t._focusRow=Number(this.id.split(".")[1].substr(1)),""==t._focusControl&&(t._focusControl=t._gridColNames[0]),!t._editModeRows[t._focusRow-1]){var i=$(t.gridId+".FOCUSCATCHER"),s=0;$(t.gridId+".GRIDSCROLLDIV")&&(s=$(t.gridId+".GRIDSCROLLDIV").scrollTop);var a=$(t.gridId+".R"+t._focusRow);a.offsetParent&&(i.style.top=$gpt(a)-$gpt(a.offsetParent)-s+"px"),i&&(i.blur(),$f(i))}t.setSelectedRow(t._focusRow,!0)},closeContainerWindow:function(e){var t=A5.windows.getFromElement(e);t&&t.hide()},activateControlContainer:function(e,t,i){if(e=e.toUpperCase(),t=t.toUpperCase(),"G"==t&&"undefined"!=typeof this._controlContainers_G)var s=this._controlContainers_G[e];if("D"==t&&"undefined"!=typeof this._controlContainers_D)var s=this._controlContainers_D[e];if("S"==t&&"undefined"!=typeof this._controlContainers_S)var s=this._controlContainers_S[e];if("object"!=typeof s)return!1;for(var a="",n=0;n<s.length;n++){if(a=this.gridId+"_"+s[n].tab+"R_"+i+"Obj","undefined"!=typeof window[a]._curBandIndx&&window[a]._curBandIndx!=-1&&window[a]._curBandIndx+1==s[n].pane)return!1;window[a].select(""+s[n].pane)}},_setControlFocus:function(e,t){if(this.id==t.gridId+".FOCUSCATCHER"&&0==t._focusRow&&(t._focusRow=1,t._editModeRows[0]))return t._focusControl=t._gridColNames[0],$f(t.gridId+".R"+t._focusRow+"."+t._focusControl),t._kw.on(),!1;if(0!=t._focusRow?(clearTimeout(t._focusRowTO),t._executeEvent("onRowBlur",{rowNumber:t._focusRow})):t._kw.on(),this.id!=t.gridId+".FOCUSCATCHER"){var i=this.name.split(".");i.length>2&&NaN!=Number(i[1])&&(t._focusRow=Number(i[1].substr(1)),t._focusControl=i[2],t._focusControl2=t._focusControl,t._executeEvent("onRowFocus",{rowNumber:t._focusRow}))}t.setSelectedRow(t._focusRow,!0)},_setControlBlur:function(e,t){if(0!=t._focusRow&&(t._focusRowTO=setTimeout(function(){t._completeControlBlur()},100)),""!=this.name){var i=this.name.split(".");if("undefined"==typeof i[1])return!1;var s=Number(this.name.split(".")[1].substr(1)),a=this.name.split(".")[2],n=t;setTimeout(function(){n.clientSideValidateField("G",a,s),delete n},400)}},_completeControlBlur:function(){$rcn(this.gridId+".R"+this._focusRow,this.rowSelectedClassName);var e=this._resetFocusRowOnBlur;"undefined"==typeof e&&(e=!1),e&&(this._focusRow=0),this._kw.off()},_setDVControlFocus:function(e,t){if(t.blur(),t._dvkw.on(),""!=this.name){var i=this.name.split(".");i.length>2&&(t._dvFocusControl=i[2],t._dvFocusControl2=t._dvFocusControl)}},_setDVControlBlur:function(e,t){if(t._dvkw.off(),t._dvFocusControl="",""!=this.name){var i=Number(this.name.split(".")[1].substr(1)),s=this.name.split(".")[2];setTimeout(function(){t.clientSideValidateField("D",s,i),delete t},400)}},_setDVControlDirty:function(){this._detailViewIsDirty||this._batchChange?this._batchChange&&$sa(this.gridId+".DETAILVIEW_PART.FORM","A5IsDirty","false"):(this.detailViewRefreshOnDirty&&this.detailViewRefresh(),this._setDetailViewState(!0))},_enable:function(e,t){if(!$(e))return!1;if(e=$(e),t){e.disabled=!1,e.setAttribute("A5Disabled","false"),e.style.opacity="",e.style.filter="";var i=e.getElementsByTagName("img");$ss(i,{opacity:"",filter:""})}else{e.disabled=!0,e.setAttribute("A5Disabled","true"),e.style.opacity=".5",e.style.filter="alpha(opacity: 50)",e.style.zoom="1";var i=e.getElementsByTagName("img");$ss(i,{opacity:".5",filter:"alpha(opacity: 50)",zoom:"1"})}},_setInitialData:function(e){this._originalValues=e},_setInitialNulls:function(e){this._originalNullValues=e},_setInitialDVData:function(e){this._originalDVValues=e},_populateCont:function(e,t){$(e)&&($(e).innerHTML=t)},_navInputOnKey:function(e,t){var i=e.charCode||e.keyCode;13==i&&t.pageNavigate(this.value)},_refreshGridIfClean:function(){var e={};if(e.hasDetailView=$if(this._detailViewColNames.length>0,!0,!1),0==e.hasDetailView?e.isDirty=this._isDirty:e.isDirty=this._detailViewIsDirty,1==e.isDirty)return!1;var t=this._executeEvent("beforeAutoRefresh",{});1==t&&this.refresh()},autoRefreshStop:function(){this._autoRefreshInterval=0},autoRefreshStart:function(e){this._autoRefreshInterval=e,setTimeout("if( typeof "+this.gridId+"_GridObj != 'undefined')"+this.gridId+"_GridObj._autoRefreshLow();",e)},_autoRefreshLow:function(){var e=0,t=$(this.gridId+".STATEINFO");return t?"undefined"!=typeof this._autoRefreshInterval&&(e=this._autoRefreshInterval,0!=e&&(this._refreshGridIfClean(),void setTimeout("if( typeof "+this.gridId+"_GridObj != 'undefined')"+this.gridId+"_GridObj._autoRefreshLow()",e))):(this._autoRefreshInterval=0,!1)},_showGridErrorColumn:function(e){var t=!1;"undefined"!=typeof this._rowErrorColumnAlwaysVisible&&(t=this._rowErrorColumnAlwaysVisible),t&&(e=!0),e?$rcn(this.gridId+".GRID_PART.DATAREGION","A5GridHideErrorCol"):$acn(this.gridId+".GRID_PART.DATAREGION","A5GridHideErrorCol");for(var i=0,s=$if(e,"","none"),a=1;a<=this._rowsInGrid;a++)i=$(this.gridId+".TD.R"+a+".__SYSTEM_ERRORCOLUMN"),i&&(i.style.display=s),i=$(this.gridId+".TD.R"+a+".__ROWEXPAND.__SYSTEM_ERRORCOLUMN"),i&&(i.style.display=s);for(var a=1;a<=this._newRowsInGrid;a++)i=$(this.gridId+".TD.R-"+a+".__SYSTEM_ERRORCOLUMN"),i&&(i.style.display=s),i=$(this.gridId+".TD.R-"+a+".__ROWEXPAND.__SYSTEM_ERRORCOLUMN"),i&&(i.style.display=s);i=$(this.gridId+".COLUMNTITLES.TOP.__SYSTEM_ERRORCOLUMN"),i&&(i.style.display=s),i=$(this.gridId+".COLUMNTITLES.BOTTOM.__SYSTEM_ERRORCOLUMN"),i&&(i.style.display=s),i=$(this.gridId+".TD.R_QBE.__SYSTEM_ERRORCOLUMN"),i&&(i.style.display=s),i=$(this.gridId+".TD.R_EMBSRC.__SYSTEM_ERRORCOLUMN"),i&&(i.style.display=s)},showGridColumn:function(e,t){t?$u.a.find(this._hiddenCols,e)!=-1&&(this._hiddenCols.splice($u.a.find(this._hiddenCols,e),1),this._showGridColumn(e,t)):$u.a.find(this._hiddenCols,e)==-1&&(this._hiddenCols.push(e),this._showGridColumn(e,t))},_showGridColumn:function(e,t){for(var i=0,s=$if(t,"","none"),a=1;a<=this._rowsInGrid;a++)i=$(this.gridId+".TD.R"+a+"."+e),i&&(i.style.display=s);for(var a=1;a<=this._newRowsInGrid;a++)i=$(this.gridId+".TD.R-"+a+"."+e),i&&(i.style.display=s);i=$(this.gridId+".COLUMNTITLES.TOP."+e),i&&(i.style.display=s),i=$(this.gridId+".COLUMNTITLES.BOTTOM."+e),i&&(i.style.display=s),i=$(this.gridId+".TD.R_QBE."+e),i&&(i.style.display=s),i=$(this.gridId+".TD.R_EMBSRC."+e),i&&(i.style.display=s),i=$(this.gridId+".SUMM."+e),i&&(i.style.display=s),i=$(this.gridId+".SUMM."+e+".TOTAL"),i&&(i.style.display=s),i=$(this.gridId+".SUMM."+e+".AVG"),i&&(i.style.display=s),i=$(this.gridId+".SUMM."+e+".MIN"),i&&(i.style.display=s),i=$(this.gridId+".SUMM."+e+".MAX"),i&&(i.style.display=s),i=$(this.gridId+".SUMM."+e+".STDDEV"),i&&(i.style.display=s),i=$(this.gridId+".SUMM."+e+".VAR"),i&&(i.style.display=s),i=$(this.gridId+".SUMM."+e+".FIRST"),i&&(i.style.display=s),i=$(this.gridId+".SUMM."+e+".LAST"),i&&(i.style.display=s),i=$(this.gridId+".SUMM."+e+".COUNT"),i&&(i.style.display=s)},_addRowsFromTemplate:function(e,t){var i=0,s=0,a=$(this.gridId+".GRID.ROWTEMPLATE");if("object"!=typeof a)return!1;var n=0,o="";this._rowsInGrid=this._rowsInGrid+1;for(var r=this._rowsInGrid;r<this._rowsInGrid+e;r++){for(var l in t[n])t[n][l]=t[n][l].replace(/\{grid\.rowNumber\}/gi,""+this._rowsInGrid);i=a.cloneNode(!0),s=$(this.gridId+".R"+(r-1)),s.parentNode.insertBefore(i,s.nextSibling),i.id=this.gridId+".R"+r,i.onclick&&(o=i.onclick.toString().split("{ROW:INDEX}").join(""+r),o=o.split("{ROW: INDEX}").join(""+r),o=o.split("{"),o.shift(),o=o.join("{"),o=o.split("}"),o.pop(),o=o.join("}"),i.onclick=Function(o)),i.ondblclick&&(o=i.ondblclick.toString().split("{ROW:INDEX}").join(""+r),o=o.split("{ROW: INDEX}").join(""+r),o=o.split("{"),o.shift(),o=o.join("{"),o=o.split("}"),o.pop(),o=o.join("}"),i.ondblclick=Function(o)),this._parseControlTemplateRow(i,t[n]),this._parseTemplateRow(i,r),this._prepareRow(r);var a=0;0!=this._reh._e.length&&(a=$(this.gridId+".TD.R"+r+".__SYSTEM_ERRORCOLUMN"),a&&(a.style.display=""),a=$(this.gridId+".TD.R"+r+".__ROWEXPAND.__SYSTEM_ERRORCOLUMN"),a&&(a.style.display="")),n++}this._rowsInGrid=this._rowsInGrid+(e-1),this._reband()},_parseControlTemplateRow:function(e,t){for(var i=0,s=0,a="",n=0;n<e.childNodes.length;n++)if(i=e.childNodes[n],i.tagName)for(var o=0;o<i.childNodes.length;o++)if(s=i.childNodes[o],s.innerHTML&&"!"!=s.tagName){a=s.innerHTML;for(var r in t)a=a.split("{"+r+"}").join(t[r]);s.innerHTML=a}},_parseTemplateRow:function(e,t){for(var i=0;i<e.childNodes.length;i++)if("undefined"!=typeof e.childNodes[i].tagName){if(e.childNodes[i].id&&(e.childNodes[i].id=e.childNodes[i].id.split("{ROW:INDEX}").join(""+t)),e.childNodes[i].name&&(e.childNodes[i].name=e.childNodes[i].name.split("{ROW:INDEX}").join(""+t)),e.childNodes[i].value&&(e.childNodes[i].value=e.childNodes[i].value.split("{ROW:INDEX}").join(""+t)),e.childNodes[i].onclick){var s=e.childNodes[i].onclick.toString().split("{ROW:INDEX}").join(""+t);s=s.split("{ROW: INDEX}").join(""+t),s=s.split("{"),s.shift(),s=s.join("{"),s=s.split("}"),s.pop(),s=s.join("}"),s.constructor==Array&&(s=s.join("")),e.childNodes[i].onclick=Function(s)}e.childNodes[i].childNodes.length>0&&this._parseTemplateRow(e.childNodes[i],t)}},_reband:function(){if(!this.banding.enabled)return!1;for(var e=new Object,t=new Object,i=0,s=this.banding.oddRowCount,a=this.banding.oddRowClassName,n="o",o=1;o<=this._rowsInGrid+this._newRowsInGrid;o++)if(e=$(o<=this._rowsInGrid?this.gridId+".R"+o:this.gridId+".R-"+(o-this._rowsInGrid)),"none"!=e.style.display){i+=1,i>s&&("o"==n?(i=1,s=this.banding.evenRowCount,a=this.banding.evenRowClassName,n="e"):(i=1,s=this.banding.oddRowCount,a=this.banding.oddRowClassName,n="o")),t=e.getElementsByTagName("td");for(var r=0;r<t.length;r++)t[r].className.indexOf(a)!=-1||t[r].className.indexOf(this.banding.oddRowClassName)==-1&&t[r].className.indexOf(this.banding.evenRowClassName)==-1||("o"==n?$rcn(t[r],this.banding.evenRowClassName):$rcn(t[r],this.banding.oddRowClassName),$acn(t[r],a))}},_gridQBEExecute:function(e){if(!this._executeEvent("canQBESearch",{qbeType:e}))return!1;var t=this._colNumFromName(this._gridColNames,this._gridQBEColumn),i=$(this.gridId+".STATEINFO").value,s=$gvs(this.gridId+".QBE.V."+$u.s.rTrim(this._gridQBEColumn,"[]"));
i=i+"&"+A5.ajax.buildURLParam("_gridQBEValue",s),"undefined"==typeof this._qbeQueryMenu?(s=$gvs(this.gridId+".QBE.EXCLUDEMATCHES"),this.gridColumnInfo[t].qbe.exclude=s):(s=this._qbeQueryMenu.getValue("ExcludeMatchingRecords"),this.gridColumnInfo[t].qbe.exclude=s),"boolean"==typeof s&&(s=$if(s,"on","off")),i=i+"&"+A5.ajax.buildURLParam("_gridQBEExcludeMatches",""+s),s="undefined"==typeof this._qbeQueryMenu?$gvs(this.gridId+".QBE.ANDOR"):this._qbeQueryMenu.getValue("AndOr"),i=i+"&"+A5.ajax.buildURLParam("_gridQBEAndOr",s),this.gridColumnInfo[t].qbe.andOr=s,this.gridColumnInfo[t].qbe.operator=e,i=i+"&__FormAction=QBE_Grid&__FormID="+this.gridId+"&_gridQBEColumn="+this._gridQBEColumn+"&_gridQBEType="+e,i=$u.s.tran(i,"\n","%0D%0A"),i=i+"&__dvWindow="+this._detailViewWindowState,this._executeEvent("beforeAjaxCallback",{ajaxEvent:"QBESearch"}),A5.ajax.callback(this.ajaxURL,i)},_gridQBEMenu:function(e,t){if("undefined"==typeof t._qbeQueryMenu){var i=$(t.gridId+".QBE.MENU");i.style.display="",$po(i,this,"dropdown"),$e.add(document.body,"click",t._gridQBEMenuClear,t,!0),t._gridQBEColumn=$u.s.word(this.id,-1,".");var s=t._colNumFromName(t._gridColNames,t._gridQBEColumn);$svs(t.gridId+".QBE.EXCLUDEMATCHES",t.gridColumnInfo[s].qbe.exclude),$svs(t.gridId+".QBE.ANDOR",t.gridColumnInfo[s].qbe.andOr);var a=t.gridColumnInfo[s].qbe.operator.replace(/ /g,"").toUpperCase();""==a&&(a="NOFILTER");for(var n=i.getElementsByTagName("img"),o=0;o<n.length;o++)"CHECKICON"==$u.s.word(n[o].id,3,".")&&($u.s.word(n[o].id,-1,".")==a?n[o].style.visibility="":n[o].style.visibility="hidden");var r=t._qbeMenu[t.gridColumnInfo[s].dataType];"undefined"==typeof r&&(r=t._qbeMenu.c),r.push("NOFILTER"),n=i.getElementsByTagName("li");for(var o=0;o<n.length;o++)"ITEM"==$u.s.word(n[o].id,3,".")&&($u.a.find(r,$u.s.word(n[o].id,-1,"."))!=-1?n[o].style.display="":n[o].style.display="none")}else{t._gridQBEColumn=$u.s.word(this.id,-1,".");var s=t._colNumFromName(t._gridColNames,t._gridQBEColumn);t._qbeQueryMenu.setValue("ExcludeMatchingRecords",t.gridColumnInfo[s].qbe.exclude),t._qbeQueryMenu.setValue("AndOr",t.gridColumnInfo[s].qbe.andOr);var l=t.gridColumnInfo[s].qbe.operator;""==l&&(l="No filter"),t._qbeQueryMenu.setValue("QBEValue",l);var r=t._qbeMenu[t.gridColumnInfo[s].dataType];"undefined"==typeof r&&(r=t._qbeMenu.c),r.push("NOFILTER");for(var d=0,o=2;o<17;o++)d=t._qbeQueryMenu._data[o],$u.a.find(r,d.name.replace(/ /g,"").toUpperCase())!=-1?$(d._id).style.display="block":$(d._id).style.display="none";t._qbeQueryMenu.show("dropdown",this)}return $e.stopEvent(e),!1},_gridQBEMenuClear:function(){var e=$(this.gridId+".QBE.MENU");e&&(e.style.display="none",$e.remove(document.body,"click",this._gridQBEMenuClear))},_gridQBEClearColumnInfo:function(){for(i=1;i<=this.gridColumnInfo.length;i++)this.gridColumnInfo[i-1].qbe&&(this.gridColumnInfo[i-1].qbe.operator="",this.gridColumnInfo[i-1].qbe.exclude="",this.gridColumnInfo[i-1].qbe.andOr="AND")},gridQBERowVisible:function(e){if(ele=$(this.gridId+".QBE_ROW"),1==e){if(!this._executeEvent("canQBEShow",{}))return!1;ele.style.display="",this._executeEvent("afterQBEShow",{})}else{if(!this._executeEvent("canQBEHide",{}))return!1;ele.style.display="none",this._executeEvent("afterQBEHide",{})}var t=$(this.gridId+".STATEINFO").value,i=new Array;i=t.split("&");var s=$u.a.find(i,"__si.QBEState",!1,!1),a="__si.QBEState="+e;s==-1?t=""==t?a:t+"&"+a:(i[s]=a,t=i.join("&")),$(this.gridId+".STATEINFO").value=t},_findControlNumber:function(e,t){var i="";"G"==e?i=this.gridColumnInfo:alert("fix for dv");for(var s=-1,a=0;a<i.length;a++)if(i[a].name==t){s=a;break}return s},_setOriginalValues:function(e,t,i){var s=-1,a="";"G"==e?a=this._originalValues:alert("fix for dv");for(var n in i)s=this._findControlNumber(e,n),a[t-1][s]=i[n]},gridQBERowToggle:function(){ele=$(this.gridId+".QBE_ROW"),"none"==ele.style.display?this.gridQBERowVisible(!0):this.gridQBERowVisible(!1)},loadJavascript:function(e){A5.loadJavascript(e)},loadJavascriptFile:function(e){A5.loadJavascriptFile(e,arguments[1])},loadMetaTag:function(e,t){var i=document.createElement("meta");i.name=e,i.content=t,document.getElementsByTagName("head")[0].appendChild(i)},loadCSSFile:function(e){var t="undefined"!=typeof arguments[1]&&arguments[1],i=document.getElementsByTagName("link"),s=!1;if(0==t)for(var a=0;a<i.length;a++)if(i[a].href.indexOf(e)>0){s=!0;break}if(0==s){var n=document.createElement("link");n.href=e,n.rel="stylesheet",n.type="text/css",document.getElementsByTagName("head")[0].appendChild(n)}},loadXbasic:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:"";if(0==this._embeddedMode)return!1;for(var i=document.getElementsByTagName("script"),s=!1,a=0;a<i.length;a++)if("undefined"!=typeof i[a].language&&i[a].language.toLowerCase()=="xbasic"+t&&i[a].text.toLowerCase()==e.toLowerCase()){s=!0;break}if(0==s){var n=document.createElement("script");n.text=e,n.language="Xbasic"+t;try{document.getElementsByTagName("head")[0].appendChild(n)}catch(o){}}},a5AjaxGridMozFixRowPost:function(e){var t=$(e);t.style.height==t.offsetHeight+"px"&&(t.style.height="");for(var i=t.getElementsByTagName("input"),s=0;s<i.length;s++)i[s].style.height==i[s].offsetHeight+"px"&&(i[s].style.height="");i=t.getElementsByTagName("select");for(var s=0;s<i.length;s++)i[s].style.height==i[s].offsetHeight+"px"&&(i[s].style.height="");i=t.getElementsByTagName("textarea");for(var s=0;s<i.length;s++)i[s].style.height==i[s].offsetHeight+"px"&&(i[s].style.height="")},createWindow:function(e,t){if(!this.getWindow(e)){if("string"==typeof t){var i=t.split("-");t=new Object,$u.o.assign(t,this._defaultWindowSettings[i.shift()]);for(var s=0;s<i.length;s++)"url"==i[s]?(t.body.content.type="url",t.body.content.url="about:blank"):"resizable"==i[s]&&(t.resize="both")}"object"==typeof arguments[2]&&$u.o.assign(t,arguments[2]),this._genericWindow[e]=new A5.Window(t)}return this._genericWindow[e]},getWindow:function(e){return"undefined"!=typeof this._genericWindow[e]&&this._genericWindow[e]},setVariables:function(e){0==$u.compare(this._vars,e)&&($u.o.assign(this._vars,e),$e.execute(this.gridId+".STATEINFO","change"))},_keyOpenLookupWindow:function(){return"undefined"!=typeof this._floatingLookupWindow[this._focusControl]&&this.openLookup("G",this._focusRow,this._focusControl),!0},_keyPageUp:function(){clearTimeout(this._keyPageNavigateTO);var e=this;return this._keyPageNavigateTO=setTimeout(function(){e.pageNavigate("prev"),delete e},200),!0},_keyPageDown:function(){clearTimeout(this._keyPageNavigateTO);var e=this;return this._keyPageNavigateTO=setTimeout(function(){e.pageNavigate("next"),delete e},200),!0},_keyPrevRow:function(){if((this._editModeRows[this._focusRow-1]||this._focusRow<0)&&"input"!=$n(this.gridId+".V.R"+this._focusRow+"."+this._focusControl)[0].tagName.toLowerCase())return!1;if(1==this._focusRow){if(1!=this.pageNumber){clearTimeout(this._keyPageNavigateTO);var e=this;this._keyPageNavigateTO=setTimeout(function(){e.pageNavigate("prev"),delete e},200)}}else this._focusRow<0?this._focusRow==-1?this._editModeRows[this._rowsInGrid-1]?$f(this.gridId+".V.R"+this._rowsInGrid+"."+this._focusControl):(this._focusRowClick.call($(this.gridId+".R"+this._rowsInGrid),null,this),$f(this.gridId+".FOCUSCATCHER")):$f(this.gridId+".V.R"+(this._focusRow+1)+"."+this._focusControl):this._editModeRows[this._focusRow-2]?$f(this.gridId+".V.R"+(this._focusRow-1)+"."+this._focusControl):(this._focusRowClick.call($(this.gridId+".R"+(this._focusRow-1)),null,this),$f(this.gridId+".FOCUSCATCHER"));return!0},_keyNextRow:function(e){if((this._editModeRows[this._focusRow-1]||this._focusRow<0)&&"input"!=$n(this.gridId+".V.R"+this._focusRow+"."+this._focusControl)[0].tagName.toLowerCase())return!1;if(this._focusRow==this._rowsInGrid)if(0==this._newRowsInGrid){if(this.pageNumber<this.pagesInGrid){clearTimeout(this._keyPageNavigateTO);var t=this;this._keyPageNavigateTO=setTimeout(function(){t.pageNavigate("next"),delete t},200)}}else $f(this.gridId+".V.R-1."+this._focusControl);else if(this._focusRow<0)if(Math.abs(this._focusRow)==this._newRowsInGrid){if(this.pageNumber<this.pagesInGrid){clearTimeout(this._keyPageNavigateTO);var t=this;this._keyPageNavigateTO=setTimeout(function(){t.pageNavigate("next"),delete t},200)}}else $f(this.gridId+".V.R"+(this._focusRow-1)+"."+this._focusControl);else this._editModeRows[this._focusRow]?$f(this.gridId+".V.R"+(this._focusRow+1)+"."+this._focusControl):(this._focusRowClick.call($(this.gridId+".R"+(this._focusRow+1)),null,this),$f(this.gridId+".FOCUSCATCHER"));return!0},helpWindow:function(e,t){var i="_HelpWindow",s=this.getWindow(i),a="undefined"!=typeof arguments[3]?arguments[3]:"3in",n="undefined"!=typeof arguments[2]?arguments[2]:"4in",o="undefined"!=typeof arguments[4]?arguments[4]:"modal-resizable",r="undefined"!=typeof arguments[5]?arguments[5]:"",l=!1;if("dropdown"==o.split("-")[0]){l=!0;var d=$(r)}s||(s=this.createWindow(i,o,{body:{content:{type:"blank",elementId:"~"}},height:a,width:n,title:{html:"Help Window",location:"top",show:!0},disableMove:!1}));var h=s.getWindowId("body");$(h).innerHTML=e,s.setTitle(t),s.setSize(n,a),l?s.show("dropdown",d):s.show()},showGridHelp:function(e){var t="__helpId="+e;this.ajaxCallback("G","1","__a5ShowGridHelp","",t)},showFieldHelp:function(e,t){var i="undefined"!=typeof arguments[2]?arguments[2]:this._selectedRow;if("G"==e){var s=this._colNumFromName(this._gridColNames,t);if(s>-1&&""!=this.gridColumnInfo[s].hlp){var a="__part=G&__field="+this.gridColumnInfo[s].name+"&__helpId="+this.gridColumnInfo[s].hlp;this.ajaxCallback("G",i+":all","__a5ShowHelp","",a)}}else{var s=this._colNumFromName(this._detailViewColNames,t);if(s>-1&&""!=this.detailViewColumnInfo[s].hlp){var a="__part="+e+"&__field="+this.detailViewColumnInfo[s].name+"&__helpId="+this.detailViewColumnInfo[s].hlp;this.ajaxCallback("D","1:all","__a5ShowHelp","",a)}}},_keyF1:function(){return""!=this._focusControl&&this.showFieldHelp("G",this._focusControl),!0},_dvKeyF1:function(){return""!=this._dvFocusControl&&this.showFieldHelp("G",this._dvFocusControl),!0},_keySave:function(){""!=this.rowEditMode&&(this._focusRow>0&&this._dirtyRows[this._focusRow-1]||this._focusRow<0&&this._dirtyNewRows[Math.abs(this._focusRow)-1])&&this.submitGridPartRow(this._focusRow)},_keySaveAll:function(){""!=this.rowEditMode&&this._isDirty&&this.submitGridPart()},_keyEnter:function(){this._focusRow>0&&!this._editModeRows[this._focusRow-1]&&("rod"==this.rowEditMode||"rod-s"==this.rowEditMode)&&(""!=this._focusControl?this.editField(this._focusRow,this._focusControl):this.editRow([this._focusRow]))},_keyDeleteRecord:function(){return""!=this.rowEditMode&&this.deleteRow(this._focusRow),!0},_keyEscape:function(){""!=this.rowEditMode&&(this._focusRow>0&&this._dirtyRows[this._focusRow-1]||this._focusRow<0&&this._dirtyNewRows[Math.abs(this._focusRow)-1])&&this._resetRow(this._focusRow)},_dvKeyDeleteRecord:function(){return""!=this.detailViewEditMode&&this.deleteDetailViewRecord(),!0},_dvKeySave:function(){""!=this.detailViewEditMode&&this._detailViewIsDirty&&this.submitDetailView()},_dvKeySaveAndEnter:function(){""!=this.detailViewEditMode&&this._detailViewIsDirty&&this.submitDetailView(!0)},_dvKeyOpenLookupWindow:function(){return"undefined"!=typeof this._floatingLookupWindow[this._dvFocusControl]&&this.openLookup("DV",1,this._dvFocusControl),!0},_dvKeyEscape:function(){""!=this.detailViewEditMode&&this._detailViewIsDirty&&this.resetDetailView()},getStateInfo:function(){return stateData=$u.o.toParams(this.stateInfo,"__si2"),stateData},setStateInfo:function(e){$u.o.assign(this.stateInfo,e)},_runJSOnLoad:function(){for(var e=A5.eleByClass("__A5Component_jsRunOnLoad"),i=1;i<=e.length;i++)eval(e[i-1].value),e[i-1].value=""},_submitLow:function(e,t,i){var s=$(this.gridId+".STATEINFO");if(!s)return!1;var a="undefined"!=typeof arguments[3]?arguments[3]:"",n="undefined"!=typeof arguments[4]&&arguments[4];if("undefined"==typeof arguments[5])o=t+".STATEINFO";else var o=arguments[5];var r="undefined"!=typeof arguments[6]?arguments[6]:"",l="undefined"==typeof arguments[7]||arguments[7],d="",h=$(o).value?$(o).value:"";h.split("&"),new Array;if($(t)&&"A5DataRegion"!=$ga(t,"A5DataRegion")&&a5_AJAX_FormPrepare(t),"submit:dirty"==e)d=a5_AJAX_Form_RegionHarvest(t,!1,!0,r,l),d=$u.s.rTrim(d," &")+"&__FormID="+t+"&__FormAction=submit";else if("submit:all"==e||"submit"==e)d=a5_AJAX_Form_RegionHarvest(t,!0,!0,r,l),d=$u.s.rTrim(d," &")+"&__FormID="+t+"&__FormAction=submit";else if("submit:new"==e||n){d=a5_AJAX_Form_RegionHarvest(t,!0,!1,r,l);var c=$if("submit:new"==e,"submit",e);d=$u.s.rTrim(d," &")+"&__FormID="+t+"&__FormAction="+c}else d="__FormAction="+e+"&__FormID="+t;var u=document.URL;u=u.split("?").slice(1).join("?"),u=u.replace(/\%22/g,'"'),u=u.replace(/\%3C/g,"<"),u=u.replace(/\%3E/g,">"),u=u.replace(/\%20/g," "),u=u.split("&");for(var f="",p=0;p<u.length;p++)f=u[p].split("="),u[p]=f[0]+"="+urlencode(f.slice(1).join("="));u=u.join("&"),""!=u&&(u+="&"),""!=h&&(h+="&");var m=this.getStateInfo();""!=m&&(h=m+"&"+h),""!=a&&(a+="&"),d=u+h+a+d,""!=d?d+="&__Ajax=true":d="__Ajax=true",d=$u.s.tran(d,"\n","%0D%0A"),d=A5.ajax.addParamRequiredData(d),new $a.simple(i,{data:d,handleGeneric:!0,method:"post"})}},"undefined"==typeof A5.component&&(A5.component=new Object),A5.ajax.guid=function(){return A5.ajax._s4()+A5.ajax._s4()+"-"+A5.ajax._s4()+"-"+A5.ajax._s4()+"-"+A5.ajax._s4()+"-"+A5.ajax._s4()+A5.ajax._s4()+A5.ajax._s4()},A5.ajax._s4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},A5.fadeOutMessage=function(e,t,i,s,a){var n="";n=s?'<div class="'+a+'Win"><div class="'+a+"WinInner "+a+'WinTitle">'+t+"</div></div>":t;var o=$(e);return!!o&&(o.innerHTML=n,o.style.display="",void A5.u.element.hide(o,{type:"fade",duration:i}))},A5.component.fixupPageAjaxUrl=function(){var e=e=/^(http.*)\/.+\.a5w.*/i,t=function(t){var i,s=e.exec(t);return s&&s.length>1&&(i=s[1]+"/"),i};return function(e,i){var s;void 0!==e&&"a5res"!=e.split(":")[0]&&(s=t(e),void 0!==s&&(i.page=s+i.page,i.data=i.data+"&"+A5.ajax.buildURLParam("__ajaxURL",s)))}}(),A5.getStateInfo=function(e){var t="",i=e._thisGridAlias;"undefined"==typeof i&&(i=e.gridId);var s=window[i+"_DlgObj"];return s||window[i+"_GridObj"],s&&(t=s.getStateInfo(),""!=t&&(t="&"+t)),t},A5.component.runGenericComponent=function(e){var t=new Array,i="",s="";"undefined"==typeof e._applicationRoot&&(e._applicationRoot=""),"undefined"==typeof e._parentComponentHasPanels&&(e._parentComponentHasPanels=!1),t.push(A5.ajax.buildURLParam("__parentComponentHasPanels",""+e._parentComponentHasPanels)),"undefined"==typeof e.dynamicPanel&&(e.dynamicPanel=!1),"undefined"==typeof e.parentPanelNavigator&&(e.parentPanelNavigator=""),"undefined"==typeof e.dynamicPanelTitle&&(e.dynamicPanelTitle=""),"undefined"==typeof e.canCloseDynamicPanel&&(e.canCloseDynamicPanel=!1),"undefined"==typeof e.waitMessageTarget&&(e.waitMessageTarget=""),t.push(A5.ajax.buildURLParam("__dynamicPanel",""+e.dynamicPanel)),t.push(A5.ajax.buildURLParam("__parentPanelNavigator",""+e.parentPanelNavigator)),t.push(A5.ajax.buildURLParam("__dynamicPanelTitle",""+e.dynamicPanelTitle)),t.push(A5.ajax.buildURLParam("__canCloseDynamicPanel",""+e.canCloseDynamicPanel)),t.push(A5.ajax.buildURLParam("__waitMessageTarget",""+e.waitMessageTarget));var a="yes";"undefined"==typeof e.windowName&&(a="no"),t.push(A5.ajax.buildURLParam("__openInWindow",""+a));var n="",o="";if("dialog2"==e.type){"undefined"==typeof e.dialog2Div&&(e.dialog2Div=""),"undefined"==typeof e.dialog2Name&&(e.dialog2Name=""),"undefined"==typeof e.alias&&(e.alias=e.dialog2Name),"undefined"==typeof e._thisGridAlias&&(e._thisGridAlias=""),o=window[e._thisGridAlias+"_DlgObj"],"undefined"==typeof e.onLoadCompleteJavascript&&(e.onLoadCompleteJavascript=""),n=e.dialog2Name,t.push("__dialogDiv="+e.dialog2Div),t.push(A5.ajax.buildURLParam("__dialogFilename",e.dialog2Name)),t.push(A5.ajax.buildURLParam("__onLoadCompleteJavascript",e.onLoadCompleteJavascript)),t.push(A5.ajax.buildURLParam("__parentComponentAlias",e._thisGridAlias));var r="__a5RunDialog.a5w";s=r,A5.u.element.setContent(e.dialog2Div,e.workingMessage),"undefined"!=typeof e.specialDialogMode&&("openDialogShowMappedControls"==e.specialDialogMode&&(t.push(A5.ajax.buildURLParam("__controlMap",""+e.controlMap)),t.push(A5.ajax.buildURLParam("__controlSourceData",""+e.controlSourceData)),t.push(A5.ajax.buildURLParam("__parentComponentType",""+e.parentComponentType)),"O"==e.parentComponentType&&t.push(A5.ajax.buildURLParam("__parentDialogId",""+e.parentDialogId)),t.push(A5.ajax.buildURLParam("__commitParent",""+e.commitParentOnDialogClose))),"populateDialog"==e.specialDialogMode&&(t.push(A5.ajax.buildURLParam("__getPKFrom",""+e.getPKFrom)),t.push(A5.ajax.buildURLParam("__PKValue",""+e.pkValue))),"editListRow"==e.specialDialogMode||"newListRow"==e.specialDialogMode?t.push(A5.ajax.buildURLParam("__dialogSpecialMode",e.specialDialogMode+":"+e.recordPrimaryKey+"::::"+e.listControlId)):t.push(A5.ajax.buildURLParam("__dialogSpecialMode",e.specialDialogMode+":"+e.recordPrimaryKey)),t.push(A5.ajax.buildURLParam("__parentGridAlias",e._thisGridAlias)),t.push(A5.ajax.buildURLParam("__parentRow",""+e.sourceGridRowNumber)),t.push(A5.ajax.buildURLParam("__closeDialogAfterSubmit",""+e.closeDialogAfterSubmit)),"undefined"==typeof e.windowName&&(e.windowName="____none____"),t.push(A5.ajax.buildURLParam("__windowName",""+e.windowName)))}else{"undefined"==typeof e._thisGridAlias&&(e._thisGridAlias=""),t.push(A5.ajax.buildURLParam("__parentComponentAlias",e._thisGridAlias)),o=window[e._thisGridAlias+"_DlgObj"],"undefined"==typeof e.customComponentDiv&&(e.customComponentDiv=""),"undefined"==typeof e.customComponentName&&(e.customComponentName=""),n=e.customComponentName,"undefined"==typeof e.alias&&(e.alias=e.customComponentName),t.push("__customComponentDiv="+e.customComponentDiv),t.push(A5.ajax.buildURLParam("__customComponentFilename",e.customComponentName));var r="__a5RunCustomComponent.a5w";s=r,A5.u.element.setContent(e.customComponentDiv,e.workingMessage)}r=i+r,void 0==e.localArguments&&(e.localArguments=""),void 0==e.parameterBucket&&(e.parameterBucket=""),void 0==e.argumentValueBucket&&(e.argumentValueBucket=""),void 0==e.overrideSettings&&(e.overrideSettings=""),"undefined"==typeof e.placeholderValues&&(e.placeholderValues=""),"undefined"==typeof e.argumentBinding&&(e.argumentBinding=""),"undefined"==typeof e.a5_default_path&&(e.a5_default_path=""),"undefined"==typeof e.arguments&&(e.arguments=""),void 0==e.workingMessage&&(e.workingMessage='<img src="CSS/A5System/Images/wait.gif" /> Working...'),t.push(A5.ajax.buildURLParam("__placeholderValues",e.placeholderValues)),t.push(A5.ajax.buildURLParam("__argumentBinding",e.argumentBinding)),t.push(A5.ajax.buildURLParam("__componentType",e.type)),t.push(A5.ajax.buildURLParam("__overrideSettings",e.overrideSettings)),t.push(A5.ajax.buildURLParam("__arguments",e.arguments)),t.push(A5.ajax.buildURLParam("__localArguments",e.localArguments)),t.push(A5.ajax.buildURLParam("__parameterBucket",e.parameterBucket)),t.push(A5.ajax.buildURLParam("__argumentValueBucket",e.argumentValueBucket)),t.push(A5.ajax.buildURLParam("__applicationRoot",e._applicationRoot)),t.push("__path="+e.a5_default_path),t.push("__guid="+A5.ajax.guid()),t.push("__alias="+e.alias),t.push("__initialLoadIsAjax=true"),t.push(A5.ajax.buildURLParam("__a5browserflags",$u.o.toJSON(A5.flags)));var l=t.join("&");l=$u.s.tran(l,"\n","%0D%0A");var d=l,h=String(window.location);h=h.split("?"),h.shift(),h=h.join("?");var c=h;c=c+"&"+d+"&__unsaved=no",c+=A5.getStateInfo(e),e.guid="NotNeeded",c=A5.ajax.addParamRequiredData(c);var u=!1,f=!1,p=!1;if("undefined"!=typeof A5.__flagIIS&&(u=A5.__flagIIS),"undefined"!=typeof A5.__flagWorkingPreview&&(f=A5.__flagWorkingPreview),"undefined"!=typeof A5.__flagSimulateIIS&&(p=A5.__flagSimulateIIS),u&&(c="__virtualPage="+r+"&"+c,r=n+".a5wcmp"),p&&!f&&(r=n+".a5wcmp?__virtualPage="+r),""==i&&"undefined"!=typeof o){var m={page:r,data:c};A5.component.fixupPageAjaxUrl(o.ajaxURL,m),r=m.page,c=m.data}var _={};_.data=c,_.method="post",_.handleGeneric=!0,"undefined"==typeof e.ajaxFailedMessage&&(e.ajaxFailedMessage=""),"undefined"!=typeof e.ajaxFailedMessage&&(_.timeout=e.ajaxCallbackTimeout,_.errorHandle=function(){if("dialog2"==this.type){if(401==arguments[0].status)return window[this.alias+"_DlgObj"]._executeEvent("securityNotAuthenticated",{xbasicFunctionName:"RunUX:"+this.targetComponent}),!1;if(403==arguments[0].status)return window[this.alias+"_DlgObj"]._executeEvent("securityPermissionDenied",{xbasicFunctionName:"RunUX:"+this.targetComponent}),!1}$(this.windowDiv).innerHTML=e.ajaxFailedMessage},"dialog2"==e.type?_.errorHandleContext={windowDiv:e.dialog2Div,type:e.type,alias:e._thisGridAlias,targetComponent:e.dialog2Name}:_.errorHandleContext={windowDiv:e.dialog2Div}),new $a.simple(r,_)},A5.component.runGrid=function(e){if("undefined"==typeof e.gridDiv&&(e.gridDiv=""),"undefined"==typeof e.gridName&&(e.gridName=""),"undefined"==typeof e.alias&&(e.alias=e.gridName),"undefined"==typeof e.a5_default_path&&(e.a5_default_path=""),""==e.gridName)return e.gridName=$(e.gridDiv).innerHTML="Fatal error: Grid to display was not specified.",!1;if(""==e.alias)return $(e.reportDiv).innerHTML="Fatal error: Grid alias was not specified.",!1;if("undefined"==typeof e.__useCachedGrid&&"object"==typeof window[e.alias.toUpperCase()+"_GridObj"]&&$(window[e.alias.toUpperCase()+"_GridObj"].gridId+".FOCUSCATCHER"))return window[e.alias.toUpperCase()+"_GridObj"].refresh(),!0;void 0==e.workingMessage&&(e.workingMessage='<img src="CSS/A5System/Images/wait.gif" /> Working...'),void 0==e.flagTimer&&(e.flagTimer="F"),void 0==e.flagQueryEcho&&(e.flagQueryEcho="F"),void 0==e.flagDebugMode&&(e.flagDebugMode="F"),void 0==e.userFilter&&(e.userFilter=""),void 0==e.baseFilter&&(e.baseFilter=""),void 0==e.userOrder&&(e.userOrder=""),void 0==e.linkDefinition&&(e.linkDefinition=""),void 0==e.arguments&&(e.arguments=""),void 0==e.localArguments&&(e.localArguments=""),void 0==e.parameterBucket&&(e.parameterBucket=""),void 0==e.argumentValueBucket&&(e.argumentValueBucket=""),void 0==e.placeHolderValues&&(e.placeHolderValues=""),void 0==e.overrideSettings&&(e.overrideSettings=""),void 0==e._thisGridAlias&&(e._thisGridAlias="");var t="";"undefined"!=typeof window[e._thisGridAlias+"_DlgObj"]&&(t=window[e._thisGridAlias+"_DlgObj"].ajaxURL),t=t.split("?")[0],void 0==e.linkedContentSectionName&&(e.linkedContentSectionName=""),"undefined"==typeof e.showWindowParameters&&(e.showWindowParameters="");var i=e.flagTimer+e.flagQueryEcho+e.flagDebugMode,s=new Array;if("undefined"==typeof e.dynamicPanel&&(e.dynamicPanel=!1),"undefined"==typeof e.parentPanelNavigator&&(e.parentPanelNavigator=""),"undefined"==typeof e.dynamicPanelTitle&&(e.dynamicPanelTitle=""),"undefined"==typeof e.waitMessageTarget&&(e.waitMessageTarget=""),"undefined"==typeof e.canCloseDynamicPanel&&(e.canCloseDynamicPanel=!1),s.push(A5.ajax.buildURLParam("__canCloseDynamicPanel",""+e.canCloseDynamicPanel)),s.push(A5.ajax.buildURLParam("__dynamicPanel",""+e.dynamicPanel)),s.push(A5.ajax.buildURLParam("__parentPanelNavigator",""+e.parentPanelNavigator)),s.push(A5.ajax.buildURLParam("__dynamicPanelTitle",""+e.dynamicPanelTitle)),s.push(A5.ajax.buildURLParam("__waitMessageTarget",""+e.waitMessageTarget)),0==e.dynamicPanel&&""==e.gridDiv)return alert("Fatal Error. DIV to display Grid Component was not defined."),!1;s.push("__vp__fn=GR"),s.push("__vp__div="+e.gridDiv),s.push(A5.ajax.buildURLParam("__vp__gridName",e.gridName)),s.push("__vp__path="+e.a5_default_path),s.push("__vp__guid="+A5.ajax.guid()),s.push("__vp__alias="+e.alias),s.push("__vp__flags="+i),s.push(A5.ajax.buildURLParam("__vp__userFilter",e.userFilter)),s.push(A5.ajax.buildURLParam("__vp__userOrder",e.userOrder)),s.push(A5.ajax.buildURLParam("__vp__baseFilter",e.baseFilter)),s.push(A5.ajax.buildURLParam("__vp__override",e.overrideSettings)),s.push(A5.ajax.buildURLParam("__vp__linkDefinition",e.linkDefinition)),s.push(A5.ajax.buildURLParam("__vp__arguments",e.arguments)),s.push(A5.ajax.buildURLParam("__vp__localArguments",e.localArguments)),s.push(A5.ajax.buildURLParam("__vp__placeHolderValues",e.placeHolderValues)),s.push(A5.ajax.buildURLParam("__vp__parameterBucket",e.parameterBucket)),s.push(A5.ajax.buildURLParam("__vp__argumentValueBucket",e.argumentValueBucket)),s.push(A5.ajax.buildURLParam("__vp___thisGridAlias",e._thisGridAlias)),s.push(A5.ajax.buildURLParam("__vp___LCSName",e.linkedContentSectionName)),s.push(A5.ajax.buildURLParam("__vp___showWindowParameters",e.showWindowParameters)),void 0==e.isLookupGrid&&(e.isLookupGrid=!1),e.isLookupGrid&&(s.push(A5.ajax.buildURLParam("__vp__isLookupGrid","true")),s.push(A5.ajax.buildURLParam("__vp__lookupFieldName",e.lookupFieldName)),s.push(A5.ajax.buildURLParam("__vp__lookupFieldSection",e.lookupFieldSection)),s.push(A5.ajax.buildURLParam("__vp__lookupFieldName",e.lookupFieldName)),s.push(A5.ajax.buildURLParam("__vp__lookupReturnFields",e.lookupReturnFields)),s.push(A5.ajax.buildURLParam("__vp__lookupGridLinkLabel",e.lookupGridLinkLabel)),s.push(A5.ajax.buildURLParam("__vp__lookupGridLinkLabelStyle",e.lookupGridLinkLabelStyle)),s.push(A5.ajax.buildURLParam("__vp__lookupParentAlias",e._parentAlias))),s.push(A5.ajax.buildURLParam("__a5browserflags",$u.o.toJSON(A5.flags)));var a=s.join("&");a=$u.s.tran(a,"\n","%0D%0A");var n=a,o="&"+a+"._a5_ajax",r=String(window.location);r=r.split("?"),r.shift(),r=r.join("?");var l=r;l+=A5.getStateInfo(e),l=l+"&"+n;var o="_dummyPage._a5_ajax";e.guid="NotNeeded";var o="&__fn=gr._a5_ajax";o="__a5runGrid.a5w",$(e.gridDiv).innerHTML=e.workingMessage,l=A5.ajax.addParamRequiredData(l),l+="&__preprocessInternal=true";var d=!1,h=!1,c=!1;"undefined"!=typeof A5.__flagIIS&&(d=A5.__flagIIS),"undefined"!=typeof A5.__flagWorkingPreview&&(h=A5.__flagWorkingPreview),"undefined"!=typeof A5.__flagSimulateIIS&&(c=A5.__flagSimulateIIS),d&&(o=e.gridName+".a5wcmp",l="__virtualPage=__a5RunGrid.a5w&"+l),c&&!h&&(o=e.gridName+".a5wcmp?__virtualPage="+o);var u={page:o,data:l};A5.component.fixupPageAjaxUrl(t,u),o=u.page,l=u.data;var f={};f.data=l,f.method="post",f.handleGeneric=!0,"undefined"!=typeof e.ajaxFailedMessage&&(f.timeout=e.ajaxCallbackTimeout,f.errorHandle=function(){$(this.windowDiv).innerHTML=e.ajaxFailedMessage},f.errorHandleContext={windowDiv:e.gridDiv}),new $a.simple(o,f)},A5.component.makeReportPageName=function(){var e={report:".a5rpt",letter:".a5ltr",label:".a5lab"},t={report:".a5wkrpt",letter:".a5wkltr",label:".a5wklab"},i=/@Project(Report|Letter|Label)/i,s=/(.+)@(.+)(\.ddd|\.alb|\.set)/i;return function(a){var n=a.reportName.match(i);if(null!=n)return a.reportName.replace(n[0],e[n[1].toLowerCase()]);if(n=a.reportName.match(s),null!=n){var o=n[2].split("\\");return n[1]+"@"+o[o.length-1]+t[a.reportType.toLowerCase()]}return a.reportName}}(),A5.component.runReport=function(e){var t="";"undefined"!=typeof window[e.gridId+"_DlgObj"]&&(t=window[e.gridId+"_DlgObj"].ajaxURL);var i=!1;if("undefined"!=typeof e.download&&("Y"!=e.download&&"X"!=e.download||(i=!0)),i)e.reportIFrame="";else if("undefined"==typeof e.reportIFrame&&"undefined"==typeof e.reportDiv)return alert("Fatal Error. DIV or IFRAME to display report was not defined."),!1;var s="";if(s="undefined"!=typeof e.reportIFrame?"iframe":"div","undefined"==typeof e.workingMessage&&(e.workingMessage="Generating report. Please wait....."),"undefined"==typeof e.reportName)return $(e.reportIFrame).innerHTML="Fatal error: Report to print was not specified.",!1;"undefined"==typeof e.controlReferences&&(e.controlReferences=[]),"undefined"==typeof e.arrayControls&&(e.arrayControls=""),"undefined"==typeof e.rawArgumentMapping&&(e.rawArgumentMapping=""),"object"==typeof e.htmlReporting?e.htmlReporting=$u.o.toJSON(e.htmlReporting):e.htmlReporting="",void 0==e.hostComponentType&&(e.hostComponentType="Grid"),void 0==e.filter&&(e.filter=""),void 0==e.filter_incremental&&(e.filter_incremental=""),void 0==e.order&&(e.order=""),void 0==e.sqlFilter&&(e.sqlFilter=""),void 0==e.sqlFilter_incremental&&(e.sqlFilter_incremental=""),void 0==e.sqlOrder&&(e.sqlOrder=""),void 0==e.arguments&&(e.arguments=""),void 0==e.arguments_incremental&&(e.arguments_incremental=""),void 0==e.localArguments&&(e.localArguments=""),void 0==e.parameterBucket&&(e.parameterBucket=""),void 0==e.argumentValueBucket&&(e.argumentValueBucket=""),void 0==e.gridId&&(e.gridId=""),void 0==e.download&&(e.download="N"),void 0==e.clientSideFilename&&(e.clientSideFilename=""),void 0==e.xbasicFunction&&(e.xbasicFunction=""),void 0==e.reportMessagesDivId&&(e.reportMessagesDivId=""),void 0==e.width&&(e.width="9in"),void 0==e.height&&(e.height="11.5in"),void 0==e.displayMode&&(e.displayMode=""),void 0==e.pdfoptions&&(e.pdfoptions=""),void 0==e.saveAs&&(e.saveAs="pdf"),void 0==e.reportType&&(e.reportType="report"),void 0==e.pdfOpenParameters&&(e.pdfOpenParameters=""),void 0==e.afterExecuteJavascript&&(e.afterExecuteJavascript=""),void 0==e.__dtfmt&&(e.__dtfmt="mm/dd/yy"),void 0==e._rowNumber&&(e._rowNumber=1),void 0==e._gridCurrentFilter&&(e._gridCurrentFilter=""),void 0==e._gridCurrentOrder&&(e._gridCurrentOrder=""),void 0==e._gridCurrentArguments&&(e._gridCurrentArguments=""),void 0==e._gridCurrentDBType&&(e._gridCurrentDBType="");var a=new Array;if(a.push(A5.ajax.buildURLParam("reportName",e.reportName)),"iframe"==s){a.push(A5.ajax.buildURLParam("reportIFrame",e.reportIFrame));var n=$(e.reportIFrame);if("object"==typeof n&&null!=n.contentWindow){var o="<html><head></head><body>";if(e.workingMessage.search("<")!==-1)o=e.workingMessage;else{var r=void 0==e.workingMessageIcon?"CSS/A5System/Images/wait.gif":e.workingMessageIcon;o=o+"<img src='"+r+"'><span style='font-family: Tahoma; font-size: 10pt;'>"+e.workingMessage+"</span>"}o+="</body></html>";try{var l=n.contentWindow.document;l.open(),l.write(o),l.close()}catch(d){"undefined"==typeof r?$(n).src="":$(n).src=r}}}else a.push(A5.ajax.buildURLParam("reportDiv",e.reportDiv));a.push(A5.ajax.buildURLParam("_htmlReporting",e.htmlReporting)),a.push(A5.ajax.buildURLParam("filter",e.filter)),a.push(A5.ajax.buildURLParam("filter_incremental",e.filter_incremental)),a.push(A5.ajax.buildURLParam("order",e.order)),a.push(A5.ajax.buildURLParam("sqlFilter",e.sqlFilter)),a.push(A5.ajax.buildURLParam("sqlFilter_incremental",e.sqlFilter_incremental)),a.push(A5.ajax.buildURLParam("sqlOrder",e.sqlOrder)),a.push(A5.ajax.buildURLParam("arguments",e.arguments)),a.push(A5.ajax.buildURLParam("arguments_incremental",e.arguments_incremental)),a.push(A5.ajax.buildURLParam("localArguments",e.localArguments)),a.push(A5.ajax.buildURLParam("parameterBucket",e.parameterBucket)),a.push(A5.ajax.buildURLParam("argumentValueBucket",e.argumentValueBucket)),a.push(A5.ajax.buildURLParam("pdfoptions",e.pdfoptions)),a.push(A5.ajax.buildURLParam("pdfoptions",e.pdfoptions)),a.push(A5.ajax.buildURLParam("_hostComponent",e.hostComponentType)),a.push(A5.ajax.buildURLParam("__dtfmt",e.__dtfmt)),a.push(A5.ajax.buildURLParam("width",e.width)),a.push(A5.ajax.buildURLParam("height",e.height)),a.push(A5.ajax.buildURLParam("displayMode",e.displayMode)),a.push(A5.ajax.buildURLParam("saveAs",e.saveAs)),a.push(A5.ajax.buildURLParam("reportType",e.reportType)),a.push(A5.ajax.buildURLParam("_pdfOpenParameters",e.pdfOpenParameters)),a.push(A5.ajax.buildURLParam("_gridCurrentFilter",e._gridCurrentFilter)),a.push(A5.ajax.buildURLParam("_gridCurrentOrder",e._gridCurrentOrder)),a.push(A5.ajax.buildURLParam("_gridCurrentArguments",e._gridCurrentArguments)),a.push(A5.ajax.buildURLParam("_gridCurrentDBType",e._gridCurrentDBType)),a.push(A5.ajax.buildURLParam("_gridId",e.gridId)),a.push(A5.ajax.buildURLParam("_download",e.download)),a.push(A5.ajax.buildURLParam("_clientSideFilename",e.clientSideFilename)),a.push(A5.ajax.buildURLParam("_xbasicFunction",e.xbasicFunction)),a.push(A5.ajax.buildURLParam("_reportMessagesDivId",e.reportMessagesDivId)),a.push(A5.ajax.buildURLParam("_afterExecuteJavascript",e.afterExecuteJavascript)),
a.push(A5.ajax.buildURLParam("__a5browserflags",$u.o.toJSON(A5.flags))),"undefined"==typeof e.dynamicPanel&&(e.dynamicPanel=!1),"undefined"==typeof e.parentPanelNavigator&&(e.parentPanelNavigator=""),"undefined"==typeof e.dynamicPanelTitle&&(e.dynamicPanelTitle=""),"undefined"==typeof e.waitMessageTarget&&(e.waitMessageTarget=""),"undefined"==typeof e.canCloseDynamicPanel&&(e.canCloseDynamicPanel=!1),a.push(A5.ajax.buildURLParam("__canCloseDynamicPanel",""+e.canCloseDynamicPanel)),a.push(A5.ajax.buildURLParam("__dynamicPanel",""+e.dynamicPanel)),a.push(A5.ajax.buildURLParam("__parentPanelNavigator",""+e.parentPanelNavigator)),a.push(A5.ajax.buildURLParam("__dynamicPanelTitle",""+e.dynamicPanelTitle)),a.push(A5.ajax.buildURLParam("__waitMessageTarget",""+e.waitMessageTarget)),a.push(A5.ajax.buildURLParam("_rowNumber",e._rowNumber));var h="";"undefined"!=typeof e.pageVars&&(h=e.pageVars.join("&"),h="&"+h);var c=String(window.location);c=c.split("?"),c.shift(),c=c.join("?"),""!=c&&(c="&"+c),a=a.join("&"),a=a+h+c,a+=A5.getStateInfo(e),a=$u.s.tran(a,"\n","%0D%0A"),a=A5.ajax.addParamRequiredData(a);var u="__a5RunReport.a5w",f=!1,p=!1,m=!1;"undefined"!=typeof A5.__flagIIS&&(f=A5.__flagIIS),"undefined"!=typeof A5.__flagWorkingPreview&&(p=A5.__flagWorkingPreview),"undefined"!=typeof A5.__flagSimulateIIS&&(m=A5.__flagSimulateIIS),f&&(a="__virtualPage="+u+"&"+a,u=A5.component.makeReportPageName(e)),m&&!p&&(u=A5.component.makeReportPageName(e)+"?__virtualPage=__a5RunReport.a5w");var _="pdf";if("undefined"!=typeof e.htmlReporting.initialView&&(_=e.htmlReporting.initialView.toLowerCase()),flagSetWorkingMessage=!1,""!=e.htmlReporting){var o="";if(e.htmlReporting.indexOf("TabbedUI Pane")>-1&&"undefined"!=typeof tbiObj)if(flagSetWorkingMessage=!0,"undefined"!=typeof e.reportIFrame){var g=e.reportIFrame.replace(/\./g,"")+"Obj";window[g]&&0!=$(window[g].getPanelId())&&(flagSetWorkingMessage=!1)}else flagSetWorkingMessage=!1;if(e.workingMessage.search("<")!==-1)o=e.workingMessage;else{var v="CSS/A5System/Images/wait.gif";v=v.replace("a5res:images","images");var r=void 0==e.workingMessageIcon?v:e.workingMessageIcon;o=o+"<img src='"+r+"'><span style='font-family: Tahoma; font-size: 10pt;'>"+e.workingMessage+"</span>"}if(flagSetWorkingMessage){var y=$(e.reportDiv);y?A5.u.element.setContent(y,o):(y=$(e.reportIFrame),y&&A5.u.element.setContent(y,o))}}if("pdf"!=_);else if("undefined"!=typeof e.reportDiv&&""!=e.reportDiv){var b=e.htmlReporting;if("undefined"==typeof b&&(b=""),""==b){var w=$(e.reportDiv);w&&(w.innerHTML=e.workingMessage)}else{var g=String(e.reportDiv);if(g=g.replace(/_/g,"")+"Obj","undefined"==typeof window[g]){var w=$(e.reportDiv);w&&(w.innerHTML=e.workingMessage)}else{var I=window[g].getPanel("report").src,C=I.getPanelId("body"),y=$(C);y.firstChild&&y.firstChild.id==C+".SCROLLWRAPPER"&&(y=y.firstChild),y.innerHTML=e.workingMessage}}}var A={page:u,data:a};A5.component.fixupPageAjaxUrl(t,A),u=A.page,a=A.data,"pdf"==_?new $a.simple(u,{data:a,method:"post",handle:A5.component._handleReportResponse}):new $a.simple(u,{data:a,method:"post"})},A5.component._handleReportResponse=function(xmlObj){eval(xmlObj.responseText),"undefined"!=typeof a5reportInfo&&(a5reportInfo.reportFileName&&setTimeout(Function("$('"+a5reportInfo.reportIFrame+"').src = '"+A5.ajax.addURLRequiredData(a5reportInfo.reportFileName)+"';"),250),"undefined"!=typeof a5reportInfo.afterExecuteJavascript&&""!=a5reportInfo.afterExecuteJavascript&&eval(a5reportInfo.afterExecuteJavascript))},A5.form.populateSelect=function(e,t,i,s){if("string"==typeof s)return a5_AJAX_Form_populateSelect(e,t,i,s),!1;var a=$(e),n=0;if(s){if(a.options.length>0){for(var o=a.options.length-1;o>=0;o--)a.options[o]=null;a.options[0]=null}}else n=a.options.length;for(var o=0;o<i.length;o++)i[o].constructor==Array?i[o].length>1?a.options[n]=new Option(i[o][0],i[o][1]):a.options[n]=new Option(i[o][0],i[o][0]):a.options[n]=new Option(i[o],i[o]),n++;var r=!1;if(a.options.length>0){for(var o=0;o<a.options.length;o++)if(a.options[o].value==t){r=!0,a.options.selectedIndex=o;break}0==r&&(a.options[a.options.length]=new Option(t,t),a.options.selectedIndex=a.options.length-1)}},A5.PageWindows={styleName:"",_defaultWindowSettings:{dropdown:{type:"popup",title:{html:"Null",show:!1},body:{content:{type:"blank"}}},modal:{type:"modal",autoPosition:"in-view",title:{html:"Customer Grid",tools:{items:[{action:"close",name:"Close",image:"images/$$window.button.close.png.a5image"}],dummy:!1}},body:{content:{type:"blank"}}},modeless:{type:"modeless",autoPosition:"in-view",title:{html:"Customer Grid",tools:{items:[{action:"close",name:"Close",image:"images/$$window.button.close.png.a5image"}],dummy:!1}},body:{content:{type:"blank"}}}},createWindow:function(e,t){if(!this.getWindow(e)){if("string"==typeof t){var i={action:"close",name:"Close",image:"images/$$window.button.close.png.a5image"};"undefined"!=typeof A5.themes&&"undefined"!=typeof A5.themes._t[this.styleName]&&(i=A5.themes._t[this.styleName].window.base._defaultTools.close);var s=t.split("-");t=this._defaultWindowSettings[s.shift()];for(var a=0;a<s.length;a++)"url"==s[a]?(t.body.content.type="url",t.body.content.url="about:blank"):"resizable"==s[a]&&(t.resize="both");t.theme=this.styleName,t.title.tools.items=[i]}"object"==typeof arguments[2]&&$u.o.assign(t,arguments[2]),this._genericWindow[e]=new A5.Window(t)}return this._genericWindow[e]},getWindow:function(e){return"undefined"!=typeof this._genericWindow[e]&&this._genericWindow[e]},_genericWindow:[]},A5.eleByClass=function(e){if(document.getElementsByClassName)return document.getElementsByClassName(e);for(var t=[],i=document.getElementsByTagName("*"),s=new RegExp("(^|s)"+e+"(s|$)"),a=0;a<i.length;a++)s.test(i[a].className)&&t.push(i[a]);return t},A5.anim={run:function(e,t){A5.anim.stop(e),$u.o.assign(t,{channel:[],steps:10,delay:25,onBefore:0,onAfter:0},!0),t.channel.constructor!=Array&&(t.channel=[t.channel]);for(var i=0;i<t.channel.length;i++){for($u.o.assign(t.channel[i],{property:"",start:0,end:1,unit:"",power:.5,clear:!1},!0),"font-size"==t.channel[i].property&&""==t.channel[i].unit?t.channel[i].unit="pt":""==t.channel[i].unit&&(t.channel[i].unit="px"),t.channel[i]._type="style","color"==$u.s.word(t.channel[i].property,-1,"-")?(t.channel[i]._type="style:color",t.channel[i].start=A5.anim._colorToNumber(t.channel[i].start),t.channel[i].end=A5.anim._colorToNumber(t.channel[i].end)):"opacity"==t.channel[i].property&&(t.channel[i]._type="style:opacity",e.style.zoom="1"),t.channel[i].property=t.channel[i].property.split("-"),j=1;j<t.channel[i].property.length;j++)t.channel[i].property[j]=$u.s.changeCase(t.channel[i].property[j],"fu");t.channel[i].property=t.channel[i].property.join("")}var s=0;t.onBefore.constructor==Function&&t.onBefore.call(e),t.onAfter.constructor==Function&&$e.add(e,"a5AnimateComplete",t.onAfter,null,!1,e.id+e.name+"A5ANIMATE"),e._a5anim=setInterval(function(){for(var i=0;i<t.channel.length;i++)if("style:color"==t.channel[i]._type||"number"==typeof t.channel[i].start)if("style:color"==t.channel[i]._type){var a=new Array;a.push(Math.ceil(A5.anim._ease(t.channel[i].start[0],t.channel[i].end[0],t.steps,s,t.channel[i].power))),a.push(Math.ceil(A5.anim._ease(t.channel[i].start[1],t.channel[i].end[1],t.steps,s,t.channel[i].power))),a.push(Math.ceil(A5.anim._ease(t.channel[i].start[2],t.channel[i].end[2],t.steps,s,t.channel[i].power))),e.style[t.channel[i].property]="#"+$u.s.pad(a[0].toString(16),2,"0")+$u.s.pad(a[1].toString(16),2,"0")+$u.s.pad(a[2].toString(16),2,"0"),delete a}else if("style:opacity"==t.channel[i]._type){var n=A5.anim._ease(t.channel[i].start,t.channel[i].end,t.steps,s,t.channel[i].power);e.style.opacity=n,e.style.filter="alpha(opacity = "+Math.ceil(100*n)+")"}else e.style[t.channel[i].property]=A5.anim._ease(t.channel[i].start,t.channel[i].end,t.steps,s,t.channel[i].power)+t.channel[i].unit;else s==t.steps&&(e.style[t.channel[i].property]=t.channel[i].end);s++,s>t.steps&&A5.anim.stop(e)},t.delay)},stop:function(e){e._a5anim&&(clearInterval(e._a5anim),$e.execute(e,"a5AnimateComplete"),$e.removeGroup(e.id+e.name+"A5ANIMATE"))},toggle:function(e){A5.anim.stop(e);var t="undefined"!=typeof arguments[1]?arguments[1].toString().toLowerCase():"fade",i="undefined"!=typeof arguments[2]?arguments[2].toString().toLowerCase():"toggle",s="undefined"!=typeof arguments[3]?arguments[3]:500,a=Math.round(s/25),n=t.search("fade")!=-1,o=t.search("drop")!=-1,r=t.search("slide")!=-1;if(!n&&!o&&!r)return!1;if("toggle"==i&&(i="hide","none"==e.style.display&&(i="show")),"show"==i){if("none"!=e.style.display)return!1;e.style.display="";var l=new Array,d={};if(n&&(d={opacity:"",filter:"",zoom:""},e.style.opacity&&(d.opacity=e.style.opacity),e.style.filter&&(d.filter=e.style.filter),e.style.zoom&&(d.zoom=e.style.zoom),e.style.opacity="0",e.style.filter="alpha(opacity=0)",""==e.style.zoom&&(e.style.zoom="1"),l.push({property:"opacity",start:0,end:1})),o){var h=e.offsetHeight;d.overflow=e.style.overflow,d.height=e.style.height,e.style.height="0px",e.style.overflow="hidden",l.push({property:"height",start:0,end:h,unit:"px"})}if(r){var c=e.offsetWidth;d.overflow||(d.overflow=e.style.overflow),o||""!=e.style.height||(d.height="",e.style.height=e.offsetHeight+"px"),d.width=e.style.width,e.style.width="0px",e.style.overflow="hidden",l.push({property:"width",start:0,end:c,unit:"px"})}A5.anim.run(e,{onAfter:Function("$ss(this,"+$u.o.toJSON(d)+");"),channel:l,steps:a})}else if("hide"==i){if("none"==e.style.display)return!1;var l=new Array,d={};if(n&&(d={opacity:"",filter:"",zoom:""},e.style.opacity&&(d.opacity=e.style.opacity),e.style.filter&&(d.filter=e.style.filter),e.style.zoom&&(d.zoom=e.style.zoom),e.style.opacity="1",e.style.filter="alpha(opacity=100)",""==e.style.zoom&&(e.style.zoom="1"),l.push({property:"opacity",start:1,end:0})),o){var h=e.offsetHeight;d.overflow=e.style.overflow,d.height=e.style.height,e.style.overflow="hidden",l.push({property:"height",start:h,end:0,unit:"px"})}if(r){var c=e.offsetWidth;d.overflow||(d.overflow=e.style.overflow),o||""!=e.style.height||(d.height="",e.style.height=e.offsetHeight+"px"),d.width=e.style.width,e.style.width="0px",e.style.overflow="hidden",l.push({property:"width",start:c,end:0,unit:"px"})}A5.anim.run(e,{onAfter:Function("$ss(this,"+$u.o.toJSON(d)+"); this.style.display = 'none';"),channel:l,steps:a})}},_ease:function(e,t,i,s,a){var n=t-e,o=e+Math.pow(1/i*s,a)*n;return o},_colorToNumber:function(e){if(e.constructor==Array())return e;e=e.toString();var t=new Array;if("rgb("==e.substr(0,4))t.push($u.s.toNum($u.s.word(e,1,","))),t.push($u.s.toNum($u.s.word(e,2,","))),t.push($u.s.toNum($u.s.word(e,3,",")));else{var i=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],s=["#F0F8FF","#FAEBD7","#00FFFF","#7FFFD4","#F0FFFF","#F5F5DC","#FFE4C4","#000000","#FFEBCD","#0000FF","#8A2BE2","#A52A2A","#DEB887","#5F9EA0","#7FFF00","#D2691E","#FF7F50","#6495ED","#FFF8DC","#DC143C","#00FFFF","#00008B","#008B8B","#B8860B","#A9A9A9","#006400","#BDB76B","#8B008B","#556B2F","#FF8C00","#9932CC","#8B0000","#E9967A","#8FBC8F","#483D8B","#2F4F4F","#00CED1","#9400D3","#FF1493","#00BFFF","#696969","#1E90FF","#B22222","#FFFAF0","#228B22","#FF00FF","#DCDCDC","#F8F8FF","#FFD700","#DAA520","#808080","#008000","#ADFF2F","#F0FFF0","#FF69B4","#CD5C5C","#4B0082","#FFFFF0","#F0E68C","#E6E6FA","#FFF0F5","#7CFC00","#FFFACD","#ADD8E6","#F08080","#E0FFFF","#FAFAD2","#D3D3D3","#90EE90","#FFB6C1","#FFA07A","#20B2AA","#87CEFA","#778899","#B0C4DE","#FFFFE0","#00FF00","#32CD32","#FAF0E6","#FF00FF","#800000","#66CDAA","#0000CD","#BA55D3","#9370D8","#3CB371","#7B68EE","#00FA9A","#48D1CC","#C71585","#191970","#F5FFFA","#FFE4E1","#FFE4B5","#FFDEAD","#000080","#FDF5E6","#808000","#6B8E23","#FFA500","#FF4500","#DA70D6","#EEE8AA","#98FB98","#AFEEEE","#D87093","#FFEFD5","#FFDAB9","#CD853F","#FFC0CB","#DDA0DD","#B0E0E6","#800080","#FF0000","#BC8F8F","#4169E1","#8B4513","#FA8072","#F4A460","#2E8B57","#FFF5EE","#A0522D","#C0C0C0","#87CEEB","#6A5ACD","#708090","#FFFAFA","#00FF7F","#4682B4","#D2B48C","#008080","#D8BFD8","#FF6347","#40E0D0","#EE82EE","#F5DEB3","#FFFFFF","#F5F5F5","#FFFF00","#9ACD32"];e=$u.s.lTrim($u.s.tran(e.toLowerCase(),i,s),"#"),3==e.length?(t.push(parseInt("0x"+$u.s.replicate(e.substr(0,1),2))),t.push(parseInt("0x"+$u.s.replicate(e.substr(1,1),2))),t.push(parseInt("0x"+$u.s.replicate(e.substr(2,1),2)))):(t.push(parseInt("0x"+e.substr(0,2))),t.push(parseInt("0x"+e.substr(2,2))),t.push(parseInt("0x"+e.substr(4,2))))}return t}},A5.executeThisThenThat=function(){for(var args=[],i=0;i<arguments.length;i++)args.push(arguments[i]);var thisCode=args.shift(),lc=$a.lastCallback;if("string"==typeof thisCode?eval(thisCode):thisCode(),1==args.length){var thatCode=args[0];lc==$a.lastCallback?"string"==typeof thatCode?eval(thatCode):thatCode():$a._def[""+$a.lastCallback]="string"==typeof thatCode?Function(thatCode):thatCode}else lc==$a.lastCallback?A5.executeThisThenThat.apply(this,args):$a._def[""+$a.lastCallback]=function(){A5.executeThisThenThat.apply(this,args),delete args}},A5.u.element.visibilityHide=function(e){e.style.visibility="hidden"},A5.u.element.visibilityShow=function(e){e.style.visibility=""},A5.u.element.visibilityToggle=function(e){"hidden"==e.style.visibility?e.style.visibility="":e.style.visibility="hidden"},A5._buttonAddTheme=function(e,t){var i={};A5.themes.assign(i,t,"button"),A5.flags.supportsMouse&&""!=i.hoverClassName&&($e.add(e,"mouseover",Function("$acn(this,'"+i.hoverClassName+"')")),$e.add(e,"mouseout",Function("$rcn(this,'"+i.hoverClassName+"')"))),""!=i.pressedClassName&&($e.add(e,A5.d.evnts.down,Function("$acn(this,'"+i.pressedClassName+"')")),$e.add(e,A5.d.evnts.up,Function("$rcn(this,'"+i.pressedClassName+"')")))},A5._btn=function(e,t,i){return"undefined"!=typeof A5._btnHighlight&&0==A5._btnHighlight||("onmouseover"==t&&$acn(e,i+"ButtonHover"),"onmousedown"==t&&$acn(e,i+"ButtonPressed"),"onmouseup"==t&&$rcn(e,i+"ButtonPressed"),void("onmouseout"==t&&($rcn(e,i+"ButtonPressed"),$rcn(e,i+"ButtonHover"))))},A5.stringToDate=function(e){if(e=$u.s.aTrim(e),1==e.length&&160==e.charCodeAt(0)&&(e=""),""==e)return"";if(null==e)return null;var t=A5.__dtfmt;"undefined"!=typeof A5.__tfmt&&(t=t+"&&"+A5.__tfmt);var i="undefined"!=typeof arguments[1]?arguments[1]:t,s=new Date;return s.fromFormat(e,i),s},A5.isBlank=function(e){if(null==e)return!0;if("undefined"==typeof e)return!0;e.constructor==Array&&(e=e.join(""));var t=!1;return(""==e||"&nbsp;"==e||1==e.length&&160==e.charCodeAt(0))&&(t=!0),t},A5.loadJavascript=function(e){for(var t="undefined"!=typeof arguments[1]&&arguments[1],i=document.getElementsByTagName("script"),s=!1,a=0;a<i.length;a++)if(i[a].text==e){if(t){var n=i[a].parentNode;n.removeChild(i[a])}else s=!0;break}if("undefined"!=typeof cordova&&(s=!1),0==s){var o=document.createElement("script");o.text=e,document.getElementsByTagName("head")[0].appendChild(o)}},A5.loadJavascriptFile=function(e){for(var t="undefined"!=typeof arguments[1]&&arguments[1],i=document.getElementsByTagName("script"),s=!1,a=0;a<i.length;a++)if(i[a].src==e){s=!0;break}if("undefined"!=typeof cordova&&(s=!1),0==s){var n=document.createElement("script");n.src=e,n.onload=function(){"undefined"!=typeof jQuery&&jQuery.noConflict(),t.constructor==Function&&t(),t.constructor==String&&setTimeout(function(){window[t]&&window[t]()},100)},n.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||("undefined"!=typeof jQuery&&jQuery.noConflict(),t.constructor==Function&&t(),t.constructor==String&&setTimeout(function(){window[t]&&window[t]()},100))},document.getElementsByTagName("head")[0].appendChild(n)}},A5.CustomComponentHelper=Class.create(),A5.CustomComponentHelper.prototype={initialize:function(e){$u.o.assign(e,{ajaxURL:""},!0),$u.o.assign(this,e,!0),this.stateInfo={},this._functions={},this._defaultWindowSettings=new Object,this._defaultWindowSettings.dropdown={type:"popup",theme:this.styleName,title:{html:"Null",show:!1},body:{content:{type:"blank"}}},this._genericWindow=new Object,this._kw=new AUI.KeyWatcher([{key:"F1",handle:this._keyF1}],this);var t={action:"close",name:"Close",image:"images/$$window.button.close.png.a5image"};"undefined"!=typeof A5.themes&&"undefined"!=typeof A5.themes._t[this.styleName]&&(t=A5.themes._t[this.styleName].window.base._defaultTools.close),this._defaultWindowSettings.modal={type:"modal",autoPosition:"in-view",theme:this.styleName,title:{html:"Window",tools:{items:[t],dummy:!1}},body:{content:{type:"blank"}}},this._defaultWindowSettings.modeless={type:"modeless",autoPosition:"in-view",theme:this.styleName,title:{html:"Window",tools:{items:[t],dummy:!1}},body:{content:{type:"blank"}}},this._defaultWindowSettings.modalpopup={type:"modal-popup",autoPosition:"in-view",theme:this.styleName,title:{html:"Window",tools:{items:[t],dummy:!1}},body:{content:{type:"blank"}}},this._defaultWindowSettings.modelesspopup={type:"popup",autoPosition:"in-view",theme:this.styleName,title:{html:"Window",tools:{items:[t],dummy:!1}},body:{content:{type:"blank"}}}},setStateInfo:function(e){$u.o.assign(this.stateInfo,e)},getStateInfo:function(){return stateData=$u.o.toParams(this.stateInfo,"_state"),stateData},ajaxCallback:function(e,t,i){if(!this._executeEvent("canAjaxCallback",{xbasicFunctionName:i,ajaxEvent:"AjaxCallback"}))return!1;var s="undefined"!=typeof arguments[3]?arguments[3]:"",a="undefined"!=typeof arguments[4]?arguments[4]:"",n=this.getStateInfo();n="_XbasicFunction="+i+"&__FormAction=GenericAjaxCallback&"+n,""==s&&(s=this.ajaxURL),""!=a&&(n=n+"&"+a);var o=$u.o.toJSON(A5.flags);return n=n+"&"+A5.ajax.buildURLParam("__a5browserflags",o),A5.ajax.callback(s,n),!1},closeContainerWindow:function(e){var t=A5.windows.getFromElement(e);t&&t.hide()},loadJavascript:function(e){for(var t=document.getElementsByTagName("script"),i=!1,s=0;s<t.length;s++)if(t[s].text==e){i=!0;break}if(0==i){var a=document.createElement("script");a.text=e,document.getElementsByTagName("head")[0].appendChild(a)}},loadJavascriptFile:function(e){for(var t="undefined"!=typeof arguments[1]&&arguments[1],i=document.getElementsByTagName("script"),s=!1,a=0;a<i.length;a++)if(i[a].src==e){s=!0;break}if(0==s){var n=document.createElement("script");n.src=e,n.onload=function(){"undefined"!=typeof jQuery&&jQuery.noConflict(),t.constructor==Function&&t()},n.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||("undefined"!=typeof jQuery&&jQuery.noConflict(),t.constructor==Function&&t())},document.getElementsByTagName("head")[0].appendChild(n)}},getParentObject:function(){return""!=this.parentComponentAlias&&("undefined"!=typeof window[this.parentComponentAlias+"_GridObj"]?window[this.parentComponentAlias+"_GridObj"]:"undefined"!=typeof window[this.parentComponentAlias+"_DlgObj"]&&window[this.parentComponentAlias+"_DlgObj"])},loadCSSFile:function(e){for(var t=document.getElementsByTagName("link"),i=!1,s=0;s<t.length;s++)if(t[s].href.indexOf(e)>0){i=!0;break}if(0==i){var a=document.createElement("link");a.href=e,a.rel="stylesheet",a.type="text/css",document.getElementsByTagName("head")[0].appendChild(a)}},loadXbasic:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:"";if(0==this._embeddedMode)return!1;for(var i=document.getElementsByTagName("script"),s=!1,a=0;a<i.length;a++)if("undefined"!=typeof i[a].language&&i[a].language.toLowerCase()=="xbasic"+t&&i[a].text.toLowerCase()==e.toLowerCase()){s=!0;break}if(0==s){var n=document.createElement("script");n.text=e,n.language="Xbasic"+t,document.getElementsByTagName("head")[0].appendChild(n)}},loadMetaTag:function(e,t){var i=document.createElement("meta");i.name=e,i.content=t,document.getElementsByTagName("head")[0].appendChild(i)},_destroy:function(){var e=0;for(var t in this._genericWindow)e=$(this._genericWindow[t].getWindowId("body")),"div"==e.tagName.toLowerCase()&&(e.innerHTML="")},createWindow:function(e,t){if(!this.getWindow(e)){if("string"==typeof t){var i=t.split("-");t=new Object,$u.o.assign(t,this._defaultWindowSettings[i.shift()]);for(var s=0;s<i.length;s++)"url"==i[s]?(t.body.content.type="url",t.body.content.url="about:blank"):"resizable"==i[s]&&(t.resize="both")}"object"==typeof arguments[2]&&$u.o.assign(t,arguments[2]),this._genericWindow[e]=new A5.Window(t)}return this._genericWindow[e]},getWindow:function(e){return"undefined"!=typeof this._genericWindow[e]&&this._genericWindow[e]},_executeEvent:function(e){for(var t=!0,i=new Array,s=1;s<arguments.length;s++)i.push(arguments[s]);var a=!1;return"undefined"!=typeof this[e]&&this[e].constructor==Function&&(a=this[e].apply(this,i),"boolean"==typeof a&&(t=a)),"undefined"!=typeof this["_"+e]&&this["_"+e].constructor==Function&&(a=this["_"+e].apply(this,i),"boolean"==typeof a&&(t=t&&a)),t}},A5.DialogComponentHelper=Class.create(),A5.DialogComponentHelper.prototype={initialize:function(e,t){this.dialogId=e,$u.o.assign(t,{ajaxURL:"",columnInfo:{},fieldHelpers:{},dialogWatches:{},waitMessageAutoCloseDelay:5e3,fieldErrors:{type:"",className:"",inputClassName:"",icon:"",global:{contId:"",hoverClassName:"",hoverInputClassName:""}}},!0),$u.o.assign(this,t,!0),this._delayed=[],this._dirtyRows=[!1],this._isDirty=!1,this._isDataDirty=!1,this._focusControl="",this._focusRow=1,this._blurTO=0,this._fwTO=0,this._onlineStatusMode="",this._onlineStatus="online",this.flagRenderComplete=!1,this._functionToConstrainElements=Function("var eles = arguments[0]; var dlgId = '"+this.dialogId+".'; var dlgIdLen = dlgId.length; var eles2 = []; for(var i = 0;i < eles.length; i++){ if(eles[i].id.substr(0,dlgIdLen) == dlgId) eles2.push(eles[i]);}; if(eles2.length == 0) return false; return eles2;"),this._controls={},"undefined"!=typeof this.fieldErrors.global.contId&&""!=this.fieldErrors.global.contId||(this.fieldErrors.global.contId=this.dialogId+".GLOBALERRORS"),this._eh=new A5.ErrorHandler(this.fieldErrors);var i={type:"tip"};$u.o.assign(i,this.fieldErrors,!0),this._rseh=new A5.ErrorHandler(i),this.stateInfo={},this.rowStateInfo=[],this._listViewData=[],this._listViewSettings=[],this._buttonListData=[],this._spinListData=[],this._sliderData=[],this._treeData=[],this._treeSettings=[],this._mapSettings=[],this._menus=[],this._layoutRules=[],this._menuData=[],this._waitDialogs=[],this._listsDV=[],this._templates=[],this._templateData=[],this._queryState={},this._hiddenControls={},this._objectsToDestroy=[],this._dataCache={},this._ajaxCallbackCompleteCode={},this._fireWatchesFlag=!0,this._defaultWindowSettings=new Object,this._activeLayoutRule="",this.locationMaximumAge=3e4,this.locationTimeout=15e3,this._componentType="UX",this.ajaxCallbackTimeout=0,this.locationHighAccuracy=!0,this._defaultWindowTitleDirection="ltr",this._editors={},this._forms={},this._formControls={},this.nullImage="iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP4//8/AwAI/AL+eMSysAAAAABJRU5ErkJggg==",this._defaultWindowSettings.dropdown={type:"popup",theme:this.styleName,title:{html:"Null",show:!1},body:{content:{type:"blank"}}},this._controlInst=new Object,this._genericWindow=new Object,this._vars={SESSION:{},PAGEVARIABLE:{}},this._kw=new AUI.KeyWatcher([{key:"F1",handle:this._keyF1}],this);var s={action:"close",name:"Close",image:"images/$$window.button.close.png.a5image"};"undefined"!=typeof A5.themes&&"undefined"!=typeof A5.themes._t[this.styleName]&&(s=A5.themes._t[this.styleName].window.base._defaultTools.close),this._defaultWindowSettings.modal={type:"modal",autoPosition:"in-view",theme:this.styleName,title:{html:"Window",direction:this._defaultWindowTitleDirection,tools:{items:[s],dummy:!1}},body:{content:{type:"blank"}}},this._defaultWindowSettings.modalpopup={type:"modal-popup",autoPosition:"in-view",theme:this.styleName,title:{html:"Window",direction:this._defaultWindowTitleDirection,tools:{items:[s],dummy:!1}},body:{content:{type:"blank"}}},this._defaultWindowSettings.modeless={type:"modeless",autoPosition:"in-view",theme:this.styleName,title:{html:"Window",direction:this._defaultWindowTitleDirection,tools:{items:[s],dummy:!1}},body:{content:{type:"blank"}}},this._defaultWindowSettings.modelesspopup={type:"popup",autoPosition:"in-view",theme:this.styleName,title:{html:"Window",direction:this._defaultWindowTitleDirection,tools:{items:[s],dummy:!1}},body:{content:{type:"blank"}}},this._prepared=!1,this.initialized=!1,this._functions={},this._executeEvent("onInitializeBegin",{})},_delay:function(e,t){for(var i=[],s=0;s<t.length;s++)i.push(t[s]);this._delayed.push({m:e,a:i})},_destroy:function(){var e=this.wsclient;e&&e.disconnect();var t=1;$e.removeGroup(this.dialogId+".DIALOG");for(var i in this.dialogWatches)"undefined"==typeof this.dialogWatches[i].repeatingSection&&A5.Watch.remove(this.dialogId+".R"+t+"."+i);var s=0;for(var a in this._genericWindow)s=$(this._genericWindow[a].getWindowId()),s&&s.parentNode&&s.parentNode.removeChild(s),this._genericWindow[a].destroy();this.tabTimersStopAll();for(var n=0;n<this._objectsToDestroy.length;n++)"object"==typeof window[this._objectsToDestroy[n]]&&("function"==typeof window[this._objectsToDestroy[n]].destroy&&window[this._objectsToDestroy[n]].destroy(),delete window[this._objectsToDestroy[n]]);for(var o in this._controlInst)"function"==typeof this._controlInst[o].destroy&&this._controlInst[o].destroy()},destroyChildComponent:function(e){A5.component.remove(e)},_dynamicMask:function(e){if(window[this.format.maskFunctionName]){var t=window[this.format.maskComponentObject],i={};return i.rowNumber=1,i.part="O",window[this.format.maskFunctionName].call(t,i)}return""},prepare:function(){this._executeEvent("beforePrepare",{}),this._prepareRow(1),this._prepared=!0,this._executeEvent("afterPrepare",{})},_prepareRow:function(e){$e.removeGroup(this.dialogId+".DIALOG");var t=($(this.dialogId+".R"+e),0);this.rowStateInfo[e-1]={summary:{}};for(var i in this.columnInfo)"control"==this.columnInfo[i].type?"undefined"!=typeof this.columnInfo[i].repeatingSection&&(this.repeatingSections[this.columnInfo[i].repeatingSection]._ci[i]=this.columnInfo[i]):"undefined"!=typeof this.columnInfo[i].repeatingSection&&(this.repeatingSections[this.columnInfo[i].repeatingSection]._ci[i]=this.columnInfo[i]);for(var s in this.dialogWatches)"undefined"!=typeof this.dialogWatches[s].repeatingSection&&(this.repeatingSections[this.dialogWatches[s].repeatingSection]._w[s]=this.dialogWatches[s]);for(var a in this.repeatingSections){for(var n=1;n<=this.repeatingSections[a].rows;n++)this._prepareRepeatingSectionRow(a,n,e);this._prepareRepeatingSection(a,e)}for(var i in this.columnInfo)if(this.columnInfo[i].calculateSummary&&this._summarize(i,e,!1),"control"==this.columnInfo[i].type){if("undefined"!=typeof this.columnInfo[i].repeatingSection);else if("undefined"==typeof this._controlInst["R"+e+"."+i]){var o=this._controls[i];if("list"==o.type){var r={inputId:this.dialogId+".V.R"+e+"."+i,onSelect:function(){"undefined"!=typeof this._onSelect&&this._onSelect(),setTimeout(Function("$e.execute('"+this.inputId+"', 'change');"),0)}};"undefined"!=typeof o.settings.onSelect&&(o.settings._onSelect=o.settings.onSelect),$u.o.assign(r,o.settings,!0),r._state={},r._state.page=1,"undefined"==typeof r.containerId&&(r.containerId=this.dialogId+".V.R"+e+"."+i+".CONTROL"),this._controlInst["R"+e+"."+i]=r,this._controlInst["R"+e+"."+i]=new A5.ListBox(r.containerId,o.data,r),$e.add(r.inputId,"change",this._setControlDirty,this,!1,this.dialogId+".DIALOG")}else if("viewBox"==o.type||"databoundcustomcontrol"==o.type.toLowerCase()){var r={inputId:this.dialogId+".V.R"+e+"."+i,onSelectComplete:function(){"undefined"!=typeof this._onSelectComplete&&this._onSelectComplete.apply(this,arguments),setTimeout(Function("$e.execute('"+this.inputId+"', 'change');"),0)}};"undefined"!=typeof o.settings.onSelectComplete&&(o.settings._onSelectComplete=o.settings.onSelectComplete),$u.o.assign(r,o.settings,!0),r._state={},r._state.page=1,"undefined"==typeof r.containerId&&(r.containerId=this.dialogId+".V.R"+e+"."+i+".CONTROL"),this._controlInst["R"+e+"."+i]=new A5.ViewBox(r.containerId,o.data,r),$e.add(r.inputId,"change",this._setControlDirty,this,!1,this.dialogId+".DIALOG")}else if("ink"==o.type){var r={inputId:this.dialogId+".V.R"+e+"."+i};$u.o.assign(r,o.settings,!0),"undefined"==typeof r.containerId&&(r.containerId=this.dialogId+".V.R"+e+"."+i+".CONTROL"),this._controlInst["R"+e+"."+i]=new A5.Ink(r.containerId,r),$e.add(r.inputId,"change",this._setControlDirty,this,!1,this.dialogId+".DIALOG")}else if("dateTimePicker"==o.type){var r={inputId:this.dialogId+".V.R"+e+"."+i};$u.o.assign(r,o.settings,!0),this._controlInst["R"+e+"."+i]=new A5.DateTimePicker(this.dialogId+".V.R"+e+"."+i+".CONTROL",r),this._controlInst["R"+e+"."+i].setValue(this.originalValues[e-1][i]),$e.add(r.inputId,"change",this._setControlDirty,this,!1,this.dialogId+".DIALOG")}else if("slider"==o.type){var r={inputId:this.dialogId+".V.R"+e+"."+i};$u.o.assign(r,o.settings,!0),$(this.dialogId+".V.R"+e+"."+i+".CONTROL").innerHTML="",this._controlInst["R"+e+"."+i]=new A5.Slider(this.dialogId+".V.R"+e+"."+i+".CONTROL",r),$e.add(r.inputId,"change",this._setControlDirty,this,!1,this.dialogId+".DIALOG")}else if("switch"==o.type){var r={inputId:this.dialogId+".V.R"+e+"."+i};$u.o.assign(r,o.settings,!0),$(this.dialogId+".V.R"+e+"."+i+".CONTROL").innerHTML="",this._controlInst["R"+e+"."+i]=new A5.Switch(this.dialogId+".V.R"+e+"."+i+".CONTROL",r),$e.add(r.inputId,"change",this._setControlDirty,this,!1,this.dialogId+".DIALOG")}else if("spinList"==o.type){var r={inputId:this.dialogId+".V.R"+e+"."+i};$u.o.assign(r,o.settings,!0),this._controlInst["R"+e+"."+i]=new A5.SpinList(this.dialogId+".V.R"+e+"."+i+".CONTROL",o.data,r),$e.add(r.inputId,"change",this._setControlDirty,this,!1,this.dialogId+".DIALOG")}else if("buttonList"==o.type){var r={inputId:this.dialogId+".V.R"+e+"."+i};$u.o.assign(r,o.settings,!0),this._controlInst["R"+e+"."+i]=new A5.ButtonList(this.dialogId+".V.R"+e+"."+i+".CONTROL",o.data,r),$e.add(r.inputId,"change",this._setControlDirty,this,!1,this.dialogId+".DIALOG")}else if("tree"==o.type){var r={inputId:this.dialogId+".V.R"+e+"."+i};$u.o.assign(r,o.settings,!0),this._controlInst["R"+e+"."+i]=new A5.Tree(this.dialogId+".V.R"+e+"."+i+".CONTROL",o.data,r),$e.add(r.inputId,"change",this._setControlDirty,this,!1,this.dialogId+".DIALOG")}else if("map"==o.type){var l=this.dialogId+".V.R"+e+"."+i+".CONTROL";"undefined"!=typeof o.containerId&&(l=o.containerId),""==$(l).innerHTML&&(this._controlInst["R"+e+"."+i]=new A5.Map(l,o.settings));
}else if("custom"==o.type){var r={inputId:this.dialogId+".V.R"+e+"."+i,rowNumber:e};$u.o.assign(r,o.settings,!0),this._controlInst["R"+e+"."+i]=r}o.onInitialize&&o.onInitialize.call(this._controlInst["R"+e+"."+i],e),this._controlInst["R"+e+"."+i].initialized=!0}}else if("undefined"!=typeof this.columnInfo[i].repeatingSection);else if(t=$n(this.columnInfo[i].isArray?"V.R"+e+"."+i+"[]":"V.R"+e+"."+i),t=this._functionToConstrainElements(t)){var d=t[0].tagName.toLowerCase();("input"==d&&"radio"!=t[0].type&&"checkbox"!=t[0].type||"textarea"==d)&&$e.add(t,"keyup",this._setControlDirty,this,!1,this.dialogId+".DIALOG"),$e.add(t,"change",this._setControlDirty,this,!1,this.dialogId+".DIALOG"),$e.add(t,"blur",this._setControlBlur,this,!1,this.dialogId+".DIALOG"),$e.add(t,"focus",this._setControlFocus,this,!1,this.dialogId+".DIALOG"),"input"==d&&("radio"!=t[0].type&&"checkbox"!=t[0].type||$e.add(t,"click",this._setControlDirty,this,!1,this.dialogId+".DIALOG")),this.fieldHelpers[i]&&(this.fieldHelpers[i].bind(t[0]),this.fieldHelpers[i].onBind&&this.fieldHelpers[i].onBind(e))}for(var h in this._forms)this._formPrepare(h);for(var s in this.dialogWatches)if("undefined"==typeof this.dialogWatches[s].repeatingSection){for(var c=new Array,u="",t=0,f=0,n=0;n<this.dialogWatches[s].watch.length;n++)if(f=$(this.dialogId+".V.R"+e+"."+this.dialogWatches[s].watch[n]),u="",f&&(u=f.tagName.toLowerCase()),"input"!=u&&"select"!=u&&"textarea"!=u){t=$n("V.R"+e+"."+this.dialogWatches[s].watch[n]),0==t.length&&(t=$n("V.R"+e+"."+this.dialogWatches[s].watch[n]+"[]")),t=this._functionToConstrainElements(t);for(var p=0;p<t.length;p++)c.push(t[p].id)}else c.push(this.dialogId+".V.R"+e+"."+this.dialogWatches[s].watch[n]);A5.Watch.add(this.dialogId+".R"+e+"."+s,c,{data:{rowNumber:e},onChange:this.dialogWatches[s].onChange})}},_prepareRepeatingSection:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:1,i=($(this.dialogId+".R"+t),this.repeatingSections[e]);if("undefined"==typeof i)return!1;for(var s=0,i=this.repeatingSections[e],a=0;a<i._r[t-1].i.length;a++)if(!i._r[t-1].i[a].deleted){s=a+1;break}var n=$(this.dialogId+".V.R"+t+"."+e+".I"+s+".CONTENT"),o=$(this.dialogId+".V.R"+t+"."+e+".TITLES");if(o&&n)for(var r=0,a=0;a<n.childNodes.length;a++)if("undefined"!=typeof n.childNodes[a].tagName&&"DIV"==n.childNodes[a].tagName.toUpperCase()&&"none"!=n.childNodes[a].style.display){for(;r<o.childNodes.length&&("undefined"==typeof o.childNodes[r].tagName||"DIV"!=o.childNodes[r].tagName.toUpperCase());)r++;"&nbsp;"==n.childNodes[a].innerHTML&&""==n.childNodes[a].style.width||(o.childNodes[r].style.width=n.childNodes[a].offsetWidth+"px"),r++}this._getRepeatingSectionLogicalRowNumber(e)},populateDropdownBox:function(e,t,i){var s="",a=this._getControlLow(e);if(a){if(s=this.getValue(e),i){for(var n=!0,o="",r="",l=0;l<t.length;l++){if(o=t[l].constructor==Array?t[l].length>1?t[l][1]:t[l][0]:t[l],o==s){n=!1;break}0==l&&(r=o)}n&&(s=r)}A5.form.populateSelect(a,s,t,i)}},_getControlLow:function(e){e=e.toUpperCase();var t=$(this.dialogId+".V.R1."+e);if(!t){e=e.split("_A5INSTANCE")[0];var i=this._findRepeatingSection(e);if(""==i)return t;var s=this.repeatingSections[i].activeRow;t=$(this.dialogId+".V.R1."+e+"_A5INSTANCE"+s)}return t},_lsh:function(e,t,i){var s=this.getControl(t),a=!1;if(s){if(s._state&&s._state.highlight&&s._state.highlight[i.toUpperCase()]){a=!0;var n=s._state.highlight[i.toUpperCase()]}if(a&&s._searchHighlighting){for(var o=e,r=0;r<n.length;r++){var l=new RegExp("("+n[r]+"+(?![^<>]*>))","ig");o=o.replace(l,'<span class="'+s._searchHighlightClass+'" style="'+s._searchHighlightStyle+'">$1</span>')}return o}return e}return e},setListColumnsAndPopulate:function(e,t,i){var s=!0,a={},n=!1,o=!1;"undefined"==typeof i&&(i={}),"undefined"!=typeof i.showTitle&&(s=i.showTitle),"undefined"!=typeof i.customTitles&&(a=i.customTitles,n=!0),"undefined"!=typeof i.multiple&&(o=i.multiple);var r=i.columnCount,l=i.columns,d=!1;"undefined"!=typeof l&&(d=!0),"undefined"==typeof r&&(r=1e3);var h=this.getControl(e);if(!h)return!1;if(null==t)return h.populate([{}]),!1;var c=t[0];if(null==c)return!1;if("undefined"==typeof c)return!1;if(null!=l&&"string"==typeof l&&(l=l.split(",")),"string"==typeof c){s=!!n&&i.showTitle,i.returnExpression="data.field";for(var u=[],f=0;f<t.length;f++)u.push({field:t[f]});t=u;var c=t[0]}var p,m=[],_="",g=this.dialogId,v="",y=0,b="";for(var w in c){if(y>=r)break;if(p=!0,d&&l.indexOf(w)==-1&&(p=!1),p){delete v;var v={};_=v,_.header={},b=w,n&&(b=a[w],"undefined"==typeof b&&(b=w)),_.header.html=b,_.resize=!1,_.data={},_.data.template='<span id="'+g+"."+e.toUpperCase()+"."+w.toUpperCase()+'.I.{*dataRow}">{'+w+"}</span>&nbsp;",_.order=w,_.width="flex(1)",m.push(v)}y++}if("undefined"==typeof h.layouts&&alert("List is not poperly defined. Populate List with dummy data first."),"undefined"==typeof h.layouts.Default)return alert("Target list properties have not been set"),!1;if(h.layouts.Default.columns=m,"data.<listColumn>"==i.returnExpression){var I=t[0],y=-1,C="";for(var A in I)y++,y>0&&exit,C=A;i.returnExpression="data."+C}if(h.columnLayout.header.show=s,"undefined"!=typeof i.returnExpression){var N="return ''+"+i.returnExpression+";",$=Function("data",N);h.calculateValue=$}"undefined"==typeof h._userOnClick&&(h._userOnClick=h.onClick),"function"==typeof i.onClick?h.onClick=i.onClick:"string"==typeof i.onClick&&(h.onClick=Function(i.onClick)),h.multiple=o,o&&(h.selectionMode="additive"),h.populate(t),h.refresh()},exportListData:function(e,t){var i=this.getControl(e);if(!i)return!1;if("undefined"==typeof t.data&&("Data Series"==i._dataSourceType||"DBF"==i._dataSourceType||"Custom"==i._dataSourceType||"SQL"==i._dataSourceType||"Odata"==i._dataSourceType?t.data="listQuery":t.data="listData"),t.listName=e,"listdata"==t.data.toLowerCase()){var s=[];if("undefined"!=typeof t&&"undefined"!=typeof t.schema)for(var a in t.schema)s.push(a);t.listData=this.getListData(e,!0,s)}var n=A5.ajax.buildURLParam("_exportParam",JSON.stringify(t));this.ajaxCallback("G",1,"system:exportData","",n)},populateDropdownBoxRepeatingSection:function(e,t,i){var s="undefined"!=typeof arguments[3]?arguments[3]:-1,a="undefined"!=typeof arguments[4]&&arguments[4],n=this._findRepeatingSection(e),o=this.repeatingSections[n];if("undefined"==typeof o)return!1;for(var r=o.rows,l="",d="",h=1;h<=r;h++)l=e+"_A5INSTANCE"+h,this.populateDropdownBox(l,t,i),d=this.dialogId+".V.R1."+l,1!=s&&0!=s||($(d).disabled=s),1==a&&$svs(d,"")},refreshDropdownBoxChoices:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:"",i="undefined"!=typeof arguments[2]?arguments[2]:"",t="undefined"!=typeof arguments[1]?arguments[1]:"",s="undefined"!=typeof arguments[3]?arguments[3]:"__none__",a="undefined"!=typeof arguments[4]&&arguments[4],n=new Array;n.push(A5.ajax.buildURLParam("_controlName",e)),n.push(A5.ajax.buildURLParam("_dynamicFilter",t)),n.push(A5.ajax.buildURLParam("_dynamicFilterArgs",i)),n.push(A5.ajax.buildURLParam("_selectedValue",s)),n.push(A5.ajax.buildURLParam("_currentRSRowOnly",a)),n=n.join("&");var o="system:refreshDropddownBox";this.ajaxCallback("G",1,o,"",n)},_getRepeatingSectionLogicalRowNumber:function(e){var t=1;if("undefined"==typeof this.repeatingSections)return!1;if("undefined"==typeof this.repeatingSectionInfo)return!1;var i=this.repeatingSectionInfo[e];if(0==i.showRowCount)return!1;var s=this.repeatingSections[e];if("undefined"==typeof s)return!1;for(var a=0,n="",o=1;o<=s.rows;o++)n=$(this.dialogId+"."+e+".RSROWNUMBER_A5INSTANCE"+o),0==s._r[t-1].i[o-1].deleted&&(a++,n&&(n.innerHTML=a))},_prepareRepeatingSectionRow:function(e,t,i){this._executeEvent("beforeRptSectionRowPrepare",{sectionName:e,rowNumber:t});var s=($(this.dialogId+".R"+i),0),a=this.repeatingSections[e];if("undefined"==typeof a)return!1;a._r[i-1].i[t-1]={deleted:!1,dirty:!1,error:!1};for(var n in a._ci)if("control"==a._ci[n].type){if("undefined"==typeof this._controlInst["R"+i+"."+n+"_A5INSTANCE"+t]){var o=this._controls[n];if("list"==o.type){var r={inputId:this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t,onSelect:function(){setTimeout(Function("$e.execute('"+this.inputId+"', 'change');"),0)}};$u.o.assign(r,o.settings,!0);var l=[];$u.o.assign(l,o.data),r._state={},r._state.page=1,this._controlInst["R"+i+"."+n+"_A5INSTANCE"+t]=new A5.ListBox(this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t+".CONTROL",l,r),$e.add(r.inputId,"change",this._setControlDirty,this,!1,this.dialogId+".DIALOG")}else if("viewBox"==o.type||"databoundcustomcontrol"==o.type.toLowerCase()){var r={inputId:this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t,onSelectComplete:function(){setTimeout(Function("$e.execute('"+this.inputId+"', 'change');"),0)}};if($u.o.assign(r,o.settings,!0),o.data.constructor==Array)var l=[];else var l={};$u.o.assign(l,o.data),r._state={},r._state.page=1,this._controlInst["R"+i+"."+n+"_A5INSTANCE"+t]=new A5.ViewBox(this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t+".CONTROL",l,r),$e.add(r.inputId,"change",this._setControlDirty,this,!1,this.dialogId+".DIALOG")}else if("dateTimePicker"==o.type){var r={inputId:this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t};$u.o.assign(r,o.settings,!0),this._controlInst["R"+i+"."+n+"_A5INSTANCE"+t]=new A5.DateTimePicker(this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t+".CONTROL",r),this._controlInst["R"+i+"."+n+"_A5INSTANCE"+t].setValue(this.originalValues[i-1][n+":"+t]),$e.add(r.inputId,"change",this._setControlDirty,this,!1,this.dialogId+".DIALOG")}else if("slider"==o.type){var r={inputId:this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t};$u.o.assign(r,o.settings,!0),$(this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t+".CONTROL").innerHTML="",this._controlInst["R"+i+"."+n+"_A5INSTANCE"+t]=new A5.Slider(this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t+".CONTROL",r),$e.add(r.inputId,"change",this._setControlDirty,this,!1,this.dialogId+".DIALOG")}else if("switch"==o.type){var r={inputId:this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t};$u.o.assign(r,o.settings,!0),$(this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t+".CONTROL").innerHTML="",this._controlInst["R"+i+"."+n+"_A5INSTANCE"+t]=new A5.Switch(this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t+".CONTROL",r),$e.add(r.inputId,"change",this._setControlDirty,this,!1,this.dialogId+".DIALOG")}else if("buttonList"==o.type){var r={inputId:this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t};$u.o.assign(r,o.settings,!0);var l=[];$u.o.assign(l,o.data),this._controlInst["R"+i+"."+n+"_A5INSTANCE"+t]=new A5.ButtonList(this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t+".CONTROL",l,r),$e.add(r.inputId,"change",this._setControlDirty,this,!1,this.dialogId+".DIALOG")}else if("spinList"==o.type){var r={inputId:this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t};$u.o.assign(r,o.settings,!0);var l=[];$u.o.assign(l,o.data),this._controlInst["R"+i+"."+n+"_A5INSTANCE"+t]=new A5.SpinList(this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t+".CONTROL",l,r),$e.add(r.inputId,"change",this._setControlDirty,this,!1,this.dialogId+".DIALOG")}else if("tree"==o.type){var r={inputId:this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t};$u.o.assign(r,o.settings,!0);var l=[];$u.o.assign(l,o.data),this._controlInst["R"+i+"."+n+"_A5INSTANCE"+t]=new A5.Tree(this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t+".CONTROL",l,r),$e.add(r.inputId,"change",this._setControlDirty,this,!1,this.dialogId+".DIALOG")}else if("map"==o.type)""==$(this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t+".CONTROL").innerHTML&&(this._controlInst["R"+i+"."+n+"_A5INSTANCE"+t]=new A5.Map(this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t+".CONTROL",o.settings));else if("custom"==o.type){var r={inputId:this.dialogId+".V.R"+i+"."+n+"_A5INSTANCE"+t,rowNumber:i,instanceNumber:t};$u.o.assign(r,o.settings,!0),this._controlInst["R"+i+"."+n+"_A5INSTANCE"+t]=r}o.onInitialize&&o.onInitialize.call(this._controlInst["R"+i+"."+n+"_A5INSTANCE"+t],i,t),this._controlInst["R"+i+"."+n+"_A5INSTANCE"+t].initialized=!0}}else if(s=$n(a._ci[n].isArray?"V.R"+i+"."+n+"_A5INSTANCE"+t+"[]":"V.R"+i+"."+n+"_A5INSTANCE"+t),s=this._functionToConstrainElements(s)){var d=s[0].tagName.toLowerCase();("input"==d&&"radio"!=s[0].type&&"checkbox"!=s[0].type||"textarea"==d)&&$e.add(s,"keyup",this._setControlDirty,this,!1,this.dialogId+".DIALOG"),$e.add(s,"change",this._setControlDirty,this,!1,this.dialogId+".DIALOG"),$e.add(s,"blur",this._setControlBlur,this,!1,this.dialogId+".DIALOG"),$e.add(s,"focus",this._setControlFocus,this,!1,this.dialogId+".DIALOG"),"input"==d&&("radio"!=s[0].type&&"checkbox"!=s[0].type||$e.add(s,"click",this._setControlDirty,this,!1,this.dialogId+".DIALOG")),this.fieldHelpers[n]&&(this.fieldHelpers[n].bind(s[0]),this.fieldHelpers[n].onBind&&this.fieldHelpers[n].onBind(i,t))}var h=this.repeatingSectionInfo[e];"undefined"!=typeof h.abstractJavascript&&h.abstractJavascript(t);var c=$(this.dialogId+".V.R"+i+"."+e+".I"+t);$e.add(c,A5.d.evnts.down,this._rsiOnClick,this,!1,this.dialogId+".DIALOG");var u=this.repeatingSectionInfo[e].highlightOnHover;this.repeatingSectionInfo[e].highlightOnSelect;this.defaultRepeatingSection&&""!=this.defaultRepeatingSection.rowHoverClassName&&u&&($e.add(c,"mouseover",function(e,t){$acn($(this.id+".CONTENT").parentNode,t.defaultRepeatingSection.rowHoverClassName)},this,!1,this.dialogId+".DIALOG"),$e.add(c,"mouseout",function(e,t){$rcn($(this.id+".CONTENT").parentNode,t.defaultRepeatingSection.rowHoverClassName)},this,!1,this.dialogId+".DIALOG"));var f=$(this.dialogId+".V.R"+i+"."+e+".I"+t+".ERROR");f&&($e.add(f,"mouseover",this._repeatingSectionRowErrorShow,this,!1,this.dialogId+".DIALOG"),$e.add(f,"mouseout",this._repeatingSectionRowErrorHide,this,!1,this.dialogId+".DIALOG"));for(var p in a._w){for(var m=new Array,_="",s=0,g=0,v=0;v<a._w[p].watch.length;v++)if(g=$(this.dialogId+".V.R"+i+"."+a._w[p].watch[v].replace(":A5INSTANCE","_A5INSTANCE"+t)),_="",g&&(_=g.tagName.toLowerCase()),"input"!=_&&"select"!=_&&"textarea"!=_){s=$n("V.R"+i+"."+a._w[p].watch[v].replace(":A5INSTANCE","_A5INSTANCE"+t)),0==s.length&&(s=$n("V.R"+i+"."+a._w[p].watch[v].replace(":A5INSTANCE","_A5INSTANCE"+t)+"[]")),s=this._functionToConstrainElements(s);for(var y=0;y<s.length;y++)m.push(s[y].id)}else m.push(this.dialogId+".V.R"+i+"."+a._w[p].watch[v].replace(":A5INSTANCE","_A5INSTANCE"+t));A5.Watch.add(this.dialogId+".R"+i+"."+p+".I"+t,m,{data:{rowNumber:i,instNumber:t},onChange:a._w[p].onChange})}var b=this.repeatingSectionInfo[e].buttons;if("undefined"!=typeof b)for(var v=0;v<b.length;v++)this._buttons[b[v]].bind(this.dialogId+".V.R"+i+"."+b[v]+"_A5INSTANCE"+t);if("undefined"!=typeof a._r[i-1].hc)for(var w in a._r[i-1].hc)this._hideRSColumnLow(w,t,a._r[i-1].hc[w]);if("undefined"!=typeof a._r[i-1].width)for(var w in a._r[i-1].width)this._hideRSColumnLow(w,t,"width",a._r[i-1].width[w]);this._executeEvent("afterRptSectionRowPrepare",{sectionName:e,rowNumber:t})},_populateSourceComponent:function(){var e={};if(e.controlMap=this.stateInfo.__controlMap,"undefined"==typeof e.controlMap)return alert("Method only appropriate if UX component was opened in a Window using the 'Open UX as an alternate editing view' action"),!1;e.sourceGridRowNumber=this.stateInfo._parentGridRow,e.parentControlType=this.stateInfo.__parentComponentType,e.parentAlias=this.stateInfo.__parentAlias,e.submitParent=this.stateInfo._submitParent,e.windowName=this.stateInfo.__windowname,e.closeAfterSubmit=this.stateInfo.__closeDialogAfterSubmit,e.controlSourceData=this.harvest();for(var t=e.controlMap.split(","),i="",s="",a=[],n=[],o=0;o<t.length;o++)s=t[o],a=s.split(">"),i={},i.source=a[0],i.target=a[1],n.push(i);var r="",l="G",d="1";"G"!=e.parentControlType&&"D"!=e.parentControlType||(r=e.parentAlias+"_GridObj","G"==e.parentControlType&&(d=e.sourceGridRowNumber)),"O"==e.parentControlType&&(r=e.parentAlias+"_DlgObj",d="1",l="O");for(var h=e.controlSourceData.split("&"),c="",u=[],f=[],p="",m="",_="1",g=4,o=0;o<h.length;o++)c=h[o],c.slice(0,g)=="V.R"+_&&(f=c.split("="),p=f.slice(1,99999).join("="),m=f[0].split(".")[2],i={},i.source=m,p=p.replace("%26amp;","&"),p=p.replace("%3D","="),p=p.replace("%26gt;",">"),p=p.replace("%26lt;","<"),i.data=p,u.push(i));for(var v="",y="",b="",o=0;o<n.length;o++)v=n[o].target,v=v.toUpperCase(),y=this._findArrayProp(u,"source",v),y>=0?(b=u[y].data,b=decodeURIComponent(b),"G"==l?"G"==e.parentControlType?window[r].setValue(e.parentControlType,n[o].source,d,b):window[r].setValue(e.parentControlType,n[o].source,b):window[r].setValue(n[o].source,b)):"G"==l?"G"==e.parentControlType?window[r].setValue(e.parentControlType,n[o].source,d,b):window[r].setValue(e.parentControlType,n[o].source,b):window[r].setValue(n[o].source,"");if(e.closeAfterSubmit){var w=window[r].getWindow(e.windowName);w.hide()}"Y"==e.submitParent&&("G"==e.parentControlType&&window[r].submitGridPartRow(d),"D"==e.parentControlType&&window[r].submitDetailView(),"O"==e.parentControlType&&window[r].submit())},_synchronizeDialogData:function(e){var t=e.sourceGridRowNumber,i={};i._parentGridRow=t,this.setStateInfo(i);for(var s=e.controlMap.split(","),a="",n="",o=[],r=[],l=0;l<s.length;l++)n=s[l],o=n.split(">"),a={},a.source=o[0],a.target=o[1],r.push(a);var d=e.controlSourceData.split("&"),h="",c=[],u=[],f="",p="",m=$u.s.toNum(t),_=4;m>=10&&(_=5),m>=100&&(_=6),m>=1e3&&(_=7),m<0&&(_=5);for(var l=0;l<d.length;l++)h=d[l],h.slice(0,_)=="V.R"+t&&(u=h.split("="),f=unescape(u.slice(1,99999).join("=")),p=u[0].split(".")[2],a={},a.source=p,a.data=f,c.push(a));for(var g="",v="",y="",b={},l=0;l<r.length;l++)g=r[l].source,v=this._findArrayProp(c,"source",g),v>=0?(y=c[v].data,b[r[l].target]=y):b[r[l].target]="";this.populate(b),this.prepare();var w={};w.specialDialogMode="none",this._executeEvent("onSynchronizeDialog",{synchronizeType:w.specialDialogMode,obj:w})},_findArrayProp:function(e,t,i){var s=!1;if("string"==typeof i&&(i=i.toLowerCase(),s=!0),s){for(var a=0;a<e.length;a++)if(e[a][t].toLowerCase()==i)return a}else for(var a=0;a<e.length;a++)if(e[a][t]==i)return a;return-1},getParentObject:function(){return""!=this.parentComponentAlias&&("undefined"!=typeof window[this.parentComponentAlias+"_GridObj"]?window[this.parentComponentAlias+"_GridObj"]:"undefined"!=typeof window[this.parentComponentAlias+"_DlgObj"]&&window[this.parentComponentAlias+"_DlgObj"])},getTopParentObject:function(){for(var e=!1,t=this.getParentObject();t;)e=t,t=t.getParentObject();return e},getChildObject:function(e){e=e.toUpperCase();var t="undefined"!=typeof arguments[1]?arguments[1]:"ux";t=t.toLowerCase();var i=!1;return"ux"==t&&(i=window[e+"_DlgObj"],"undefined"==typeof i&&(i=window[this.dialogId+"_"+e+"_DlgObj"]),"undefined"==typeof i&&(i=window[e+"_R1_DlgObj"])),"grid"==t&&(i=window[e+"_GridObj"],"undefined"==typeof i&&(i=window[this.dialogId+"_"+e+"_GridObj"]),"undefined"==typeof i&&(i=window[e+"_R1_GridObj"])),"custom"==t&&(i=window[e+"_CustObj"],"undefined"==typeof i&&(i=window[this.dialogId+"_"+e+"_CustObj"]),"undefined"==typeof i&&(i=window[e+"_R1_CustObj"])),"undefined"==typeof i&&(i=!1),i},listFilterOrder:function(e){var t="filter";"undefined"!=typeof arguments[1]&&(t=arguments[1]);var i={filter:"",order:"",parameters:""},s=this.getControl(e);return s&&("filter"==t?(i.filter=s._state.whereClause,i.parameters=s._state.whereParameters):(i.filter=s._state.filter,i.parameters=s._state.filterParameters),i.order=s._state.order),i},__toggleListCRUDMessage:function(e,t){var i="";if("GUID"==t)var s=$(this.dialogId+".CRUD.IMG."+e),a=$(this.dialogId+".CRUD.MSG."+e);else var s=$(this.dialogId+".CRUD.IMG."+e+"."+t),a=$(this.dialogId+".CRUD.MSG."+e+"."+t);i="none"==a.style.display?"closed":"open","closed"==i?(s.src="images/removeItemSmall.png.a5image",this._embeddedMode&&"chrome"==this.__WPhostName&&(s.src="a5res:images/removeItemSmall.png")):(s.src="images/addItemSmall.png.a5image",this._embeddedMode&&"chrome"==this.__WPhostName&&(s.src="a5res:images/addItemSmall.png")),A5.u.element.toggle(a,{show:{type:"slide",duration:"fast"},hide:{type:"slide",duration:"fast"}})},_assignInstanceId:function(){var e="system:assignInstanceId",t="",i={};i.submitFormData=!1,this.ajaxCallback("G",1,e,"",t,i)},_fixGUID:function(e){return e=e.toLowerCase(),e=e.replace(/-/g,"")},_setInstanceId:function(e){e=this._fixGUID(e);var t="A5-"+this._fixGUID(this.componentGUID)+"-InstanceId";try{localStorage.setItem(t,e)}catch(i){}this.__instanceId=e},_getInstanceId:function(){var e="undefined"==typeof arguments[0]||arguments[0],t="A5-"+this._fixGUID(this.componentGUID)+"-InstanceId",i="";try{i=localStorage.getItem(t)}catch(s){}return this.__instanceId=i,null==i&&e&&this._assignInstanceId(),i},_listRowSelect:function(e,t){if("undefined"!=typeof this._listsWithLinkedForms){var i=this._listsWithLinkedForms[e.toUpperCase()];if("undefined"==typeof i)return!1;if(!t){var t=this.getControl(e);if(!t)return!1}for(var s=t.selection[0],a="",n=0;n<i.length;n++)a=i[n],this._forms[a].row=s,"undefined"==s||0==t._data.length?(this._forms[a].row=-1,this.formViewNewRecord(a)):(this._forms[a].row=s,this.formViewRefresh(a))}},synchronizeComplete:function(e){var t=A5.ajax.buildURLParam("_guids",JSON.stringify(e));this.ajaxCallback("G",1,"system:synchronizationcomplete","",t)},_ls_manager_showStats:function(e){var t=$("__LOCALSTORAGEKEYCOUNT");t&&(t.innerHTML=e.keyCount);var i=$("__LOCALSTORAGESIZE");i&&(i.innerHTML=e.size);var s=$("__LOCALSTORAGEINFO");s&&(s.style.display="")},_ls_getStats:function(e){var t=0,i=0;if(e)for(var t=e._data.length,i=0,s=0;s<e._data.length;s++)i+=e._data[s].size;var a={};return a.size=i,a.keyCount=t,a},_ls_manager:function(e){var t=this.getControl(e.listName),i=e.prompt;if("undefined"==typeof i&&(i=!0),"populateListAll"==e.action){var s=this._ls_getData("a");t.populate(s.data),this.__localStorageManagerLast=e.action}else if("populateListThisNamespace"==e.action){var s=this._ls_getData("t");t.populate(s.data),this.__localStorageManagerLast=e.action}else if("populateNotThisNamespace"==e.action){var s=this._ls_getData("o");t.populate(s.data),this.__localStorageManagerLast=e.action}else if("delete"==e.action.substr(0,6)){var a={},n=!1;if("deleteKey"==e.action){var o=t.selection[0],r=!1;"undefined"==typeof o&&(r=!0);var l=t.getData(t.selection[0]);if(0==t._data.length&&(r=!0),r)return alert("You must first select a row in the list."),!1;a.data=[l],n=!0}else"deleteAllKeys"==e.action?a=this._ls_getData("a"):"deleteAllKeysForThisComponent"==e.action?a=this._ls_getData("t"):"deleteAllKeysExceptThisComponent"==e.action&&(a=this._ls_getData("o"));var d=!0;if(n?i&&(d=confirm("Delete 1 key?")):i&&(d=confirm("Delete "+a.data.length+" keys?")),d)for(var h=0;h<a.data.length;h++)localStorage.removeItem(a.data[h].key),t&&t.removeRows([a.data[h].key])}if(t){var c=this._ls_getStats(t);this._ls_manager_showStats(c)}},_ls_getData:function(e){"undefined"==typeof e&&(e="a");var t="";if("a"!=e){var i=this._localStorageSettings;t=i.namespace}for(var s=localStorage.length,a=[],n="",o="",r=0,l=0,d="",h=0;h<s;h++)o=localStorage.key(h),n=localStorage.getItem(o),r=n.length,d=!1,"a"==e&&(d=!0),"aa"==e&&0==o.indexOf("ALPHA_")&&(d=!0),"t"==e&&0==o.indexOf(t+".")&&(d=!0),"o"==e&&0!=o.indexOf(t+".")&&(d=!0),"oa"==e&&0==o.indexOf("ALPHA_")&&0!=o.indexOf(t+".")&&(d=!0),"v:t"==e&&0==o.indexOf(t+"._VARIABLES")&&(d=!0),"v:a"==e&&o.indexOf("._VARIABLES")>0&&(d=!0),"v:o"==e&&o.indexOf("._VARIABLES")>0&&0!=o.indexOf(t+"._VARIABLES")&&(d=!0),"lists:t"==e&&0==o.indexOf(t+".LIST.")&&(d=!0),"lists:a"==e&&o.indexOf(".LIST.")>0&&0==o.indexOf("ALPHA_")&&(d=!0),"lists:o"==e&&o.indexOf(".LIST.")>0&&0==o.indexOf("ALPHA_")&&0!=o.indexOf(t+".LIST.")&&(d=!0),d&&(a.push({key:o,size:r}),l+=r),delete n;var c={};return c.data=a,c.size=l,c.keyCount=a.length,c},_ls_deleteKeys:function(e){var t="";if(t=e.constructor==Array?e:e.data,"undefined"==typeof t)return!1;for(var i=0;i<t.length;i++)localStorage.removeItem(t[i].key)},_restoreListsFromLocalStorage:function(){var e=this._listControls,t=this._localStorageSettings,i=this._embeddedMode;if(i&&"filesystem"==t.workingPreviewTestingMode.toLowerCase()){var s=A5.ajax.buildURLParam("_lists",JSON.stringify(e));this.ajaxCallback("G",1,"system:workingPreviewSimulateLocalStorageRestoreLists","",s)}else for(var a=0;a<e.length;a++)this._restoreListFromLocalStorage(e[a])},_restoreListsWorkingPreviewLow:function(e,t){var i={};i.data=JSON.stringify(t),this._executeEvent("localStorageDecryption",i),"undefined"!=typeof i.data&&(t=JSON.parse(i.data));var s=t.data;"undefined"!=typeof t.minified&&1==t.minified&&(s=A5.u.json.expand(s,t.map));var a=t.state,n={};"undefined"!=typeof t.userData&&(n=t.userData);var o=this.getControl(e);return!!o&&(this._restoreListState(o,a),o.populate(s,!1,!1,!1),o._hasBeenRendered=!0,i={},i.listId=e,i.userData=n,this._list_executeEvent(e,"onRestoreFromLocalStorage",i),void this.refreshClientSideComputations())},_restoreListFromLocalStorage:function(e){var t=this._localStorageSettings,i=t.namespace+".LIST."+e.toUpperCase(),s={};s.listId=e,this._readFromLocalStorage(i,"_restoreListLow",JSON.stringify(s))},_restoreListLow:function(e,t){if("undefined"==typeof e)return!1;if(null==e)return!1;this._restoringVariables=!0;var i={};i.data=JSON.stringify(e),this._executeEvent("localStorageDecryption",i),"undefined"!=typeof i.data&&(e=JSON.parse(i.data));var s=e.data;"undefined"!=typeof e.minified&&1==e.minified&&(s=A5.u.json.expand(s,e.map));var a=e.state,n={};"undefined"!=typeof e.userData&&(n=e.userData);var o=this.getControl(t.listId);return o?(this._restoreListState(o,a),o._restoringList=!0,o.populate(s,!1,!1,!1),o._restoringList=!1,o._hasBeenRendered=!0,"undefined"!=typeof t._route&&o._setRoute&&o._setRoute(t._route),i={},i.listId=t.listId,i.userData=n,this._list_executeEvent(t.listId,"onRestoreFromLocalStorage",i),this.refreshClientSideComputations(),void(this._restoringVariables=!1)):(this._restoringVariables=!1,!1)},_restoreVariablesFromLocalStorage:function(){var e=this._localStorageSettings,t=e.namespace+"._VARIABLES";this._readFromLocalStorage(t,"_restoreVariablesLow")},_restoreVariablesLow:function(e){if("undefined"==typeof e)return!1;if(null==e)return!1;this._restoringVariables=!0;var t={};t.data=JSON.stringify(e),this._executeEvent("localStorageDecryption",t),"undefined"!=typeof t.data&&(e=JSON.parse(t.data));for(var i=e.data,s=e.dirty,a={},n=0;n<s.length;n++)a[s[n]]=i[s[n]],delete i[s[n]];if("undefined"!=typeof e.routes)for(var o=e.routes,r="",n=0;n<o.length;n++){if(r=this.getControl(o[n].listId),!r)return this._restoringVariables=!1,!1;r._setRoute(o[n].route)}this.populate(i),this.populate(a,1,!1,!1,!0);var l={};l.userData=e.userData,l.data=e.data,this._executeEvent("onRestoreVariablesFromLocalStorage",l),this._restoringVariables=!1},_readFromLocalStorage:function(e,t){var i=arguments[2],s=null;"undefined"==typeof i&&(i=""),"function"==typeof i&&(s=arguments[2],i="");var a=this._embeddedMode,n=this._localStorageSettings,o={};if(o.key=e,o.callbackFunctionName=t,o.jsonOptions=i,a&&"filesystem"==n.workingPreviewTestingMode.toLowerCase()){"function"==typeof t&&(o.callbackFunctionName="__tempfunction",this.__tempfunction=t);var r=A5.ajax.buildURLParam("_localStorageRead",JSON.stringify(o));this.ajaxCallback("G",1,"system:workingPreviewSimulateLocalStorageRead","",r)}else{var l=localStorage.getItem(e);if(null==l)return!1;"compressed:"==l.substring(0,11)&&(l=l.substring(11),l=A5.inflate(l));var d=JSON.parse(l),h={};if("undefined"!=typeof d.route&&(h=d.route),""!=i){var c=JSON.parse(i);c._route=h,this[t](d,c)}else"string"==typeof t?this[t](d):(t.call(this,d),delete l,delete d)}},_restoreFromLocalStorage:function(){var e=this._localStorageSettings,t=e.restore;return"undefined"!=typeof t&&(t.data&&this._restoreListsFromLocalStorage(),t.variables&&this._restoreVariablesFromLocalStorage(),void(t.state&&this._executeEvent("onRestoreComponentStateFromLocalStorage",{})))},_persistToLocalStorageLow:function(e,t){var i=this._embeddedMode,s=this._localStorageSettings,a={};a.data=t,this._executeEvent("localStorageEncryption",a),"undefined"!=typeof a.data&&(t=a.data);var n=s.namespace+"._INFO",o=new Date,r=JSON.stringify({lastUsed:o,friendlyName:s.friendlyName,description:s.description,version:s.__version}),l=!1;if(i&&"Filesystem"==s.workingPreviewTestingMode){var d={};d.key=e,d.keyValue=t,d.infoKey=n,d.infoData=r;var h=A5.ajax.buildURLParam("_localStorage",JSON.stringify(d)),c={};return"function"==typeof arguments[2]&&(c.onComplete=arguments[2],c.errorFunction=function(){},c.deviceOfflineFunction=function(){}),this.ajaxCallback("G",1,"system:workingPreviewSimulateLocalStorage","",h,c),!0}try{if(l=this._localStorageSettings.compressListData,"undefined"==typeof l&&(l=!1),l){var u=A5.deflate(t);t="compressed:"+u}localStorage.setItem(e,t)}catch(f){return!1}var p=localStorage.getItem(e),m=t==p;return!m&&l&&Math.abs(p.length-t.length)<2&&(m=!0),m&&localStorage.setItem(n,r),delete p,m},persistVariablesToLocalStorage:function(e){if(this._restoringVariables)return!1;"undefined"==typeof e&&(e={});var t=this._localStorageSettings;if(!t.persistVariableValues)return!1;for(var i=t.namespace+"._VARIABLES",s=this._listControls,a=[],n=0;n<s.length;n++){var o=this.getControl(s[n]);o&&o._getRoute&&o.__flagPersist&&a.push({listId:o.listVariableName,route:o._getRoute()})}this._executeEvent("onBeforePersistControlValuesToLocalStorage",e),"undefined"==typeof e.userData&&(e.userData="");var r=this._harvestVariables();if("undefined"!=typeof this._noPersist)for(var n=0;n<this._noPersist.length;n++)delete r.data[this._noPersist[n]];r.userData=e.userData,r.version=t.__version,r.routes=a,"undefined"==typeof r.version&&(r.version=1);var l=JSON.stringify(r),d=this._persistToLocalStorageLow(i,l);e.success=d,this._executeEvent("onPersistControlValuesToLocalStorage",e)},_restoreListState:function(e,t){A5.u.json.postparse(t),e.filter=t.filter,e.order=t.order,e.group.auto=t.group,e.disabled=t.disabled,e.readOnly=t.readOnly,e._state={},e._state.filter=t.ssFilter,e._state.filterParameters=t.ssFilterParameters,e._state.order=t.ssOrder,e._state.recordCountFormatted=t.ssRecordCountFormatted;var i=$(this.dialogId+"."+e.listVariableName+".RECORDCOUNT");i&&(i.innerHTML=e._state.recordCountFormatted)},persistListToLocalStorage:function(e){var t=arguments[1];"undefined"==typeof t&&(t={});var i=t.mode;if("undefined"==i&&(i=""),"string"==typeof e){var s=this.getControl(e);if(!s)return!1}else{var s=e;e=s.listVariableName}var a={};"undefined"!=typeof s.__userData&&(a=s.__userData),delete s.__userData;var n={},o={};n.filter=s.filter,n.order=s.order,n.group=s.group.auto,$u.o.assign(o,n),"undefined"!=typeof s._state&&("undefined"!=typeof s._state.filter&&(o.ssFilter=s._state.filter),"undefined"!=typeof s._state.filterParameters&&(o.ssFilterParameters=s._state.filterParameters),"undefined"!=typeof s._state.order&&(o.ssOrder=s._state.order),"undefined"!=typeof s._state.recordCountFormatted&&(o.ssRecordCountFormatted=s._state.recordCountFormatted)),o.disabled=s.disabled,o.readOnly=s.readOnly,A5.u.json.preparse(o);var r=s._data,l=this._localStorageSettings,d={},h=!1;if("undefined"!=typeof l.minify&&(h=l.minify),h){var c={},u={},f=function(e,t){return""!=t};u=A5.u.json.compress(r,c,f),d.data=u,d.minified=!0,d.map=c}else d.data=r,d.minified=!1;d.state=o,d.userData=a,d.version=s.__version;var p=JSON.stringify(d),l=this._localStorageSettings,m=l.namespace+".LIST."+e.toUpperCase(),_=this._persistToLocalStorageLow(m,p);return delete p,_},_wce:function(e,t){var i=this.getControl(e),s=arguments[2],a=arguments[3];i&&i._showWCErrorMore(t,s,a)},_getListCRCs:function(e){var t=this.getControl(e);if("undefined"==typeof t)return[];var i=t._data;if(0==i.length)return"";var s=[];if("undefined"!=typeof i[0].__primaryKey&&"undefined"!=typeof i[0].__a5crc)for(var a=0;a<i.length;a++)s.push([i[a].__primaryKey,i[a].__a5crc]);return s},synchronizeLists:function(){var e="undefined"!=typeof arguments[0]?arguments[0]:{},t=this._listsDV;if("undefined"==typeof t)return!1;for(var i="",s="",a=0;a<t.length;a++)i=this.getControl(t[a]),s=i.parentList,"undefined"==typeof s&&(s=""),""==s&&this.saveListEdits(t[a],e)},_saveNextBatch:function(e,t,i,s,a){var n=(s-i)/t*100,o=this.getControl(e),r={};r.totalDirtyRows=t,r.batchSize=i,
r.startingRow=s,r.pctComplete=n,r.countObject=a,o._setSynchProgress(n);var l=this._list_executeEvent(e,"detailView.afterSynchronizeListBatch",r);return o._flagCancelBatchSynchronize?(o._hideSynchProgress(),this._list_executeEvent(e,"detailView.afterCancelBatch",r),!1):Number(s)>Number(t)?(o._hideSynchProgress(),this._list_executeEvent(e,"detailView.afterSynchronizeListBatchEnd",r),!1):void(l&&this.saveListEdits(e,{batchSize:i,_startingRow:s,_countObject:r.countObject}))},countRecordsToSynch:function(e){var t=listObj.allParentLists,i=e;"undefined"!=typeof t&&t.length>0&&(i=t[t.length-1]);var s=this.getControl(i);if(!s)return{};var a=s._data,n={};n.count=0,n.updatedRecords=0,n.newRecords=0,n.deletedRecords=0;for(var o=0;o<a.length;o++)a[o]._isDirty&&(n.count=n.count+1,"undefined"!=typeof a[o]._isDeleted&&a[o]._isDeleted&&(n.deletedRecords=n.deletedRecords+1),"undefined"!=typeof a[o]._isNewRow&&a[o]._isNewRow&&(n.newRecords=n.newRecords+1));return n.updatedRecords=n.count-n.newRecords-n.deletedRecords,n},saveListEdits:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:{},i="",s=this.getControl(e);if("undefined"==typeof s)return!1;if(!s._hasDetailView)return alert("List does not have a Detail View."),!1;var a=!1;a=t.allChildRecords;var n=!1;"undefined"!=typeof s._submitLocationInfo&&(n=s._submitLocationInfo);var o=s.allParentLists;if("undefined"!=typeof o){if(0==n)for(var r=0;r<o.length;r++)this.getControl(o[r])._submitLocationInformation&&(n=!0);if(o.length>0){var l=o[o.length-1];e=l,s=this.getControl(e)}}var d=!0;"undefined"!=typeof t.resetMediaFileUploadErrors&&(d=t.resetMediaFileUploadErrors),d&&s._resetMediaFileUploadErrorsFlag&&s._resetMediaFileUploadErrorsFlag(s._data);var h=!0;"undefined"!=typeof t.checkForMediaFiles&&(h=t.checkForMediaFiles);var c=!1;if("undefined"!=typeof this._cordovaReady&&(c=this._cordovaReady),c||(h=!1),h){var u=s._harvestMediaFields();if(u.length>0){s._mediaFiles=u;var f=this._list_executeEvent(e,"detailView.beforePhoneGapMediaFilesUploaded",{array:u});return 0!=f&&(s._cleanMediaFiles=s._harvestMediaFields({cleanOnly:!0}),s._syncMediaFiles(),!1)}}var p=s._getRoute();s.__currentRoute=p;var u=s._getControlsInDv();if(""==u&&(u=[]),"undefined"==typeof u)return!1;var m=s.pushServerEditsToClient,_=0,g=1,v="",y="all";"undefined"!=typeof t.rows&&(y=t.rows);var b="",w=-1;if("current"==y){if(0==s.listRowIsDirty())return!0;b=s.harvestList(!0);var I=[];I.push(s.harvestListRow(-1,{flagSumbmitAllChildRecords:a}))}else if(y.constructor==Array){for(var I=[],r=0;r<y.length;r++)if(s.listRowIsDirty(Number(y[r]))&&I.push(s.harvestListRow(Number(y[r]),{flagSumbmitAllChildRecords:a})),b=s.harvestList(!0),0==I.length)return!0}else{"undefined"!=typeof s._synchBatchSize&&(_=s._synchBatchSize),"undefined"!=typeof t.batchSize&&(_=t.batchSize),"undefined"!=typeof t._startingRow&&(g=t._startingRow),"undefined"!=typeof t._countObject&&(v=JSON.stringify(t._countObject));var I=s.harvestList(!1,{batchSize:_,startingRow:g,flagSumbmitAllChildRecords:a});w=s.__arrDirtyRows.length}var C={};C.size=Number(_),C.totalDirtyRows=w,C.startingRow=g,C.countObject=v;var f=this._list_executeEvent(e,"detailView.canSynchronizeList",{data:I,batchSize:C.size,totalDirtyRows:C.totalDirtyRows,startingRow:C.startingRow});if(0==f)return!1;if(s._flagCancelBatchSynchronize=!1,C.size>0&&1==C.startingRow&&(s._setSynchProgress(1),this._list_executeEvent(e,"detailView.beforeSynchronizeListBatchStart",{batchSize:C.size,totalDirtyRows:C.totalDirtyRows,startingRow:C.startingRow})),i=[],i.push(A5.ajax.buildURLParam("_batchInfo",JSON.stringify(C))),i.push(A5.ajax.buildURLParam("_listData",JSON.stringify(I))),i.push(A5.ajax.buildURLParam("_listRoute",JSON.stringify(p))),i.push(A5.ajax.buildURLParam("_dirtyRowInList",JSON.stringify(b))),"undefined"!=typeof s._parentListForNotPreLoadedData){var A=this.getControl(s._parentListForNotPreLoadedData);if(A){var N=A.selection[0];if("undefined"!=typeof N){var $=A._data[N];i.push(A5.ajax.buildURLParam("_parentListData",JSON.stringify($))),i.push(A5.ajax.buildURLParam("_linkingFields",JSON.stringify(s._linkingKeys)))}}}m?i.push(A5.ajax.buildURLParam("_incrementalRefresh","true")):i.push(A5.ajax.buildURLParam("_incrementalRefresh","false"));var x=!1;"undefined"!=typeof t.fixMediaFileReferences&&(x=t.fixMediaFileReferences),i.push(A5.ajax.buildURLParam("_fixMediaFileReferences",x)),i=i.join("&"),i=i+"&_listName="+e+"&_listControls="+u.join(",");var E={};n&&(E.getLocationData=!0,E.enableHighAccuracy=!0,E.imeout=15e3,E.maximumAge=3e4),E.flagSaveListData=!0,this.ajaxCallback("G","","system:persistListData","",i,E)},_getDirtyLists:function(){for(var e=[],t=0;t<this._listsDV.length;t++)this.getControl(this._listsDV[t]).listIsDirty()&&e.push(this._listsDV[t]);return e},_hasDirtyLists:function(){var e=this._getDirtyLists();return 0!=e.length},_isControlInListDetailView:function(e){return""!=this._getListForDetailViewControl(e)},_getListForDetailViewControl:function(e){e=e.toUpperCase();for(var t="",i="",s=-1,a=0;a<this._listsDV.length;a++)if(t=this.getControl(this._listsDV[a]),i=t._getControlsInDv(),s=$u.a.find(i,e),s>-1)return this._listsDV[a];return""},fixCase:function(e,t){e=e.toLowerCase();for(var i=0;i<t.length;i++)if(t[i].toLowerCase()==e){e=t[i];break}return e},_fixDVValue:function(e,t,i){if(null==e)return e;var s=this._getControlType(t).toLowerCase();if("signaturecapture"==s||"image"==s){var a=i.listObj;if(!a&&(a=this.getControl(i.listVariableName),!a))return e;var n=a._getListFieldFromControl(t),o=this._findArrayProp(a._listFields,"name",n);if(o>-1&&"undefined"!=typeof a._listFields[o].image&&"undefined"!=typeof a._listFields[o].image.embedded)if(a._listFields[o].image.embedded){var r=a._listFields[o].image.type,l="data:image/"+r+";base64,",l=l.toLowerCase();e=l+e}else e=e.replace(/\\/g,"/");"signaturecapture"==s&&this._functions._toggleCanvas(t.toUpperCase(),"IMAGE")}return e},_isEmbeddedImage:function(e,t){var i=this._findArrayProp(t._listFields,"name",e);if(i>-1)return"undefined"!=typeof t._listFields[i].image&&!!t._listFields[i].image.embedded},_getListFieldProps:function(e,t){for(var i=-1,s=0;s<e._listFields.length;s++)if(e._listFields[s].name==t){i=s;break}return i>-1?e._listFields[i]:{}},_populateUXControlsWithListData:function(e,t){var i="undefined"!=typeof arguments[2]?arguments[2]:{},s=!1,a=!1;"undefined"!=typeof i.ajaxCallback&&(s=i.ajaxCallback),"undefined"!=typeof i.skipDirtyFields&&(a=i.skipDirtyFields);var n=!1;"undefined"!=typeof i.listObj&&(n=i.listObj);var o="";"undefined"!=typeof n.dirtyControlClassName&&(o=n.dirtyControlClassName);var r="container";if("object"==typeof t){r="map";var l=t}else var d=t;var h=!1,c="",u="";if("container"==r){var f=[];for(var p in e)f.push(p);var m=this.getControlsInContainer(d);if(m.constructor!=Array)return alert("Invalid List Detail View container: "+d),!1;for(var _="",g="",v="",y=0;y<m.length;y++){if(h=!1,"string"!=typeof m[y])return alert("Invalid List Detail View container: "+d),!1;if(g=!0,_=this.fixCase(m[y],f),"undefined"!=typeof e[_]&&(a&&(v=this.getControlDirty(m[y].toUpperCase()),v&&(g=!1)),flagDirty=!1,A=this.getPointer(m[y]),""!=o&&($rcn(A,o),"undefined"!=typeof e._oldData&&0!=e._oldData&&e._oldData[_]!=e[_]&&(flagDirty=!0,$acn(A,o))),h=!1,u=this.columnInfo[_.toUpperCase()],"undefined"!=typeof u&&(h=u.isArray),c=e[_],h&&"string"==typeof c&&(c=c.split(",")),g)){c=this._fixDVValue(c,m[y],i),n&&(I=this._getListFieldProps(n,_),C="","undefined"!=typeof I.onDetailViewPopulate&&(C=I.onDetailViewPopulate),""!=C&&(n._value=c,c=Function(C).call(n,c)));var b=this._getBase64Prefix(n,_);""!=b&&(c=b+c),this.originalValues[0][m[y].toUpperCase()]=c,this.setValue(m[y],c,!1)}}}else{var w=-1,g="",v="",I="",C="",A="";for(var p in e)if(g=!0,w=this._findArrayProp(l,"field",p),flagDirty=!1,w>-1&&(A=this.getPointer(l[w].control),""!=o&&($rcn(A,o),"undefined"!=typeof e._oldData&&0!=e._oldData&&e._oldData[p]!=e[p]&&(flagDirty=!0,$acn(A,o))),a&&(v=this.getControlDirty(l[w].control.toUpperCase()),v&&(g=!1)),h=!1,u=this.columnInfo[l[w].control.toUpperCase()],"undefined"!=typeof u&&(h=u.isArray),c=e[p],h&&"string"==typeof c&&(c=c.split(",")),g)){c=this._fixDVValue(c,l[w].control,i),n&&(I=this._getListFieldProps(n,p),C="","undefined"!=typeof I.onDetailViewPopulate&&(C=I.onDetailViewPopulate),""!=C&&(n._value=c,c=Function(C).call(n,c)));var b=this._getBase64Prefix(n,p);""!=b&&(c=b+c),this.originalValues[0][l[w].control.toUpperCase()]=c,this.setValue(l[w].control,c,!1)}}if(s){var f=[];f.push(A5.ajax.buildURLParam("__pk",e.__primaryKey)),f.push(A5.ajax.buildURLParam("__listId",i.listId));var N=f.join("&"),$="system:refreshListDetailView";this.ajaxCallback("G",1,$,"",N)}},_getBase64Prefix:function(e,t){for(var i="",s=-1,a=0;a<e._listFields.length;a++)if(e._listFields[a].name==t){s=a;break}return s>-1&&"undefined"!=typeof e._listFields[s].base64Prefix&&(i=e._listFields[s].base64Prefix),i},fetchDataCacheFiles:function(e,t,i,s,a,n,o){var r=!1;"undefined"!=typeof i.javascript&&(r=i.javascript.beforeDownloadBegin),"function"==typeof r&&r.call(this,{totalFileSize:i.totalFileSize,fileCount:i.fileCount}),"undefined"!=typeof t&&""!=t||(t="__AADataCache"),"undefined"==typeof i&&(showProgress=!1,i={}),"undefined"==typeof i.showProgress&&(i.showProgress=!1),"undefined"==typeof i.color&&(i.color="#9fa1e8"),"undefined"==typeof i.width&&(i.width="300px;"),"undefined"==typeof i.placeHolder&&(i.showProgress=!1),progressElement=i.placeHolder;for(var l=[],d=0;d<e.length;d++)l.push({filename:e[d]});var h={totalFileSize:i.totalFileSize,targetFolder:t,showProgress:i.showProgress,forceDownloadIfFileExists:!0,onComplete:function(e){if(""==s){var t=n._ajaxCallbackCompleteCode,i=t[o].success;i.call(),delete t[s]}else{var t=n._ajaxCallbackCompleteCode,i=t[s].success,r=t[s].fail;delete t[s],n.getDataCacheItemFromFile(a,i,r)}},onError:function(e,t){alert("Error fetching files in data cache")},progress:{color:i.color,width:i.width,allowCancel:!1,progressElement:progressElement}};this.phoneGapFileDownload(l,h)},getDataCacheItemFromFile:function(e,t,i){var s="__AADataCache",a=s+"/A5SessionFile/"+e+".json";this.phoneGapReadFile(a,function(e){new Date;try{e=JSON.parse(e);new Date;t(e)}catch(i){alert("Error - Could not JSON.parse data in file")}},function(){alert("failed")})},getFromDataCache:function(e,t,i,s,a){var n=arguments[5];"undefined"==typeof n&&(n={});var o=window[this.dialogId+"_DlgObj"],r=o._dataCache[e];if("undefined"==typeof r)return alert("Item not defined: '"+e+"'"),!1;"undefined"==typeof s&&(s=""),"undefined"==typeof a&&(a="");var l=JSON.stringify(n);if("{}"==l&&(l=""),s+a+l!="")var d=function(e){e=A5FilterPropertyArray(e,s,a,n),t(e)};else var d=t;var h=function(t){t?r.persisted=!0:r.persisted=!1,o._getFromDataCacheLow(e,d,i)};if(0==r.delayed){var c=[];$u.o.assign(c,r.data),d.call(this,c)}else this._isDataItemInCache(e,h)},_getFromDataCacheLow:function(e,t,i){var s=this._dataCache;if("undefined"==typeof s)return"function"==typeof i?i.call():alert("UX does not have a data cache"),!1;if(s=s[e],"undefined"==typeof s)return"function"==typeof i?i.call():alert("Item not found in data cache: "+e),!1;if(flagMakeAjaxCallback=!1,0==s.persist?0==s.delayed?alert("data is available in _dc - should never get here"):flagMakeAjaxCallback=!0:s.persisted||(flagMakeAjaxCallback=!0),flagMakeAjaxCallback){var a="_item="+e,n=A5.UUID();a=a+"&_callbackId="+n;var o="no";"undefined"!=typeof window.cordova&&(o="yes"),a=a+"&_phoneGapLoaded="+o;var r=this._ajaxCallbackCompleteCode;r[n]={},r[n].success=t,r[n].fail=i;var l={};l.errorFunction=function(){},l.onComplete=function(){},l.deviceOfflineFunction=function(){},this.ajaxCallback("","","__A5SystemRefreshDataCacheItem","",a,l)}else{var d=s.persistWhere,h=!1;if("undefined"!=typeof window.cordova&&(h=!0),!h)if("FileSystemPreferred"==d)d="LocalStorage";else if("FileSystem"==d)return alert("Cannot read item from file system when not running in PhoneGap."),i.call(),!1;if("LocalStorage"==d){var c=this._localStorageSettings,u=c.namespace,f=u+"._dataCache_"+e;this._readFromLocalStorage(f,t,i)}else this.getDataCacheItemFromFile(e,t,i)}},_isDataItemInCache:function(e,t){var i=!1,s=this._dataCache[e];if("undefined"!=typeof window.cordova&&(i=!0),i&&"LocalStorage"==s.persistWhere&&(i=!1),i)this.phoneGapGetDirectoryRecurse("__AADataCache",function(i){for(var a="__AADataCache/A5SessionFile/"+e+".json",n=-1,o="",r=0;r<i.length;r++)if(o=i[r].fullPath,"/"==o.substring(0,1)&&(o=o.substring(1)),i[r].isFile&&o==a){n=r;break}n==-1?(s&&(s.foundInCache=!1),t(!1,e)):(s&&(s.foundInCache=!0),t(!0,e))},function(i){s&&(s.foundInCache=!1),t(!1,e)});else{var a=this._localStorageSettings,n=a.namespace,o=n+"._dataCache_"+e,r=this._embeddedMode,l=this._localStorageSettings;if(r&&"filesystem"==l.workingPreviewTestingMode.toLowerCase())s&&(s.foundInCache=!1),t(!1,e);else{for(var d=-1,h=0,c=localStorage.length;h<c;++h)if(localStorage.key(h)==o){d=h;break}var u=!1;d>-1&&(u=!0),s&&(s.foundInCache=u),t(u,e)}}},_fetchItemsNotInCache:function(e,t){function i(e,i){r=-1;for(var n=0;n<a.length;n++)if(a[n].item==i){a[n].found=e;break}for(var o=!0,n=0;n<a.length;n++)if(null==a[n].found){o=!1;break}if(o){for(var l=[],n=0;n<a.length;n++)a[n].found||"undefined"!=typeof s._dataCache[a[n].item]&&l.push(a[n].item);0==l.length?t.call():s.refreshDataCacheItem(l.join(","),t)}}var s=window[this.dialogId+"_DlgObj"];e=e.split(",");for(var a=[],n=0;n<e.length;n++)a.push({item:e[n],found:null});for(var o="",r="",n=0;n<a.length;n++)o=a[n].item,s._isDataItemInCache(o,i)},_removeUndefinedItems:function(e){e=e.split(",");for(var t=[],i="",s=0;s<e.length;s++)i=this._dataCache[e[s]],"undefined"!=typeof i&&t.push(e[s]);return t.join(",")},readDataCacheItems:function(e,t){e=this._removeUndefinedItems(e);var i=window[this.dialogId+"_DlgObj"],s=function(){i.readDataCacheItems_low(e,t)};i._fetchItemsNotInCache(e,s)},readDataCacheItems_low:function(e,t){var i=window[this.dialogId+"_DlgObj"],s={},a=[];e=e.split(",");for(var n=0;n<e.length;n++)a.push({item:e[n],data:null,complete:null});var o="";this.__dataItemRead=function(e,i){for(var n=0;n<a.length;n++)a[n].item==i&&(a[n].complete=!0,s[i]=e);for(var o=!0,n=0;n<a.length;n++)if(null==a[n].complete){o=!1;break}o&&(t.call(this,s),delete a,delete s)};for(var n=0;n<a.length;n++){o=a[n].item;var r="window['"+this.dialogId+"_DlgObj'].__dataItemRead(data,'"+o+"');",l=Function("data",r);i.getFromDataCache(a[n].item,l,"","","")}},_runGetDataCallback:function(e,t,i){var s=this._ajaxCallbackCompleteCode;if("undefined"==typeof s)return!1;var a=s[e];if("undefined"==typeof a)return!1;var n=this._dataCache[t];if("undefined"==typeof n)return!1;if(0==n.hasError?type="success":type="fail",a="success"==type?a.success:a.fail,"undefined"==typeof i){var o=this._dataCache[t].data,r=[];$u.o.assign(r,o),a.call(this,r)}else a.call(this,i);delete s[e]},refreshDataCacheItem:function(e){var t="_item="+e,i="no";"undefined"!=typeof window.cordova&&(i="yes"),t=t+"&_phoneGapLoaded="+i;var s={};s.errorFunction=function(){},s.onComplete=function(){},s.deviceOfflineFunction=function(){};var a=arguments[1];if("function"==typeof a){var n=A5.UUID(),o=this._ajaxCallbackCompleteCode;o[n]={},o[n].success=a,t=t+"&_onCompleteDataItemRefresh="+n}this.ajaxCallback("","","__A5SystemRefreshDataCacheItem","",t,s)},addDataItemToLocalStorage:function(e,t,i){var s=this._localStorageSettings,a=s.namespace,n=a+"._dataCache_"+e,o=this._persistToLocalStorageLow(n,JSON.stringify(t)),r=this._dataCache[e];if(0==o){var l=r.persistToLocalStorageFailed;l.call()}else""!=i&&(this._runGetDataCallback(i,e,t),delete t)},_getControlType:function(e){var t=this._getControlInfo(e),i=!1,s="";return"undefined"!=typeof t.info&&(i=t.info),i&&(s=i.controlType),s},_updateListDataFromUXControls:function(e,t){var i="undefined"!=typeof arguments[2]?arguments[2]:{};"undefined"==typeof i.synchronize&&(i.synchronize=!1),"undefined"==typeof i.programmatic&&(i.programmatic=!1),"undefined"==typeof i.setFocusToTargetRow&&(i.setFocusToTargetRow=!1);var s=!1,a=this.getControl(e),n=a._listFields;if(i.programmatic){s=!0;var o=i.data,r=i.primaryKeyOrRowNumber,l=i.setFocusToTargetRow,d=!1;null==r&&(d=!0);var h="primaryKey";if(!d){var c=!1;"number"==typeof r&&(h="rowNumber");var u=a.selection[0],f="";if("undefined"!=typeof u){var p=a.getData(u),m=[];for(var _ in o)m.push(_);var g=[];for(var _ in p)g.push(_);for(var v=0;v<m.length;v++)g.indexOf(m[v])==-1&&(p[m[v]]="");f="primaryKey"==h?p.__primaryKey:u,f==r&&(c=!0)}}}if(s){var y=r,b={},w={};if(w=o,!d){if(b=a.getData(r),"undefined"==typeof b)return!1;var I=a.selection[0],C="";"undefined"!=typeof I&&(C=a._values[I]);var A=!1;"undefined"!=typeof b._isNewRow&&(A=b._isNewRow)}}else{if("object"==typeof t){var N=t;method="map"}else{var $=t;method="container"}for(var x=[],v=0;v<n.length;v++)x.push(n[v].name);var E=!1,R="",D="",d=!1,b="",I=a.selection[0];"undefined"!=typeof a._selectedRow&&(I=a._selectedRow,I==-1&&(I=void 0)),0==a._data.length&&(d=!0);var y=I,T="",A=!1;"undefined"==typeof I?d=!0:(b=a.getData(I),"undefined"!=typeof b&&"undefined"!=typeof b._isNewRow&&(A=b._isNewRow));var S=[],L="";if("container"==method)for(var O=this.getControlsInContainer($),k="",w={},v=0;v<O.length;v++){L="",k=this.fixCase(O[v],x),F=this._getControlType(O[v]).toLowerCase();var M=!1;if(("signaturecapture"==F||"image"==F)&&(M=this._isEmbeddedImage(a._getListFieldFromControl(O[v]),a),M&&S.push(a._getListFieldFromControl(O[v])),"image"==F)){var L=$ga(this.dialogId+".V.R1."+O[v].toUpperCase()+"_HIDDENA5FN","a5imageSourceName");"undefined"!=typeof L&&null!=L&&(L=L.toString())}R=this.getValue(O[v],1,{controlType:F,embeddedImage:M}),E=!1,D=this.columnInfo[k.toUpperCase()],"undefined"!=typeof D&&(E=D.isArray),E&&(R=R.join(","));var P=this.getControlDirty(O[v].toUpperCase());""!=R||P||"object"==typeof b&&null==b[O[v].toUpperCase()]&&(R=null),a&&(fieldProps=this._getListFieldProps(a,k),T="","undefined"!=typeof fieldProps.onListUpdate&&(T=fieldProps.onListUpdate),""!=T&&(a._value=R,R=Function(T).call(a,R))),w[k]=R,""!=L&&(w[O[v]+"__A5SOURCEIMAGENAME"]=L)}else for(var w={},F="",v=0;v<N.length;v++){F=this._getControlType(N[v].control).toLowerCase(),L="";var M=!1;if(("signaturecapture"==F||"image"==F)&&(M=this._isEmbeddedImage(a._getListFieldFromControl(N[v].control),a),M&&S.push(a._getListFieldFromControl(N[v].control)),"image"==F)){var L=$ga(this.dialogId+".V.R1."+N[v].control.toUpperCase()+"_HIDDENA5FN","a5imageSourceName");"undefined"!=typeof L&&null!=L&&(L=L.toString())}var P=this.getControlDirty(N[v].control.toUpperCase());R=this.getValue(N[v].control,1,{controlType:F,embeddedImage:M}),E=!1,D=this.columnInfo[N[v].control.toUpperCase()],"undefined"!=typeof D&&(E=D.isArray),E&&(R=R.join(",")),""!=R||P||"object"==typeof b&&null==b[N[v].field]&&(R=null),a&&(fieldProps=this._getListFieldProps(a,N[v].field),T="","undefined"!=typeof fieldProps.onListUpdate&&(T=fieldProps.onListUpdate),""!=T&&(a._value=R,R=Function(T).call(a,R))),this.getPointer(N[v].control)&&(w[N[v].field]=R,""!=L&&(w[N[v].field+"__A5SOURCEIMAGENAME"]=L))}}for(var V="",v=0;v<a._listFields.length;v++)if("undefined"!=typeof a._listFields[v].base64Prefix){V=a._listFields[v].name;var j=w[V];w[V]=w[V].split("base64,")[1],"undefined"!=typeof w[V]&&""!=w[V]||(w[V]=j)}var B=a._mediaTypes,H="";if("undefined"==typeof B&&(B={}),1==d)for(var U in w)if(F=this._getControlType(a._getUXDetailViewControlName(U)).toLowerCase(),H=B[U],"undefined"!=typeof H&&("video"==H.toLowerCase()&&(F="video"),"audio"==H.toLowerCase()&&(F="audio")),("signaturecapture"==F||"image"==F||"video"==F||"audio"==F)&&(G=a._getUXDetailViewControlName(U),""!=this.getValue(G))){"undefined"==typeof w._dirtyImages&&(w._dirtyImages={}),w._dirtyImages[U]=!0;var W=this.dialogId+".V.R1."+U.toUpperCase()+"_HIDDENA5FN",z=$ga(W,"a5EXIF");""!=z&&("undefined"==typeof w._exifData&&(w._exifData={}),w._exifData[U]=z.toString())}if(0==d){for(var U in b)if(F=this._getControlType(a._getUXDetailViewControlName(U)).toLowerCase(),H=B[U],"undefined"!=typeof H&&("video"==H.toLowerCase()&&(F="video"),"audio"==H.toLowerCase()&&(F="audio")),("signaturecapture"==F||"image"==F||"video"==F||"audio"==F)&&(G=a._getUXDetailViewControlName(U),this.getControlDirty(G))){"undefined"!=typeof b._dirtyImages&&0==b._dirtyImages&&(delete b._dirtyImages,delete b._exifData),"undefined"==typeof b._dirtyImages&&(b._dirtyImages={}),b._dirtyImages[U]=!0;var W=this.dialogId+".V.R1."+U.toUpperCase()+"_HIDDENA5FN",z=$ga(W,"a5EXIF");""!=z&&("undefined"==typeof b._exifData&&(b._exifData={}),b._exifData[U]=z.toString())}var C=a._values[I];if("undefined"!=typeof b&&("undefined"==typeof b._oldData||0==b._oldData)){w._oldData={};var F="",G="",Y=!0,X=!1,K=["__primaryKey","__a5crc","*key","*renderIndex","*value","_isNewRow","_isDirty","__locationLatitude","__locationLongitude","_hasServerSideError","_serverSideErrors","_flagServerSideErrorInChild","_flagWriteConflictErrorInChild"],J=!1;for(var U in b)Y=!0,X=!1,F=this._getControlType(a._getUXDetailViewControlName(U)).toLowerCase(),"signaturecapture"!=F&&"image"!=F||(Y=!1),K.indexOf(U)>-1&&(X=!0),X||(Y?"object"!=typeof b[U]?(w._oldData[U]=b[U],w[U]!=b[U]&&(J=!0)):(null==b[U]?w._oldData[U]=null:b[U].constructor==Date&&(w._oldData[U]=b[U]),w[U]!=b[U]&&(J=!0)):w._oldData[U]="");var q=w._oldData;delete q._writeConflictErrors,delete q._hasWriteConflictErrors,delete q._flagWriteConflictErrorInChild,delete q._hasGlobalErrors,delete q._flagGlobalErrorInChild,delete q._globalErrors,delete q._hasServerSideError,delete q._flagServerSideErrorInChild,delete q._flagViewed,delete q.__displayStyle,J||s&&delete w._oldData}w._isDirty=!0,w._isNewRow=A,w._isNewRow&&delete w._oldData}var Q=this._list_executeEvent(e,"detailView.canUpdateList",{data:w});if(0==Q)return!1;var Z=!1;"undefined"!=typeof a._captureLocation&&(Z=a._captureLocation),Z&&("undefined"!=typeof this._location?(w.__locationLatitude=this._location.lat,w.__locationLongitude=this._location.lng):(w.__locationLatitude="undefined",w.__locationLongitude="undefined"));var ee="",te="",ie=this.nullImage;if("undefined"!=typeof S)for(var v=0;v<S.length;v++)ee=S[v],te=w[ee],void 0!=te&&""!=te||(w[ee]=ie);var se=A5.UUID();if(w["*rowGUID"]=se,s&&this.__set_isDirtyFlagOnAllArrayLevels(w),0==d)"undefined"!=typeof b&&"undefined"==typeof b._isNewRow&&(b._isNewRow=!1),a.updateRow(y,w),y="undefined"!=typeof b?a._dataMap.indexOf(b["*key"]):0,s?(c||l)&&(this._setDVClean(a),a.setValue(y,!1),a.populateUXControls()):(this._setDVClean(a),a.setValue(y,!1));else{var ae=!1;if(1==i.programmatic&&1==i.insertRow){ae=!0;var ne=i.insertRowPosition}for(var v=0;v<n.length;v++)"undefined"==typeof w[n[v].name]&&(w[n[v].name]="");w._isDirty=!0,w._isNewRow=!0,ae?(a.insertRows(ne,w),y=a.indexFromValue(ne),l&&("string"==typeof ne&&(y-=1),a.setValue(y,!1),a._selectedRow=y)):(a.appendRows(w),y=a._dataMap.indexOf(a._data.length-1),a._selectedRow=y),s?l&&(a._selectedRow=y,this._setDVClean(a),a.setValue(y,!1),a.populateUXControls()):(this._setDVClean(a),a.setValue(y,!1))}return!0},__set_isDirtyFlagOnAllArrayLevels:function(e){for(var t=A5.u.object.each(e,function(e,t,i,s){if(("_isDirty"==e||"_isNewRow"==e)&&t)for(i=i.splice(0,i.length-3),s.push(JSON.stringify(i));i.length>0;)i=i.splice(0,i.length-2),s.push(JSON.stringify(i))}),i="",s=0;s<t.length;s++){i=e;for(var a=JSON.parse(t[s]),n=0;n<a.length;n++)i=i[a[n]];i._isDirty=!0}},_setDVClean:function(e){if(!e._hasDetailView)return!0;for(var t=e._getControlsInDv(),i=0;i<t.length;i++)this.setControlDirty(t[i],!1,void 0,void 0,!0)},_harvestListsDV:function(){for(var e={},t={},i=0;i<this._listsDV.length;i++)e.listName=this._listsDV[i],t=this.getControl(this._listsDV[i]),e._data=t.harvestList();alert($u.o.toJSON(e))},getListData:function(e){var t=arguments[1],i=arguments[2];"undefined"==typeof i&&(i="all"),"undefined"==typeof t&&(t=!0);var s=this.getControl(e);if(!s)return"";var a=function(e){var t={};for(var i in e)if("*"!=i[0])if(null!=e[i]&&e[i].constructor==Array){t[i]=[];for(var s=0;s<e[i].length;s++)e[i][s].constructor==Object?t[i].push(a(e[i][s])):t[i].push(e[i][s])}else null!=e[i]&&e[i].constructor==Object?t[i]=a(e[i]):t[i]=e[i];return t},n="";n=t?s._rData:s._data;for(var o=0;o<n.length;o++)n[o]=a(n[o]);if(i.constructor==Array){for(var r=[],l=0;l<n.length;l++){for(var d={},o=0;o<i.length;o++)d[i[o]]=n[l][i[o]];r.push(d)}return r}return n},_harvestListsOld:function(){var e=this._controlInst,t=this._controls,i="",s="",a="",n="",o="",r="";for(var l in e)i=l.split(".")[1],s=l.split(".")[1].split("_A5INSTANCE")[0],r=l.split(".")[1].split("_A5INSTANCE")[1],a=t[s],"list"==a.type&&(o=this.getControl(i),n=o._data[o._dataMap[o.selection[0]]])},setControlDisplay:function(e,t,i,s){var a="";this.columnInfo[e]&&this.columnInfo[e].info&&(a=this.columnInfo[e].info.controlType);var n={};n.rowNumber=1,e=e.toUpperCase(),e.indexOf(":")>0&&(e=e.split(":"),e=e[0]+"_A5INSTANCE"+e[1]);var o=e.split("_A5INSTANCE"),r=o[1];"undefined"==typeof r&&(r=""),o=o[0],"undefined"==typeof i&&(i="d"),"undefined"==s&&(s={}),i=i[0].toLowerCase();var l="";t?(l="d"==i?A5.u.element.show:A5.u.element.visibilityShow,delete this._hiddenControls[e]):(l="d"==i?A5.u.element.hide:A5.u.element.visibilityHide,this._hiddenControls[e]=!0),$(this.dialogId+".V.R"+n.rowNumber+"."+e+".CONTAINER")?l($(this.dialogId+".V.R"+n.rowNumber+"."+e+".CONTAINER"),s):($(this.dialogId+".V.R"+n.rowNumber+"."+e+".CONTROL")?l($(this.dialogId+".V.R"+n.rowNumber+"."+e+".CONTROL"),s):$(this.dialogId+".V.R"+n.rowNumber+"."+e)&&l($(this.dialogId+".V.R"+n.rowNumber+"."+e),s),$(this.dialogId+".V.R"+n.rowNumber+"."+e+".BUTTON")&&l($(this.dialogId+".V.R"+n.rowNumber+"."+e+".BUTTON"),s),$(this.dialogId+".V.R"+n.rowNumber+"."+e+".HELPICON")&&l($(this.dialogId+".V.R"+n.rowNumber+"."+e+".HELPICON"),s),$(this.dialogId+".V.R"+n.rowNumber+"."+e+".BREAK")&&l($(this.dialogId+".V.R"+n.rowNumber+"."+e+".BREAK"),s),$(this.dialogId+".V.R"+n.rowNumber+"."+e+".SLIDERMESSAGECONTAINER")&&l($(this.dialogId+".V.R"+n.rowNumber+"."+e+".SLIDERMESSAGECONTAINER"),s)),$(this.dialogId+".LBL.R"+n.rowNumber+"."+e)&&l($(this.dialogId+".LBL.R"+n.rowNumber+"."+e),s);var d=this.getControl(e);if(d&&"function"==typeof d.refresh)try{d.refresh()}catch(h){}},buttonClick:function(e){e=e.toUpperCase();var t="undefined"!=typeof arguments[1]?arguments[1]:-1,i=this.dialogId+".V.R1."+e;t>0&&(i=i+"_A5INSTANCE"+t);var s=$(i);s&&($e.execute(s,"abstractclick"),s.click())},_orientationChangeHandler:function(){var e=this;if(A5.flags.isAndroid,0){var t=e.getSize();e._executeEvent("onOrientationChange",{orientation:t.orientation}),"function"==typeof e._functions.listControlOrientationChange&&e._functions.listControlOrientationChange(),e._fireWatches(1)}else setTimeout(function(){var t=e.getSize();e._executeEvent("onOrientationChange",{orientation:t.orientation}),"function"==typeof e._functions.listControlOrientationChange&&e._functions.listControlOrientationChange(),e._fireWatches(1),delete e},300)},getOrientation:function(){var e=$("MOBILESIMULATORDEVICEPICKER");if(e){var t=$(this.dialogId+".R1.BODY");return t.clientWidth>=t.clientHeight?"landscape":"portrait"}var i=this.getSize();return i.orientation},getSize:function(){var e={},t=$("MOBILESIMULATORDEVICEPICKER");if(t){var i=$(this.dialogId+".R1.BODY");return e.width=i.clientWidth,e.height=i.clientHeight,i.clientWidth>=i.clientHeight?(e.orientation="landscape",e.isLandscape=!0):(e.orientation="portrait",e.isLandscape=!1),e}e.width=window.innerWidth,e.height=window.innerHeight;var s=e.width,a=e.height;s>=a?(e.orientation="landscape",e.isLandscape=!0):(e.orientation="portrait",e.isLandscape=!1);var n=this._screen,o=this._quirks,r=!1;return"undefined"!=typeof o&&"undefined"!=typeof o.keyboardAffectsScreenSizeCalc&&1==o.keyboardAffectsScreenSizeCalc&&(r=!0),r||"undefined"==typeof n||s==n.w&&a==n.h||(n.w==s?(n.h>a?(this._executeEvent("onKeyboard",{state:"up"}),s>n.h?(e.orientation="landscape",e.isLandscape=!0):(e.orientation="portrait",e.isLandscape=!1)):this._executeEvent("onKeyboard",{state:"down"}),n.h=a,n.o=e.orientation):(n.w=s,n.h=a,n.o=e.orientation)),e},getListServerSideSummaryValue:function(e,t,i){t=t.toUpperCase(),i=i.toLowerCase();var s=this.getControl(e);return"undefined"==typeof s?"":"undefined"==typeof s._state?"":"undefined"==typeof s._state.summary?"":"undefined"==typeof s._state.summary[t]?"":"undefined"==typeof s._state.summary[t][i]?"":s._state.summary[t][i]},getListClientSideSummaryValue:function(e,t,i){t=t.toUpperCase(),i=i.toLowerCase();var s=this.getControl(e);return"undefined"==typeof s?"":"undefined"==typeof s.csSummary?"":"undefined"==typeof s.csSummary[t]?"":"undefined"==typeof s.csSummary[t][i]?"":s.csSummary[t][i]},fireLayoutRule:function(e){var t=this._layoutRules;if("undefined"==typeof t)return"";var i=this.getSize(),s=A5.flags;return"undefined"!=typeof t[e]&&(actionFn=t[e].action,actionFn.call(this,e,i,s),void this.refreshClientSideComputations())},_findActiveLayoutRule:function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t.push(arguments[i]);setTimeout(function(){e._findActiveLayoutRuleLow.apply(e,t),delete e,delete t},100)},_findActiveLayoutRuleLow:function(){var e="undefined"==typeof arguments[0]||arguments[0];"undefined"==typeof arguments[1]?"firsttrue"==this._responsiveRulesMode?flagStopOnFirstTrue=!0:flagStopOnFirstTrue=!1:flagStopOnFirstTrue=arguments[1];var t=this._layoutRules;if("undefined"==typeof t)return"";var i=this.getSize(),s=A5.flags,a="",n="",o="";for(var r in t)if(a=t[r].rule,n=a.call(this,s,i)){var l=this._activeLayoutRule;if(this._activeLayoutRule=r,e&&r!=l&&(o=t[r].action,o.call(this,r,i,s),this.refreshClientSideComputations()),flagStopOnFirstTrue)return r}return this._activeLayoutRule},refreshClientSideComputations:function(){var e="undefined"!=typeof arguments[0]&&arguments[0];e?this._fireWatches_low(1):this._fireWatches(1)},_fireWatches:function(e){clearTimeout(this._fwTO),this._fwTO=setTimeout(Function("if(typeof "+this.dialogId+"_DlgObj != 'undefined') "+this.dialogId+"_DlgObj._fireWatches_low(1)"),300)},_fireWatches_low:function(e){if(0==this._fireWatchesFlag)return!1;for(var t in this.columnInfo)this.columnInfo[t].calculateSummary&&this._summarize(t,e);for(var i in this.dialogWatches){if("undefined"!=typeof this.dialogWatches[i].repeatingSection)for(var s=0;s<this.repeatingSections[this.dialogWatches[i].repeatingSection].rows;s++)A5.Watch.fire(this.dialogId+".R"+e+"."+i+".I"+(s+1));else A5.Watch.fire(this.dialogId+".R"+e+"."+i);if("undefined"!=typeof this.dialogWatches[i].updateColumn&&""!=this.dialogWatches[i].updateColumn){var a=this.columnInfo[this.dialogWatches[i].updateColumn];"undefined"!=typeof a&&a.calculateSummary&&this._summarize(this.dialogWatches[i].updateColumn,e)}}},_repeatingSectionRowErrorShow:function(e,t){var i=this.id;i=i.split(".");var s=$u.s.toNum(i[2]),a=$u.s.toNum(i[4]),n=i[3],o=t.repeatingSections[n];if(clearTimeout(o._r[s-1].reto),o._r[s-1].i[a-1].error){i.pop(),i.pop();var r=i.join(".")+".ERRORDIV",l=$(r);if(0==l&&(l=document.createElement("div"),l.id=r,l.className=t.fieldErrors.className,l.style.position="absolute",$e.add(l,"mouseover",t._repeatingSectionRowErrorHideCancel,t),$e.add(l,"mouseout",t._repeatingSectionRowErrorHide,t),document.body.appendChild(l)),o._r[s-1].i[a-1].errorText.constructor==Array){var d=[];d.push(o._r[s-1].i[a-1].errorText[0]),d.push("&nbsp;<a onclick=\"if(this.nextSibling.style.display=='none'){this.nextSibling.style.display='block'; this.innerHTML = 'Less...'; } else {this.nextSibling.style.display='none'; this.innerHTML = 'More...'; }; return false;\" style=\"text-decoration: underline; cursor: pointer;\">More...</a>"),d.push('<div style="display:none;">'),d.push(o._r[s-1].i[a-1].errorText[1]),d.push("</div>"),l.innerHTML=d.join("")}else l.innerHTML=o._r[s-1].i[a-1].errorText;l.style.display="",$po(l,this,"dropdown")}},_repeatingSectionRowErrorHideCancel:function(e,t){var i=this.id;i=i.split(".");var s=$u.s.toNum(i[2]),a=i[3],n=t.repeatingSections[a];clearTimeout(n._r[s-1].reto)},_repeatingSectionRowErrorHide:function(e,t){var i=this.id;i=i.split(".");
var s=$u.s.toNum(i[2]),a=i[3],n=t.repeatingSections[a];n._r[s-1].reto=setTimeout(function(){t._repeatingSectionRowErrorHideComplete(a)},500)},_repeatingSectionRowErrorHideComplete:function(e){var t=this.dialogId+".V.R1."+e+".ERRORDIV",i=$(t);i&&(i.style.display="none")},_activateControlPanel:function(e){var t=arguments[1];if("undefined"==typeof t&&(t=!1),e=e.toUpperCase(),"undefined"==typeof this._panelCardControls)return!1;var i=this._panelCardControls[e];return"undefined"!=typeof i&&void this.panelSetActive(i,!1,t)},activateControlContainer:function(e){var t=arguments[1];if("undefined"==typeof t&&(t=!1),e=e.toUpperCase(),this._activateControlPanel(e,t),!this._controlContainers[e])return!1;for(var i=this._controlContainers[e],s="",a=0;a<i.length;a++){if(s=this.dialogId+".V.R1."+i[a].tab+"Obj","undefined"!=typeof window[s]._curBandIndx&&window[s]._curBandIndx!=-1&&window[s]._curBandIndx+1==i[a].pane)return!1;window[s].select(""+i[a].pane)}},closeContainerWindow:function(e){if("object"==typeof e){var t=A5.windows.getFromElement(e);t&&t.hide()}else this.hideContainerWindow(e)},showContainerWindow:function(e,t){this._functions["_showContainerWindow_"+t.toUpperCase()](e)},hideContainerWindow:function(e){if(!e)return!1;if("undefined"==typeof this._openWindows)return!1;var t=this._openWindows[this.dialogId+"_CONTAINERWINDOW_"+e.toUpperCase()];t||(t=this._openWindows[e.toUpperCase()]),t&&t.hide()},closeWindow:function(e){var t=this.getWindow(e);t&&t.hide()},_resetDialogToBlank:function(){var e={};$u.o.assign(e,this.defaultValues),delete e.A5REPEATINGSECTIONDATA,this.populate(e);for(var t in this.repeatingSections)for(var i=0;i<this.repeatingSections[t].rows;i++)this._setRepeatingRowValuesToNull(t,i+1)},closeCurrentTabbedUIPane:function(){if("undefined"!=typeof tbiObj){var e=tbiObj._tbObj._curTabIndx;tbiObj._tbObj.remove(e)}},accordionControl:function(e,t){var i=this.getControl(e);if(!i)return!1;if("close"==t.toLowerCase())return i.select([].concat(i.value),!0),!0;if("open"==t.toLowerCase())if("undefined"==typeof arguments[2]){for(var s=[],a=0;a<i.bands.length;a++)s.push(a);i.select(s)}else i.select(arguments[2])},synchronizeEmbeddedUX:function(e){if(e=e.toUpperCase(),"undefined"==typeof this._embeddedUXComponents)return!1;var t=this._embeddedUXComponents[e];if("undefined"==typeof t)return!1;t=t.arguments;for(var i=[],s=0;s<t.length;s++)if("undefined"==typeof t[s].sourceType)i.push(t[s].name+"|"+t[s].type+"|"+this.getValue(t[s].source));else if("uxControl"==t[s].sourceType)i.push(t[s].name+"|"+t[s].type+"|"+this.getValue(t[s].source));else if("constant"==t[s].sourceType){if(t[s].source.toLowerCase().indexOf("(javascript")>-1){var a=t[s].source.split(":")[1];a=a.split(")")[0],"function"==typeof window[a]&&(sourceValue=window[a](),t[s].source=sourceValue)}i.push(t[s].name+"|"+t[s].type+"|"+t[s].source)}else"sessionVariable"==t[s].sourceType&&i.push(t[s].name+"|"+t[s].type+"|"+t[s].source);var n=i.join("||"),o={};o.specialDialogMode="refreshUX",o.arguments=n;var r=this.dialogId+"_"+e+"_DlgObj";"undefined"!=typeof window[r]&&window[r].synchronizeDialog(o)},applyServerSideRules:function(){var e=this._objSV;if("undefined"!=typeof e)for(var t in e)this.setControlDisplay(t,!0),e[t]||this.setControlDisplay(t,!1);var i=this._objR;if("undefined"==typeof i)return!1;var s="";for(var t in i)s=this.__inR(i[t]),this.setControlDisplay(t,!0),s||this.setControlDisplay(t,!1)},__inR:function(e){var t=this.__r;if("undefined"==typeof t)return!0;for(var i=e.split(","),s=!1,a=0;a<i.length;a++)if(t.indexOf(i[a])>-1){s=!0;break}return s},synchronizeDialog:function(e){var t="";"undefined"!=typeof e.specialDialogMode&&(t=e.specialDialogMode);var i=e.__hideWaitMessage;if("undefined"==typeof i&&(i=!1),"undefined"!=typeof e.specialDialogMode&&"refreshUX"==e.specialDialogMode){var s=$u.o.toJSON(e);s=s.replace("<","__lessthan__"),s=s.replace(">","__greaterthan__");var a=new Array;a.push(A5.ajax.buildURLParam("_jdata",s)),i&&a.push(A5.ajax.buildURLParam("_hideWaitMessage","true")),a=a.join("&");var n="system:synchronize_RefreshUX";return this.ajaxCallback("G",1,n,"",a),!0}if("undefined"!=typeof this._hasOnSynchronizeEvent&&this._hasOnSynchronizeEvent){var s=$u.o.toJSON(e);s=s.replace("<","__lessthan__"),s=s.replace(">","__greaterthan__");var a=new Array;if(a.push(A5.ajax.buildURLParam("_jdata",s)),i&&a.push(A5.ajax.buildURLParam("_hideWaitMessage","true")),a=a.join("&"),"editGridRow"!=t&&"editListRow"!=t&&"newListRow"!=t&&"newGridRow"!=t){var n="system:onSynchronizeDialogServerEvent";this.ajaxCallback("G",1,n,"",a)}}if("undefined"==typeof e.specialDialogMode)return this._resetDialogToBlank(),this._executeEvent("onSynchronizeDialog",{synchronizeType:e.specialDialogMode,obj:e}),!1;if("editGridRow"==e.specialDialogMode){this._resetDialogToBlank();var o=!1,r=-1;"undefined"!=typeof e.__parentRowNum&&(r=e.__parentRowNum),this.stateInfo._parentGridRow=e.__parentRowNum,"undefined"==typeof s&&(s=""),this.populateControlsFromTable(e.recordPrimaryKey,o,"","","",{fireOnSynchronize:!0,_jdata:s,_hideWaitMessage:i})}if("editListRow"==e.specialDialogMode){this._resetDialogToBlank();var o=!1;this.stateInfo._specialMode="editListRow",this.stateInfo._listControlToRefresh=e.listControlId,this.stateInfo.__closeDialogAfterSubmit=e.closeDialogAfterSubmit,this.stateInfo.__windowName=e.windowName,"undefined"==typeof s&&(s=""),this.populateControlsFromTable(e.recordPrimaryKey,o,"","","",{fireOnSynchronize:!0,_jdata:s,_hideWaitMessage:i})}if("newListRow"==e.specialDialogMode){this._resetDialogToBlank();var o=!1;this.stateInfo._specialMode="editListRow",this.stateInfo._listControlToRefresh=e.listControlId,this.stateInfo.__closeDialogAfterSubmit=e.closeDialogAfterSubmit,this.stateInfo.__windowName=e.windowName,this.newRecord()}"newGridRow"==e.specialDialogMode&&(this._resetDialogToBlank(),this.newRecord()),"populateDialog"==e.specialDialogMode&&("specifynow"==e.getPKFrom.toLowerCase()?(this._resetDialogToBlank(),this.populateControlsFromTable(e.pkValue)):(this._resetDialogToBlank(),this.populateControlsFromTable("__sessionvariable__:"+e.pkValue)));var l=this;setTimeout(function(){l._fixAllRepeatingSectionHeaders(),delete l},100),this._executeEvent("onSynchronizeDialog",{synchronizeType:e.specialDialogMode,obj:e})},_fixAllRepeatingSectionHeaders:function(){for(var e in this.repeatingSections)this._prepareRepeatingSection(e,1)},deleteRecord:function(){var e=!1;if("undefined"==typeof this.stateInfo.keys&&(e=!0),e)return!1;var t=this._executeEvent("canDeleteParentRecord",{});if(0==t)return!1;var i="undefined"!=typeof arguments[0]?arguments[0]:{};if("undefined"!=typeof i.confirmation&&0==i.confirmation)return this._deleteRecordNoConfirmation(i),!0;var s=this,a=s.deleteRecordDialogMessage,n=s.resetFormIcon,o=this._isCSSIcon(n),r=this._getImageHTML(n,o);return a='<div style="padding: 10px;" >'+r+a+'<br style="clear: both;" /></div>',A5.msgBox.show(s.deleteRecordDialogTitle,a,"yn",function(e){"yes"==e&&s._deleteRecordNoConfirmation(i),delete s}),!1},_deleteRecordNoConfirmation:function(){var e="undefined"!=typeof arguments[0]?arguments[0]:{};if("undefined"!=typeof e.primaryKeySource){if("explicit"==e.primaryKeySource.toLowerCase()){var t="__keyToDelete="+e.explicitPrimaryKey+"&__nextKeyToShow=__newrecord__&__deleteMode=explicitKey&_options="+$u.o.toJSON(e),i="system:deleteRecord";return this.ajaxCallback("G",1,i,"",t),!0}if("list"==e.primaryKeySource.toLowerCase()){var s=this.getControl(e.listForPrimaryKey);if("undefined"==typeof s)return!1;var a=s.selection[0],t=s._rData[a],n=t.__primaryKey,o=!0;if("undefined"==typeof n&&(n=t.key_table_1,"undefined"!=typeof n&&(o=!1)),"undefined"==typeof n){var r="";return r=r+'Error - List "'+e.primaryKeySource+'" has not been configured to return the primary key. Therefore, Cannot delete record.',alert(r),!1}var l="__newrecord__",d=a;d=a<s._rData.length-1?a+1:a-1;var h=s._rData[d];"undefined"!=typeof h&&(l=o?h.__primaryKey:h.key_table_1),"undefined"!=typeof e.nextRecordToShow&&"newrecord"==e.nextRecordToShow&&(l="__newrecord__");var t="__keyToDelete="+n+"&__nextKeyToShow="+l+"&__deleteMode=explicitKey&_options="+$u.o.toJSON(e),i="system:deleteRecord";return this.ajaxCallback("G",1,i,"",t),!0}}var c=this._primaryKeyList;if(!c){var r="";return r+="Error - You have not loaded primary keys. Therefore, you cannot delete this record.\n",r+="\n",r+="\n",r+="To load primary keys for the component, the component must be 'Data Bound' (see the 'Data Binding') pane in the builder.\n\n\n",r+="Once the component is 'Data Bound' use the 'Load Primary keys for Parent Table' action in the 'OnDialogInitialize' event, or execute an Ajax callback to load primary keys (see actions in 'Action Javascript') .\n",alert(r),!1}if(0==c.length)return!1;var u=0;"undefined"!=typeof this._currentRecordNumber&&(u=this._currentRecordNumber);var f=!1;u==c.length&&(f=!0);var p=0;p=u<c.length?u+1:u-1;var m="",_=!0;p>0&&(m=c[p-1].k,_=!1),"undefined"!=typeof e.nextRecordToShow&&"newrecord"==e.nextRecordToShow.toLowerCase()&&(_=!0);var t="_flagAdjustCurrentRecord="+f+"&_flagShowNewRecord="+_+"&_currentRecordNumber="+u+"&_primaryKeyToShow="+m+"&_options="+$u.o.toJSON(e),i="system:deleteRecord";this.ajaxCallback("G",1,i,"",t)},navigateRecordByKey:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:"$component",i=this._queryState[t],s={};"undefined"==typeof i?s.key="___firstkey___":s=i,s.section=t,s.direction=e,data=A5.ajax.buildURLParam("_navbykey",$u.o.toJSON(s));var a="system:navigatebykey";this.ajaxCallback("G",1,a,"",data)},navigateRecord:function(e){var t="undefined"==typeof arguments[1]||arguments[1],i="";if(i=this._executeEvent("canRecordNavigate",{isDirty:this._isDirty,isDataDirty:this._isDataDirty,target:e}),0==i)return this._setSliderPosition(this._currentRecordNumber,!1),"undefined"!=typeof this._primaryKeyListNavigator&&this._primaryKeyListNavigator.setValue(this._currentRecordNumber-1,!1),!1;var s=this._primaryKeyList;if(!s){var a="";return a+="Error - You have not loaded primary keys. Therefore, you cannot navigate records.\n",a+="\n",a+="\n",a+="To load primary keys for the component, the component must be 'Data Bound' (see the 'Data Binding') pane in the builder.\n\n\n",a+="Once the component is 'Data Bound' use the 'Load Primary keys for Parent Table' action in the 'OnDialogInitialize' event, or execute an Ajax callback to load primary keys (see actions in 'Action Javascript') .\n",alert(a),!1}if(0==s.length)return!1;if("undefined"==typeof s)return!1;if(isNaN(e)){e=e.toLowerCase();var n=0;"undefined"!=typeof this._currentRecordNumber&&(n=this._currentRecordNumber,n==-1&&(n=s.length+1));var o=0;"next"==e&&(o=n+1),"previous"==e&&(o=n-1),"first"==e&&(o=1),"last"==e&&(o=s.length),0==o&&(o=1),o>s.length&&(o=s.length)}else o=e;var r=this._listsToSynchronize;if("undefined"!=typeof r&&r.length>0)for(var l=0;l<r.length;l++){var d=s[o-1].k,h=this._listFindRowNumberForKey(r[l],d);if(h>-1){var c=this.getControl(r[l]);c&&c.setValue(h)}}this.populateControlsFromTable(s[o-1].k,!1),this._currentRecordNumber=o,t&&this._setSliderPosition(o,!1),"undefined"!=typeof this._primaryKeyListNavigator&&this._primaryKeyListNavigator.setValue(o-1,!1),this._executeEvent("afterRecordNavigate",{target:e})},_listFindRowNumberForKey:function(e,t){var i=this.getControl(e);if(!i)return-1;var s=i._rData;if("undefined"==typeof s)return-1;if("undefined"==typeof s[0])return-1;var a=!1;if("undefined"==typeof s[0].__primaryKey&&(a=!0),a){for(var n=0;n<s.length;n++)if(s[n].key_table_1==t)return n}else for(var n=0;n<s.length;n++)if(s[n].__primaryKey==t)return n;return-1},_primarKeyListFindRowNumber:function(e){var t=this._primaryKeyList;if(!t)return-1;for(var i=0;i<t.length;i++)if(t[i].k==e)return i+1;return-1},_listSystemOnClick:function(e,t){var i=this._listsToSynchronize;if("undefined"==typeof i)return!0;var s=$u.a.find(i,e);if(s<0)return!0;var a=this.getControl(e);if(!a)return!0;var n=a._rData[a._dataMap[t]].__primaryKey;"undefined"==typeof n&&(n=a._rData[a._dataMap[t]].key_table_1);var o=-1;o=this._primarKeyListFindRowNumber(n),o>-1?this.navigateRecord(o):this.populateControlsFromTable(n)},setFocus:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:0;this.activateControlContainer(e.toUpperCase());var i=$(this.dialogId+".V.R1."+e.toUpperCase());if(t>0){var s=this._findRepeatingSection(e),a=this._repeatingSectionLogicalToPhysicalRow(s,t);i=$(this.dialogId+".V.R1."+e.toUpperCase()+"_A5INSTANCE"+a)}if(i)try{"undefined"!=typeof i.focus&&i.focus(),"undefined"!=typeof i.select&&setTimeout(function(){i.select()},10)}catch(n){}},getPointer:function(e){var t=$(this.dialogId+".V.R1."+e.toUpperCase());return t},_setControlFocus:function(e,t){var i="",s="",a="";"undefined"!=typeof t._focusControl&&(i=t._focusControl),"undefined"!=typeof t._focusRepeatingSection&&(s=t._focusRepeatingSection),"undefined"!=typeof t._focusRepeatingSectionRow&&(a=t._focusRepeatingSectionRow),clearTimeout(t._blurTO),t._kw.on(),this._focusRow=Number(this.name.split(".")[1].substr(1));var n=this.name.split(".")[2];n=n.split("_A5INSTANCE");var o=n[1];if("undefined"==typeof o&&(o="0"),o>0){var r=t._findRepeatingSection(n[0]);r!=s&&(t._executeEvent("onRptSectionFocus",{sectionName:r}),t._focusRepeatingSection=r,t._focusRepeatingSectionRow=o,a=o),o!=a&&(t._focusRepeatingSectionRow=o,t.setRepeatingSectionActiveRow(r,o))}else t._focusRepeatingSection="",t._focusRepeatingSectionRow="";n=n.join(":"),n=n.split("["),n=n[0],t._focusControl=n,n!=i&&t._executeEvent("onControlFocus",{controlName:n})},_setControlBlur:function(e,t){t._blurTO=setTimeout(function(){t._completeControlBlur(),t=null},100);var i=Number(this.name.split(".")[1].substr(1)),s=this.name.split(".")[2];s=s.split("_A5INSTANCE");var a=s[1];"undefined"==typeof a&&(a="0"),s=s.join(":"),s=s.split("["),s=s[0];var n=t;this._csvTo=setTimeout(function(){n.clientSideValidateField(s,i,a),delete n},400),t._executeEvent("onControlBlur",{controlName:s,sourceElement:this})},_completeControlBlur:function(){this._kw.off()},blur:function(){},_setControlDirty:function(e,t){if("keyup"==e.type&&(9==e.keyCode||16==e.keyCode))return!1;if("undefined"==typeof flagInDV&&(flagInDV=!1),"undefined"==typeof this.name)return!1;var i=Number(this.name.split(".")[1].substr(1)),s=this.name.split(".")[2];s=s.split("_A5INSTANCE");var a=s[1];"undefined"==typeof a&&(a="0"),s=s.join(":"),s=s.split("["),s=s[0],"keyup"==e.type&&"true"!=$ga(this,"A5IsDirty")?t.setControlDirty(s,!0,i,!0):"keyup"!=e.type&&t.setControlDirty(s,!0,i,!0),"select"!=this.tagName.toLowerCase()&&("input"!=this.tagName.toLowerCase()||"radio"!=this.type&&"checkbox"!=this.type)||t.clientSideValidateField(s,i,a);var n=t._getControlInfo(s),o=!1,r="";if("undefined"!=typeof n.info&&(o=n.info),o&&(r=o.controlType),("change"==e.type||"undefined"==typeof e.type)&&t.flagRenderComplete){t._executeEvent("onControlChange",{controlName:s,controlType:r,sourceElement:this});var l=$ga(this,"A5LastPersistValue"),d=$ga(this,"A5IsDirty"),h=t.getValue(s);if(h!=l&&"true"==d){$sa(this,"A5LastPersistValue",h);var c={controlName:s,controlType:r,sourceElement:this};t.persistVariablesToLocalStorage(c)}}},setControlDirty:function(e,t){var i=this._getControlInfo(e),s=!1,a="";"undefined"!=typeof i.info&&(s=i.info);var n="undefined"!=typeof arguments[4]&&arguments[4];if(s&&(a=s.controlType.toLowerCase(),"label"==a||"image"==a&&0==n))return!0;var o="undefined"!=typeof arguments[2]?arguments[2]:1,r="undefined"!=typeof arguments[3]&&arguments[3],l=this._functionToConstrainElements($n("V.R"+o+"."+i.controlName));if(!l&&("signaturecapture"==a.toLowerCase()||"image"==a.toLowerCase())){var d=this.dialogId+".V.R1."+i.controlName+"_HIDDENA5FN",h=$(d);l=[h]}if(t){i.calculateSummary&&this._summarize(i.name,o);var c=this.originalValues[o-1][i.fullName];null==c&&(c="");var u=$gvs(l);c.constructor==Array&&("string"==typeof u&&(u=u.split(",")),c=c.join("\n")),u.constructor==Array&&(u=u.join("\n")),c!=u?($sa(l,"A5IsDirty","true"),0==this._isDataDirty&&$u.a.find(this._dataBoundControls,i.name)!=-1&&(this._isDataDirty=!0,this._variablesChanged(["dialog.isDataDirty"],o),this._executeEvent("onDataStateChange",{isDirty:!0,isDataDirty:this._isDataDirty}),this.refreshClientSideComputations()),r&&this._setRowState(o,!0)):this._listsDV.length>0&&this.refreshClientSideComputations()}else"true"==$ga(l[0],"A5IsDirty")?($sa(l,"A5IsDirty","false"),r&&this._setRowState(o,!1)):this._listsDV.length>0&&this.refreshClientSideComputations()},setDirty:function(){var e="undefined"!=typeof arguments[0]&&arguments[0];e&&(this._isDataDirty=!0),this._setRowState(1,!0),e&&this._executeEvent("onDataStateChange",{isDirty:!0,isDataDirty:!0})},getControlDirty:function(e){var t=this._getControlInfo(e),i=!1,s="";"undefined"!=typeof t.info&&(i=t.info),i&&(s=i.controlType);var a="undefined"!=typeof arguments[1]?arguments[1]:1,n=this._functionToConstrainElements($n("V.R"+a+"."+t.controlName));if(n){$ga(n[0],"A5IsDirty");return"true"==$ga(n[0],"A5IsDirty")}if("signaturecapture"==s.toLowerCase()||"image"==s.toLowerCase()){var o=this.dialogId+".V.R1."+t.controlName+"_HIDDENA5FN",r=$(o);return"true"==$ga(r,"A5IsDirty")}return!1},_setRepeatingSectionRowDirty:function(e,t){var i=this._getControlsInRepeatingSection(e)[0],s=this.getValue(i+":"+t);this.setValue(i+":"+t,"foo"),this.setValue(i+":"+t,s)},_repeatingSectionRowIsDirty:function(e,t){for(var i=!1,s=this._getControlsInRepeatingSection(e),a=1;a<=s.length;a++)if(this.getControlDirty(s[a-1]+":"+t))return i=!0;return i},_repeatingSectionRowIsEmpty:function(e,t){for(var i=!0,s=this._getControlsInRepeatingSection(e),a=1;a<=s.length;a++)if(""!=this.getValue(s[a-1]+":"+t))return i=!1;return i},_repeatingSectionRowIsDeleted:function(e,t){return this.repeatingSections[e]._r[0].i[t-1].deleted},_repeatingSectionLogicalToPhysicalRow:function(e,t){var i=this.repeatingSections[e]._r[0].i;if(0==i.length)return t;for(var s=-1,a=0,n=1;n<=i.length;n++)if(!i[n-1].deleted&&(a+=1,a==t)){s=n;break}return s},_getControlsInRepeatingSection:function(e){return this.repeatingSectionInfo[e].controls},getControlsInContainer:function(e){var t=this.__controlNesting;if("undefined"==typeof t)return"";if(t=t[e],"undefined"==typeof t)return"";for(var i="",s="",a=[],n="",o=0;o<t.length;o++)i=t[o].split(":")[0],"container"==i||"tabControl"==i||"tabPane"==i||"frame"==i?(s=t[o].split(":")[1],n=this.getControlsInContainer(s),n.length>0&&a.push(n)):a.push(t[o]);return a},_setRowState:function(e,t){var i=this._isDataDirty,s=!1;this._dirtyRows[e-1]!=t&&(s=!0,this._dirtyRows[e-1]=t),s?(t?$u.a.find(this._dirtyRows,!0)==-1||this._isDirty||(this._isDirty=!0):$u.a.find(this._dirtyRows,!0)==-1&&this._isDirty&&(this._isDirty=!1,this._isDataDirty=!1),this._prepared&&this._fireWatches(e),this._executeEvent("onStateChange",{isDirty:this._isDirty,isDataDirty:this._isDataDirty}),0==t&&i&&this._executeEvent("onDataStateChange",{isDirty:!1,isDataDirty:!1})):this._listsDV.length>0&&this.refreshClientSideComputations()},_keyF1:function(){if(""!=this._focusControl){var e=this._focusControl.split(":")[1];e="undefined"==typeof e?"":Number(e),e>0&&(e="_A5INSTANCE"+e),this.showFieldHelp(this._focusControl,e)}return!0},harvest:function(){var e=arguments[0];"undefined"==typeof e&&(e={});var t=this._harvestRow(1,!1,e);return t},getData:function(){return this._harvestRow(1)},populateControlsFromTable:function(e){if("undefined"==typeof e)return!1;if(null==e)return!1;if("undefined"!=typeof this._lockPopulateControlsFromTable&&1==this._lockPopulateControlsFromTable)return!1;var t="";t=e.constructor==Array?e.join("|||"):e;var i="undefined"!=typeof arguments[1]&&arguments[1],s="undefined"!=typeof arguments[2]?arguments[2]:"",a="undefined"!=typeof arguments[3]?arguments[3]:"",n="undefined"!=typeof arguments[4]?arguments[4]:"",o="undefined"!=typeof arguments[5]?arguments[5]:{},r=o._hideWaitMessage;"undefined"==typeof r&&(r=!1);var l=!1;"undefined"!=typeof o.showWaitMessage&&(l=o.showWaitMessage,o.waitMessage={},o.waitMessage.target="page",o.waitMessage.message="Wait...",o.waitMessage.useCSSAnimation=!1,o.waitMessage.icon="css/A5System/Images/wait.gif");var d=!1;"undefined"!=typeof o.fireOnSynchronize&&(d=o.fireOnSynchronize);var h="_showDebug="+i+"&_primaryKey="+t+"&_debugInfoDiv="+a+"&_errorDiv="+n+"&_fireServerSideOnSynchronize="+d;l&&(h=h+"&_waitMsgTarget="+o.waitMessage.target),h=h+"&"+A5.ajax.buildURLParam("_onCallbackComplete",s),r&&(h+="&_hideWaitMessage=yes");var c=o._jdata;"undefined"==typeof c&&(c=""),""!=c&&(h=h+"&"+A5.ajax.buildURLParam("_jdata",c));var u="system:populateControlsFromTable";this._lockPopulateControlsFromTable=!0,this._resetFlag("_lockPopulateControlsFromTable",5e3),this.ajaxCallback("G",1,u,"",h),l&&this.showWaitMessage(o.waitMessage.target,o.waitMessage)},_resetFlag:function(e,t){var i=(this[e],Function(this.dialogId+"_DlgObj._setFlag('"+e+"');"));setTimeout(i,t)},_setFlag:function(e){this[e]=!1},groupSummary:function(e,t,i){alert("Method is deprecated. Please edit component and change to 'this.groupSummary()'.")},getPrimaryKeyList:function(e,t,i){var s=[];s.push(A5.ajax.buildURLParam("__filter",e)),s.push(A5.ajax.buildURLParam("__order",t)),s.push(A5.ajax.buildURLParam("__maxkeys",i));var a=s.join("&"),n="system:getPrimaryKeyList";this.ajaxCallback("G",1,n,"",a)},refreshPrimaryKeyList:function(){var e="system:refreshKeys",t="";this.ajaxCallback("G",1,e,"",t)},getRepeatingSectionVisibleRows:function(e){var t=this.repeatingSections[e];if("undefined"==typeof t)return!1;for(var i=t.rows,s=[],a="",n=1;n<=i;n++)a=$(this.dialogId+".V.R1."+e+".I"+n),a&&""==a.style.display&&s.push(n);return s.join(",")},_harvestVariables:function(){return this._harvestRow(1,!0)},__pA:function(e,t,i){e[t]=i},_harvestRow:function(e){var t="undefined"!=typeof arguments[2]?arguments[2]:{},i=t.flagHarvestImageData;"undefined"==typeof i&&(i=!0);var s="undefined"!=typeof arguments[1]&&arguments[1],a=new Array,n=new Array,o=0,r="",l="",d="",h="",c={},u="";for(var f in this.columnInfo)if(h=f,u=this.columnInfo[f].isArray?"[]":"","undefined"!=typeof this.columnInfo[f].repeatingSection){if(o=this.repeatingSections[this.columnInfo[f].repeatingSection],"undefined"==typeof o)return!1;for(var p=1;p<=o.rows;p++){if(r=this.getValue(f+":"+p,e),l=this.originalValues[e-1][f+":"+p],"img,img"==this.columnInfo[f].type&&(s||(null!=r&&"data:image/"==r.substring(0,11)&&(r=""),null!=l&&"data:image/"==l.substring(0,11)&&(l=""))),"fileUpload,fileUpload"==this.columnInfo[f].type){var d=$(this.dialogId+".V.R1."+f+"_A5INSTANCE"+p);d&&(r=d.value),varoldata_i="",h=f+"_A5FILEUPLOAD",""!=r&&n.push(h+"_A5INSTANCE"+p)}if(a.push(A5.ajax.buildURLParam("V.R"+e+"."+h+"_A5INSTANCE"+p+u,r)),a.push(A5.ajax.buildURLParam("old.V.R"+e+"."+h+"_A5INSTANCE"+p+u,l)),this.__pA(c,h+"_A5INSTANCE"+p,r),this.getControlDirty(f+":"+p,e)&&n.push(f+"_A5INSTANCE"+p),"img,img"==this.columnInfo[f].type)if(s)a.push(A5.ajax.buildURLParam("V.R"+e+"."+f+"_HIDDENA5FN_A5INSTANCE"+p+u,r)),a.push(A5.ajax.buildURLParam("old.V.R"+e+"."+f+"_HIDDENA5FN_A5INSTANCE"+p+u,""));else{var m=this.dialogId+".V.R1."+f+"_HIDDENA5FN_A5INSTANCE"+p+u,_=$(m),g=$gvs(_);a.push(A5.ajax.buildURLParam("V.R"+e+"."+f+"_HIDDENA5FN_A5INSTANCE"+p+u,g)),a.push(A5.ajax.buildURLParam("old.V.R"+e+"."+f+"_HIDDENA5FN_A5INSTANCE"+p+u,"")),this.__pA(c,f+"_HIDDENA5FN_A5INSTANCE"+p,g),""!=g&&n.push(f+"_HIDDENA5FN_A5INSTANCE"+p+u)}}}else{var v=this._getControlType(f).toLowerCase();if(r=this.getValue(f,e,{controlType:v}),l=this.originalValues[e-1][f],h=f,"img,img"==this.columnInfo[f].type&&(s||(null!=r&&"data:image/"==r.substring(0,11)&&(r=""),null!=l&&"data:image/"==l.substring(0,11)&&(l="")),0==i&&(r="",l="")),"fileUpload,fileUpload"==this.columnInfo[f].type){var d=$(this.dialogId+".V.R1."+f);d&&(r=d.value),varoldata_i="",h=f+"_A5FILEUPLOAD",""!=r&&n.push(h)}if(a.push(A5.ajax.buildURLParam("V.R"+e+"."+h+u,r)),a.push(A5.ajax.buildURLParam("old.V.R"+e+"."+h+u,l)),this.__pA(c,h,r),"img,img"==this.columnInfo[f].type)if(s)a.push(A5.ajax.buildURLParam("V.R"+e+"."+f+"_HIDDENA5FN"+u,r)),a.push(A5.ajax.buildURLParam("old.V.R"+e+"."+f+"_HIDDENA5FN"+u,""));else{var m=this.dialogId+".V.R1."+f+"_HIDDENA5FN",_=$(m),g=$gvs(_);0==i&&(g=""),a.push(A5.ajax.buildURLParam("V.R"+e+"."+f+"_HIDDENA5FN"+u,g)),a.push(A5.ajax.buildURLParam("old.V.R"+e+"."+f+"_HIDDENA5FN"+u,"")),this.__pA(c,f+"_HIDDENA5FN",g),""!=g&&n.push(f+"_HIDDENA5FN")}this.getControlDirty(f,e)&&n.push(f)}a.push(A5.ajax.buildURLParam("dirtyColumns.R"+e,n.join("\n")));var y={};if(y.loggedInUserName="",y.loggedInUserNameFriendly="",y.isLoggedIn=!1,"undefined"!=typeof A5.__loginUserName&&(y.loggedInUserName=A5.__loginUserName),"undefined"!=typeof A5.__loginUserNameFriendly&&(y.loggedInUserNameFriendly=A5.__loginUserNameFriendly),""!=y.loggedInUserName&&(y.isLoggedIn=!0),a.push(A5.ajax.buildURLParam("__loggedInUserNameFriendly",y.loggedInUserNameFriendly)),a.push(A5.ajax.buildURLParam("__isLoggedIn",y.isLoggedIn)),s){var b={};return b.data=c,b.dirty=n,b}return a.join("&")},setVariables:function(e){0==$u.compare(this._vars,e)&&$u.o.assign(this._vars,e)},getSessionVariable:function(e){return e=e.toUpperCase(),this._vars.SESSION[e]},getPageVariable:function(e){return e=e.toUpperCase(),this._vars.PAGEVARIABLE[e]},populate:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:1,i="undefined"==typeof arguments[2]||arguments[2];"boolean"==typeof i&&(i=i?"clean":"dirty");var s="undefined"==typeof arguments[3]||arguments[3],a="undefined"!=typeof arguments[4]&&arguments[4];if(this._populateActive=!0,this._formsToRefresh={},"clean"==i){var n="",o="",r="",l=!1,d=!1;for(var h in e)o=h.split("_A5INSTANCE").join(":"),o=o.toUpperCase(),r=e[h],l=!1,tempOrigVal=null,a&&(l=r.dirty,tempOrigVal=r.origVal,r=r.val,e[h]=r,"undefined"==typeof l&&(l=!1),l&&(d=!0)),null==r&&(r=""),null==tempOrigVal?this.originalValues[t-1][o]=e[h]:this.originalValues[t-1][o]=tempOrigVal,this.setValue(o,r,!1,t),n=this._getControlInfo(o),$sa(this._functionToConstrainElements($n("V.R"+t+"."+n.controlName)),"A5IsDirty",""+l);this._setRowState(t,d)}else if("incremental"==i)for(var h in e)this.setValue(h,e[h],s,t);else{for(var h in e)this.setValue(h,e[h],s,t),s||(o=h.split("_A5INSTANCE").join(":"),o=o.toUpperCase(),n=this._getControlInfo(o),this.setControlDirty(o,!0));this._setRowState(t,!0)}this._populateActive=!1;for(var c in this._formsToRefresh)this._forms[c].autoCommit&&this.formViewRefresh(c)},_getControlFullId:function(e){var t=e.split(":")[1];return"undefined"==typeof t?this.dialogId+".V.R1."+e:this.dialogId+".V.R1."+e.split(":")[0]+"_A5INSTANCE"+t},getControl:function(e){e=e.toUpperCase();var t=this._getControlInfo(e);e=t.name;var i="undefined"!=typeof arguments[1]?arguments[1]:1;if(t.instNum!=-1){if("undefined"!=typeof this._controlInst["R"+i+"."+e+"_A5INSTANCE"+t.instNum])return this._controlInst["R"+i+"."+e+"_A5INSTANCE"+t.instNum]}else if("undefined"!=typeof this._controlInst["R"+i+"."+e])return this._controlInst["R"+i+"."+e];var s=window[this.dialogId+".V.R1."+e+"Obj"];return s?s:"undefined"!=typeof this._buttons[e]?this._buttons[e]:"undefined"!=typeof this.fieldHelpers[e]&&this.fieldHelpers[e]},_getArrayControls:function(){var e=[];for(var t in this.columnInfo)this.columnInfo[t].isArray&&e.push(t);return e.join(",")},deleteImageOrAttachment:function(e){e=e.toUpperCase();var t=this._getControlInfo(e);e=t.name;var i=t.controlName,s=i.split("_A5INSTANCE")[1];"undefined"==typeof s&&(s=-1);var a="",n="";s>-1?(a=e+"_A5INSTANCE"+s,n=e+"_HIDDENA5FN_A5INSTANCE"+s):(a=e,n=e+"_HIDDENA5FN"),this.setValue(a,"images/null_1x1.png.a5image"),this.setValue(n,"__NULL__");var o=this.dialogId+".V.R1."+n;$svs(o,"__NULL__"),this.setDirty()},customSetting:function(e,t){return"undefined"==typeof t?"undefined"!=typeof this._settings&&this._settings[e]:("undefined"==typeof this._settings&&(this._settings={}),void(this._settings[e]=t))},getValue:function(e){var t="undefined"!=typeof arguments[2]?arguments[2]:{},i=t.controlType;if("signaturecapture"==i||"image"==i){e=e.toUpperCase();var s=!1;if("undefined"!=typeof t.embeddedImage&&(s=t.embeddedImage),s){var a=$(this.dialogId+".V.R1."+e),n=a.src;return n.split(",")[1]}var o="",a=$(this.dialogId+".V.R1."+e+"_HIDDENA5FN");return""!=a.value?o=a.value:(a=$(this.dialogId+".V.R1."+e),a&&(o=a.src)),o}if("list"==e.split("::")[0].toLowerCase()&&"undefined"!=typeof e.split("::")[1]){var r="undefined"!=typeof arguments[1]?arguments[1]:-1,l=e.split("::")[1],d=e.split("::")[2];return this.listGetValue(l,d,r)}e=e.toUpperCase();var h=this._getControlInfo(e);e=h.name;var c="undefined"!=typeof arguments[1]?arguments[1]:1;if(this.columnInfo[e]){var u=this.columnInfo[e].hiddenVal;"undefined"==typeof u&&(u=!1);var f=this.columnInfo[e].isCalc,i=this._getControlType(e);"list"!=i.toLowerCase()&&"switch"!=i.toLowerCase()||(f=!0),"control"==h.type.toLowerCase()&&(f=!0);var p=this.columnInfo[e].type.split(",")[0],m=this.columnInfo[e].dataType;if(this._dirtyRows[c-1]&&"label"!=p&&"link"!=p&&"img"!=p){if(u)var n=$gvs(this.dialogId+".V.R"+c+"."+h.hiddenControlName);else var n=$gvs("V.R"+c+"."+h.controlName,this._functionToConstrainElements);n==$ga("V.R"+c+"."+h.controlName,"A5WatermarkText",this._functionToConstrainElements)[0]&&(n=""),"undefined"!=typeof m&&"L"==m&&(n=$u.s.toBool(n));var _=this.columnInfo[e].separator;return"undefined"==typeof _&&(_="\n"),this.columnInfo[e].isArray&&"string"==typeof n&&(n=n.split(_)),n}if("label"==p)return $gvs(this.dialogId+".V.R"+c+"."+h.controlName);if("link"==p)return this.originalValues[c-1][h.fullName][0];if(f){if(u)var n=$gvs(this.dialogId+".V.R"+c+"."+h.hiddenControlName);else var n=$gvs(this.dialogId+".V.R"+c+"."+h.controlName);return"undefined"!=typeof m&&"L"==m&&(n=$u.s.toBool(n)),n}return this.originalValues[c-1][h.fullName]}var n=$gvs(this.dialogId+".V.R"+c+"."+e);return n==$ga(this.dialogId+".V.R"+c+"."+e,"A5WatermarkText")&&(n=""),n},setValueFrom:function(e,t){if(e.constructor==Array)for(var i=e.length,s=(t.length,""),a="",n=1;n<=i;n++)s=e[n-1],a=t[n-1],"undefined"!=typeof a&&this.setValue(s,this.getValue(a));else this.setValue(e,this.getValue(t))},setDisabled:function(e){var t="undefined"==typeof arguments[1]||arguments[1];if(e.constructor!=Array)var i=[e];else var i=e;for(var s=!t,a=0;a<i.length;a++){e=i[a].toUpperCase();var n=$cetp($n("V.R1."+e),$(this.dialogId+".R1"));"undefined"!=typeof n.length&&0!=n.length||(n=[$(this.dialogId+".V.R1."+e)]);var o=this.getControl(e);if(o&&"undefined"!=typeof o.setDisabled)o.setDisabled(!s,n);else if("undefined"!=typeof this._buttons[e])this._buttons[e].setDisabled(!s,n);else for(var r=0;r<n.length;r++)n[r].disabled=!s}},setValue:function(e,t){null==t&&(t="");var i=!1;if(e=e.toUpperCase(),this._formControls[e]){var s=this._formControls[e],a=this._forms[s];if(a&&a.autoCommit){a.viewBox.data[e]=t;var n=this.originalValues[0][e];null==n&&(n=""),n!=t?a.viewBox.state.dirty[e]=!0:delete a.viewBox.state.dirty[e],this._populateActive||this._setValueFromForm?this._formsToRefresh[s]=!0:a.viewBox.refresh(!0)}}var o=this._getControlInfo(e);if(e=o.name,"undefined"==typeof o.type){var i=$(this.dialogId+".V.R1."+e);if(i&&("DIV"==i.tagName||"A"==i.tagName||"BUTTON"==i.tagName))return i.innerHTML=t}var r="boolean"!=typeof arguments[2]||arguments[2],l="undefined"!=typeof arguments[3]?arguments[3]:1;if(this.columnInfo[e]){var d="";this.columnInfo[e].info&&(d=this.columnInfo[e].info.controlType);var h=this.columnInfo[e].hiddenVal;if("undefined"==typeof h&&(h=!1),"L"==this.columnInfo[e].dataType&&(t=$u.s.toBool(""+t)),colType=this.columnInfo[e].type.split(",")[0],"undefined"!=typeof this.fieldHelpers[e])if(i=$(this.dialogId+".V.R"+l+"."+o.controlName),h){var c=$(this.dialogId+".V.R1."+o.hiddenControlId);c.value=t,this.fieldHelpers[e].resolveStoredValue(t,o.controlId)}else this.fieldHelpers[e].setValue(t,this.dialogId+".V.R"+l+"."+o.controlName);else if("control"==colType){if($svs("V.R"+l+"."+o.controlName,t,this._functionToConstrainElements),this._controlInst["R"+l+"."+o.controlName]&&this._controlInst["R"+l+"."+o.controlName].setValue(t,r),"Slider"==d){
var u=this.dialogId+".V.R1."+e.toUpperCase()+".SLIDERMESSAGECONTAINER",i=$(u);if(i){var f={};f.value=t;var p=this._controls[e.toUpperCase()].settings._sliderMessageTemplate;this._paintSliderMessage(f,e.toUpperCase(),p)}}}else if("label"==colType||"link"==colType||"img"==colType){if($svs(this.dialogId+".V.R"+l+"."+o.controlName,t),i=$(this.dialogId+".V.R"+l+"."+o.controlName),""==t){var m=this.dialogId+".V.R"+l+"."+o.controlName+"_HIDDENA5FN";$svs(m,t),"img"==colType&&(this._embeddedMode,i.src="data:image/jpg;base64,"+this.nullImage,$(m).src="")}}else"popup-rte"==colType?($svs("V.R"+l+"."+o.controlName,t,this._functionToConstrainElements),$(this.dialogId+".V.R"+l+"."+o.controlName+".DISPLAY").innerHTML=t):"logicalRadio"==colType?(t=t?"True":"False",$svs("V.R"+l+"."+o.controlName,t,this._functionToConstrainElements)):"rte"==colType?($svs("V.R"+l+"."+o.controlName,t,this._functionToConstrainElements),"undefined"!=typeof window[this.dialogId+"_"+o.controlName+"_RTEObj"]._rteObj?window[this.dialogId+"_"+o.controlName+"_RTEObj"]._rteObj.setHTML(t):window[this.dialogId+"_"+o.controlName+"_RTEObj"].setHTML(t)):$svs("V.R"+l+"."+o.controlName,t,this._functionToConstrainElements)}else $svs("V.R"+l+"."+e,t,this._functionToConstrainElements);!i&&r?(i=$n("V.R"+l+"."+o.controlName),i=this._functionToConstrainElements(i),i&&$e.execute(i[0],"change")):r&&$e.execute(i,"change")},fadeOutMessage:function(e,t){var i="undefined"!=typeof arguments[2]?arguments[2]:2e3,s="undefined"==typeof arguments[3]||arguments[3];A5.fadeOutMessage(e,t,i,s,this.styleName)},openLookup:function(e,t){window[this.dialogId+"_LOOKUPGRID_"+e].call(this,t)},fillinLookupValues:function(e,t,i,s){var a=this.getWindow(this.dialogId+".LOOKUP."+t);a&&a.hide();var n=this.getWindow(this._currentOpenLookupWindowName);n&&n.hide();for(var o=1,r=this.lookups[t].fieldsToFillin,l="",d=0;d<e.length;d++)l=r[d],this.setValue(l,e[d],!0,o);this.lookups[t].resetAfterFillin&&window[s+"_GridObj"].showAll(),this._executeEvent("afterLookupGridFillinValues",{})},setRepeatingSectionRowError:function(e,t,i){var s=1,a=this.repeatingSections[e];if("undefined"==typeof a)return!1;a._r[s-1].i[t-1].error=!0,a._r[s-1].i[t-1].errorText=i,this._showHideRowErrorIcons(e);var n=$(this.dialogId+".V.R"+s+"."+e+".I"+t+".CONTENT").parentNode;this.defaultRepeatingSection&&""!=this.defaultRepeatingSection.rowErrorClassName&&$acn(n,this.defaultRepeatingSection.rowErrorClassName)},clearRepeatingSectionRowError:function(e,t){var i=1,s=this.repeatingSections[e];if("undefined"==typeof s)return!1;s._r[i-1].i[t-1].error=!1,this._showHideRowErrorIcons(e);var a=$(this.dialogId+".V.R"+i+"."+e+".I"+t+".CONTENT").parentNode;this.defaultRepeatingSection&&""!=this.defaultRepeatingSection.rowErrorClassName&&$rcn(a,this.defaultRepeatingSection.rowErrorClassName)},_showHideRowErrorIcons:function(e){var t=1,i=this.repeatingSections[e];if("undefined"==typeof i)return!1;for(var s=!1,a=0;a<i._r[t-1].i.length;a++)if(i._r[t-1].i[a].error){s=!0;break}if(s){var n=$(this.dialogId+".V.R"+t+"."+e+".TITLES.ERROR");n&&(n.style.display="");for(var a=1;a<=i._r[t-1].i.length;a++){var n=$(this.dialogId+".V.R"+t+"."+e+".I"+a+".ERROR");if(n){n.style.display="";var o=n.getElementsByTagName("img");i._r[t-1].i[a-1].error?o[0].style.visibility="":o[0].style.visibility="hidden"}}}else{var n=$(this.dialogId+".V.R"+t+"."+e+".TITLES.ERROR");n&&(n.style.display="none");for(var a=1;a<=i._r[t-1].i.length;a++){var n=$(this.dialogId+".V.R"+t+"."+e+".I"+a+".ERROR");n&&(n.style.display="none")}}},setErrors:function(e){for(var t="undefined"!=typeof arguments[1]&&arguments[1],i=0;i<e.length;i++){var s=e[i].id.split(".")[3];if(s=s.split("_A5INSTANCE"),s=s.join(":"),s=s.split("["),s=s[0],this.activateControlContainer(s,!0),$(e[i].id+".CONTROL")&&(e[i].id=e[i].id+".CONTROL"),e[i].id.search("_A5INSTANCE")!=-1){this._rseh.set(e[i].id,e[i].message);for(var a=0;a<this._rseh._e.length;a++)if(this._rseh._e[a].id==e[i].id){this._rseh._e[a].clientSide=t;break}}else{this._eh.set(e[i].id,e[i].message);for(var a=0;a<this._eh._e.length;a++)if(this._eh._e[a].id==e[i].id){this._eh._e[a].clientSide=t;break}}}},showGlobalErrors:function(e,t){var i="";i="<default>"==e.toLowerCase()||""==e?this.dialogId+".GLOBALERRORS":this.dialogId+".V.R1."+e.toUpperCase();var s=$(i);if(!s)return alert("Global Error\n\n"+t),!1;if(this._globalErrorId=s,s.style.display="",t.indexOf("<Hidden>")>-1)return s.style.display="none",!0;s.innerHTML='<span style="color:red;">'+t+"</span>",clearTimeout(this._csvTo);for(var a=s.parentNode;"body"!=a.tagName.toLowerCase()&&"string"!=typeof $ga(a,"A5CustomScroll");)a=a.parentNode;A5.u.element.setScroll(a,s)},showDebuggingInfo:function(e,t){var i="";i="<default>"==e.toLowerCase()||""==e?this.dialogId+".DEBUGUPDATECOMMANDS":this.dialogId+".V.R1."+e.toUpperCase();var s=$(i);return!!s&&(s.style.display="",void(s.innerHTML=t))},clearErrors:function(){try{var e="undefined"==typeof arguments[1]||arguments[1];if("undefined"!=typeof arguments[0]){for(var t=new Array,i=new Array,s=0;s<arguments[0].length;s++)if("number"==typeof arguments[0][s])for(var a=0;a<this._eh._e.length;a++)this._eh._e[a].id.indexOf(".R"+arguments[0][s]+".")>-1&&t.push(this._eh._e[a].id);else $(arguments[0][s]+".CONTROL")&&(arguments[0][s]=arguments[0][s]+".CONTROL"),arguments[0][s].search("_A5INSTANCE")!=-1?i.push(arguments[0][s]):t.push(arguments[0][s]);t.length>0&&this._eh.clear(t),i.length>0&&this._rseh.clear(i)}else this._eh.clear(),this._rseh.clear();if(e){$(this.dialogId+".GLOBALERRORS")&&($(this.dialogId+".GLOBALERRORS").style.display="none");var n=this._globalErrorId;n&&(n.style.display="none")}}catch(o){}},clientSideValidateField:function(e,t,i){var s=this._getControlInfo(e);if(e=s.name,"undefined"!=typeof this.columnInfo[e]&&"undefined"!=typeof this.columnInfo[e].validate){var a=this.getValue(s.fullName);if(this._hiddenControls[e.toUpperCase()])return this.clearErrors([this.dialogId+".V.R"+t+"."+s.controlId],!1),"";var n=this.columnInfo[e].validate.call(this,a,e,t,i);return"string"==typeof n?this.setErrors([{id:this.dialogId+".V.R"+t+"."+s.controlId,message:n}],!0):this.clearErrors([this.dialogId+".V.R"+t+"."+s.controlId],!1),n}},validate:function(){var e="";"function"==typeof arguments[0]?(this.__afterValidateSuccess=arguments[0],e="__hasAfterValidateSucess=true"):e="__hasAfterValidateSucess=false","function"==typeof arguments[1]?(this.__afterValidateFailure=arguments[1],e+="&__hasAfterValidateFailure=true"):e+="&__hasAfterValidateFailure=false";var t="undefined"!=typeof arguments[2]?arguments[2]:"",i="system:validateData";""!=t&&(e=e+"&__currentTabOjbectId="+t,e=e+"&__currentPaneId="+this.genieObjectNavigate(t,"currentPaneId"),i="system:validateFieldsOnPane"),this.ajaxCallback("G",1,i,"",e)},validateField:function(e,t,i){var s="";i>0&&(s=this.columnInfo[e].repeatingSection),this.ajaxCallback("G",1,"system:validateField","","_fieldToValidate="+e+"&_instNum="+i+"&_repeatingSectionName="+s)},validateContainer:function(e){"undefined"!=typeof arguments[1]?arguments[1]:"none","undefined"!=typeof arguments[2]?arguments[2]:"none","undefined"!=typeof arguments[3]?arguments[3]:"none"},runAction:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:"",i=this._actions;if("undefined"==typeof i)return!1;var s=i[e];if("undefined"==typeof s)return!1;if(""!=s){var a=Function(s);a.call(t)}},submit:function(){var e="undefined"!=typeof arguments[0]?arguments[0]:"none",t="undefined"!=typeof arguments[1]?arguments[1]:"",i="undefined"!=typeof arguments[2]?arguments[2]:{},s=!this.submitIfHasClientSideErrors;if(s)for(var a=0;a<this._eh._e.length;a++)if(this._eh._e[a].clientSide)return!1;for(var a=0;a<this._rseh._e.length;a++)if(this._rseh._e[a].clientSide){var n=this._rseh._e[a].id.split(".").pop().split("_A5INSTANCE"),o=this._findRepeatingSection(n[0]);if(!this.repeatingSections[o]._r[0].i[Number(n[1])-1].deleted)return!1}if(!this._executeEvent("canSubmitDialog",{ajaxEvent:"SubmitDialog",submitType:e}))return!1;var r="__submitType="+e;""!=t&&(r=r+"&"+t),this.ajaxCallback("G",1,"system:submitDialog","",r,i)},_isCSSIcon:function(e){var t=e.split("=");return"cssIcon"==t[0]},_getImageHTML:function(e,t){var i="";if(t){var s=A5.u.icon.html(e);i='<span style="margin-right: 5px; float: left;"/>'+s+"</span>"}else i='<img src="'+e+'" style="margin-right: 5px; float: left;"/>';return i},_resetImage:function(e){var t=this.originalValues[0][e];this.setValue(e,t,!1)},resetForm:function(){var e="undefined"==typeof arguments[0]||arguments[0];if(e){if(!this._executeEvent("canResetForm",{}))return!1;var t=this,i=t.resetFormMessage,s=t.resetFormIcon,a=this._isCSSIcon(s),n=this._getImageHTML(s,a);return i='<div style="padding: 10px;" >'+n+i+'<br style="clear: both;" /></div>',A5.msgBox.show(t.resetFormTitle,i,"yn",function(e){"yes"==e&&t.resetForm(!1),delete t}),!1}this.populate(this.originalValues[0]),this.clearErrors(),this._executeEvent("afterResetForm",{})},_confirmAction:function(){var e=this.dirtyFormMessage,t=this.dirtyFormIcon,i=this._isCSSIcon(t),s=this._getImageHTML(t,i);e='<div style="padding: 10px;" >'+s+e+'<br style="clear: both;" /></div>',A5.msgBox.show(this.dirtyFormTitle,e,"O",function(){})},getRepeatingSectionActiveRow:function(e){var t="undefined"!=typeof arguments[1]&&arguments[1],i=this.repeatingSections[e];if("undefined"==typeof i)return!1;if(t){for(var s=0,a=1;a<=i.rows&&(0!=i._r[0].i[a-1].deleted||(s++,a!=i.activeRow));a++);return s}return i.activeRow},setRepeatingSectionActiveLogicalRow:function(e,t){var i=this._repeatingSectionLogicalToPhysicalRow(e,t);i==-1&&(i=1),this.setRepeatingSectionActiveRow(e,i)},setRepeatingSectionActiveRow:function(e,t){var i=1,s=this.repeatingSections[e].activeRow,a=(this.repeatingSectionInfo[e].highlightOnHover,this.repeatingSectionInfo[e].highlightOnSelect);if(s==t)return!1;var n=$(this.dialogId+".V.R"+i+"."+e+".I"+t+".ICON");if(n&&(n.style.visibility="",this.defaultRepeatingSection&&""!=this.defaultRepeatingSection.rowSelectedClassName&&a&&$acn($(this.dialogId+".V.R"+i+"."+e+".I"+t+".CONTENT").parentNode,this.defaultRepeatingSection.rowSelectedClassName),0!=s)){var o=$(this.dialogId+".V.R"+i+"."+e+".I"+s+".ICON");o.style.visibility="hidden",this.defaultRepeatingSection&&""!=this.defaultRepeatingSection.rowSelectedClassName&&a&&$rcn($(this.dialogId+".V.R"+i+"."+e+".I"+s+".CONTENT").parentNode,this.defaultRepeatingSection.rowSelectedClassName)}this.repeatingSections[e].activeRow=t,this._executeEvent("onRptSectionRowChange",{sectionName:e,rowNumber:t,previousRowNumber:s})},_findRepeatingSection:function(e){var t=this.repeatingSectionInfo;if("undefined"==typeof t)return!1;for(var i in t)for(var s=t[i].controls,a=1;a<=s.length;a++)if(s[a-1]==e.toUpperCase())return i;return""},getInstanceNumber:function(e){var t=this._findRepeatingSection(e.toUpperCase());if(""==t)return"";var i=this.repeatingSections[t];return i.activeRow},harvestRepeatingSectionColumn:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:",",i="undefined"!=typeof arguments[2]?arguments[2]:"",s="undefined"!=typeof arguments[3]?arguments[3]:"",a=this._findRepeatingSection(e);if(""==a)return!1;e=e.toUpperCase();var n=this.repeatingSections[a];if("undefined"==typeof n)return!1;var o=1,r=n.rows,l=[];""!=i&&("width"==i?("undefined"==typeof n._r[o-1].hc&&(n._r[o-1].width={}),n._r[o-1].width[e]=s):("undefined"==typeof n._r[o-1].hc&&(n._r[o-1].hc={}),n._r[o-1].hc[e]=i));for(var d=1;d<=r;d++)""==i?0==n._r[o-1].i[d-1].deleted&&l.push(this.getValue(e+":"+d)):this._hideRSColumnLow(e,d,i,s);var h=l.join(t);return h},setRepeatingSectionColumnWidth:function(e,t){return"containerwidth"!=this._layoutMode?(alert("Set column width only supported for 'ContainerWidth' mode"),!1):void this.harvestRepeatingSectionColumn(e,",","width",t)},_hideRSColumnLow:function(e,t,i){var s="undefined"!=typeof arguments[3]?arguments[3]:"";ele=$(this.dialogId+".V.R1."+e+"_A5INSTANCE"+t),tEle=$(this.dialogId+".V.R1."+e+".RSTITLE"),cEle=!1,ctEle=!1;for(var a="";"body"!=ele.tagName.toLowerCase();){if(a=ele.className.toLowerCase(),a.search("a5container")!=-1||a.search("a5cwlayout")!=-1){cEle=ele;break}ele=ele.parentNode}if(tEle)for(;"body"!=tEle.tagName.toLowerCase();){if("a5container"==tEle.className.toLowerCase()||"a5cwlayout"==tEle.className.toLowerCase()){ctEle=tEle;break}tEle=tEle.parentNode}var n=!1,o=!1;cEle&&(n=cEle.nextSibling),ctEle&&"a5cwlayout"!=ctEle.className.toLowerCase()&&(o=ctEle.nextSibling),"width"==i&&(cEle&&(cEle.style.width=s),ctEle&&(ctEle.style.width=s),n&&"undefined"!=typeof n.style&&(n.style.width=s),o&&"undefined"!=typeof o.style&&(o.style.width=s)),"hide"==i&&(cEle&&(cEle.style.display="none"),ctEle&&(ctEle.style.display="none"),n&&"undefined"!=typeof n.style&&(n.style.display="none"),o&&"undefined"!=typeof o.style&&(o.style.display="none")),"show"==i&&(cEle&&(cEle.style.display=""),ctEle&&(ctEle.style.display=""),n&&"undefined"!=typeof n.style&&(n.style.display=""),o&&"undefined"!=typeof o.style&&(o.style.display="")),"visibility_hide"==i&&(cEle&&(cEle.style.visibility="hidden"),ctEle&&(ctEle.style.visibility="hidden"),n&&(n.style.visibility="hidden"),o&&(o.style.visibility="hidden")),"visibility_show"==i&&(cEle&&(cEle.style.visibility="visible"),ctEle&&(ctEle.style.visibility="visible"),n&&(n.style.visibility=""),o&&(o.style.visibility=""))},hideRepeatingSectionColumn:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:"hide";this.harvestRepeatingSectionColumn(e,"",t)},addRepeatingSectionRow:function(e){"undefined"==typeof arguments[1]||arguments[1];if(!this._executeEvent("canRptSectionRowAdd",{sectionName:e}))return!1;var t=this._isDirty,i=1,s=this.repeatingSections[e];if("undefined"==typeof s)return!1;var a=$(this.dialogId+".V.R"+i+"."+e);if(s.usedRows<s.rows){var n=s.usedRows+1;s.usedRows=n;var o=$(this.dialogId+".V.R"+i+"."+e+".I"+n);o.style.display="",$(this.dialogId+".V.R"+i+"."+e+".CONTENT")&&(a=$(this.dialogId+".V.R"+i+"."+e+".CONTENT")),a.firstChild.id==a.id+".SCROLLWRAPPER"&&(a=a.firstChild)}else{$(this.dialogId+".V.R"+i+"."+e+".CONTENT")&&(a=$(this.dialogId+".V.R"+i+"."+e+".CONTENT")),a.firstChild.id==a.id+".SCROLLWRAPPER"&&(a=a.firstChild);var r=document.createElement("div"),l=$(this.dialogId+".V.R"+i+"."+e+".I[instanceNumber]"),d=l.innerHTML,n=s.rows+1;if("undefined"==typeof d)return!1;d=d.split("[instanceNumber]").join(""+n),r.innerHTML=d,r.id=this.dialogId+".V.R"+i+"."+e+".I"+n,a.insertBefore(r,$(this.dialogId+".V.R"+i+"."+e+".I"+s.rows).nextSibling),this._prepareRepeatingSectionRow(e,n,i),s.rows=n,s.usedRows=n}s._r[0].i[n-1].deleted=!1;var h={};for(colName in s._ci)"undefined"!=typeof this.defaultValues.A5REPEATINGSECTIONDATA?(h[colName+":"+n]=this.defaultValues.A5REPEATINGSECTIONDATA[colName],this.originalValues[i-1][colName+":"+n]=this.defaultValues.A5REPEATINGSECTIONDATA[colName]):(h[colName+":"+n]=this.defaultValues[colName],this.originalValues[i-1][colName+":"+n]=this.defaultValues[colName]);this.populate(h,i,"incremental",!1),this.setRepeatingSectionActiveRow(e,n),this._repeatingSectionFix(e,i),this._isDirty=t,this._fireWatches(i),a&&A5.u.element.setScroll(a,0,a.scrollHeight),this._executeEvent("afterRptSectionRowAdd",{sectionName:e,rowNumber:n}),this._getRepeatingSectionLogicalRowNumber(e);for(var c="",u="",f=0;f<this.repeatingSectionInfo[e].controls.length;f++){var u=this.repeatingSectionInfo[e].controls[f];c=this.getControl(u),"undefined"!=typeof c&&"undefined"!=typeof c._sliderMessageTemplate&&this._paintSliderMessage(c,u,c._sliderMessageTemplate)}},_repeatingSectionRowHasKey:function(e,t){if("undefined"==typeof this.stateInfo)return!1;if("undefined"==typeof this.stateInfo.keys)return!1;var i=this.repeatingSectionInfo[e].boundAliases[0];if("undefined"==typeof i)return!1;var s=i+"_row"+t;return"undefined"!=typeof this.stateInfo.keys[s]},_cleanRepeatingSections:function(){for(var e in this.repeatingSections)for(var t=0;t<this.repeatingSections[e]._r.length;t++)for(var i=0;i<this.repeatingSections[e]._r[t].i.length;i++)this.repeatingSections[e]._r[t].i[i].dirty=!1},deleteRepeatingSectionRow:function(e){var t="undefined"!=typeof arguments[2]&&arguments[2],i=this.repeatingSections[e];if("undefined"==typeof i)return!1;var s=1,a="undefined"!=typeof arguments[1]?arguments[1]:-1;if(a<1&&(a=i.activeRow),!this._executeEvent("canRptSectionRowDelete",{sectionName:e,rowNumber:a}))return!1;if(a>0){var n=this._repeatingSectionRowIsDirty(e,a),o=this._repeatingSectionRowHasKey(e,a);o&&(n=!0);var r=!0;if(0==t&&1==n){var l=this,d=l.repeatingSectionInfo[e].prompt,h=l.repeatingSectionInfo[e].icon,c=this._isCSSIcon(h),u=this._getImageHTML(h,c);d='<div style="padding: 10px;" >'+u+d+'<br style="clear: both;" /></div>';var f=l.repeatingSectionInfo[e].title;return A5.msgBox.show(f,d,"yn",function(t){"yes"==t&&(l._deleteRepeatingSectionRowLow(e,a),l._isDataDirty=!0,l._variablesChanged(["dialog.isDataDirty"],s),l.refreshClientSideComputations(),l._executeEvent("afterRptSectionRowDelete",{sectionName:e,rowNumber:a}),l._repeatingSectionFix(e,s)),delete l}),!1}r&&(this._deleteRepeatingSectionRowLow(e,a),this._executeEvent("afterRptSectionRowDelete",{sectionName:e,rowNumber:a}))}this._repeatingSectionFix(e,s),this._getRepeatingSectionLogicalRowNumber(e)},_deleteRepeatingSectionRowLow:function(e,t){var i=(this._repeatingSectionRowIsDirty(e,t),1);this._setRowState(i,!0);var s=this.repeatingSections[e];if("undefined"==typeof s)return!1;var a=$(this.dialogId+".V.R"+i+"."+e+".I"+t);a.style.display="none",s._r[i-1].i[t-1].deleted=!0,s._r[i-1].i[t-1].dirty=!0;var n=this._repeatingSectionNextRow(e,t);n>0&&this.setRepeatingSectionActiveRow(e,n),this._repeatingSectionFix(e,i),this._getRepeatingSectionLogicalRowNumber(e)},_getRepeatingSectionRowCount:function(e){if("undefined"==typeof this.repeatingSections)return!1;var t=this.repeatingSections[e];if("undefined"==typeof t)return!1;for(var i=0,s=1,a=1;a<=t.rows;a++)1!=t._r[s-1].i[a-1].deleted&&i++;return i},_setRepeatingSectionColumnDefaultValues:function(e){e=e.toUpperCase();var t=this.repeatingSections[e];if("undefined"==typeof t)return!1;for(var i=t.rows,s=this.repeatingSectionInfo[e],a=s.controls,n="",o=!1,r=0;r<a.length;r++){n=this.defaultValues.A5REPEATINGSECTIONDATA[a[r]],o=!1,"undefined"!=typeof this._cascadingControlsChildren&&(o=$u.a.find(this._cascadingControlsChildren,a[r])!=-1);for(var l="",d=1;d<=i;d++)l=this.dialogId+".V.R1."+a[r]+"_A5INSTANCE"+d,l=$(l),l.disabled=o,this.setValue(a[r]+":"+d,n,!1),$sa(l,"a5isdirty","false")}},_RepeatingSectionFixImagesIE_All:function(){if("undefined"==typeof this.repeatingSections)return!0;var e=this.repeatingSections;if("undefined"==typeof e)return!1;for(var t in e)this._RepeatingSectionFixImagesIE(t)},_RepeatingSectionFixImagesIE:function(e){if(e=e.toUpperCase(),"undefined"==typeof this.repeatingSections)return!0;var t=this.repeatingSections[e];if("undefined"==typeof t)return!1;for(var i=t.rows,s=this.repeatingSectionInfo[e],a=s.controls,n="",o=0;o<a.length;o++)if(n=this.columnInfo[a[o]].type,"img,img"==n)for(var r="",l=1;l<=i;l++)r=this.dialogId+".V.R1."+a[o]+"_A5INSTANCE"+l,r=$(r),$svs(r,$gvs(r))},_setRepeatingSectionRowCount:function(e,t){t=Number(t),this._fireWatchesFlag=!1;var i="undefined"==typeof arguments[2]||arguments[2],s="undefined"==typeof arguments[3]||arguments[3],a=1,n=0;if("undefined"==typeof this.repeatingSections)return!1;var o=this.repeatingSections[e];if("undefined"==typeof o)return!1;o.usedRows=t;for(var r=o.rows,l=1;l<=r;l++)1==o._r[a-1].i[l-1].deleted?s&&this.undeleteRepeatingSectionRow(e,l):s&&(n=$(this.dialogId+".V.R"+a+"."+e+".I"+l),n&&(n.style.display="")),s&&this._setRepeatingRowValuesToNull(e,l);if(t>r)for(var d=t-r,l=1;l<=d;l++)this.addRepeatingSectionRow(e,i);if(r>t)for(var h=r-t,c=0,n=0,l=1;l<=h;l++)c=r-l+1,n=$(this.dialogId+".V.R"+a+"."+e+".I"+c),n&&(n.style.display="none"),o._r[a-1].i[c-1].deleted=!0;if(!s){var u=this._getRepeatingSectionRowCount(e),f=t-u;if(f>0)for(var l=1;l<=f;l++)this.addRepeatingSectionRow(e,i)}this._fireWatchesFlag=!0,this._fireWatches(a),i&&this.setRepeatingSectionActiveRow(e,1)},_setRepeatingRowValuesToNull:function(e,t){for(var i=this.repeatingSectionInfo[e],s=1,a=1;a<=i.controls.length;a++)this.originalValues[0][i.controls[a-1]+":"+t]="",this.setValue(i.controls[a-1]+":"+t,"",!1),$sa(this._functionToConstrainElements($n("V.R"+s+"."+i.controls[a-1])),"A5IsDirty","false")},undeleteRepeatingSectionRow:function(e,t){var i=this.repeatingSections[e];if("undefined"==typeof i)return!1;var s=1;i._r[s-1].i[t-1].deleted=!1;var a=this.dialogId+".V.R"+s+"."+e+".I"+t,n=$(a);n&&(n.style.display="",this.setRepeatingSectionActiveRow(e,t))},_repeatingSectionNextRow:function(e,t){var i=1,s=this.repeatingSections[e];if("undefined"==typeof s)return!1;for(var a=s._r[i-1].i,n=t+1;n<=s.rows;n++)if(0==a[n-1].deleted)return n;for(var n=t-1;n>=1;n--)if(0==a[n-1].deleted)return n;return-1},_repeatingSectionFix:function(e,t){var i=this.repeatingSections[e];if("undefined"==typeof i)return!1;for(var s=0;s<i._r[t-1].i.length;s++)if(0==i._r[t-1].i[s].deleted){var a=$(this.dialogId+".V.R"+t+"."+e+".I"+(s+1)+".DIVIDER");a&&(a.style.display="none");break}this.refreshClientSideComputations()},accordionPanes:function(e,t){t=t.toUpperCase()[0];var i=!0;"O"==t&&(i=!1);for(var s=window[this.dialogId+".V.R1."+e+"Obj"],a=s.bands.length,n=1;n<=a;n++)s.bands[n-1].expanded==i&&s.select(n-1,!0)},genieObjectNavigate:function(e,t){var i="undefined"!=typeof arguments[2]?arguments[2]:1;t=t.toLowerCase();var s=this.dialogId+".V.R1."+e+"Obj",a=window[s];if(!a)return!1;var n="";if("undefined"!=typeof a.panes)n=a.panes;else{if("undefined"==typeof a.bands)return!1;n=a.bands}var o=-1;if(o="undefined"!=typeof a._curTabIndx?a._curTabIndx:a._curBandIndx,"currentpaneid"==t)return o;for(var r=[],l=0;l<n.length;l++)n[l].show&&r.push(l);var d=0,h=r[r.length-1],c=$u.a.find(r,o);"next"==t&&(d=r[c+1]),"prev"==t&&(d=r[c-1]),"first"==t&&(d=r[0]),"last"==t&&(d=r[h]),"undefined"!=typeof d&&(a.select(d),this._variablesChanged(["dialog.tabObject."+e],i)),this.genieButtonStates(e)},genieButtonStates:function(e){var t={};this._getTabObjectInfo(t,e);var i=$(this.dialogId+"."+e+".PREVIOUS"),s=$(this.dialogId+"."+e+".NEXT"),a=$(this.dialogId+"."+e+".SUBMIT");i&&(t.tabObject[e].isOnFirstPane?i.style.display="none":i.style.display=""),s&&(t.tabObject[e].isOnLastPane?s.style.display="none":s.style.display=""),a&&(t.tabObject[e].isOnLastPane?a.style.display="":a.style.display="none")},cascadingDropdown:function(e,t,i,s,a){var n=this._cascadingControls,o=a,r=0;if(o=o.split("_A5INSTANCE"),""!=o[1]&&(r=o[1]),o=o[0],o=o.split("."),o=o[o.length-1],$u.a.find(n,o)==-1)return!1;s="O";var l="";return l=l+"__dropdownValue="+urlencode(t),l=l+"&__childControls="+urlencode(i),l=l+"&__thisControl="+urlencode(o),l=l+"&__part="+urlencode(s),l=l+"&__part2="+urlencode(s),l=l+"&_rowNumber="+urlencode(e),l=l+"&_instanceNumber="+r,this._executeEvent("beforeAjaxCallback",{ajaxEvent:"cascadingDropdown"}),this.ajaxCallback("G",1,"system:cascadingDropdown","",l),!1},_getControlInfo:function(e){e=e.toUpperCase();var t="";t=e.search(":")!=-1?e.split(":"):e.split("_A5INSTANCE");var i={name:t[0],controlName:t[0],controlId:t[0],fullName:t[0],calculateSummary:!1,instNum:-1,hiddenControlName:t[0]+"_A5HIDDENVALUE",hiddenControlId:t[0],hiddenValue:!1};if(this.columnInfo[t[0]]){if("undefined"!=typeof this.columnInfo[t[0]].repeatingSection){var s=0,a=this.repeatingSections[this.columnInfo[t[0]].repeatingSection];t.length>1&&(s=$u.s.toNum(""+t[1])),s<=0&&(s=a.activeRow),s>a.rows&&(s=a.rows),i.controlName=i.name+"_A5INSTANCE"+s,i.hiddenControlName=i.name+"_A5HIDDENVALUE_A5INSTANCE"+s,i.fullName=i.name+":"+s,i.instNum=s}i.controlId=i.controlName,i.hiddenControlId=i.hiddenControlName,this.columnInfo[i.name].isArray&&"control"!=this.columnInfo[i.name].type&&(i.controlName=i.controlName+"[]"),this.columnInfo[i.name].calculateSummary&&(i.calculateSummary=this.columnInfo[i.name].calculateSummary),this.columnInfo[i.name].type&&(i.type=this.columnInfo[i.name].type),this.columnInfo[i.name].info&&(i.info=this.columnInfo[i.name].info),this.columnInfo[i.name].hiddenVal&&(i.hiddenValue=this.columnInfo[i.name].hiddenVal)}return i},_summarize:function(e,t){var i="undefined"==typeof arguments[2]||arguments[2];e=e.toUpperCase();var s=this._getControlInfo(e);e=s.name;var a=this.columnInfo[e].repeatingSection,n=this.repeatingSections[a];if("undefined"==typeof n)return!1;for(var o=[],r=1;r<=n.rows;r++)0==n._r[t-1].i.length?o.push(this.getValue(e+"_A5INSTANCE"+r,t)):n._r[t-1].i[r-1].deleted||o.push(this.getValue(e+"_A5INSTANCE"+r,t));if("N"==this.columnInfo[e].dataType){var l={count:o.length,total:0,average:0,first:0,last:0,minimum:0,maximum:0,standardDeviation:0,variance:0};if(l.count>0){for(var r=0;r<o.length;r++)o[r]=$u.s.toNum(o[r]),l.total+=o[r];var d=1e7;l.total=Math.round(l.total*d)/d,l.average=l.total/l.count,l.first=o[0],l.last=o[o.length-1],o.sort(function(e,t){return e-t}),l.minimum=o[0],l.maximum=o[o.length-1];for(var h=0,c=0,r=0;r<o.length;r++)c=o[r]-l.average,c*=c,h+=c;l.variance=h/l.count,l.standardDeviation=Math.sqrt(h/l.count)}}else{var l={count:o.length,first:"",last:"",minimum:"",maximum:""};l.count>0&&(l.first=o[0],l.last=o[o.length-1],o.sort(),l.minimum=o[0],l.maximum=o[o.length-1])}this.rowStateInfo[t-1].summary[e]={},$u.o.assign(this.rowStateInfo[t-1].summary[e],l),i&&this._variablesChanged(["summary."+e],t)},_variablesChanged:function(e,t){for(var i in this.dialogWatches)if(this.dialogWatches[i].variables)for(var s=0;s<e.length;s++)if($u.a.find(this.dialogWatches[i].variables,e[s])!=-1){A5.Watch.fire(this.dialogId+".R"+t+"."+i);break}},setStateInfo:function(e){$u.o.assign(this.stateInfo,e)},getStateInfo:function(){var e=$u.o.toParams(this.stateInfo,"_state"),t=this._getListsState();e=e+"&"+A5.ajax.buildURLParam("_state.listsControls",t);var i=this._securityAction;return"undefined"==typeof i&&(i=""),e=e+"&__securityAction="+i},_getListsState:function(){var e=this._controlInst,t="",i="",s=[],a={};for(var n in e)if(t=e[n],i=n.split(".")[1],"undefined"!=typeof this._listViewSettings[i]){delete a;var a={};a.name=i,a.state=t._state,s.push(a)}return JSON.stringify(s)},refreshCaptcha:function(e){var t=1,i="_captchaName="+e+"&_rowNum="+t;this.ajaxCallback("G",1,"system:refreshCaptcha","",i)},newRecord:function(){var e="undefined"!=typeof arguments[0]?arguments[0]:{},t="";if(t=this._executeEvent("canRecordNavigate",{isDirty:this._isDirty,isDataDirty:this._isDataDirty,target:"newRecord"}),0==t)return this._setSliderPosition(this._currentRecordNumber,!1),"undefined"!=typeof this._primaryKeyListNavigator&&this._primaryKeyListNavigator.setValue(this._currentRecordNumber-1,!1),!1;var i="_newRecord=yes&_newRecordOptions="+$u.o.toJSON(e);if(delete this.stateInfo.keys,this.ajaxCallback("G",1,"system:newRecord","",i),this._executeEvent("afterRecordNavigate",{target:"newRecord"}),"undefined"!=typeof this._signatureControls)for(var s=0;s<this._signatureControls.length;s++)this._functions._fillCanvas(this._signatureControls[0]),this._functions._toggleCanvas(this._signatureControls[0],"canvas");for(var a in this.repeatingSections)this.setRepeatingSectionActiveRow(a,1);if("undefined"!=typeof this.__navigationSliderObject){var n=parseInt(this.__navigationSliderObject.max);this._setSliderPosition(n,!1);var o="New record";"undefined"!=typeof this.navigationSliderNewRecordMsg&&(o=this.navigationSliderNewRecordMsg),$(this.__sliderDynMsgId)&&($(this.__sliderDynMsgId).innerHTML=o),this._currentRecordNumber=-1}"undefined"!=typeof this._primaryKeyListNavigator&&this._primaryKeyListNavigator.setValue(-1,!1)},serverIsAvailable:function(e){var t=this.ajaxURL.split("?")[0];"undefined"==typeof t?t="":(t=t.split("/"),t.pop(),t=t.join("/"),""!=t&&(t+="/")),"undefined"==typeof e&&(e=300);var i=("undefined"!=typeof arguments[1]?arguments[1]:{},"undefined"!=typeof arguments[1]?arguments[1]:function(){}),s="undefined"!=typeof arguments[2]?arguments[2]:function(){};if(this._embeddedMode)return i(),!0;var a=new Date,n=function(){A5._serverAvailable=!1,A5._serverCheckTime=a},o=function(){A5._serverAvailable=!0,A5._serverCheckTime=a},r="__a5ServerAvailableTest.a5w";r=t+r;var l={};return l.method="head",l.timeout=e,l.errorHandle=function(){n(),s()},l.handle=function(){o(),i()},"undefined"!=typeof this._onlineStatus&&"offline"==this._onlineStatus?(l.errorHandle(),!1):void new $a.simple(r,l)},saveDataInRepository:function(e){var t="_repositoryKey="+e;this.ajaxCallback("G",1,"system:saveDataInRepository","",t)},loadDataFromRepository:function(e){var t="undefined"!=typeof arguments[1]&&arguments[1],i="_repositoryKey="+e+"&_delete="+t;this.ajaxCallback("G",1,"system:loadDataFromRepository","",i)},clearLoginErrors:function(){var e=this._loginErrorsPH;return"undefined"!=typeof e&&(ele=this.dialogId+".V.R1."+e,void(ele&&(ele.style.display="none",ele.innerHTML="")))},login:function(){var e="undefined"!=typeof arguments[0]?arguments[0]:{};if(0==this._executeEvent("canLogin",{}))return!1;var t=A5.ajax.buildURLParam("__loginSettings",$u.o.toJSON(e));this.ajaxCallback("","","system:login","",t)},logout:function(){var e=this._executeEvent("canLogout",{});if(0==e)return!1;var t="",i="";if("undefined"!=typeof A5.__loginPage&&(i=A5.__loginPage),"undefined"!=typeof A5.__loginFrom&&(t=A5.__loginFrom),""==i)return alert("This method can only be used if the user logged in from the AppLauncher component, or from a UX with intergrated login functionality"),!1;var s=A5.ajax.buildURLParam("__redirectPage",A5.__loginPage);s=s+"&__loginFrom="+t,"ux"==t?this.dialogId==A5.__loginUX?this.ajaxCallback("","","system:logout","",s):window[A5.__loginUX+"_DlgObj"].logout():this.ajaxCallback("","","system:logout","",s)},loggedInUserNameFriendlyGet:function(){return"undefined"!=typeof A5.__loginUserNameFriendly?A5.__loginUserNameFriendly:""},loginAlternative:function(e){if(0==this._executeEvent("canLogin",{}))return!1;var t=A5.ajax.buildURLParam("__pagename",window.location.pathname);this.ajaxCallback("","","","__a5ExternalAuthentication.a5w",t+"&state="+e+"|"+this.dialogId+"_DlgObj&__Mode=1N")},addAlternativeLoginToCurrentUser:function(e){var t=A5.ajax.buildURLParam("__pagename",window.location.pathname),i="undefined"!=typeof arguments[1]?arguments[1]:{};this.ajaxCallback("","","","__a5ExternalAuthentication.a5w",t+"&state="+e+"|"+this.dialogId+"_DlgObj&__Mode=2&__variableName="+i)},ajaxCallbackCrossDomain:function(e,t){var i="undefined"!=typeof arguments[2]&&arguments[2],s="undefined"!=typeof arguments[3]?arguments[3]:"callback";return i?"undefined"==typeof jQuery?(alert("This method required jQuery. See Project Properties dialog to turn on jQuery."),!1):void jQuery.ajax({url:e,contentType:"application/json",dataType:"jsonp",success:t}):(this._ajaxCallbackCrossDomain(e,t,s),!0)},getOAuthAccessToken:function(e){var t=A5.ajax.buildURLParam("__pagename",window.location.pathname),i="undefined"!=typeof arguments[1]?arguments[1]:{};this.ajaxCallback("","","","__a5ExternalAuthentication.a5w",t+"&state="+e+"|"+this.dialogId+"_DlgObj&__Mode=3&__variableName="+i)},_ajaxCallbackCrossDomain:function(e,t){var i="undefined"!=typeof arguments[2]?arguments[2]:"callback",s=document.createElement("script");s.src=e+"&"+i+"="+t,s.onload=function(){this.parentNode.removeChild(this)},document.head.appendChild(s)},_executeAjaxCallbackCompleteCode:function(e){var t=this._ajaxCallbackCompleteCode[e];"undefined"!=typeof t&&("undefined"!=typeof arguments[1]?t[arguments[1]].call():t.call(),delete this._ajaxCallbackCompleteCode[e])},ajaxCallback:function(e,t,i){if(!this._executeEvent("canAjaxCallback",{xbasicFunctionName:i,ajaxEvent:"AjaxCallback"}))return!1;e=e.toUpperCase().substring(0,1);var s="undefined"!=typeof arguments[3]?arguments[3]:"",a="undefined"!=typeof arguments[4]?arguments[4]:"",n="undefined"!=typeof arguments[5]?arguments[5]:{},o=n.flagSaveListData;if("undefined"==typeof o&&(o=!1),"undefined"!=typeof this._onlineStatus&&"offline"==this._onlineStatus)return"function"==typeof n.deviceOfflineFunction&&n.deviceOfflineFunction.apply(this),
this._executeEvent("onAjaxCallbackNotAvailable",{xbasicFunctionName:i,ajaxEvent:"AjaxCallback"}),!1;var r="",l=A5.UUID();if("undefined"!=typeof n.onComplete){r=n.onComplete;var d=this._ajaxCallbackCompleteCode;d[l]=r}var h=!0;"undefined"!=typeof n.submitFormData&&(h=n.submitFormData);var c=!1,u=this.locationHighAccuracy,f=this.locationTimeout,p=this.locationMaximumAge,m=this.ajaxCallbackTimeout;"undefined"!=typeof n.getLocationData&&(c=n.getLocationData),"undefined"!=typeof n.enableHighAccuracy&&(u=n.enableHighAccuracy),"undefined"!=typeof n.timeout&&(f=n.timeout),"undefined"!=typeof n.maximumAge&&(p=n.maximumAge),"undefined"!=typeof n.ajaxCallbackTimeout&&(m=n.ajaxCallbackTimeout);var _="";if("undefined"!=typeof n.errorFunction&&(_=n.errorFunction),""==t&&(t=1),"undefined"==typeof t&&(t=1),isNaN(t))if("all"==t.toLowerCase()||"all:all"==t.toLowerCase())var g=this._selectedRow;else if("none"==t.toLowerCase()||"none:none"==t.toLowerCase())var g=this._selectedRow;else if(t.indexOf(":")==-1)var g=this._selectedRow;else{var v=new String(t),g=v.split(":")[0];v.split(":")[1]}else var g=t;var y="";1==h&&(y=this.harvest({flagHarvestImageData:!o}));var b=$u.o.toJSON(A5.flags);y=y+"&"+A5.ajax.buildURLParam("__a5browserflags",b),y=y+"&_part="+e,y="&"+y;var w=[];for(var I in this._hiddenControls)w.push(I);y=y+"&_hiddenControls="+JSON.stringify(w);var C={},A="";if(h)for(var N in this.repeatingSections){if(A="_repeatingSections."+N,C=this.repeatingSections[N],"undefined"==typeof C)return!1;y=y+"&"+A+".activeRow="+C.activeRow,y=y+"&"+A+".visibleRows="+this.getRepeatingSectionVisibleRows(N);for(var $=[],x=[],E=1;E<=C.rows;E++)C._r[g-1].i[E-1].deleted&&$.push(E),C._r[g-1].i[E-1].dirty&&x.push(E);y=y+"&"+A+".deletedRows="+$.join(","),y=y+"&"+A+".dirtyRows="+x.join(",")}""==s?(y="_XbasicFunction="+i+"&_currentRow="+g+"&__FormAction=GenericAjaxCallback&__FormID="+this.gridId+y,s=this.ajaxURL):y="_Action="+i+"&_currentRow="+g+"&__FormAction=GenericAjaxCallback&__FormID="+this.gridId+y,""!=a&&(y=y+"&"+a),y=y+"&"+this.getStateInfo(),y=y+"&__componentGUID="+this.componentGUID+"&__instanceGUID="+this._getInstanceId(!1),y=y+"&__callbackId="+l;var R={};R.errorHandleContext={xbasicFunctionName:i,ajaxEvent:"AjaxCallback",_uerrorFn:_},R.errorHandle=Function(this.dialogId+"_DlgObj._executeEvent('onAjaxCallbackFailed',this); if(this._uerrorFn.constructor == Function) this._uerrorFn(); "),R.timeout=m;var D=["var obj = "+this.dialogId+"_DlgObj;","if(arguments[0].status == 401) {","\tobj._executeEvent('securityNotAuthenticated',{xbasicFunctionName: '"+i+"' }); return false;","}","if(arguments[0].status == 403) {","\tobj._executeEvent('securityPermissionDenied',{xbasicFunctionName: '"+i+"' }); return false;","}","obj._executeEvent('onAjaxCallbackFailed',this); if(this._uerrorFn.constructor == Function) this._uerrorFn(); "].join("\n");if(R.errorHandle=Function(D),(this._embeddedMode||this._livePreviewInBuilder)&&(c=!1),!c){var T="&__locationFound=false";return y+=T,A5.ajax.callback(s,y,R),!1}navigator.geolocation.getCurrentPosition(function(e){var t=(e.coords.latitude+","+e.coords.longitude,"&__locationFound=true&__locationLatitude="+e.coords.latitude+"&__locationLongitude="+e.coords.longitude);return y+=t,A5.ajax.callback(s,y,R),!1},function(e){var t="&__locationFound=false";return y+=t,A5.ajax.callback(s,y,R),!1},{enableHighAccuracy:u,timeout:f,maximumAge:p})},_getRepeatingSectionInfo:function(){var e=1,t="",i={},s="";for(var a in this.repeatingSections){if(s="_repeatingSections."+a,i=this.repeatingSections[a],"undefined"==typeof i)return!1;t=t+"&"+s+".activeRow="+i.activeRow;for(var n=[],o=[],r=1;r<=i.rows;r++)i._r[e-1].i[r-1].deleted&&n.push(r),i._r[e-1].i[r-1].dirty&&o.push(r);t=t+"&"+s+".deletedRows="+n.join(","),t=t+"&"+s+".dirtyRows="+o.join(","),t=t+"&"+s+".visibleRows="+this.getRepeatingSectionVisibleRows(a)}return t},_dvButtonEnabled:function(){return!1},_getDialogVariables:function(e,t,i){e.activeLayoutRule=this._activeLayoutRule,e.orientation=this.getOrientation(),e.loggedInUserName="",e.loggedInUserNameFriendly="",e.isLoggedIn=!1,"undefined"!=typeof A5.__loginUserName&&(e.loggedInUserName=A5.__loginUserName),"undefined"!=typeof A5.__loginUserNameFriendly&&(e.loggedInUserNameFriendly=A5.__loginUserNameFriendly),""!=e.loggedInUserName&&(e.isLoggedIn=!0),e.isDirty=this._isDirty,e.isDataDirty=this._isDataDirty,e.isNewRecord=!0;var s=this._primaryTableAlias;if(""!=s&&"undefined"!=typeof this.stateInfo.keys&&"undefined"!=typeof this.stateInfo.keys[s]&&(e.isNewRecord=!1),e.firstRecord=!1,e.lastRecord=!1,"undefined"!=typeof a&&"undefined"!=typeof this._currentRecordNumber){var a=this._primaryKeyList;e.firstRecord=!1,e.lastRecord=!1,1==this._currentRecordNumber?(e.firstRecord=!0,e.lastRecord=!1):this._currentRecordNumber==a.length&&(e.firstRecord=!1,e.lastRecord=!0)}e.activePanelId=this.panelGetActive(),e.activePanelName="",""!=e.activePanelId&&(e.activePanelName=window[this.dialogId+"_PanelObj"]._displayNames[e.activePanelId]);var n=this.rowStateInfo[i.rowNumber-1];if("undefined"!=typeof n&&$u.o.assign(t,this.rowStateInfo[i.rowNumber-1].summary),this._tabObjects.length>0)for(var o in this._tabObjects)this._getTabObjectInfo(e,this._tabObjects[o]);var r="";e.listDetailView={},e.listRow={};for(var l=this._listControls,o=0;o<l.length;o++)e.listDetailView[l[o].toUpperCase()]={},e.listDetailView[l[o].toUpperCase()].isDirty=!1,e.listRow[l[o].toUpperCase()]={},e.listRow[l[o].toUpperCase()].isDirty=!1,e.listRow[l[o].toUpperCase()].isRowSelected=!1,e.listDetailView[l[o].toUpperCase()].mode="";var d=!1;if("undefined"!=typeof this._listsDV)for(var o=0;o<this._listsDV.length;o++)r=this.getControl(this._listsDV[o]),r?(e.listDetailView[this._listsDV[o]]={},e.listDetailView[this._listsDV[o]].isDirty=r.detailViewIsDirty(),e.listRow[this._listsDV[o]]={},e.listRow[this._listsDV[o]].isDirty=r.listRowIsDirty(),d=!1,"undefined"!=typeof r.selection&&1==r.selection.length&&(d=!0),e.listRow[l[o].toUpperCase()].isRowSelected=d,e.listDetailView[this._listsDV[o]].mode=r._dvmode):(e.listDetailView[this._listsDV[o]]={},e.listDetailView[this._listsDV[o]].isDirty=!1,e.listRow[this._listsDV[o]]={},e.listRow[this._listsDV[o]].isDirty=!1,e.listDetailView[this._listsDV[o]].mode="");if(e.hasDirtyLists=!1,e.list={},"undefined"!=typeof this._listViewSettings){for(var h in this._listViewSettings)e.list[h]={},e.list[h].isDirty=!1;for(var h="",c="",o=0;o<this._listsDV.length;o++)h=this._listsDV[o],r=this.getControl(this._listsDV[o]),r&&(c=r.listIsDirty()),e.list[h].isDirty=c,c&&(e.hasDirtyLists=!0)}},_getTabObjectInfo:function(e,t){var i=this.dialogId+".V.R1."+t+"Obj",s=window[i];if(!s)return!1;var a=-1;a="undefined"!=typeof s._curTabIndx?s._curTabIndx:s._curBandIndx;var n="";if("undefined"!=typeof s.panes)n=s.panes;else{if("undefined"==typeof s.bands)return!1;n=s.bands}for(var o=[],r=0;r<n.length;r++)n[r].show&&o.push(r);var l=o.length,d=o[o.length-1],h=!1,c=!1;0==a&&(h=!0),a==d&&(c=!0),"undefined"==typeof e.tabObject&&(e.tabObject={});var u=$u.a.find(o,a)+1;e.tabObject[t]={isOnFirstPane:h,isOnLastPane:c,currentPane:u,paneCount:l}},selectTabPane:function(e,t){try{if("string"==typeof t&&(t=this._tabPaneNumberFromId(e,t),0==t))return!1;t-=1,window[this.dialogId+".V.R1."+e+"Obj"].select(t)}catch(i){}},_tabControlType:function(e){var t=window[this.dialogId+".V.R1."+e+"Obj"];return"undefined"!=typeof t._curBandIndx?"accordion":"tab"},_getInnerHTMLWithValues:function(e){var t=this.getPointer(e),i="",s="";"undefined"!=typeof t.style&&(s=t.style.cssText),i=t.className;for(var a=t.getElementsByTagName("input"),n=0;n<a.length;n++)"radio"==a[n].type||"checkbox"==a[n].type?a[n].checked?$sa(a[n],"checked",a[n].checked):a[n].removeAttribute("checked"):$sa(a[n],"value",a[n].value);for(var a=t.getElementsByTagName("textarea"),n=0;n<a.length;n++)a[n].innerText=a[n].value;for(var a=t.getElementsByTagName("select"),n=0;n<a.length;n++)for(var o=0;o<a[n].options.length;o++)a[n].options[o].selected?$sa(a[n].options[o],"selected",a[n].options[o].selected):a[n].options[o].removeAttribute("selected");var r=t.innerHTML;r=r.replace(RegExp('name="',"g"),'xname="');var l="",d=$(this.dialogId+"_CUSTOMRADIOBUTTONSTYLE");d&&(l=d.innerHTML),""!=l&&(l="<style>\n"+l+"</style>");var h=$("A5STYLESHEET"),c="";if(h){c="<style>\n";for(var u=h.sheet?h.sheet:h.styleSheet,f=u.cssRules?u.cssRules:u.rules,n=0;n<f.length;n++)c=c+f[n].selectorText+"{ "+f[n].style.cssText+" }\n";c+="</style>"}var p="";p='<body class="Page">'+c+l+r+"</body>";var m={};return m.html=r,m.css=c+l,m.htmlWrapped=p,m.containerClass=i,m.containerStyle=s,m},containerToPDF:function(e,t){"undefined"==typeof t&&(t={}),t.styleName=this.styleName;var i=this._getInnerHTMLWithValues(e),s=i.html;t.containerClass=i.containerClass,t.containerStyle=i.containerStyle,t.css=i.css;var a=[];a.push(A5.ajax.buildURLParam("__html",s)),a.push(A5.ajax.buildURLParam("__options",JSON.stringify(t)));var n=a.join("&");this.ajaxCallback("","","system:systemContainerToPDF","",n,{deviceOfflineFunction:function(){}})},_accordionBandNumberFromId:function(e,t){for(var i=$(this.dialogId+".V.R1."+e),s="",a="",n="",o="",r=-1,l=0,d=0;d<i.childNodes.length;d++)s=i.childNodes[d].tagName,"undefined"!=typeof s&&"A"==s&&(a=i.childNodes[d].id,n=$(a),o=n.innerHTML,o==t&&(r=$ga(i.childNodes[d],"a5accordionctrlindex"),l=Number(r)+1));return l},_tabPaneNumberFromPaneId:function(e,t){for(var i=$(this.dialogId+".V.R1."+e+".PANES"),s="",a=0,n="",s="",o=0,r=0;r<i.childNodes.length;r++)n=i.childNodes[r].tagName,"undefined"!=typeof n&&"DIV"==n&&(s=$ga(i.childNodes[r],"a5paneid"),""!=s&&(o+=1),s.toLowerCase()==t.toLowerCase()&&(a=o));return a},_tabPaneNumberFromId:function(e,t){var i=this._tabControlType(e);if("accordion"==i)return this._accordionBandNumberFromId(e,t);for(var s=$(this.dialogId+".V.R1."+e+".TABBAND"),a=0,n="",o="",r="",l="",d=0;d<s.childNodes.length;d++)n=s.childNodes[d].tagName,"undefined"!=typeof n&&"A"==n&&(l=$ga(s.childNodes[d],"a5tabctrlindex"),o=s.childNodes[d].id,ele2=$(o),r=ele2.innerHTML,r==t&&(a=Number(l)+1));return 0==a&&(a=this._tabPaneNumberFromPaneId(e,t)),a},_tabInfo:function(e){var t=0,i=0,s=0,a=0,n=!1,o=0,r=window[this.dialogId+".V.R1."+e+"Obj"];t=r.panes.length,i=r._curTabIndx+1,s=i==t?1:i+1,a=i-1,0==a&&(a=t);var r=this._tabTimers;if("undefined"!=typeof r){var l=r[e];"undefined"!=typeof l&&(o=l.interval,n=l.status)}return{paneCount:t,currentPane:i,nextPane:s,previousPane:a,status:n,interval:o}},tabTimerGoto:function(e,t){t=t.toLowerCase(),t=t[0];var i="",s=this._tabInfo(e);i=t,"f"==t&&(i=1),"l"==t&&(i=s.paneCount),"n"==t&&(i=s.nextPane),"p"==t&&(i=s.previousPane),this.selectTabPane(e,i);var a=this._tabTimers;if("undefined"==typeof a)return!1;var n=a[e];return"undefined"!=typeof n&&void("on"==n.status&&(this.tabTimerStop(e),this.tabTimerStart(e)))},_tabTimerStartStop:function(e,t){var i=this._tabTimers;if("undefined"==typeof i)return!1;var s=i[e];if("undefined"==typeof s)return!1;var a=s.interval;this._tabInfo(e);"start"==t?(s.status="on",s._i=setInterval(Function(this.dialogId+"_DlgObj.tabTimerGoto('"+e+"','n');"),1e3*a)):"stop"==t&&(s.status="off",clearInterval(s._i))},tabTimerStop:function(e){this._tabTimerStartStop(e,"stop")},tabTimerStart:function(e){this._tabTimerStartStop(e,"start")},tabTimersStopAll:function(){if("undefined"==typeof this._tabTimers)return!0;for(var e in this._tabTimers)this._tabTimerStartStop(e,"stop")},_tabPaneChange:function(e){var t={};if(this._getTabObjectInfo(t,e),this._variablesChanged(["dialog.tabObject."+e],1),"undefined"==typeof t.tabObject)return!1;var i=t.tabObject[e];this.genieButtonStates(e),this._executeEvent("onTabPaneChanged",{isOnFirstPane:i.isOnFirstPane,isOnLastPane:i.isOnLastPane,currentPane:i.currentPane,paneCount:i.paneCount});var s="",a="";s=$(this.dialogId+"."+e+".PROGRESS.CURRENT"),a=$(this.dialogId+"."+e+".PROGRESS.STEPCOUNT"),s&&(s.innerHTML=i.currentPane),a&&(a.innerHTML=i.paneCount);var n=$(this.dialogId+"."+e+".PROGRESS.BARCHART");if(n){var o=n.style.width,r=parseFloat(o),l=o.replace(""+r,""),d=r*(i.currentPane/i.paneCount),h=$(this.dialogId+"."+e+".PROGRESS.BARCHART.INNER");h.style.width=""+d+l}},duplicateRepeatingSectionRow:function(e){for(var t="undefined"==typeof arguments[1]||arguments[1],i=this.repeatingSections[e].activeRow,s=this.repeatingSections[e].rows,a=-1,n="",o="",r=1;r<=s;r++)if(o=this._repeatingSectionRowIsEmpty(e,r),o&&(n=this.repeatingSections[e]._r[0].i[r-1].deleted,0==n)){a=r;break}a==-1&&(this.addRepeatingSectionRow(e),a=this.repeatingSections[e].activeRow),this._copyRepeatingSectionRowLow(e,i,a,t)},copyRepeatingSectionRow:function(e,t,i){var s="undefined"==typeof arguments[3]||arguments[3],a="undefined"==typeof arguments[4]||arguments[4];if(i==-1&&(i=this.repeatingSections[e].activeRow),i==t)return!1;if(s){var n=this._repeatingSectionRowIsDirty(e,i),o="Overwrite existing data in row?";if("undefined"!=typeof this._rsOverwriteRowMsg&&(o=this._rsOverwriteRowMsg),n){var r=confirm(o);if(0==r)return!1}}this._copyRepeatingSectionRowLow(e,t,i,a)},_showHideFrame:function(e,t){var i=this.styleVersion;if("undefined"==typeof i&&(i=1),i>=3){var s=$(this.dialogId+".SHOWHIDEPANELIMG."+e+".R1");s.style.display="none"}if("undefined"==typeof this.framesInfo)return!1;var a=this.framesInfo[e];if("undefined"==typeof a)return!1;var n=a.repeatingSections,o=a.onOpen,r=a.onClose,l=[];if("undefined"!=typeof a.listsToRefresh&&(l=a.listsToRefresh),"show"==t){for(var d=1;d<=n.length;d++)this._prepareRepeatingSection(n[d-1],1);if(""!=o&&"undefined"!=typeof window[o]&&window[o](),l.length>0)for(var h="",d=0;d<l.length;d++)h=this.getControl(l[d]),h&&h.refresh()}else""!=r&&"undefined"!=typeof window[r]&&window[r]()},_copyRepeatingSectionRowLow:function(e,t,i){var s="undefined"==typeof arguments[3]||arguments[3];if(i==-1&&(i=this.repeatingSections[e].activeRow),t==i)return!1;for(var a=this.repeatingSectionInfo[e].controls,n="",o=0;o<a.length;o++)n=this.getValue(a[o]+":"+t),this.setValue(a[o]+":"+i,n,s)},moveUpRepeatingSectionRow:function(e){var t=this.repeatingSections[e].activeRow;if(1==t)return!1;for(var i=t,s=!0;s;){if(i-=1,0==this._repeatingSectionRowIsDeleted(e,i)){s=!1;break}if(i<=1){s=!1;break}}return!(i==t||i<1||this._repeatingSectionRowIsDeleted(e,i))&&(this.swapRepeatingSectionRows(e,t,i),void this.setRepeatingSectionActiveRow(e,i))},moveDownRepeatingSectionRow:function(e){var t=this.repeatingSections[e].activeRow,i=this.repeatingSections[e].rows;if(t==i)return!1;for(var s=t,a=!0;a;){if(s+=1,0==this._repeatingSectionRowIsDeleted(e,s)){a=!1;break}if(s<=1){a=!1;break}}return!(s==t||s<1||this._repeatingSectionRowIsDeleted(e,s))&&(this.swapRepeatingSectionRows(e,t,s),void this.setRepeatingSectionActiveRow(e,s))},_harvestRepeatingSection:function(e){var t="undefined"!=typeof arguments[1]&&arguments[1];e=e.toUpperCase();var i=this.repeatingSections[e].rows,s=[],a=this.repeatingSectionInfo[e].controls;if("undefined"==typeof a)return!1;for(var n=1;n<=i;n++){for(var o={},r=0;r<a.length;r++)0==t?o[a[r]]=this.getValue(a[r]+":"+n):o[a[r]]={val:this.getValue(a[r]+":"+n),dirty:$ga($(this.dialogId+".V.R1."+a[r]+"_A5INSTANCE"+n),"A5IsDirty"),origVal:this.originalValues[0][a[r]+":"+n]};o.__deleted=this._repeatingSectionRowIsDeleted(e,n),o.__rowNumber=n,s.push(o)}return s},sortRepeatingSection:function(e,t,i){e=e.toUpperCase(),t=t.toUpperCase(),i=i.toLowerCase(),i=i[0];var s=this._harvestRepeatingSection(e,"dirty");if(0==s)return!1;var a=this.columnInfo[t].dataType;s.sort(function(e,s){var n=0,o=e[t].val,r=s[t].val;return"N"==a&&(o=$u.s.toNum(o),r=$u.s.toNum(r)),"L"==a&&(o=$u.s.toBool(o),r=$u.s.toBool(r)),"D"!=a&&"T"!=a||(o=Date.parse(o),r=Date.parse(r)),"string"==typeof o?o.toLowerCase()>r.toLowerCase()?n=1:o.toLowerCase()<r.toLowerCase()&&(n=-1):n=o-r,o>r?n=1:o<r&&(n=-1),"d"==i&&(n*=-1),n}),s.sort(function(e,t){return e.__deleted||t.__deleted?e.__deleted?1:-1:0});var n=this.repeatingSections[e].rows,o=this.repeatingSections[e];if("undefined"==typeof o)return!1;for(var l=1;l<=n;l++)this.undeleteRepeatingSectionRow(e,l),this._setRepeatingRowValuesToNull(e,l);for(var d={},h="",c=[],u=[],f=this.repeatingSectionInfo[e].boundAliases,l=0;l<s.length;l++){h=s[l];for(var p in h)d[p+":"+(l+1)]={val:s[l][p].val,dirty:s[l][p].dirty,origVal:s[l][p].origVal};h.__deleted&&this._deleteRepeatingSectionRowLow(e,l+1);var m={};m.newRow=l+1,m.oldRow=h.__rowNumber,u.push("New: "+m.newRow+" Old: "+m.oldRow),c.push(m)}this.populate(d,1,!0,!1,!0);var _="";for(r=0;r<c.length;r++){c[r].key={};for(var g=0;g<f.length;g++)_=this.getKey(f[g],r+1),c[r].key[f[g]]=_}var v="";for(r=0;r<c.length;r++)for(var g=0;g<f.length;g++)v=c[c[r].oldRow-1].key[f[g]],0==v&&(v="__undefinedkey__"),this.setKey(f[g],v,r+1);var y=this._repeatingSectionLogicalToPhysicalRow(e,1);y==-1&&(y=1),this.setRepeatingSectionActiveRow(e,y)},getKey:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:-1,i="undefined"!=typeof arguments[2]?arguments[2]:this.stateInfo.keys;if("undefined"==typeof i)return!1;if(t>0)var s=e.toUpperCase()+"_row"+t;else var s=e.toUpperCase();return"undefined"!=typeof i[s]&&i[s]._key},setKey:function(e,t){var i="undefined"!=typeof arguments[2]?arguments[2]:-1;if(i>0)var s=e.toUpperCase()+"_row"+i;else var s=e.toUpperCase();"undefined"==typeof this.stateInfo.keys&&(this.stateInfo.keys={}),"undefined"==typeof this.stateInfo.keys[s]&&(this.stateInfo.keys[s]={}),"__undefinedkey__"==t?delete this.stateInfo.keys[s]:this.stateInfo.keys[s]._key=t},_swapKeys:function(e,t,i){if("undefined"==typeof this.stateInfo)return!1;if("undefined"==typeof this.stateInfo.keys)return!1;var s=e.toUpperCase()+"_row"+t,a=e.toUpperCase()+"_row"+i,n="__undefinedkey__",o="__undefinedkey__";"undefined"!=typeof this.stateInfo.keys[s]&&(n=this.stateInfo.keys[s]._key),"undefined"!=typeof this.stateInfo.keys[a]&&(o=this.stateInfo.keys[a]._key),"__undefinedkey__"==o?delete this.stateInfo.keys[s]:("undefined"==typeof this.stateInfo.keys[s]&&(this.stateInfo.keys[s]={}),this.stateInfo.keys[s]._key=o),"__undefinedkey__"==n?delete this.stateInfo.keys[a]:("undefined"==typeof this.stateInfo.keys[a]&&(this.stateInfo.keys[a]={}),this.stateInfo.keys[a]._key=n)},_swapKeysRS:function(e,t,i){var s=this.repeatingSectionInfo[e].boundAliases;for(var a in s)this._swapKeys(s[a],t,i)},swapRepeatingSectionRows:function(e,t,i){var s=this.repeatingSectionInfo[e].controls;if("undefined"==typeof s)return!1;for(var a="",n="",o={},r=0;r<s.length;r++)a=this.getValue(s[r]+":"+t),n=this.getValue(s[r]+":"+i),o[s[r]+":"+t]=n,o[s[r]+":"+i]=a;this.populate(o,1,!1,!0),this._swapKeysRS(e,t,i)},_sortPrimaryKeyList:function(){var e=this._primaryKeyListNavigator.selection[0],t=this._primaryKeyList[e].k,i=this._primaryKeyList;"undefined"!=typeof i[0].d1?i.sort(function(e,t){return e.d1<t.d1?-1:e.d1>t.d1?1:0}):i.sort(function(e,t){return e.k<t.k?-1:e.k>t.k?1:0}),this._primaryKeyListNavigator.populate(this._primaryKeyList);for(var s=-1,a=0;a<this._primaryKeyList.length;a++)if(this._primaryKeyList[a].k==t){s=a;break}s>-1&&this._primaryKeyListNavigator.setValue(s,!1)},_primaryKeyListSetKey:function(e){for(var t=this._primaryKeyListNavigator._data,i=-1,s=1;s<=t.length;s++)if(""+t[s-1].k==""+e){i=s;break}i!=-1&&this._primaryKeyListNavigator.setValue(i-1)},_updateListState:function(e,t){var i=this.getControl(e);if("undefined"==typeof i)return!1;if("undefined"==typeof i._state.recordCount)return!1;"add"==t.toLowerCase()?i._state.recordCount=i._state.recordCount+1:i._state.recordCount=i._state.recordCount-1,i._state.recordCountFormatted=$u.n.toStr(i._state.recordCount,0,",");var s=$(this.dialogId+"."+e+".RECORDCOUNT");s&&(s.innerHTML=i._state.recordCountFormatted),i._refreshStateMessages&&i._refreshStateMessages()},_updatePrimaryKeyList:function(e,t){if("update"==t){if("undefined"!=typeof this._primaryKeyListNavigator){var i=this._primaryKeyListNavigator.selection[0];this._primaryKeyList[i]=e,this._primaryKeyListNavigator.updateRow(i,e)}else if("undefined"!=typeof this.__navigationSliderObject){var i=this.__navigationSliderObject.value-1;this._primaryKeyList[i]=e}}else if("enter"==t){if("undefined"!=typeof this._primaryKeyList){var i=this._primaryKeyList.length;if(this._primaryKeyList[i]=e,"undefined"!=typeof this._primaryKeyListNavigator){this._primaryKeyListNavigator.appendRows([e]);var s=this.dialogId+"_DlgObj._primaryKeyListNavigator.setValue("+i+",false);";setTimeout(Function(s),0)}}this._currentRecordNumber=i+1}else if("delete"==t){var i=e.recordNumber,a=this._primaryKeyList[i-1].k;if(this._primaryKeyList.splice(e.recordNumber-1,1),i-=1,"undefined"!=typeof this._primaryKeyListNavigator){this._primaryKeyListNavigator.populate(this._primaryKeyList);var n=i;i==this._primaryKeyList.length&&(n-=1),this._primaryKeyListNavigator.setValue(n,!1),i=n}else if("undefined"!=typeof this._primaryKeyList){var n=i;i==this._primaryKeyList.length&&(n-=1),i=n}if("undefined"!=typeof this._listsToSynchronize)for(var o=this._listsToSynchronize,r=0;r<o.length;r++){var l=this.getControl(o[r]),d=[];if(d.push(a),l){var h=this._findArrayProp(l._data,"__primaryKey",a);h>=0&&l.removeRows(d),l.setValue(e.primaryKeyToShow)}}}if(this.__navigationSliderObject&&"undefined"!=typeof this._primaryKeyList){var c=this._primaryKeyList.length;if($(this.__sliderDynMsgId)&&"undefined"!=typeof i){var u={value:i+1};this._navigationSliderEvalMessage(u)}"enter"==t&&(this.__navigationSliderObject.max=c,this.__navigationSliderObject.refresh(),this._setSliderPosition(c,!1)),"delete"==t&&(this.__navigationSliderObject.max=this.__navigationSliderObject.max-1,this.__navigationSliderObject.refresh())}},_navigationSliderEvalMessage:function(data){var count=0;if("undefined"==typeof this._primaryKeyList)return!1;if("undefined"==typeof this.__sliderDynMsgId)return!1;if(count=this._primaryKeyList.length,"undefined"!=typeof this._currentRecordNumber&&this._currentRecordNumber==-1&&0==count)return!1;if(0==count){var msg="No records";"undefined"!=typeof this.navigationSliderNoRecordsMsg&&(msg=this.navigationSliderNoRecordsMsg),$(this.__sliderDynMsgId).innerHTML=msg}else $(this.__sliderDynMsgId).innerHTML=eval(this.__sliderMessageTemplate)},_navigationListViewInit:function(e,t,i){e=e.toUpperCase();var s=i.htmlTemplate,a=i.listViewObjectId;$(e).innerHTML=s;var n=i.initialData;this._primaryKeyListNavigator=new A5.ListBox(a,n,t)},_navigationSliderInit:function(e,t,i){var s={};if(s.range=!1,s.min=1,s.max=5,s.step=1,s.value=1,s.change="",s.slide="",$u.o.assign(s,t),e=e.toUpperCase(),!$(e))return!1;var a=e+"_SLIDERCONTROL",n=i.sliderTemplate;$(e).innerHTML=n,s.onChange=s.change,s.onSlide=s.slide,s.theme=this.styleName,s.range={show:!0},this.__navigationSliderObject=new A5.Slider(a,s),this.__sliderId=a,this.__sliderKeyColumnName=i.keyColumnName,this.__sliderOnChange=i.sliderOnChangeFunction,this.__sliderOnSlide=i.sliderOnSlideFunction,this.__sliderMessageTemplate=i.sliderMessage,this.__sliderDynMsgId=i.sliderDynamicMsgId},_hideSliderMsg2:function(e,t){var i=$(t+".SLIDERMESSAGECONTAINER"),s=$(t+".CONTROL"),a=e.relatedTarget?e.relatedTarget:e.toElement;if(a){for(;a!=s&&"body"!=a.tagName.toLowerCase()&&"html"!=a.tagName.toLowerCase();)a=a.parentNode;if(a==s)return}A5.u.element.hide(i,{type:"fade"})},_paintSliderMessageRS:function(e,t,i){for(var s=this._findRepeatingSection(t),a=this.repeatingSections[s],n=a.rows,o=1;o<=n;o++)this._paintSliderMessage(e,t+"_A5INSTANCE"+o,i)},_paintSliderMessage:function(e,id,msg){var instNumInId=!1,instNum=-1;"undefined"!=typeof id.split("_A5INSTANCE")[1]&&(instNum=id.split("_A5INSTANCE")[1].split(".")[0],instNumInId=!0),id=id.toUpperCase();var ctrl=this.getControl(id);ctrl&&instNum==-1&&"undefined"!=typeof ctrl.contId.split("_A5INSTANCE")[1]&&(instNum=ctrl.contId.split("_A5INSTANCE")[1].split(".")[0]);var e2="";e2="object"==typeof e?e:ctrl;var dataType="n",flagTwoValue=!1;if("range"==ctrl.type&&(flagTwoValue=!0),"undefined"!=typeof ctrl.dataType&&(dataType=ctrl.dataType[0]),flagTwoValue)var value=e2.value[0],value1=e2.value[0],value2=e2.value[1];else var value=e2.value,value1=value,value2=value;"d"==dataType&&(value=value.toFormat(ctrl.format),value1=value1.toFormat(ctrl.format),value2=value2.toFormat(ctrl.format));var max=ctrl.max,min=ctrl.min;if("d"==dataType&&(max=max.toFormat(ctrl.format),min=min.toFormat(ctrl.format)),instNum==-1||instNumInId)var ele=$(this.dialogId+".V.R1."+id+".SLIDERMESSAGECONTAINER");else var ele=$(this.dialogId+".V.R1."+id+"_A5INSTANCE"+instNum+".SLIDERMESSAGECONTAINER");var msgTxt="";if("'js"==msg.split(":")[0].toLowerCase()){var fnName=msg.split(":")[1];if(fnName=fnName.split("'")[0],"undefined"!=typeof window[fnName]){var e={value:value,value1:value1,value2:value2,min:min,max:max};msgTxt=window[fnName].call(this,e)}else msgTxt="Function not found: "+fnName}else msgTxt=eval(msg);ele.innerHTML=msgTxt},_hideSliderMsg:function(e){var t=this.__hideSlider;if(0==t)return!1;var i=this.__idSliderMessageOuterContainer,s=this.__idSliderMessageContainer,a=$(i);if(!a)return!1;var n=e.relatedTarget?e.relatedTarget:e.toElement;if(n){for(;n!=a&&"body"!=n.tagName.toLowerCase()&&"html"!=n.tagName.toLowerCase();)n=n.parentNode;if(n==a)return}A5.u.element.hide($(s),{type:"fade"})},_navigationSliderSetMax:function(e,t){e=e.toUpperCase();var i=e+"_SLIDERCONTROL";return!!$(i)&&(0==t?$(this.__sliderId).style.visibility="hidden":$(this.__sliderId).style.visibility="",$(this.__sliderId).style.visibility="",this.__navigationSliderObject.max=t,void this.__navigationSliderObject.refresh())},_setSliderPosition:function(e){var t="undefined"==typeof arguments[1]||arguments[1];if("undefined"==typeof this.__sliderId)return!1;this.__sliderNavigateToRecord=t,this.__navigationSliderObject.setValue(e),this.__sliderNavigateToRecord=!0;var i=(this._primaryKeyList.length,this.__sliderKeyColumnName,{});i.value=e,this._navigationSliderEvalMessage(i)},_sliderOnChange:function(e){var t=this.__sliderKeyColumnName,i=this._primaryKeyList.length;if(0==i)return!1;this._navigationSliderEvalMessage(e);var s=this._primaryKeyList[e.value-1][t];"undefined"!=typeof window[this.__sliderOnChange]&&window[this.__sliderOnChange](s,e.value,i);var a=!0;"undefined"!=typeof this.__sliderNavigateToRecord&&(a=this.__sliderNavigateToRecord),a&&this.navigateRecord(e.value,!1),"undefined"!=typeof this._listNavigator&&this._listNavigator.setValue(e.value-1,!1)},_sliderOnSlide:function(e){var t=this._primaryKeyList.length,i=this.__sliderKeyColumnName;if(this._navigationSliderEvalMessage(e),t>0){var s=this._primaryKeyList[e.value-1][i];"undefined"!=typeof window[this.__sliderOnSlide]&&window[this.__sliderOnSlide](s,e.value,t)}},_runEmbeddedReport:function(e){this.ajaxCallback("G",1,"system:ComputeFilterThenRunReport","",e)},_refreshListsWithJSFuncDataSource:function(){var e="undefined"!=typeof arguments[0]?arguments[0]:"",t=this._listsWithJSFuncDataSource;if("undefined"==typeof t)return!1;if(""==e)for(var i in t)this._refeshListJSDSLow(i);else this._refeshListJSDSLow(e.toUpperCase())},_refeshListJSDSLow:function(name){var ll=this._listsWithJSFuncDataSource;if(ll2=ll[name],"undefined"==typeof ll2)return!1;if(fnName=ll2.functionName,fnName=fnName.split("(")[0],fnName.indexOf(this.dialogId+"_DlgObj")==-1){if(!window[fnName])return alert('Refreshing List "'+name+'". Function for data source not found: "'+fnName+'".'),!1;data=window[fnName].call()}else data=eval(fnName+"()");obj=this.getControl(name),obj&&obj.populate(data)},refreshDataSeries:function(e){if(e.constructor!=Array)var e=[e];var t=this._executeJavascriptForDataSeries(e),i="",s=[];s.push(A5.ajax.buildURLParam("__seriesNames",e.join(","))),s.push(A5.ajax.buildURLParam("__javascriptFunctionResults",t)),i=s.join("&"),this.ajaxCallback("G",1,"system:RefreshDataSeries","",i)},exportChart:function(e){if("undefined"==typeof this._chartControlsInfo)return!1;e._chartControlsInfo=this._chartControlsInfo;var t=$u.o.toJSON(e),i=[];i.push(A5.ajax.buildURLParam("_exportChartInfo",t));var s=i.join("&");this.ajaxCallback("G",1,"system:exportChart","",s)},_listGetElement:function(e,t,i,s){var a=i,n="",o="";a=a.toLowerCase();var r=a[0];return"l"==r&&(o="I"),"b"==r&&(o="BTN"),"h"==r&&(o="LNK"),"d"==r&&(o="DIMG"),"i"==r&&(o="IMG"),n=this.dialogId+"."+e.toUpperCase()+"."+t.toUpperCase()+"."+o+"."+s,$(n)},listGetValue:function(e,t){var i="undefined"!=typeof arguments[2]?arguments[2]:-1,s=this.getControl(e);if(0==s)return alert("List not found: "+e),"";if("__PRIMARYKEY"==t&&(t="__primaryKey"),"KEY_TABLE_1"==t&&(t="key_table_1"),"<ROWNUMBER>"==t.toUpperCase())return s.selection[0]+1;i==-1&&(i=s.selection[0]);var a=s._data,n=a[s._dataMap[i]],o={},r="";for(var l in n)r=l.toUpperCase(),o[r]=n[l];var d=o[t.toUpperCase()];null==d&&(d="");var h=$(this.dialogId+"."+e.toUpperCase()+"."+t.toUpperCase()+"."+(i+1)+".RAWDATA");return h?h.innerHTML:d},_doOnTimerEvent:function(){var e=this._executeEvent("beforeOnTimer",{});1==e&&this._executeEvent("onTimer",{})},onTimerEventStop:function(){this._onTimerEventInterval=0,"undefined"!=typeof this.__globalTimer&&clearTimeout(this.__globalTimer)},onTimerEventStart:function(e){this._onTimerEventInterval=e,this.__globalTimer=setTimeout("if( typeof "+this.dialogId+"_DlgObj != 'undefined')"+this.dialogId+"_DlgObj._onTimerEventLow();",e)},_onTimerEventLow:function(){var e=0,t=$(this.dialogId+".R1");return t?"undefined"!=typeof this._onTimerEventInterval&&(e=this._onTimerEventInterval,0!=e&&(this._doOnTimerEvent(),void(this.__globalTimer=setTimeout("if( typeof "+this.dialogId+"_DlgObj != 'undefined')"+this.dialogId+"_DlgObj._onTimerEventLow()",e)))):(this._onTimerEventInterval=0,!1)},computeSearchFromMetaDataAndFilterList:function(e,t,i,s){var a=[];a.push(A5.ajax.buildURLParam("__listId",e)),a.push(A5.ajax.buildURLParam("__options",t)),a.push(A5.ajax.buildURLParam("__searchData",i));var n=this.getControl(e)._state;a.push(A5.ajax.buildURLParam("__listState",JSON.stringify(n))),callbackData=a.join("&"),this.ajaxCallback("G",1,"system:ComputeSearchAndFilterList","",callbackData)},_filterList:function(e,t,i,s,a){t=$if(void 0==t,"Null",t),i=$if(void 0==i,"Null",i),s=$if(void 0==s,"Null",s),a=$if(void 0==a,"Null",a);var n="",o=[];o.push(A5.ajax.buildURLParam("__listId",e)),o.push(A5.ajax.buildURLParam("__filter",t)),o.push(A5.ajax.buildURLParam("__having",a)),o.push(A5.ajax.buildURLParam("__order",i)),o.push(A5.ajax.buildURLParam("__filterParameters",s)),n=o.join("&"),this.ajaxCallback("G",1,"system:FilterList","",n)},_initialViewBoxRender:function(e){var t=this.getControl(e.toUpperCase());"undefined"==typeof t._hasBeenRendered?(t._hasBeenRendered=!0,this.refreshViewBoxData(e)):0==t._hasBeenRendered&&(t._hasBeenRendered=!0,this.refreshViewBoxData(e))},_initialListRender:function(e){var t=this.getControl(e.toUpperCase());"undefined"==typeof t._hasBeenRendered&&(t._hasBeenRendered=!0);return("undefined"==typeof t.parentList||(t._hasBeenRendered=!0,""==t.parentList))&&void("undefined"==typeof t._hasBeenRendered?(t._hasBeenRendered=!0,this._refreshListData(e)):0==t._hasBeenRendered&&(t._hasBeenRendered=!0,this._refreshListData(e)))},refreshTemplate:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:{};this._refreshTemplate(e,t)},_refreshTemplate:function(e){var t=[];t.push(A5.ajax.buildURLParam("__templateId",e));var i=t.join("&");this.ajaxCallback("G",1,"system:RefreshTemplate","",i)},_renderTemplate:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:"DEFAULT";e=e.toUpperCase();var i=this._templates[e];if("undefined"==typeof i)return!1;var s=i.layouts[t];if("undefined"==typeof s&&(s=i.layouts.DEFAULT),"undefined"==typeof s)return!1;var a=s.template,n=this._templateData[e];if("undefined"==typeof n)return!1;var o=this.dialogId+".V.R1."+e,r=o+".SCROLLWRAPPER",l="";l=$($(r)?r:o);var d=A5.u.template.expand(n,a);l.innerHTML=d},_listTypes:function(e){for(var t=e.split(","),i=[],s=[],a=[],n="",o=0;o<t.length;o++)n=this.getControl(t[o]),n&&("javascript function"==n._dataSourceType.toLowerCase()?s.push(t[o]):i.push(t[o]),"undefined"!=typeof n._includeCRC&&n._includeCRC&&a.push(t[o]));return{listServer:i,listJS:s,listCRC:a}},refreshViewBoxData:function(viewBoxIds){
if("undefined"!=typeof this._viewBoxesBasedOnJavascriptFunctions){for(var arr3=[],arr2=viewBoxIds.toUpperCase().split(","),obj=!1,i=0;i<arr2.length;i++)if(obj=this._viewBoxesBasedOnJavascriptFunctions[arr2[i]],"undefined"!=typeof obj){var vbObj=this.getControl(arr2[i]);this._viewBoxData[arr2[i]]=eval(obj.functionName+"();"),vbObj.populate(this._viewBoxData[arr2[i]])}else arr3.push(arr2[i]);if(viewBoxIds=arr3.join(","),""==viewBoxIds)return!0}var arr=[];arr.push(A5.ajax.buildURLParam("__ViewBoxIds",viewBoxIds));var callbackData=arr.join("&");this.ajaxCallback("G",1,"system:RefreshViewBox","",callbackData)},refreshListsIncremental:function(){var e=[];for(var t in this.columnInfo)"List"==this.columnInfo[t].info.controlType&&e.push(t);if(0==e.length)return!1;var i=this._listTypes(e.join(","));if(0==i.listCRC.length)return!1;for(var s={mode:"incremental"},a=0;a<i.listCRC.length;a++)this._refreshListData(i.listCRC[a],s)},refreshListData:function(listId){for(var obj="undefined"!=typeof arguments[1]?arguments[1]:{},objX=this._listTypes(listId),arrJS=objX.listJS,lObj="",fn="",i=0;i<arrJS.length;i++){var lObj=this.getControl(arrJS[i]);if(fn=lObj._dataSourceJavascriptFunction,"undefined"!=typeof window[fn]){var data=window[fn].call();lObj.populate(data)}else if(fn.indexOf("._functions.")>0){var data=eval(fn+"()");lObj.populate(data)}}var serverLists=objX.listServer.join(",");""!=serverLists&&this._refreshListData(serverLists,obj)},_refreshListData:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:{},i="full";"undefined"!=typeof t.mode&&(i=t.mode),e=e.toUpperCase();var s=this._listControlsInfo[e],a="",n="";if("undefined"!=typeof s&&("undefined"!=typeof s.javascriptFunction&&(a=s.javascriptFunction),"undefined"!=typeof s.seriesName&&(n=s.seriesName),""!=n)){var o=this._dataSeries;"undefined"!=typeof o&&(o=o[n]),"undefined"!=typeof o&&(a=o.javascriptFunction)}var r="";if(""!=a)if(""!=n){var l=[];l.push(n),r=this._executeJavascriptForDataSeries(l)}else r=window[a]();var d="",h=this.getControl(e);if(h){var c=h.parentList;if("undefined"!=typeof c&&""!=c)return alert("Can't refresh List "+e+" as it is a child List with pre-fetched data. You must refresh the data in this List's parent List('"+c+"')"),!1}var u=[];if(u.push(A5.ajax.buildURLParam("__listId",e)),u.push(A5.ajax.buildURLParam("__javascriptFunctionResults",r)),u.push(A5.ajax.buildURLParam("__options",$u.o.toJSON(t))),"undefined"!=typeof this._listsToSynchronize&&u.push(A5.ajax.buildURLParam("__arrayOfListsToSynchronize",$u.o.toJSON(this._listsToSynchronize))),u.push(A5.ajax.buildURLParam("__mode",i)),"incremental"==i){var f=this.getControl(e),p=[];f&&(p=f.harvestList(!0));var m=this._getListCRCs(e);if(u.push(A5.ajax.buildURLParam("_crcData",JSON.stringify(m))),u.push(A5.ajax.buildURLParam("_dirtyListRows",JSON.stringify(p))),"sql"!=f._dataSourceType.toLowerCase()){var _=f.harvestListKeys();u.push(A5.ajax.buildURLParam("_primarykeysInList",JSON.stringify(_)))}}if("full"==i&&t.skipDirtyRows){var p=[],f=this.getControl(e);f&&(p=f.harvestList(!0)),u.push(A5.ajax.buildURLParam("_dirtyListRows",JSON.stringify(p)))}d=u.join("&"),this.ajaxCallback("G",1,"system:RefreshList","",d)},_listRefreshCascadingLists:function(e){var t={};t.keepFocusOnCurrentSelection=!0,t.setFocusToValue="",t.refreshDependentLists=!0,t.onlyRefreshDependentLists=!0,this._refreshListData(e,t)},_listRemoveSelectedRows:function(e){var t=this.getControl(e),i=t.selection;return"undefined"!=typeof i&&(i.sort(),t.removeRows(i),i=i.shift(),i+1>t._rData.length&&i--,void t.setValue(i))},_listRemoveAllRows:function(e){var t=this.getControl(e);t.populate([])},_listShiftPositionSelectedRows:function(e,t){var i=this.getControl(e),s=i._rData,a=(s.length,[].concat(i.selection));a.sort();var n=a[a.length-1],o=a[0],r=parseInt(n)+1;parseInt(o)-1;t=t.toLowerCase()[0];var l=-1,d=-1,h=a;if("d"==t){if(l=r,r>s.length-1)return!1;d=o;for(c in h)h[c]=parseInt(h[c])+1}if("u"==t){if(l=parseInt(o)-1,l<0)return!1;d=parseInt(n);for(c in h)h[c]=parseInt(h[c])-1}if("t"==t){for(var c=1;c<=o;c++)this._listShiftPositionSelectedRows(e,"up");return!0}if("b"==t){for(var u=s.length-1-parseInt(n),c=0;c<u;c++)this._listShiftPositionSelectedRows(e,"down");return!0}A5ArrayMove(s,l,d),i.populate(s),i.setValue(h)},_listMoveAllRows:function(e,t){for(var i=this.getControl(e),s=this.getControl(t),a=[],n=0;n<i._rData.length;n++)a.push(i._rData[n]);var o=!1,r=0;if(0==s._rData.length)o=!0;else{var r=[].concat(s.selection);r.sort(),r=r.pop(),r++,r>=s._rData.length&&(o=!0)}o?s.appendRows(a):s.insertRows(r,a),s.setValue(r+(a.length-1)),this._listRemoveAllRows(e)},_listMoveCurrentSelection:function(e,t){var i=this.getControl(e),s=this.getControl(t);if(0==i.selection.length)return!1;for(var a=[].concat(i.selection),n=[],o={},r=0;r<a.length;r++)o={},$u.o.assign(o,i.getData(a[r])),n.push(o);var l=0;0!=s.selection.length&&(l=[].concat(s.selection),l.sort(),l=l.pop(),l+=1),s.insertRows(l,n),this._listRemoveSelectedRows(e)},_listNavigateRecord:function(e,t){var i=this.getControl(e);if("undefined"==typeof i)return!1;var s=i._state.pageSize,a=i.selection[0];"undefined"==typeof a&&(a=0);var n=-1,o=t[0].toLowerCase();if("undefined"!=typeof i._state.paginated&&0==i._state.paginated&&(s=999999999999),"n"==o&&(n=a+1+1,n>s&&this._listNavigate(e,"next-byrecord"),i.setValue(n-1)),"p"==o&&(n=a+1-1,n<1&&i._state.paginated&&this._listNavigate(e,"previous-byrecord"),i.setValue(n-1)),"f"==o&&(i._state.paginated?this._listNavigate(e,"first-byrecord"):i.setValue(0)),"l"==o)if(i._state.paginated)this._listNavigate(e,"last-byrecord");else{var r=i._dataMap,l=$u.a.find(r,i._rData[i._rData.length-1]["*key"]);i.setValue(l)}},_listNavigate:function(e,t){var i={};i.cmd="navigate";var s=this._list_executeEvent(e,"beforePageNavigate",{direction:t[0]});return!!s&&(i.direction=t,void this._listMethod(e,i))},_listNavigateToPage:function(e,t){var i={};i.cmd="navigate";var s=this._list_executeEvent(e,"beforePageNavigate",{direction:"pageNumber",pageNumber:t});return!!s&&(i.direction="pageNumber",i.pageNumber=t,void this._listMethod(e,i))},_listRefreshRow:function(e){var t={};t.cmd="refreshRow";var i=this._list_executeEvent(e,"beforeRefreshRow",{});return!!i&&void this._listMethod(e,t)},_listRefreshRecordsByKey:function(e,t){var i="undefined"!=typeof arguments[2]?arguments[2]:{};t.constructor!=Array&&(t=[t]);var s={};s.cmd="refreshRowByKey",s.keys=t,s.additionalOptions=i;var a=this._list_executeEvent(e,"beforeRefreshRow",{keys:t});return!!a&&void this._listMethod(e,s)},_listFetchMore:function(e){var t={};t.cmd="fetchMore",this._listMethod(e,t)},_listFetchRecordsByKey:function(e,t){t.constructor!=Array&&(t=[t]),this._listMethod(e,{cmd:"fetchExplicit",keys:t})},_list_executeEvent:function(e,t){var i=t.split(".")[0],s=!1;"detailview"==i.toLowerCase()&&(s=!0,t=t.split(".")[1]),e=e.toUpperCase();var a=!0,n=this._listViewSettings[e];if("undefined"==typeof n)return a;var o=n.systemEvents;if(s&&(o=n.systemEvents.detailView),"undefined"==typeof o)return a;for(var r=this.getControl(e),l=new Array,d=2;d<arguments.length;d++)l.push(arguments[d]);var h=!1;return"undefined"!=typeof o["__"+t]&&o["__"+t].constructor==Function&&o["__"+t].apply(r,l),"undefined"!=typeof o[t]&&o[t].constructor==Function&&(h=o[t].apply(r,l),"boolean"==typeof h&&(a=h)),"undefined"!=typeof o["_"+t]&&o["_"+t].constructor==Function&&(h=o["_"+t].apply(r,l),"boolean"==typeof h&&(a=a&&h)),a},_listDeleteByKey:function(e,t){var i=this.getControl(e.toUpperCase());if("undefined"==typeof listObj)return!1;i.setValue(t);var s=i.selection[0];if("undefined"==typeof s)return!1;var a=i._rData;a.splice(s,1),i.populate(a)},_listMethod:function(e,t){e=e.toUpperCase();var i=this.getControl(e);if("undefined"==typeof i)return!1;var s=[];if("fetchMore"==t.cmd){if("undefined"!=typeof i._lockedForFetch&&i._lockedForFetch)return!1;if("undefined"!=typeof i._flagAllDataHasBeenFetched&&i._flagAllDataHasBeenFetched)return!1;var a=this._list_executeEvent(e,"beforeFetchMore",{});if(!a)return!1;i._lockedForFetch=!0,this._resetFlag("_lockedForFetch",5e3)}if("refreshRow"==t.cmd){var n=i._data;if("undefined"==typeof n)return!1;var o=i.selection[0];if(t.currentRowNumber=o,o=i._dataMap[o],"undefined"==typeof o)return!1;var r=i._data[o];s.push(A5.ajax.buildURLParam("_currentRowData",$u.o.toJSON(r)))}if("navigate"==t.cmd){if("undefined"!=typeof i._lockedForFetch&&i._lockedForFetch)return!1;i._lockedForFetch=!0,this._resetFlag("_lockedForFetch",5e3)}s.push(A5.ajax.buildURLParam("_listId",e)),s.push(A5.ajax.buildURLParam("_cmdObj",JSON.stringify(t))),s.push(A5.ajax.buildURLParam("_listState",JSON.stringify(i._state)));var l=s.join("&");this.ajaxCallback("G",1,"system:listCommand","",l)},_refreshChart:function(e){var t=!1;"undefined"!=typeof arguments[1]&&(t=!0);var i="undefined"!=typeof arguments[1]?arguments[1]:"";e=e.toUpperCase();var s=this._chartControlsInfo[e];if(t?s.otherInfo=i:"undefined"!=typeof s.otherInfo&&(i=s.otherInfo),"undefined"==typeof s)return!1;var a=s.dataSeries,n=this._executeJavascriptForDataSeries(a),o="",r=[];r.push(A5.ajax.buildURLParam("__chartId",e)),r.push(A5.ajax.buildURLParam("__seriesNames",s.dataSeries.join(","))),r.push(A5.ajax.buildURLParam("__javascriptFunctionResults",n)),r.push(A5.ajax.buildURLParam("__otherInfo",$u.o.toJSON(i))),o=r.join("&"),this.ajaxCallback("G",1,"system:RefreshChart","",o)},refreshChart:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:"";this._refreshChart(e,t)},resizeChart:function(e,t,i){var s={};if("undefined"==typeof this._chartControlsInfo)return!1;s._chartControlsInfo=this._chartControlsInfo;var a=$u.o.toJSON(s),n=this.getPointer(e.toUpperCase());n&&(n.style.display="none");var o="",r=[];r.push(A5.ajax.buildURLParam("__chartId",e)),r.push(A5.ajax.buildURLParam("__width",i)),r.push(A5.ajax.buildURLParam("__height",t)),r.push(A5.ajax.buildURLParam("_chartInfo",a)),o=r.join("&"),this.ajaxCallback("G",1,"system:ResizeChart","",o)},_executeJavascriptForDataSeries:function(e){for(var t="",i=[],s="",a="",n=0;n<e.length;n++)if(t=e[n].toUpperCase(),""!=t&&(s=this._dataSeries[t],a="","undefined"!=typeof s&&"undefined"!=typeof s.javascriptFunction&&(a=s.javascriptFunction,""!=a&&"function"==typeof window[a]))){var o=window[a].call(this);if("undefined"==typeof o)return alert("Javascript did not return valid series"),!1;o.constructor!=Array&&o.constructor!=Object||(o=$u.o.toJSON(o));var r={};r.seriesName=t,r.javascriptFunctionResult=o,i.push($u.o.toJSON(r))}return i.join("\n")},_panelGetSize:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:"body",i=this.panelGetId(e,t),s=$(i),a={};return a.width=0,a.height=0,s?(a.width=s.offsetWidth,a.height=s.offsetHeight,a):a},panelWidth:function(e){return this._panelGetSize(e).width},panelHeight:function(e){return this._panelGetSize(e).height},panelGetActive:function(){var e="undefined"==typeof arguments[0]?"":arguments[0];if(""!=e){var t=this.panelGet(e);return t&&t.state?t.state.activePanel:""}var i=window[this.dialogId+"_PanelObj"];if("undefined"==typeof i)return"";var s="";if("panelCard"==i._panelType)return"";for(var a=[];"panelCard"!=i._panelType;){if(a.push(i.state.activePanel),s=a[a.length-1],""==s)return"";if(i=i.getPanel(s).src,!i)return""}return a[a.length-1]},panelGetId:function(e,t){if(t=t.toLowerCase(),"header"!=t&&"footer"!=t&&"panel"!=t&&(t="body"),""==e)return"";var i=this.panelGet(e);return!!i&&i.getPanelId(t)},panelGet:function(e){var t="undefined"!=typeof arguments[1]&&arguments[1],i=this._panelResolvePath(e);if("undefined"==typeof i)return!1;if(""==i){var s="";return s=t?{src:window[this.dialogId+"_PanelObj"]}:window[this.dialogId+"_PanelObj"],"undefined"==typeof s?(alert("Panel not found: "+e),!1):s}return i=i.toUpperCase(),t?window[this.dialogId+"_PanelObj"].getPanel(i):window[this.dialogId+"_PanelObj"].getPanel(i).src},panelSetActive:function(e){var t="undefined"==typeof arguments[1]||arguments[1],i="undefined"!=typeof arguments[2]&&arguments[2];e=e.toUpperCase();var s=this._panelResolvePath(e);return"undefined"==typeof s||0==s?(0==i&&alert("Panel not found: '"+e+"'"),!1):void window[this.dialogId+"_PanelObj"].setActivePanel(s,t)},getPanelObject:function(){return window[this.dialogId+"_PanelObj"]},panelNavigate:function(e,t,i){var s=this.panelGet(e),a=t.toUpperCase();t=t.toUpperCase()[0],"F"==t?s.firstPanel(i):"P"==t?s.prevPanel(i):"N"==t?s.nextPanel(i):"L"==t?s.lastPanel(i):"HISTORYFIRST"==a?s.historyFirst(i):"HISTORYLAST"==a?s.historyLast(i):"HISTORYBACK"==a?s.historyBack(i):"HISTORYFORWARD"==a&&s.historyForward(i)},_panelResolvePath:function(e){if("undefined"==typeof window[this.dialogId+"_PanelObj"])return!1;var t="";return e.search(">")==-1?t=window[this.dialogId+"_PanelObj"]._panelPath[e]:(e=e.split(">"),t=window[this.dialogId+"_PanelObj"]._panelPath[e[0]],t="undefined"==typeof t?e[1]:t+":"+e[1]),"undefined"==typeof t&&"undefined"!=typeof window[this.dialogId+"_PanelObj"]._displayNames[e]&&(t=""),t},loadJavascript:function(e){A5.loadJavascript(e)},loadMetaTag:function(e,t){var i=document.createElement("meta");i.name=e,i.content=t,document.getElementsByTagName("head")[0].appendChild(i)},loadJavascriptFile:function(e){A5.loadJavascriptFile(e,arguments[1])},loadCSSFile:function(e){var t="undefined"!=typeof arguments[1]&&arguments[1],i=document.getElementsByTagName("link"),s=!1;if(0==t)for(var a=0;a<i.length;a++)if(i[a].href.indexOf(e)>0){s=!0;break}if(0==s){var n=document.createElement("link");n.href=e,n.rel="stylesheet",n.type="text/css",document.getElementsByTagName("head")[0].appendChild(n)}},loadXbasic:function(e){var t="undefined"!=typeof arguments[1]?arguments[1]:"";if(0==this._embeddedMode)return!1;for(var i=document.getElementsByTagName("script"),s=!1,a=0;a<i.length;a++)if("undefined"!=typeof i[a].language&&i[a].language.toLowerCase()=="xbasic"+t&&i[a].text.toLowerCase()==e.toLowerCase()){s=!0;break}if(0==s){var n=document.createElement("script");n.text=e,n.language="Xbasic"+t;try{document.getElementsByTagName("head")[0].appendChild(n)}catch(o){}}},resolveId:function(e){if("undefined"==typeof e)return"page";if(""==e)return"page";var t=e.split(":"),i=t[0].toLowerCase();return"element"==i?t[1]:"container"==i?this.dialogId+".V.R1."+t[1].toUpperCase():"panel"==i?this.panelGetId(t[1],"panel"):e},_getOnlineStatus:function(){var e=!0;if(""==this._onlineStatusMode){var t=this.getConnectionType();"none"==t&&(e=!1)}else"simulateOn"==this._onlineStatusMode?e=!0:"simulateOff"==this._onlineStatusMode&&(e=!1);return e?this._onlineStatus="online":this._onlineStatus="offline",e},getConnectionType:function(){var e=!1;if("undefined"!=typeof navigator&&"undefined"!=typeof navigator.connection&&"undefined"!=typeof navigator.connection.type&&(e=!0),!e){var t="";return t=navigator.onLine?"connected_unknowntype":"none"}var i=navigator.connection.type,s={};return"undefined"!=typeof Connection?(s[Connection.UNKNOWN]="connected_unknowntype",s[Connection.ETHERNET]="ethernet",s[Connection.WIFI]="wifi",s[Connection.CELL_2G]="2g",s[Connection.CELL_3G]="3g",s[Connection.CELL_4G]="4g",s[Connection.CELL]="genericcell",s[Connection.NONE]="none",s[i]):i},_setSimulatedOnlineStatus:function(e){var t=this._onlineStatus;if("on"==e&&(this._onlineStatusMode="simulateOn","offline"==t&&this._executeEvent("onConnectionChange",{online:!0}),this._onlineStatus="online"),"off"==e&&(this._onlineStatusMode="simulateOff","online"==t&&this._executeEvent("onConnectionChange",{online:!1}),this._onlineStatus="offline"),""==e){var i=navigator.onLine;i=i?"online":"offline",this._onlineStatusMode="",this._onlineStatus=i,i!=t&&this._executeEvent("onConnectionChange",{online:navigator.onLine})}},_fireOnConnectionChangeEvent:function(){var e=navigator.onLine;e=e?"online":"offline",this._onlineStatus=e,this._executeEvent("onConnectionChange",{online:navigator.onLine})},hideWaitMessage:function(){var e="undefined"!=typeof arguments[0]?arguments[0]:"",t="";if(""!=e){if("page"==e)return AUI.WaitDialog.clearGlobal(),clearTimeout(this._wmto),!0;t=this.resolveId(e),AUI.WaitDialog.clearLocal(t);var i=$u.a.find(this._waitDialogs,e);return i>0&&this._waitDialogs.splice(i,1),clearTimeout(this._wmto),!0}for(var s=0;s<this._waitDialogs.length;s++)t=this.resolveId(this._waitDialogs[s]),AUI.WaitDialog.clearLocal(t),AUI.WaitDialog.clearGlobal()},showWaitMessage:function(e){clearTimeout(this._wmto);var t="undefined"!=typeof arguments[1]?arguments[1]:{},i=this.resolveId(e);this._waitDialogs.push(e);var s="",a=this.waitMessageAutoCloseDelay;"undefined"==typeof t.useCSSAnimation&&(t.useCSSAnimation=!1),"undefined"!=typeof t.waitMessageAutoCloseDelay&&(a=t.waitMessageAutoCloseDelay);var n="_a5WaitMessageCSS",o="_a5LockScreenCSS";"undefined"!=typeof t.msgClassName&&(n=t.msgClassName),"undefined"!=typeof t.lockClassName&&(o=t.lockClassName),""==n&&(n="_a5WaitMessageCSS"),""==o&&(o="_a5LockScreenCSS");var r="";if(t.useCSSAnimation){r="30px";var l={};"undefined"!=typeof t.cssAnimationSettings&&(l=t.cssAnimationSettings),s=this.waitMessageCSS3(l)}else r="10px","undefined"==typeof t.icon&&(t.icon=this._waitGif),"undefined"==typeof t.message&&(t.message=""),""==t.message&&""==t.icon&&(t.icon=this._waitGif),s=""==t.message?'<img style="vertical-align:middle;" src="'+t.icon+'">':""!=t.icon?'<img style="vertical-align:middle;" src="'+t.icon+'"> '+t.message:t.message;var d="<style> ._a5WaitMessageCSS {background: rgba(0,0,0,.2);  border-radius: 5px; color: white; padding: "+r+";  text-shadow: none; }  ._a5LockScreenCSS  { background: rgba(0,0,0,0); } </style> ",h={content:d+s,location:"",className:n,lockControl:!0,lockClassName:o};"page"==i?AUI.WaitDialog.setGlobal(h):AUI.WaitDialog.addLocal(i,h);var c=this;this._wmto=setTimeout(function(){c.hideWaitMessage(),delete c},a)},waitMessageCSS3:function(e){e=e||{};var t={};"undefined"!=typeof e.autoColor?("undefined"!=typeof e.windowTheme?t.windowTheme=e.windowTheme:t.windowTheme=this.styleName,e.autoColor&&("iOS"==t.windowTheme?(t.strokeColor="#fff",t.shadowColor="#eee"):(t.strokeColor="#333",t.shadowColor="#aaa"))):("undefined"!=typeof e.strokeColor?t.strokeColor=e.strokeColor:t.strokeColor="#fff","undefined"!=typeof e.shadowColor?t.shadowColor=e.shadowColor:t.shadowColor="#eee"),"undefined"!=typeof e.strokeWidth?t.strokeWidth=e.strokeWidth:t.strokeWidth=6,"undefined"!=typeof e.cycleTime?t.cycleTime=e.cycleTime:t.cycleTime=1,"undefined"!=typeof e.size?t.size=e.size:t.size=32;var i=(Math.abs(parseInt(t.size)/2)*-1,[]);i.push("<style>"),i.push("#ajaxloader {"),i.push("\tdisplay:table;"),i.push("\twidth: "+t.size+"px;"),i.push("\theight: "+t.size+"px;"),i.push("\tborder: "+t.strokeWidth+"px solid "+t.strokeColor+";"),i.push("box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"),i.push("border-bottom-color: black;"),i.push("\tborder-radius: 50%;"),i.push("\tbox-shadow: 0 0 25px 2px "+t.shadowColor+";"),i.push("\t-webkit-animation: spin "+t.cycleTime+"s linear infinite;"),i.push("\t-moz-animation: spin "+t.cycleTime+"s linear infinite;"),i.push("\t-ms-animation: spin "+t.cycleTime+"s linear infinite;"),i.push("\tanimation: spin "+t.cycleTime+"s linear infinite;"),i.push("}"),i.push("@-webkit-keyframes spin {"),i.push("\tfrom { -webkit-transform: rotate(0deg); opacity: 0.3; }"),i.push("\t50%  { -webkit-transform: rotate(180deg); opacity: 1; }"),i.push("\tto   { -webkit-transform: rotate(360deg); opacity: 0.3; }"),i.push("}"),i.push("@-moz-keyframes spin {"),i.push("\tfrom { -moz-transform: rotate(0deg); opacity: 0.3; }"),i.push("\t50%  { -moz-transform: rotate(180deg); opacity: 1; }"),i.push("\tto   { -moz-transform: rotate(360deg); opacity: 0.3; }"),i.push("}"),i.push("@-ms-keyframes spin {"),i.push("\tfrom { -ms-transform: rotate(0deg); opacity: 0.3; }"),i.push("\t50%  { -ms-transform: rotate(180deg); opacity: 1; }"),i.push("\tto   { -ms-transform: rotate(360deg); opacity: 0.3; }"),i.push("}"),i.push("@keyframes spin {"),i.push("\tfrom { transform: rotate(0deg); opacity: 0.3; }"),i.push("\t50%  { transform: rotate(180deg); opacity: 1; }"),i.push("\tto   { transform: rotate(360deg); opacity: 0.3; }"),i.push("}"),i.push("</style>"),i.push("<div id='ajaxloader'></div>");var s=i.join("\n");return s},_runJSOnLoad:function(){for(var e=A5.eleByClass("__A5Component_jsRunOnLoad"),i=1;i<=e.length;i++)eval(e[i-1].value),e[i-1].value=""},helpWindow:function(e,t){var i="_HelpWindow",s=this.getWindow(i),a="undefined"!=typeof arguments[3]?arguments[3]:"3in",n="undefined"!=typeof arguments[2]?arguments[2]:"4in",o="undefined"!=typeof arguments[4]?arguments[4]:"modal-resizable",r="undefined"!=typeof arguments[5]?arguments[5]:"",l=!1;if("dropdown"==o.split("-")[0]){l=!0;var d=$(r)}s||(s=this.createWindow(i,o,{body:{content:{type:"blank",elementId:"~"}},height:a,width:n,title:{html:"Help Window",location:"top",direction:this._defaultWindowTitleDirection,show:!0},disableMove:!1}));var h=s.getWindowId("body");$(h).innerHTML=e,s.setTitle(t),l?s.show("dropdown",d):s.show()},showDialogHelp:function(e){var t="__helpId="+e;this.ajaxCallback("G","1","__a5ShowDialogHelp","",t)},showFieldHelp:function(e,t){e=e.split(":")[0];var i=this.columnInfo[e].hlp;if("undefined"==typeof i||""==i)return!1;var s="__fieldname="+e+"&__helpId="+i+"&__instNum="+t;this.ajaxCallback("G",1,"system:showFieldHelp","",s)},openChildGrid:function(e){A5.component.runGrid(e)},createWindow:function(e,t){if(!this.getWindow(e)){if("string"==typeof t){var i=t.split("-");t=new Object,$u.o.assign(t,this._defaultWindowSettings[i.shift()]);for(var s=0;s<i.length;s++)"url"==i[s]?(t.body.content.type="url",t.body.content.url="about:blank"):"resizable"==i[s]&&(t.resize="both")}"object"==typeof arguments[2]&&$u.o.assign(t,arguments[2]),this._genericWindow[e]=new A5.Window(t)}return this._genericWindow[e]},getWindow:function(e){return"undefined"!=typeof this._genericWindow[e]&&this._genericWindow[e]},imageIsEmpty:function(e){e=e.toUpperCase();var t=this.getValue(e);(t.indexOf("null_1x")>-1||t==this.nullImage)&&(t=""),t=t.substring(0,50);var i=$(this.dialogId+".V.R1."+e+"_HIDDENA5FN");if(i){var s=i.src,a=i.value;""==s&&(s=a),s=s.substring(0,50)}else s="";var n=!1;return(t.length>0||s.length>0)&&(n=!0),!n},inkIsEmpty:function(e){var t=this.getValue(e),i=!1;return""!=t?(t=t.split("%json%"),t=t[2],i=t.length<=1):i=!0,i},signatureIsEmpty:function(e,t){if(e=e.toUpperCase(),"undefined"==typeof t){var i=this._sigControlDimensions[e],s=A5.u.convertUnits(i.width,"px"),a=A5.u.convertUnits(i.height,"px"),n=document.createElement("CANVAS");n.width=s,n.height=a,t=n.toDataURL("image/png",1).length+1,delete n}var o=$(this.dialogId+".V.R1."+e+".CANVAS"),r=$(this.dialogId+".V.R1."+e+".CANVASDIV");if(""==r.style.display){var l={};l.compressionFactor=1;var d=o.toDataURL("image/png",l.compressionFactor);return d.length<t}var h=this.getPointer(e);if(!h)return!0;var c=h.src;c=c.toLowerCase();var u=!1;return c.indexOf("null_1x1")>-1||(0==c.indexOf("data:image/")&&c.length<t||(0==c.indexOf(".png")||u))},phoneGapLoaded:function(){var e=this._cordovaReady;return"undefined"==typeof e&&(e=!1),e},_executeEvent:function(e){for(var t=!0,i=new Array,s=1;s<arguments.length;s++)i.push(arguments[s]);var a=!1;if("undefined"!=typeof this["__"+e]&&this["__"+e].constructor==Function&&(a=this["__"+e].apply(this,i),"boolean"==typeof a&&(t=t&&a)),"undefined"!=typeof this[e]&&this[e].constructor==Function&&(a=this[e].apply(this,i),"boolean"==typeof a&&(t=a)),"undefined"!=typeof this["_"+e]&&this["_"+e].constructor==Function&&(a=this["_"+e].apply(this,i),"boolean"==typeof a&&(t=t&&a)),"onInitializeComplete"==e){this.initialized=!0;for(var s=0;s<this._delayed.length;s++)this[this._delayed[s].m].apply(this,this._delayed[s].a);delete this._delayed}return t},_rsiOnClick:function(e,t){var i=this.id.split("."),s=i[3],a=$u.s.toNum(i[4]),n=$u.s.toNum(i[2]);t.setRepeatingSectionActiveRow(s,a,n)},argumentValue:function(e){if("undefined"==typeof this.stateInfo)return null;for(var t in this.stateInfo)if(0==t.indexOf("__args_")&&t.substr(9)==e){var i=this.stateInfo[t];return i}},_editorLow:function(e,t,i){if(!this.initialized)return!1;if(e=e.toUpperCase(),""==e)return!1;var s=this._editors[e];return"undefined"==typeof s?(alert("UX does not contain Editor Set: "+e),!1):$(this.dialogId+"."+e+"."+t)?(s._s&&(s._s.autoCommit&&this.editorCommit(e,!1),"undefined"!=typeof s.editors[s._s.state.editor].hide&&s.editors[s._s.state.editor].hide.call(this,s._s.state.value,s._s),$(this.dialogId+"."+e+"."+s._s.state.editor).style.display="none",s._s=!1),"undefined"==typeof i.autoCommit&&(i.autoCommit=s.autoCommit),s._s=i,$(this.dialogId+"."+e+"."+t).style.display="",s.editors[t].edit.call(this,i.state.value,i),s.show.call(this,i.state.value,i),void("undefined"!=typeof s.editors[t].show&&s.editors[t].show.call(this,i.state.value,i))):(alert("UX does not contain Editor: "+t),!1)},editorSetFromEditor:function(e){var t=this._EDITOR_EDITORSET[e],i="";return"undefined"!=typeof t&&(i=t.editorSet),"undefined"==typeof i&&(i=""),i},editorFromControl:function(e,t,i){t=t.toUpperCase();var s="undefined"!=typeof arguments[3]?arguments[3]:{};if(i.constructor==Array)for(var a=[],n=0;n<i.length;n++)a.push(this.getValue(i[n]));else var a=this.getValue(i);s.state={from:"control",editorSet:e,editor:t,control:i,onCommit:!1,value:a},this._editorLow(e,t,s)},editorFromValue:function(e,t,i){t=t.toUpperCase();var s="undefined"!=typeof arguments[3]?arguments[3]:{};s.state={from:"value",editorSet:e,editor:t,value:i},"function"==typeof arguments[4]&&(s.commit=arguments[4]),this._editorLow(e,t,s)},editorEcho:function(e){e=e.toUpperCase();var t=this._editors[e];if(t._s){var i=t.editors[t._s.state.editor].commit.call(this,t._s);if("undefined"!=typeof t.onEcho&&t.onEcho.constructor==Function&&t.onEcho.call(this,i,t._s),"undefined"!=typeof t._s.formView){var s=t._s.formView.name;this.formViewEcho(s,i)}}},_fixEditorSetName:function(e){if("undefined"==typeof e)return e;if(0==e.toUpperCase().indexOf("EDITOR:")){var t=e.split(":")[1],i=this._EDITOR_EDITORSET[t],s="";return"undefined"!=typeof i&&(s=i.editorSet),"undefined"==typeof s&&(s=!1),s}return e},editorCommit:function(e){if(e=this._fixEditorSetName(e),"undefined"!=e&&""==e){var t=this.getCurrentEditorSettings();t&&(e=t.state.editorSet)}if(!e)return!1;var i="undefined"==typeof arguments[1]||arguments[1];e=e.toUpperCase();var s=this._editors[e];if(s._s){var a=s.editors[s._s.state.editor].commit.call(this,s._s);if(s._s.state.value!=a){if("undefined"!=typeof s.editors[s._s.state.editor].validate&&s.editors[s._s.state.editor].validate.constructor==Function){var n=s.editors[s._s.state.editor].validate.call(this,a,s._s);if("boolean"==typeof n&&0==n)return!1}if("control"==s._s.state.from?s._s.state.control.constructor==Array||this.setValue(s._s.state.control,a):"function"==typeof s._s.commit&&s._s.commit.call(this,a,s._s),"undefined"!=typeof s.onCommit&&s.onCommit.constructor==Function&&s.onCommit.call(this,a,s._s),"undefined"!=typeof s._s.formView){var o=s._s.formView.name;this.formViewUpdate(o,s._s.formView.active.path,a),this._forms[o]&&this._forms[o].viewBox&&(this._forms[o].viewBox.activeGroup="")}}else if("undefined"!=typeof s._s.formView){var o=s._s.formView.name;this._forms[o]&&this._forms[o].viewBox&&(this._forms[o].viewBox.activeGroup=""),this.formViewClearEcho(o)}i?(s.hide.call(this,s._s),"undefined"!=typeof s.editors[s._s.state.editor].hide&&s.editors[s._s.state.editor].hide.call(this,s._s.state.value,s._s),$(this.dialogId+"."+e+"."+s._s.state.editor).style.display="none",s._s=!1):s._s.state.value=a}},editorCancel:function(e){if("undefined"!=typeof e){if(e=this._fixEditorSetName(e),"undefined"!=e&&""==e){var t=this.getCurrentEditorSettings();t&&(e=t.state.editorSet)}if(!e)return!1}if("undefined"==typeof e)for(var i in this._editors)this.editorCancel(i);else{e=e.toUpperCase();var i=this._editors[e];if(i._s){if(i.hide.call(this,i._s),"undefined"!=typeof i.editors[i._s.state.editor].hide&&i.editors[i._s.state.editor].hide.call(this,i._s.state.value,i._s),$(this.dialogId+"."+e+"."+i._s.state.editor).style.display="none","undefined"!=typeof i._s.formView){var s=i._s.formView.name;this._forms[s]&&this._forms[s].viewBox&&(this._forms[s].viewBox.activeGroup=""),this.formViewClearEcho(s)}i._s=!1}}},getCurrentEditorSettings:function(){var e=this.__currentEditorSettings;return"undefined"==typeof e&&(e=!1),e},_formPrepare:function(e){e=e.toUpperCase();var t=this._forms[e];if(t){"undefined"==typeof t.version&&(t.version=0),"undefined"==typeof t.fields&&(t.fields=t.columns),"undefined"==typeof t.dataSrc&&(t.dataSrc={}),t._echo=!1;var i={dialogId:this.dialogId,form:e,state:{canCommit:!0,isDirty:!1,errors:{},conflicts:{},dirty:{},fields:{},groups:{}},data:{},oData:{},loopNavigate:t.loopNavigate,loopNavigateNullSelection:t.loopNavigateNullSelection,allowNullSelection:t.allowNullSelection,fields:t.fields,groups:t.groups,items:{"*resolveConflict":{selectable:!1,onClick:function(e,t,i,s){var a=this.fields[e.replace(/\[[0-9]\]/g,"")];a&&this.state.conflicts[e]&&window[this.dialogId+"_DlgObj"]._formViewResolveConflict(this.form,e,this.state.conflicts[e])}},"*edit":{selectable:!0,selectedClassName:t.selectedClassName,onSelect:function(e,t,i,s){var a=window[this.dialogId+"_DlgObj"]._formViewGetEditInfo(this.form,e,!1,!1);if(a.formView)if(this.state.conflicts[e])window[this.dialogId+"_DlgObj"]._formViewResolveConflict(this.form,e,this.state.conflicts[e]);else if("group"==a.formView.active.type){var n=this.groups[a.formView.active.name];if(this.activeGroup==a.formView.active.name&&window[this.dialogId+"_DlgObj"].editorCommit(n.editor[0],!1),this.activeGroup=a.formView.active.name,n.editor.constructor==Function){var o=n.editor(a);window[this.dialogId+"_DlgObj"].editorFromValue(o[0],o[1],a.formView.active.value,a)}else window[this.dialogId+"_DlgObj"].editorFromValue(n.editor[0],n.editor[1],a.formView.active.value,a)}else{var r=this.fields[a.formView.active.name];if(r.editor.constructor==Function){var o=r.editor(a);window[this.dialogId+"_DlgObj"].editorFromValue(o[0],o[1],a.formView.active.value,a)}else window[this.dialogId+"_DlgObj"].editorFromValue(r.editor[0],r.editor[1],a.formView.active.value,a)}}},"*group":{selectable:!0,selectedClassName:t.selectedClassName,onSelect:function(e,t,i,s){var a=this.groups[e];if(a){this.activeGroup==t&&window[this.dialogId+"_DlgObj"].editorCommit(a.editor[0]),this.activeGroup=t;var n=window[this.dialogId+"_DlgObj"]._formViewGetEditInfo(this.form,!1,e,!1);if(a.editor.constructor==Function){var o=a.editor(n);window[this.dialogId+"_DlgObj"].editorFromValue(o[0],o[1],n.formView.active.value,n)}else window[this.dialogId+"_DlgObj"].editorFromValue(a.editor[0],a.editor[1],n.formView.active.value,n)}}},"*toggle":{selectable:!0,onClick:function(e,t,i,s){if(this.state.conflicts[e])window[this.dialogId+"_DlgObj"]._formViewResolveConflict(this.form,e,this.state.conflicts[e]);else{window[this.dialogId+"_DlgObj"].editorCancel();var a=!0,n=!1,o=this.fields[e.replace(/\[[0-9]\]/g,"")];if(o&&"object"==typeof o.values&&(a=o.values.on,n=o.values.off),"true"===t)window[this.dialogId+"_DlgObj"].formViewUpdate(this.form,t,a);else if("false"===t)window[this.dialogId+"_DlgObj"].formViewUpdate(this.form,t,n);else{var r=this._getData(e),l=a;r.d[r.n]==l&&(l=n),window[this.dialogId+"_DlgObj"].formViewUpdate(this.form,e,l)}}}},"*select":{selectable:!0,onClick:function(e,t,i,s){this.state.conflicts[e]?window[this.dialogId+"_DlgObj"]._formViewResolveConflict(this.form,e,this.state.conflicts[e]):(window[this.dialogId+"_DlgObj"].editorCancel(),window[this.dialogId+"_DlgObj"].formViewUpdate(this.form,e,t))}},"*multi-select":{selectable:!0,onClick:function(e,t,i,s){if(this.state.conflicts[e])window[this.dialogId+"_DlgObj"]._formViewResolveConflict(this.form,e,this.state.conflicts[e]);else{window[this.dialogId+"_DlgObj"].editorCancel();var a=this._getData(e),n=!1,o=a.d[a.n],r=this.fields[e.replace(/\[[0-9]\]/g,"")],l=",";r&&"undefined"!=typeof r.separator&&(l=r.separator),"string"==typeof o&&(n=!0,o=""==o?[]:o.split(l));for(var d=!0,i=0;i<o.length;i++)if(o[i].trim().toLowerCase()==t.toLowerCase()){
o.splice(i,1),d=!1;break}d&&(o.push(t),r.sort&&("a"==r.sort?o.sort():"d"==r.sort?(o.sort(),o.reverse()):r.sort.constructor==Function&&o.sort(r.sort))),n&&(o=o.join(l)),window[this.dialogId+"_DlgObj"].formViewUpdate(this.form,e,o)}}}},_getData:function(e){var t=this.data,i=this.oData,s=/\.|\[/g,a=e;if(e.search(s)!=-1){e=e.split(s),a=e.pop(),"]"==a.charAt(a.length-1)&&(a=$u.s.toNum(a));for(var n=0;n<e.length;n++)if("]"==e[n].charAt(e[n].length-1)){var o=$u.s.toNum(e[n]);t=t[o],i=i[o]}else t=t[e[n]],i=i[e[n]]}return{d:t,od:i,n:a}},layout:t.layout,layouts:t.layouts,scroll:!1,onDraw:t.onDraw,onBeforeDraw:t.onBeforeDraw,onSelect:t.onSelect,onSelectComplete:t.onSelectComplete};if(t.version<1&&(t.columns=t.fields),$u.o.assign(i.items,t.items,!0),"undefined"!=typeof t.state&&$u.o.assign(i.state,t.state,!0),$u.o.assign(i.state.fields,t.fields,!0),$u.o.assign(i.state.groups,t.groups,!0),"controls"==t.from)for(var s=0;s<t.bind.length;s++)this._formControls[t.bind[s]]=e;t.viewBox=new A5.ViewBox(t.contId,null,i),"function"==typeof t.onInitialize&&t.onInitialize.call(t.viewBox)}},_formViewGetEditInfo:function(e,t,i,s){var a={};e=e.toUpperCase();var n=this._forms[e];if(n){var o={};if(t){var r=t.replace(/\[[0-9]\]/g,"");o=n.fields[r],o.group&&(i=o.group)}if(s&&$u.o.assign(a,s),a.formView={name:e,fields:n.fields,groups:n.groups,errors:n.viewBox.state.errors,conflicts:n.viewBox.state.conflicts,data:n.viewBox.data,initialData:n.viewBox.oData,active:{}},i){var l=n.groups[i];if(l){n.version<1&&$u.o.assign(a,{"*a5other":s,"*a5form":n.viewBox.form,"*a5column":t,"*a5group":l,oldValue:[],error:{has:!1,html:""},data:{}}),l.settings&&$u.o.assign(a,l.settings),o.settings&&$u.o.assign(a,o.settings);var d=[],h=[],c=[],u=[],f=[],p=!1,m=[],_=!1;"undefined"==typeof l.fields&&(l.fields=l.columns);for(var g=0;g<l.fields.length;g++){c.push(l.fields[g]),u.push(n.fields[l.fields[g]]),n.viewBox.state.errors[l.fields[g]]?(p=!0,f.push(n.viewBox.state.errors[l.fields[g]])):f.push(!1),n.viewBox.state.conflicts[l.fields[g]]?(_=!0,m.push(n.viewBox.state.conflicts[l.fields[g]])):m.push(!1);var v=n.viewBox._getData(l.fields[g]);d.push(v.d[v.n]),h.push(v.od[v.n])}n.version<1&&(a.data=v.d,a.oldValue=h),a.formView.active={type:"group",name:i,path:c,value:d,initialValue:h,scopeData:v.d,scopeInitialData:v.od,info:u,errors:{has:p,error:f},conflicts:{has:_,conflict:m}}}}else{var v=n.viewBox._getData(t);n.version<1&&$u.o.assign(a,{"*a5other":s,"*a5form":n.viewBox.form,"*a5column":t,oldValue:v.od[v.n],error:{has:!1,html:""},conflicts:!1,data:{}}),o.settings&&$u.o.assign(a,o.settings);var y=!1,b=!1;n.viewBox.state.errors[t]&&(y=!0,b=n.viewBox.state.errors[t]);var w=!1,I=!1;n.viewBox.state.conflicts[t]&&(w=!0,I=n.viewBox.state.conflicts[t]),n.version<1&&(a.data=v.d,a.columnInfo=o,n.viewBox.state.errors[t]&&(a.error={has:y,html:b}),a.conflicts=I),a.formView.active={type:"field",name:r,path:t,value:v.d[v.n],initialValue:v.od[v.n],scopeData:v.d,scopeInitialData:v.od,info:o,errors:{has:y,error:b},conflicts:{has:w,conflict:I}}}}return a},formViewRecreate:function(e,t){e=e.toUpperCase();var i=this._forms[e];i&&(delete t._getData,t.items&&(delete t.items["*resolveConflict"],delete t.items["*edit"],delete t.items["*group"],delete t.items["*toggle"],delete t.items["*select"],delete t.items["*multi-select"]),$u.o.assign(i,t),i.viewBox.state={canCommit:!0,isDirty:!1,errors:{},conflicts:{},dirty:{},fields:{},groups:{}},i.viewBox.data={},i.viewBox.oData={},i.viewBox.loopNavigate=i.loopNavigate,i.viewBox.loopNavigateNullSelection=i.loopNavigateNullSelection,i.viewBox.allowNullSelection=i.allowNullSelection,i.viewBox.fields=i.fields,i.viewBox.groups=i.groups,i.viewBox.layout=i.layout,i.viewBox.layouts=i.layouts,i.viewBox.onDraw=i.onDraw,i.viewBox.onBeforeDraw=i.onBeforeDraw,i.viewBox.onSelect=i.onSelect,i.viewBox.onSelectComplete=i.onSelectComplete,$u.o.assign(i.viewBox.items,i.items),"undefined"!=typeof i.state&&$u.o.assign(i.viewBox.state,i.state,!0),$u.o.assign(i.viewBox.state.fields,i.fields),$u.o.assign(i.viewBox.state.groups,i.groups))},formViewIsDirty:function(e){try{var t=this._forms[e].viewBox.state.isDirty;return t}catch(i){return!1}},_formViewValidate:function(e,t,i,s,a,n){var o="",r="",l=!1,d=!1;if(t.constructor==Array){r=$if(""==s,u,a+"."+u),l=e.viewBox.fields[r];for(var h=0;h<t.length;h++)if(o=$if(""==s,u+"["+h+"]",s+"."+u+"["+h+"]"),d=!1,null!=t[h]&&(t[h].constructor!=Array&&t[h].constructor!=Object||(this._formViewValidate(e,t[h],i[h],o,r,n),d=!0)),!d&&l&&"undefined"!=typeof l.validate){var c=l.validate.call(e.viewBox,t[h],t[h],i[h]||null);"undefined"!=typeof c&&c?(n.has=!0,"string"==typeof c?n.errs[o]={html:c,canCommit:!1}:n.errs[o]=c):(n.hasClear=!0,n.errsClear.push(o))}}else if(t.constructor==Object)for(var u in t)if(o=$if(""==s,u,s+"."+u),r=$if(""==s,u,a+"."+u),l=e.viewBox.fields[r],d=!1,null!=t[u]&&(t[u].constructor!=Array&&t[u].constructor!=Object||(this._formViewValidate(e,t[u],i[u],o,r,n),d=!0)),!d&&l&&"undefined"!=typeof l.validate){var c=l.validate.call(e.viewBox,t[u],t[u],i[u]||null);"undefined"!=typeof c&&c?(n.has=!0,"string"==typeof c?n.errs[o]={html:c,canCommit:!1}:n.errs[o]=c):(n.hasClear=!0,n.errsClear.push(o))}},formViewValidate:function(e){e=e.toUpperCase();var t=this._forms[e];if(t){var i={has:!1,hasClear:!1,errs:[],errsClear:[]};return this._formViewValidate(t,t.viewBox.data,t.viewBox.oData,"","",i),(i.has||i.hasClear)&&(i.has&&this.formViewSetErrors(e,"*local",i.errs),i.hasClear&&this.formViewClearErrors(e,"*local",i.errsClear),t.viewBox.refresh(!0)),!i.has}return!0},formViewCommit:function(e){e=e.toUpperCase();var t=this._forms[e];if(t){if("undefined"!=typeof t.onBeforeCommit&&t.onBeforeCommit.constructor==Function){var i=t.onBeforeCommit.call(this);if("boolean"==typeof i&&0==i)return!1}if(t.viewBox.state.canCommit&&t.viewBox.state.isDirty){var s=!1;if("list"==t.from){this._formViewListSetData(t.lists,t.row,t.viewBox.data,t);var a=this.getControl(t.lists.name);a&&a._refreshListRecursive&&a._refreshListRecursive()}else if("object"==t.from||"staticJSON"==t.from||"javascriptFunction"==t.from||"custom"==t.from)s="staticJSON"==t.from?t.staticJSON:t.dataSrc,$u.o.assign(t.viewBox.oData,t.viewBox.data);else if("uxcontrols"==t.from)for(var s=t.viewBox.data,n=t.uxcontrols,o=0;o<n.length;o++)this.setValue(n[o],s[n[o]],!1);else if("controls"==t.from){var r=t.viewBox.data;this._setValueFromForm=!0;for(var l in r)this.setValue(l,r[l]);this._setValueFromForm=!1}"undefined"!=typeof t.onCommit&&t.onCommit.constructor==Function&&t.onCommit.call(this,e,t.viewBox.data,s)}}},formViewRow:function(e,t){e=e.toUpperCase();var i=this._forms[e];if(i)return"undefined"!=typeof t&&(i.row=t),i.row},formViewGetState:function(e){e=e.toUpperCase();var t=this._forms[e];return t?t.viewBox.state:{}},formViewFieldInfo:function(e,t){e=e.toUpperCase();var i=this._forms[e];if(i){var s=i.fields[t];if(s)return s}return!1},formViewInvokeEditor:function(e,t,i){"undefined"==typeof i&&(i=!1),e=e.toUpperCase();var s=this._forms[e];if(s){var a=this._formViewGetEditInfo(e,t,!1,i);if(a.formView)if(s.viewBox.state.conflicts[t])this._formViewResolveConflict(s.viewBox.form,t,s.viewBox.state.conflicts[t],i);else if("group"==a.formView.active.type){var n=s.viewBox.groups[a.formView.active.name];if(s.viewBox.activeGroup==a.formView.active.name&&this.editorCommit(n.editor[0],!1),s.viewBox.activeGroup=a.formView.active.name,n.editor.constructor==Function){var o=n.editor(a);this.editorFromValue(o[0],o[1],a.formView.active.value,a)}else this.editorFromValue(n.editor[0],n.editor[1],a.formView.active.value,a)}else{var r=a.formView.fields[a.formView.active.name];if(r.editor.constructor==Function){var o=r.editor(a);this.editorFromValue(o[0],o[1],a.formView.active.value,a)}else this.editorFromValue(r.editor[0],r.editor[1],a.formView.active.value,a)}}},formViewRefresh:function(e){if(!this.initialized)return this._delay("formViewRefresh",arguments),!1;e=e.toUpperCase();var t=this._forms[e];if(t)if("list"==t.from){var i=t.viewBox.state;i.dirty={},this.formViewClearErrors(e,"*list",!1,!1),this.formViewClearConflicts(e,"*list",!1,!1),i.isDirty=!1,i.row=t.row;var s="";s=i.row==-1?this._formViewDefaultValues(e):this._formViewListGetData(t.lists,t.row,i),t.viewBox.oData&&$u.o.assign(t.viewBox.oData,s),t.viewBox.populate(s)}else if("uxcontrols"==t.from){var i=t.viewBox.state;i.dirty={},i.isDirty=!1;for(var s={},a=t.uxcontrols,n=0;n<a.length;n++)s[a[n]]=this.getValue(a[n]);t.viewBox.oData&&$u.o.assign(t.viewBox.oData,s),t.viewBox.populate(s)}else if("custom"==t.from){var i=t.viewBox.state;i.dirty={},i.isDirty=!1;var s={};s=t.dataSrc,s.constructor==Array&&(row=t.row,"number"==typeof row&&(s=s[row])),t.viewBox.oData&&$u.o.assign(t.viewBox.oData,s),t.viewBox.populate(s)}else if("staticJSON"==t.from){var i=t.viewBox.state;i.dirty={},i.isDirty=!1;var s={};s=t.staticJSON,s.constructor==Array&&(row=t.row,"number"==typeof row&&(s=s[row])),t.viewBox.oData&&$u.o.assign(t.viewBox.oData,s),t.viewBox.populate(s)}else if("javascriptFunction"==t.from){var i=t.viewBox.state;i.dirty={},i.isDirty=!1;var s={};"function"==typeof t.javascriptFunction&&(s=t.javascriptFunction.call()),s=t.javascriptFunction,s.constructor==Array&&(row=t.row,"number"==typeof row&&(s=s[row])),t.viewBox.oData&&$u.o.assign(t.viewBox.oData,s),t.viewBox.populate(s)}else if("controls"==t.from){var s={};t.viewBox.oData={},t.viewBox.state.dirty={};for(var o=null,n=0;n<t.bind.length;n++)o=this.getPointer(t.bind[n]),o&&(s[t.bind[n]]=o.value,t.viewBox.oData[t.bind[n]]=o.value,"true"==$ga(o,"A5IsDirty")&&(t.viewBox.state.dirty[t.bind[n]]=!0));t.viewBox.populate(s)}else if("object"==t.from){var s={};t.viewBox.oData&&$u.o.assign(s,t.viewBox.oData),t.viewBox.populate(s)}},formViewUpdate:function(e,t,i){e=e.toUpperCase();var s=this._forms[e];if(s){if(s._echo=!1,"undefined"!=typeof s.onBeforeUpdate&&s.onBeforeUpdate==Function){var a=s.onBeforeUpdate.call(this,t,i);if("boolean"==typeof a&&0==a)return!1}t.constructor!=Array&&(t=[t],i=[i]);for(var n=!1,o=/\.|\[/g,r="",l=!1,d={},h=!1,c=[],u=0;u<t.length;u++){var f=s.viewBox.data,p=s.viewBox.oData,m=t[u];if(m.search(o)!=-1){var _=m.split(o);m=_.pop(),"]"==m.charAt(m.length-1)&&(m=$u.s.toNum(m));for(var g=0;g<_.length;g++)if("]"==_[g].charAt(_[g].length-1)){var v=$u.s.toNum(_[g]);f=f[v],p=p[v]}else f=f[_[g]],p=p[_[g]]}if(f[m]!=i[u]){if(r=s.viewBox.fields[t[u].replace(/\[[0-9]\]/g,"")],r&&"undefined"!=typeof r.validate){var y=r.validate.call(s.viewBox,i[u],f[m],p[m]);"undefined"!=typeof y&&y?(l=!0,"string"==typeof y?d[t[u]]={html:y,canCommit:!1}:d[t[u]]=y):(h=!0,c.push(t[u]))}"list"==s.from&&t[u].split("__LIST__").length>1&&(f._isDirty||(f._oldData=this._formViewListGetOldData(f),f._isDirty=!0)),f[m]=i[u],s.autoCommit&&("object"==s.from?p[m]=i[u]:"controls"==s.from&&(this._setValueFromForm=!0,this.setValue(m,i[u]),this._setValueFromForm=!1)),s.viewBox.state.dirty[t[u]]=!0,s.viewBox.state.isDirty=!0,n=!0}}n&&(l&&this.formViewSetErrors(e,"*local",d),h&&this.formViewClearErrors(e,"*local",c),s.viewBox.refresh(!0),s.autoCommit&&"list"==s.from&&this.formViewCommit(e),"undefined"!=typeof s.onUpdate&&s.onUpdate==Function&&s.onUpdate.call(this,t,i))}},formViewEcho:function(e,t){e=e.toUpperCase();var i=this._forms[e];if(i){if(t.constructor==Array&&(t=t.join(" ")),"undefined"!=typeof i.onBeforeEcho&&i.onBeforeEcho==Function){var s=i.onBeforeEcho.call(this,t);if("boolean"==typeof s&&0==s)return!1}var a=$(i.viewBox._s.id[0]+".DISPLAY");a&&("true"!=$ga(a,"a5-echo")&&($sa(a,"a5-echo","true"),""!=i.echoClassName&&$acn(i.viewBox._s.id[0],i.echoClassName),i._echo={id:i.viewBox._s.id[0],html:a.innerHTML}),a.innerHTML=t)}},formViewClearEcho:function(e){e=e.toUpperCase();var t=this._forms[e];t&&t._echo&&($(t._echo.id+".DISPLAY").innerHTML=t._echo.html,""!=t.echoClassName&&$rcn(t._echo.id,t.echoClassName),t._echo=!1)},formViewSetLayout:function(e,t){e=e.toUpperCase(),this._forms[e]&&this._forms[e].viewBox.setLayout(t)},formViewNavigate:function(e,t){e=e.toUpperCase(),this._forms[e]&&this._forms[e].viewBox.navigate(t)},formViewSelect:function(e,t){e=e.toUpperCase(),this._forms[e]&&this._forms[e].viewBox.setValue(t)},formViewGetSelection:function(e){return e=e.toUpperCase(),!!this._forms[e]&&this._forms[e].viewBox.value},formViewSetDirty:function(e,t,i){e=e.toUpperCase();var s=this._forms[e];if(s){var a=s.viewBox.state.dirty;i?a[t]=!0:delete a[t],s.viewBox.refresh(!0)}},formViewSetErrors:function(e,t,i){e=e.toUpperCase();var s=this._forms[e];if(s){var a=s.viewBox.state.errors;for(var n in i)"undefined"==typeof a[n]&&(a[n]={}),a[n][t]=i[n],"undefined"==typeof a[n][t].canCommit&&(a[n][t].canCommit=!0);this._formViewUpdateState(s),s.viewBox.refresh(!0)}},formViewClearErrors:function(e){e=e.toUpperCase();var t=this._forms[e];if(t){var i="undefined"!=typeof arguments[1]&&arguments[1],s="undefined"!=typeof arguments[2]&&arguments[2],a="undefined"==typeof arguments[3]||arguments[3];if(i===!1)t.viewBox.state.errors={};else{var n=t.viewBox.state.errors;if(s===!1)for(var o in n)delete n[o][i],"{}"==$u.o.toJSON(n[o])&&delete n[o];else for(var r=0;r<s.length;r++)n[s[r]]&&(delete n[s[r]][i],"{}"==$u.o.toJSON(n[s[r]])&&delete n[s[r]])}this._formViewUpdateState(t),a&&t.viewBox.refresh(!0)}},formViewSetConflicts:function(e,t,i){e=e.toUpperCase();var s=this._forms[e];if(s){var a=s.viewBox.state.conflicts;for(var n in i)"undefined"==typeof a[n]&&(a[n]={}),a[n][t]=i[n],"undefined"==typeof a[n][t].canCommit&&(a[n][t].canCommit=!0);this._formViewUpdateState(s),s.viewBox.refresh(!0)}},formViewClearConflicts:function(e){e=e.toUpperCase();var t=this._forms[e];if(t){var i="undefined"!=typeof arguments[1]&&arguments[1],s="undefined"!=typeof arguments[2]&&arguments[2],a="undefined"==typeof arguments[3]||arguments[3];if(i===!1)t.viewBox.state.conflicts={};else{var n=t.viewBox.state.conflicts;if(s===!1)for(var o in n)delete n[o][i],"{}"==$u.o.toJSON(n[o])&&delete n[o];else for(var r=0;r<s.length;r++)delete n[s[r]][i],"{}"==$u.o.toJSON(n[s[r]])&&delete n[s[r]]}this._formViewUpdateState(t),a&&t.viewBox.refresh(!0)}},formViewDataSrc:function(e,t){e=e.toUpperCase();var i=this._forms[e];return!!i&&(t&&(i.dataSrc=t,i.from="custom"),i.dataSrc)},formViewData:function(e){e=e.toUpperCase();var t=this._forms[e];if(t){var i="undefined"!=typeof arguments[1]&&arguments[1];if("object"==t.from&&i){t.viewBox.state.dirty={},t.viewBox.oData=i;var s={};$u.o.assign(s,i),t.viewBox.populate(s)}return t.viewBox.data}},formViewNewRecord:function(e){if(!this.initialized)return this._delay("formViewNewRecord",arguments),!1;e=e.toUpperCase();var t=this._forms[e];if(!t)return!1;if("list"==t.from.toLowerCase()){var i=this.getControl(t.lists.name);i&&i._deselectAll()}t.row=-1,this.formViewRefresh(e)},formViewGetItemClassName:function(e,t,i){e=e.toUpperCase();var s=this._forms[e],a=[];return s&&(i.dirty[t]&&a.push(s.dirtyClassName),i.errors[t]&&a.push(s.errorClassName),i.conflicts[t]&&a.push(s.conflictClassName)),a.join(" ")},formViewGetItemErrors:function(e,t,i){var s="undefined"==typeof arguments[3]||arguments[3];e=e.toUpperCase();var a=this._forms[e],n=a.errorTextClassName;if(a){var o=!1;if(i.conflicts[t]?o=i.conflicts[t]:i.errors[t]&&(o=i.errors[t]),o){if(s){var r=[];for(var l in o)r.push(o[l].html);var d=r.join("\n");return d='<span class="'+n+'">'+d+"</span>"}return o}}return!!s&&""},_formViewDefaultValues:function(e){e=e.toUpperCase();var t=this._forms[e];if(!t)return{};var i={},s="";for(var a in t.fields)"function"==typeof t.fields[a].defaultValue?(s=t.fields[a].defaultValue.call(),i[a]=s):i[a]="";return i},_formViewResolveConflict:function(e,t,i){var s=!1;"undefined"!=typeof arguments[3]&&(s=arguments[3]),e=e.toUpperCase();var a=this._forms[e];if(a)if(a.conflictEditor){var n=this._formViewGetEditInfo(e,t,!1,s);if(a.conflictEditor.constructor==Function){var o=a.conflictEditor(n);this.editorFromValue(o[0],o[1],n.formView.active.value,n)}else this.editorFromValue(a.conflictEditor[0],a.conflictEditor[1],n.formView.active.value,n)}else a.resolveConflict.constructor==Function&&a.resolveConflict(t,i)},_formViewListSetData:function(e,t,i,s){var a=this.getControl(e.name);t==-1?("undefined"!=typeof a.addTableRow?a.addTableRow(i):a.appendRows([i]),s.row=a._data.length-1,a.setValue(s.row,!1)):"undefined"!=typeof a.updateTableRow?a.updateTableRow(t,i):a.updateRow(t,i)},_formViewListGetData:function(e,t,i){if(t==-1){var s={};return s}var a=this.getControl(e.name),n=a.getData(t),o={};return n&&(this._formViewListGetDataLow(n,o,i,""),this._formViewListGetDataSub(e,n,o,i,"")),o},_formViewListGetDataSub:function(e,t,i,s,a){if(e.children&&0!=e.children.length)for(var n=0;n<e.children.length;n++){var o="__LIST__"+e.children[n].name.toUpperCase();if(t[o]){i[o]=[];for(var r=0;r<t[o].length;r++)i[o][r]={},this._formViewListGetDataLow(t[o][r],i[o][r],s,a+o+"["+r+"]."),"undefined"!=typeof e.children[n].children&&this._formViewListGetDataSub(e.children[n],t[o][r],i[o][r],s,a+o+"["+r+"].")}}},_formViewListGetDataLow:function(e,t,i,s){for(var a in e)"object"!=typeof e[a]||null==e[a]?t[a]=e[a]:"object"==typeof e[a]&&"_"!=a[0]&&null!=e[a]&&(e[a].constructor==Array?t[a]=[]:t[a]={},$u.o.assign(t[a],e[a]));if(e._isDirty)for(var a in e._oldData)e._oldData[a]!=e[a]&&(i.dirty[s+a]=!0);if(e._hasServerSideError)for(var n=0;n<e._serverSideErrors.length;n++)"undefined"==typeof i.errors[s+e._serverSideErrors[n].fieldName]&&(i.errors[s+e._serverSideErrors[n].fieldName]={}),i.errors[s+e._serverSideErrors[n].fieldName]["*list"]={html:e._serverSideErrors[n].errorText};if(e._hasWriteConflictErrors)for(var n=0;n<e._writeConflictErrors.length;n++){"undefined"==typeof i.conflicts[s+e._writeConflictErrors[n].fieldName]&&(i.conflicts[s+e._writeConflictErrors[n].fieldName]={});var o=e._writeConflictErrors[n].errorText;o=o.replace("onclick",'a5-item="*resolveConflict" a5-value="'+e._writeConflictErrors[n].fieldName+'" xonclick');var r={newValue:e._writeConflictErrors[n].newValue,oldValue:e._writeConflictErrors[n].oldValue,oldValueCurrent:e._writeConflictErrors[n].oldValueCurrent};i.conflicts[s+e._writeConflictErrors[n].fieldName]["*list"]={html:o,conflictValues:r}}},_formViewListGetOldData:function(e){var t={},i=["__primaryKey","__a5crc","*key","*renderIndex","*value","_isNewRow","_isDirty","__locationLatitude","__locationLongitude","_hasServerSideError","_serverSideErrors","_flagServerSideErrorInChild","_flagWriteConflictErrorInChild","_writeConflictErrors","_hasWriteConflictErrors","_flagWriteConflictErrorInChild","_hasGlobalErrors","_flagGlobalErrorInChild","_globalErrors","_hasServerSideError","_flagServerSideErrorInChild","_flagViewed","__displayStyle"];for(var s in e)i.indexOf(s)==-1&&("object"!=typeof e[s]?t[s]=e[s]:null==e[s]?t[s]=null:e[s].constructor==Date&&(t[s]=e[s]));return t},_formViewUpdateState:function(e){e.viewBox.state.canCommit=!0;var t=e.viewBox.state.errors;for(var i in t)for(var s in t[i])if("undefined"!=typeof t[i][s].canCommit&&!t[i][s].canCommit){e.viewBox.state.canCommit=!1;break}if(e.viewBox.state.canCommit){t=e.viewBox.state.conflicts;for(var i in t)for(var s in t[i])if("undefined"!=typeof t[i][s].canCommit&&!t[i][s].canCommit){e.viewBox.state.canCommit=!1;break}}}},"undefined"==typeof A5.component&&(A5.component=new Object),A5.component.remove=function(e){var t="UX";if(e=e.toUpperCase(),"UX"==t){if("undefined"!=typeof window[e+"_PanelObj"]){var i=window[e+"_DlgObj"].parentComponentAlias,s=!1;if(i&&window[i+"_PanelObj"].getPanel(e)){var a=window[e+"_PanelObj"]._parentPanelName;a&&(window[i+"_DlgObj"].panelGet(a).removePanel(e),s=!0)}s||window[e+"_PanelObj"].destroy();var n=$(window[e+"_PanelObj"].getPanelId());n&&n.parentNode&&n.parentNode.removeChild(n),delete window[e+"_PanelObj"]}else{var n=$(e+".R1");n&&n.parentNode&&n.parentNode.removeChild(n)}var n=$(e+".__IFRAME1");n&&n.parentNode&&n.parentNode.removeChild(n);var n=$(e+".PARAMETERBUCKET");n&&n.parentNode&&n.parentNode.removeChild(n);var n=$(e+"._GETPHOTO");if(n&&n.parentNode&&n.parentNode.removeChild(n),"undefined"!=typeof window[e+"_DlgObj"]){window[e+"_DlgObj"]._destroy();try{delete window[e+"_DlgObj"]}catch(o){window[e+"_DlgObj"]=void 0}}}},A5.ts=function(){var e=new Date;return e.getTime().toString(36)},$JS=function(e,t){return t?JSON.stringify(e,"","\t"):JSON.stringify(e)},A5.UUID=function(){var e=arguments[0];"undefined"!=typeof e&&(e=arguments[0]);var t="";e&&(t=new Date,t=t.getTime().toString(36)+"--");var i,s,a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=a,o=[];n.length;for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",i=0;i<36;i++)o[i]||(s=0|16*Math.random(),o[i]=n[19==i?3&s|8:s]);return t+o.join("")},A5.parseFilename=function(e){var t=e.split("/"),i=t[t.length-1],s="";t.length>1&&(t.pop(),s=t.join("/"));var a={};return a.name=i,a.path=s,a},A5.u.template.formats.dateFormat=function(e,t){var i=A5.serverSideDateFormat,s="";if((e.toLowerCase().indexOf("pm")>0||e.toLowerCase().indexOf("am")>0)&&(s=" AM"),i=i+" 0h:0m:0s"+s,"time"==t.split("|")[0]){t=t.split("|")[1];var a=i.substring(2,3);e="01"+a+"01"+a+"2014 "+e}if("defaultdate"==t.toLowerCase())t=A5.__componentObj.stateInfo.__dtfmt;else if("defaultdatetime"==t.toLowerCase()){var n=A5.__componentObj.stateInfo.__tfmt;t=A5.__componentObj.stateInfo.__dtfmt+" "+n}else if("defaulttime"==t.toLowerCase()){t=A5.__componentObj.stateInfo.__tfmt;var a=i.substring(2,3);e="01"+a+"01"+a+"2014 "+e}else t=t.replace("&&"," ");var o="";return o=e.constructor!=Date?A5.stringToDate(e,i):e,o.toFormat(t)},A5.lzw_encode=function(e){for(var t,i={},s=(e+"").split(""),a=[],n=s[0],o=256,r=1;r<s.length;r++)t=s[r],null!=i[n+t]?n+=t:(a.push(n.length>1?i[n]:n.charCodeAt(0)),i[n+t]=o,o++,n=t);a.push(n.length>1?i[n]:n.charCodeAt(0));for(var r=0;r<a.length;r++)a[r]=String.fromCharCode(a[r]);return a.join("")},A5.lzw_decode=function(e){for(var t,i={},s=(e+"").split(""),a=s[0],n=a,o=[a],r=256,l=1;l<s.length;l++){var d=s[l].charCodeAt(0);t=d<256?s[l]:i[d]?i[d]:n+a,o.push(t),a=t.charAt(0),i[r]=n+a,r++,n=t}return o.join("")},A5.deflate=function(e){var t,i,s,a="";if(i=e.length,i<1||"string"!=typeof e)return e;for(e=unescape(encodeURIComponent(e)),i%2===1&&(e+=String.fromCharCode(0)),t=0,i=e.length;t<i;t+=2)s=(e.charCodeAt(t+1)<<8)+e.charCodeAt(t),a+=String.fromCharCode(s);return a},A5.inflate=function(e){if(e.length<1||"string"!=typeof e)return e;var t,i,s,a,n,o="";for(a=0,n=e.length;a<n;a++)t=e.charCodeAt(a),i=t>>8,s=t-(i<<8),o+=String.fromCharCode(s),a==n-1&&0==i||(o+=String.fromCharCode(i));return decodeURIComponent(escape(o))},A5.u.timeTracker={_:{st:!1,m:[]},start:function(){this._.st=Date.now(),this._.m=[]},log:function(e){var t=Date.now()-this._.st,i=t;this._.m.length>0&&(i=t-this._.m[this._.m.length-1].totalTime,this._.m[this._.m.length-1].toNextTime=i),this._.m.push({totalTime:t,fromLastTime:i,toNextTime:0,message:e})},getLog:function(){var e=this._.m[this._.m.length-1];return e.toNextTime=Date.now()-e.totalTime,this._.m}};
function calcURL(c){return c}